{"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/serializer/json-patch.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/serializer/json-patch.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":27}},"2":{"start":{"line":4,"column":16},"end":{"line":4,"column":38}},"3":{"start":{"line":7,"column":23},"end":{"line":7,"column":52}},"4":{"start":{"line":8,"column":8},"end":{"line":12,"column":12}},"5":{"start":{"line":8,"column":32},"end":{"line":12,"column":9}},"6":{"start":{"line":15,"column":21},"end":{"line":15,"column":24}},"7":{"start":{"line":16,"column":8},"end":{"line":27,"column":9}},"8":{"start":{"line":17,"column":12},"end":{"line":26,"column":13}},"9":{"start":{"line":18,"column":16},"end":{"line":18,"column":59}},"10":{"start":{"line":21,"column":29},"end":{"line":21,"column":62}},"11":{"start":{"line":22,"column":16},"end":{"line":25,"column":17}},"12":{"start":{"line":23,"column":37},"end":{"line":23,"column":74}},"13":{"start":{"line":24,"column":20},"end":{"line":24,"column":53}},"14":{"start":{"line":28,"column":8},"end":{"line":28,"column":22}},"15":{"start":{"line":31,"column":8},"end":{"line":40,"column":9}},"16":{"start":{"line":32,"column":12},"end":{"line":35,"column":13}},"17":{"start":{"line":33,"column":16},"end":{"line":33,"column":61}},"18":{"start":{"line":34,"column":16},"end":{"line":34,"column":31}},"19":{"start":{"line":36,"column":12},"end":{"line":38,"column":13}},"20":{"start":{"line":37,"column":16},"end":{"line":37,"column":65}},"21":{"start":{"line":39,"column":12},"end":{"line":39,"column":62}},"22":{"start":{"line":41,"column":8},"end":{"line":44,"column":9}},"23":{"start":{"line":42,"column":12},"end":{"line":42,"column":57}},"24":{"start":{"line":43,"column":12},"end":{"line":43,"column":27}},"25":{"start":{"line":45,"column":8},"end":{"line":45,"column":23}},"26":{"start":{"line":48,"column":25},"end":{"line":48,"column":27}},"27":{"start":{"line":49,"column":25},"end":{"line":49,"column":27}},"28":{"start":{"line":50,"column":8},"end":{"line":50,"column":26}},"29":{"start":{"line":51,"column":16},"end":{"line":51,"column":17}},"30":{"start":{"line":52,"column":16},"end":{"line":52,"column":17}},"31":{"start":{"line":53,"column":8},"end":{"line":85,"column":9}},"32":{"start":{"line":54,"column":12},"end":{"line":84,"column":13}},"33":{"start":{"line":55,"column":16},"end":{"line":55,"column":23}},"34":{"start":{"line":56,"column":16},"end":{"line":56,"column":23}},"35":{"start":{"line":59,"column":32},"end":{"line":61,"column":18}},"36":{"start":{"line":60,"column":20},"end":{"line":60,"column":69}},"37":{"start":{"line":62,"column":16},"end":{"line":83,"column":17}},"38":{"start":{"line":63,"column":33},"end":{"line":63,"column":47}},"39":{"start":{"line":64,"column":20},"end":{"line":64,"column":44}},"40":{"start":{"line":65,"column":20},"end":{"line":65,"column":34}},"41":{"start":{"line":66,"column":20},"end":{"line":66,"column":77}},"42":{"start":{"line":67,"column":20},"end":{"line":67,"column":27}},"43":{"start":{"line":68,"column":20},"end":{"line":68,"column":27}},"44":{"start":{"line":71,"column":20},"end":{"line":73,"column":23}},"45":{"start":{"line":72,"column":24},"end":{"line":72,"column":72}},"46":{"start":{"line":74,"column":20},"end":{"line":80,"column":21}},"47":{"start":{"line":75,"column":24},"end":{"line":75,"column":84}},"48":{"start":{"line":78,"column":24},"end":{"line":78,"column":50}},"49":{"start":{"line":79,"column":24},"end":{"line":79,"column":78}},"50":{"start":{"line":81,"column":20},"end":{"line":81,"column":27}},"51":{"start":{"line":82,"column":20},"end":{"line":82,"column":27}},"52":{"start":{"line":86,"column":8},"end":{"line":89,"column":9}},"53":{"start":{"line":87,"column":12},"end":{"line":87,"column":66}},"54":{"start":{"line":88,"column":12},"end":{"line":88,"column":19}},"55":{"start":{"line":90,"column":25},"end":{"line":90,"column":27}},"56":{"start":{"line":91,"column":8},"end":{"line":94,"column":9}},"57":{"start":{"line":92,"column":12},"end":{"line":92,"column":29}},"58":{"start":{"line":93,"column":12},"end":{"line":93,"column":19}},"59":{"start":{"line":95,"column":8},"end":{"line":97,"column":9}},"60":{"start":{"line":96,"column":12},"end":{"line":96,"column":62}},"61":{"start":{"line":98,"column":8},"end":{"line":98,"column":54}},"62":{"start":{"line":99,"column":24},"end":{"line":99,"column":48}},"63":{"start":{"line":100,"column":24},"end":{"line":100,"column":48}},"64":{"start":{"line":101,"column":8},"end":{"line":101,"column":81}},"65":{"start":{"line":102,"column":8},"end":{"line":102,"column":23}},"66":{"start":{"line":105,"column":24},"end":{"line":105,"column":40}},"67":{"start":{"line":106,"column":25},"end":{"line":106,"column":42}},"68":{"start":{"line":107,"column":8},"end":{"line":111,"column":9}},"69":{"start":{"line":108,"column":12},"end":{"line":110,"column":13}},"70":{"start":{"line":109,"column":16},"end":{"line":109,"column":73}},"71":{"start":{"line":112,"column":25},"end":{"line":112,"column":27}},"72":{"start":{"line":113,"column":8},"end":{"line":117,"column":9}},"73":{"start":{"line":114,"column":12},"end":{"line":116,"column":13}},"74":{"start":{"line":115,"column":16},"end":{"line":115,"column":35}},"75":{"start":{"line":118,"column":8},"end":{"line":120,"column":9}},"76":{"start":{"line":119,"column":12},"end":{"line":119,"column":61}},"77":{"start":{"line":121,"column":8},"end":{"line":121,"column":23}},"78":{"start":{"line":124,"column":8},"end":{"line":124,"column":46}},"79":{"start":{"line":127,"column":8},"end":{"line":161,"column":9}},"80":{"start":{"line":129,"column":30},"end":{"line":129,"column":42}},"81":{"start":{"line":130,"column":30},"end":{"line":130,"column":42}},"82":{"start":{"line":131,"column":16},"end":{"line":131,"column":45}},"83":{"start":{"line":132,"column":16},"end":{"line":132,"column":22}},"84":{"start":{"line":135,"column":16},"end":{"line":135,"column":33}},"85":{"start":{"line":136,"column":16},"end":{"line":136,"column":22}},"86":{"start":{"line":138,"column":33},"end":{"line":138,"column":50}},"87":{"start":{"line":139,"column":16},"end":{"line":149,"column":17}},"88":{"start":{"line":140,"column":20},"end":{"line":140,"column":51}},"89":{"start":{"line":140,"column":44},"end":{"line":140,"column":49}},"90":{"start":{"line":141,"column":20},"end":{"line":143,"column":23}},"91":{"start":{"line":142,"column":24},"end":{"line":142,"column":44}},"92":{"start":{"line":146,"column":20},"end":{"line":148,"column":23}},"93":{"start":{"line":147,"column":24},"end":{"line":147,"column":41}},"94":{"start":{"line":150,"column":16},"end":{"line":150,"column":22}},"95":{"start":{"line":153,"column":28},"end":{"line":153,"column":32}},"96":{"start":{"line":154,"column":32},"end":{"line":154,"column":44}},"97":{"start":{"line":155,"column":30},"end":{"line":155,"column":42}},"98":{"start":{"line":156,"column":29},"end":{"line":156,"column":41}},"99":{"start":{"line":157,"column":16},"end":{"line":157,"column":42}},"100":{"start":{"line":158,"column":16},"end":{"line":158,"column":34}},"101":{"start":{"line":159,"column":16},"end":{"line":159,"column":22}},"102":{"start":{"line":162,"column":8},"end":{"line":162,"column":20}},"103":{"start":{"line":165,"column":22},"end":{"line":165,"column":37}},"104":{"start":{"line":166,"column":23},"end":{"line":166,"column":61}},"105":{"start":{"line":167,"column":8},"end":{"line":176,"column":9}},"106":{"start":{"line":168,"column":12},"end":{"line":172,"column":13}},"107":{"start":{"line":169,"column":16},"end":{"line":169,"column":45}},"108":{"start":{"line":170,"column":16},"end":{"line":170,"column":50}},"109":{"start":{"line":171,"column":16},"end":{"line":171,"column":34}},"110":{"start":{"line":175,"column":12},"end":{"line":175,"column":19}},"111":{"start":{"line":177,"column":8},"end":{"line":177,"column":22}},"112":{"start":{"line":180,"column":0},"end":{"line":180,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":4},"end":{"line":6,"column":5}},"loc":{"start":{"line":6,"column":20},"end":{"line":13,"column":5}},"line":6},"1":{"name":"(anonymous_1)","decl":{"start":{"line":8,"column":26},"end":{"line":8,"column":27}},"loc":{"start":{"line":8,"column":32},"end":{"line":12,"column":9}},"line":8},"2":{"name":"(anonymous_2)","decl":{"start":{"line":14,"column":4},"end":{"line":14,"column":5}},"loc":{"start":{"line":14,"column":22},"end":{"line":29,"column":5}},"line":14},"3":{"name":"(anonymous_3)","decl":{"start":{"line":30,"column":4},"end":{"line":30,"column":5}},"loc":{"start":{"line":30,"column":36},"end":{"line":46,"column":5}},"line":30},"4":{"name":"(anonymous_4)","decl":{"start":{"line":47,"column":4},"end":{"line":47,"column":5}},"loc":{"start":{"line":47,"column":41},"end":{"line":103,"column":5}},"line":47},"5":{"name":"(anonymous_5)","decl":{"start":{"line":59,"column":46},"end":{"line":59,"column":47}},"loc":{"start":{"line":59,"column":64},"end":{"line":61,"column":17}},"line":59},"6":{"name":"(anonymous_6)","decl":{"start":{"line":71,"column":47},"end":{"line":71,"column":48}},"loc":{"start":{"line":71,"column":65},"end":{"line":73,"column":21}},"line":71},"7":{"name":"(anonymous_7)","decl":{"start":{"line":104,"column":4},"end":{"line":104,"column":5}},"loc":{"start":{"line":104,"column":42},"end":{"line":122,"column":5}},"line":104},"8":{"name":"(anonymous_8)","decl":{"start":{"line":123,"column":4},"end":{"line":123,"column":5}},"loc":{"start":{"line":123,"column":23},"end":{"line":125,"column":5}},"line":123},"9":{"name":"(anonymous_9)","decl":{"start":{"line":126,"column":4},"end":{"line":126,"column":5}},"loc":{"start":{"line":126,"column":31},"end":{"line":163,"column":5}},"line":126},"10":{"name":"(anonymous_10)","decl":{"start":{"line":140,"column":34},"end":{"line":140,"column":35}},"loc":{"start":{"line":140,"column":44},"end":{"line":140,"column":49}},"line":140},"11":{"name":"(anonymous_11)","decl":{"start":{"line":141,"column":37},"end":{"line":141,"column":38}},"loc":{"start":{"line":141,"column":44},"end":{"line":143,"column":21}},"line":141},"12":{"name":"(anonymous_12)","decl":{"start":{"line":146,"column":37},"end":{"line":146,"column":38}},"loc":{"start":{"line":146,"column":44},"end":{"line":148,"column":21}},"line":146},"13":{"name":"(anonymous_13)","decl":{"start":{"line":164,"column":4},"end":{"line":164,"column":5}},"loc":{"start":{"line":164,"column":25},"end":{"line":178,"column":5}},"line":164}},"branchMap":{"0":{"loc":{"start":{"line":17,"column":12},"end":{"line":26,"column":13}},"type":"if","locations":[{"start":{"line":17,"column":12},"end":{"line":26,"column":13}},{"start":{"line":17,"column":12},"end":{"line":26,"column":13}}],"line":17},"1":{"loc":{"start":{"line":22,"column":16},"end":{"line":25,"column":17}},"type":"if","locations":[{"start":{"line":22,"column":16},"end":{"line":25,"column":17}},{"start":{"line":22,"column":16},"end":{"line":25,"column":17}}],"line":22},"2":{"loc":{"start":{"line":31,"column":8},"end":{"line":40,"column":9}},"type":"if","locations":[{"start":{"line":31,"column":8},"end":{"line":40,"column":9}},{"start":{"line":31,"column":8},"end":{"line":40,"column":9}}],"line":31},"3":{"loc":{"start":{"line":31,"column":12},"end":{"line":31,"column":59}},"type":"binary-expr","locations":[{"start":{"line":31,"column":12},"end":{"line":31,"column":33}},{"start":{"line":31,"column":37},"end":{"line":31,"column":59}}],"line":31},"4":{"loc":{"start":{"line":32,"column":12},"end":{"line":35,"column":13}},"type":"if","locations":[{"start":{"line":32,"column":12},"end":{"line":35,"column":13}},{"start":{"line":32,"column":12},"end":{"line":35,"column":13}}],"line":32},"5":{"loc":{"start":{"line":36,"column":12},"end":{"line":38,"column":13}},"type":"if","locations":[{"start":{"line":36,"column":12},"end":{"line":38,"column":13}},{"start":{"line":36,"column":12},"end":{"line":38,"column":13}}],"line":36},"6":{"loc":{"start":{"line":36,"column":16},"end":{"line":36,"column":61}},"type":"binary-expr","locations":[{"start":{"line":36,"column":16},"end":{"line":36,"column":36}},{"start":{"line":36,"column":40},"end":{"line":36,"column":61}}],"line":36},"7":{"loc":{"start":{"line":41,"column":8},"end":{"line":44,"column":9}},"type":"if","locations":[{"start":{"line":41,"column":8},"end":{"line":44,"column":9}},{"start":{"line":41,"column":8},"end":{"line":44,"column":9}}],"line":41},"8":{"loc":{"start":{"line":53,"column":15},"end":{"line":53,"column":48}},"type":"binary-expr","locations":[{"start":{"line":53,"column":15},"end":{"line":53,"column":30}},{"start":{"line":53,"column":34},"end":{"line":53,"column":48}}],"line":53},"9":{"loc":{"start":{"line":54,"column":12},"end":{"line":84,"column":13}},"type":"if","locations":[{"start":{"line":54,"column":12},"end":{"line":84,"column":13}},{"start":{"line":54,"column":12},"end":{"line":84,"column":13}}],"line":54},"10":{"loc":{"start":{"line":60,"column":27},"end":{"line":60,"column":68}},"type":"binary-expr","locations":[{"start":{"line":60,"column":27},"end":{"line":60,"column":36}},{"start":{"line":60,"column":40},"end":{"line":60,"column":68}}],"line":60},"11":{"loc":{"start":{"line":62,"column":16},"end":{"line":83,"column":17}},"type":"if","locations":[{"start":{"line":62,"column":16},"end":{"line":83,"column":17}},{"start":{"line":62,"column":16},"end":{"line":83,"column":17}}],"line":62},"12":{"loc":{"start":{"line":72,"column":31},"end":{"line":72,"column":71}},"type":"binary-expr","locations":[{"start":{"line":72,"column":31},"end":{"line":72,"column":40}},{"start":{"line":72,"column":44},"end":{"line":72,"column":71}}],"line":72},"13":{"loc":{"start":{"line":74,"column":20},"end":{"line":80,"column":21}},"type":"if","locations":[{"start":{"line":74,"column":20},"end":{"line":80,"column":21}},{"start":{"line":74,"column":20},"end":{"line":80,"column":21}}],"line":74},"14":{"loc":{"start":{"line":95,"column":8},"end":{"line":97,"column":9}},"type":"if","locations":[{"start":{"line":95,"column":8},"end":{"line":97,"column":9}},{"start":{"line":95,"column":8},"end":{"line":97,"column":9}}],"line":95},"15":{"loc":{"start":{"line":101,"column":25},"end":{"line":101,"column":78}},"type":"cond-expr","locations":[{"start":{"line":101,"column":59},"end":{"line":101,"column":67}},{"start":{"line":101,"column":70},"end":{"line":101,"column":78}}],"line":101},"16":{"loc":{"start":{"line":108,"column":12},"end":{"line":110,"column":13}},"type":"if","locations":[{"start":{"line":108,"column":12},"end":{"line":110,"column":13}},{"start":{"line":108,"column":12},"end":{"line":110,"column":13}}],"line":108},"17":{"loc":{"start":{"line":114,"column":12},"end":{"line":116,"column":13}},"type":"if","locations":[{"start":{"line":114,"column":12},"end":{"line":116,"column":13}},{"start":{"line":114,"column":12},"end":{"line":116,"column":13}}],"line":114},"18":{"loc":{"start":{"line":118,"column":8},"end":{"line":120,"column":9}},"type":"if","locations":[{"start":{"line":118,"column":8},"end":{"line":120,"column":9}},{"start":{"line":118,"column":8},"end":{"line":120,"column":9}}],"line":118},"19":{"loc":{"start":{"line":127,"column":8},"end":{"line":161,"column":9}},"type":"switch","locations":[{"start":{"line":128,"column":12},"end":{"line":133,"column":13}},{"start":{"line":134,"column":12},"end":{"line":136,"column":22}},{"start":{"line":137,"column":12},"end":{"line":151,"column":13}},{"start":{"line":152,"column":12},"end":{"line":160,"column":13}}],"line":127},"20":{"loc":{"start":{"line":139,"column":16},"end":{"line":149,"column":17}},"type":"if","locations":[{"start":{"line":139,"column":16},"end":{"line":149,"column":17}},{"start":{"line":139,"column":16},"end":{"line":149,"column":17}}],"line":139}},"s":{"0":1,"1":1,"2":1,"3":13,"4":13,"5":12,"6":14,"7":14,"8":13,"9":10,"10":3,"11":3,"12":2,"13":2,"14":14,"15":16,"16":11,"17":1,"18":1,"19":10,"20":7,"21":3,"22":5,"23":4,"24":4,"25":1,"26":7,"27":7,"28":7,"29":7,"30":7,"31":7,"32":26,"33":21,"34":21,"35":5,"36":19,"37":5,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":4,"45":13,"46":4,"47":2,"48":2,"49":2,"50":4,"51":4,"52":7,"53":1,"54":1,"55":7,"56":7,"57":3,"58":3,"59":7,"60":2,"61":7,"62":7,"63":7,"64":7,"65":7,"66":3,"67":3,"68":3,"69":6,"70":1,"71":3,"72":3,"73":7,"74":1,"75":3,"76":1,"77":3,"78":43,"79":12,"80":3,"81":3,"82":3,"83":3,"84":5,"85":5,"86":3,"87":3,"88":2,"89":1,"90":2,"91":3,"92":1,"93":1,"94":3,"95":1,"96":1,"97":1,"98":1,"99":1,"100":1,"101":1,"102":12,"103":3,"104":3,"105":3,"106":3,"107":4,"108":4,"109":3,"110":1,"111":2,"112":1},"f":{"0":13,"1":12,"2":14,"3":16,"4":7,"5":19,"6":13,"7":3,"8":43,"9":12,"10":1,"11":3,"12":1,"13":3},"b":{"0":[10,3],"1":[2,1],"2":[11,5],"3":[16,11],"4":[1,10],"5":[7,3],"6":[10,7],"7":[4,1],"8":[33,27],"9":[21,5],"10":[19,7],"11":[1,4],"12":[13,4],"13":[2,2],"14":[2,5],"15":[6,1],"16":[1,5],"17":[1,6],"18":[1,2],"19":[3,5,3,1],"20":[2,1]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/serializer/json-patch.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/serializer/json-patch.ts"],"names":[],"mappings":"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","sourcesContent":["import { deepCompare } from '../../utils';\nimport { JsonDiff, JsonPathDiff } from './json-patch.interface';\n\nexport class JsonPatch {\n\n  public diff(src: any, dest: any): JsonDiff[] {\n    const deltas = this.delta(src, dest, [], []);\n    return deltas.map(d => ({\n      op: d.op,\n      path: d.path.join('.'),\n      val: d.val\n    }));\n  }\n\n  public apply(src: any, patch: JsonDiff[]) {\n    let result = src;\n    for (const delta of patch) {\n      if (delta.path === '') {\n        result = this.applyToObject(result, delta);\n      } else {\n        const item = this.fromPath(result, delta.path);\n        if (item !== undefined) {\n          const newValue = this.applyToObject(item.value, delta);\n          item.holder[item.key] = newValue;\n        }\n      }\n    }\n    return result;\n  }\n\n  private delta(src: any, dest: any, path: string[], results: JsonPathDiff[]): JsonPathDiff[] {\n    if (src instanceof Object && dest instanceof Object) {\n      if (src.constructor !== dest.constructor) {\n        results.push({op: 'set', path, val: dest});\n        return results;\n      }\n      if (src instanceof Array && dest instanceof Array) {\n        return this.deltaArray(src, dest, path, results);\n      }\n      return this.deltaObject(src, dest, path, results);\n    }\n    if (src !== dest) {\n      results.push({op: 'set', path, val: dest});\n      return results;\n    }\n    return results;\n  }\n\n  private deltaArray(src: any[], dest: any[], path: string[], results: JsonPathDiff[]): JsonPathDiff[] {\n    const results1: JsonPathDiff[] = [];\n    const results2: JsonPathDiff[] = [];\n    src = src.slice();\n\n    let i: number = 0;\n    let j: number = 0;\n    while (i < dest.length && j < src.length) {\n      if (this.isEqual(src[j], dest[i])) {\n        i += 1;\n        j += 1;\n      } else {\n        let fromIndex = src.findIndex((value, index) => {\n          return index > j && this.isEqual(value, dest[i]);\n        });\n        if (fromIndex !== -1) {\n          const temp = src[fromIndex];\n          src[fromIndex] = src[j];\n          src[j] = temp;\n          results1.push({op: 'move', path, val: [fromIndex, i]});\n          j += 1;\n          i += 1;\n        } else {\n          fromIndex = dest.findIndex((value, index) => {\n            return index > i && this.isEqual(value, src[j]);\n          });\n          if (fromIndex === -1) {\n            this.delta(src[j], dest[i], [...path, String(i)], results1);\n          } else {\n            src.splice(j, 0, dest[i]);\n            results1.push({op: 'add', path, val: [i, dest[i]]});\n          }\n          j += 1;\n          i += 1;\n        }\n      }\n    }\n    while (i < dest.length) {\n      results1.push({op: 'add', path, val: [i, dest[i]]});\n      i += 1;\n    }\n    const toDelete: number[] = [];\n    while (j < src.length) {\n      toDelete.push(j);\n      j += 1;\n    }\n    if (toDelete.length > 0) {\n      results1.push({op: 'del', path, val: toDelete});\n    }\n\n    results2.push({op: 'set', path, val: dest});\n\n    const option1 = JSON.stringify(results1);\n    const option2 = JSON.stringify(results2);\n    results.push(...(option1.length < option2.length ? results1 : results2));\n    return results;\n  }\n\n  private deltaObject(src: any, dest: any, path: string[], results: JsonPathDiff[]): JsonPathDiff[] {\n    const srcKeys = Object.keys(src);\n    const destKeys = Object.keys(dest);\n\n    for (const key of destKeys) {\n      if (!this.isEqual(src[key], dest[key])) {\n        this.delta(src[key], dest[key], [...path, key], results);\n      }\n    }\n\n    const toDelete = [];\n    for (const key of srcKeys) {\n      if (!destKeys.includes(key)) {\n        toDelete.push(key);\n      }\n    }\n    if (toDelete.length > 0) {\n      results.push({op: 'del', path, val: toDelete});\n    }\n\n    return results;\n  }\n\n  private isEqual(src: any, dest: any) {\n    return deepCompare(src, dest);\n  }\n\n  private applyToObject(root: any, delta: JsonDiff): any {\n    switch (delta.op) {\n      case 'add': {\n        const index = delta.val[0];\n        const value = delta.val[1];\n        (root as any[]).splice(index, 0, value);\n        break;\n      }\n      case 'set':\n        root = delta.val;\n        break;\n      case 'del': {\n        const toDelete: any[] = delta.val.slice();\n        if (root instanceof Array) {\n          toDelete.sort((a, b) => b - a);\n          toDelete.forEach(idx => {\n            (root as any[]).splice(idx, 1);\n          });\n        } else {\n          toDelete.forEach(key => {\n            delete root[key];\n          });\n        }\n        break;\n      }\n      case 'move': {\n        const arr: any[] = root as any[];\n        const fromKey: number = delta.val[0];\n        const toKey: number = delta.val[1];\n        const temp = arr[fromKey];\n        arr[fromKey] = arr[toKey];\n        arr[toKey] = temp;\n        break;\n      }\n    }\n    return root;\n  }\n\n  private fromPath(root: any, path: string): { holder: any, key: string, value: any } | undefined {\n    const parts = path.split('.');\n    const result = { holder: root, key: '', value: root };\n    try {\n      for (const part of parts) {\n        result.holder = result.value;\n        result.value = result.value[part];\n        result.key = part;\n      }\n    } catch (error) {\n      return;\n    }\n    return result;\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"a3272203557d7086f54c088dd98e5b7e004afc2b","contentHash":"d2c643ef98d23a60703361dd3d65e54f4fcb698f0d8c8779675bf4a0edf63787"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/utils/index.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/utils/index.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":4},"end":{"line":4,"column":89}},"4":{"start":{"line":4,"column":71},"end":{"line":4,"column":83}},"5":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"6":{"start":{"line":6,"column":26},"end":{"line":6,"column":33}},"7":{"start":{"line":7,"column":4},"end":{"line":7,"column":17}},"8":{"start":{"line":9,"column":19},"end":{"line":11,"column":1}},"9":{"start":{"line":10,"column":4},"end":{"line":10,"column":126}},"10":{"start":{"line":10,"column":21},"end":{"line":10,"column":126}},"11":{"start":{"line":10,"column":95},"end":{"line":10,"column":126}},"12":{"start":{"line":12,"column":0},"end":{"line":12,"column":62}},"13":{"start":{"line":13,"column":0},"end":{"line":13,"column":43}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":43}},"15":{"start":{"line":15,"column":0},"end":{"line":15,"column":46}},"16":{"start":{"line":16,"column":0},"end":{"line":16,"column":42}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":5,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":4,"column":58},"end":{"line":4,"column":59}},"loc":{"start":{"line":4,"column":69},"end":{"line":4,"column":85}},"line":4},"2":{"name":"(anonymous_2)","decl":{"start":{"line":5,"column":6},"end":{"line":5,"column":7}},"loc":{"start":{"line":5,"column":28},"end":{"line":8,"column":1}},"line":5},"3":{"name":"(anonymous_3)","decl":{"start":{"line":9,"column":50},"end":{"line":9,"column":51}},"loc":{"start":{"line":9,"column":71},"end":{"line":11,"column":1}},"line":9}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":8,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":8,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":5,"column":1}},{"start":{"line":5,"column":6},"end":{"line":8,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"type":"if","locations":[{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},{"start":{"line":6,"column":4},"end":{"line":6,"column":33}}],"line":6},"4":{"loc":{"start":{"line":9,"column":19},"end":{"line":11,"column":1}},"type":"binary-expr","locations":[{"start":{"line":9,"column":20},"end":{"line":9,"column":24}},{"start":{"line":9,"column":28},"end":{"line":9,"column":45}},{"start":{"line":9,"column":50},"end":{"line":11,"column":1}}],"line":9},"5":{"loc":{"start":{"line":10,"column":21},"end":{"line":10,"column":126}},"type":"if","locations":[{"start":{"line":10,"column":21},"end":{"line":10,"column":126}},{"start":{"line":10,"column":21},"end":{"line":10,"column":126}}],"line":10},"6":{"loc":{"start":{"line":10,"column":25},"end":{"line":10,"column":93}},"type":"binary-expr","locations":[{"start":{"line":10,"column":25},"end":{"line":10,"column":40}},{"start":{"line":10,"column":44},"end":{"line":10,"column":93}}],"line":10}},"s":{"0":1,"1":8,"2":8,"3":8,"4":43,"5":0,"6":0,"7":0,"8":1,"9":4,"10":8,"11":8,"12":1,"13":1,"14":1,"15":1,"16":1},"f":{"0":8,"1":43,"2":0,"3":4},"b":{"0":[1,1,1],"1":[1,0],"2":[8,0],"3":[0,0],"4":[1,1,1],"5":[8,0],"6":[8,8]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/utils/index.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/utils/index.ts"],"names":[],"mappings":";;;;;;;;;;;;AAAA,2CAAyB;AACzB,2CAAyB;AACzB,8CAA4B;AAC5B,0CAAwB","sourcesContent":["export * from './base64';\nexport * from './logger';\nexport * from './scheduler';\nexport * from './utils';\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"6a07228abeb07722fecdeb581ba03ad8d1f0a673","contentHash":"1bc8444cc353ace5573684c51c2196c2661ef7b6540380cd6314c6bc03cc3145"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/utils/base64.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/utils/base64.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":24}},"2":{"start":{"line":6,"column":8},"end":{"line":6,"column":27}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":88}},"4":{"start":{"line":10,"column":20},"end":{"line":10,"column":51}},"5":{"start":{"line":11,"column":8},"end":{"line":13,"column":9}},"6":{"start":{"line":12,"column":12},"end":{"line":12,"column":52}},"7":{"start":{"line":14,"column":8},"end":{"line":14,"column":19}},"8":{"start":{"line":18,"column":8},"end":{"line":18,"column":22}},"9":{"start":{"line":19,"column":19},"end":{"line":19,"column":20}},"10":{"start":{"line":20,"column":19},"end":{"line":20,"column":27}},"11":{"start":{"line":21,"column":8},"end":{"line":23,"column":9}},"12":{"start":{"line":22,"column":12},"end":{"line":22,"column":21}},"13":{"start":{"line":24,"column":8},"end":{"line":26,"column":9}},"14":{"start":{"line":25,"column":12},"end":{"line":25,"column":52}},"15":{"start":{"line":27,"column":8},"end":{"line":34,"column":9}},"16":{"start":{"line":28,"column":12},"end":{"line":28,"column":21}},"17":{"start":{"line":29,"column":12},"end":{"line":31,"column":13}},"18":{"start":{"line":30,"column":16},"end":{"line":30,"column":25}},"19":{"start":{"line":33,"column":12},"end":{"line":33,"column":22}},"20":{"start":{"line":35,"column":18},"end":{"line":35,"column":20}},"21":{"start":{"line":38,"column":8},"end":{"line":42,"column":9}},"22":{"start":{"line":39,"column":12},"end":{"line":40,"column":75}},"23":{"start":{"line":41,"column":12},"end":{"line":41,"column":82}},"24":{"start":{"line":43,"column":8},"end":{"line":54,"column":9}},"25":{"start":{"line":45,"column":16},"end":{"line":46,"column":52}},"26":{"start":{"line":47,"column":16},"end":{"line":47,"column":74}},"27":{"start":{"line":48,"column":16},"end":{"line":48,"column":22}},"28":{"start":{"line":50,"column":16},"end":{"line":50,"column":86}},"29":{"start":{"line":51,"column":16},"end":{"line":51,"column":55}},"30":{"start":{"line":52,"column":16},"end":{"line":52,"column":22}},"31":{"start":{"line":55,"column":8},"end":{"line":55,"column":26}},"32":{"start":{"line":58,"column":18},"end":{"line":58,"column":33}},"33":{"start":{"line":59,"column":8},"end":{"line":61,"column":9}},"34":{"start":{"line":60,"column":12},"end":{"line":60,"column":70}},"35":{"start":{"line":62,"column":8},"end":{"line":62,"column":17}},"36":{"start":{"line":65,"column":8},"end":{"line":65,"column":22}},"37":{"start":{"line":66,"column":21},"end":{"line":66,"column":44}},"38":{"start":{"line":67,"column":8},"end":{"line":69,"column":9}},"39":{"start":{"line":68,"column":12},"end":{"line":68,"column":21}},"40":{"start":{"line":70,"column":18},"end":{"line":70,"column":20}},"41":{"start":{"line":73,"column":8},"end":{"line":79,"column":9}},"42":{"start":{"line":74,"column":12},"end":{"line":74,"column":102}},"43":{"start":{"line":75,"column":12},"end":{"line":75,"column":49}},"44":{"start":{"line":76,"column":12},"end":{"line":76,"column":58}},"45":{"start":{"line":77,"column":12},"end":{"line":77,"column":57}},"46":{"start":{"line":78,"column":12},"end":{"line":78,"column":50}},"47":{"start":{"line":80,"column":8},"end":{"line":92,"column":9}},"48":{"start":{"line":82,"column":16},"end":{"line":82,"column":47}},"49":{"start":{"line":83,"column":16},"end":{"line":84,"column":49}},"50":{"start":{"line":85,"column":16},"end":{"line":85,"column":22}},"51":{"start":{"line":87,"column":16},"end":{"line":87,"column":81}},"52":{"start":{"line":88,"column":16},"end":{"line":89,"column":73}},"53":{"start":{"line":90,"column":16},"end":{"line":90,"column":22}},"54":{"start":{"line":93,"column":8},"end":{"line":93,"column":26}},"55":{"start":{"line":96,"column":0},"end":{"line":96,"column":24}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":4},"end":{"line":5,"column":5}},"loc":{"start":{"line":5,"column":18},"end":{"line":8,"column":5}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":9,"column":4},"end":{"line":9,"column":5}},"loc":{"start":{"line":9,"column":20},"end":{"line":15,"column":5}},"line":9},"2":{"name":"(anonymous_2)","decl":{"start":{"line":16,"column":4},"end":{"line":16,"column":5}},"loc":{"start":{"line":16,"column":14},"end":{"line":56,"column":5}},"line":16},"3":{"name":"(anonymous_3)","decl":{"start":{"line":57,"column":4},"end":{"line":57,"column":5}},"loc":{"start":{"line":57,"column":18},"end":{"line":63,"column":5}},"line":57},"4":{"name":"(anonymous_4)","decl":{"start":{"line":64,"column":4},"end":{"line":64,"column":5}},"loc":{"start":{"line":64,"column":14},"end":{"line":94,"column":5}},"line":64}},"branchMap":{"0":{"loc":{"start":{"line":11,"column":8},"end":{"line":13,"column":9}},"type":"if","locations":[{"start":{"line":11,"column":8},"end":{"line":13,"column":9}},{"start":{"line":11,"column":8},"end":{"line":13,"column":9}}],"line":11},"1":{"loc":{"start":{"line":21,"column":8},"end":{"line":23,"column":9}},"type":"if","locations":[{"start":{"line":21,"column":8},"end":{"line":23,"column":9}},{"start":{"line":21,"column":8},"end":{"line":23,"column":9}}],"line":21},"2":{"loc":{"start":{"line":24,"column":8},"end":{"line":26,"column":9}},"type":"if","locations":[{"start":{"line":24,"column":8},"end":{"line":26,"column":9}},{"start":{"line":24,"column":8},"end":{"line":26,"column":9}}],"line":24},"3":{"loc":{"start":{"line":27,"column":8},"end":{"line":34,"column":9}},"type":"if","locations":[{"start":{"line":27,"column":8},"end":{"line":34,"column":9}},{"start":{"line":27,"column":8},"end":{"line":34,"column":9}}],"line":27},"4":{"loc":{"start":{"line":29,"column":12},"end":{"line":31,"column":13}},"type":"if","locations":[{"start":{"line":29,"column":12},"end":{"line":31,"column":13}},{"start":{"line":29,"column":12},"end":{"line":31,"column":13}}],"line":29},"5":{"loc":{"start":{"line":43,"column":8},"end":{"line":54,"column":9}},"type":"switch","locations":[{"start":{"line":44,"column":12},"end":{"line":48,"column":22}},{"start":{"line":49,"column":12},"end":{"line":52,"column":22}},{"start":{"line":53,"column":12},"end":{"line":53,"column":20}}],"line":43},"6":{"loc":{"start":{"line":59,"column":8},"end":{"line":61,"column":9}},"type":"if","locations":[{"start":{"line":59,"column":8},"end":{"line":61,"column":9}},{"start":{"line":59,"column":8},"end":{"line":61,"column":9}}],"line":59},"7":{"loc":{"start":{"line":67,"column":8},"end":{"line":69,"column":9}},"type":"if","locations":[{"start":{"line":67,"column":8},"end":{"line":69,"column":9}},{"start":{"line":67,"column":8},"end":{"line":69,"column":9}}],"line":67},"8":{"loc":{"start":{"line":80,"column":8},"end":{"line":92,"column":9}},"type":"switch","locations":[{"start":{"line":81,"column":12},"end":{"line":85,"column":22}},{"start":{"line":86,"column":12},"end":{"line":90,"column":22}},{"start":{"line":91,"column":12},"end":{"line":91,"column":20}}],"line":80}},"s":{"0":1,"1":1,"2":5,"3":5,"4":30,"5":30,"6":1,"7":29,"8":6,"9":6,"10":6,"11":6,"12":1,"13":5,"14":1,"15":4,"16":2,"17":2,"18":1,"19":2,"20":4,"21":4,"22":7,"23":6,"24":3,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":3,"32":22,"33":22,"34":1,"35":21,"36":5,"37":5,"38":5,"39":1,"40":4,"41":4,"42":7,"43":6,"44":6,"45":6,"46":6,"47":3,"48":1,"49":1,"50":1,"51":1,"52":1,"53":1,"54":3,"55":1},"f":{"0":5,"1":30,"2":6,"3":22,"4":5},"b":{"0":[1,29],"1":[1,5],"2":[1,4],"3":[2,2],"4":[1,1],"5":[1,1,1],"6":[1,21],"7":[1,4],"8":[1,1,1]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/utils/base64.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/utils/base64.ts"],"names":[],"mappings":"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","sourcesContent":["export class Base64 {\n\n  private readonly padchar: string = '=';\n  private readonly alpha: string = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\n  private getByte64(s: string, i: number): number {\n    const idx = this.alpha.indexOf(s.charAt(i));\n    if (idx === -1) {\n      throw new Error('Cannot decode base64');\n    }\n    return idx;\n  }\n\n  public decode(s: string): string {\n    // convert to string\n    s = String(s);\n\n    let pads = 0;\n    let imax = s.length;\n\n    if (imax === 0) {\n      return s;\n    }\n\n    if (imax % 4 !== 0) {\n      throw new Error('Cannot decode base64');\n    }\n\n    if (s.charAt(imax - 1) === this.padchar) {\n      pads = 1;\n      if (s.charAt(imax - 2) === this.padchar) {\n        pads = 2;\n      }\n      // either way, we want to ignore this last block\n      imax -= 4;\n    }\n\n    const x: string[] = [];\n    let b10: number;\n    let i: number;\n\n    for (i = 0; i < imax; i += 4) {\n      b10 = (this.getByte64(s, i) << 18) | (this.getByte64(s, i + 1) << 12) |\n        (this.getByte64(s, i + 2) << 6) | this.getByte64(s, i + 3);\n      x.push(String.fromCharCode(b10 >> 16, (b10 >> 8) & 0xff, b10 & 0xff));\n    }\n\n    switch (pads) {\n      case 1:\n        b10 = (this.getByte64(s, i) << 18) | (this.getByte64(s, i + 1) << 12) |\n          (this.getByte64(s, i + 2) << 6);\n        x.push(String.fromCharCode(b10 >> 16, (b10 >> 8) & 0xff));\n        break;\n      case 2:\n        b10 = (this.getByte64(s, i) << 18) | (this.getByte64(s, i + 1) << 12);\n        x.push(String.fromCharCode(b10 >> 16));\n        break;\n      default:\n    }\n    return x.join('');\n  }\n\n  private getByte(s: string, i: number): number {\n    const x: number = s.charCodeAt(i);\n    if (x > 255) {\n      throw new Error('INVALID_CHARACTER_ERR: DOM Exception 5');\n    }\n    return x;\n  }\n\n  public encode(s: string): string {\n    s = String(s);\n\n    const imax = s.length - s.length % 3;\n    if (s.length === 0) {\n      return s;\n    }\n\n    const x: string[] = [];\n    let b10: number;\n    let i: number;\n\n    for (i = 0; i < imax; i += 3) {\n      b10 = (this.getByte(s, i) << 16) | (this.getByte(s, i + 1) << 8) | this.getByte(s, i + 2);\n      x.push(this.alpha.charAt(b10 >> 18));\n      x.push(this.alpha.charAt((b10 >> 12) & 0x3F));\n      x.push(this.alpha.charAt((b10 >> 6) & 0x3f));\n      x.push(this.alpha.charAt(b10 & 0x3f));\n    }\n\n    switch (s.length - imax) {\n      case 1:\n        b10 = this.getByte(s, i) << 16;\n        x.push(this.alpha.charAt(b10 >> 18) + this.alpha.charAt((b10 >> 12) & 0x3F) +\n          this.padchar + this.padchar);\n        break;\n      case 2:\n        b10 = (this.getByte(s, i) << 16) | (this.getByte(s, i + 1) << 8);\n        x.push(this.alpha.charAt(b10 >> 18) + this.alpha.charAt((b10 >> 12) & 0x3F) +\n          this.alpha.charAt((b10 >> 6) & 0x3f) + this.padchar);\n        break;\n      default:\n    }\n    return x.join('');\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"2c21bbe29c5afc9b4986a51355e52d75faa4e4e7","contentHash":"37440b627e57f4aa41fcce65f40554e33dff0deb74e61a74e4d9809bca9a78b9"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/utils/logger.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/utils/logger.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":41}},"2":{"start":{"line":4,"column":17},"end":{"line":4,"column":37}},"3":{"start":{"line":7,"column":8},"end":{"line":9,"column":9}},"4":{"start":{"line":8,"column":12},"end":{"line":8,"column":19}},"5":{"start":{"line":10,"column":8},"end":{"line":10,"column":29}},"6":{"start":{"line":13,"column":0},"end":{"line":13,"column":24}},"7":{"start":{"line":14,"column":0},"end":{"line":14,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":4},"end":{"line":6,"column":5}},"loc":{"start":{"line":6,"column":17},"end":{"line":11,"column":5}},"line":6}},"branchMap":{"0":{"loc":{"start":{"line":7,"column":8},"end":{"line":9,"column":9}},"type":"if","locations":[{"start":{"line":7,"column":8},"end":{"line":9,"column":9}},{"start":{"line":7,"column":8},"end":{"line":9,"column":9}}],"line":7}},"s":{"0":1,"1":1,"2":1,"3":0,"4":0,"5":0,"6":1,"7":1},"f":{"0":0},"b":{"0":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/utils/logger.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/utils/logger.ts"],"names":[],"mappings":";;;AAAA,sCAAmC;AAEnC,MAAa,MAAM;IAEV,GAAG,CAAC,OAAe;QACxB,IAAI,CAAC,eAAM,CAAC,IAAI,CAAC,KAAK,EAAE;YACtB,OAAO;SACR;QACD,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;IACvB,CAAC;CAEF;AATD,wBASC;AAEY,QAAA,MAAM,GAAG,IAAI,MAAM,EAAE,CAAC","sourcesContent":["import { config } from '../config';\n\nexport class Logger {\n\n  public log(message: string): void {\n    if (!config.core.debug) {\n      return;\n    }\n    console.log(message);\n  }\n\n}\n\nexport const logger = new Logger();\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"5c75f12f21ccf8b16f9b24a2e00e5dc88b54f29a","contentHash":"40cbf3249a57d42deadb3c876ece9776d5778b9cb503b3c5b079a08f3fc5526c"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/config.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/config.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":24}},"2":{"start":{"line":4,"column":0},"end":{"line":74,"column":2}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/config.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/config.ts"],"names":[],"mappings":";;;AACa,QAAA,MAAM,GAAG;IACpB,OAAO,EAAE;QACP,OAAO,EAAE,WAAW;QACpB,IAAI,EAAE,KAAK;QACX,cAAc,EAAE,EAAE;QAClB,mBAAmB,EAAE,IAAI;QACzB,SAAS,EAAE,IAAI;QACf,MAAM,EAAE,UAAU;QAClB,WAAW,EAAE,KAAK;QAClB,eAAe,EAAE,EAAE;QACnB,UAAU,EAAE,EAAE;QACd,UAAU,EAAE,iBAAiB;QAC7B,cAAc,EAAE,GAAG,GAAG,IAAI;QAC1B,aAAa,EAAE,EAAE;QACjB,aAAa,EAAE,GAAG;QAClB,cAAc,EAAE,GAAG,GAAG,IAAI;QAC1B,cAAc,EAAE,EAAE;QAClB,aAAa,EAAE,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,qCAAqC;KACpE;IACD,OAAO,EAAE;QACP,IAAI,EAAE,OAAO;QACb,IAAI,EAAE,WAAW;QACjB,IAAI,EAAE,IAAI;QACV,QAAQ,EAAE,MAAM;QAChB,QAAQ,EAAE,EAAE;QACZ,QAAQ,EAAE,MAAM;KACjB;IACD,IAAI,EAAE;QACJ,KAAK,EAAE,KAAK;QAEZ,mDAAmD;QACnD,iBAAiB,EAAE,EAAE,GAAG,EAAE,GAAG,IAAI;QAEjC,2CAA2C;QAC3C,sBAAsB,EAAE,IAAI;QAE5B,8CAA8C;QAC9C,6DAA6D;QAC7D,kBAAkB,EAAE,IAAI;QACxB,kBAAkB,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI;QACvC,4BAA4B,EAAE,CAAC;QAE/B,kFAAkF;QAClF,6DAA6D;QAC7D,aAAa,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI;QACvC,sBAAsB,EAAE,CAAC;QAEzB,iFAAiF;QACjF,6DAA6D;QAC7D,YAAY,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI;QACrC,qBAAqB,EAAE,CAAC,CAAE,8BAA8B;KACzD;IACD,IAAI,EAAE;QACJ,gCAAgC;QAChC,eAAe,EAAE,EAAE;QAEnB,gDAAgD;QAChD,WAAW,EAAE,IAAI;QAEjB,kDAAkD;QAClD,4CAA4C;QAC5C,qBAAqB,EAAE,CAAC;KACzB;IACD,IAAI,EAAE;QACJ,QAAQ,EAAE,EAAE;QACZ,QAAQ,EAAE,yBAAyB;KACpC;IACD,KAAK,EAAE;QACL,WAAW,EAAE;YACX,QAAQ,EAAE,IAAI;YACd,OAAO,EAAE,MAAM;YACf,IAAI,EAAE,oBAAoB;SAC3B;QACD,MAAM,EAAE,qBAAqB;QAC7B,OAAO,EAAE,iCAAiC;QAC1C,aAAa,EAAE,kBAAkB,CAAC,qCAAqC;KACxE;CACF,CAAC","sourcesContent":["\nexport const config = {\n  backend: {\n    address: 'localhost',\n    port: 12021,\n    serverPassword: '', // Password required to create an account\n    registrationEnabled: true,  // Completly disables/enables registration\n    allowCors: true,\n    secret: '!secret!',\n    tokenExpire: 86400,\n    defaultPageSize: 50,\n    avatarsDir: '',\n    avatarsUrl: '/avatars/{name}',\n    avatarFileSize: 256 * 1024,\n    avatarMinSize: 64,\n    avatarMaxSize: 512,\n    replayFileSize: 512 * 1024,\n    rateLimitCount: 10, // Ban IP after that many wrong password errors\n    rateLimitTime: 60 * 60 * 1000 // How long the user should be banned\n  },\n  storage: {\n    type: 'mysql',\n    host: 'localhost',\n    port: 3306,\n    username: 'root',\n    password: '',\n    database: 'ptcg'\n  },\n  core: {\n    debug: false,\n\n    // How often should we execute the background tasks\n    schedulerInterval: 15 * 60 * 1000, // 15 minutes\n\n    // Wait till next hour before running tasks\n    schedulerStartNextHour: true,\n\n    // Decrease players' ranking every day by 0.95\n    // If you wish to disable this feature set IntervalCount to 0\n    rankingDecraseRate: 0.95,\n    rankingDecraseTime: 24 * 60 * 60 * 1000,\n    rankingDecreaseIntervalCount: 4,  // run every X scheduler ticks\n\n    // Deletes matches older than `keepMatchTike` from the database, to keep it small.\n    // If you wish to disable this feature set IntervalCount to 0\n    keepMatchTime: 31 * 24 * 60 * 60 * 1000,\n    keepMatchIntervalCount: 4,  // run every X scheduler ticks\n\n    // Deletes users that doesn't log in in the `keepUserTime` and their ranking is 0\n    // If you wish to disable this feature set IntervalCount to 0\n    keepUserTime: 7 * 24 * 60 * 60 * 1000,\n    keepUserIntervalCount: 4  // run every X scheduler ticks\n  },\n  bots: {\n    // Default password for bot user\n    defaultPassword: '',\n\n    // Delay between every action that bot is making\n    actionDelay: 2500,\n\n    // Simulate matches every X ticks of the scheduler\n    // If set to 0, the bot matches are disabled\n    botGamesIntervalCount: 0\n  },\n  sets: {\n    scansDir: '',\n    scansUrl: '/scans/{set}/{name}.jpg'\n  },\n  email: {\n    transporter: {\n      sendmail: true,\n      newline: 'unix',\n      path: '/usr/sbin/sendmail'\n    },\n    sender: 'example@example.com',\n    appName: 'Pokemon Trading Card Game Elite',\n    publicAddress: 'http://localhost' // Address inside the e-mail messages\n  }\n};\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"38a8c8dc6ac801985c66690a968a8db2e293eb2a","contentHash":"00b914fe32ed5b5fa81ebd9267ad0b4546dedf2a4f84656d751a2f031e7871b2"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/utils/scheduler.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/utils/scheduler.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":27}},"2":{"start":{"line":4,"column":17},"end":{"line":4,"column":37}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":23}},"4":{"start":{"line":10,"column":8},"end":{"line":10,"column":34}},"5":{"start":{"line":14,"column":8},"end":{"line":16,"column":9}},"6":{"start":{"line":15,"column":12},"end":{"line":15,"column":19}},"7":{"start":{"line":17,"column":8},"end":{"line":17,"column":56}},"8":{"start":{"line":18,"column":8},"end":{"line":20,"column":9}},"9":{"start":{"line":19,"column":12},"end":{"line":19,"column":19}},"10":{"start":{"line":21,"column":8},"end":{"line":24,"column":9}},"11":{"start":{"line":22,"column":12},"end":{"line":22,"column":33}},"12":{"start":{"line":23,"column":12},"end":{"line":23,"column":19}},"13":{"start":{"line":26,"column":25},"end":{"line":26,"column":39}},"14":{"start":{"line":27,"column":29},"end":{"line":27,"column":71}},"15":{"start":{"line":28,"column":8},"end":{"line":31,"column":25}},"16":{"start":{"line":29,"column":12},"end":{"line":29,"column":40}},"17":{"start":{"line":30,"column":12},"end":{"line":30,"column":33}},"18":{"start":{"line":34,"column":8},"end":{"line":36,"column":9}},"19":{"start":{"line":35,"column":12},"end":{"line":35,"column":19}},"20":{"start":{"line":37,"column":8},"end":{"line":45,"column":51}},"21":{"start":{"line":38,"column":12},"end":{"line":44,"column":15}},"22":{"start":{"line":39,"column":16},"end":{"line":39,"column":31}},"23":{"start":{"line":40,"column":16},"end":{"line":43,"column":17}},"24":{"start":{"line":41,"column":20},"end":{"line":41,"column":34}},"25":{"start":{"line":42,"column":20},"end":{"line":42,"column":35}},"26":{"start":{"line":48,"column":22},"end":{"line":48,"column":75}},"27":{"start":{"line":48,"column":49},"end":{"line":48,"column":74}},"28":{"start":{"line":49,"column":8},"end":{"line":61,"column":9}},"29":{"start":{"line":50,"column":12},"end":{"line":50,"column":39}},"30":{"start":{"line":51,"column":12},"end":{"line":60,"column":13}},"31":{"start":{"line":52,"column":16},"end":{"line":55,"column":17}},"32":{"start":{"line":53,"column":20},"end":{"line":53,"column":50}},"33":{"start":{"line":54,"column":20},"end":{"line":54,"column":48}},"34":{"start":{"line":56,"column":16},"end":{"line":59,"column":17}},"35":{"start":{"line":57,"column":20},"end":{"line":57,"column":52}},"36":{"start":{"line":58,"column":20},"end":{"line":58,"column":49}},"37":{"start":{"line":64,"column":0},"end":{"line":64,"column":30}},"38":{"start":{"line":65,"column":0},"end":{"line":65,"column":37}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":4},"end":{"line":6,"column":5}},"loc":{"start":{"line":6,"column":18},"end":{"line":8,"column":5}},"line":6},"1":{"name":"(anonymous_1)","decl":{"start":{"line":9,"column":4},"end":{"line":9,"column":5}},"loc":{"start":{"line":9,"column":25},"end":{"line":11,"column":5}},"line":9},"2":{"name":"(anonymous_2)","decl":{"start":{"line":12,"column":4},"end":{"line":12,"column":5}},"loc":{"start":{"line":12,"column":31},"end":{"line":32,"column":5}},"line":12},"3":{"name":"(anonymous_3)","decl":{"start":{"line":28,"column":37},"end":{"line":28,"column":38}},"loc":{"start":{"line":28,"column":43},"end":{"line":31,"column":9}},"line":28},"4":{"name":"(anonymous_4)","decl":{"start":{"line":33,"column":4},"end":{"line":33,"column":5}},"loc":{"start":{"line":33,"column":20},"end":{"line":46,"column":5}},"line":33},"5":{"name":"(anonymous_5)","decl":{"start":{"line":37,"column":39},"end":{"line":37,"column":40}},"loc":{"start":{"line":37,"column":45},"end":{"line":45,"column":9}},"line":37},"6":{"name":"(anonymous_6)","decl":{"start":{"line":38,"column":30},"end":{"line":38,"column":31}},"loc":{"start":{"line":38,"column":37},"end":{"line":44,"column":13}},"line":38},"7":{"name":"(anonymous_7)","decl":{"start":{"line":47,"column":4},"end":{"line":47,"column":5}},"loc":{"start":{"line":47,"column":19},"end":{"line":62,"column":5}},"line":47},"8":{"name":"(anonymous_8)","decl":{"start":{"line":48,"column":42},"end":{"line":48,"column":43}},"loc":{"start":{"line":48,"column":49},"end":{"line":48,"column":74}},"line":48}},"branchMap":{"0":{"loc":{"start":{"line":12,"column":18},"end":{"line":12,"column":29}},"type":"default-arg","locations":[{"start":{"line":12,"column":28},"end":{"line":12,"column":29}}],"line":12},"1":{"loc":{"start":{"line":14,"column":8},"end":{"line":16,"column":9}},"type":"if","locations":[{"start":{"line":14,"column":8},"end":{"line":16,"column":9}},{"start":{"line":14,"column":8},"end":{"line":16,"column":9}}],"line":14},"2":{"loc":{"start":{"line":18,"column":8},"end":{"line":20,"column":9}},"type":"if","locations":[{"start":{"line":18,"column":8},"end":{"line":20,"column":9}},{"start":{"line":18,"column":8},"end":{"line":20,"column":9}}],"line":18},"3":{"loc":{"start":{"line":18,"column":12},"end":{"line":18,"column":75}},"type":"binary-expr","locations":[{"start":{"line":18,"column":12},"end":{"line":18,"column":42}},{"start":{"line":18,"column":46},"end":{"line":18,"column":75}}],"line":18},"4":{"loc":{"start":{"line":21,"column":8},"end":{"line":24,"column":9}},"type":"if","locations":[{"start":{"line":21,"column":8},"end":{"line":24,"column":9}},{"start":{"line":21,"column":8},"end":{"line":24,"column":9}}],"line":21},"5":{"loc":{"start":{"line":34,"column":8},"end":{"line":36,"column":9}},"type":"if","locations":[{"start":{"line":34,"column":8},"end":{"line":36,"column":9}},{"start":{"line":34,"column":8},"end":{"line":36,"column":9}}],"line":34},"6":{"loc":{"start":{"line":34,"column":12},"end":{"line":34,"column":68}},"type":"binary-expr","locations":[{"start":{"line":34,"column":12},"end":{"line":34,"column":34}},{"start":{"line":34,"column":38},"end":{"line":34,"column":68}}],"line":34},"7":{"loc":{"start":{"line":40,"column":16},"end":{"line":43,"column":17}},"type":"if","locations":[{"start":{"line":40,"column":16},"end":{"line":43,"column":17}},{"start":{"line":40,"column":16},"end":{"line":43,"column":17}}],"line":40},"8":{"loc":{"start":{"line":49,"column":8},"end":{"line":61,"column":9}},"type":"if","locations":[{"start":{"line":49,"column":8},"end":{"line":61,"column":9}},{"start":{"line":49,"column":8},"end":{"line":61,"column":9}}],"line":49},"9":{"loc":{"start":{"line":51,"column":12},"end":{"line":60,"column":13}},"type":"if","locations":[{"start":{"line":51,"column":12},"end":{"line":60,"column":13}},{"start":{"line":51,"column":12},"end":{"line":60,"column":13}}],"line":51},"10":{"loc":{"start":{"line":52,"column":16},"end":{"line":55,"column":17}},"type":"if","locations":[{"start":{"line":52,"column":16},"end":{"line":55,"column":17}},{"start":{"line":52,"column":16},"end":{"line":55,"column":17}}],"line":52},"11":{"loc":{"start":{"line":56,"column":16},"end":{"line":59,"column":17}},"type":"if","locations":[{"start":{"line":56,"column":16},"end":{"line":59,"column":17}},{"start":{"line":56,"column":16},"end":{"line":59,"column":17}}],"line":56}},"s":{"0":1,"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":1,"38":1},"f":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},"b":{"0":[0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/utils/scheduler.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/utils/scheduler.ts"],"names":[],"mappings":";;;AAAA,sCAAmC;AAEnC,MAAa,SAAS;IAAtB;QAGU,SAAI,GAA6D,EAAE,CAAC;IAkE9E,CAAC;IA9DQ,MAAM,CAAC,WAAW;QACvB,OAAO,SAAS,CAAC,QAAQ,CAAC;IAC5B,CAAC;IAEM,GAAG,CAAC,QAAkB,EAAE,UAAkB,CAAC;QAChD,8DAA8D;QAC9D,IAAI,OAAO,KAAK,CAAC,EAAE;YACjB,OAAO;SACR;QAED,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;QAEhD,IAAI,IAAI,CAAC,WAAW,KAAK,SAAS,IAAI,IAAI,CAAC,UAAU,KAAK,SAAS,EAAE;YACnE,OAAO;SACR;QAED,IAAI,CAAC,eAAM,CAAC,IAAI,CAAC,sBAAsB,EAAE;YACvC,IAAI,CAAC,aAAa,EAAE,CAAC;YACrB,OAAO;SACR;QAED,8CAA8C;QAC9C,MAAM,QAAQ,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC;QAChC,MAAM,YAAY,GAAG,QAAQ,GAAG,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE,GAAG,QAAQ,CAAC;QAChE,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC,GAAG,EAAE;YAChC,IAAI,CAAC,UAAU,GAAG,SAAS,CAAC;YAC5B,IAAI,CAAC,aAAa,EAAE,CAAC;QACvB,CAAC,EAAE,YAAY,CAAC,CAAC;IACnB,CAAC;IAEO,aAAa;QACnB,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,KAAK,CAAC,IAAI,IAAI,CAAC,WAAW,KAAK,SAAS,EAAE;YAC5D,OAAO;SACR;QACD,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC,GAAG,EAAE;YAClC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE;gBACtB,GAAG,CAAC,KAAK,IAAI,CAAC,CAAC;gBACf,IAAI,GAAG,CAAC,KAAK,IAAI,GAAG,CAAC,OAAO,EAAE;oBAC5B,GAAG,CAAC,KAAK,GAAG,CAAC,CAAC;oBACd,GAAG,CAAC,QAAQ,EAAE,CAAC;iBAChB;YACH,CAAC,CAAC,CAAC;QACL,CAAC,EAAE,eAAM,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;IACpC,CAAC;IAEM,IAAI,CAAC,QAAkB;QAC5B,MAAM,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,QAAQ,KAAK,QAAQ,CAAC,CAAC;QACpE,IAAI,KAAK,KAAK,CAAC,CAAC,EAAE;YAChB,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YAC3B,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,KAAK,CAAC,EAAE;gBAC1B,IAAI,IAAI,CAAC,UAAU,KAAK,SAAS,EAAE;oBACjC,YAAY,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;oBAC9B,IAAI,CAAC,UAAU,GAAG,SAAS,CAAC;iBAC7B;gBACD,IAAI,IAAI,CAAC,WAAW,KAAK,SAAS,EAAE;oBAClC,aAAa,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;oBAChC,IAAI,CAAC,WAAW,GAAG,SAAS,CAAC;iBAC9B;aACF;SACF;IACH,CAAC;;AAnEH,8BAqEC;AAnEgB,kBAAQ,GAAc,IAAI,SAAS,EAAE,CAAC","sourcesContent":["import { config } from '../config';\n\nexport class Scheduler {\n\n  private static instance: Scheduler = new Scheduler();\n  private jobs: { callback: Function, counter: number, value: number }[] = [];\n  private timeoutRef: NodeJS.Timeout | undefined;\n  private intervalRef: NodeJS.Timeout | undefined;\n\n  public static getInstance(): Scheduler {\n    return Scheduler.instance;\n  }\n\n  public run(callback: Function, counter: number = 1): void {\n    // Job disabled in the config file, do not add it to scheduler\n    if (counter === 0) {\n      return;\n    }\n\n    this.jobs.push({ counter, callback, value: 0 });\n\n    if (this.intervalRef !== undefined || this.timeoutRef !== undefined) {\n      return;\n    }\n\n    if (!config.core.schedulerStartNextHour) {\n      this.startInterval();\n      return;\n    }\n\n    // wait with the initialization till next hour\n    const msInHour = 60 * 60 * 1000;\n    const msToNextHour = msInHour - new Date().getTime() % msInHour;\n    this.timeoutRef = setTimeout(() => {\n      this.timeoutRef = undefined;\n      this.startInterval();\n    }, msToNextHour);\n  }\n\n  private startInterval(): void {\n    if (this.jobs.length === 0 || this.intervalRef !== undefined) {\n      return;\n    }\n    this.intervalRef = setInterval(() => {\n      this.jobs.forEach(job => {\n        job.value += 1;\n        if (job.value >= job.counter) {\n          job.value = 0;\n          job.callback();\n        }\n      });\n    }, config.core.schedulerInterval);\n  }\n\n  public stop(callback: Function): void {\n    const index = this.jobs.findIndex(job => job.callback === callback);\n    if (index !== -1) {\n      this.jobs.splice(index, 1);\n      if (this.jobs.length === 0) {\n        if (this.timeoutRef !== undefined) {\n          clearTimeout(this.timeoutRef);\n          this.timeoutRef = undefined;\n        }\n        if (this.intervalRef !== undefined) {\n          clearInterval(this.intervalRef);\n          this.intervalRef = undefined;\n        }\n      }\n    }\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"b2ab6e20242f74b73222ee2fb473ecc8fa275215","contentHash":"b1cb140ce8678af1aeebbc3fdaf3c2160c50955b191d35bbbacd4e3e8f077cfc"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/utils/utils.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/utils/utils.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":92}},"2":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"3":{"start":{"line":6,"column":8},"end":{"line":6,"column":20}},"4":{"start":{"line":9,"column":4},"end":{"line":11,"column":5}},"5":{"start":{"line":10,"column":8},"end":{"line":10,"column":21}},"6":{"start":{"line":13,"column":4},"end":{"line":15,"column":5}},"7":{"start":{"line":14,"column":8},"end":{"line":14,"column":21}},"8":{"start":{"line":18,"column":4},"end":{"line":39,"column":5}},"9":{"start":{"line":19,"column":8},"end":{"line":21,"column":9}},"10":{"start":{"line":20,"column":12},"end":{"line":20,"column":21}},"11":{"start":{"line":23,"column":8},"end":{"line":25,"column":9}},"12":{"start":{"line":24,"column":12},"end":{"line":24,"column":25}},"13":{"start":{"line":27,"column":8},"end":{"line":29,"column":9}},"14":{"start":{"line":28,"column":12},"end":{"line":28,"column":21}},"15":{"start":{"line":31,"column":8},"end":{"line":33,"column":9}},"16":{"start":{"line":32,"column":12},"end":{"line":32,"column":25}},"17":{"start":{"line":35,"column":8},"end":{"line":37,"column":9}},"18":{"start":{"line":36,"column":12},"end":{"line":36,"column":25}},"19":{"start":{"line":40,"column":4},"end":{"line":45,"column":5}},"20":{"start":{"line":41,"column":8},"end":{"line":43,"column":9}},"21":{"start":{"line":42,"column":12},"end":{"line":42,"column":25}},"22":{"start":{"line":46,"column":4},"end":{"line":46,"column":16}},"23":{"start":{"line":48,"column":0},"end":{"line":48,"column":34}},"24":{"start":{"line":50,"column":4},"end":{"line":52,"column":5}},"25":{"start":{"line":51,"column":8},"end":{"line":51,"column":15}},"26":{"start":{"line":53,"column":4},"end":{"line":55,"column":5}},"27":{"start":{"line":54,"column":8},"end":{"line":54,"column":62}},"28":{"start":{"line":54,"column":33},"end":{"line":54,"column":60}},"29":{"start":{"line":56,"column":4},"end":{"line":63,"column":5}},"30":{"start":{"line":57,"column":8},"end":{"line":62,"column":9}},"31":{"start":{"line":58,"column":12},"end":{"line":61,"column":13}},"32":{"start":{"line":59,"column":16},"end":{"line":59,"column":51}},"33":{"start":{"line":60,"column":16},"end":{"line":60,"column":51}},"34":{"start":{"line":65,"column":0},"end":{"line":65,"column":34}},"35":{"start":{"line":67,"column":4},"end":{"line":69,"column":5}},"36":{"start":{"line":68,"column":8},"end":{"line":68,"column":20}},"37":{"start":{"line":70,"column":4},"end":{"line":72,"column":5}},"38":{"start":{"line":71,"column":8},"end":{"line":71,"column":70}},"39":{"start":{"line":71,"column":36},"end":{"line":71,"column":68}},"40":{"start":{"line":73,"column":4},"end":{"line":89,"column":5}},"41":{"start":{"line":74,"column":8},"end":{"line":76,"column":9}},"42":{"start":{"line":74,"column":35},"end":{"line":74,"column":59}},"43":{"start":{"line":75,"column":12},"end":{"line":75,"column":26}},"44":{"start":{"line":77,"column":20},"end":{"line":77,"column":58}},"45":{"start":{"line":77,"column":40},"end":{"line":77,"column":57}},"46":{"start":{"line":78,"column":8},"end":{"line":80,"column":9}},"47":{"start":{"line":79,"column":12},"end":{"line":79,"column":25}},"48":{"start":{"line":81,"column":21},"end":{"line":81,"column":42}},"49":{"start":{"line":82,"column":8},"end":{"line":82,"column":44}},"50":{"start":{"line":83,"column":8},"end":{"line":87,"column":9}},"51":{"start":{"line":84,"column":12},"end":{"line":86,"column":13}},"52":{"start":{"line":85,"column":16},"end":{"line":85,"column":68}},"53":{"start":{"line":88,"column":8},"end":{"line":88,"column":20}},"54":{"start":{"line":90,"column":4},"end":{"line":90,"column":18}},"55":{"start":{"line":92,"column":0},"end":{"line":92,"column":30}},"56":{"start":{"line":94,"column":4},"end":{"line":96,"column":5}},"57":{"start":{"line":95,"column":8},"end":{"line":95,"column":17}},"58":{"start":{"line":97,"column":17},"end":{"line":97,"column":40}},"59":{"start":{"line":98,"column":13},"end":{"line":98,"column":24}},"60":{"start":{"line":99,"column":4},"end":{"line":104,"column":5}},"61":{"start":{"line":99,"column":27},"end":{"line":99,"column":38}},"62":{"start":{"line":100,"column":8},"end":{"line":102,"column":9}},"63":{"start":{"line":101,"column":12},"end":{"line":101,"column":19}},"64":{"start":{"line":103,"column":8},"end":{"line":103,"column":20}},"65":{"start":{"line":105,"column":4},"end":{"line":105,"column":14}},"66":{"start":{"line":107,"column":0},"end":{"line":107,"column":32}}},"fnMap":{"0":{"name":"deepCompare","decl":{"start":{"line":4,"column":9},"end":{"line":4,"column":20}},"loc":{"start":{"line":4,"column":27},"end":{"line":47,"column":1}},"line":4},"1":{"name":"deepIterate","decl":{"start":{"line":49,"column":9},"end":{"line":49,"column":20}},"loc":{"start":{"line":49,"column":39},"end":{"line":64,"column":1}},"line":49},"2":{"name":"(anonymous_2)","decl":{"start":{"line":54,"column":23},"end":{"line":54,"column":24}},"loc":{"start":{"line":54,"column":33},"end":{"line":54,"column":60}},"line":54},"3":{"name":"deepClone","decl":{"start":{"line":66,"column":9},"end":{"line":66,"column":18}},"loc":{"start":{"line":66,"column":54},"end":{"line":91,"column":1}},"line":66},"4":{"name":"(anonymous_4)","decl":{"start":{"line":71,"column":26},"end":{"line":71,"column":27}},"loc":{"start":{"line":71,"column":36},"end":{"line":71,"column":68}},"line":71},"5":{"name":"(anonymous_5)","decl":{"start":{"line":74,"column":25},"end":{"line":74,"column":26}},"loc":{"start":{"line":74,"column":35},"end":{"line":74,"column":59}},"line":74},"6":{"name":"(anonymous_6)","decl":{"start":{"line":77,"column":32},"end":{"line":77,"column":33}},"loc":{"start":{"line":77,"column":40},"end":{"line":77,"column":57}},"line":77},"7":{"name":"generateId","decl":{"start":{"line":93,"column":9},"end":{"line":93,"column":19}},"loc":{"start":{"line":93,"column":27},"end":{"line":106,"column":1}},"line":93},"8":{"name":"(anonymous_8)","decl":{"start":{"line":99,"column":22},"end":{"line":99,"column":23}},"loc":{"start":{"line":99,"column":27},"end":{"line":99,"column":38}},"line":99}},"branchMap":{"0":{"loc":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},{"start":{"line":5,"column":4},"end":{"line":7,"column":5}}],"line":5},"1":{"loc":{"start":{"line":9,"column":4},"end":{"line":11,"column":5}},"type":"if","locations":[{"start":{"line":9,"column":4},"end":{"line":11,"column":5}},{"start":{"line":9,"column":4},"end":{"line":11,"column":5}}],"line":9},"2":{"loc":{"start":{"line":9,"column":8},"end":{"line":9,"column":56}},"type":"binary-expr","locations":[{"start":{"line":9,"column":8},"end":{"line":9,"column":30}},{"start":{"line":9,"column":34},"end":{"line":9,"column":56}}],"line":9},"3":{"loc":{"start":{"line":13,"column":4},"end":{"line":15,"column":5}},"type":"if","locations":[{"start":{"line":13,"column":4},"end":{"line":15,"column":5}},{"start":{"line":13,"column":4},"end":{"line":15,"column":5}}],"line":13},"4":{"loc":{"start":{"line":19,"column":8},"end":{"line":21,"column":9}},"type":"if","locations":[{"start":{"line":19,"column":8},"end":{"line":21,"column":9}},{"start":{"line":19,"column":8},"end":{"line":21,"column":9}}],"line":19},"5":{"loc":{"start":{"line":23,"column":8},"end":{"line":25,"column":9}},"type":"if","locations":[{"start":{"line":23,"column":8},"end":{"line":25,"column":9}},{"start":{"line":23,"column":8},"end":{"line":25,"column":9}}],"line":23},"6":{"loc":{"start":{"line":27,"column":8},"end":{"line":29,"column":9}},"type":"if","locations":[{"start":{"line":27,"column":8},"end":{"line":29,"column":9}},{"start":{"line":27,"column":8},"end":{"line":29,"column":9}}],"line":27},"7":{"loc":{"start":{"line":31,"column":8},"end":{"line":33,"column":9}},"type":"if","locations":[{"start":{"line":31,"column":8},"end":{"line":33,"column":9}},{"start":{"line":31,"column":8},"end":{"line":33,"column":9}}],"line":31},"8":{"loc":{"start":{"line":35,"column":8},"end":{"line":37,"column":9}},"type":"if","locations":[{"start":{"line":35,"column":8},"end":{"line":37,"column":9}},{"start":{"line":35,"column":8},"end":{"line":37,"column":9}}],"line":35},"9":{"loc":{"start":{"line":41,"column":8},"end":{"line":43,"column":9}},"type":"if","locations":[{"start":{"line":41,"column":8},"end":{"line":43,"column":9}},{"start":{"line":41,"column":8},"end":{"line":43,"column":9}}],"line":41},"10":{"loc":{"start":{"line":41,"column":12},"end":{"line":41,"column":101}},"type":"binary-expr","locations":[{"start":{"line":41,"column":12},"end":{"line":41,"column":54}},{"start":{"line":41,"column":58},"end":{"line":41,"column":101}}],"line":41},"11":{"loc":{"start":{"line":50,"column":4},"end":{"line":52,"column":5}},"type":"if","locations":[{"start":{"line":50,"column":4},"end":{"line":52,"column":5}},{"start":{"line":50,"column":4},"end":{"line":52,"column":5}}],"line":50},"12":{"loc":{"start":{"line":53,"column":4},"end":{"line":55,"column":5}},"type":"if","locations":[{"start":{"line":53,"column":4},"end":{"line":55,"column":5}},{"start":{"line":53,"column":4},"end":{"line":55,"column":5}}],"line":53},"13":{"loc":{"start":{"line":56,"column":4},"end":{"line":63,"column":5}},"type":"if","locations":[{"start":{"line":56,"column":4},"end":{"line":63,"column":5}},{"start":{"line":56,"column":4},"end":{"line":63,"column":5}}],"line":56},"14":{"loc":{"start":{"line":58,"column":12},"end":{"line":61,"column":13}},"type":"if","locations":[{"start":{"line":58,"column":12},"end":{"line":61,"column":13}},{"start":{"line":58,"column":12},"end":{"line":61,"column":13}}],"line":58},"15":{"loc":{"start":{"line":66,"column":27},"end":{"line":66,"column":39}},"type":"default-arg","locations":[{"start":{"line":66,"column":37},"end":{"line":66,"column":39}}],"line":66},"16":{"loc":{"start":{"line":66,"column":41},"end":{"line":66,"column":52}},"type":"default-arg","locations":[{"start":{"line":66,"column":50},"end":{"line":66,"column":52}}],"line":66},"17":{"loc":{"start":{"line":67,"column":4},"end":{"line":69,"column":5}},"type":"if","locations":[{"start":{"line":67,"column":4},"end":{"line":69,"column":5}},{"start":{"line":67,"column":4},"end":{"line":69,"column":5}}],"line":67},"18":{"loc":{"start":{"line":70,"column":4},"end":{"line":72,"column":5}},"type":"if","locations":[{"start":{"line":70,"column":4},"end":{"line":72,"column":5}},{"start":{"line":70,"column":4},"end":{"line":72,"column":5}}],"line":70},"19":{"loc":{"start":{"line":73,"column":4},"end":{"line":89,"column":5}},"type":"if","locations":[{"start":{"line":73,"column":4},"end":{"line":89,"column":5}},{"start":{"line":73,"column":4},"end":{"line":89,"column":5}}],"line":73},"20":{"loc":{"start":{"line":74,"column":8},"end":{"line":76,"column":9}},"type":"if","locations":[{"start":{"line":74,"column":8},"end":{"line":76,"column":9}},{"start":{"line":74,"column":8},"end":{"line":76,"column":9}}],"line":74},"21":{"loc":{"start":{"line":78,"column":8},"end":{"line":80,"column":9}},"type":"if","locations":[{"start":{"line":78,"column":8},"end":{"line":80,"column":9}},{"start":{"line":78,"column":8},"end":{"line":80,"column":9}}],"line":78},"22":{"loc":{"start":{"line":84,"column":12},"end":{"line":86,"column":13}},"type":"if","locations":[{"start":{"line":84,"column":12},"end":{"line":86,"column":13}},{"start":{"line":84,"column":12},"end":{"line":86,"column":13}}],"line":84},"23":{"loc":{"start":{"line":94,"column":4},"end":{"line":96,"column":5}},"type":"if","locations":[{"start":{"line":94,"column":4},"end":{"line":96,"column":5}},{"start":{"line":94,"column":4},"end":{"line":96,"column":5}}],"line":94},"24":{"loc":{"start":{"line":100,"column":8},"end":{"line":102,"column":9}},"type":"if","locations":[{"start":{"line":100,"column":8},"end":{"line":102,"column":9}},{"start":{"line":100,"column":8},"end":{"line":102,"column":9}}],"line":100}},"s":{"0":1,"1":1,"2":43,"3":27,"4":16,"5":14,"6":2,"7":0,"8":2,"9":2,"10":0,"11":2,"12":0,"13":2,"14":2,"15":0,"16":0,"17":0,"18":0,"19":2,"20":2,"21":0,"22":2,"23":1,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":1,"35":1837,"36":0,"37":1837,"38":480,"39":205,"40":1357,"41":461,"42":461,"43":109,"44":352,"45":7568,"46":352,"47":0,"48":352,"49":352,"50":352,"51":1624,"52":1624,"53":352,"54":896,"55":1,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":1},"f":{"0":43,"1":0,"2":0,"3":1837,"4":205,"5":461,"6":7568,"7":0,"8":0},"b":{"0":[27,16],"1":[14,2],"2":[16,2],"3":[0,2],"4":[0,2],"5":[0,2],"6":[2,0],"7":[0,0],"8":[0,0],"9":[0,2],"10":[2,2],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0],"16":[8],"17":[0,1837],"18":[480,1357],"19":[461,896],"20":[109,352],"21":[0,352],"22":[1624,0],"23":[0,0],"24":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/utils/utils.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/utils/utils.ts"],"names":[],"mappings":"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","sourcesContent":["\nexport function deepCompare(x: any, y: any): boolean {\n\n  if (x === y) { return true; }\n  // if both x and y are null or undefined and exactly the same\n\n  if (!(x instanceof Object) || !(y instanceof Object)) { return false; }\n  // if they are not strictly equal, they both need to be Objects\n\n  if (x.constructor !== y.constructor) { return false; }\n  // they must have the exact same prototype chain, the closest we can do is\n  // test there constructor.\n\n  for (const p in x) {\n    if (!Object.prototype.hasOwnProperty.call(x, p)) { continue; }\n    // other properties were tested using x.constructor === y.constructor\n\n    if (!Object.prototype.hasOwnProperty.call(y, p)) { return false; }\n    // allows to compare x[ p ] and y[ p ] when set to undefined\n\n    if (x[p] === y[p]) { continue; }\n    // if they have the same strict value or identity then they are equal\n\n    if (typeof (x[p]) !== 'object') { return false; }\n    // Numbers, Strings, Functions, Booleans must be strictly equal\n\n    if (!deepCompare(x[p], y[p])) { return false; }\n    // Objects and Arrays must be tested recursively\n  }\n\n  for (const p in y) {\n    if (Object.prototype.hasOwnProperty.call(y, p) && !Object.prototype.hasOwnProperty.call(x, p)) { return false; }\n    // allows x[ p ] to be set to undefined\n  }\n  return true;\n}\n\nexport function deepIterate(source: any, callback: (holder: any, key: string, value: any) => void): void {\n  if (source === null) { return; }\n\n  if (source instanceof Array) {\n    source.forEach((item: any) => deepIterate(item, callback));\n  }\n\n  if (source instanceof Object) {\n    for (const key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        deepIterate(source[key], callback);\n        callback(source, key, source[key]);\n      }\n    }\n  }\n}\n\nexport function deepClone(source: any, ignores: Function[] = [], refMap: {s: Object, d: Object}[] = []): any {\n  if (source === null) { return null; }\n\n  if (source instanceof Array) {\n    return source.map((item: any) => deepClone(item, ignores, refMap));\n  }\n\n  if (source instanceof Object) {\n    if (ignores.some(ignore => source instanceof ignore)) {\n      return source;\n    }\n    const ref = refMap.find(item => item.s === source);\n    if (ref !== undefined) {\n      return ref.d;\n    }\n    const dest = Object.create(source);\n    refMap.push({s: source, d: dest});\n    for (const key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        dest[key] = deepClone(source[key], ignores, refMap);\n      }\n    }\n    return dest;\n  }\n\n  return source;\n}\n\nexport function generateId<T extends {id: number}[]>(array: T): number {\n  if (array.length === 0) {\n    return 1;\n  }\n\n  const last = array[array.length - 1];\n  let id = last.id + 1;\n\n  while (array.find(g => g.id === id)) {\n    if (id === Number.MAX_VALUE) {\n      id = 0;\n    }\n    id = id + 1;\n  }\n\n  return id;\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"195aab512d6ce0228dfd40a86e67af286b54fa66","contentHash":"dcab1019aae684cc4f1cfef2acda7a2193621f28f1f2950fc3b3c1954d955cdb"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/alert-prompt.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/alert-prompt.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":29}},"2":{"start":{"line":4,"column":17},"end":{"line":4,"column":36}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":24}},"4":{"start":{"line":8,"column":8},"end":{"line":8,"column":31}},"5":{"start":{"line":9,"column":8},"end":{"line":9,"column":28}},"6":{"start":{"line":12,"column":0},"end":{"line":12,"column":34}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":4},"end":{"line":6,"column":5}},"loc":{"start":{"line":6,"column":35},"end":{"line":10,"column":5}},"line":6}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1},"f":{"0":1},"b":{},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/alert-prompt.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/alert-prompt.ts"],"names":[],"mappings":";;;AAAA,qCAAkC;AAGlC,MAAa,WAAY,SAAQ,eAAY;IAI3C,YAAY,QAAgB,EAAS,OAAoB;QACvD,KAAK,CAAC,QAAQ,CAAC,CAAC;QADmB,YAAO,GAAP,OAAO,CAAa;QAFhD,SAAI,GAAW,OAAO,CAAC;IAIhC,CAAC;CAEF;AARD,kCAQC","sourcesContent":["import { Prompt } from './prompt';\nimport { GameMessage } from '../../game-message';\n\nexport class AlertPrompt extends Prompt<true> {\n\n  readonly type: string = 'Alert';\n\n  constructor(playerId: number, public message: GameMessage) {\n    super(playerId);\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"b0bb1e04efb2d7fd8ff1387bbb93c6b230e1b67d","contentHash":"bf2d3c0f9415f95dd7dbc10fd3a1ab1aff9e2094a5408653cb78ea076e0579bb"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/prompt.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/prompt.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":24}},"2":{"start":{"line":6,"column":8},"end":{"line":6,"column":33}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":20}},"4":{"start":{"line":10,"column":8},"end":{"line":10,"column":22}},"5":{"start":{"line":13,"column":8},"end":{"line":13,"column":20}},"6":{"start":{"line":16,"column":0},"end":{"line":16,"column":24}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":4},"end":{"line":5,"column":5}},"loc":{"start":{"line":5,"column":26},"end":{"line":8,"column":5}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":9,"column":4},"end":{"line":9,"column":5}},"loc":{"start":{"line":9,"column":26},"end":{"line":11,"column":5}},"line":9},"2":{"name":"(anonymous_2)","decl":{"start":{"line":12,"column":4},"end":{"line":12,"column":5}},"loc":{"start":{"line":12,"column":28},"end":{"line":14,"column":5}},"line":12}},"branchMap":{},"s":{"0":1,"1":1,"2":46,"3":46,"4":0,"5":0,"6":1},"f":{"0":46,"1":0,"2":0},"b":{},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/prompt.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/prompt.ts"],"names":[],"mappings":";;;AAEA,MAAsB,MAAM;IAM1B,YAAmB,QAAgB;QAAhB,aAAQ,GAAR,QAAQ,CAAQ;QACjC,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;IACd,CAAC;IAEM,MAAM,CAAC,MAAW,EAAE,KAAY;QACrC,OAAO,MAAM,CAAC;IAChB,CAAC;IAEM,QAAQ,CAAC,MAAgB,EAAE,KAAY;QAC5C,OAAO,IAAI,CAAC;IACd,CAAC;CAEF;AAlBD,wBAkBC","sourcesContent":["import { State } from '../state/state';\n\nexport abstract class Prompt<T> {\n\n  readonly abstract type: string;\n  public id: number;\n  public result: T | undefined;\n\n  constructor(public playerId: number) {\n    this.id = 0;\n  }\n\n  public decode(result: any, state: State): T | null {\n    return result;\n  }\n\n  public validate(result: T | null, state: State): boolean {\n    return true;\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"84c693f3bf04310fdfdc7dea6357fd7c88aca760","contentHash":"8b262f701e95245e297d8c8bbbaba935146af9153433be33e869bda5e3bfdc43"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/serializer/prompt.serializer.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/serializer/prompt.serializer.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":34}},"2":{"start":{"line":4,"column":21},"end":{"line":4,"column":45}},"3":{"start":{"line":5,"column":23},"end":{"line":5,"column":49}},"4":{"start":{"line":6,"column":23},"end":{"line":6,"column":63}},"5":{"start":{"line":7,"column":31},"end":{"line":7,"column":79}},"6":{"start":{"line":8,"column":31},"end":{"line":8,"column":79}},"7":{"start":{"line":9,"column":30},"end":{"line":9,"column":77}},"8":{"start":{"line":10,"column":31},"end":{"line":10,"column":79}},"9":{"start":{"line":11,"column":32},"end":{"line":11,"column":81}},"10":{"start":{"line":12,"column":30},"end":{"line":12,"column":77}},"11":{"start":{"line":13,"column":27},"end":{"line":13,"column":71}},"12":{"start":{"line":14,"column":25},"end":{"line":14,"column":67}},"13":{"start":{"line":15,"column":31},"end":{"line":15,"column":79}},"14":{"start":{"line":16,"column":29},"end":{"line":16,"column":75}},"15":{"start":{"line":17,"column":29},"end":{"line":17,"column":75}},"16":{"start":{"line":18,"column":29},"end":{"line":18,"column":75}},"17":{"start":{"line":19,"column":28},"end":{"line":19,"column":73}},"18":{"start":{"line":20,"column":24},"end":{"line":20,"column":65}},"19":{"start":{"line":21,"column":28},"end":{"line":21,"column":73}},"20":{"start":{"line":22,"column":25},"end":{"line":22,"column":67}},"21":{"start":{"line":23,"column":30},"end":{"line":23,"column":77}},"22":{"start":{"line":26,"column":8},"end":{"line":45,"column":10}},"23":{"start":{"line":46,"column":8},"end":{"line":46,"column":48}},"24":{"start":{"line":46,"column":40},"end":{"line":46,"column":46}},"25":{"start":{"line":47,"column":8},"end":{"line":47,"column":56}},"26":{"start":{"line":47,"column":42},"end":{"line":47,"column":54}},"27":{"start":{"line":50,"column":21},"end":{"line":50,"column":46}},"28":{"start":{"line":51,"column":20},"end":{"line":51,"column":71}},"29":{"start":{"line":51,"column":40},"end":{"line":51,"column":70}},"30":{"start":{"line":52,"column":8},"end":{"line":54,"column":9}},"31":{"start":{"line":53,"column":12},"end":{"line":53,"column":133}},"32":{"start":{"line":55,"column":8},"end":{"line":55,"column":75}},"33":{"start":{"line":58,"column":20},"end":{"line":58,"column":62}},"34":{"start":{"line":58,"column":40},"end":{"line":58,"column":61}},"35":{"start":{"line":59,"column":8},"end":{"line":61,"column":9}},"36":{"start":{"line":60,"column":12},"end":{"line":60,"column":132}},"37":{"start":{"line":62,"column":23},"end":{"line":62,"column":62}},"38":{"start":{"line":63,"column":8},"end":{"line":63,"column":26}},"39":{"start":{"line":64,"column":8},"end":{"line":64,"column":43}},"40":{"start":{"line":67,"column":0},"end":{"line":67,"column":44}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":25,"column":4},"end":{"line":25,"column":5}},"loc":{"start":{"line":25,"column":18},"end":{"line":48,"column":5}},"line":25},"1":{"name":"(anonymous_1)","decl":{"start":{"line":46,"column":35},"end":{"line":46,"column":36}},"loc":{"start":{"line":46,"column":40},"end":{"line":46,"column":46}},"line":46},"2":{"name":"(anonymous_2)","decl":{"start":{"line":47,"column":37},"end":{"line":47,"column":38}},"loc":{"start":{"line":47,"column":42},"end":{"line":47,"column":54}},"line":47},"3":{"name":"(anonymous_3)","decl":{"start":{"line":49,"column":4},"end":{"line":49,"column":5}},"loc":{"start":{"line":49,"column":22},"end":{"line":56,"column":5}},"line":49},"4":{"name":"(anonymous_4)","decl":{"start":{"line":51,"column":35},"end":{"line":51,"column":36}},"loc":{"start":{"line":51,"column":40},"end":{"line":51,"column":70}},"line":51},"5":{"name":"(anonymous_5)","decl":{"start":{"line":57,"column":4},"end":{"line":57,"column":5}},"loc":{"start":{"line":57,"column":31},"end":{"line":65,"column":5}},"line":57},"6":{"name":"(anonymous_6)","decl":{"start":{"line":58,"column":35},"end":{"line":58,"column":36}},"loc":{"start":{"line":58,"column":40},"end":{"line":58,"column":61}},"line":58}},"branchMap":{"0":{"loc":{"start":{"line":52,"column":8},"end":{"line":54,"column":9}},"type":"if","locations":[{"start":{"line":52,"column":8},"end":{"line":54,"column":9}},{"start":{"line":52,"column":8},"end":{"line":54,"column":9}}],"line":52},"1":{"loc":{"start":{"line":59,"column":8},"end":{"line":61,"column":9}},"type":"if","locations":[{"start":{"line":59,"column":8},"end":{"line":61,"column":9}},{"start":{"line":59,"column":8},"end":{"line":61,"column":9}}],"line":59}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":3,"23":3,"24":54,"25":3,"26":54,"27":2,"28":2,"29":19,"30":2,"31":1,"32":1,"33":2,"34":19,"35":2,"36":1,"37":1,"38":1,"39":1,"40":1},"f":{"0":3,"1":54,"2":54,"3":2,"4":19,"5":2,"6":19},"b":{"0":[1,1],"1":[1,1]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/serializer/prompt.serializer.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/serializer/prompt.serializer.ts"],"names":[],"mappings":"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","sourcesContent":["import { SerializerContext, Serialized, Serializer } from './serializer.interface';\nimport { GameError } from '../game-error';\nimport { GameCoreError } from '../game-message';\nimport { AlertPrompt } from '../store/prompts/alert-prompt';\nimport { AttachEnergyPrompt } from '../store/prompts/attach-energy-prompt';\nimport { ChooseAttackPrompt } from '../store/prompts/choose-attack-prompt';\nimport { ChooseCardsPrompt } from '../store/prompts/choose-cards-prompt';\nimport { ChooseEnergyPrompt } from '../store/prompts/choose-energy-prompt';\nimport { ChoosePokemonPrompt } from '../store/prompts/choose-pokemon-prompt';\nimport { ChoosePrizePrompt } from '../store/prompts/choose-prize-prompt';\nimport { CoinFlipPrompt } from '../store/prompts/coin-flip-prompt';\nimport { ConfirmPrompt } from '../store/prompts/confirm-prompt';\nimport { InvitePlayerPrompt } from '../store/prompts/invite-player-prompt';\nimport { MoveDamagePrompt } from '../store/prompts/move-damage-prompt';\nimport { MoveEnergyPrompt } from '../store/prompts/move-energy-prompt';\nimport { OrderCardsPrompt } from '../store/prompts/order-cards-prompt';\nimport { Prompt } from '../store/prompts/prompt';\nimport { PutDamagePrompt } from '../store/prompts/put-damage-prompt';\nimport { SelectPrompt } from '../store/prompts/select-prompt';\nimport { ShowCardsPrompt } from '../store/prompts/show-cards-prompt';\nimport { ShuffleDeckPrompt } from '../store/prompts/shuffle-prompt';\nimport { ShuffleHandPrompt } from '../store/prompts/shuffle-hand-prompt';\n\nexport class PromptSerializer implements Serializer<Prompt<any>> {\n\n  public readonly types: string[];\n  public readonly classes: any[];\n\n  private rows: { classValue: (new (...params: any[]) => Prompt<any>), type: string }[] = [\n    { classValue: AlertPrompt, type: 'AlertPrompt' },\n    { classValue: AttachEnergyPrompt, type: 'AttachEnergyPrompt' },\n    { classValue: ChooseAttackPrompt, type: 'ChooseAttackPrompt' },\n    { classValue: ChooseCardsPrompt, type: 'ChooseCardsPrompt' },\n    { classValue: ChooseEnergyPrompt, type: 'ChooseEnergyPrompt' },\n    { classValue: ChoosePokemonPrompt, type: 'ChoosePokemonPrompt' },\n    { classValue: ChoosePrizePrompt, type: 'ChoosePrizePrompt' },\n    { classValue: CoinFlipPrompt, type: 'CoinFlipPrompt' },\n    { classValue: ConfirmPrompt, type: 'ConfirmPrompt' },\n    { classValue: InvitePlayerPrompt, type: 'InvitePlayerPrompt' },\n    { classValue: MoveDamagePrompt, type: 'MoveDamagePrompt' },\n    { classValue: MoveEnergyPrompt, type: 'MoveEnergyPrompt' },\n    { classValue: OrderCardsPrompt, type: 'OrderCardsPrompt' },\n    { classValue: PutDamagePrompt, type: 'PutDamagePrompt' },\n    { classValue: SelectPrompt, type: 'SelectPrompt' },\n    { classValue: ShowCardsPrompt, type: 'ShowCardsPrompt' },\n    { classValue: ShuffleDeckPrompt, type: 'ShuffleDeckPrompt' },\n    { classValue: ShuffleHandPrompt, type: 'ShuffleHandPrompt'}\n  ];\n\n  constructor () {\n    this.types = this.rows.map(p => p.type);\n    this.classes = this.rows.map(p => p.classValue);\n  }\n\n  public serialize(prompt: Prompt<any>): Serialized {\n    const data: any = { ...prompt };\n    const row = this.rows.find(r => prompt instanceof r.classValue);\n    if (row === undefined) {\n      throw new GameError(GameCoreError.ERROR_SERIALIZER, `Unknown prompt type '${prompt.type}'.`);\n    }\n\n    return {\n      ...data,\n      _type: row.type,\n    };\n  }\n\n  public deserialize(data: Serialized, context: SerializerContext): Prompt<any> {\n    const row = this.rows.find(p => p.type === data._type);\n    if (row === undefined) {\n      throw new GameError(GameCoreError.ERROR_SERIALIZER, `Unknown prompt type '${data._type}'.`);\n    }\n    const prompt = Object.create(row.classValue.prototype);\n    delete (data as any)._type;\n    return Object.assign(prompt, data);\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"a96a0488832b0855acf46f68c011fd964fcfbb68","contentHash":"af31603bbceb660d8ef10d803e32fd2e2767f8d7bb40c2a2516a7a2f40879d71"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/game-error.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/game-error.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":27}},"2":{"start":{"line":6,"column":8},"end":{"line":6,"column":39}},"3":{"start":{"line":9,"column":0},"end":{"line":9,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":4},"end":{"line":5,"column":5}},"loc":{"start":{"line":5,"column":31},"end":{"line":7,"column":5}},"line":5}},"branchMap":{"0":{"loc":{"start":{"line":6,"column":23},"end":{"line":6,"column":38}},"type":"binary-expr","locations":[{"start":{"line":6,"column":23},"end":{"line":6,"column":30}},{"start":{"line":6,"column":34},"end":{"line":6,"column":38}}],"line":6}},"s":{"0":1,"1":1,"2":4,"3":1},"f":{"0":4},"b":{"0":[4,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/game-error.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/game-error.ts"],"names":[],"mappings":";;;AAEA,MAAa,SAAS;IAGpB,YAAY,IAAiB,EAAE,OAAgB;QAC7C,IAAI,CAAC,OAAO,GAAG,OAAO,IAAI,IAAI,CAAC;IACjC,CAAC;CAEF;AAPD,8BAOC","sourcesContent":["import { GameMessage } from './game-message';\n\nexport class GameError {\n  public message: string;\n\n  constructor(code: GameMessage, message?: string) {\n    this.message = message || code;\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"d8b906a94bd62bdbd2004bd996ebb253df27ea28","contentHash":"36ba7686896fffbce1ecf6f0e2da16523e9a6cc1568ef86098d71b2ce1e0040f"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/game-message.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/game-message.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":124}},"2":{"start":{"line":5,"column":0},"end":{"line":15,"column":74}},"3":{"start":{"line":6,"column":4},"end":{"line":6,"column":65}},"4":{"start":{"line":7,"column":4},"end":{"line":7,"column":77}},"5":{"start":{"line":8,"column":4},"end":{"line":8,"column":61}},"6":{"start":{"line":9,"column":4},"end":{"line":9,"column":79}},"7":{"start":{"line":10,"column":4},"end":{"line":10,"column":67}},"8":{"start":{"line":11,"column":4},"end":{"line":11,"column":65}},"9":{"start":{"line":12,"column":4},"end":{"line":12,"column":59}},"10":{"start":{"line":13,"column":4},"end":{"line":13,"column":79}},"11":{"start":{"line":14,"column":4},"end":{"line":14,"column":71}},"12":{"start":{"line":17,"column":0},"end":{"line":58,"column":83}},"13":{"start":{"line":18,"column":4},"end":{"line":18,"column":66}},"14":{"start":{"line":19,"column":4},"end":{"line":19,"column":60}},"15":{"start":{"line":20,"column":4},"end":{"line":20,"column":66}},"16":{"start":{"line":21,"column":4},"end":{"line":21,"column":64}},"17":{"start":{"line":22,"column":4},"end":{"line":22,"column":86}},"18":{"start":{"line":23,"column":4},"end":{"line":23,"column":72}},"19":{"start":{"line":24,"column":4},"end":{"line":24,"column":62}},"20":{"start":{"line":25,"column":4},"end":{"line":25,"column":66}},"21":{"start":{"line":26,"column":4},"end":{"line":26,"column":80}},"22":{"start":{"line":27,"column":4},"end":{"line":27,"column":64}},"23":{"start":{"line":28,"column":4},"end":{"line":28,"column":78}},"24":{"start":{"line":29,"column":4},"end":{"line":29,"column":76}},"25":{"start":{"line":30,"column":4},"end":{"line":30,"column":52}},"26":{"start":{"line":31,"column":4},"end":{"line":31,"column":52}},"27":{"start":{"line":32,"column":4},"end":{"line":32,"column":58}},"28":{"start":{"line":33,"column":4},"end":{"line":33,"column":58}},"29":{"start":{"line":34,"column":4},"end":{"line":34,"column":54}},"30":{"start":{"line":35,"column":4},"end":{"line":35,"column":66}},"31":{"start":{"line":36,"column":4},"end":{"line":36,"column":72}},"32":{"start":{"line":37,"column":4},"end":{"line":37,"column":58}},"33":{"start":{"line":38,"column":4},"end":{"line":38,"column":66}},"34":{"start":{"line":39,"column":4},"end":{"line":39,"column":68}},"35":{"start":{"line":40,"column":4},"end":{"line":40,"column":64}},"36":{"start":{"line":41,"column":4},"end":{"line":41,"column":56}},"37":{"start":{"line":42,"column":4},"end":{"line":42,"column":66}},"38":{"start":{"line":43,"column":4},"end":{"line":43,"column":88}},"39":{"start":{"line":44,"column":4},"end":{"line":44,"column":88}},"40":{"start":{"line":45,"column":4},"end":{"line":45,"column":66}},"41":{"start":{"line":46,"column":4},"end":{"line":46,"column":76}},"42":{"start":{"line":47,"column":4},"end":{"line":47,"column":70}},"43":{"start":{"line":48,"column":4},"end":{"line":48,"column":86}},"44":{"start":{"line":49,"column":4},"end":{"line":49,"column":76}},"45":{"start":{"line":50,"column":4},"end":{"line":50,"column":72}},"46":{"start":{"line":51,"column":4},"end":{"line":51,"column":72}},"47":{"start":{"line":52,"column":4},"end":{"line":52,"column":74}},"48":{"start":{"line":53,"column":4},"end":{"line":53,"column":70}},"49":{"start":{"line":54,"column":4},"end":{"line":54,"column":78}},"50":{"start":{"line":55,"column":4},"end":{"line":55,"column":58}},"51":{"start":{"line":56,"column":4},"end":{"line":56,"column":54}},"52":{"start":{"line":57,"column":4},"end":{"line":57,"column":56}},"53":{"start":{"line":60,"column":0},"end":{"line":106,"column":80}},"54":{"start":{"line":61,"column":4},"end":{"line":61,"column":63}},"55":{"start":{"line":62,"column":4},"end":{"line":62,"column":73}},"56":{"start":{"line":63,"column":4},"end":{"line":63,"column":65}},"57":{"start":{"line":64,"column":4},"end":{"line":64,"column":67}},"58":{"start":{"line":65,"column":4},"end":{"line":65,"column":74}},"59":{"start":{"line":66,"column":4},"end":{"line":66,"column":73}},"60":{"start":{"line":67,"column":4},"end":{"line":67,"column":73}},"61":{"start":{"line":68,"column":4},"end":{"line":68,"column":85}},"62":{"start":{"line":69,"column":4},"end":{"line":69,"column":71}},"63":{"start":{"line":70,"column":4},"end":{"line":70,"column":65}},"64":{"start":{"line":71,"column":4},"end":{"line":71,"column":71}},"65":{"start":{"line":72,"column":4},"end":{"line":72,"column":81}},"66":{"start":{"line":73,"column":4},"end":{"line":73,"column":67}},"67":{"start":{"line":74,"column":4},"end":{"line":74,"column":73}},"68":{"start":{"line":75,"column":4},"end":{"line":75,"column":67}},"69":{"start":{"line":76,"column":4},"end":{"line":76,"column":71}},"70":{"start":{"line":77,"column":4},"end":{"line":77,"column":87}},"71":{"start":{"line":78,"column":4},"end":{"line":78,"column":81}},"72":{"start":{"line":79,"column":4},"end":{"line":79,"column":75}},"73":{"start":{"line":80,"column":4},"end":{"line":80,"column":89}},"74":{"start":{"line":81,"column":4},"end":{"line":81,"column":77}},"75":{"start":{"line":82,"column":4},"end":{"line":82,"column":79}},"76":{"start":{"line":83,"column":4},"end":{"line":83,"column":91}},"77":{"start":{"line":84,"column":4},"end":{"line":84,"column":77}},"78":{"start":{"line":85,"column":4},"end":{"line":85,"column":73}},"79":{"start":{"line":86,"column":4},"end":{"line":86,"column":79}},"80":{"start":{"line":87,"column":4},"end":{"line":87,"column":77}},"81":{"start":{"line":88,"column":4},"end":{"line":88,"column":77}},"82":{"start":{"line":89,"column":4},"end":{"line":89,"column":47}},"83":{"start":{"line":90,"column":4},"end":{"line":90,"column":51}},"84":{"start":{"line":91,"column":4},"end":{"line":91,"column":63}},"85":{"start":{"line":92,"column":4},"end":{"line":92,"column":77}},"86":{"start":{"line":93,"column":4},"end":{"line":93,"column":75}},"87":{"start":{"line":94,"column":4},"end":{"line":94,"column":59}},"88":{"start":{"line":95,"column":4},"end":{"line":95,"column":59}},"89":{"start":{"line":96,"column":4},"end":{"line":96,"column":63}},"90":{"start":{"line":97,"column":4},"end":{"line":97,"column":65}},"91":{"start":{"line":98,"column":4},"end":{"line":98,"column":63}},"92":{"start":{"line":99,"column":4},"end":{"line":99,"column":73}},"93":{"start":{"line":100,"column":4},"end":{"line":100,"column":65}},"94":{"start":{"line":101,"column":4},"end":{"line":101,"column":75}},"95":{"start":{"line":102,"column":4},"end":{"line":102,"column":91}},"96":{"start":{"line":103,"column":4},"end":{"line":103,"column":95}},"97":{"start":{"line":104,"column":4},"end":{"line":104,"column":73}},"98":{"start":{"line":105,"column":4},"end":{"line":105,"column":67}},"99":{"start":{"line":108,"column":0},"end":{"line":144,"column":56}},"100":{"start":{"line":109,"column":4},"end":{"line":109,"column":63}},"101":{"start":{"line":110,"column":4},"end":{"line":110,"column":51}},"102":{"start":{"line":111,"column":4},"end":{"line":111,"column":57}},"103":{"start":{"line":112,"column":4},"end":{"line":112,"column":55}},"104":{"start":{"line":113,"column":4},"end":{"line":113,"column":85}},"105":{"start":{"line":114,"column":4},"end":{"line":114,"column":65}},"106":{"start":{"line":115,"column":4},"end":{"line":115,"column":69}},"107":{"start":{"line":116,"column":4},"end":{"line":116,"column":53}},"108":{"start":{"line":117,"column":4},"end":{"line":117,"column":75}},"109":{"start":{"line":118,"column":4},"end":{"line":118,"column":69}},"110":{"start":{"line":119,"column":4},"end":{"line":119,"column":69}},"111":{"start":{"line":120,"column":4},"end":{"line":120,"column":63}},"112":{"start":{"line":121,"column":4},"end":{"line":121,"column":61}},"113":{"start":{"line":122,"column":4},"end":{"line":122,"column":73}},"114":{"start":{"line":123,"column":4},"end":{"line":123,"column":65}},"115":{"start":{"line":124,"column":4},"end":{"line":124,"column":65}},"116":{"start":{"line":125,"column":4},"end":{"line":125,"column":69}},"117":{"start":{"line":126,"column":4},"end":{"line":126,"column":77}},"118":{"start":{"line":127,"column":4},"end":{"line":127,"column":75}},"119":{"start":{"line":128,"column":4},"end":{"line":128,"column":69}},"120":{"start":{"line":129,"column":4},"end":{"line":129,"column":81}},"121":{"start":{"line":130,"column":4},"end":{"line":130,"column":63}},"122":{"start":{"line":131,"column":4},"end":{"line":131,"column":69}},"123":{"start":{"line":132,"column":4},"end":{"line":132,"column":73}},"124":{"start":{"line":133,"column":4},"end":{"line":133,"column":63}},"125":{"start":{"line":134,"column":4},"end":{"line":134,"column":59}},"126":{"start":{"line":135,"column":4},"end":{"line":135,"column":67}},"127":{"start":{"line":136,"column":4},"end":{"line":136,"column":65}},"128":{"start":{"line":137,"column":4},"end":{"line":137,"column":67}},"129":{"start":{"line":138,"column":4},"end":{"line":138,"column":49}},"130":{"start":{"line":139,"column":4},"end":{"line":139,"column":73}},"131":{"start":{"line":140,"column":4},"end":{"line":140,"column":79}},"132":{"start":{"line":141,"column":4},"end":{"line":141,"column":37}},"133":{"start":{"line":142,"column":4},"end":{"line":142,"column":53}},"134":{"start":{"line":143,"column":4},"end":{"line":143,"column":37}},"135":{"start":{"line":146,"column":0},"end":{"line":146,"column":120}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":1},"end":{"line":5,"column":2}},"loc":{"start":{"line":5,"column":26},"end":{"line":15,"column":1}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":17,"column":1},"end":{"line":17,"column":2}},"loc":{"start":{"line":17,"column":29},"end":{"line":58,"column":1}},"line":17},"2":{"name":"(anonymous_2)","decl":{"start":{"line":60,"column":1},"end":{"line":60,"column":2}},"loc":{"start":{"line":60,"column":28},"end":{"line":106,"column":1}},"line":60},"3":{"name":"(anonymous_3)","decl":{"start":{"line":108,"column":1},"end":{"line":108,"column":2}},"loc":{"start":{"line":108,"column":20},"end":{"line":144,"column":1}},"line":108}},"branchMap":{"0":{"loc":{"start":{"line":15,"column":19},"end":{"line":15,"column":72}},"type":"binary-expr","locations":[{"start":{"line":15,"column":19},"end":{"line":15,"column":40}},{"start":{"line":15,"column":45},"end":{"line":15,"column":71}}],"line":15},"1":{"loc":{"start":{"line":58,"column":22},"end":{"line":58,"column":81}},"type":"binary-expr","locations":[{"start":{"line":58,"column":22},"end":{"line":58,"column":46}},{"start":{"line":58,"column":51},"end":{"line":58,"column":80}}],"line":58},"2":{"loc":{"start":{"line":106,"column":21},"end":{"line":106,"column":78}},"type":"binary-expr","locations":[{"start":{"line":106,"column":21},"end":{"line":106,"column":44}},{"start":{"line":106,"column":49},"end":{"line":106,"column":77}}],"line":106},"3":{"loc":{"start":{"line":144,"column":13},"end":{"line":144,"column":54}},"type":"binary-expr","locations":[{"start":{"line":144,"column":13},"end":{"line":144,"column":28}},{"start":{"line":144,"column":33},"end":{"line":144,"column":53}}],"line":144}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":1,"47":1,"48":1,"49":1,"50":1,"51":1,"52":1,"53":1,"54":1,"55":1,"56":1,"57":1,"58":1,"59":1,"60":1,"61":1,"62":1,"63":1,"64":1,"65":1,"66":1,"67":1,"68":1,"69":1,"70":1,"71":1,"72":1,"73":1,"74":1,"75":1,"76":1,"77":1,"78":1,"79":1,"80":1,"81":1,"82":1,"83":1,"84":1,"85":1,"86":1,"87":1,"88":1,"89":1,"90":1,"91":1,"92":1,"93":1,"94":1,"95":1,"96":1,"97":1,"98":1,"99":1,"100":1,"101":1,"102":1,"103":1,"104":1,"105":1,"106":1,"107":1,"108":1,"109":1,"110":1,"111":1,"112":1,"113":1,"114":1,"115":1,"116":1,"117":1,"118":1,"119":1,"120":1,"121":1,"122":1,"123":1,"124":1,"125":1,"126":1,"127":1,"128":1,"129":1,"130":1,"131":1,"132":1,"133":1,"134":1,"135":1},"f":{"0":1,"1":1,"2":1,"3":1},"b":{"0":[1,1],"1":[1,1],"2":[1,1],"3":[1,1]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/game-message.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/game-message.ts"],"names":[],"mappings":"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","sourcesContent":["export enum GameCoreError {\n  ERROR_BOT_NOT_FOUND = 'ERROR_BOT_NOT_FOUND',\n  ERROR_BOT_NOT_INITIALIZED = 'ERROR_BOT_NOT_INITIALIZED',\n  ERROR_BOT_NO_DECK = 'ERROR_BOT_NO_DECK',\n  ERROR_CLIENT_NOT_CONNECTED = 'ERROR_CLIENT_NOT_CONNECTED',\n  ERROR_GAME_NOT_FOUND = 'ERROR_GAME_NOT_FOUND',\n  ERROR_INVALID_STATE = 'ERROR_INVALID_STATE',\n  ERROR_SERIALIZER = 'ERROR_SERIALIZER',\n  ERROR_SIMULATOR_NOT_STABLE = 'ERROR_SIMULATOR_NOT_STABLE',\n  MUST_BE_IN_ACTIVE_SPOT = 'MUST_BE_IN_ACTIVE_SPOT'\n}\n\nexport enum GameStoreMessage {\n  ACTION_IN_PROGRESS = 'ACTION_IN_PROGRESS',\n  ALREADY_PLAYING = 'ALREADY_PLAYING',\n  BLOCKED_BY_ABILITY = 'BLOCKED_BY_ABILITY',\n  BLOCKED_BY_EFFECT = 'BLOCKED_BY_EFFECT',\n  BLOCKED_BY_SPECIAL_CONDITION = 'BLOCKED_BY_SPECIAL_CONDITION',\n  CANNOT_PLAY_THIS_CARD = 'CANNOT_PLAY_THIS_CARD',\n  CANNOT_USE_POWER = 'CANNOT_USE_POWER',\n  CANNOT_USE_STADIUM = 'CANNOT_USE_STADIUM',\n  CHOOSE_NEW_ACTIVE_POKEMON = 'CHOOSE_NEW_ACTIVE_POKEMON',\n  CHOOSE_PRIZE_CARD = 'CHOOSE_PRIZE_CARD',\n  CHOOSE_STARTING_POKEMONS = 'CHOOSE_STARTING_POKEMONS',\n  ENERGY_ALREADY_ATTACHED = 'ENERGY_ALREADY_ATTACHED',\n  FLIP_ASLEEP = 'FLIP_ASLEEP',\n  FLIP_BURNED = 'FLIP_BURNED',\n  FLIP_CONFUSION = 'FLIP_CONFUSION',\n  ILLEGAL_ACTION = 'ILLEGAL_ACTION',\n  INVALID_DECK = 'INVALID_DECK',\n  INVALID_GAME_STATE = 'INVALID_GAME_STATE',\n  INVALID_PROMPT_RESULT = 'INVALID_PROMPT_RESULT',\n  INVALID_TARGET = 'INVALID_TARGET',\n  INVITATION_MESSAGE = 'INVITATION_MESSAGE',\n  MAX_PLAYERS_REACHED = 'MAX_PLAYERS_REACHED',\n  NOT_ENOUGH_ENERGY = 'NOT_ENOUGH_ENERGY',\n  NOT_YOUR_TURN = 'NOT_YOUR_TURN',\n  NO_STADIUM_IN_PLAY = 'NO_STADIUM_IN_PLAY',\n  POKEMON_CANT_EVOLVE_THIS_TURN = 'POKEMON_CANT_EVOLVE_THIS_TURN',\n  POKEMON_TOOL_ALREADY_ATTACHED = 'POKEMON_TOOL_ALREADY_ATTACHED',\n  POWER_ALREADY_USED = 'POWER_ALREADY_USED',\n  PROMPT_ALREADY_RESOLVED = 'PROMPT_ALREADY_RESOLVED',\n  RETREAT_ALREADY_USED = 'RETREAT_ALREADY_USED',\n  SAME_STADIUM_ALREADY_IN_PLAY = 'SAME_STADIUM_ALREADY_IN_PLAY',\n  SETUP_OPPONENT_NO_BASIC = 'SETUP_OPPONENT_NO_BASIC',\n  SETUP_PLAYER_NO_BASIC = 'SETUP_PLAYER_NO_BASIC',\n  SETUP_WHO_BEGINS_FLIP = 'SETUP_WHO_BEGINS_FLIP',\n  STADIUM_ALREADY_PLAYED = 'STADIUM_ALREADY_PLAYED',\n  STADIUM_ALREADY_USED = 'STADIUM_ALREADY_USED',\n  SUPPORTER_ALREADY_PLAYED = 'SUPPORTER_ALREADY_PLAYED',\n  UNKNOWN_ATTACK = 'UNKNOWN_ATTACK',\n  UNKNOWN_CARD = 'UNKNOWN_CARD',\n  UNKNOWN_POWER = 'UNKNOWN_POWER',\n}\n\nexport enum GameCardMessage {\n  ALL_FIRE_ENERGIES = 'ALL_FIRE_ENERGIES',\n  ALL_LIGHTNING_ENERGIES = 'ALL_LIGHTNING_ENERGIES',\n  ALL_WATER_ENERGIES = 'ALL_WATER_ENERGIES',\n  ATTACH_ENERGY_CARDS = 'ATTACH_ENERGY_CARDS',\n  ATTACH_ENERGY_TO_ACTIVE = 'ATTACH_ENERGY_TO_BENCH',\n  ATTACH_ENERGY_TO_BENCH = 'ATTACH_ENERGY_TO_BENCH',\n  CARDS_SHOWED_BY_EFFECT = 'CARDS_SHOWED_BY_EFFECT',\n  CARDS_SHOWED_BY_THE_OPPONENT = 'CARDS_SHOWED_BY_THE_OPPONENT',\n  CHOOSE_ATTACK_TO_COPY = 'CHOOSE_ATTACK_TO_COPY',\n  CHOOSE_CARDS_ORDER = 'CHOOSE_CARDS_ORDER',\n  CHOOSE_CARD_TO_ATTACH = 'CHOOSE_CARD_TO_ATTACH',\n  CHOOSE_CARD_TO_COPY_EFFECT = 'CHOOSE_CARD_TO_COPY_EFFECT',\n  CHOOSE_CARD_TO_DECK = 'CHOOSE_CARD_TO_DECK',\n  CHOOSE_CARD_TO_DISCARD = 'CHOOSE_CARD_TO_DISCARD',\n  CHOOSE_CARD_TO_HAND = 'CHOOSE_CARD_TO_HAND',\n  CHOOSE_CARD_TO_EVOLVE = 'CHOOSE_CARD_TO_EVOLVE',\n  CHOOSE_CARD_TO_PUT_ONTO_BENCH = 'CHOOSE_CARD_TO_PUT_ONTO_BENCH',\n  CHOOSE_ENERGIES_TO_DISCARD = 'CHOOSE_ENERGIES_TO_DISCARD',\n  CHOOSE_ENERGIES_TO_HAND = 'CHOOSE_ENERGIES_TO_HAND',\n  CHOOSE_POKEMON_TO_ATTACH_CARDS = 'CHOOSE_POKEMON_TO_ATTACH_CARDS',\n  CHOOSE_POKEMON_TO_DAMAGE = 'CHOOSE_POKEMON_TO_DAMAGE',\n  CHOOSE_POKEMON_TO_DISCARD = 'CHOOSE_POKEMON_TO_DISCARD',\n  CHOOSE_POKEMON_TO_DISCARD_CARDS = 'CHOOSE_POKEMON_TO_DISCARD_CARDS',\n  CHOOSE_POKEMON_TO_EVOLVE = 'CHOOSE_POKEMON_TO_EVOLVE',\n  CHOOSE_POKEMON_TO_HEAL = 'CHOOSE_POKEMON_TO_HEAL',\n  CHOOSE_POKEMON_TO_PICK_UP = 'CHOOSE_POKEMON_TO_PICK_UP',\n  CHOOSE_POKEMON_TO_SWITCH = 'CHOOSE_POKEMON_TO_SWITCH',\n  CHOOSE_SPECIAL_CONDITION = 'CHOOSE_SPECIAL_CONDITION',\n  COIN_FLIP = 'COIN_FLIP',\n  MOVE_DAMAGE = 'MOVE_DAMAGE',\n  MOVE_ENERGY_CARDS = 'MOVE_ENERGY_CARDS',\n  MOVE_ENERGY_TO_ACTIVE = 'MOVE_ENERGY_CARDS_TO_ACTIVE',\n  MOVE_ENERGY_TO_BENCH = 'MOVE_ENERGY_CARDS_TO_BENCH',\n  SPECIAL_CONDITION_ASLEEP = 'ASLEEP',\n  SPECIAL_CONDITION_BURNED = 'BURNED',\n  SPECIAL_CONDITION_CONFUSED = 'CONFUSED',\n  SPECIAL_CONDITION_PARALYZED = 'PARALYZED',\n  SPECIAL_CONDITION_POISONED = 'POISONED',\n  WANT_TO_DISCARD_ENERGY = 'WANT_TO_DISCARD_ENERGY',\n  WANT_TO_DRAW_CARDS = 'WANT_TO_DRAW_CARDS',\n  WANT_TO_PICK_UP_POKEMON = 'WANT_TO_PICK_UP_POKEMON',\n  WANT_TO_PLAY_BOTH_CARDS_AT_ONCE = 'WANT_TO_PLAY_BOTH_CARDS_AT_ONCE',\n  WANT_TO_SHUFFLE_POKEMON_INTO_DECK = 'WANT_TO_SHUFFLE_POKEMON_INTO_DECK',\n  WANT_TO_SWITCH_POKEMON = 'WANT_TO_SWITCH_POKEMON',\n  WANT_TO_USE_ABILITY = 'WANT_TO_USE_ABILITY'\n}\n\nexport enum GameLog {\n  LOG_BANNED_BY_ARBITER = 'LOG_BANNED_BY_ARBITER', // { name }\n  LOG_FLIP_ASLEEP = 'LOG_FLIP_ASLEEP', // { name }\n  LOG_FLIP_CONFUSION = 'LOG_FLIP_CONFUSION', // { name }\n  LOG_GAME_FINISHED = 'LOG_GAME_FINISHED',\n  LOG_GAME_FINISHED_BEFORE_STARTED = 'LOG_GAME_FINISHED_BEFORE_STARTED',\n  LOG_GAME_FINISHED_DRAW = 'LOG_GAME_FINISHED_DRAW',\n  LOG_GAME_FINISHED_WINNER = 'LOG_GAME_FINISHED_WINNER', // { name }\n  LOG_HURTS_ITSELF = 'LOG_HURTS_ITSELF',\n  LOG_INVITATION_NOT_ACCEPTED = 'LOG_INVITATION_NOT_ACCEPTED', // { name }\n  LOG_PLAYER_ATTACHES_CARD = 'LOG_PLAYER_ATTACHES_CARD', // { name, card, pokemon }\n  LOG_PLAYER_COPIES_ATTACK = 'LOG_PLAYER_COPIES_ATTACK', // { name, attack }\n  LOG_PLAYER_DRAWS_CARD = 'LOG_PLAYER_DRAWS_CARD', // { name }\n  LOG_PLAYER_ENDS_TURN = 'LOG_PLAYER_ENDS_TURN', // { name }\n  LOG_PLAYER_EVOLVES_POKEMON = 'LOG_PLAYER_EVOLVES_POKEMON', // { name, card, pokemon }\n  LOG_PLAYER_FLIPS_HEADS = 'LOG_PLAYER_FLIPS_HEADS', // { name }\n  LOG_PLAYER_FLIPS_TAILS = 'LOG_PLAYER_FLIPS_TAILS', // { name }\n  LOG_PLAYER_LEFT_THE_GAME = 'LOG_PLAYER_LEFT_THE_GAME', // { name }\n  LOG_PLAYER_NO_ACTIVE_POKEMON = 'LOG_PLAYER_NO_ACTIVE_POKEMON', // { name }\n  LOG_PLAYER_NO_CARDS_IN_DECK = 'LOG_PLAYER_NO_CARDS_IN_DECK', // { name }\n  LOG_PLAYER_NO_PRIZE_CARD = 'LOG_PLAYER_NO_PRIZE_CARD', // { name }\n  LOG_PLAYER_PLAYS_BASIC_POKEMON = 'LOG_PLAYER_PLAYS_BASIC_POKEMON', // { name, card }\n  LOG_PLAYER_PLAYS_ITEM = 'LOG_PLAYER_PLAYS_ITEM', // { name, card }\n  LOG_PLAYER_PLAYS_STADIUM = 'LOG_PLAYER_PLAYS_STADIUM', // { name, card }\n  LOG_PLAYER_PLAYS_SUPPORTER = 'LOG_PLAYER_PLAYS_SUPPORTER', // { name, card }\n  LOG_PLAYER_PLAYS_TOOL = 'LOG_PLAYER_PLAYS_TOOL', // { name, card, pokemon }\n  LOG_PLAYER_RETREATS = 'LOG_PLAYER_RETREATS', // { name, active, benched }\n  LOG_PLAYER_USES_ABILITY = 'LOG_PLAYER_USES_ABILITY', // { name, ability }\n  LOG_PLAYER_USES_ATTACK = 'LOG_PLAYER_USES_ATTACK', // { name, attack }\n  LOG_PLAYER_USES_STADIUM = 'LOG_PLAYER_USES_STADIUM',\n  LOG_POKEMON_KO = 'LOG_POKEMON_KO', // { name }\n  LOG_SETUP_NO_BASIC_POKEMON = 'LOG_SETUP_NO_BASIC_POKEMON', // { name }\n  LOG_STARTS_BECAUSE_OF_ABILITY = 'LOG_STARTS_BECAUSE_OF_ABILITY', // { name, ability }\n  LOG_TEXT = 'LOG_TEXT', // { text }\n  LOG_TIME_ELAPSED = 'LOG_TIME_ELAPSED', // { name }\n  LOG_TURN = 'LOG_TURN' // { turn }\n}\n\n// tslint:disable-next-line\nexport const GameMessage = { ...GameCoreError, ...GameStoreMessage, ...GameCardMessage };\nexport type GameMessage = GameCoreError | GameStoreMessage | GameCardMessage;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"1eb87a488b3404f3ab7ead6e7d998cbe866b9abc","contentHash":"376d957c2eeed0021210f4dd97ea0d526d4af5b9ee7d51f25a96752f950bb157"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/attach-energy-prompt.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/attach-energy-prompt.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":69}},"2":{"start":{"line":4,"column":21},"end":{"line":4,"column":48}},"3":{"start":{"line":5,"column":23},"end":{"line":5,"column":52}},"4":{"start":{"line":6,"column":17},"end":{"line":6,"column":36}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":49}},"6":{"start":{"line":10,"column":8},"end":{"line":10,"column":24}},"7":{"start":{"line":11,"column":8},"end":{"line":11,"column":31}},"8":{"start":{"line":12,"column":8},"end":{"line":12,"column":33}},"9":{"start":{"line":13,"column":8},"end":{"line":13,"column":37}},"10":{"start":{"line":14,"column":8},"end":{"line":14,"column":27}},"11":{"start":{"line":15,"column":8},"end":{"line":15,"column":29}},"12":{"start":{"line":16,"column":8},"end":{"line":16,"column":51}},"13":{"start":{"line":18,"column":8},"end":{"line":26,"column":20}},"14":{"start":{"line":29,"column":8},"end":{"line":31,"column":9}},"15":{"start":{"line":30,"column":12},"end":{"line":30,"column":26}},"16":{"start":{"line":32,"column":23},"end":{"line":32,"column":70}},"17":{"start":{"line":32,"column":47},"end":{"line":32,"column":69}},"18":{"start":{"line":33,"column":8},"end":{"line":35,"column":9}},"19":{"start":{"line":34,"column":12},"end":{"line":34,"column":95}},"20":{"start":{"line":36,"column":26},"end":{"line":36,"column":28}},"21":{"start":{"line":37,"column":8},"end":{"line":41,"column":11}},"22":{"start":{"line":38,"column":29},"end":{"line":38,"column":42}},"23":{"start":{"line":39,"column":25},"end":{"line":39,"column":48}},"24":{"start":{"line":40,"column":12},"end":{"line":40,"column":47}},"25":{"start":{"line":42,"column":8},"end":{"line":42,"column":25}},"26":{"start":{"line":45,"column":8},"end":{"line":47,"column":9}},"27":{"start":{"line":46,"column":12},"end":{"line":46,"column":44}},"28":{"start":{"line":48,"column":8},"end":{"line":50,"column":9}},"29":{"start":{"line":49,"column":12},"end":{"line":49,"column":25}},"30":{"start":{"line":52,"column":8},"end":{"line":62,"column":9}},"31":{"start":{"line":53,"column":22},"end":{"line":53,"column":34}},"32":{"start":{"line":54,"column":30},"end":{"line":58,"column":14}},"33":{"start":{"line":55,"column":16},"end":{"line":57,"column":46}},"34":{"start":{"line":59,"column":12},"end":{"line":61,"column":13}},"35":{"start":{"line":60,"column":16},"end":{"line":60,"column":29}},"36":{"start":{"line":64,"column":8},"end":{"line":76,"column":9}},"37":{"start":{"line":65,"column":12},"end":{"line":75,"column":13}},"38":{"start":{"line":65,"column":25},"end":{"line":65,"column":26}},"39":{"start":{"line":66,"column":26},"end":{"line":66,"column":38}},"40":{"start":{"line":67,"column":30},"end":{"line":71,"column":18}},"41":{"start":{"line":68,"column":20},"end":{"line":70,"column":50}},"42":{"start":{"line":72,"column":16},"end":{"line":74,"column":17}},"43":{"start":{"line":73,"column":20},"end":{"line":73,"column":33}},"44":{"start":{"line":77,"column":8},"end":{"line":77,"column":55}},"45":{"start":{"line":77,"column":33},"end":{"line":77,"column":53}},"46":{"start":{"line":80,"column":0},"end":{"line":80,"column":48}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":9,"column":4},"end":{"line":9,"column":5}},"loc":{"start":{"line":9,"column":81},"end":{"line":27,"column":5}},"line":9},"1":{"name":"(anonymous_1)","decl":{"start":{"line":28,"column":4},"end":{"line":28,"column":5}},"loc":{"start":{"line":28,"column":26},"end":{"line":43,"column":5}},"line":28},"2":{"name":"(anonymous_2)","decl":{"start":{"line":32,"column":42},"end":{"line":32,"column":43}},"loc":{"start":{"line":32,"column":47},"end":{"line":32,"column":69}},"line":32},"3":{"name":"(anonymous_3)","decl":{"start":{"line":37,"column":23},"end":{"line":37,"column":24}},"loc":{"start":{"line":37,"column":28},"end":{"line":41,"column":9}},"line":37},"4":{"name":"(anonymous_4)","decl":{"start":{"line":44,"column":4},"end":{"line":44,"column":5}},"loc":{"start":{"line":44,"column":21},"end":{"line":78,"column":5}},"line":44},"5":{"name":"(anonymous_5)","decl":{"start":{"line":54,"column":42},"end":{"line":54,"column":43}},"loc":{"start":{"line":54,"column":47},"end":{"line":58,"column":13}},"line":54},"6":{"name":"(anonymous_6)","decl":{"start":{"line":67,"column":47},"end":{"line":67,"column":48}},"loc":{"start":{"line":67,"column":52},"end":{"line":71,"column":17}},"line":67},"7":{"name":"(anonymous_7)","decl":{"start":{"line":77,"column":28},"end":{"line":77,"column":29}},"loc":{"start":{"line":77,"column":33},"end":{"line":77,"column":53}},"line":77}},"branchMap":{"0":{"loc":{"start":{"line":29,"column":8},"end":{"line":31,"column":9}},"type":"if","locations":[{"start":{"line":29,"column":8},"end":{"line":31,"column":9}},{"start":{"line":29,"column":8},"end":{"line":31,"column":9}}],"line":29},"1":{"loc":{"start":{"line":33,"column":8},"end":{"line":35,"column":9}},"type":"if","locations":[{"start":{"line":33,"column":8},"end":{"line":35,"column":9}},{"start":{"line":33,"column":8},"end":{"line":35,"column":9}}],"line":33},"2":{"loc":{"start":{"line":45,"column":8},"end":{"line":47,"column":9}},"type":"if","locations":[{"start":{"line":45,"column":8},"end":{"line":47,"column":9}},{"start":{"line":45,"column":8},"end":{"line":47,"column":9}}],"line":45},"3":{"loc":{"start":{"line":48,"column":8},"end":{"line":50,"column":9}},"type":"if","locations":[{"start":{"line":48,"column":8},"end":{"line":50,"column":9}},{"start":{"line":48,"column":8},"end":{"line":50,"column":9}}],"line":48},"4":{"loc":{"start":{"line":48,"column":12},"end":{"line":48,"column":80}},"type":"binary-expr","locations":[{"start":{"line":48,"column":12},"end":{"line":48,"column":44}},{"start":{"line":48,"column":48},"end":{"line":48,"column":80}}],"line":48},"5":{"loc":{"start":{"line":52,"column":8},"end":{"line":62,"column":9}},"type":"if","locations":[{"start":{"line":52,"column":8},"end":{"line":62,"column":9}},{"start":{"line":52,"column":8},"end":{"line":62,"column":9}}],"line":52},"6":{"loc":{"start":{"line":52,"column":12},"end":{"line":52,"column":56}},"type":"binary-expr","locations":[{"start":{"line":52,"column":12},"end":{"line":52,"column":35}},{"start":{"line":52,"column":39},"end":{"line":52,"column":56}}],"line":52},"7":{"loc":{"start":{"line":55,"column":23},"end":{"line":57,"column":45}},"type":"binary-expr","locations":[{"start":{"line":55,"column":23},"end":{"line":55,"column":47}},{"start":{"line":56,"column":23},"end":{"line":56,"column":43}},{"start":{"line":57,"column":23},"end":{"line":57,"column":45}}],"line":55},"8":{"loc":{"start":{"line":59,"column":12},"end":{"line":61,"column":13}},"type":"if","locations":[{"start":{"line":59,"column":12},"end":{"line":61,"column":13}},{"start":{"line":59,"column":12},"end":{"line":61,"column":13}}],"line":59},"9":{"loc":{"start":{"line":64,"column":8},"end":{"line":76,"column":9}},"type":"if","locations":[{"start":{"line":64,"column":8},"end":{"line":76,"column":9}},{"start":{"line":64,"column":8},"end":{"line":76,"column":9}}],"line":64},"10":{"loc":{"start":{"line":64,"column":12},"end":{"line":64,"column":62}},"type":"binary-expr","locations":[{"start":{"line":64,"column":12},"end":{"line":64,"column":41}},{"start":{"line":64,"column":45},"end":{"line":64,"column":62}}],"line":64},"11":{"loc":{"start":{"line":68,"column":27},"end":{"line":70,"column":49}},"type":"binary-expr","locations":[{"start":{"line":68,"column":27},"end":{"line":68,"column":51}},{"start":{"line":69,"column":27},"end":{"line":69,"column":47}},{"start":{"line":70,"column":27},"end":{"line":70,"column":49}}],"line":68},"12":{"loc":{"start":{"line":72,"column":16},"end":{"line":74,"column":17}},"type":"if","locations":[{"start":{"line":72,"column":16},"end":{"line":74,"column":17}},{"start":{"line":72,"column":16},"end":{"line":74,"column":17}}],"line":72}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0,0],"12":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/attach-energy-prompt.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/attach-energy-prompt.ts"],"names":[],"mappings":"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","sourcesContent":["import { Card } from '../card/card';\nimport { GameError } from '../../game-error';\nimport { GameMessage } from '../../game-message';\nimport { Prompt } from './prompt';\nimport { PlayerType, SlotType, CardTarget } from '../actions/play-card-action';\nimport { State } from '../state/state';\nimport { CardList } from '../state/card-list';\nimport { FilterType } from './choose-cards-prompt';\n\nexport const AttachEnergyPromptType = 'Attach energy';\n\nexport interface AttachEnergyOptions {\n  allowCancel: boolean;\n  min: number;\n  max: number;\n  blocked: number[];\n  blockedTo: CardTarget[];\n  sameTarget: boolean;\n  differentTargets: boolean;\n}\n\nexport type AttachEnergyResultType = {to: CardTarget, index: number}[];\n\nexport interface CardAssign {\n  to: CardTarget;\n  card: Card;\n}\n\nexport class AttachEnergyPrompt extends Prompt<CardAssign[]> {\n\n  readonly type: string = AttachEnergyPromptType;\n\n  public options: AttachEnergyOptions;\n\n  constructor(\n    playerId: number,\n    public message: GameMessage,\n    public cardList: CardList,\n    public playerType: PlayerType,\n    public slots: SlotType[],\n    public filter: FilterType,\n    options?: Partial<AttachEnergyOptions>\n  ) {\n    super(playerId);\n\n    // Default options\n    this.options = Object.assign({}, {\n      allowCancel: true,\n      min: 0,\n      max: cardList.cards.length,\n      blocked: [],\n      blockedTo: [],\n      sameTarget: false,\n      differentTargets: false\n    }, options);\n  }\n\n  public decode(result: AttachEnergyResultType | null, state: State): CardAssign[] | null {\n    if (result === null) {\n      return result;  // operation cancelled\n    }\n    const player = state.players.find(p => p.id === this.playerId);\n    if (player === undefined) {\n      throw new GameError(GameMessage.INVALID_PROMPT_RESULT);\n    }\n    const transfers: CardAssign[] = [];\n    result.forEach(t => {\n      const cardList = this.cardList;\n      const card = cardList.cards[t.index];\n      transfers.push({ to: t.to, card });\n    });\n    return transfers;\n  }\n\n  public validate(result: CardAssign[] | null): boolean {\n    if (result === null) {\n      return this.options.allowCancel;  // operation cancelled\n    }\n    if (result.length < this.options.min || result.length > this.options.max) {\n      return false;\n    }\n\n    // Check if all targets are the same\n    if (this.options.sameTarget && result.length > 1) {\n      const t = result[0].to;\n      const different = result.some(r => {\n        return r.to.player !== t.player\n          || r.to.slot !== t.slot\n          || r.to.index !== t.index;\n      });\n      if (different) {\n        return false;\n      }\n    }\n\n    // Check if all selected targets are different\n    if (this.options.differentTargets && result.length > 1) {\n      for (let i = 0; i < result.length; i++) {\n        const t = result[i].to;\n        const index = result.findIndex(r => {\n          return r.to.player === t.player\n            && r.to.slot === t.slot\n            && r.to.index === t.index;\n        });\n        if (index !== i) {\n          return false;\n        }\n      }\n    }\n\n    return result.every(r => r.card !== undefined);\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"2fabdc839747a25e114a7861067451b58eadd523","contentHash":"03f075e55fb2822b1992b85eb11d39eea37a5b4d292dd7f23702ca7976b7cead"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/choose-attack-prompt.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/choose-attack-prompt.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":69}},"2":{"start":{"line":4,"column":21},"end":{"line":4,"column":48}},"3":{"start":{"line":5,"column":23},"end":{"line":5,"column":52}},"4":{"start":{"line":6,"column":17},"end":{"line":6,"column":36}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":49}},"6":{"start":{"line":10,"column":8},"end":{"line":10,"column":24}},"7":{"start":{"line":11,"column":8},"end":{"line":11,"column":31}},"8":{"start":{"line":12,"column":8},"end":{"line":12,"column":27}},"9":{"start":{"line":13,"column":8},"end":{"line":13,"column":51}},"10":{"start":{"line":15,"column":8},"end":{"line":19,"column":20}},"11":{"start":{"line":22,"column":8},"end":{"line":24,"column":9}},"12":{"start":{"line":23,"column":12},"end":{"line":23,"column":26}},"13":{"start":{"line":25,"column":22},"end":{"line":25,"column":34}},"14":{"start":{"line":26,"column":8},"end":{"line":28,"column":9}},"15":{"start":{"line":27,"column":12},"end":{"line":27,"column":95}},"16":{"start":{"line":29,"column":21},"end":{"line":29,"column":38}},"17":{"start":{"line":30,"column":23},"end":{"line":30,"column":71}},"18":{"start":{"line":30,"column":46},"end":{"line":30,"column":70}},"19":{"start":{"line":31,"column":8},"end":{"line":33,"column":9}},"20":{"start":{"line":32,"column":12},"end":{"line":32,"column":95}},"21":{"start":{"line":34,"column":8},"end":{"line":34,"column":22}},"22":{"start":{"line":37,"column":8},"end":{"line":39,"column":9}},"23":{"start":{"line":38,"column":12},"end":{"line":38,"column":44}},"24":{"start":{"line":40,"column":24},"end":{"line":45,"column":10}},"25":{"start":{"line":41,"column":25},"end":{"line":41,"column":44}},"26":{"start":{"line":42,"column":12},"end":{"line":44,"column":13}},"27":{"start":{"line":43,"column":16},"end":{"line":43,"column":67}},"28":{"start":{"line":43,"column":46},"end":{"line":43,"column":65}},"29":{"start":{"line":46,"column":8},"end":{"line":48,"column":9}},"30":{"start":{"line":47,"column":12},"end":{"line":47,"column":25}},"31":{"start":{"line":49,"column":8},"end":{"line":49,"column":64}},"32":{"start":{"line":49,"column":36},"end":{"line":49,"column":62}},"33":{"start":{"line":52,"column":0},"end":{"line":52,"column":48}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":9,"column":4},"end":{"line":9,"column":5}},"loc":{"start":{"line":9,"column":51},"end":{"line":20,"column":5}},"line":9},"1":{"name":"(anonymous_1)","decl":{"start":{"line":21,"column":4},"end":{"line":21,"column":5}},"loc":{"start":{"line":21,"column":26},"end":{"line":35,"column":5}},"line":21},"2":{"name":"(anonymous_2)","decl":{"start":{"line":30,"column":41},"end":{"line":30,"column":42}},"loc":{"start":{"line":30,"column":46},"end":{"line":30,"column":70}},"line":30},"3":{"name":"(anonymous_3)","decl":{"start":{"line":36,"column":4},"end":{"line":36,"column":5}},"loc":{"start":{"line":36,"column":21},"end":{"line":50,"column":5}},"line":36},"4":{"name":"(anonymous_4)","decl":{"start":{"line":40,"column":49},"end":{"line":40,"column":50}},"loc":{"start":{"line":40,"column":54},"end":{"line":45,"column":9}},"line":40},"5":{"name":"(anonymous_5)","decl":{"start":{"line":43,"column":41},"end":{"line":43,"column":42}},"loc":{"start":{"line":43,"column":46},"end":{"line":43,"column":65}},"line":43},"6":{"name":"(anonymous_6)","decl":{"start":{"line":49,"column":31},"end":{"line":49,"column":32}},"loc":{"start":{"line":49,"column":36},"end":{"line":49,"column":62}},"line":49}},"branchMap":{"0":{"loc":{"start":{"line":22,"column":8},"end":{"line":24,"column":9}},"type":"if","locations":[{"start":{"line":22,"column":8},"end":{"line":24,"column":9}},{"start":{"line":22,"column":8},"end":{"line":24,"column":9}}],"line":22},"1":{"loc":{"start":{"line":26,"column":8},"end":{"line":28,"column":9}},"type":"if","locations":[{"start":{"line":26,"column":8},"end":{"line":28,"column":9}},{"start":{"line":26,"column":8},"end":{"line":28,"column":9}}],"line":26},"2":{"loc":{"start":{"line":26,"column":12},"end":{"line":26,"column":51}},"type":"binary-expr","locations":[{"start":{"line":26,"column":12},"end":{"line":26,"column":21}},{"start":{"line":26,"column":25},"end":{"line":26,"column":51}}],"line":26},"3":{"loc":{"start":{"line":31,"column":8},"end":{"line":33,"column":9}},"type":"if","locations":[{"start":{"line":31,"column":8},"end":{"line":33,"column":9}},{"start":{"line":31,"column":8},"end":{"line":33,"column":9}}],"line":31},"4":{"loc":{"start":{"line":37,"column":8},"end":{"line":39,"column":9}},"type":"if","locations":[{"start":{"line":37,"column":8},"end":{"line":39,"column":9}},{"start":{"line":37,"column":8},"end":{"line":39,"column":9}}],"line":37},"5":{"loc":{"start":{"line":42,"column":12},"end":{"line":44,"column":13}},"type":"if","locations":[{"start":{"line":42,"column":12},"end":{"line":44,"column":13}},{"start":{"line":42,"column":12},"end":{"line":44,"column":13}}],"line":42},"6":{"loc":{"start":{"line":42,"column":16},"end":{"line":42,"column":36}},"type":"binary-expr","locations":[{"start":{"line":42,"column":16},"end":{"line":42,"column":20}},{"start":{"line":42,"column":24},"end":{"line":42,"column":36}}],"line":42},"7":{"loc":{"start":{"line":46,"column":8},"end":{"line":48,"column":9}},"type":"if","locations":[{"start":{"line":46,"column":8},"end":{"line":48,"column":9}},{"start":{"line":46,"column":8},"end":{"line":48,"column":9}}],"line":46}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":4,"7":4,"8":4,"9":4,"10":4,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":1},"f":{"0":4,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/choose-attack-prompt.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/choose-attack-prompt.ts"],"names":[],"mappings":";;;AAAA,iDAA6C;AAC7C,qDAAiD;AACjD,qCAAkC;AAKrB,QAAA,sBAAsB,GAAG,eAAe,CAAC;AAUtD,MAAa,kBAAmB,SAAQ,eAAc;IAMpD,YACE,QAAgB,EACT,OAAoB,EACpB,KAAoB,EAC3B,OAAsC;QAEtC,KAAK,CAAC,QAAQ,CAAC,CAAC;QAJT,YAAO,GAAP,OAAO,CAAa;QACpB,UAAK,GAAL,KAAK,CAAe;QAPpB,SAAI,GAAW,8BAAsB,CAAC;QAY7C,kBAAkB;QAClB,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE;YAC/B,WAAW,EAAE,KAAK;YAClB,cAAc,EAAE,0BAAW,CAAC,iBAAiB;YAC7C,OAAO,EAAE,EAAE;SACZ,EAAE,OAAO,CAAC,CAAC;IACd,CAAC;IAEM,MAAM,CAAC,MAAqC,EAAE,KAAY;QAC/D,IAAI,MAAM,KAAK,IAAI,EAAE;YACnB,OAAO,MAAM,CAAC,CAAE,sBAAsB;SACvC;QACD,MAAM,KAAK,GAAG,MAAM,CAAC,KAAK,CAAC;QAC3B,IAAI,KAAK,GAAG,CAAC,IAAI,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE;YAC3C,MAAM,IAAI,sBAAS,CAAC,0BAAW,CAAC,qBAAqB,CAAC,CAAC;SACxD;QACD,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;QAC/B,MAAM,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,KAAK,MAAM,CAAC,MAAM,CAAC,CAAC;QAChE,IAAI,MAAM,KAAK,SAAS,EAAE;YACxB,MAAM,IAAI,sBAAS,CAAC,0BAAW,CAAC,qBAAqB,CAAC,CAAC;SACxD;QACD,OAAO,MAAM,CAAC;IAChB,CAAC;IAEM,QAAQ,CAAC,MAAqB;QACnC,IAAI,MAAM,KAAK,IAAI,EAAE;YACnB,OAAO,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAE,sBAAsB;SACzD;QAED,MAAM,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE;YAC3C,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;YACjC,IAAI,IAAI,IAAI,IAAI,CAAC,OAAO,EAAE;gBACxB,OAAO,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,MAAM,CAAC,CAAC;aACpD;QACH,CAAC,CAAC,CAAC;QAEH,IAAI,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE;YAC5B,OAAO,KAAK,CAAC;SACd;QAED,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC;IAC1D,CAAC;CAEF;AAzDD,gDAyDC","sourcesContent":["import { GameError } from '../../game-error';\nimport { GameMessage } from '../../game-message';\nimport { Prompt } from './prompt';\nimport { State } from '../state/state';\nimport { PokemonCard } from '../card/pokemon-card';\nimport { Attack } from '../card/pokemon-types';\n\nexport const ChooseAttackPromptType = 'Choose attack';\n\nexport interface ChooseAttackOptions {\n  allowCancel: boolean;\n  blockedMessage: GameMessage;\n  blocked: { index: number; attack: string }[];\n}\n\nexport type ChooseAttackResultType = {index: number, attack: string};\n\nexport class ChooseAttackPrompt extends Prompt<Attack> {\n\n  readonly type: string = ChooseAttackPromptType;\n\n  public options: ChooseAttackOptions;\n\n  constructor(\n    playerId: number,\n    public message: GameMessage,\n    public cards: PokemonCard[],\n    options?: Partial<ChooseAttackOptions>\n  ) {\n    super(playerId);\n\n    // Default options\n    this.options = Object.assign({}, {\n      allowCancel: false,\n      blockedMessage: GameMessage.NOT_ENOUGH_ENERGY,\n      blocked: []\n    }, options);\n  }\n\n  public decode(result: ChooseAttackResultType | null, state: State): Attack | null {\n    if (result === null) {\n      return result;  // operation cancelled\n    }\n    const index = result.index;\n    if (index < 0 || index >= this.cards.length) {\n      throw new GameError(GameMessage.INVALID_PROMPT_RESULT);\n    }\n    const card = this.cards[index];\n    const attack = card.attacks.find(a => a.name === result.attack);\n    if (attack === undefined) {\n      throw new GameError(GameMessage.INVALID_PROMPT_RESULT);\n    }\n    return attack;\n  }\n\n  public validate(result: Attack | null): boolean {\n    if (result === null) {\n      return this.options.allowCancel;  // operation cancelled\n    }\n\n    const blocked = this.options.blocked.map(b => {\n      const card = this.cards[b.index];\n      if (card && card.attacks) {\n        return card.attacks.find(a => a.name === b.attack);\n      }\n    });\n\n    if (blocked.includes(result)) {\n      return false;\n    }\n\n    return this.cards.some(c => c.attacks.includes(result));\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"dcf450699141774ba823a4e66a2c75df5bb02000","contentHash":"f51fc8a1f30f574d304c7377382a0adbd63bb45bcdb74f6319f28969888104a2"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/choose-cards-prompt.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/choose-cards-prompt.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":67}},"2":{"start":{"line":4,"column":17},"end":{"line":4,"column":36}},"3":{"start":{"line":5,"column":21},"end":{"line":5,"column":50}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":47}},"5":{"start":{"line":9,"column":8},"end":{"line":9,"column":24}},"6":{"start":{"line":10,"column":8},"end":{"line":10,"column":31}},"7":{"start":{"line":11,"column":8},"end":{"line":11,"column":27}},"8":{"start":{"line":12,"column":8},"end":{"line":12,"column":29}},"9":{"start":{"line":13,"column":8},"end":{"line":13,"column":50}},"10":{"start":{"line":15,"column":8},"end":{"line":25,"column":20}},"11":{"start":{"line":28,"column":8},"end":{"line":30,"column":9}},"12":{"start":{"line":29,"column":12},"end":{"line":29,"column":24}},"13":{"start":{"line":31,"column":22},"end":{"line":31,"column":38}},"14":{"start":{"line":32,"column":8},"end":{"line":32,"column":49}},"15":{"start":{"line":32,"column":35},"end":{"line":32,"column":47}},"16":{"start":{"line":35,"column":8},"end":{"line":37,"column":9}},"17":{"start":{"line":36,"column":12},"end":{"line":36,"column":44}},"18":{"start":{"line":38,"column":8},"end":{"line":40,"column":9}},"19":{"start":{"line":39,"column":12},"end":{"line":39,"column":25}},"20":{"start":{"line":42,"column":8},"end":{"line":53,"column":9}},"21":{"start":{"line":43,"column":28},"end":{"line":43,"column":30}},"22":{"start":{"line":44,"column":12},"end":{"line":52,"column":13}},"23":{"start":{"line":45,"column":33},"end":{"line":45,"column":68}},"24":{"start":{"line":46,"column":16},"end":{"line":51,"column":17}},"25":{"start":{"line":47,"column":20},"end":{"line":47,"column":33}},"26":{"start":{"line":50,"column":20},"end":{"line":50,"column":45}},"27":{"start":{"line":55,"column":25},"end":{"line":55,"column":27}},"28":{"start":{"line":56,"column":8},"end":{"line":59,"column":9}},"29":{"start":{"line":57,"column":26},"end":{"line":57,"column":55}},"30":{"start":{"line":58,"column":12},"end":{"line":58,"column":49}},"31":{"start":{"line":60,"column":58},"end":{"line":60,"column":70}},"32":{"start":{"line":61,"column":8},"end":{"line":65,"column":9}},"33":{"start":{"line":64,"column":12},"end":{"line":64,"column":25}},"34":{"start":{"line":66,"column":24},"end":{"line":66,"column":44}},"35":{"start":{"line":67,"column":8},"end":{"line":70,"column":11}},"36":{"start":{"line":68,"column":26},"end":{"line":68,"column":53}},"37":{"start":{"line":69,"column":12},"end":{"line":69,"column":85}},"38":{"start":{"line":73,"column":8},"end":{"line":76,"column":9}},"39":{"start":{"line":74,"column":31},"end":{"line":74,"column":35}},"40":{"start":{"line":75,"column":12},"end":{"line":75,"column":104}},"41":{"start":{"line":77,"column":8},"end":{"line":80,"column":9}},"42":{"start":{"line":78,"column":32},"end":{"line":78,"column":36}},"43":{"start":{"line":79,"column":12},"end":{"line":79,"column":40}},"44":{"start":{"line":81,"column":8},"end":{"line":81,"column":42}},"45":{"start":{"line":84,"column":8},"end":{"line":90,"column":9}},"46":{"start":{"line":85,"column":12},"end":{"line":89,"column":13}},"47":{"start":{"line":86,"column":16},"end":{"line":88,"column":17}},"48":{"start":{"line":87,"column":20},"end":{"line":87,"column":33}},"49":{"start":{"line":91,"column":8},"end":{"line":91,"column":20}},"50":{"start":{"line":94,"column":0},"end":{"line":94,"column":46}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":8,"column":4},"end":{"line":8,"column":5}},"loc":{"start":{"line":8,"column":59},"end":{"line":26,"column":5}},"line":8},"1":{"name":"(anonymous_1)","decl":{"start":{"line":27,"column":4},"end":{"line":27,"column":5}},"loc":{"start":{"line":27,"column":19},"end":{"line":33,"column":5}},"line":27},"2":{"name":"(anonymous_2)","decl":{"start":{"line":32,"column":26},"end":{"line":32,"column":27}},"loc":{"start":{"line":32,"column":35},"end":{"line":32,"column":47}},"line":32},"3":{"name":"(anonymous_3)","decl":{"start":{"line":34,"column":4},"end":{"line":34,"column":5}},"loc":{"start":{"line":34,"column":21},"end":{"line":71,"column":5}},"line":34},"4":{"name":"(anonymous_4)","decl":{"start":{"line":67,"column":28},"end":{"line":67,"column":29}},"loc":{"start":{"line":67,"column":33},"end":{"line":70,"column":9}},"line":67},"5":{"name":"(anonymous_5)","decl":{"start":{"line":72,"column":4},"end":{"line":72,"column":5}},"loc":{"start":{"line":72,"column":29},"end":{"line":82,"column":5}},"line":72},"6":{"name":"(anonymous_6)","decl":{"start":{"line":83,"column":4},"end":{"line":83,"column":5}},"loc":{"start":{"line":83,"column":24},"end":{"line":92,"column":5}},"line":83}},"branchMap":{"0":{"loc":{"start":{"line":28,"column":8},"end":{"line":30,"column":9}},"type":"if","locations":[{"start":{"line":28,"column":8},"end":{"line":30,"column":9}},{"start":{"line":28,"column":8},"end":{"line":30,"column":9}}],"line":28},"1":{"loc":{"start":{"line":35,"column":8},"end":{"line":37,"column":9}},"type":"if","locations":[{"start":{"line":35,"column":8},"end":{"line":37,"column":9}},{"start":{"line":35,"column":8},"end":{"line":37,"column":9}}],"line":35},"2":{"loc":{"start":{"line":38,"column":8},"end":{"line":40,"column":9}},"type":"if","locations":[{"start":{"line":38,"column":8},"end":{"line":40,"column":9}},{"start":{"line":38,"column":8},"end":{"line":40,"column":9}}],"line":38},"3":{"loc":{"start":{"line":38,"column":12},"end":{"line":38,"column":80}},"type":"binary-expr","locations":[{"start":{"line":38,"column":12},"end":{"line":38,"column":44}},{"start":{"line":38,"column":48},"end":{"line":38,"column":80}}],"line":38},"4":{"loc":{"start":{"line":42,"column":8},"end":{"line":53,"column":9}},"type":"if","locations":[{"start":{"line":42,"column":8},"end":{"line":53,"column":9}},{"start":{"line":42,"column":8},"end":{"line":53,"column":9}}],"line":42},"5":{"loc":{"start":{"line":46,"column":16},"end":{"line":51,"column":17}},"type":"if","locations":[{"start":{"line":46,"column":16},"end":{"line":51,"column":17}},{"start":{"line":46,"column":16},"end":{"line":51,"column":17}}],"line":46},"6":{"loc":{"start":{"line":57,"column":26},"end":{"line":57,"column":55}},"type":"binary-expr","locations":[{"start":{"line":57,"column":26},"end":{"line":57,"column":50}},{"start":{"line":57,"column":54},"end":{"line":57,"column":55}}],"line":57},"7":{"loc":{"start":{"line":61,"column":8},"end":{"line":65,"column":9}},"type":"if","locations":[{"start":{"line":61,"column":8},"end":{"line":65,"column":9}},{"start":{"line":61,"column":8},"end":{"line":65,"column":9}}],"line":61},"8":{"loc":{"start":{"line":61,"column":12},"end":{"line":63,"column":100}},"type":"binary-expr","locations":[{"start":{"line":61,"column":13},"end":{"line":61,"column":38}},{"start":{"line":61,"column":42},"end":{"line":61,"column":96}},{"start":{"line":62,"column":16},"end":{"line":62,"column":41}},{"start":{"line":62,"column":45},"end":{"line":62,"column":98}},{"start":{"line":63,"column":16},"end":{"line":63,"column":41}},{"start":{"line":63,"column":45},"end":{"line":63,"column":99}}],"line":61},"9":{"loc":{"start":{"line":69,"column":19},"end":{"line":69,"column":84}},"type":"binary-expr","locations":[{"start":{"line":69,"column":19},"end":{"line":69,"column":31}},{"start":{"line":69,"column":35},"end":{"line":69,"column":59}},{"start":{"line":69,"column":63},"end":{"line":69,"column":84}}],"line":69},"10":{"loc":{"start":{"line":73,"column":8},"end":{"line":76,"column":9}},"type":"if","locations":[{"start":{"line":73,"column":8},"end":{"line":76,"column":9}},{"start":{"line":73,"column":8},"end":{"line":76,"column":9}}],"line":73},"11":{"loc":{"start":{"line":75,"column":19},"end":{"line":75,"column":103}},"type":"cond-expr","locations":[{"start":{"line":75,"column":52},"end":{"line":75,"column":74}},{"start":{"line":75,"column":77},"end":{"line":75,"column":103}}],"line":75},"12":{"loc":{"start":{"line":77,"column":8},"end":{"line":80,"column":9}},"type":"if","locations":[{"start":{"line":77,"column":8},"end":{"line":80,"column":9}},{"start":{"line":77,"column":8},"end":{"line":80,"column":9}}],"line":77},"13":{"loc":{"start":{"line":85,"column":12},"end":{"line":89,"column":13}},"type":"if","locations":[{"start":{"line":85,"column":12},"end":{"line":89,"column":13}},{"start":{"line":85,"column":12},"end":{"line":89,"column":13}}],"line":85},"14":{"loc":{"start":{"line":86,"column":16},"end":{"line":88,"column":17}},"type":"if","locations":[{"start":{"line":86,"column":16},"end":{"line":88,"column":17}},{"start":{"line":86,"column":16},"end":{"line":88,"column":17}}],"line":86}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":4,"6":4,"7":4,"8":4,"9":4,"10":4,"11":0,"12":0,"13":0,"14":0,"15":0,"16":6,"17":0,"18":6,"19":0,"20":6,"21":4,"22":4,"23":9,"24":9,"25":1,"26":8,"27":5,"28":5,"29":8,"30":8,"31":5,"32":5,"33":0,"34":5,"35":5,"36":8,"37":8,"38":9,"39":0,"40":0,"41":9,"42":9,"43":9,"44":0,"45":8,"46":0,"47":0,"48":0,"49":8,"50":1},"f":{"0":4,"1":0,"2":0,"3":6,"4":8,"5":9,"6":8},"b":{"0":[0,0],"1":[0,6],"2":[0,6],"3":[6,6],"4":[4,2],"5":[1,8],"6":[8,5],"7":[0,5],"8":[5,0,5,0,5,0],"9":[8,8,8],"10":[0,9],"11":[0,0],"12":[9,0],"13":[0,0],"14":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/choose-cards-prompt.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/choose-cards-prompt.ts"],"names":[],"mappings":"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","sourcesContent":["import { Card } from '../card/card';\nimport { CardList } from '../state/card-list';\nimport { EnergyCard } from '../card/energy-card';\nimport { GameMessage } from '../../game-message';\nimport { Prompt } from './prompt';\nimport { PokemonCard } from '../card/pokemon-card';\nimport { TrainerCard } from '../card/trainer-card';\nimport { CardType, SuperType } from '../card/card-types';\n\nexport const ChooseCardsPromptType = 'Choose cards';\n\nexport interface ChooseCardsOptions {\n  min: number;\n  max: number;\n  allowCancel: boolean;\n  blocked: number[];\n  isSecret: boolean;\n  differentTypes: boolean;\n  maxPokemons: number | undefined;\n  maxEnergies: number | undefined;\n  maxTrainers: number | undefined;\n}\n\nexport type FilterType = Partial<PokemonCard | TrainerCard | EnergyCard>;\n\nexport class ChooseCardsPrompt extends Prompt<Card[]> {\n\n  readonly type: string = ChooseCardsPromptType;\n  \n  public options: ChooseCardsOptions;\n\n  constructor(\n    playerId: number,\n    public message: GameMessage,\n    public cards: CardList,\n    public filter: FilterType,\n    options?: Partial<ChooseCardsOptions>\n  ) {\n    super(playerId);\n\n    // Default options\n    this.options = Object.assign({}, {\n      min: 0,\n      max: cards.cards.length,\n      allowCancel: true,\n      blocked: [],\n      isSecret: false,\n      differentTypes: false,\n      maxPokemons: undefined,\n      maxEnergies: undefined,\n      maxTrainers: undefined\n    }, options);\n  }\n\n  public decode(result: number[] | null): Card[] | null {\n    if (result === null) {\n      return null;\n    }\n    const cards: Card[] = this.cards.cards;\n    return result.map(index => cards[index]);\n  }\n\n  public validate(result: Card[] | null): boolean {\n    if (result === null) {\n      return this.options.allowCancel;\n    }\n    if (result.length < this.options.min || result.length > this.options.max) {\n      return false;\n    }\n\n    // Check if 'different types' restriction is valid\n    if (this.options.differentTypes) {\n      const typeMap: {[key: number]: boolean} = {};\n      for (const card of result) {\n        const cardType = ChooseCardsPrompt.getCardType(card);\n        if (typeMap[cardType] === true) {\n          return false;\n        } else {\n          typeMap[cardType] = true;\n        }\n      }\n    }\n\n    // Check if 'max' restrictions are valid\n    const countMap: {[key: number]: number} = {};\n    for (const card of result) {\n      const count = countMap[card.superType] || 0;\n      countMap[card.superType] = count + 1;\n    }\n    const { maxPokemons, maxEnergies, maxTrainers } = this.options;\n    if ((maxPokemons !== undefined && maxPokemons < countMap[SuperType.POKEMON])\n      || (maxEnergies !== undefined && maxEnergies < countMap[SuperType.ENERGY])\n      || (maxTrainers !== undefined && maxTrainers < countMap[SuperType.TRAINER])) {\n      return false;\n    }\n\n    const blocked = this.options.blocked;\n    return result.every(r => {\n      const index = this.cards.cards.indexOf(r);\n      return index !== -1 && !blocked.includes(index) && this.matchesFilter(r);\n    });\n  }\n\n  public static getCardType(card: Card): CardType {\n    if (card.superType === SuperType.ENERGY) {\n      const energyCard = card as EnergyCard;\n      return energyCard.provides.length > 0 ? energyCard.provides[0] : CardType.NONE;\n    }\n    if (card.superType === SuperType.POKEMON) {\n      const pokemonCard = card as PokemonCard;\n      return pokemonCard.cardType;\n    }\n    return CardType.NONE;\n  }\n\n  private matchesFilter(card: Card): boolean {\n    for (const key in this.filter) {\n      if (Object.prototype.hasOwnProperty.call(this.filter, key)) {\n        if ((this.filter as any)[key] !== (card as any)[key]) {\n          return false;\n        }\n      }\n    }\n    return true;\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"cc696e57ee831d1aa93249475fd0a1e1c1d7a430","contentHash":"a803b4dac6fe210a2573cef0f10d9bc76a71f56acfd5bc26a9fad4ea10bb5601"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/card/card-types.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/card/card-types.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":189}},"2":{"start":{"line":5,"column":0},"end":{"line":20,"column":56}},"3":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"4":{"start":{"line":7,"column":4},"end":{"line":7,"column":33}},"5":{"start":{"line":8,"column":4},"end":{"line":8,"column":33}},"6":{"start":{"line":9,"column":4},"end":{"line":9,"column":37}},"7":{"start":{"line":10,"column":4},"end":{"line":10,"column":31}},"8":{"start":{"line":11,"column":4},"end":{"line":11,"column":37}},"9":{"start":{"line":12,"column":4},"end":{"line":12,"column":39}},"10":{"start":{"line":13,"column":4},"end":{"line":13,"column":37}},"11":{"start":{"line":14,"column":4},"end":{"line":14,"column":35}},"12":{"start":{"line":15,"column":4},"end":{"line":15,"column":47}},"13":{"start":{"line":16,"column":4},"end":{"line":16,"column":47}},"14":{"start":{"line":17,"column":4},"end":{"line":17,"column":45}},"15":{"start":{"line":18,"column":4},"end":{"line":18,"column":33}},"16":{"start":{"line":19,"column":4},"end":{"line":19,"column":33}},"17":{"start":{"line":22,"column":0},"end":{"line":28,"column":62}},"18":{"start":{"line":23,"column":4},"end":{"line":23,"column":46}},"19":{"start":{"line":24,"column":4},"end":{"line":24,"column":52}},"20":{"start":{"line":25,"column":4},"end":{"line":25,"column":52}},"21":{"start":{"line":26,"column":4},"end":{"line":26,"column":50}},"22":{"start":{"line":27,"column":4},"end":{"line":27,"column":44}},"23":{"start":{"line":30,"column":0},"end":{"line":33,"column":65}},"24":{"start":{"line":31,"column":4},"end":{"line":31,"column":50}},"25":{"start":{"line":32,"column":4},"end":{"line":32,"column":54}},"26":{"start":{"line":35,"column":0},"end":{"line":40,"column":68}},"27":{"start":{"line":36,"column":4},"end":{"line":36,"column":50}},"28":{"start":{"line":37,"column":4},"end":{"line":37,"column":60}},"29":{"start":{"line":38,"column":4},"end":{"line":38,"column":56}},"30":{"start":{"line":39,"column":4},"end":{"line":39,"column":50}},"31":{"start":{"line":42,"column":0},"end":{"line":46,"column":68}},"32":{"start":{"line":43,"column":4},"end":{"line":43,"column":54}},"33":{"start":{"line":44,"column":4},"end":{"line":44,"column":46}},"34":{"start":{"line":45,"column":4},"end":{"line":45,"column":54}},"35":{"start":{"line":48,"column":0},"end":{"line":56,"column":50}},"36":{"start":{"line":49,"column":4},"end":{"line":49,"column":38}},"37":{"start":{"line":50,"column":4},"end":{"line":50,"column":46}},"38":{"start":{"line":51,"column":4},"end":{"line":51,"column":40}},"39":{"start":{"line":52,"column":4},"end":{"line":52,"column":44}},"40":{"start":{"line":53,"column":4},"end":{"line":53,"column":44}},"41":{"start":{"line":54,"column":4},"end":{"line":54,"column":38}},"42":{"start":{"line":55,"column":4},"end":{"line":55,"column":40}},"43":{"start":{"line":58,"column":0},"end":{"line":72,"column":59}},"44":{"start":{"line":59,"column":4},"end":{"line":59,"column":42}},"45":{"start":{"line":60,"column":4},"end":{"line":60,"column":44}},"46":{"start":{"line":61,"column":4},"end":{"line":61,"column":54}},"47":{"start":{"line":62,"column":4},"end":{"line":62,"column":46}},"48":{"start":{"line":63,"column":4},"end":{"line":63,"column":52}},"49":{"start":{"line":64,"column":4},"end":{"line":64,"column":50}},"50":{"start":{"line":65,"column":4},"end":{"line":65,"column":46}},"51":{"start":{"line":66,"column":4},"end":{"line":66,"column":54}},"52":{"start":{"line":67,"column":4},"end":{"line":67,"column":46}},"53":{"start":{"line":68,"column":4},"end":{"line":68,"column":44}},"54":{"start":{"line":69,"column":4},"end":{"line":69,"column":45}},"55":{"start":{"line":70,"column":4},"end":{"line":70,"column":49}},"56":{"start":{"line":71,"column":4},"end":{"line":71,"column":47}},"57":{"start":{"line":74,"column":0},"end":{"line":80,"column":83}},"58":{"start":{"line":75,"column":4},"end":{"line":75,"column":70}},"59":{"start":{"line":76,"column":4},"end":{"line":76,"column":68}},"60":{"start":{"line":77,"column":4},"end":{"line":77,"column":64}},"61":{"start":{"line":78,"column":4},"end":{"line":78,"column":68}},"62":{"start":{"line":79,"column":4},"end":{"line":79,"column":64}},"63":{"start":{"line":82,"column":0},"end":{"line":87,"column":53}},"64":{"start":{"line":83,"column":4},"end":{"line":83,"column":48}},"65":{"start":{"line":84,"column":4},"end":{"line":84,"column":48}},"66":{"start":{"line":85,"column":4},"end":{"line":85,"column":50}},"67":{"start":{"line":86,"column":4},"end":{"line":86,"column":42}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":1},"end":{"line":5,"column":2}},"loc":{"start":{"line":5,"column":20},"end":{"line":20,"column":1}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":22,"column":1},"end":{"line":22,"column":2}},"loc":{"start":{"line":22,"column":22},"end":{"line":28,"column":1}},"line":22},"2":{"name":"(anonymous_2)","decl":{"start":{"line":30,"column":1},"end":{"line":30,"column":2}},"loc":{"start":{"line":30,"column":23},"end":{"line":33,"column":1}},"line":30},"3":{"name":"(anonymous_3)","decl":{"start":{"line":35,"column":1},"end":{"line":35,"column":2}},"loc":{"start":{"line":35,"column":24},"end":{"line":40,"column":1}},"line":35},"4":{"name":"(anonymous_4)","decl":{"start":{"line":42,"column":1},"end":{"line":42,"column":2}},"loc":{"start":{"line":42,"column":24},"end":{"line":46,"column":1}},"line":42},"5":{"name":"(anonymous_5)","decl":{"start":{"line":48,"column":1},"end":{"line":48,"column":2}},"loc":{"start":{"line":48,"column":18},"end":{"line":56,"column":1}},"line":48},"6":{"name":"(anonymous_6)","decl":{"start":{"line":58,"column":1},"end":{"line":58,"column":2}},"loc":{"start":{"line":58,"column":21},"end":{"line":72,"column":1}},"line":58},"7":{"name":"(anonymous_7)","decl":{"start":{"line":74,"column":1},"end":{"line":74,"column":2}},"loc":{"start":{"line":74,"column":29},"end":{"line":80,"column":1}},"line":74},"8":{"name":"(anonymous_8)","decl":{"start":{"line":82,"column":1},"end":{"line":82,"column":2}},"loc":{"start":{"line":82,"column":19},"end":{"line":87,"column":1}},"line":82}},"branchMap":{"0":{"loc":{"start":{"line":20,"column":13},"end":{"line":20,"column":54}},"type":"binary-expr","locations":[{"start":{"line":20,"column":13},"end":{"line":20,"column":28}},{"start":{"line":20,"column":33},"end":{"line":20,"column":53}}],"line":20},"1":{"loc":{"start":{"line":28,"column":15},"end":{"line":28,"column":60}},"type":"binary-expr","locations":[{"start":{"line":28,"column":15},"end":{"line":28,"column":32}},{"start":{"line":28,"column":37},"end":{"line":28,"column":59}}],"line":28},"2":{"loc":{"start":{"line":33,"column":16},"end":{"line":33,"column":63}},"type":"binary-expr","locations":[{"start":{"line":33,"column":16},"end":{"line":33,"column":34}},{"start":{"line":33,"column":39},"end":{"line":33,"column":62}}],"line":33},"3":{"loc":{"start":{"line":40,"column":17},"end":{"line":40,"column":66}},"type":"binary-expr","locations":[{"start":{"line":40,"column":17},"end":{"line":40,"column":36}},{"start":{"line":40,"column":41},"end":{"line":40,"column":65}}],"line":40},"4":{"loc":{"start":{"line":46,"column":17},"end":{"line":46,"column":66}},"type":"binary-expr","locations":[{"start":{"line":46,"column":17},"end":{"line":46,"column":36}},{"start":{"line":46,"column":41},"end":{"line":46,"column":65}}],"line":46},"5":{"loc":{"start":{"line":56,"column":11},"end":{"line":56,"column":48}},"type":"binary-expr","locations":[{"start":{"line":56,"column":11},"end":{"line":56,"column":24}},{"start":{"line":56,"column":29},"end":{"line":56,"column":47}}],"line":56},"6":{"loc":{"start":{"line":72,"column":14},"end":{"line":72,"column":57}},"type":"binary-expr","locations":[{"start":{"line":72,"column":14},"end":{"line":72,"column":30}},{"start":{"line":72,"column":35},"end":{"line":72,"column":56}}],"line":72},"7":{"loc":{"start":{"line":80,"column":22},"end":{"line":80,"column":81}},"type":"binary-expr","locations":[{"start":{"line":80,"column":22},"end":{"line":80,"column":46}},{"start":{"line":80,"column":51},"end":{"line":80,"column":80}}],"line":80},"8":{"loc":{"start":{"line":87,"column":12},"end":{"line":87,"column":51}},"type":"binary-expr","locations":[{"start":{"line":87,"column":12},"end":{"line":87,"column":26}},{"start":{"line":87,"column":31},"end":{"line":87,"column":50}}],"line":87}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":1,"47":1,"48":1,"49":1,"50":1,"51":1,"52":1,"53":1,"54":1,"55":1,"56":1,"57":1,"58":1,"59":1,"60":1,"61":1,"62":1,"63":1,"64":1,"65":1,"66":1,"67":1},"f":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1},"b":{"0":[1,1],"1":[1,1],"2":[1,1],"3":[1,1],"4":[1,1],"5":[1,1],"6":[1,1],"7":[1,1],"8":[1,1]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/card/card-types.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/card/card-types.ts"],"names":[],"mappings":";;;AACA,IAAY,OAeX;AAfD,WAAY,OAAO;IACjB,4BAAiB,CAAA;IACjB,4BAAiB,CAAA;IACjB,4BAAiB,CAAA;IACjB,gCAAqB,CAAA;IACrB,0BAAe,CAAA;IACf,gCAAqB,CAAA;IACrB,kCAAuB,CAAA;IACvB,gCAAqB,CAAA;IACrB,8BAAmB,CAAA;IACnB,0CAA+B,CAAA;IAC/B,0CAA+B,CAAA;IAC/B,wCAA6B,CAAA;IAC7B,4BAAiB,CAAA;IACjB,4BAAiB,CAAA;AACnB,CAAC,EAfW,OAAO,GAAP,eAAO,KAAP,eAAO,QAelB;AAGD,IAAY,SAMX;AAND,WAAY,SAAS;IACnB,yCAAI,CAAA;IACJ,+CAAO,CAAA;IACP,+CAAO,CAAA;IACP,6CAAM,CAAA;IACN,uCAAG,CAAA;AACL,CAAC,EANW,SAAS,GAAT,iBAAS,KAAT,iBAAS,QAMpB;AAED,IAAY,UAGX;AAHD,WAAY,UAAU;IACpB,6CAAK,CAAA;IACL,iDAAO,CAAA;AACT,CAAC,EAHW,UAAU,GAAV,kBAAU,KAAV,kBAAU,QAGrB;AAED,IAAY,WAKX;AALD,WAAY,WAAW;IACrB,6CAAI,CAAA;IACJ,uDAAS,CAAA;IACT,mDAAO,CAAA;IACP,6CAAI,CAAA;AACN,CAAC,EALW,WAAW,GAAX,mBAAW,KAAX,mBAAW,QAKtB;AAED,IAAY,WAIX;AAJD,WAAY,WAAW;IACrB,iDAAM,CAAA;IACN,yCAAE,CAAA;IACF,iDAAM,CAAA;AACR,CAAC,EAJW,WAAW,GAAX,mBAAW,KAAX,mBAAW,QAItB;AAED,IAAY,KAQX;AARD,WAAY,KAAK;IACf,iCAAI,CAAA;IACJ,yCAAQ,CAAA;IACR,mCAAK,CAAA;IACL,uCAAO,CAAA;IACP,uCAAO,CAAA;IACP,iCAAI,CAAA;IACJ,mCAAK,CAAA;AACP,CAAC,EARW,KAAK,GAAL,aAAK,KAAL,aAAK,QAQhB;AAED,IAAY,QAcX;AAdD,WAAY,QAAQ;IAClB,qCAAG,CAAA;IACH,uCAAI,CAAA;IACJ,iDAAS,CAAA;IACT,yCAAK,CAAA;IACL,+CAAQ,CAAA;IACR,6CAAO,CAAA;IACP,yCAAK,CAAA;IACL,iDAAS,CAAA;IACT,yCAAK,CAAA;IACL,uCAAI,CAAA;IACJ,wCAAI,CAAA;IACJ,4CAAM,CAAA;IACN,0CAAK,CAAA;AACP,CAAC,EAdW,QAAQ,GAAR,gBAAQ,KAAR,gBAAQ,QAcnB;AAED,IAAY,gBAMX;AAND,WAAY,gBAAgB;IAC1B,iEAAS,CAAA;IACT,+DAAQ,CAAA;IACR,2DAAM,CAAA;IACN,+DAAQ,CAAA;IACR,2DAAM,CAAA;AACR,CAAC,EANW,gBAAgB,GAAhB,wBAAgB,KAAhB,wBAAgB,QAM3B;AAED,IAAY,MAKX;AALD,WAAY,MAAM;IAClB,2CAAQ,CAAA;IACR,2CAAQ,CAAA;IACR,6CAAS,CAAA;IACT,qCAAK,CAAA;AACL,CAAC,EALW,MAAM,GAAN,cAAM,KAAN,cAAM,QAKjB","sourcesContent":["\nexport enum CardTag {\n  POKEMON_SP = 'SP',\n  POKEMON_EX = 'EX',\n  POKEMON_GX = 'GX',\n  POKEMON_LV_X = 'LV_X',\n  POKEMON_V = 'V',\n  POKEMON_VMAX = 'VMAX',\n  POKEMON_VSTAR = 'VSTAR',\n  ACE_SPEC = 'ACE_SPEC',\n  RADIANT = 'RADIANT',\n  FUSION_STRIKE = 'FUSION_STRIKE',\n  SINGLE_STRIKE = 'SINGLE_STRIKE',\n  RAPID_STRIKE = 'RAPID_STRIKE',\n  POKEMON_ex = 'ex',\n  FUTURE = 'Future',\n}\n\n\nexport enum SuperType {\n  NONE,\n  POKEMON,\n  TRAINER,\n  ENERGY,\n  ANY\n}\n\nexport enum EnergyType {\n  BASIC,\n  SPECIAL,\n}\n\nexport enum TrainerType {\n  ITEM,\n  SUPPORTER,\n  STADIUM,\n  TOOL,\n}\n\nexport enum PokemonType {\n  NORMAL,\n  EX,\n  LEGEND,\n}\n\nexport enum Stage {\n  NONE,\n  RESTORED,\n  BASIC,\n  STAGE_1,\n  STAGE_2,\n  VMAX,\n  VSTAR,\n}\n\nexport enum CardType {\n  ANY,\n  NONE,\n  COLORLESS,\n  GRASS,\n  FIGHTING,\n  PSYCHIC,\n  WATER,\n  LIGHTNING,\n  METAL,\n  DARK,\n  FIRE,\n  DRAGON,\n  FAIRY,\n}\n\nexport enum SpecialCondition {\n  PARALYZED,\n  CONFUSED,\n  ASLEEP,\n  POISONED,\n  BURNED\n}\n\nexport enum Format {\nSTANDARD,\nEXPANDED,\nUNLIMITED,\nRETRO,\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"0c6586ce9ec3f045392b31823e9d773c81f23a2d","contentHash":"7eccc9bbef13d42cbfaedfba450c15c99af4b69024d97ecb2e44bc625788bd0c"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/choose-energy-prompt.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/choose-energy-prompt.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":69}},"2":{"start":{"line":4,"column":21},"end":{"line":4,"column":50}},"3":{"start":{"line":5,"column":17},"end":{"line":5,"column":36}},"4":{"start":{"line":6,"column":22},"end":{"line":6,"column":47}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":49}},"6":{"start":{"line":10,"column":8},"end":{"line":10,"column":24}},"7":{"start":{"line":11,"column":8},"end":{"line":11,"column":31}},"8":{"start":{"line":12,"column":8},"end":{"line":12,"column":29}},"9":{"start":{"line":13,"column":8},"end":{"line":13,"column":25}},"10":{"start":{"line":14,"column":8},"end":{"line":14,"column":51}},"11":{"start":{"line":16,"column":8},"end":{"line":18,"column":20}},"12":{"start":{"line":19,"column":8},"end":{"line":21,"column":9}},"13":{"start":{"line":20,"column":12},"end":{"line":20,"column":52}},"14":{"start":{"line":24,"column":8},"end":{"line":26,"column":9}},"15":{"start":{"line":25,"column":12},"end":{"line":25,"column":24}},"16":{"start":{"line":27,"column":23},"end":{"line":27,"column":34}},"17":{"start":{"line":28,"column":8},"end":{"line":28,"column":50}},"18":{"start":{"line":28,"column":35},"end":{"line":28,"column":48}},"19":{"start":{"line":31,"column":8},"end":{"line":33,"column":9}},"20":{"start":{"line":32,"column":12},"end":{"line":32,"column":44}},"21":{"start":{"line":34,"column":8},"end":{"line":36,"column":9}},"22":{"start":{"line":35,"column":12},"end":{"line":35,"column":25}},"23":{"start":{"line":37,"column":8},"end":{"line":37,"column":20}},"24":{"start":{"line":40,"column":23},"end":{"line":40,"column":40}},"25":{"start":{"line":41,"column":25},"end":{"line":41,"column":44}},"26":{"start":{"line":42,"column":22},"end":{"line":42,"column":82}},"27":{"start":{"line":42,"column":44},"end":{"line":42,"column":81}},"28":{"start":{"line":43,"column":31},"end":{"line":43,"column":59}},"29":{"start":{"line":44,"column":8},"end":{"line":75,"column":9}},"30":{"start":{"line":45,"column":25},"end":{"line":45,"column":33}},"31":{"start":{"line":46,"column":24},"end":{"line":46,"column":74}},"32":{"start":{"line":46,"column":48},"end":{"line":46,"column":73}},"33":{"start":{"line":47,"column":12},"end":{"line":50,"column":13}},"34":{"start":{"line":49,"column":16},"end":{"line":49,"column":96}},"35":{"start":{"line":49,"column":48},"end":{"line":49,"column":94}},"36":{"start":{"line":51,"column":12},"end":{"line":74,"column":13}},"37":{"start":{"line":53,"column":32},"end":{"line":53,"column":47}},"38":{"start":{"line":54,"column":16},"end":{"line":54,"column":42}},"39":{"start":{"line":55,"column":16},"end":{"line":65,"column":19}},"40":{"start":{"line":56,"column":20},"end":{"line":64,"column":21}},"41":{"start":{"line":57,"column":24},"end":{"line":57,"column":38}},"42":{"start":{"line":60,"column":34},"end":{"line":60,"column":50}},"43":{"start":{"line":61,"column":24},"end":{"line":63,"column":25}},"44":{"start":{"line":62,"column":28},"end":{"line":62,"column":47}},"45":{"start":{"line":69,"column":16},"end":{"line":69,"column":30}},"46":{"start":{"line":70,"column":37},"end":{"line":70,"column":57}},"47":{"start":{"line":71,"column":16},"end":{"line":73,"column":17}},"48":{"start":{"line":72,"column":20},"end":{"line":72,"column":51}},"49":{"start":{"line":76,"column":25},"end":{"line":76,"column":26}},"50":{"start":{"line":77,"column":8},"end":{"line":79,"column":9}},"51":{"start":{"line":78,"column":12},"end":{"line":78,"column":49}},"52":{"start":{"line":80,"column":34},"end":{"line":80,"column":74}},"53":{"start":{"line":81,"column":8},"end":{"line":86,"column":9}},"54":{"start":{"line":81,"column":21},"end":{"line":81,"column":22}},"55":{"start":{"line":82,"column":33},"end":{"line":82,"column":80}},"56":{"start":{"line":83,"column":12},"end":{"line":85,"column":13}},"57":{"start":{"line":84,"column":16},"end":{"line":84,"column":47}},"58":{"start":{"line":87,"column":8},"end":{"line":87,"column":22}},"59":{"start":{"line":90,"column":0},"end":{"line":90,"column":48}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":9,"column":4},"end":{"line":9,"column":5}},"loc":{"start":{"line":9,"column":58},"end":{"line":22,"column":5}},"line":9},"1":{"name":"(anonymous_1)","decl":{"start":{"line":23,"column":4},"end":{"line":23,"column":5}},"loc":{"start":{"line":23,"column":19},"end":{"line":29,"column":5}},"line":23},"2":{"name":"(anonymous_2)","decl":{"start":{"line":28,"column":26},"end":{"line":28,"column":27}},"loc":{"start":{"line":28,"column":35},"end":{"line":28,"column":48}},"line":28},"3":{"name":"(anonymous_3)","decl":{"start":{"line":30,"column":4},"end":{"line":30,"column":5}},"loc":{"start":{"line":30,"column":21},"end":{"line":38,"column":5}},"line":30},"4":{"name":"(anonymous_4)","decl":{"start":{"line":39,"column":4},"end":{"line":39,"column":5}},"loc":{"start":{"line":39,"column":27},"end":{"line":88,"column":5}},"line":39},"5":{"name":"(anonymous_5)","decl":{"start":{"line":42,"column":39},"end":{"line":42,"column":40}},"loc":{"start":{"line":42,"column":44},"end":{"line":42,"column":81}},"line":42},"6":{"name":"(anonymous_6)","decl":{"start":{"line":46,"column":43},"end":{"line":46,"column":44}},"loc":{"start":{"line":46,"column":48},"end":{"line":46,"column":73}},"line":46},"7":{"name":"(anonymous_7)","decl":{"start":{"line":49,"column":43},"end":{"line":49,"column":44}},"loc":{"start":{"line":49,"column":48},"end":{"line":49,"column":94}},"line":49},"8":{"name":"(anonymous_8)","decl":{"start":{"line":55,"column":41},"end":{"line":55,"column":42}},"loc":{"start":{"line":55,"column":46},"end":{"line":65,"column":17}},"line":55}},"branchMap":{"0":{"loc":{"start":{"line":19,"column":8},"end":{"line":21,"column":9}},"type":"if","locations":[{"start":{"line":19,"column":8},"end":{"line":21,"column":9}},{"start":{"line":19,"column":8},"end":{"line":21,"column":9}}],"line":19},"1":{"loc":{"start":{"line":24,"column":8},"end":{"line":26,"column":9}},"type":"if","locations":[{"start":{"line":24,"column":8},"end":{"line":26,"column":9}},{"start":{"line":24,"column":8},"end":{"line":26,"column":9}}],"line":24},"2":{"loc":{"start":{"line":31,"column":8},"end":{"line":33,"column":9}},"type":"if","locations":[{"start":{"line":31,"column":8},"end":{"line":33,"column":9}},{"start":{"line":31,"column":8},"end":{"line":33,"column":9}}],"line":31},"3":{"loc":{"start":{"line":34,"column":8},"end":{"line":36,"column":9}},"type":"if","locations":[{"start":{"line":34,"column":8},"end":{"line":36,"column":9}},{"start":{"line":34,"column":8},"end":{"line":36,"column":9}}],"line":34},"4":{"loc":{"start":{"line":44,"column":15},"end":{"line":44,"column":54}},"type":"binary-expr","locations":[{"start":{"line":44,"column":15},"end":{"line":44,"column":31}},{"start":{"line":44,"column":35},"end":{"line":44,"column":54}}],"line":44},"5":{"loc":{"start":{"line":47,"column":12},"end":{"line":50,"column":13}},"type":"if","locations":[{"start":{"line":47,"column":12},"end":{"line":50,"column":13}},{"start":{"line":47,"column":12},"end":{"line":50,"column":13}}],"line":47},"6":{"loc":{"start":{"line":51,"column":12},"end":{"line":74,"column":13}},"type":"if","locations":[{"start":{"line":51,"column":12},"end":{"line":74,"column":13}},{"start":{"line":51,"column":12},"end":{"line":74,"column":13}}],"line":51},"7":{"loc":{"start":{"line":56,"column":20},"end":{"line":64,"column":21}},"type":"if","locations":[{"start":{"line":56,"column":20},"end":{"line":64,"column":21}},{"start":{"line":56,"column":20},"end":{"line":64,"column":21}}],"line":56},"8":{"loc":{"start":{"line":56,"column":24},"end":{"line":56,"column":75}},"type":"binary-expr","locations":[{"start":{"line":56,"column":24},"end":{"line":56,"column":55}},{"start":{"line":56,"column":59},"end":{"line":56,"column":75}}],"line":56},"9":{"loc":{"start":{"line":61,"column":24},"end":{"line":63,"column":25}},"type":"if","locations":[{"start":{"line":61,"column":24},"end":{"line":63,"column":25}},{"start":{"line":61,"column":24},"end":{"line":63,"column":25}}],"line":61},"10":{"loc":{"start":{"line":71,"column":16},"end":{"line":73,"column":17}},"type":"if","locations":[{"start":{"line":71,"column":16},"end":{"line":73,"column":17}},{"start":{"line":71,"column":16},"end":{"line":73,"column":17}}],"line":71},"11":{"loc":{"start":{"line":83,"column":12},"end":{"line":85,"column":13}},"type":"if","locations":[{"start":{"line":83,"column":12},"end":{"line":85,"column":13}},{"start":{"line":83,"column":12},"end":{"line":85,"column":13}}],"line":83}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":12,"7":12,"8":12,"9":12,"10":12,"11":12,"12":12,"13":4,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":4,"25":4,"26":4,"27":9,"28":4,"29":4,"30":6,"31":6,"32":10,"33":6,"34":5,"35":8,"36":6,"37":2,"38":2,"39":2,"40":2,"41":1,"42":1,"43":1,"44":1,"45":4,"46":4,"47":4,"48":4,"49":4,"50":4,"51":5,"52":4,"53":4,"54":4,"55":1,"56":1,"57":1,"58":4,"59":1},"f":{"0":12,"1":0,"2":0,"3":0,"4":4,"5":9,"6":10,"7":8,"8":2},"b":{"0":[4,8],"1":[0,0],"2":[0,0],"3":[0,0],"4":[10,6],"5":[5,1],"6":[2,4],"7":[1,1],"8":[2,1],"9":[1,0],"10":[4,0],"11":[1,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/choose-energy-prompt.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/choose-energy-prompt.ts"],"names":[],"mappings":"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","sourcesContent":["import { Card } from '../card/card';\nimport { CardType } from '../card/card-types';\nimport { GameMessage } from '../../game-message';\nimport { Prompt } from './prompt';\nimport { StateUtils } from '../state-utils';\n\nexport const ChooseEnergyPromptType = 'Choose energy';\n\nexport interface ChooseEnergyOptions {\n  allowCancel: boolean;\n}\n\nexport type EnergyMap = { card: Card, provides: CardType[] }\n\nexport class ChooseEnergyPrompt extends Prompt<EnergyMap[]> {\n\n  readonly type: string = ChooseEnergyPromptType;\n\n  public options: ChooseEnergyOptions;\n\n  constructor(\n    playerId: number,\n    public message: GameMessage,\n    public energy: EnergyMap[],\n    public cost: CardType[],\n    options?: Partial<ChooseEnergyOptions>\n  ) {\n    super(playerId);\n\n    // Default options\n    this.options = Object.assign({}, {\n      allowCancel: true\n    }, options);\n\n    if (this.options.allowCancel === false) {\n      this.cost = this.getCostThatCanBePaid();\n    }\n  }\n\n  public decode(result: number[] | null): EnergyMap[] | null {\n    if (result === null) {\n      return null;\n    }\n    const energy: EnergyMap[] = this.energy;\n    return result.map(index => energy[index]);\n  }\n\n  public validate(result: EnergyMap[] | null): boolean {\n    if (result === null) {\n      return this.options.allowCancel;\n    }\n    if (!StateUtils.checkExactEnergy(result, this.cost)) {\n      return false;\n    }\n    return true;\n  }\n\n  private getCostThatCanBePaid(): CardType[] {\n    const result: CardType[] = this.cost.slice();\n    const provides = this.energy.slice();\n    const costs: CardType[] = this.cost.filter(c => c !== CardType.COLORLESS);\n    const colorlessCount = result.length - costs.length;\n\n    while (costs.length > 0 && provides.length > 0) {\n      const cost = costs[0];\n      let index = provides.findIndex(p => p.provides.includes(cost));\n\n      if (index === -1) {\n        // concrete energy not found, try to use rainbow energies\n        index = provides.findIndex(p => p.provides.includes(CardType.ANY));\n      }\n\n      if (index !== -1) {\n        // Energy can be paid, so remove that energy from the provides\n        const provide = provides[index];\n        provides.splice(index, 1);\n\n        provide.provides.forEach(c => {\n          if (c === CardType.ANY && costs.length > 0) {\n            costs.shift();\n          } else {\n            const i = costs.indexOf(c);\n            if (i !== -1) {\n              costs.splice(i, 1);\n            }\n          }\n        });\n\n      } else {\n        // Impossible to pay for this cost\n        costs.shift();\n        const costToDelete = result.indexOf(cost);\n        if (costToDelete !== -1) {\n          result.splice(costToDelete, 1);\n        }\n      }\n    }\n\n    let energyLeft = 0;\n    for (const energy of provides) {\n      energyLeft += energy.provides.length;\n    }\n\n    const colorlessToDelete = Math.max(0, colorlessCount - energyLeft);\n    for (let i = 0; i < colorlessToDelete; i++) {\n      const costToDelete = result.indexOf(CardType.COLORLESS);\n      if (costToDelete !== -1) {\n        result.splice(costToDelete, 1);\n      }\n    }\n\n    return result;\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"da48903bc1b8121c8b89210bf151bc4ad095f416","contentHash":"e5a3e3d40071e06eec9d99c011765c5d169af273362bb35977bb232b8127ed6a"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/state-utils.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/state-utils.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":28}},"2":{"start":{"line":4,"column":27},"end":{"line":4,"column":64}},"3":{"start":{"line":5,"column":21},"end":{"line":5,"column":49}},"4":{"start":{"line":6,"column":21},"end":{"line":6,"column":45}},"5":{"start":{"line":7,"column":23},"end":{"line":7,"column":49}},"6":{"start":{"line":10,"column":8},"end":{"line":12,"column":9}},"7":{"start":{"line":11,"column":12},"end":{"line":11,"column":24}},"8":{"start":{"line":13,"column":25},"end":{"line":13,"column":27}},"9":{"start":{"line":14,"column":8},"end":{"line":16,"column":11}},"10":{"start":{"line":15,"column":12},"end":{"line":15,"column":68}},"11":{"start":{"line":15,"column":43},"end":{"line":15,"column":66}},"12":{"start":{"line":17,"column":24},"end":{"line":17,"column":25}},"13":{"start":{"line":18,"column":22},"end":{"line":18,"column":23}},"14":{"start":{"line":20,"column":8},"end":{"line":38,"column":11}},"15":{"start":{"line":21,"column":12},"end":{"line":37,"column":13}},"16":{"start":{"line":24,"column":20},"end":{"line":24,"column":26}},"17":{"start":{"line":26,"column":20},"end":{"line":26,"column":35}},"18":{"start":{"line":27,"column":20},"end":{"line":27,"column":26}},"19":{"start":{"line":29,"column":34},"end":{"line":29,"column":83}},"20":{"start":{"line":29,"column":63},"end":{"line":29,"column":82}},"21":{"start":{"line":30,"column":20},"end":{"line":35,"column":21}},"22":{"start":{"line":31,"column":24},"end":{"line":31,"column":50}},"23":{"start":{"line":34,"column":24},"end":{"line":34,"column":37}},"24":{"start":{"line":40,"column":8},"end":{"line":48,"column":9}},"25":{"start":{"line":40,"column":21},"end":{"line":40,"column":22}},"26":{"start":{"line":41,"column":26},"end":{"line":41,"column":92}},"27":{"start":{"line":41,"column":55},"end":{"line":41,"column":91}},"28":{"start":{"line":42,"column":12},"end":{"line":47,"column":13}},"29":{"start":{"line":43,"column":16},"end":{"line":43,"column":42}},"30":{"start":{"line":46,"column":16},"end":{"line":46,"column":29}},"31":{"start":{"line":50,"column":8},"end":{"line":50,"column":44}},"32":{"start":{"line":53,"column":21},"end":{"line":53,"column":63}},"33":{"start":{"line":54,"column":8},"end":{"line":56,"column":9}},"34":{"start":{"line":55,"column":12},"end":{"line":55,"column":25}},"35":{"start":{"line":57,"column":8},"end":{"line":64,"column":9}},"36":{"start":{"line":57,"column":21},"end":{"line":57,"column":22}},"37":{"start":{"line":58,"column":30},"end":{"line":58,"column":44}},"38":{"start":{"line":59,"column":12},"end":{"line":59,"column":35}},"39":{"start":{"line":60,"column":12},"end":{"line":60,"column":67}},"40":{"start":{"line":61,"column":12},"end":{"line":63,"column":13}},"41":{"start":{"line":62,"column":16},"end":{"line":62,"column":29}},"42":{"start":{"line":65,"column":8},"end":{"line":65,"column":20}},"43":{"start":{"line":68,"column":25},"end":{"line":68,"column":68}},"44":{"start":{"line":68,"column":49},"end":{"line":68,"column":67}},"45":{"start":{"line":69,"column":8},"end":{"line":71,"column":9}},"46":{"start":{"line":70,"column":12},"end":{"line":70,"column":92}},"47":{"start":{"line":72,"column":8},"end":{"line":72,"column":24}},"48":{"start":{"line":75,"column":8},"end":{"line":77,"column":9}},"49":{"start":{"line":76,"column":12},"end":{"line":76,"column":59}},"50":{"start":{"line":78,"column":8},"end":{"line":80,"column":9}},"51":{"start":{"line":79,"column":12},"end":{"line":79,"column":33}},"52":{"start":{"line":81,"column":8},"end":{"line":83,"column":9}},"53":{"start":{"line":82,"column":12},"end":{"line":82,"column":88}},"54":{"start":{"line":84,"column":8},"end":{"line":86,"column":9}},"55":{"start":{"line":85,"column":12},"end":{"line":85,"column":88}},"56":{"start":{"line":87,"column":8},"end":{"line":87,"column":42}},"57":{"start":{"line":90,"column":26},"end":{"line":90,"column":28}},"58":{"start":{"line":91,"column":8},"end":{"line":100,"column":9}},"59":{"start":{"line":92,"column":12},"end":{"line":92,"column":42}},"60":{"start":{"line":93,"column":12},"end":{"line":93,"column":40}},"61":{"start":{"line":94,"column":12},"end":{"line":94,"column":43}},"62":{"start":{"line":95,"column":12},"end":{"line":95,"column":40}},"63":{"start":{"line":96,"column":12},"end":{"line":96,"column":43}},"64":{"start":{"line":97,"column":12},"end":{"line":97,"column":45}},"65":{"start":{"line":98,"column":12},"end":{"line":98,"column":63}},"66":{"start":{"line":98,"column":41},"end":{"line":98,"column":61}},"67":{"start":{"line":99,"column":12},"end":{"line":99,"column":64}},"68":{"start":{"line":99,"column":42},"end":{"line":99,"column":62}},"69":{"start":{"line":101,"column":25},"end":{"line":101,"column":68}},"70":{"start":{"line":101,"column":45},"end":{"line":101,"column":67}},"71":{"start":{"line":102,"column":8},"end":{"line":104,"column":9}},"72":{"start":{"line":103,"column":12},"end":{"line":103,"column":92}},"73":{"start":{"line":105,"column":8},"end":{"line":105,"column":24}},"74":{"start":{"line":108,"column":8},"end":{"line":121,"column":9}},"75":{"start":{"line":109,"column":30},"end":{"line":109,"column":32}},"76":{"start":{"line":110,"column":12},"end":{"line":110,"column":42}},"77":{"start":{"line":111,"column":12},"end":{"line":111,"column":40}},"78":{"start":{"line":112,"column":12},"end":{"line":112,"column":43}},"79":{"start":{"line":113,"column":12},"end":{"line":113,"column":40}},"80":{"start":{"line":114,"column":12},"end":{"line":114,"column":43}},"81":{"start":{"line":115,"column":12},"end":{"line":115,"column":45}},"82":{"start":{"line":116,"column":12},"end":{"line":116,"column":63}},"83":{"start":{"line":116,"column":41},"end":{"line":116,"column":61}},"84":{"start":{"line":117,"column":12},"end":{"line":117,"column":64}},"85":{"start":{"line":117,"column":42},"end":{"line":117,"column":62}},"86":{"start":{"line":118,"column":12},"end":{"line":120,"column":13}},"87":{"start":{"line":119,"column":16},"end":{"line":119,"column":30}},"88":{"start":{"line":122,"column":8},"end":{"line":122,"column":88}},"89":{"start":{"line":125,"column":8},"end":{"line":129,"column":9}},"90":{"start":{"line":126,"column":12},"end":{"line":128,"column":13}},"91":{"start":{"line":127,"column":16},"end":{"line":127,"column":47}},"92":{"start":{"line":130,"column":8},"end":{"line":130,"column":25}},"93":{"start":{"line":133,"column":0},"end":{"line":133,"column":32}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":9,"column":4},"end":{"line":9,"column":5}},"loc":{"start":{"line":9,"column":43},"end":{"line":51,"column":5}},"line":9},"1":{"name":"(anonymous_1)","decl":{"start":{"line":14,"column":23},"end":{"line":14,"column":24}},"loc":{"start":{"line":14,"column":28},"end":{"line":16,"column":9}},"line":14},"2":{"name":"(anonymous_2)","decl":{"start":{"line":15,"column":31},"end":{"line":15,"column":32}},"loc":{"start":{"line":15,"column":43},"end":{"line":15,"column":66}},"line":15},"3":{"name":"(anonymous_3)","decl":{"start":{"line":20,"column":21},"end":{"line":20,"column":22}},"loc":{"start":{"line":20,"column":33},"end":{"line":38,"column":9}},"line":20},"4":{"name":"(anonymous_4)","decl":{"start":{"line":29,"column":53},"end":{"line":29,"column":54}},"loc":{"start":{"line":29,"column":63},"end":{"line":29,"column":82}},"line":29},"5":{"name":"(anonymous_5)","decl":{"start":{"line":41,"column":45},"end":{"line":41,"column":46}},"loc":{"start":{"line":41,"column":55},"end":{"line":41,"column":91}},"line":41},"6":{"name":"(anonymous_6)","decl":{"start":{"line":52,"column":4},"end":{"line":52,"column":5}},"loc":{"start":{"line":52,"column":42},"end":{"line":66,"column":5}},"line":52},"7":{"name":"(anonymous_7)","decl":{"start":{"line":67,"column":4},"end":{"line":67,"column":5}},"loc":{"start":{"line":67,"column":38},"end":{"line":73,"column":5}},"line":67},"8":{"name":"(anonymous_8)","decl":{"start":{"line":68,"column":44},"end":{"line":68,"column":45}},"loc":{"start":{"line":68,"column":49},"end":{"line":68,"column":67}},"line":68},"9":{"name":"(anonymous_9)","decl":{"start":{"line":74,"column":4},"end":{"line":74,"column":5}},"loc":{"start":{"line":74,"column":44},"end":{"line":88,"column":5}},"line":74},"10":{"name":"(anonymous_10)","decl":{"start":{"line":89,"column":4},"end":{"line":89,"column":5}},"loc":{"start":{"line":89,"column":37},"end":{"line":106,"column":5}},"line":89},"11":{"name":"(anonymous_11)","decl":{"start":{"line":98,"column":33},"end":{"line":98,"column":34}},"loc":{"start":{"line":98,"column":41},"end":{"line":98,"column":61}},"line":98},"12":{"name":"(anonymous_12)","decl":{"start":{"line":99,"column":34},"end":{"line":99,"column":35}},"loc":{"start":{"line":99,"column":42},"end":{"line":99,"column":62}},"line":99},"13":{"name":"(anonymous_13)","decl":{"start":{"line":101,"column":40},"end":{"line":101,"column":41}},"loc":{"start":{"line":101,"column":45},"end":{"line":101,"column":67}},"line":101},"14":{"name":"(anonymous_14)","decl":{"start":{"line":107,"column":4},"end":{"line":107,"column":5}},"loc":{"start":{"line":107,"column":38},"end":{"line":123,"column":5}},"line":107},"15":{"name":"(anonymous_15)","decl":{"start":{"line":116,"column":33},"end":{"line":116,"column":34}},"loc":{"start":{"line":116,"column":41},"end":{"line":116,"column":61}},"line":116},"16":{"name":"(anonymous_16)","decl":{"start":{"line":117,"column":34},"end":{"line":117,"column":35}},"loc":{"start":{"line":117,"column":42},"end":{"line":117,"column":62}},"line":117},"17":{"name":"(anonymous_17)","decl":{"start":{"line":124,"column":4},"end":{"line":124,"column":5}},"loc":{"start":{"line":124,"column":33},"end":{"line":131,"column":5}},"line":124}},"branchMap":{"0":{"loc":{"start":{"line":10,"column":8},"end":{"line":12,"column":9}},"type":"if","locations":[{"start":{"line":10,"column":8},"end":{"line":12,"column":9}},{"start":{"line":10,"column":8},"end":{"line":12,"column":9}}],"line":10},"1":{"loc":{"start":{"line":21,"column":12},"end":{"line":37,"column":13}},"type":"switch","locations":[{"start":{"line":22,"column":16},"end":{"line":22,"column":47}},{"start":{"line":23,"column":16},"end":{"line":24,"column":26}},{"start":{"line":25,"column":16},"end":{"line":27,"column":26}},{"start":{"line":28,"column":16},"end":{"line":36,"column":17}}],"line":21},"2":{"loc":{"start":{"line":30,"column":20},"end":{"line":35,"column":21}},"type":"if","locations":[{"start":{"line":30,"column":20},"end":{"line":35,"column":21}},{"start":{"line":30,"column":20},"end":{"line":35,"column":21}}],"line":30},"3":{"loc":{"start":{"line":42,"column":12},"end":{"line":47,"column":13}},"type":"if","locations":[{"start":{"line":42,"column":12},"end":{"line":47,"column":13}},{"start":{"line":42,"column":12},"end":{"line":47,"column":13}}],"line":42},"4":{"loc":{"start":{"line":54,"column":8},"end":{"line":56,"column":9}},"type":"if","locations":[{"start":{"line":54,"column":8},"end":{"line":56,"column":9}},{"start":{"line":54,"column":8},"end":{"line":56,"column":9}}],"line":54},"5":{"loc":{"start":{"line":61,"column":12},"end":{"line":63,"column":13}},"type":"if","locations":[{"start":{"line":61,"column":12},"end":{"line":63,"column":13}},{"start":{"line":61,"column":12},"end":{"line":63,"column":13}}],"line":61},"6":{"loc":{"start":{"line":69,"column":8},"end":{"line":71,"column":9}},"type":"if","locations":[{"start":{"line":69,"column":8},"end":{"line":71,"column":9}},{"start":{"line":69,"column":8},"end":{"line":71,"column":9}}],"line":69},"7":{"loc":{"start":{"line":75,"column":8},"end":{"line":77,"column":9}},"type":"if","locations":[{"start":{"line":75,"column":8},"end":{"line":77,"column":9}},{"start":{"line":75,"column":8},"end":{"line":77,"column":9}}],"line":75},"8":{"loc":{"start":{"line":78,"column":8},"end":{"line":80,"column":9}},"type":"if","locations":[{"start":{"line":78,"column":8},"end":{"line":80,"column":9}},{"start":{"line":78,"column":8},"end":{"line":80,"column":9}}],"line":78},"9":{"loc":{"start":{"line":81,"column":8},"end":{"line":83,"column":9}},"type":"if","locations":[{"start":{"line":81,"column":8},"end":{"line":83,"column":9}},{"start":{"line":81,"column":8},"end":{"line":83,"column":9}}],"line":81},"10":{"loc":{"start":{"line":84,"column":8},"end":{"line":86,"column":9}},"type":"if","locations":[{"start":{"line":84,"column":8},"end":{"line":86,"column":9}},{"start":{"line":84,"column":8},"end":{"line":86,"column":9}}],"line":84},"11":{"loc":{"start":{"line":102,"column":8},"end":{"line":104,"column":9}},"type":"if","locations":[{"start":{"line":102,"column":8},"end":{"line":104,"column":9}},{"start":{"line":102,"column":8},"end":{"line":104,"column":9}}],"line":102},"12":{"loc":{"start":{"line":118,"column":12},"end":{"line":120,"column":13}},"type":"if","locations":[{"start":{"line":118,"column":12},"end":{"line":120,"column":13}},{"start":{"line":118,"column":12},"end":{"line":120,"column":13}}],"line":118},"13":{"loc":{"start":{"line":126,"column":12},"end":{"line":128,"column":13}},"type":"if","locations":[{"start":{"line":126,"column":12},"end":{"line":128,"column":13}},{"start":{"line":126,"column":12},"end":{"line":128,"column":13}}],"line":126}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":24,"7":0,"8":24,"9":24,"10":30,"11":39,"12":24,"13":24,"14":24,"15":53,"16":0,"17":32,"18":32,"19":21,"20":35,"21":21,"22":6,"23":15,"24":24,"25":24,"26":15,"27":18,"28":15,"29":9,"30":6,"31":18,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":334,"44":668,"45":334,"46":0,"47":334,"48":12,"49":2,"50":12,"51":2,"52":10,"53":0,"54":10,"55":0,"56":10,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":1},"f":{"0":24,"1":30,"2":39,"3":53,"4":35,"5":18,"6":0,"7":334,"8":668,"9":12,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0},"b":{"0":[0,24],"1":[0,0,32,21],"2":[6,15],"3":[9,6],"4":[0,0],"5":[0,0],"6":[0,334],"7":[2,10],"8":[2,10],"9":[0,10],"10":[0,10],"11":[0,0],"12":[0,0],"13":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/state-utils.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/state-utils.ts"],"names":[],"mappings":"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","sourcesContent":["import { Card } from './card/card';\nimport { CardList } from './state/card-list';\nimport { CardTarget, PlayerType, SlotType } from './actions/play-card-action';\nimport { CardType } from './card/card-types';\nimport { GameError } from '../game-error';\nimport { GameMessage } from '../game-message';\nimport { State } from './state/state';\nimport { Player } from './state/player';\nimport { PokemonCardList } from './state/pokemon-card-list';\nimport { EnergyMap } from './prompts/choose-energy-prompt';\n\nexport class StateUtils {\n  public static checkEnoughEnergy(energy: EnergyMap[], cost: CardType[]): boolean {\n    if (cost.length === 0) {\n      return true;\n    }\n\n    const provides: CardType[] = [];\n    energy.forEach(e => {\n      e.provides.forEach(cardType => provides.push(cardType));\n    });\n\n    let colorless = 0;\n    let rainbow = 0;\n\n    // First remove from array cards with specific energy types\n    cost.forEach(costType => {\n      switch (costType) {\n        case CardType.ANY:\n        case CardType.NONE:\n          break;\n        case CardType.COLORLESS:\n          colorless += 1;\n          break;\n        default: {\n          const index = provides.findIndex(energy => energy === costType);\n          if (index !== -1) {\n            provides.splice(index, 1);\n          } else {\n            rainbow += 1;\n          }\n        }\n      }\n    });\n\n    // Check if we have enough rainbow energies\n    for (let i = 0; i < rainbow; i++) {\n      const index = provides.findIndex(energy => energy === CardType.ANY);\n      if (index !== -1) {\n        provides.splice(index, 1);\n      } else {\n        return false;\n      }\n    }\n\n    // Rest cards can be used to pay for colorless energies\n    return provides.length >= colorless;\n  }\n\n  public static checkExactEnergy(energy: EnergyMap[], cost: CardType[]): boolean {\n    let enough = StateUtils.checkEnoughEnergy(energy, cost);\n    if (!enough) {\n      return false;\n    }\n\n    for (let i = 0; i < energy.length; i++) {\n      const tempCards = energy.slice();\n      tempCards.splice(i, 1);\n      enough = StateUtils.checkEnoughEnergy(tempCards, cost);\n      if (enough) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  public static getOpponent(state: State, player: Player): Player {\n    const opponent = state.players.find(p => p.id !== player.id);\n    if (opponent === undefined) {\n      throw new GameError(GameMessage.INVALID_GAME_STATE);\n    }\n    return opponent;\n  }\n\n  public static getTarget(state: State, player: Player, target: CardTarget): PokemonCardList {\n    if (target.player === PlayerType.TOP_PLAYER) {\n      player = StateUtils.getOpponent(state, player);\n    }\n    if (target.slot === SlotType.ACTIVE) {\n      return player.active;\n    }\n    if (target.slot !== SlotType.BENCH) {\n      throw new GameError(GameMessage.INVALID_TARGET);\n    }\n    if (player.bench[target.index] === undefined) {\n      throw new GameError(GameMessage.INVALID_TARGET);\n    }\n    return player.bench[target.index];\n  }\n\n  public static findCardList(state: State, card: Card): CardList {\n    const cardLists: CardList[] = [];\n    for (const player of state.players) {\n      cardLists.push(player.active);\n      cardLists.push(player.deck);\n      cardLists.push(player.discard);\n      cardLists.push(player.hand);\n      cardLists.push(player.stadium);\n      cardLists.push(player.supporter);\n      player.bench.forEach(item => cardLists.push(item));\n      player.prizes.forEach(item => cardLists.push(item));\n    }\n    const cardList = cardLists.find(c => c.cards.includes(card));\n    if (cardList === undefined) {\n      throw new GameError(GameMessage.INVALID_GAME_STATE);\n    }\n    return cardList;\n  }\n\n  public static findOwner(state: State, cardList: CardList): Player {\n    for (const player of state.players) {\n      const cardLists: CardList[] = [];\n      cardLists.push(player.active);\n      cardLists.push(player.deck);\n      cardLists.push(player.discard);\n      cardLists.push(player.hand);\n      cardLists.push(player.stadium);\n      cardLists.push(player.supporter);\n      player.bench.forEach(item => cardLists.push(item));\n      player.prizes.forEach(item => cardLists.push(item));\n      if (cardLists.includes(cardList)) {\n        return player;\n      }\n    }\n    throw new GameError(GameMessage.INVALID_GAME_STATE);\n  }\n\n  public static getStadiumCard(state: State): Card | undefined {\n    for (const player of state.players) {\n      if (player.stadium.cards.length > 0) {\n        return player.stadium.cards[0];\n      }\n    }\n    return undefined;\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"dd775910e2c4773348d6b7036783a547ed8e1313","contentHash":"08cfe6dd854dbec25241c3fca28409a346a0168611ddc82af2146aa6bc626d8d"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/actions/play-card-action.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/actions/play-card-action.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":72}},"2":{"start":{"line":5,"column":0},"end":{"line":9,"column":65}},"3":{"start":{"line":6,"column":4},"end":{"line":6,"column":46}},"4":{"start":{"line":7,"column":4},"end":{"line":7,"column":60}},"5":{"start":{"line":8,"column":4},"end":{"line":8,"column":66}},"6":{"start":{"line":11,"column":0},"end":{"line":17,"column":59}},"7":{"start":{"line":12,"column":4},"end":{"line":12,"column":46}},"8":{"start":{"line":13,"column":4},"end":{"line":13,"column":48}},"9":{"start":{"line":14,"column":4},"end":{"line":14,"column":46}},"10":{"start":{"line":15,"column":4},"end":{"line":15,"column":44}},"11":{"start":{"line":16,"column":4},"end":{"line":16,"column":50}},"12":{"start":{"line":20,"column":8},"end":{"line":20,"column":21}},"13":{"start":{"line":21,"column":8},"end":{"line":21,"column":35}},"14":{"start":{"line":22,"column":8},"end":{"line":22,"column":29}},"15":{"start":{"line":23,"column":8},"end":{"line":23,"column":39}},"16":{"start":{"line":26,"column":0},"end":{"line":26,"column":40}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":1},"end":{"line":5,"column":2}},"loc":{"start":{"line":5,"column":23},"end":{"line":9,"column":1}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":11,"column":1},"end":{"line":11,"column":2}},"loc":{"start":{"line":11,"column":21},"end":{"line":17,"column":1}},"line":11},"2":{"name":"(anonymous_2)","decl":{"start":{"line":19,"column":4},"end":{"line":19,"column":5}},"loc":{"start":{"line":19,"column":39},"end":{"line":24,"column":5}},"line":19}},"branchMap":{"0":{"loc":{"start":{"line":9,"column":16},"end":{"line":9,"column":63}},"type":"binary-expr","locations":[{"start":{"line":9,"column":16},"end":{"line":9,"column":34}},{"start":{"line":9,"column":39},"end":{"line":9,"column":62}}],"line":9},"1":{"loc":{"start":{"line":17,"column":14},"end":{"line":17,"column":57}},"type":"binary-expr","locations":[{"start":{"line":17,"column":14},"end":{"line":17,"column":30}},{"start":{"line":17,"column":35},"end":{"line":17,"column":56}}],"line":17}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":0,"13":0,"14":0,"15":0,"16":1},"f":{"0":1,"1":1,"2":0},"b":{"0":[1,1],"1":[1,1]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/actions/play-card-action.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/actions/play-card-action.ts"],"names":[],"mappings":";;;AAEA,IAAY,UAIX;AAJD,WAAY,UAAU;IACpB,yCAAG,CAAA;IACH,uDAAU,CAAA;IACV,6DAAa,CAAA;AACf,CAAC,EAJW,UAAU,GAAV,kBAAU,KAAV,kBAAU,QAIrB;AAED,IAAY,QAMX;AAND,WAAY,QAAQ;IAClB,yCAAK,CAAA;IACL,2CAAM,CAAA;IACN,yCAAK,CAAA;IACL,uCAAI,CAAA;IACJ,6CAAO,CAAA;AACT,CAAC,EANW,QAAQ,GAAR,gBAAQ,KAAR,gBAAQ,QAMnB;AAQD,MAAa,cAAc;IAIzB,YACS,EAAU,EACV,SAAiB,EACjB,MAAkB;QAFlB,OAAE,GAAF,EAAE,CAAQ;QACV,cAAS,GAAT,SAAS,CAAQ;QACjB,WAAM,GAAN,MAAM,CAAY;QALlB,SAAI,GAAW,kBAAkB,CAAC;IAMxC,CAAC;CAEL;AAVD,wCAUC","sourcesContent":["import { Action } from './action';\n\nexport enum PlayerType {\n  ANY,\n  TOP_PLAYER,\n  BOTTOM_PLAYER\n}\n\nexport enum SlotType {\n  BOARD,\n  ACTIVE,\n  BENCH,\n  HAND,\n  DISCARD\n}\n\nexport interface CardTarget {\n  player: PlayerType;\n  slot: SlotType;\n  index: number;\n}\n\nexport class PlayCardAction implements Action {\n\n  readonly type: string = 'PLAY_CARD_ACTION';\n\n  constructor(\n    public id: number,\n    public handIndex: number,\n    public target: CardTarget\n  ) {}\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"815eafaa30e7244dfafc1d2743785e4eb45b9b61","contentHash":"6e36a4b5073e4d1c43b3cd157d445e6856ba12d584d4d483fcdb3def082ef7c6"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/choose-pokemon-prompt.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/choose-pokemon-prompt.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":71}},"2":{"start":{"line":4,"column":17},"end":{"line":4,"column":36}},"3":{"start":{"line":5,"column":27},"end":{"line":5,"column":65}},"4":{"start":{"line":6,"column":21},"end":{"line":6,"column":48}},"5":{"start":{"line":7,"column":23},"end":{"line":7,"column":52}},"6":{"start":{"line":8,"column":22},"end":{"line":8,"column":47}},"7":{"start":{"line":9,"column":0},"end":{"line":9,"column":51}},"8":{"start":{"line":12,"column":8},"end":{"line":12,"column":24}},"9":{"start":{"line":13,"column":8},"end":{"line":13,"column":31}},"10":{"start":{"line":14,"column":8},"end":{"line":14,"column":37}},"11":{"start":{"line":15,"column":8},"end":{"line":15,"column":27}},"12":{"start":{"line":16,"column":8},"end":{"line":16,"column":52}},"13":{"start":{"line":18,"column":8},"end":{"line":23,"column":20}},"14":{"start":{"line":26,"column":8},"end":{"line":28,"column":9}},"15":{"start":{"line":27,"column":12},"end":{"line":27,"column":26}},"16":{"start":{"line":29,"column":23},"end":{"line":29,"column":70}},"17":{"start":{"line":29,"column":47},"end":{"line":29,"column":69}},"18":{"start":{"line":30,"column":25},"end":{"line":30,"column":72}},"19":{"start":{"line":30,"column":49},"end":{"line":30,"column":71}},"20":{"start":{"line":31,"column":8},"end":{"line":33,"column":9}},"21":{"start":{"line":32,"column":12},"end":{"line":32,"column":95}},"22":{"start":{"line":34,"column":8},"end":{"line":37,"column":11}},"23":{"start":{"line":35,"column":22},"end":{"line":35,"column":103}},"24":{"start":{"line":36,"column":12},"end":{"line":36,"column":105}},"25":{"start":{"line":40,"column":8},"end":{"line":42,"column":9}},"26":{"start":{"line":41,"column":12},"end":{"line":41,"column":44}},"27":{"start":{"line":43,"column":8},"end":{"line":45,"column":9}},"28":{"start":{"line":44,"column":12},"end":{"line":44,"column":25}},"29":{"start":{"line":46,"column":8},"end":{"line":48,"column":9}},"30":{"start":{"line":46,"column":36},"end":{"line":46,"column":63}},"31":{"start":{"line":47,"column":12},"end":{"line":47,"column":25}},"32":{"start":{"line":49,"column":23},"end":{"line":49,"column":70}},"33":{"start":{"line":49,"column":47},"end":{"line":49,"column":69}},"34":{"start":{"line":50,"column":8},"end":{"line":52,"column":9}},"35":{"start":{"line":51,"column":12},"end":{"line":51,"column":25}},"36":{"start":{"line":53,"column":24},"end":{"line":53,"column":107}},"37":{"start":{"line":53,"column":54},"end":{"line":53,"column":106}},"38":{"start":{"line":54,"column":8},"end":{"line":56,"column":9}},"39":{"start":{"line":54,"column":29},"end":{"line":54,"column":48}},"40":{"start":{"line":55,"column":12},"end":{"line":55,"column":25}},"41":{"start":{"line":57,"column":8},"end":{"line":57,"column":20}},"42":{"start":{"line":60,"column":0},"end":{"line":60,"column":50}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":11,"column":4},"end":{"line":11,"column":5}},"loc":{"start":{"line":11,"column":63},"end":{"line":24,"column":5}},"line":11},"1":{"name":"(anonymous_1)","decl":{"start":{"line":25,"column":4},"end":{"line":25,"column":5}},"loc":{"start":{"line":25,"column":26},"end":{"line":38,"column":5}},"line":25},"2":{"name":"(anonymous_2)","decl":{"start":{"line":29,"column":42},"end":{"line":29,"column":43}},"loc":{"start":{"line":29,"column":47},"end":{"line":29,"column":69}},"line":29},"3":{"name":"(anonymous_3)","decl":{"start":{"line":30,"column":44},"end":{"line":30,"column":45}},"loc":{"start":{"line":30,"column":49},"end":{"line":30,"column":71}},"line":30},"4":{"name":"(anonymous_4)","decl":{"start":{"line":34,"column":26},"end":{"line":34,"column":27}},"loc":{"start":{"line":34,"column":36},"end":{"line":37,"column":9}},"line":34},"5":{"name":"(anonymous_5)","decl":{"start":{"line":39,"column":4},"end":{"line":39,"column":5}},"loc":{"start":{"line":39,"column":28},"end":{"line":58,"column":5}},"line":39},"6":{"name":"(anonymous_6)","decl":{"start":{"line":46,"column":24},"end":{"line":46,"column":25}},"loc":{"start":{"line":46,"column":36},"end":{"line":46,"column":63}},"line":46},"7":{"name":"(anonymous_7)","decl":{"start":{"line":49,"column":42},"end":{"line":49,"column":43}},"loc":{"start":{"line":49,"column":47},"end":{"line":49,"column":69}},"line":49},"8":{"name":"(anonymous_8)","decl":{"start":{"line":53,"column":49},"end":{"line":53,"column":50}},"loc":{"start":{"line":53,"column":54},"end":{"line":53,"column":106}},"line":53},"9":{"name":"(anonymous_9)","decl":{"start":{"line":54,"column":24},"end":{"line":54,"column":25}},"loc":{"start":{"line":54,"column":29},"end":{"line":54,"column":48}},"line":54}},"branchMap":{"0":{"loc":{"start":{"line":26,"column":8},"end":{"line":28,"column":9}},"type":"if","locations":[{"start":{"line":26,"column":8},"end":{"line":28,"column":9}},{"start":{"line":26,"column":8},"end":{"line":28,"column":9}}],"line":26},"1":{"loc":{"start":{"line":31,"column":8},"end":{"line":33,"column":9}},"type":"if","locations":[{"start":{"line":31,"column":8},"end":{"line":33,"column":9}},{"start":{"line":31,"column":8},"end":{"line":33,"column":9}}],"line":31},"2":{"loc":{"start":{"line":31,"column":12},"end":{"line":31,"column":58}},"type":"binary-expr","locations":[{"start":{"line":31,"column":12},"end":{"line":31,"column":32}},{"start":{"line":31,"column":36},"end":{"line":31,"column":58}}],"line":31},"3":{"loc":{"start":{"line":35,"column":22},"end":{"line":35,"column":103}},"type":"cond-expr","locations":[{"start":{"line":35,"column":86},"end":{"line":35,"column":92}},{"start":{"line":35,"column":95},"end":{"line":35,"column":103}}],"line":35},"4":{"loc":{"start":{"line":36,"column":19},"end":{"line":36,"column":104}},"type":"cond-expr","locations":[{"start":{"line":36,"column":72},"end":{"line":36,"column":80}},{"start":{"line":36,"column":83},"end":{"line":36,"column":104}}],"line":36},"5":{"loc":{"start":{"line":40,"column":8},"end":{"line":42,"column":9}},"type":"if","locations":[{"start":{"line":40,"column":8},"end":{"line":42,"column":9}},{"start":{"line":40,"column":8},"end":{"line":42,"column":9}}],"line":40},"6":{"loc":{"start":{"line":43,"column":8},"end":{"line":45,"column":9}},"type":"if","locations":[{"start":{"line":43,"column":8},"end":{"line":45,"column":9}},{"start":{"line":43,"column":8},"end":{"line":45,"column":9}}],"line":43},"7":{"loc":{"start":{"line":43,"column":12},"end":{"line":43,"column":80}},"type":"binary-expr","locations":[{"start":{"line":43,"column":12},"end":{"line":43,"column":44}},{"start":{"line":43,"column":48},"end":{"line":43,"column":80}}],"line":43},"8":{"loc":{"start":{"line":46,"column":8},"end":{"line":48,"column":9}},"type":"if","locations":[{"start":{"line":46,"column":8},"end":{"line":48,"column":9}},{"start":{"line":46,"column":8},"end":{"line":48,"column":9}}],"line":46},"9":{"loc":{"start":{"line":50,"column":8},"end":{"line":52,"column":9}},"type":"if","locations":[{"start":{"line":50,"column":8},"end":{"line":52,"column":9}},{"start":{"line":50,"column":8},"end":{"line":52,"column":9}}],"line":50},"10":{"loc":{"start":{"line":54,"column":8},"end":{"line":56,"column":9}},"type":"if","locations":[{"start":{"line":54,"column":8},"end":{"line":56,"column":9}},{"start":{"line":54,"column":8},"end":{"line":56,"column":9}}],"line":54}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":7,"9":7,"10":7,"11":7,"12":7,"13":7,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":1},"f":{"0":7,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/choose-pokemon-prompt.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/choose-pokemon-prompt.ts"],"names":[],"mappings":"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","sourcesContent":["import { Prompt } from './prompt';\nimport { PlayerType, SlotType, CardTarget } from '../actions/play-card-action';\nimport { PokemonCardList } from '../state/pokemon-card-list';\nimport { State } from '../state/state';\nimport { GameError } from '../../game-error';\nimport { GameMessage } from '../../game-message';\nimport { StateUtils } from '../state-utils';\n\nexport const ChoosePokemonPromptType = 'Choose pokemon';\n\nexport interface ChoosePokemonOptions {\n  min: number;\n  max: number;\n  allowCancel: boolean;\n  blocked: CardTarget[];\n}\n\nexport class ChoosePokemonPrompt extends Prompt<PokemonCardList[]> {\n\n  readonly type: string = ChoosePokemonPromptType;\n\n  public options: ChoosePokemonOptions;\n\n  constructor(\n    playerId: number,\n    public message: GameMessage,\n    public playerType: PlayerType,\n    public slots: SlotType[],\n    options?: Partial<ChoosePokemonOptions>\n  ) {\n    super(playerId);\n\n    // Default options\n    this.options = Object.assign({}, {\n      min: 1,\n      max: 1,\n      allowCancel: true,\n      blocked: []\n    }, options);\n  }\n\n  public decode(result: CardTarget[] | null, state: State): PokemonCardList[] | null {\n    if (result === null) {\n      return result;  // operation cancelled\n    }\n    const player = state.players.find(p => p.id === this.playerId);\n    const opponent = state.players.find(p => p.id !== this.playerId);\n    if (player === undefined || opponent === undefined) {\n      throw new GameError(GameMessage.INVALID_PROMPT_RESULT);\n    }\n    return result.map(target => {\n      const p = target.player === PlayerType.BOTTOM_PLAYER ? player : opponent;\n      return target.slot === SlotType.ACTIVE ? p.active : p.bench[target.index];\n    });\n  }\n\n  public validate(result: PokemonCardList[] | null, state: State): boolean {\n    if (result === null) {\n      return this.options.allowCancel;\n    }\n    if (result.length < this.options.min || result.length > this.options.max) {\n      return false;\n    }\n    if (result.some(cardList => cardList.cards.length === 0)) {\n      return false;\n    }\n    const player = state.players.find(p => p.id === this.playerId);\n    if (player === undefined) {\n      return false;\n    }\n    const blocked = this.options.blocked.map(b => StateUtils.getTarget(state, player, b));\n    if (result.some(r => blocked.includes(r))) {\n      return false;\n    }\n    return true;\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"847cec9836e672b49d91f12b3044a78509b3fba5","contentHash":"d95c54c46bea5cf6ba7920fcd3857baae9a8dee16c206b198af9fea19fa74dbd"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/choose-prize-prompt.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/choose-prize-prompt.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":67}},"2":{"start":{"line":4,"column":17},"end":{"line":4,"column":36}},"3":{"start":{"line":5,"column":21},"end":{"line":5,"column":48}},"4":{"start":{"line":6,"column":23},"end":{"line":6,"column":52}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":47}},"6":{"start":{"line":10,"column":8},"end":{"line":10,"column":24}},"7":{"start":{"line":11,"column":8},"end":{"line":11,"column":31}},"8":{"start":{"line":12,"column":8},"end":{"line":12,"column":50}},"9":{"start":{"line":14,"column":8},"end":{"line":17,"column":20}},"10":{"start":{"line":20,"column":8},"end":{"line":22,"column":9}},"11":{"start":{"line":21,"column":12},"end":{"line":21,"column":26}},"12":{"start":{"line":23,"column":23},"end":{"line":23,"column":70}},"13":{"start":{"line":23,"column":47},"end":{"line":23,"column":69}},"14":{"start":{"line":24,"column":8},"end":{"line":26,"column":9}},"15":{"start":{"line":25,"column":12},"end":{"line":25,"column":95}},"16":{"start":{"line":27,"column":23},"end":{"line":27,"column":68}},"17":{"start":{"line":27,"column":49},"end":{"line":27,"column":67}},"18":{"start":{"line":28,"column":8},"end":{"line":28,"column":50}},"19":{"start":{"line":28,"column":35},"end":{"line":28,"column":48}},"20":{"start":{"line":31,"column":8},"end":{"line":33,"column":9}},"21":{"start":{"line":32,"column":12},"end":{"line":32,"column":44}},"22":{"start":{"line":34,"column":8},"end":{"line":36,"column":9}},"23":{"start":{"line":35,"column":12},"end":{"line":35,"column":25}},"24":{"start":{"line":37,"column":30},"end":{"line":39,"column":10}},"25":{"start":{"line":38,"column":12},"end":{"line":38,"column":47}},"26":{"start":{"line":40,"column":8},"end":{"line":42,"column":9}},"27":{"start":{"line":41,"column":12},"end":{"line":41,"column":25}},"28":{"start":{"line":43,"column":25},"end":{"line":43,"column":63}},"29":{"start":{"line":43,"column":42},"end":{"line":43,"column":62}},"30":{"start":{"line":44,"column":8},"end":{"line":46,"column":9}},"31":{"start":{"line":45,"column":12},"end":{"line":45,"column":25}},"32":{"start":{"line":47,"column":8},"end":{"line":47,"column":20}},"33":{"start":{"line":50,"column":0},"end":{"line":50,"column":46}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":9,"column":4},"end":{"line":9,"column":5}},"loc":{"start":{"line":9,"column":44},"end":{"line":18,"column":5}},"line":9},"1":{"name":"(anonymous_1)","decl":{"start":{"line":19,"column":4},"end":{"line":19,"column":5}},"loc":{"start":{"line":19,"column":26},"end":{"line":29,"column":5}},"line":19},"2":{"name":"(anonymous_2)","decl":{"start":{"line":23,"column":42},"end":{"line":23,"column":43}},"loc":{"start":{"line":23,"column":47},"end":{"line":23,"column":69}},"line":23},"3":{"name":"(anonymous_3)","decl":{"start":{"line":27,"column":44},"end":{"line":27,"column":45}},"loc":{"start":{"line":27,"column":49},"end":{"line":27,"column":67}},"line":27},"4":{"name":"(anonymous_4)","decl":{"start":{"line":28,"column":26},"end":{"line":28,"column":27}},"loc":{"start":{"line":28,"column":35},"end":{"line":28,"column":48}},"line":28},"5":{"name":"(anonymous_5)","decl":{"start":{"line":30,"column":4},"end":{"line":30,"column":5}},"loc":{"start":{"line":30,"column":21},"end":{"line":48,"column":5}},"line":30},"6":{"name":"(anonymous_6)","decl":{"start":{"line":37,"column":42},"end":{"line":37,"column":43}},"loc":{"start":{"line":37,"column":56},"end":{"line":39,"column":9}},"line":37},"7":{"name":"(anonymous_7)","decl":{"start":{"line":43,"column":37},"end":{"line":43,"column":38}},"loc":{"start":{"line":43,"column":42},"end":{"line":43,"column":62}},"line":43}},"branchMap":{"0":{"loc":{"start":{"line":20,"column":8},"end":{"line":22,"column":9}},"type":"if","locations":[{"start":{"line":20,"column":8},"end":{"line":22,"column":9}},{"start":{"line":20,"column":8},"end":{"line":22,"column":9}}],"line":20},"1":{"loc":{"start":{"line":24,"column":8},"end":{"line":26,"column":9}},"type":"if","locations":[{"start":{"line":24,"column":8},"end":{"line":26,"column":9}},{"start":{"line":24,"column":8},"end":{"line":26,"column":9}}],"line":24},"2":{"loc":{"start":{"line":31,"column":8},"end":{"line":33,"column":9}},"type":"if","locations":[{"start":{"line":31,"column":8},"end":{"line":33,"column":9}},{"start":{"line":31,"column":8},"end":{"line":33,"column":9}}],"line":31},"3":{"loc":{"start":{"line":34,"column":8},"end":{"line":36,"column":9}},"type":"if","locations":[{"start":{"line":34,"column":8},"end":{"line":36,"column":9}},{"start":{"line":34,"column":8},"end":{"line":36,"column":9}}],"line":34},"4":{"loc":{"start":{"line":40,"column":8},"end":{"line":42,"column":9}},"type":"if","locations":[{"start":{"line":40,"column":8},"end":{"line":42,"column":9}},{"start":{"line":40,"column":8},"end":{"line":42,"column":9}}],"line":40},"5":{"loc":{"start":{"line":44,"column":8},"end":{"line":46,"column":9}},"type":"if","locations":[{"start":{"line":44,"column":8},"end":{"line":46,"column":9}},{"start":{"line":44,"column":8},"end":{"line":46,"column":9}}],"line":44}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/choose-prize-prompt.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/choose-prize-prompt.ts"],"names":[],"mappings":";;;AACA,qCAAkC;AAElC,iDAA6C;AAC7C,qDAAiD;AAEpC,QAAA,qBAAqB,GAAG,cAAc,CAAC;AAOpD,MAAa,iBAAkB,SAAQ,eAAkB;IAMvD,YACE,QAAgB,EACT,OAAoB,EAC3B,OAAqC;QAErC,KAAK,CAAC,QAAQ,CAAC,CAAC;QAHT,YAAO,GAAP,OAAO,CAAa;QANpB,SAAI,GAAW,6BAAqB,CAAC;QAW5C,kBAAkB;QAClB,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE;YAC/B,KAAK,EAAE,CAAC;YACR,WAAW,EAAE,KAAK;SACnB,EAAE,OAAO,CAAC,CAAC;IACd,CAAC;IAEM,MAAM,CAAC,MAAuB,EAAE,KAAY;QACjD,IAAI,MAAM,KAAK,IAAI,EAAE;YACnB,OAAO,MAAM,CAAC;SACf;QACD,MAAM,MAAM,GAAG,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,KAAK,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC/D,IAAI,MAAM,KAAK,SAAS,EAAE;YACxB,MAAM,IAAI,sBAAS,CAAC,0BAAW,CAAC,qBAAqB,CAAC,CAAC;SACxD;QACD,MAAM,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;QAC7D,OAAO,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC;IAC5C,CAAC;IAEM,QAAQ,CAAC,MAAyB;QACvC,IAAI,MAAM,KAAK,IAAI,EAAE;YACnB,OAAO,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC;SACjC;QACD,IAAI,MAAM,CAAC,MAAM,KAAK,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE;YACxC,OAAO,KAAK,CAAC;SACd;QACD,MAAM,aAAa,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,KAAK,EAAE,EAAE;YAC7C,OAAO,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,KAAK,CAAC;QACrC,CAAC,CAAC,CAAC;QACH,IAAI,aAAa,EAAE;YACjB,OAAO,KAAK,CAAC;SACd;QACD,MAAM,QAAQ,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC;QACxD,IAAI,QAAQ,EAAE;YACZ,OAAO,KAAK,CAAC;SACd;QACD,OAAO,IAAI,CAAC;IACd,CAAC;CAEF;AApDD,8CAoDC","sourcesContent":["import { CardList } from '../state/card-list';\nimport { Prompt } from './prompt';\nimport { State } from '../state/state';\nimport { GameError } from '../../game-error';\nimport { GameMessage } from '../../game-message';\n\nexport const ChoosePrizePromptType = 'Choose prize';\n\nexport interface ChoosePrizeOptions {\n  count: number;\n  allowCancel: boolean;\n}\n\nexport class ChoosePrizePrompt extends Prompt<CardList[]> {\n\n  readonly type: string = ChoosePrizePromptType;\n\n  public options: ChoosePrizeOptions;\n\n  constructor(\n    playerId: number,\n    public message: GameMessage,\n    options?: Partial<ChoosePrizeOptions>\n  ) {\n    super(playerId);\n\n    // Default options\n    this.options = Object.assign({}, {\n      count: 1,\n      allowCancel: false\n    }, options);\n  }\n\n  public decode(result: number[] | null, state: State): CardList[] | null {\n    if (result === null) {\n      return result;\n    }\n    const player = state.players.find(p => p.id === this.playerId);\n    if (player === undefined) {\n      throw new GameError(GameMessage.INVALID_PROMPT_RESULT);\n    }\n    const prizes = player.prizes.filter(p => p.cards.length > 0);\n    return result.map(index => prizes[index]);\n  }\n\n  public validate(result: CardList[] | null): boolean {\n    if (result === null) {\n      return this.options.allowCancel;\n    }\n    if (result.length !== this.options.count) {\n      return false;\n    }\n    const hasDuplicates = result.some((p, index) => {\n      return result.indexOf(p) !== index;\n    });\n    if (hasDuplicates) {\n      return false;\n    }\n    const hasEmpty = result.some(p => p.cards.length === 0);\n    if (hasEmpty) {\n      return false;\n    }\n    return true;\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"ac2fa32b0c07c82c06608e351f5b611f6d8af87a","contentHash":"98a9dd79ac74973d6ea4c873a9cd6e81c1a7053188daec268b2235c555f8a8fb"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/coin-flip-prompt.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/coin-flip-prompt.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":32}},"2":{"start":{"line":4,"column":17},"end":{"line":4,"column":36}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":24}},"4":{"start":{"line":8,"column":8},"end":{"line":8,"column":31}},"5":{"start":{"line":9,"column":8},"end":{"line":9,"column":32}},"6":{"start":{"line":12,"column":0},"end":{"line":12,"column":40}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":4},"end":{"line":6,"column":5}},"loc":{"start":{"line":6,"column":35},"end":{"line":10,"column":5}},"line":6}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":0,"4":0,"5":0,"6":1},"f":{"0":0},"b":{},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/coin-flip-prompt.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/coin-flip-prompt.ts"],"names":[],"mappings":";;;AAAA,qCAAkC;AAGlC,MAAa,cAAe,SAAQ,eAAe;IAIjD,YAAY,QAAgB,EAAS,OAAoB;QACvD,KAAK,CAAC,QAAQ,CAAC,CAAC;QADmB,YAAO,GAAP,OAAO,CAAa;QAFhD,SAAI,GAAW,WAAW,CAAC;IAIpC,CAAC;CAEF;AARD,wCAQC","sourcesContent":["import { Prompt } from './prompt';\nimport { GameMessage } from '../../game-message';\n\nexport class CoinFlipPrompt extends Prompt<boolean> {\n\n  readonly type: string = 'Coin flip';\n\n  constructor(playerId: number, public message: GameMessage) {\n    super(playerId);\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"c17ce8a09e2fe91c8d5d22282bb634e746b149c0","contentHash":"1671e154ef9a9b73f54851d2457ab990ff2f493654b6c8843006ca89b8317dc9"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/confirm-prompt.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/confirm-prompt.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":31}},"2":{"start":{"line":4,"column":17},"end":{"line":4,"column":36}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":24}},"4":{"start":{"line":8,"column":8},"end":{"line":8,"column":31}},"5":{"start":{"line":9,"column":8},"end":{"line":9,"column":30}},"6":{"start":{"line":12,"column":0},"end":{"line":12,"column":38}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":4},"end":{"line":6,"column":5}},"loc":{"start":{"line":6,"column":35},"end":{"line":10,"column":5}},"line":6}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":0,"4":0,"5":0,"6":1},"f":{"0":0},"b":{},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/confirm-prompt.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/confirm-prompt.ts"],"names":[],"mappings":";;;AAAA,qCAAkC;AAGlC,MAAa,aAAc,SAAQ,eAAe;IAIhD,YAAY,QAAgB,EAAS,OAAoB;QACvD,KAAK,CAAC,QAAQ,CAAC,CAAC;QADmB,YAAO,GAAP,OAAO,CAAa;QAFhD,SAAI,GAAW,SAAS,CAAC;IAIlC,CAAC;CAEF;AARD,sCAQC","sourcesContent":["import { Prompt } from './prompt';\nimport { GameMessage } from '../../game-message';\n\nexport class ConfirmPrompt extends Prompt<boolean> {\n\n  readonly type: string = 'Confirm';\n\n  constructor(playerId: number, public message: GameMessage) {\n    super(playerId);\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"8dcb029d1f840054e95d2ee3cd4c600800636965","contentHash":"90c3342af94a3809f9cf83578c5f1be0dc10214c82b4bccd024ad4fee1de5fce"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/invite-player-prompt.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/invite-player-prompt.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":36}},"2":{"start":{"line":4,"column":17},"end":{"line":4,"column":36}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":24}},"4":{"start":{"line":8,"column":8},"end":{"line":8,"column":31}},"5":{"start":{"line":9,"column":8},"end":{"line":9,"column":36}},"6":{"start":{"line":12,"column":0},"end":{"line":12,"column":48}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":4},"end":{"line":6,"column":5}},"loc":{"start":{"line":6,"column":35},"end":{"line":10,"column":5}},"line":6}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":0,"4":0,"5":0,"6":1},"f":{"0":0},"b":{},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/invite-player-prompt.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/invite-player-prompt.ts"],"names":[],"mappings":";;;AAAA,qCAAkC;AAGlC,MAAa,kBAAmB,SAAQ,eAAgB;IAItD,YAAY,QAAgB,EAAS,OAAoB;QACvD,KAAK,CAAC,QAAQ,CAAC,CAAC;QADmB,YAAO,GAAP,OAAO,CAAa;QAFhD,SAAI,GAAW,eAAe,CAAC;IAIxC,CAAC;CAEF;AARD,gDAQC","sourcesContent":["import { Prompt } from './prompt';\nimport { GameMessage } from '../../game-message';\n\nexport class InvitePlayerPrompt extends Prompt<string[]> {\n\n  readonly type: string = 'Invite player';\n\n  constructor(playerId: number, public message: GameMessage) {\n    super(playerId);\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"810a6b15415075955674b2a3e85a7e0fd25b3411","contentHash":"4a53ef501638295808a4480de2fc07a12a5053f733e4e2cc49fc6027f6aaff61"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/move-damage-prompt.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/move-damage-prompt.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":65}},"2":{"start":{"line":4,"column":21},"end":{"line":4,"column":48}},"3":{"start":{"line":5,"column":23},"end":{"line":5,"column":52}},"4":{"start":{"line":6,"column":17},"end":{"line":6,"column":36}},"5":{"start":{"line":7,"column":27},"end":{"line":7,"column":65}},"6":{"start":{"line":8,"column":22},"end":{"line":8,"column":47}},"7":{"start":{"line":9,"column":0},"end":{"line":9,"column":45}},"8":{"start":{"line":12,"column":8},"end":{"line":12,"column":24}},"9":{"start":{"line":13,"column":8},"end":{"line":13,"column":31}},"10":{"start":{"line":14,"column":8},"end":{"line":14,"column":37}},"11":{"start":{"line":15,"column":8},"end":{"line":15,"column":27}},"12":{"start":{"line":16,"column":8},"end":{"line":16,"column":49}},"13":{"start":{"line":17,"column":8},"end":{"line":17,"column":49}},"14":{"start":{"line":19,"column":8},"end":{"line":25,"column":20}},"15":{"start":{"line":28,"column":8},"end":{"line":30,"column":9}},"16":{"start":{"line":29,"column":12},"end":{"line":29,"column":26}},"17":{"start":{"line":31,"column":23},"end":{"line":31,"column":70}},"18":{"start":{"line":31,"column":47},"end":{"line":31,"column":69}},"19":{"start":{"line":32,"column":8},"end":{"line":34,"column":9}},"20":{"start":{"line":33,"column":12},"end":{"line":33,"column":95}},"21":{"start":{"line":35,"column":8},"end":{"line":35,"column":22}},"22":{"start":{"line":38,"column":8},"end":{"line":40,"column":9}},"23":{"start":{"line":39,"column":12},"end":{"line":39,"column":44}},"24":{"start":{"line":41,"column":8},"end":{"line":43,"column":9}},"25":{"start":{"line":42,"column":12},"end":{"line":42,"column":25}},"26":{"start":{"line":44,"column":8},"end":{"line":46,"column":9}},"27":{"start":{"line":45,"column":12},"end":{"line":45,"column":25}},"28":{"start":{"line":47,"column":23},"end":{"line":47,"column":70}},"29":{"start":{"line":47,"column":47},"end":{"line":47,"column":69}},"30":{"start":{"line":48,"column":8},"end":{"line":50,"column":9}},"31":{"start":{"line":49,"column":12},"end":{"line":49,"column":25}},"32":{"start":{"line":51,"column":28},"end":{"line":51,"column":115}},"33":{"start":{"line":51,"column":62},"end":{"line":51,"column":114}},"34":{"start":{"line":52,"column":26},"end":{"line":52,"column":111}},"35":{"start":{"line":52,"column":58},"end":{"line":52,"column":110}},"36":{"start":{"line":53,"column":8},"end":{"line":62,"column":9}},"37":{"start":{"line":54,"column":25},"end":{"line":54,"column":82}},"38":{"start":{"line":55,"column":12},"end":{"line":57,"column":13}},"39":{"start":{"line":56,"column":16},"end":{"line":56,"column":29}},"40":{"start":{"line":58,"column":23},"end":{"line":58,"column":78}},"41":{"start":{"line":59,"column":12},"end":{"line":61,"column":13}},"42":{"start":{"line":60,"column":16},"end":{"line":60,"column":29}},"43":{"start":{"line":63,"column":8},"end":{"line":68,"column":9}},"44":{"start":{"line":64,"column":12},"end":{"line":67,"column":13}},"45":{"start":{"line":64,"column":33},"end":{"line":64,"column":66}},"46":{"start":{"line":65,"column":36},"end":{"line":65,"column":67}},"47":{"start":{"line":66,"column":16},"end":{"line":66,"column":29}},"48":{"start":{"line":69,"column":8},"end":{"line":72,"column":9}},"49":{"start":{"line":69,"column":29},"end":{"line":69,"column":62}},"50":{"start":{"line":70,"column":32},"end":{"line":70,"column":63}},"51":{"start":{"line":71,"column":12},"end":{"line":71,"column":25}},"52":{"start":{"line":73,"column":8},"end":{"line":73,"column":20}},"53":{"start":{"line":76,"column":0},"end":{"line":76,"column":44}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":11,"column":4},"end":{"line":11,"column":5}},"loc":{"start":{"line":11,"column":81},"end":{"line":26,"column":5}},"line":11},"1":{"name":"(anonymous_1)","decl":{"start":{"line":27,"column":4},"end":{"line":27,"column":5}},"loc":{"start":{"line":27,"column":26},"end":{"line":36,"column":5}},"line":27},"2":{"name":"(anonymous_2)","decl":{"start":{"line":31,"column":42},"end":{"line":31,"column":43}},"loc":{"start":{"line":31,"column":47},"end":{"line":31,"column":69}},"line":31},"3":{"name":"(anonymous_3)","decl":{"start":{"line":37,"column":4},"end":{"line":37,"column":5}},"loc":{"start":{"line":37,"column":28},"end":{"line":74,"column":5}},"line":37},"4":{"name":"(anonymous_4)","decl":{"start":{"line":47,"column":42},"end":{"line":47,"column":43}},"loc":{"start":{"line":47,"column":47},"end":{"line":47,"column":69}},"line":47},"5":{"name":"(anonymous_5)","decl":{"start":{"line":51,"column":57},"end":{"line":51,"column":58}},"loc":{"start":{"line":51,"column":62},"end":{"line":51,"column":114}},"line":51},"6":{"name":"(anonymous_6)","decl":{"start":{"line":52,"column":53},"end":{"line":52,"column":54}},"loc":{"start":{"line":52,"column":58},"end":{"line":52,"column":110}},"line":52},"7":{"name":"(anonymous_7)","decl":{"start":{"line":64,"column":28},"end":{"line":64,"column":29}},"loc":{"start":{"line":64,"column":33},"end":{"line":64,"column":66}},"line":64},"8":{"name":"(anonymous_8)","decl":{"start":{"line":65,"column":31},"end":{"line":65,"column":32}},"loc":{"start":{"line":65,"column":36},"end":{"line":65,"column":67}},"line":65},"9":{"name":"(anonymous_9)","decl":{"start":{"line":69,"column":24},"end":{"line":69,"column":25}},"loc":{"start":{"line":69,"column":29},"end":{"line":69,"column":62}},"line":69},"10":{"name":"(anonymous_10)","decl":{"start":{"line":70,"column":27},"end":{"line":70,"column":28}},"loc":{"start":{"line":70,"column":32},"end":{"line":70,"column":63}},"line":70}},"branchMap":{"0":{"loc":{"start":{"line":28,"column":8},"end":{"line":30,"column":9}},"type":"if","locations":[{"start":{"line":28,"column":8},"end":{"line":30,"column":9}},{"start":{"line":28,"column":8},"end":{"line":30,"column":9}}],"line":28},"1":{"loc":{"start":{"line":32,"column":8},"end":{"line":34,"column":9}},"type":"if","locations":[{"start":{"line":32,"column":8},"end":{"line":34,"column":9}},{"start":{"line":32,"column":8},"end":{"line":34,"column":9}}],"line":32},"2":{"loc":{"start":{"line":38,"column":8},"end":{"line":40,"column":9}},"type":"if","locations":[{"start":{"line":38,"column":8},"end":{"line":40,"column":9}},{"start":{"line":38,"column":8},"end":{"line":40,"column":9}}],"line":38},"3":{"loc":{"start":{"line":41,"column":8},"end":{"line":43,"column":9}},"type":"if","locations":[{"start":{"line":41,"column":8},"end":{"line":43,"column":9}},{"start":{"line":41,"column":8},"end":{"line":43,"column":9}}],"line":41},"4":{"loc":{"start":{"line":44,"column":8},"end":{"line":46,"column":9}},"type":"if","locations":[{"start":{"line":44,"column":8},"end":{"line":46,"column":9}},{"start":{"line":44,"column":8},"end":{"line":46,"column":9}}],"line":44},"5":{"loc":{"start":{"line":44,"column":12},"end":{"line":44,"column":78}},"type":"binary-expr","locations":[{"start":{"line":44,"column":12},"end":{"line":44,"column":42}},{"start":{"line":44,"column":46},"end":{"line":44,"column":78}}],"line":44},"6":{"loc":{"start":{"line":48,"column":8},"end":{"line":50,"column":9}},"type":"if","locations":[{"start":{"line":48,"column":8},"end":{"line":50,"column":9}},{"start":{"line":48,"column":8},"end":{"line":50,"column":9}}],"line":48},"7":{"loc":{"start":{"line":55,"column":12},"end":{"line":57,"column":13}},"type":"if","locations":[{"start":{"line":55,"column":12},"end":{"line":57,"column":13}},{"start":{"line":55,"column":12},"end":{"line":57,"column":13}}],"line":55},"8":{"loc":{"start":{"line":55,"column":16},"end":{"line":55,"column":64}},"type":"binary-expr","locations":[{"start":{"line":55,"column":16},"end":{"line":55,"column":34}},{"start":{"line":55,"column":38},"end":{"line":55,"column":64}}],"line":55},"9":{"loc":{"start":{"line":59,"column":12},"end":{"line":61,"column":13}},"type":"if","locations":[{"start":{"line":59,"column":12},"end":{"line":61,"column":13}},{"start":{"line":59,"column":12},"end":{"line":61,"column":13}}],"line":59},"10":{"loc":{"start":{"line":59,"column":16},"end":{"line":59,"column":58}},"type":"binary-expr","locations":[{"start":{"line":59,"column":16},"end":{"line":59,"column":32}},{"start":{"line":59,"column":36},"end":{"line":59,"column":58}}],"line":59},"11":{"loc":{"start":{"line":63,"column":8},"end":{"line":68,"column":9}},"type":"if","locations":[{"start":{"line":63,"column":8},"end":{"line":68,"column":9}},{"start":{"line":63,"column":8},"end":{"line":68,"column":9}}],"line":63},"12":{"loc":{"start":{"line":64,"column":12},"end":{"line":67,"column":13}},"type":"if","locations":[{"start":{"line":64,"column":12},"end":{"line":67,"column":13}},{"start":{"line":64,"column":12},"end":{"line":67,"column":13}}],"line":64},"13":{"loc":{"start":{"line":64,"column":16},"end":{"line":65,"column":68}},"type":"binary-expr","locations":[{"start":{"line":64,"column":16},"end":{"line":64,"column":67}},{"start":{"line":65,"column":19},"end":{"line":65,"column":68}}],"line":64},"14":{"loc":{"start":{"line":69,"column":8},"end":{"line":72,"column":9}},"type":"if","locations":[{"start":{"line":69,"column":8},"end":{"line":72,"column":9}},{"start":{"line":69,"column":8},"end":{"line":72,"column":9}}],"line":69},"15":{"loc":{"start":{"line":69,"column":12},"end":{"line":70,"column":64}},"type":"binary-expr","locations":[{"start":{"line":69,"column":12},"end":{"line":69,"column":63}},{"start":{"line":70,"column":15},"end":{"line":70,"column":64}}],"line":69}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":5,"9":5,"10":5,"11":5,"12":5,"13":5,"14":5,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":1},"f":{"0":5,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/move-damage-prompt.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/move-damage-prompt.ts"],"names":[],"mappings":"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","sourcesContent":["import { GameError } from '../../game-error';\nimport { GameMessage } from '../../game-message';\nimport { Prompt } from './prompt';\nimport { PlayerType, SlotType, CardTarget } from '../actions/play-card-action';\nimport { State } from '../state/state';\nimport { StateUtils } from '../state-utils';\n\nexport const MoveDamagePromptType = 'Move damage';\n\nexport type MoveDamageResultType = DamageTransfer[];\n\nexport interface DamageTransfer {\n  from: CardTarget;\n  to: CardTarget;\n}\n\nexport interface DamageMap {\n  target: CardTarget;\n  damage: number;\n}\n\nexport interface MoveDamageOptions {\n  allowCancel: boolean;\n  min: number;\n  max: number | undefined;\n  blockedFrom: CardTarget[];\n  blockedTo: CardTarget[];\n}\n\nexport class MoveDamagePrompt extends Prompt<DamageTransfer[]> {\n\n  readonly type: string = MoveDamagePromptType;\n\n  public options: MoveDamageOptions;\n\n  constructor(\n    playerId: number,\n    public message: GameMessage,\n    public playerType: PlayerType,\n    public slots: SlotType[],\n    public maxAllowedDamage: DamageMap[],\n    options?: Partial<MoveDamageOptions>\n  ) {\n    super(playerId);\n\n    // Default options\n    this.options = Object.assign({}, {\n      allowCancel: true,\n      min: 0,\n      max: undefined,\n      blockedFrom: [],\n      blockedTo: []\n    }, options);\n  }\n\n  public decode(result: MoveDamageResultType | null, state: State): DamageTransfer[] | null {\n    if (result === null) {\n      return result;  // operation cancelled\n    }\n    const player = state.players.find(p => p.id === this.playerId);\n    if (player === undefined) {\n      throw new GameError(GameMessage.INVALID_PROMPT_RESULT);\n    }\n    return result;\n  }\n\n  public validate(result: DamageTransfer[] | null, state: State): boolean {\n    if (result === null) {\n      return this.options.allowCancel;  // operation cancelled\n    }\n\n    if (result.length < this.options.min) {\n      return false;\n    }\n\n    if (this.options.max !== undefined && result.length > this.options.max) {\n      return false;\n    }\n\n    const player = state.players.find(p => p.id === this.playerId);\n    if (player === undefined) {\n      return false;\n    }\n    const blockedFrom = this.options.blockedFrom.map(b => StateUtils.getTarget(state, player, b));\n    const blockedTo = this.options.blockedTo.map(b => StateUtils.getTarget(state, player, b));\n\n    for (const r of result) {\n      const from = StateUtils.getTarget(state, player, r.from);\n      if (from === undefined || blockedFrom.includes(from)) {\n        return false;\n      }\n      const to = StateUtils.getTarget(state, player, r.to);\n      if (to === undefined || blockedTo.includes(to)) {\n        return false;\n      }\n    }\n\n    if (this.playerType !== PlayerType.ANY) {\n      if (result.some(r => r.from.player !== this.playerType)\n        || result.some(r => r.to.player !== this.playerType)) {\n        return false;\n      }\n    }\n\n    if (result.some(r => !this.slots.includes(r.from.slot))\n      || result.some(r => !this.slots.includes(r.to.slot))) {\n      return false;\n    }\n\n    return true;\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"36529393f5faba3c0dd599126d50f30454de97d2","contentHash":"130a3e423c464937bf09c9da4dfbd45e7b1b4c2ab8445fc44cad972d5c36633c"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/move-energy-prompt.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/move-energy-prompt.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":65}},"2":{"start":{"line":4,"column":21},"end":{"line":4,"column":48}},"3":{"start":{"line":5,"column":23},"end":{"line":5,"column":52}},"4":{"start":{"line":6,"column":17},"end":{"line":6,"column":36}},"5":{"start":{"line":7,"column":22},"end":{"line":7,"column":47}},"6":{"start":{"line":8,"column":0},"end":{"line":8,"column":45}},"7":{"start":{"line":11,"column":8},"end":{"line":11,"column":24}},"8":{"start":{"line":12,"column":8},"end":{"line":12,"column":31}},"9":{"start":{"line":13,"column":8},"end":{"line":13,"column":37}},"10":{"start":{"line":14,"column":8},"end":{"line":14,"column":27}},"11":{"start":{"line":15,"column":8},"end":{"line":15,"column":29}},"12":{"start":{"line":16,"column":8},"end":{"line":16,"column":49}},"13":{"start":{"line":18,"column":8},"end":{"line":25,"column":20}},"14":{"start":{"line":28,"column":8},"end":{"line":30,"column":9}},"15":{"start":{"line":29,"column":12},"end":{"line":29,"column":26}},"16":{"start":{"line":31,"column":23},"end":{"line":31,"column":70}},"17":{"start":{"line":31,"column":47},"end":{"line":31,"column":69}},"18":{"start":{"line":32,"column":8},"end":{"line":34,"column":9}},"19":{"start":{"line":33,"column":12},"end":{"line":33,"column":95}},"20":{"start":{"line":35,"column":26},"end":{"line":35,"column":28}},"21":{"start":{"line":36,"column":8},"end":{"line":40,"column":11}},"22":{"start":{"line":37,"column":29},"end":{"line":37,"column":86}},"23":{"start":{"line":38,"column":25},"end":{"line":38,"column":48}},"24":{"start":{"line":39,"column":12},"end":{"line":39,"column":61}},"25":{"start":{"line":41,"column":8},"end":{"line":41,"column":25}},"26":{"start":{"line":44,"column":8},"end":{"line":46,"column":9}},"27":{"start":{"line":45,"column":12},"end":{"line":45,"column":44}},"28":{"start":{"line":47,"column":8},"end":{"line":47,"column":55}},"29":{"start":{"line":47,"column":33},"end":{"line":47,"column":53}},"30":{"start":{"line":50,"column":0},"end":{"line":50,"column":44}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":10,"column":4},"end":{"line":10,"column":5}},"loc":{"start":{"line":10,"column":71},"end":{"line":26,"column":5}},"line":10},"1":{"name":"(anonymous_1)","decl":{"start":{"line":27,"column":4},"end":{"line":27,"column":5}},"loc":{"start":{"line":27,"column":26},"end":{"line":42,"column":5}},"line":27},"2":{"name":"(anonymous_2)","decl":{"start":{"line":31,"column":42},"end":{"line":31,"column":43}},"loc":{"start":{"line":31,"column":47},"end":{"line":31,"column":69}},"line":31},"3":{"name":"(anonymous_3)","decl":{"start":{"line":36,"column":23},"end":{"line":36,"column":24}},"loc":{"start":{"line":36,"column":28},"end":{"line":40,"column":9}},"line":36},"4":{"name":"(anonymous_4)","decl":{"start":{"line":43,"column":4},"end":{"line":43,"column":5}},"loc":{"start":{"line":43,"column":21},"end":{"line":48,"column":5}},"line":43},"5":{"name":"(anonymous_5)","decl":{"start":{"line":47,"column":28},"end":{"line":47,"column":29}},"loc":{"start":{"line":47,"column":33},"end":{"line":47,"column":53}},"line":47}},"branchMap":{"0":{"loc":{"start":{"line":28,"column":8},"end":{"line":30,"column":9}},"type":"if","locations":[{"start":{"line":28,"column":8},"end":{"line":30,"column":9}},{"start":{"line":28,"column":8},"end":{"line":30,"column":9}}],"line":28},"1":{"loc":{"start":{"line":32,"column":8},"end":{"line":34,"column":9}},"type":"if","locations":[{"start":{"line":32,"column":8},"end":{"line":34,"column":9}},{"start":{"line":32,"column":8},"end":{"line":34,"column":9}}],"line":32},"2":{"loc":{"start":{"line":44,"column":8},"end":{"line":46,"column":9}},"type":"if","locations":[{"start":{"line":44,"column":8},"end":{"line":46,"column":9}},{"start":{"line":44,"column":8},"end":{"line":46,"column":9}}],"line":44}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":8,"8":8,"9":8,"10":8,"11":8,"12":8,"13":8,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":1},"f":{"0":8,"1":0,"2":0,"3":0,"4":0,"5":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/move-energy-prompt.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/move-energy-prompt.ts"],"names":[],"mappings":";;;AACA,iDAA6C;AAC7C,qDAAiD;AACjD,qCAAkC;AAGlC,gDAA4C;AAG/B,QAAA,oBAAoB,GAAG,aAAa,CAAC;AAmBlD,MAAa,gBAAiB,SAAQ,eAAsB;IAM1D,YACE,QAAgB,EACT,OAAoB,EACpB,UAAsB,EACtB,KAAiB,EACjB,MAAkB,EACzB,OAAoC;QAEpC,KAAK,CAAC,QAAQ,CAAC,CAAC;QANT,YAAO,GAAP,OAAO,CAAa;QACpB,eAAU,GAAV,UAAU,CAAY;QACtB,UAAK,GAAL,KAAK,CAAY;QACjB,WAAM,GAAN,MAAM,CAAY;QATlB,SAAI,GAAW,4BAAoB,CAAC;QAc3C,kBAAkB;QAClB,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE;YAC/B,WAAW,EAAE,IAAI;YACjB,GAAG,EAAE,CAAC;YACN,GAAG,EAAE,SAAS;YACd,WAAW,EAAE,EAAE;YACf,SAAS,EAAE,EAAE;YACb,UAAU,EAAE,EAAE;SACf,EAAE,OAAO,CAAC,CAAC;IACd,CAAC;IAEM,MAAM,CAAC,MAAmC,EAAE,KAAY;QAC7D,IAAI,MAAM,KAAK,IAAI,EAAE;YACnB,OAAO,MAAM,CAAC,CAAE,sBAAsB;SACvC;QACD,MAAM,MAAM,GAAG,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,KAAK,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC/D,IAAI,MAAM,KAAK,SAAS,EAAE;YACxB,MAAM,IAAI,sBAAS,CAAC,0BAAW,CAAC,qBAAqB,CAAC,CAAC;SACxD;QACD,MAAM,SAAS,GAAmB,EAAE,CAAC;QACrC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE;YACjB,MAAM,QAAQ,GAAG,wBAAU,CAAC,SAAS,CAAC,KAAK,EAAE,MAAM,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC;YAC7D,MAAM,IAAI,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;YACrC,SAAS,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC,IAAI,EAAE,EAAE,EAAE,CAAC,CAAC,EAAE,EAAE,IAAI,EAAE,CAAC,CAAC;QACnD,CAAC,CAAC,CAAC;QACH,OAAO,SAAS,CAAC;IACnB,CAAC;IAEM,QAAQ,CAAC,MAA6B;QAC3C,IAAI,MAAM,KAAK,IAAI,EAAE;YACnB,OAAO,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAE,sBAAsB;SACzD;QACD,OAAO,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,KAAK,SAAS,CAAC,CAAC;IACjD,CAAC;CAEF;AAnDD,4CAmDC","sourcesContent":["import { Card } from '../card/card';\nimport { GameError } from '../../game-error';\nimport { GameMessage } from '../../game-message';\nimport { Prompt } from './prompt';\nimport { PlayerType, SlotType, CardTarget } from '../actions/play-card-action';\nimport { State } from '../state/state';\nimport { StateUtils } from '../state-utils';\nimport { FilterType } from './choose-cards-prompt';\n\nexport const MoveEnergyPromptType = 'Move energy';\n\nexport type MoveEnergyResultType = {from: CardTarget, to: CardTarget, index: number}[];\n\nexport interface CardTransfer {\n  from: CardTarget;\n  to: CardTarget;\n  card: Card;\n}\n\nexport interface MoveEnergyOptions {\n  allowCancel: boolean;\n  min: number;\n  max: number | undefined;\n  blockedFrom: CardTarget[];\n  blockedTo: CardTarget[];\n  blockedMap: { source: CardTarget, blocked: number[] }[];\n}\n\nexport class MoveEnergyPrompt extends Prompt<CardTransfer[]> {\n\n  readonly type: string = MoveEnergyPromptType;\n\n  public options: MoveEnergyOptions;\n\n  constructor(\n    playerId: number,\n    public message: GameMessage,\n    public playerType: PlayerType,\n    public slots: SlotType[],\n    public filter: FilterType,\n    options?: Partial<MoveEnergyOptions>\n  ) {\n    super(playerId);\n\n    // Default options\n    this.options = Object.assign({}, {\n      allowCancel: true,\n      min: 0,\n      max: undefined,\n      blockedFrom: [],\n      blockedTo: [],\n      blockedMap: [],\n    }, options);\n  }\n\n  public decode(result: MoveEnergyResultType | null, state: State): CardTransfer[] | null {\n    if (result === null) {\n      return result;  // operation cancelled\n    }\n    const player = state.players.find(p => p.id === this.playerId);\n    if (player === undefined) {\n      throw new GameError(GameMessage.INVALID_PROMPT_RESULT);\n    }\n    const transfers: CardTransfer[] = [];\n    result.forEach(t => {\n      const cardList = StateUtils.getTarget(state, player, t.from);\n      const card = cardList.cards[t.index];\n      transfers.push({ from: t.from, to: t.to, card });\n    });\n    return transfers;\n  }\n\n  public validate(result: CardTransfer[] | null): boolean {\n    if (result === null) {\n      return this.options.allowCancel;  // operation cancelled\n    }\n    return result.every(r => r.card !== undefined);\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"a3cf03a6bfa8d90a7b7af12b0bba787cce791fbd","contentHash":"cf6552c8ff0e54b8571e99144e8fad7e96381e0a29c2d1b0f48d4a77b1cdae2e"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/order-cards-prompt.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/order-cards-prompt.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":65}},"2":{"start":{"line":4,"column":17},"end":{"line":4,"column":36}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":45}},"4":{"start":{"line":8,"column":8},"end":{"line":8,"column":24}},"5":{"start":{"line":9,"column":8},"end":{"line":9,"column":31}},"6":{"start":{"line":10,"column":8},"end":{"line":10,"column":27}},"7":{"start":{"line":11,"column":8},"end":{"line":11,"column":49}},"8":{"start":{"line":13,"column":8},"end":{"line":15,"column":20}},"9":{"start":{"line":18,"column":8},"end":{"line":20,"column":9}},"10":{"start":{"line":19,"column":12},"end":{"line":19,"column":44}},"11":{"start":{"line":21,"column":8},"end":{"line":23,"column":9}},"12":{"start":{"line":22,"column":12},"end":{"line":22,"column":25}},"13":{"start":{"line":24,"column":18},"end":{"line":24,"column":32}},"14":{"start":{"line":25,"column":8},"end":{"line":25,"column":17}},"15":{"start":{"line":26,"column":8},"end":{"line":30,"column":9}},"16":{"start":{"line":26,"column":21},"end":{"line":26,"column":22}},"17":{"start":{"line":27,"column":12},"end":{"line":29,"column":13}},"18":{"start":{"line":28,"column":16},"end":{"line":28,"column":29}},"19":{"start":{"line":31,"column":8},"end":{"line":31,"column":20}},"20":{"start":{"line":34,"column":0},"end":{"line":34,"column":44}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":7,"column":4},"end":{"line":7,"column":5}},"loc":{"start":{"line":7,"column":51},"end":{"line":16,"column":5}},"line":7},"1":{"name":"(anonymous_1)","decl":{"start":{"line":17,"column":4},"end":{"line":17,"column":5}},"loc":{"start":{"line":17,"column":21},"end":{"line":32,"column":5}},"line":17}},"branchMap":{"0":{"loc":{"start":{"line":18,"column":8},"end":{"line":20,"column":9}},"type":"if","locations":[{"start":{"line":18,"column":8},"end":{"line":20,"column":9}},{"start":{"line":18,"column":8},"end":{"line":20,"column":9}}],"line":18},"1":{"loc":{"start":{"line":21,"column":8},"end":{"line":23,"column":9}},"type":"if","locations":[{"start":{"line":21,"column":8},"end":{"line":23,"column":9}},{"start":{"line":21,"column":8},"end":{"line":23,"column":9}}],"line":21},"2":{"loc":{"start":{"line":27,"column":12},"end":{"line":29,"column":13}},"type":"if","locations":[{"start":{"line":27,"column":12},"end":{"line":29,"column":13}},{"start":{"line":27,"column":12},"end":{"line":29,"column":13}}],"line":27}},"s":{"0":1,"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":1},"f":{"0":0,"1":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/order-cards-prompt.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/order-cards-prompt.ts"],"names":[],"mappings":";;;AAEA,qCAAkC;AAErB,QAAA,oBAAoB,GAAG,aAAa,CAAC;AAMlD,MAAa,gBAAiB,SAAQ,eAAgB;IAMpD,YACE,QAAgB,EACT,OAAoB,EACpB,KAAe,EACtB,OAAoC;QAEpC,KAAK,CAAC,QAAQ,CAAC,CAAC;QAJT,YAAO,GAAP,OAAO,CAAa;QACpB,UAAK,GAAL,KAAK,CAAU;QAPf,SAAI,GAAW,4BAAoB,CAAC;QAY3C,kBAAkB;QAClB,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE;YAC/B,WAAW,EAAE,IAAI;SAClB,EAAE,OAAO,CAAC,CAAC;IACd,CAAC;IAEM,QAAQ,CAAC,MAAuB;QACrC,IAAI,MAAM,KAAK,IAAI,EAAE;YACnB,OAAO,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC;SACjC;QACD,IAAI,MAAM,CAAC,MAAM,KAAK,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,MAAM,EAAE;YAC7C,OAAO,KAAK,CAAC;SACd;QACD,MAAM,CAAC,GAAG,MAAM,CAAC,KAAK,EAAE,CAAC;QACzB,CAAC,CAAC,IAAI,EAAE,CAAC;QACT,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACjC,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,EAAE;gBACd,OAAO,KAAK,CAAC;aACd;SACF;QACD,OAAO,IAAI,CAAC;IACd,CAAC;CAEF;AArCD,4CAqCC","sourcesContent":["import { CardList } from '../state/card-list';\nimport { GameMessage } from '../../game-message';\nimport { Prompt } from './prompt';\n\nexport const OrderCardsPromptType = 'Order cards';\n\nexport interface OrderCardsOptions {\n  allowCancel: boolean;\n}\n\nexport class OrderCardsPrompt extends Prompt<number[]> {\n\n  readonly type: string = OrderCardsPromptType;\n  \n  public options: OrderCardsOptions;\n\n  constructor(\n    playerId: number,\n    public message: GameMessage,\n    public cards: CardList,\n    options?: Partial<OrderCardsOptions>\n  ) {\n    super(playerId);\n\n    // Default options\n    this.options = Object.assign({}, {\n      allowCancel: true\n    }, options);\n  }\n\n  public validate(result: number[] | null): boolean {\n    if (result === null) {\n      return this.options.allowCancel;\n    }\n    if (result.length !== this.cards.cards.length) {\n      return false;\n    }\n    const s = result.slice();\n    s.sort();\n    for (let i = 0; i < s.length; i++) {\n      if (s[i] !== i) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"5f178bcd585d93117edc39657db545af8eab3e64","contentHash":"bdd02af9bda8851ada8054e22d1597b1518f98ae32d3bea859c1d34a488db845"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/put-damage-prompt.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/put-damage-prompt.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":63}},"2":{"start":{"line":4,"column":17},"end":{"line":4,"column":36}},"3":{"start":{"line":5,"column":27},"end":{"line":5,"column":65}},"4":{"start":{"line":6,"column":22},"end":{"line":6,"column":47}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":43}},"6":{"start":{"line":10,"column":8},"end":{"line":10,"column":24}},"7":{"start":{"line":11,"column":8},"end":{"line":11,"column":31}},"8":{"start":{"line":12,"column":8},"end":{"line":12,"column":37}},"9":{"start":{"line":13,"column":8},"end":{"line":13,"column":27}},"10":{"start":{"line":14,"column":8},"end":{"line":14,"column":29}},"11":{"start":{"line":15,"column":8},"end":{"line":15,"column":49}},"12":{"start":{"line":16,"column":8},"end":{"line":16,"column":48}},"13":{"start":{"line":18,"column":8},"end":{"line":21,"column":20}},"14":{"start":{"line":24,"column":8},"end":{"line":24,"column":22}},"15":{"start":{"line":27,"column":8},"end":{"line":29,"column":9}},"16":{"start":{"line":28,"column":12},"end":{"line":28,"column":44}},"17":{"start":{"line":30,"column":21},"end":{"line":30,"column":22}},"18":{"start":{"line":31,"column":8},"end":{"line":31,"column":53}},"19":{"start":{"line":31,"column":30},"end":{"line":31,"column":49}},"20":{"start":{"line":32,"column":8},"end":{"line":34,"column":9}},"21":{"start":{"line":33,"column":12},"end":{"line":33,"column":25}},"22":{"start":{"line":35,"column":23},"end":{"line":35,"column":70}},"23":{"start":{"line":35,"column":47},"end":{"line":35,"column":69}},"24":{"start":{"line":36,"column":8},"end":{"line":38,"column":9}},"25":{"start":{"line":37,"column":12},"end":{"line":37,"column":25}},"26":{"start":{"line":39,"column":24},"end":{"line":39,"column":107}},"27":{"start":{"line":39,"column":54},"end":{"line":39,"column":106}},"28":{"start":{"line":40,"column":8},"end":{"line":45,"column":9}},"29":{"start":{"line":41,"column":27},"end":{"line":41,"column":86}},"30":{"start":{"line":42,"column":12},"end":{"line":44,"column":13}},"31":{"start":{"line":43,"column":16},"end":{"line":43,"column":29}},"32":{"start":{"line":46,"column":8},"end":{"line":50,"column":9}},"33":{"start":{"line":47,"column":12},"end":{"line":49,"column":13}},"34":{"start":{"line":47,"column":33},"end":{"line":47,"column":68}},"35":{"start":{"line":48,"column":16},"end":{"line":48,"column":29}},"36":{"start":{"line":51,"column":8},"end":{"line":53,"column":9}},"37":{"start":{"line":51,"column":29},"end":{"line":51,"column":64}},"38":{"start":{"line":52,"column":12},"end":{"line":52,"column":25}},"39":{"start":{"line":54,"column":8},"end":{"line":54,"column":20}},"40":{"start":{"line":57,"column":0},"end":{"line":57,"column":42}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":9,"column":4},"end":{"line":9,"column":5}},"loc":{"start":{"line":9,"column":89},"end":{"line":22,"column":5}},"line":9},"1":{"name":"(anonymous_1)","decl":{"start":{"line":23,"column":4},"end":{"line":23,"column":5}},"loc":{"start":{"line":23,"column":26},"end":{"line":25,"column":5}},"line":23},"2":{"name":"(anonymous_2)","decl":{"start":{"line":26,"column":4},"end":{"line":26,"column":5}},"loc":{"start":{"line":26,"column":28},"end":{"line":55,"column":5}},"line":26},"3":{"name":"(anonymous_3)","decl":{"start":{"line":31,"column":23},"end":{"line":31,"column":24}},"loc":{"start":{"line":31,"column":28},"end":{"line":31,"column":51}},"line":31},"4":{"name":"(anonymous_4)","decl":{"start":{"line":35,"column":42},"end":{"line":35,"column":43}},"loc":{"start":{"line":35,"column":47},"end":{"line":35,"column":69}},"line":35},"5":{"name":"(anonymous_5)","decl":{"start":{"line":39,"column":49},"end":{"line":39,"column":50}},"loc":{"start":{"line":39,"column":54},"end":{"line":39,"column":106}},"line":39},"6":{"name":"(anonymous_6)","decl":{"start":{"line":47,"column":28},"end":{"line":47,"column":29}},"loc":{"start":{"line":47,"column":33},"end":{"line":47,"column":68}},"line":47},"7":{"name":"(anonymous_7)","decl":{"start":{"line":51,"column":24},"end":{"line":51,"column":25}},"loc":{"start":{"line":51,"column":29},"end":{"line":51,"column":64}},"line":51}},"branchMap":{"0":{"loc":{"start":{"line":27,"column":8},"end":{"line":29,"column":9}},"type":"if","locations":[{"start":{"line":27,"column":8},"end":{"line":29,"column":9}},{"start":{"line":27,"column":8},"end":{"line":29,"column":9}}],"line":27},"1":{"loc":{"start":{"line":32,"column":8},"end":{"line":34,"column":9}},"type":"if","locations":[{"start":{"line":32,"column":8},"end":{"line":34,"column":9}},{"start":{"line":32,"column":8},"end":{"line":34,"column":9}}],"line":32},"2":{"loc":{"start":{"line":36,"column":8},"end":{"line":38,"column":9}},"type":"if","locations":[{"start":{"line":36,"column":8},"end":{"line":38,"column":9}},{"start":{"line":36,"column":8},"end":{"line":38,"column":9}}],"line":36},"3":{"loc":{"start":{"line":42,"column":12},"end":{"line":44,"column":13}},"type":"if","locations":[{"start":{"line":42,"column":12},"end":{"line":44,"column":13}},{"start":{"line":42,"column":12},"end":{"line":44,"column":13}}],"line":42},"4":{"loc":{"start":{"line":42,"column":16},"end":{"line":42,"column":64}},"type":"binary-expr","locations":[{"start":{"line":42,"column":16},"end":{"line":42,"column":36}},{"start":{"line":42,"column":40},"end":{"line":42,"column":64}}],"line":42},"5":{"loc":{"start":{"line":46,"column":8},"end":{"line":50,"column":9}},"type":"if","locations":[{"start":{"line":46,"column":8},"end":{"line":50,"column":9}},{"start":{"line":46,"column":8},"end":{"line":50,"column":9}}],"line":46},"6":{"loc":{"start":{"line":47,"column":12},"end":{"line":49,"column":13}},"type":"if","locations":[{"start":{"line":47,"column":12},"end":{"line":49,"column":13}},{"start":{"line":47,"column":12},"end":{"line":49,"column":13}}],"line":47},"7":{"loc":{"start":{"line":51,"column":8},"end":{"line":53,"column":9}},"type":"if","locations":[{"start":{"line":51,"column":8},"end":{"line":53,"column":9}},{"start":{"line":51,"column":8},"end":{"line":53,"column":9}}],"line":51}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":4,"7":4,"8":4,"9":4,"10":4,"11":4,"12":4,"13":4,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":1},"f":{"0":4,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/put-damage-prompt.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/put-damage-prompt.ts"],"names":[],"mappings":";;;AACA,qCAAkC;AAClC,kEAA+E;AAE/E,gDAA4C;AAG/B,QAAA,mBAAmB,GAAG,YAAY,CAAC;AAOhD,MAAa,eAAgB,SAAQ,eAAmB;IAMtD,YACE,QAAgB,EACT,OAAoB,EACpB,UAAsB,EACtB,KAAiB,EACjB,MAAc,EACd,gBAA6B,EACpC,OAAmC;QAEnC,KAAK,CAAC,QAAQ,CAAC,CAAC;QAPT,YAAO,GAAP,OAAO,CAAa;QACpB,eAAU,GAAV,UAAU,CAAY;QACtB,UAAK,GAAL,KAAK,CAAY;QACjB,WAAM,GAAN,MAAM,CAAQ;QACd,qBAAgB,GAAhB,gBAAgB,CAAa;QAV7B,SAAI,GAAW,2BAAmB,CAAC;QAe1C,kBAAkB;QAClB,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE;YAC/B,WAAW,EAAE,IAAI;YACjB,OAAO,EAAE,EAAE;SACZ,EAAE,OAAO,CAAC,CAAC;IACd,CAAC;IAEM,MAAM,CAAC,MAA0B,EAAE,KAAY;QACpD,OAAO,MAAM,CAAC;IAChB,CAAC;IAEM,QAAQ,CAAC,MAA0B,EAAE,KAAY;QACtD,IAAI,MAAM,KAAK,IAAI,EAAE;YACnB,OAAO,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAE,sBAAsB;SACzD;QAED,IAAI,MAAM,GAAG,CAAC,CAAC;QACf,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,GAAG,MAAM,IAAI,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;QAE7C,IAAI,IAAI,CAAC,MAAM,KAAK,MAAM,EAAE;YAC1B,OAAO,KAAK,CAAC;SACd;QAED,MAAM,MAAM,GAAG,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,KAAK,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC/D,IAAI,MAAM,KAAK,SAAS,EAAE;YACxB,OAAO,KAAK,CAAC;SACd;QACD,MAAM,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,wBAAU,CAAC,SAAS,CAAC,KAAK,EAAE,MAAM,EAAE,CAAC,CAAC,CAAC,CAAC;QAEtF,KAAK,MAAM,CAAC,IAAI,MAAM,EAAE;YACtB,MAAM,MAAM,GAAG,wBAAU,CAAC,SAAS,CAAC,KAAK,EAAE,MAAM,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC;YAC7D,IAAI,MAAM,KAAK,SAAS,IAAI,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE;gBACpD,OAAO,KAAK,CAAC;aACd;SACF;QAED,IAAI,IAAI,CAAC,UAAU,KAAK,6BAAU,CAAC,GAAG,EAAE;YACtC,IAAI,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,MAAM,KAAK,IAAI,CAAC,UAAU,CAAC,EAAE;gBACzD,OAAO,KAAK,CAAC;aACd;SACF;QAED,IAAI,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,EAAE;YACzD,OAAO,KAAK,CAAC;SACd;QAED,OAAO,IAAI,CAAC;IACd,CAAC;CAEF;AAlED,0CAkEC","sourcesContent":["import { GameMessage } from '../../game-message';\nimport { Prompt } from './prompt';\nimport { PlayerType, SlotType, CardTarget } from '../actions/play-card-action';\nimport { State } from '../state/state';\nimport { StateUtils } from '../state-utils';\nimport { DamageMap } from './move-damage-prompt';\n\nexport const PutDamagePromptType = 'Put damage';\n\nexport interface PutDamageOptions {\n  allowCancel: boolean;\n  blocked: CardTarget[];\n}\n\nexport class PutDamagePrompt extends Prompt<DamageMap[]> {\n\n  readonly type: string = PutDamagePromptType;\n\n  public options: PutDamageOptions;\n\n  constructor(\n    playerId: number,\n    public message: GameMessage,\n    public playerType: PlayerType,\n    public slots: SlotType[],\n    public damage: number,\n    public maxAllowedDamage: DamageMap[],\n    options?: Partial<PutDamageOptions>\n  ) {\n    super(playerId);\n\n    // Default options\n    this.options = Object.assign({}, {\n      allowCancel: true,\n      blocked: []\n    }, options);\n  }\n\n  public decode(result: DamageMap[] | null, state: State): DamageMap[] | null {\n    return result;\n  }\n\n  public validate(result: DamageMap[] | null, state: State): boolean {\n    if (result === null) {\n      return this.options.allowCancel;  // operation cancelled\n    }\n\n    let damage = 0;\n    result.forEach(r => { damage += r.damage; });\n\n    if (this.damage !== damage) {\n      return false;\n    }\n\n    const player = state.players.find(p => p.id === this.playerId);\n    if (player === undefined) {\n      return false;\n    }\n    const blocked = this.options.blocked.map(b => StateUtils.getTarget(state, player, b));\n\n    for (const r of result) {\n      const target = StateUtils.getTarget(state, player, r.target);\n      if (target === undefined || blocked.includes(target)) {\n        return false;\n      }\n    }\n\n    if (this.playerType !== PlayerType.ANY) {\n      if (result.some(r => r.target.player !== this.playerType)) {\n        return false;\n      }\n    }\n\n    if (result.some(r => !this.slots.includes(r.target.slot))) {\n      return false;\n    }\n\n    return true;\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"180696f9b7e0281d17130e8d43e265d8223292ca","contentHash":"07174bbe09a2dcf94cc9c500df49ef723b38ddfb0b2c347e7f2ce6219dbbeb6b"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/select-prompt.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/select-prompt.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":30}},"2":{"start":{"line":4,"column":17},"end":{"line":4,"column":36}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":24}},"4":{"start":{"line":8,"column":8},"end":{"line":8,"column":31}},"5":{"start":{"line":9,"column":8},"end":{"line":9,"column":29}},"6":{"start":{"line":10,"column":8},"end":{"line":10,"column":29}},"7":{"start":{"line":12,"column":8},"end":{"line":15,"column":20}},"8":{"start":{"line":18,"column":0},"end":{"line":18,"column":36}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":4},"end":{"line":6,"column":5}},"loc":{"start":{"line":6,"column":52},"end":{"line":16,"column":5}},"line":6}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":1},"f":{"0":0},"b":{},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/select-prompt.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/select-prompt.ts"],"names":[],"mappings":";;;AACA,qCAAkC;AAOlC,MAAa,YAAa,SAAQ,eAAc;IAM9C,YACE,QAAgB,EACT,OAAoB,EACpB,MAAgB,EACvB,OAAgC;QAEhC,KAAK,CAAC,QAAQ,CAAC,CAAC;QAJT,YAAO,GAAP,OAAO,CAAa;QACpB,WAAM,GAAN,MAAM,CAAU;QAPhB,SAAI,GAAW,QAAQ,CAAC;QAY/B,kBAAkB;QAClB,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE;YAC/B,WAAW,EAAE,IAAI;YACjB,YAAY,EAAE,CAAC;SAChB,EAAE,OAAO,CAAC,CAAC;IACd,CAAC;CAEF;AArBD,oCAqBC","sourcesContent":["import { GameMessage } from '../../game-message';\nimport { Prompt } from './prompt';\n\nexport interface SelectOptions {\n  allowCancel: boolean;\n  defaultValue: number;\n}\n\nexport class SelectPrompt extends Prompt<number> {\n\n  readonly type: string = 'Select';\n\n  public options: SelectOptions;\n\n  constructor(\n    playerId: number,\n    public message: GameMessage,\n    public values: string[],\n    options?: Partial<SelectOptions>\n  ) {\n    super(playerId);\n\n    // Default options\n    this.options = Object.assign({}, {\n      allowCancel: true,\n      defaultValue: 0,\n    }, options);\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"8de31e40c3be251c077cc56b067a016b076621e3","contentHash":"afb9178b1658907039539454eaa0ff1f571a9bee403c11612cdece733915f2e2"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/show-cards-prompt.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/show-cards-prompt.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":33}},"2":{"start":{"line":4,"column":17},"end":{"line":4,"column":36}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":24}},"4":{"start":{"line":8,"column":8},"end":{"line":8,"column":31}},"5":{"start":{"line":9,"column":8},"end":{"line":9,"column":27}},"6":{"start":{"line":10,"column":8},"end":{"line":10,"column":33}},"7":{"start":{"line":12,"column":8},"end":{"line":14,"column":20}},"8":{"start":{"line":17,"column":0},"end":{"line":17,"column":42}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":4},"end":{"line":6,"column":5}},"loc":{"start":{"line":6,"column":51},"end":{"line":15,"column":5}},"line":6}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":1},"f":{"0":0},"b":{},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/show-cards-prompt.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/show-cards-prompt.ts"],"names":[],"mappings":";;;AAEA,qCAAkC;AAMlC,MAAa,eAAgB,SAAQ,eAAY;IAM/C,YACE,QAAgB,EACT,OAAoB,EACpB,KAAa,EACpB,OAAmC;QAEnC,KAAK,CAAC,QAAQ,CAAC,CAAC;QAJT,YAAO,GAAP,OAAO,CAAa;QACpB,UAAK,GAAL,KAAK,CAAQ;QAPb,SAAI,GAAW,YAAY,CAAC;QAYnC,kBAAkB;QAClB,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE;YAC/B,WAAW,EAAE,KAAK;SACnB,EAAE,OAAO,CAAC,CAAC;IACd,CAAC;CAEF;AApBD,0CAoBC","sourcesContent":["import { Card } from '../card/card';\nimport { GameMessage } from '../../game-message';\nimport { Prompt } from './prompt';\n\nexport interface ShowCardsOptions {\n  allowCancel: boolean;\n}\n\nexport class ShowCardsPrompt extends Prompt<true> {\n\n  readonly type: string = 'Show cards';\n\n  public options: ShowCardsOptions;\n\n  constructor(\n    playerId: number,\n    public message: GameMessage,\n    public cards: Card[],\n    options?: Partial<ShowCardsOptions>\n  ) {\n    super(playerId);\n\n    // Default options\n    this.options = Object.assign({}, {\n      allowCancel: false\n    }, options);\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"4bda659835468db0acadde7611e74b1c457f8367","contentHash":"a33c8f6a130ecab1eda3a70dc1d6f29489d61d5bf7a7d0216b3183577249dc6c"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/shuffle-prompt.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/shuffle-prompt.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":35}},"2":{"start":{"line":4,"column":17},"end":{"line":4,"column":36}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":24}},"4":{"start":{"line":8,"column":8},"end":{"line":8,"column":35}},"5":{"start":{"line":11,"column":8},"end":{"line":13,"column":9}},"6":{"start":{"line":12,"column":12},"end":{"line":12,"column":25}},"7":{"start":{"line":14,"column":23},"end":{"line":14,"column":70}},"8":{"start":{"line":14,"column":47},"end":{"line":14,"column":69}},"9":{"start":{"line":15,"column":8},"end":{"line":17,"column":9}},"10":{"start":{"line":16,"column":12},"end":{"line":16,"column":25}},"11":{"start":{"line":18,"column":8},"end":{"line":20,"column":9}},"12":{"start":{"line":19,"column":12},"end":{"line":19,"column":25}},"13":{"start":{"line":21,"column":18},"end":{"line":21,"column":32}},"14":{"start":{"line":22,"column":8},"end":{"line":22,"column":17}},"15":{"start":{"line":23,"column":8},"end":{"line":27,"column":9}},"16":{"start":{"line":23,"column":21},"end":{"line":23,"column":22}},"17":{"start":{"line":24,"column":12},"end":{"line":26,"column":13}},"18":{"start":{"line":25,"column":16},"end":{"line":25,"column":29}},"19":{"start":{"line":28,"column":8},"end":{"line":28,"column":20}},"20":{"start":{"line":31,"column":0},"end":{"line":31,"column":46}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":4},"end":{"line":6,"column":5}},"loc":{"start":{"line":6,"column":26},"end":{"line":9,"column":5}},"line":6},"1":{"name":"(anonymous_1)","decl":{"start":{"line":10,"column":4},"end":{"line":10,"column":5}},"loc":{"start":{"line":10,"column":28},"end":{"line":29,"column":5}},"line":10},"2":{"name":"(anonymous_2)","decl":{"start":{"line":14,"column":42},"end":{"line":14,"column":43}},"loc":{"start":{"line":14,"column":47},"end":{"line":14,"column":69}},"line":14}},"branchMap":{"0":{"loc":{"start":{"line":11,"column":8},"end":{"line":13,"column":9}},"type":"if","locations":[{"start":{"line":11,"column":8},"end":{"line":13,"column":9}},{"start":{"line":11,"column":8},"end":{"line":13,"column":9}}],"line":11},"1":{"loc":{"start":{"line":15,"column":8},"end":{"line":17,"column":9}},"type":"if","locations":[{"start":{"line":15,"column":8},"end":{"line":17,"column":9}},{"start":{"line":15,"column":8},"end":{"line":17,"column":9}}],"line":15},"2":{"loc":{"start":{"line":18,"column":8},"end":{"line":20,"column":9}},"type":"if","locations":[{"start":{"line":18,"column":8},"end":{"line":20,"column":9}},{"start":{"line":18,"column":8},"end":{"line":20,"column":9}}],"line":18},"3":{"loc":{"start":{"line":24,"column":12},"end":{"line":26,"column":13}},"type":"if","locations":[{"start":{"line":24,"column":12},"end":{"line":26,"column":13}},{"start":{"line":24,"column":12},"end":{"line":26,"column":13}}],"line":24}},"s":{"0":1,"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":1},"f":{"0":0,"1":0,"2":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/shuffle-prompt.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/shuffle-prompt.ts"],"names":[],"mappings":";;;AAAA,qCAAkC;AAGlC,MAAa,iBAAkB,SAAQ,eAAgB;IAIrD,YAAY,QAAgB;QAC1B,KAAK,CAAC,QAAQ,CAAC,CAAC;QAHT,SAAI,GAAW,cAAc,CAAC;IAIvC,CAAC;IAEM,QAAQ,CAAC,MAAuB,EAAE,KAAY;QACnD,IAAI,MAAM,KAAK,IAAI,EAAE;YACnB,OAAO,KAAK,CAAC;SACd;QACD,MAAM,MAAM,GAAG,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,KAAK,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC/D,IAAI,MAAM,KAAK,SAAS,EAAE;YACxB,OAAO,KAAK,CAAC;SACd;QACD,IAAI,MAAM,CAAC,MAAM,KAAK,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE;YAC9C,OAAO,KAAK,CAAC;SACd;QACD,MAAM,CAAC,GAAG,MAAM,CAAC,KAAK,EAAE,CAAC;QACzB,CAAC,CAAC,IAAI,EAAE,CAAC;QACT,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACjC,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,EAAE;gBACd,OAAO,KAAK,CAAC;aACd;SACF;QACD,OAAO,IAAI,CAAC;IACd,CAAC;CAEF;AA7BD,8CA6BC","sourcesContent":["import { Prompt } from './prompt';\nimport { State } from '../state/state';\n\nexport class ShuffleDeckPrompt extends Prompt<number[]> {\n\n  readonly type: string = 'Shuffle deck';\n\n  constructor(playerId: number) {\n    super(playerId);\n  }\n\n  public validate(result: number[] | null, state: State): boolean {\n    if (result === null) {\n      return false;\n    }\n    const player = state.players.find(p => p.id === this.playerId);\n    if (player === undefined) {\n      return false;\n    }\n    if (result.length !== player.deck.cards.length) {\n      return false;\n    }\n    const s = result.slice();\n    s.sort();\n    for (let i = 0; i < s.length; i++) {\n      if (s[i] !== i) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"edbb2e9aa41248d9179866188d720ff763eda2a2","contentHash":"5004356c60aff79104d7baa4a3926b2ac815ce9219653f1cf2335e028826f899"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/shuffle-hand-prompt.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/shuffle-hand-prompt.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":35}},"2":{"start":{"line":4,"column":17},"end":{"line":4,"column":36}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":24}},"4":{"start":{"line":8,"column":8},"end":{"line":8,"column":35}},"5":{"start":{"line":11,"column":8},"end":{"line":13,"column":9}},"6":{"start":{"line":12,"column":12},"end":{"line":12,"column":25}},"7":{"start":{"line":14,"column":23},"end":{"line":14,"column":70}},"8":{"start":{"line":14,"column":47},"end":{"line":14,"column":69}},"9":{"start":{"line":15,"column":8},"end":{"line":17,"column":9}},"10":{"start":{"line":16,"column":12},"end":{"line":16,"column":25}},"11":{"start":{"line":18,"column":8},"end":{"line":20,"column":9}},"12":{"start":{"line":19,"column":12},"end":{"line":19,"column":25}},"13":{"start":{"line":21,"column":18},"end":{"line":21,"column":32}},"14":{"start":{"line":22,"column":8},"end":{"line":22,"column":17}},"15":{"start":{"line":23,"column":8},"end":{"line":27,"column":9}},"16":{"start":{"line":23,"column":21},"end":{"line":23,"column":22}},"17":{"start":{"line":24,"column":12},"end":{"line":26,"column":13}},"18":{"start":{"line":25,"column":16},"end":{"line":25,"column":29}},"19":{"start":{"line":28,"column":8},"end":{"line":28,"column":20}},"20":{"start":{"line":31,"column":0},"end":{"line":31,"column":46}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":4},"end":{"line":6,"column":5}},"loc":{"start":{"line":6,"column":26},"end":{"line":9,"column":5}},"line":6},"1":{"name":"(anonymous_1)","decl":{"start":{"line":10,"column":4},"end":{"line":10,"column":5}},"loc":{"start":{"line":10,"column":28},"end":{"line":29,"column":5}},"line":10},"2":{"name":"(anonymous_2)","decl":{"start":{"line":14,"column":42},"end":{"line":14,"column":43}},"loc":{"start":{"line":14,"column":47},"end":{"line":14,"column":69}},"line":14}},"branchMap":{"0":{"loc":{"start":{"line":11,"column":8},"end":{"line":13,"column":9}},"type":"if","locations":[{"start":{"line":11,"column":8},"end":{"line":13,"column":9}},{"start":{"line":11,"column":8},"end":{"line":13,"column":9}}],"line":11},"1":{"loc":{"start":{"line":15,"column":8},"end":{"line":17,"column":9}},"type":"if","locations":[{"start":{"line":15,"column":8},"end":{"line":17,"column":9}},{"start":{"line":15,"column":8},"end":{"line":17,"column":9}}],"line":15},"2":{"loc":{"start":{"line":18,"column":8},"end":{"line":20,"column":9}},"type":"if","locations":[{"start":{"line":18,"column":8},"end":{"line":20,"column":9}},{"start":{"line":18,"column":8},"end":{"line":20,"column":9}}],"line":18},"3":{"loc":{"start":{"line":24,"column":12},"end":{"line":26,"column":13}},"type":"if","locations":[{"start":{"line":24,"column":12},"end":{"line":26,"column":13}},{"start":{"line":24,"column":12},"end":{"line":26,"column":13}}],"line":24}},"s":{"0":1,"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":1},"f":{"0":0,"1":0,"2":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/shuffle-hand-prompt.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/prompts/shuffle-hand-prompt.ts"],"names":[],"mappings":";;;AAAA,qCAAkC;AAGlC,MAAa,iBAAkB,SAAQ,eAAgB;IAIrD,YAAY,QAAgB;QAC1B,KAAK,CAAC,QAAQ,CAAC,CAAC;QAHT,SAAI,GAAW,cAAc,CAAC;IAIvC,CAAC;IAEM,QAAQ,CAAC,MAAuB,EAAE,KAAY;QACnD,IAAI,MAAM,KAAK,IAAI,EAAE;YACnB,OAAO,KAAK,CAAC;SACd;QACD,MAAM,MAAM,GAAG,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,KAAK,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC/D,IAAI,MAAM,KAAK,SAAS,EAAE;YACxB,OAAO,KAAK,CAAC;SACd;QACD,IAAI,MAAM,CAAC,MAAM,KAAK,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE;YAC9C,OAAO,KAAK,CAAC;SACd;QACD,MAAM,CAAC,GAAG,MAAM,CAAC,KAAK,EAAE,CAAC;QACzB,CAAC,CAAC,IAAI,EAAE,CAAC;QACT,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACjC,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,EAAE;gBACd,OAAO,KAAK,CAAC;aACd;SACF;QACD,OAAO,IAAI,CAAC;IACd,CAAC;CAEF;AA7BD,8CA6BC","sourcesContent":["import { Prompt } from './prompt';\nimport { State } from '../state/state';\n\nexport class ShuffleHandPrompt extends Prompt<number[]> {\n\n  readonly type: string = 'Shuffle hand';\n\n  constructor(playerId: number) {\n    super(playerId);\n  }\n\n  public validate(result: number[] | null, state: State): boolean {\n    if (result === null) {\n      return false;\n    }\n    const player = state.players.find(p => p.id === this.playerId);\n    if (player === undefined) {\n      return false;\n    }\n    if (result.length !== player.hand.cards.length) {\n      return false;\n    }\n    const s = result.slice();\n    s.sort();\n    for (let i = 0; i < s.length; i++) {\n      if (s[i] !== i) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"a57234285ba9ea0c004f0c22a202c734e6f639fb","contentHash":"7cb36ff599c0c5d02276999688ad3ba89cc6423c9116fb39401390f6d7484cd3"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/index.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/index.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":4},"end":{"line":4,"column":89}},"4":{"start":{"line":4,"column":71},"end":{"line":4,"column":83}},"5":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"6":{"start":{"line":6,"column":26},"end":{"line":6,"column":33}},"7":{"start":{"line":7,"column":4},"end":{"line":7,"column":17}},"8":{"start":{"line":9,"column":19},"end":{"line":11,"column":1}},"9":{"start":{"line":10,"column":4},"end":{"line":10,"column":126}},"10":{"start":{"line":10,"column":21},"end":{"line":10,"column":126}},"11":{"start":{"line":10,"column":95},"end":{"line":10,"column":126}},"12":{"start":{"line":12,"column":0},"end":{"line":12,"column":62}},"13":{"start":{"line":13,"column":0},"end":{"line":13,"column":55}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":56}},"15":{"start":{"line":15,"column":0},"end":{"line":15,"column":55}},"16":{"start":{"line":16,"column":0},"end":{"line":16,"column":54}},"17":{"start":{"line":17,"column":0},"end":{"line":17,"column":58}},"18":{"start":{"line":18,"column":0},"end":{"line":18,"column":48}},"19":{"start":{"line":19,"column":0},"end":{"line":19,"column":47}},"20":{"start":{"line":20,"column":0},"end":{"line":20,"column":47}},"21":{"start":{"line":21,"column":0},"end":{"line":21,"column":49}},"22":{"start":{"line":22,"column":0},"end":{"line":22,"column":57}},"23":{"start":{"line":23,"column":0},"end":{"line":23,"column":68}},"24":{"start":{"line":24,"column":0},"end":{"line":24,"column":68}},"25":{"start":{"line":25,"column":0},"end":{"line":25,"column":71}},"26":{"start":{"line":26,"column":0},"end":{"line":26,"column":63}},"27":{"start":{"line":27,"column":0},"end":{"line":27,"column":71}},"28":{"start":{"line":28,"column":0},"end":{"line":28,"column":67}},"29":{"start":{"line":29,"column":0},"end":{"line":29,"column":66}},"30":{"start":{"line":30,"column":0},"end":{"line":30,"column":72}},"31":{"start":{"line":31,"column":0},"end":{"line":31,"column":58}},"32":{"start":{"line":32,"column":0},"end":{"line":32,"column":52}},"33":{"start":{"line":33,"column":0},"end":{"line":33,"column":59}},"34":{"start":{"line":34,"column":0},"end":{"line":34,"column":60}},"35":{"start":{"line":35,"column":0},"end":{"line":35,"column":61}},"36":{"start":{"line":36,"column":0},"end":{"line":36,"column":60}},"37":{"start":{"line":37,"column":0},"end":{"line":37,"column":63}},"38":{"start":{"line":38,"column":0},"end":{"line":38,"column":71}},"39":{"start":{"line":39,"column":0},"end":{"line":39,"column":71}},"40":{"start":{"line":40,"column":0},"end":{"line":40,"column":70}},"41":{"start":{"line":41,"column":0},"end":{"line":41,"column":71}},"42":{"start":{"line":42,"column":0},"end":{"line":42,"column":72}},"43":{"start":{"line":43,"column":0},"end":{"line":43,"column":70}},"44":{"start":{"line":44,"column":0},"end":{"line":44,"column":67}},"45":{"start":{"line":45,"column":0},"end":{"line":45,"column":65}},"46":{"start":{"line":46,"column":0},"end":{"line":46,"column":71}},"47":{"start":{"line":47,"column":0},"end":{"line":47,"column":69}},"48":{"start":{"line":48,"column":0},"end":{"line":48,"column":69}},"49":{"start":{"line":49,"column":0},"end":{"line":49,"column":69}},"50":{"start":{"line":50,"column":0},"end":{"line":50,"column":57}},"51":{"start":{"line":51,"column":0},"end":{"line":51,"column":68}},"52":{"start":{"line":52,"column":0},"end":{"line":52,"column":64}},"53":{"start":{"line":53,"column":0},"end":{"line":53,"column":68}},"54":{"start":{"line":54,"column":0},"end":{"line":54,"column":65}},"55":{"start":{"line":55,"column":0},"end":{"line":55,"column":70}},"56":{"start":{"line":56,"column":0},"end":{"line":56,"column":58}},"57":{"start":{"line":57,"column":0},"end":{"line":57,"column":55}},"58":{"start":{"line":58,"column":0},"end":{"line":58,"column":66}},"59":{"start":{"line":59,"column":0},"end":{"line":59,"column":54}},"60":{"start":{"line":60,"column":0},"end":{"line":60,"column":58}},"61":{"start":{"line":61,"column":0},"end":{"line":61,"column":54}},"62":{"start":{"line":62,"column":0},"end":{"line":62,"column":54}},"63":{"start":{"line":63,"column":0},"end":{"line":63,"column":56}},"64":{"start":{"line":64,"column":0},"end":{"line":64,"column":53}},"65":{"start":{"line":65,"column":0},"end":{"line":65,"column":48}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":5,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":4,"column":58},"end":{"line":4,"column":59}},"loc":{"start":{"line":4,"column":69},"end":{"line":4,"column":85}},"line":4},"2":{"name":"(anonymous_2)","decl":{"start":{"line":5,"column":6},"end":{"line":5,"column":7}},"loc":{"start":{"line":5,"column":28},"end":{"line":8,"column":1}},"line":5},"3":{"name":"(anonymous_3)","decl":{"start":{"line":9,"column":50},"end":{"line":9,"column":51}},"loc":{"start":{"line":9,"column":71},"end":{"line":11,"column":1}},"line":9}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":8,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":8,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":5,"column":1}},{"start":{"line":5,"column":6},"end":{"line":8,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"type":"if","locations":[{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},{"start":{"line":6,"column":4},"end":{"line":6,"column":33}}],"line":6},"4":{"loc":{"start":{"line":9,"column":19},"end":{"line":11,"column":1}},"type":"binary-expr","locations":[{"start":{"line":9,"column":20},"end":{"line":9,"column":24}},{"start":{"line":9,"column":28},"end":{"line":9,"column":45}},{"start":{"line":9,"column":50},"end":{"line":11,"column":1}}],"line":9},"5":{"loc":{"start":{"line":10,"column":21},"end":{"line":10,"column":126}},"type":"if","locations":[{"start":{"line":10,"column":21},"end":{"line":10,"column":126}},{"start":{"line":10,"column":21},"end":{"line":10,"column":126}}],"line":10},"6":{"loc":{"start":{"line":10,"column":25},"end":{"line":10,"column":93}},"type":"binary-expr","locations":[{"start":{"line":10,"column":25},"end":{"line":10,"column":40}},{"start":{"line":10,"column":44},"end":{"line":10,"column":93}}],"line":10}},"s":{"0":1,"1":79,"2":79,"3":79,"4":5000,"5":0,"6":0,"7":0,"8":1,"9":53,"10":79,"11":79,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":1,"47":1,"48":1,"49":1,"50":1,"51":1,"52":1,"53":1,"54":1,"55":1,"56":1,"57":1,"58":1,"59":1,"60":1,"61":1,"62":1,"63":1,"64":1,"65":1},"f":{"0":79,"1":5000,"2":0,"3":53},"b":{"0":[1,1,1],"1":[1,0],"2":[79,0],"3":[0,0],"4":[1,1,1],"5":[79,0],"6":[79,79]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/index.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/index.ts"],"names":[],"mappings":";;;;;;;;;;;;AAAA,uDAAqC;AACrC,wDAAsC;AAEtC,uDAAqC;AACrC,sDAAoC;AACpC,0DAAwC;AACxC,gDAA8B;AAC9B,+CAA6B;AAE7B,+CAA6B;AAC7B,iDAA+B;AAE/B,yDAAuC;AACvC,oEAAkD;AAClD,oEAAkD;AAClD,uEAAqD;AACrD,+DAA6C;AAC7C,uEAAqD;AACrD,mEAAiD;AACjD,kEAAgD;AAChD,wEAAsD;AAEtD,0DAAwC;AACxC,oDAAkC;AAClC,2DAAyC;AACzC,4DAA0C;AAC1C,6DAA2C;AAC3C,4DAA0C;AAE1C,+DAA6C;AAC7C,uEAAqD;AACrD,uEAAqD;AACrD,sEAAoD;AACpD,uEAAqD;AACrD,wEAAsD;AACtD,sEAAoD;AACpD,mEAAiD;AACjD,iEAA+C;AAC/C,uEAAqD;AACrD,qEAAmD;AACnD,qEAAmD;AACnD,qEAAmD;AACnD,yDAAuC;AACvC,oEAAkD;AAClD,gEAA8C;AAC9C,oEAAkD;AAClD,iEAA+C;AAC/C,sEAAoD;AAEpD,0DAAwC;AACxC,uDAAqC;AACrC,kEAAgD;AAChD,sDAAoC;AACpC,0DAAwC;AACxC,sDAAoC;AAEpC,sDAAoC;AACpC,wDAAsC;AACtC,qDAAmC;AACnC,gDAA8B","sourcesContent":["export * from './cards/card-manager';\nexport * from './cards/deck-analyser';\n\nexport * from './core/game-settings';\nexport * from './core/player-stats';\nexport * from './core/replay.interface';\nexport * from './core/replay';\nexport * from './serializer';\n\nexport * from './game-error';\nexport * from './game-message';\n\nexport * from './store/actions/action';\nexport * from './store/actions/add-player-action';\nexport * from './store/actions/append-log-action';\nexport * from './store/actions/change-avatar-action';\nexport * from './store/actions/game-actions';\nexport * from './store/actions/invite-player-action';\nexport * from './store/actions/play-card-action';\nexport * from './store/actions/reorder-actions';\nexport * from './store/actions/resolve-prompt-action';\n\nexport * from './store/card/card-types';\nexport * from './store/card/card';\nexport * from './store/card/energy-card';\nexport * from './store/card/pokemon-card';\nexport * from './store/card/pokemon-types';\nexport * from './store/card/trainer-card';\n\nexport * from './store/prompts/alert-prompt';\nexport * from './store/prompts/attach-energy-prompt';\nexport * from './store/prompts/choose-attack-prompt';\nexport * from './store/prompts/choose-cards-prompt';\nexport * from './store/prompts/choose-energy-prompt';\nexport * from './store/prompts/choose-pokemon-prompt';\nexport * from './store/prompts/choose-prize-prompt';\nexport * from './store/prompts/coin-flip-prompt';\nexport * from './store/prompts/confirm-prompt';\nexport * from './store/prompts/invite-player-prompt';\nexport * from './store/prompts/move-damage-prompt';\nexport * from './store/prompts/move-energy-prompt';\nexport * from './store/prompts/order-cards-prompt';\nexport * from './store/prompts/prompt';\nexport * from './store/prompts/put-damage-prompt';\nexport * from './store/prompts/select-prompt';\nexport * from './store/prompts/show-cards-prompt';\nexport * from './store/prompts/shuffle-prompt';\nexport * from './store/prompts/shuffle-hand-prompt';\n\nexport * from './store/state/card-list';\nexport * from './store/state/player';\nexport * from './store/state/pokemon-card-list';\nexport * from './store/state/rules';\nexport * from './store/state/state-log';\nexport * from './store/state/state';\n\nexport * from './store/state-utils';\nexport * from './store/store-handler';\nexport * from './store/store-like';\nexport * from './store/store';\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"9e6ba12f8203ce1ca9c736b8935ee393c61a5a23","contentHash":"b437dde8ba314d97fa9fbce13e577af7551ec99d2d375d85fa277154f28dd4f6"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/cards/card-manager.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/cards/card-manager.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":29}},"2":{"start":{"line":4,"column":16},"end":{"line":4,"column":44}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":24}},"4":{"start":{"line":10,"column":8},"end":{"line":12,"column":9}},"5":{"start":{"line":11,"column":12},"end":{"line":11,"column":53}},"6":{"start":{"line":13,"column":8},"end":{"line":13,"column":36}},"7":{"start":{"line":16,"column":8},"end":{"line":16,"column":34}},"8":{"start":{"line":19,"column":8},"end":{"line":19,"column":30}},"9":{"start":{"line":22,"column":19},"end":{"line":22,"column":60}},"10":{"start":{"line":22,"column":40},"end":{"line":22,"column":59}},"11":{"start":{"line":23,"column":8},"end":{"line":25,"column":9}},"12":{"start":{"line":24,"column":12},"end":{"line":24,"column":43}},"13":{"start":{"line":26,"column":8},"end":{"line":26,"column":20}},"14":{"start":{"line":29,"column":8},"end":{"line":29,"column":71}},"15":{"start":{"line":29,"column":36},"end":{"line":29,"column":55}},"16":{"start":{"line":32,"column":8},"end":{"line":32,"column":26}},"17":{"start":{"line":35,"column":0},"end":{"line":35,"column":34}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":4},"end":{"line":6,"column":5}},"loc":{"start":{"line":6,"column":18},"end":{"line":8,"column":5}},"line":6},"1":{"name":"(anonymous_1)","decl":{"start":{"line":9,"column":4},"end":{"line":9,"column":5}},"loc":{"start":{"line":9,"column":25},"end":{"line":14,"column":5}},"line":9},"2":{"name":"(anonymous_2)","decl":{"start":{"line":15,"column":4},"end":{"line":15,"column":5}},"loc":{"start":{"line":15,"column":21},"end":{"line":17,"column":5}},"line":15},"3":{"name":"(anonymous_3)","decl":{"start":{"line":18,"column":4},"end":{"line":18,"column":5}},"loc":{"start":{"line":18,"column":21},"end":{"line":20,"column":5}},"line":18},"4":{"name":"(anonymous_4)","decl":{"start":{"line":21,"column":4},"end":{"line":21,"column":5}},"loc":{"start":{"line":21,"column":24},"end":{"line":27,"column":5}},"line":21},"5":{"name":"(anonymous_5)","decl":{"start":{"line":22,"column":35},"end":{"line":22,"column":36}},"loc":{"start":{"line":22,"column":40},"end":{"line":22,"column":59}},"line":22},"6":{"name":"(anonymous_6)","decl":{"start":{"line":28,"column":4},"end":{"line":28,"column":5}},"loc":{"start":{"line":28,"column":24},"end":{"line":30,"column":5}},"line":28},"7":{"name":"(anonymous_7)","decl":{"start":{"line":29,"column":31},"end":{"line":29,"column":32}},"loc":{"start":{"line":29,"column":36},"end":{"line":29,"column":55}},"line":29},"8":{"name":"(anonymous_8)","decl":{"start":{"line":31,"column":4},"end":{"line":31,"column":5}},"loc":{"start":{"line":31,"column":18},"end":{"line":33,"column":5}},"line":31}},"branchMap":{"0":{"loc":{"start":{"line":10,"column":8},"end":{"line":12,"column":9}},"type":"if","locations":[{"start":{"line":10,"column":8},"end":{"line":12,"column":9}},{"start":{"line":10,"column":8},"end":{"line":12,"column":9}}],"line":10},"1":{"loc":{"start":{"line":23,"column":8},"end":{"line":25,"column":9}},"type":"if","locations":[{"start":{"line":23,"column":8},"end":{"line":25,"column":9}},{"start":{"line":23,"column":8},"end":{"line":25,"column":9}}],"line":23}},"s":{"0":1,"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},"b":{"0":[0,0],"1":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/cards/card-manager.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/cards/card-manager.ts"],"names":[],"mappings":";;;AACA,6CAA8C;AAE9C,MAAa,WAAW;IAAxB;QAIU,UAAK,GAAW,EAAE,CAAC;IAkC7B,CAAC;IAhCQ,MAAM,CAAC,WAAW;QACvB,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAE;YACzB,WAAW,CAAC,QAAQ,GAAG,IAAI,WAAW,EAAE,CAAC;SAC1C;QAED,OAAO,WAAW,CAAC,QAAQ,CAAC;IAC9B,CAAC;IAEM,SAAS,CAAC,KAAa;QAC5B,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC,CAAC;IAC5B,CAAC;IAEM,UAAU,CAAC,IAAU;QAC1B,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACxB,CAAC;IAEM,aAAa,CAAC,IAAY;QAC/B,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ,KAAK,IAAI,CAAC,CAAC;QACrD,IAAI,IAAI,KAAK,SAAS,EAAE;YACtB,IAAI,GAAG,iBAAS,CAAC,IAAI,CAAC,CAAC;SACxB;QACD,OAAO,IAAI,CAAC;IACd,CAAC;IAEM,aAAa,CAAC,IAAY;QAC/B,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ,KAAK,IAAI,CAAC,KAAK,SAAS,CAAC;IACjE,CAAC;IAEM,WAAW;QAChB,OAAO,IAAI,CAAC,KAAK,CAAC;IACpB,CAAC;CAEF;AAtCD,kCAsCC","sourcesContent":["import { Card } from '../store/card/card';\nimport { deepClone } from '../../utils/utils';\n\nexport class CardManager {\n\n  private static instance: CardManager;\n\n  private cards: Card[] = [];\n\n  public static getInstance(): CardManager {\n    if (!CardManager.instance) {\n      CardManager.instance = new CardManager();\n    }\n\n    return CardManager.instance;\n  }\n\n  public defineSet(cards: Card[]): void {\n    this.cards.push(...cards);\n  }\n\n  public defineCard(card: Card): void {\n    this.cards.push(card);\n  }\n\n  public getCardByName(name: string): Card | undefined {\n    let card = this.cards.find(c => c.fullName === name);\n    if (card !== undefined) {\n      card = deepClone(card);\n    }\n    return card;\n  }\n\n  public isCardDefined(name: string): boolean {\n    return this.cards.find(c => c.fullName === name) !== undefined;\n  }\n\n  public getAllCards(): Card[] {\n    return this.cards;\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"0f3a09b3d52307be2310ff935a881570f01c7a26","contentHash":"adf47fe92d8a9e3841e9245932b1bf2b4b2ff6b3cef49cfcd4bc457a6272d345"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/cards/deck-analyser.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/cards/deck-analyser.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":30}},"2":{"start":{"line":4,"column":23},"end":{"line":4,"column":48}},"3":{"start":{"line":5,"column":22},"end":{"line":5,"column":58}},"4":{"start":{"line":6,"column":21},"end":{"line":6,"column":56}},"5":{"start":{"line":7,"column":23},"end":{"line":7,"column":60}},"6":{"start":{"line":10,"column":8},"end":{"line":10,"column":35}},"7":{"start":{"line":11,"column":28},"end":{"line":11,"column":68}},"8":{"start":{"line":12,"column":8},"end":{"line":12,"column":24}},"9":{"start":{"line":13,"column":8},"end":{"line":18,"column":11}},"10":{"start":{"line":14,"column":25},"end":{"line":14,"column":56}},"11":{"start":{"line":15,"column":12},"end":{"line":17,"column":13}},"12":{"start":{"line":16,"column":16},"end":{"line":16,"column":38}},"13":{"start":{"line":21,"column":25},"end":{"line":21,"column":27}},"14":{"start":{"line":22,"column":30},"end":{"line":22,"column":35}},"15":{"start":{"line":23,"column":25},"end":{"line":23,"column":30}},"16":{"start":{"line":24,"column":25},"end":{"line":24,"column":30}},"17":{"start":{"line":25,"column":8},"end":{"line":27,"column":9}},"18":{"start":{"line":26,"column":12},"end":{"line":26,"column":25}},"19":{"start":{"line":28,"column":8},"end":{"line":53,"column":9}},"20":{"start":{"line":28,"column":21},"end":{"line":28,"column":22}},"21":{"start":{"line":29,"column":25},"end":{"line":29,"column":38}},"22":{"start":{"line":31,"column":12},"end":{"line":33,"column":13}},"23":{"start":{"line":32,"column":16},"end":{"line":32,"column":39}},"24":{"start":{"line":35,"column":12},"end":{"line":40,"column":13}},"25":{"start":{"line":36,"column":16},"end":{"line":36,"column":69}},"26":{"start":{"line":37,"column":16},"end":{"line":39,"column":17}},"27":{"start":{"line":38,"column":20},"end":{"line":38,"column":33}},"28":{"start":{"line":41,"column":12},"end":{"line":46,"column":13}},"29":{"start":{"line":42,"column":16},"end":{"line":44,"column":17}},"30":{"start":{"line":43,"column":20},"end":{"line":43,"column":33}},"31":{"start":{"line":45,"column":16},"end":{"line":45,"column":34}},"32":{"start":{"line":47,"column":12},"end":{"line":52,"column":13}},"33":{"start":{"line":48,"column":16},"end":{"line":50,"column":17}},"34":{"start":{"line":49,"column":20},"end":{"line":49,"column":33}},"35":{"start":{"line":51,"column":16},"end":{"line":51,"column":34}},"36":{"start":{"line":54,"column":8},"end":{"line":54,"column":31}},"37":{"start":{"line":57,"column":26},"end":{"line":57,"column":28}},"38":{"start":{"line":58,"column":8},"end":{"line":75,"column":9}},"39":{"start":{"line":58,"column":21},"end":{"line":58,"column":22}},"40":{"start":{"line":59,"column":25},"end":{"line":59,"column":38}},"41":{"start":{"line":60,"column":27},"end":{"line":60,"column":53}},"42":{"start":{"line":61,"column":12},"end":{"line":74,"column":13}},"43":{"start":{"line":62,"column":16},"end":{"line":62,"column":41}},"44":{"start":{"line":63,"column":16},"end":{"line":65,"column":17}},"45":{"start":{"line":64,"column":20},"end":{"line":64,"column":45}},"46":{"start":{"line":67,"column":17},"end":{"line":74,"column":13}},"47":{"start":{"line":68,"column":16},"end":{"line":73,"column":17}},"48":{"start":{"line":68,"column":29},"end":{"line":68,"column":30}},"49":{"start":{"line":69,"column":20},"end":{"line":69,"column":48}},"50":{"start":{"line":70,"column":20},"end":{"line":72,"column":21}},"51":{"start":{"line":71,"column":24},"end":{"line":71,"column":49}},"52":{"start":{"line":76,"column":8},"end":{"line":76,"column":25}},"53":{"start":{"line":79,"column":0},"end":{"line":79,"column":36}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":9,"column":4},"end":{"line":9,"column":5}},"loc":{"start":{"line":9,"column":32},"end":{"line":19,"column":5}},"line":9},"1":{"name":"(anonymous_1)","decl":{"start":{"line":13,"column":26},"end":{"line":13,"column":27}},"loc":{"start":{"line":13,"column":34},"end":{"line":18,"column":9}},"line":13},"2":{"name":"(anonymous_2)","decl":{"start":{"line":20,"column":4},"end":{"line":20,"column":5}},"loc":{"start":{"line":20,"column":14},"end":{"line":55,"column":5}},"line":20},"3":{"name":"(anonymous_3)","decl":{"start":{"line":56,"column":4},"end":{"line":56,"column":5}},"loc":{"start":{"line":56,"column":18},"end":{"line":77,"column":5}},"line":56}},"branchMap":{"0":{"loc":{"start":{"line":9,"column":16},"end":{"line":9,"column":30}},"type":"default-arg","locations":[{"start":{"line":9,"column":28},"end":{"line":9,"column":30}}],"line":9},"1":{"loc":{"start":{"line":15,"column":12},"end":{"line":17,"column":13}},"type":"if","locations":[{"start":{"line":15,"column":12},"end":{"line":17,"column":13}},{"start":{"line":15,"column":12},"end":{"line":17,"column":13}}],"line":15},"2":{"loc":{"start":{"line":25,"column":8},"end":{"line":27,"column":9}},"type":"if","locations":[{"start":{"line":25,"column":8},"end":{"line":27,"column":9}},{"start":{"line":25,"column":8},"end":{"line":27,"column":9}}],"line":25},"3":{"loc":{"start":{"line":31,"column":12},"end":{"line":33,"column":13}},"type":"if","locations":[{"start":{"line":31,"column":12},"end":{"line":33,"column":13}},{"start":{"line":31,"column":12},"end":{"line":33,"column":13}}],"line":31},"4":{"loc":{"start":{"line":31,"column":16},"end":{"line":31,"column":101}},"type":"binary-expr","locations":[{"start":{"line":31,"column":16},"end":{"line":31,"column":58}},{"start":{"line":31,"column":62},"end":{"line":31,"column":101}}],"line":31},"5":{"loc":{"start":{"line":35,"column":12},"end":{"line":40,"column":13}},"type":"if","locations":[{"start":{"line":35,"column":12},"end":{"line":40,"column":13}},{"start":{"line":35,"column":12},"end":{"line":40,"column":13}}],"line":35},"6":{"loc":{"start":{"line":35,"column":16},"end":{"line":35,"column":112}},"type":"binary-expr","locations":[{"start":{"line":35,"column":16},"end":{"line":35,"column":59}},{"start":{"line":35,"column":63},"end":{"line":35,"column":112}}],"line":35},"7":{"loc":{"start":{"line":36,"column":39},"end":{"line":36,"column":63}},"type":"binary-expr","locations":[{"start":{"line":36,"column":39},"end":{"line":36,"column":58}},{"start":{"line":36,"column":62},"end":{"line":36,"column":63}}],"line":36},"8":{"loc":{"start":{"line":37,"column":16},"end":{"line":39,"column":17}},"type":"if","locations":[{"start":{"line":37,"column":16},"end":{"line":39,"column":17}},{"start":{"line":37,"column":16},"end":{"line":39,"column":17}}],"line":37},"9":{"loc":{"start":{"line":41,"column":12},"end":{"line":46,"column":13}},"type":"if","locations":[{"start":{"line":41,"column":12},"end":{"line":46,"column":13}},{"start":{"line":41,"column":12},"end":{"line":46,"column":13}}],"line":41},"10":{"loc":{"start":{"line":42,"column":16},"end":{"line":44,"column":17}},"type":"if","locations":[{"start":{"line":42,"column":16},"end":{"line":44,"column":17}},{"start":{"line":42,"column":16},"end":{"line":44,"column":17}}],"line":42},"11":{"loc":{"start":{"line":47,"column":12},"end":{"line":52,"column":13}},"type":"if","locations":[{"start":{"line":47,"column":12},"end":{"line":52,"column":13}},{"start":{"line":47,"column":12},"end":{"line":52,"column":13}}],"line":47},"12":{"loc":{"start":{"line":48,"column":16},"end":{"line":50,"column":17}},"type":"if","locations":[{"start":{"line":48,"column":16},"end":{"line":50,"column":17}},{"start":{"line":48,"column":16},"end":{"line":50,"column":17}}],"line":48},"13":{"loc":{"start":{"line":61,"column":12},"end":{"line":74,"column":13}},"type":"if","locations":[{"start":{"line":61,"column":12},"end":{"line":74,"column":13}},{"start":{"line":61,"column":12},"end":{"line":74,"column":13}}],"line":61},"14":{"loc":{"start":{"line":63,"column":16},"end":{"line":65,"column":17}},"type":"if","locations":[{"start":{"line":63,"column":16},"end":{"line":65,"column":17}},{"start":{"line":63,"column":16},"end":{"line":65,"column":17}}],"line":63},"15":{"loc":{"start":{"line":63,"column":20},"end":{"line":63,"column":97}},"type":"binary-expr","locations":[{"start":{"line":63,"column":20},"end":{"line":63,"column":59}},{"start":{"line":63,"column":63},"end":{"line":63,"column":97}}],"line":63},"16":{"loc":{"start":{"line":67,"column":17},"end":{"line":74,"column":13}},"type":"if","locations":[{"start":{"line":67,"column":17},"end":{"line":74,"column":13}},{"start":{"line":67,"column":17},"end":{"line":74,"column":13}}],"line":67},"17":{"loc":{"start":{"line":70,"column":20},"end":{"line":72,"column":21}},"type":"if","locations":[{"start":{"line":70,"column":20},"end":{"line":72,"column":21}},{"start":{"line":70,"column":20},"end":{"line":72,"column":21}}],"line":70},"18":{"loc":{"start":{"line":70,"column":24},"end":{"line":70,"column":101}},"type":"binary-expr","locations":[{"start":{"line":70,"column":24},"end":{"line":70,"column":63}},{"start":{"line":70,"column":67},"end":{"line":70,"column":101}}],"line":70}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":1},"f":{"0":0,"1":0,"2":0,"3":0},"b":{"0":[0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/cards/deck-analyser.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/cards/deck-analyser.ts"],"names":[],"mappings":"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","sourcesContent":["import { Card } from '../store/card/card';\nimport { CardManager } from './card-manager';\nimport { EnergyCard } from '../store/card/energy-card';\nimport { EnergyType, Stage, CardType, CardTag } from '../store/card/card-types';\nimport { PokemonCard } from '../store/card/pokemon-card';\n\nexport class DeckAnalyser {\n\n  private cards: Card[];\n\n  constructor(public cardNames: string[] = []) {\n    const cardManager = CardManager.getInstance();\n    this.cards = [];\n\n    cardNames.forEach(name => {\n      const card = cardManager.getCardByName(name);\n      if (card !== undefined) {\n        this.cards.push(card);\n      }\n    });\n  }\n\n  public isValid(): boolean {\n    const countMap: { [name: string]: number } = { };\n    let hasBasicPokemon = false;\n    let hasAceSpec = false;\n    let hasRadiant = false;\n\n    if (this.cards.length !== 60) {\n      return false;\n    }\n\n    for (let i = 0; i < this.cards.length; i++) {\n      const card = this.cards[i];\n\n      // Check if deck has a basic Pokemon card\n      if (card instanceof PokemonCard && card.stage === Stage.BASIC) {\n        hasBasicPokemon = true;\n      }\n\n      // Count cards, except basic energies\n      if (!(card instanceof EnergyCard) || card.energyType !== EnergyType.BASIC) {\n        countMap[card.name] = (countMap[card.name] || 0) + 1;\n        if (countMap[card.name] > 4) {\n          return false;\n        }\n      }\n\n      if (card.tags.includes(CardTag.ACE_SPEC)) {\n        if (hasAceSpec) {\n          return false;\n        }\n        hasAceSpec = true;\n      }\n      if (card.tags.includes(CardTag.RADIANT)) {\n        if (hasRadiant) {\n          return false;\n        }\n        hasRadiant = true;\n      }\n    }\n\n    return hasBasicPokemon;\n  }\n\n  public getDeckType(): CardType[] {\n    const cardTypes: CardType[] = [];\n\n    for (let i = 0; i < this.cards.length; i++) {\n      const card = this.cards[i];\n      let cardType = CardType.NONE;\n\n      if (card instanceof PokemonCard) {\n        cardType = card.cardType;\n        if (cardType !== CardType.NONE && cardTypes.indexOf(cardType) === -1) {\n          cardTypes.push(cardType);\n        }\n      } else if (card instanceof EnergyCard) {\n        for (let j = 0; j < card.provides.length; j++) {\n          cardType = card.provides[j];\n          if (cardType !== CardType.NONE && cardTypes.indexOf(cardType) === -1) {\n            cardTypes.push(cardType);\n          }\n        }\n      }\n    }\n\n    return cardTypes;\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"b3eca70277b142dea40eebf8e091cb463024b402","contentHash":"bc9f94c4ef7fdcf431e14f88252a3c35eca00aefbd104c53dc7905bfc105236c"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/card/energy-card.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/card/energy-card.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":28}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":32}},"3":{"start":{"line":5,"column":21},"end":{"line":5,"column":44}},"4":{"start":{"line":8,"column":8},"end":{"line":8,"column":28}},"5":{"start":{"line":9,"column":8},"end":{"line":9,"column":55}},"6":{"start":{"line":10,"column":8},"end":{"line":10,"column":56}},"7":{"start":{"line":11,"column":8},"end":{"line":11,"column":27}},"8":{"start":{"line":12,"column":8},"end":{"line":12,"column":23}},"9":{"start":{"line":15,"column":0},"end":{"line":15,"column":32}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":7,"column":4},"end":{"line":7,"column":5}},"loc":{"start":{"line":7,"column":18},"end":{"line":13,"column":5}},"line":7}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":13,"5":13,"6":13,"7":13,"8":13,"9":1},"f":{"0":13},"b":{},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/card/energy-card.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/card/energy-card.ts"],"names":[],"mappings":";;;AAAA,iCAA8B;AAC9B,6CAA+D;AAG/D,MAAsB,UAAW,SAAQ,WAAI;IAA7C;;QAES,cAAS,GAAc,sBAAS,CAAC,MAAM,CAAC;QAExC,eAAU,GAAe,uBAAU,CAAC,KAAK,CAAC;QAE1C,aAAQ,GAAe,EAAE,CAAC;QAE1B,SAAI,GAAW,EAAE,CAAC;IAC3B,CAAC;CAAA;AATD,gCASC","sourcesContent":["import { Card } from './card';\nimport { SuperType, CardType, EnergyType } from './card-types';\n\n\nexport abstract class EnergyCard extends Card {\n\n  public superType: SuperType = SuperType.ENERGY;\n  \n  public energyType: EnergyType = EnergyType.BASIC;\n\n  public provides: CardType[] = [];\n\n  public text: string = '';\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"8fdda54e51e345e99c5577fb1ab72b544432c025","contentHash":"11e268bff6fb07e65f2c6bd47a4f94f081fc5a86f88f0d1c3ee735a2c8cadb43"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/card/card.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/card/card.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":22}},"2":{"start":{"line":6,"column":8},"end":{"line":6,"column":21}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":33}},"4":{"start":{"line":8,"column":8},"end":{"line":8,"column":23}},"5":{"start":{"line":11,"column":8},"end":{"line":11,"column":21}},"6":{"start":{"line":14,"column":0},"end":{"line":14,"column":20}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":4},"end":{"line":5,"column":5}},"loc":{"start":{"line":5,"column":18},"end":{"line":9,"column":5}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":10,"column":4},"end":{"line":10,"column":5}},"loc":{"start":{"line":10,"column":39},"end":{"line":12,"column":5}},"line":10}},"branchMap":{},"s":{"0":1,"1":1,"2":314,"3":314,"4":314,"5":0,"6":1},"f":{"0":314,"1":0},"b":{},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/card/card.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/card/card.ts"],"names":[],"mappings":";;;AAKA,MAAsB,IAAI;IAA1B;QAUS,OAAE,GAAW,CAAC,CAAC,CAAC;QAEhB,mBAAc,GAAW,EAAE,CAAC;QAE5B,SAAI,GAAa,EAAE,CAAC;IAO7B,CAAC;IAJQ,YAAY,CAAC,KAAgB,EAAE,KAAY,EAAE,MAAc;QAChE,OAAO,KAAK,CAAC;IACf,CAAC;CAEF;AArBD,oBAqBC","sourcesContent":["import { SuperType } from './card-types';\nimport { Effect } from '../effects/effect';\nimport { State } from '../state/state';\nimport { StoreLike } from '../store-like';\n\nexport abstract class Card {\n\n  public abstract set: string;\n\n  public abstract superType: SuperType;\n\n  public abstract fullName: string;\n\n  public abstract name: string;\n\n  public id: number = -1;\n\n  public regulationMark: string = '';\n\n  public tags: string[] = [];\n  static tags: any;\n\n  public reduceEffect(store: StoreLike, state: State, effect: Effect): State {\n    return state;\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"b7e1fcdf090dbe5eb641cfd556c4c3d8e40fc23a","contentHash":"bd72dff7c7ebbdf88a7825accf77756fa822d5a657949f11310b8f5fd6046247"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/card/pokemon-card.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/card/pokemon-card.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":29}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":32}},"3":{"start":{"line":5,"column":21},"end":{"line":5,"column":44}},"4":{"start":{"line":8,"column":8},"end":{"line":8,"column":28}},"5":{"start":{"line":9,"column":8},"end":{"line":9,"column":56}},"6":{"start":{"line":10,"column":8},"end":{"line":10,"column":51}},"7":{"start":{"line":11,"column":8},"end":{"line":11,"column":26}},"8":{"start":{"line":12,"column":8},"end":{"line":12,"column":59}},"9":{"start":{"line":13,"column":8},"end":{"line":13,"column":30}},"10":{"start":{"line":14,"column":8},"end":{"line":14,"column":46}},"11":{"start":{"line":15,"column":8},"end":{"line":15,"column":26}},"12":{"start":{"line":16,"column":8},"end":{"line":16,"column":20}},"13":{"start":{"line":17,"column":8},"end":{"line":17,"column":27}},"14":{"start":{"line":18,"column":8},"end":{"line":18,"column":29}},"15":{"start":{"line":19,"column":8},"end":{"line":19,"column":25}},"16":{"start":{"line":20,"column":8},"end":{"line":20,"column":25}},"17":{"start":{"line":21,"column":8},"end":{"line":21,"column":26}},"18":{"start":{"line":24,"column":0},"end":{"line":24,"column":34}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":7,"column":4},"end":{"line":7,"column":5}},"loc":{"start":{"line":7,"column":18},"end":{"line":22,"column":5}},"line":7}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":301,"5":301,"6":301,"7":301,"8":301,"9":301,"10":301,"11":301,"12":301,"13":301,"14":301,"15":301,"16":301,"17":301,"18":1},"f":{"0":301},"b":{},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/card/pokemon-card.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/card/pokemon-card.ts"],"names":[],"mappings":";;;AAAA,iCAA8B;AAC9B,6CAAwF;AAIxF,MAAsB,WAAY,SAAQ,WAAI;IAA9C;;QAES,cAAS,GAAc,sBAAS,CAAC,OAAO,CAAC;QAEzC,aAAQ,GAAa,qBAAQ,CAAC,IAAI,CAAC;QAEnC,YAAO,GAAc,EAAE,CAAC;QAExB,gBAAW,GAAgB,wBAAW,CAAC,MAAM,CAAC;QAE9C,gBAAW,GAAW,EAAE,CAAC;QAEzB,UAAK,GAAU,kBAAK,CAAC,KAAK,CAAC;QAE3B,YAAO,GAAe,EAAE,CAAC;QAEzB,OAAE,GAAW,CAAC,CAAC;QAEf,aAAQ,GAAe,EAAE,CAAC;QAE1B,eAAU,GAAiB,EAAE,CAAC;QAE9B,WAAM,GAAa,EAAE,CAAC;QAEtB,WAAM,GAAY,EAAE,CAAC;QAErB,YAAO,GAAa,EAAE,CAAC;IAEhC,CAAC;CAAA;AA5BD,kCA4BC","sourcesContent":["import { Card } from './card';\nimport { SuperType, Stage, PokemonType, CardType, CardTag, Format } from './card-types';\nimport { Attack, Weakness, Resistance, Power } from './pokemon-types';\n\n\nexport abstract class PokemonCard extends Card {\n\n  public superType: SuperType = SuperType.POKEMON;\n\n  public cardType: CardType = CardType.NONE;\n\n  public cardTag: CardTag[] = [];\n\n  public pokemonType: PokemonType = PokemonType.NORMAL;\n\n  public evolvesFrom: string = '';\n\n  public stage: Stage = Stage.BASIC;\n\n  public retreat: CardType[] = [];\n\n  public hp: number = 0;\n\n  public weakness: Weakness[] = [];\n  \n  public resistance: Resistance[] = [];\n\n  public format: Format[] = [];\n\n  public powers: Power[] = [];\n\n  public attacks: Attack[] = [];\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"d9808bb43fe34573e320da513f548ca91455bf08","contentHash":"3c06b715fcd3ac363d3ca48b3960a3de16610023bc2c9ccf7135b9ed324276c3"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/core/game-settings.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/core/game-settings.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":30}},"2":{"start":{"line":4,"column":16},"end":{"line":4,"column":47}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":41}},"4":{"start":{"line":8,"column":8},"end":{"line":8,"column":30}},"5":{"start":{"line":9,"column":8},"end":{"line":9,"column":37}},"6":{"start":{"line":12,"column":0},"end":{"line":12,"column":36}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":4},"end":{"line":6,"column":5}},"loc":{"start":{"line":6,"column":18},"end":{"line":10,"column":5}},"line":6}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":0,"4":0,"5":0,"6":1},"f":{"0":0},"b":{},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/core/game-settings.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/core/game-settings.ts"],"names":[],"mappings":";;;AAAA,gDAA6C;AAE7C,MAAa,YAAY;IAAzB;QAEE,UAAK,GAAU,IAAI,aAAK,EAAE,CAAC;QAE3B,cAAS,GAAW,IAAI,CAAC;QAEzB,qBAAgB,GAAY,IAAI,CAAC;IAEnC,CAAC;CAAA;AARD,oCAQC","sourcesContent":["import { Rules } from '../store/state/rules';\n\nexport class GameSettings {\n\n  rules: Rules = new Rules();\n\n  timeLimit: number = 1800;\n\n  recordingEnabled: boolean = true;\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"75b67833f0a0fd8667c87ebb3d20d28d645291e6","contentHash":"67f4f71afaa5c2b53dc94b9d66794a15aa93f2014cf426e2a9a076aeb471fa7d"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/state/rules.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/state/rules.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":23}},"2":{"start":{"line":6,"column":8},"end":{"line":6,"column":38}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":42}},"4":{"start":{"line":8,"column":8},"end":{"line":8,"column":34}},"5":{"start":{"line":11,"column":0},"end":{"line":11,"column":22}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":4},"end":{"line":5,"column":5}},"loc":{"start":{"line":5,"column":27},"end":{"line":9,"column":5}},"line":5}},"branchMap":{"0":{"loc":{"start":{"line":5,"column":16},"end":{"line":5,"column":25}},"type":"default-arg","locations":[{"start":{"line":5,"column":23},"end":{"line":5,"column":25}}],"line":5}},"s":{"0":1,"1":1,"2":39,"3":39,"4":39,"5":1},"f":{"0":39},"b":{"0":[39]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/state/rules.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/state/rules.ts"],"names":[],"mappings":";;;AAAA,MAAa,KAAK;IAMhB,YAAY,OAAuB,EAAE;QAJ9B,sBAAiB,GAAG,IAAI,CAAC;QAEzB,0BAAqB,GAAG,IAAI,CAAC;QAGlC,MAAM,CAAC,MAAM,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;IAC5B,CAAC;CAEF;AAVD,sBAUC","sourcesContent":["export class Rules {\n\n  public firstTurnDrawCard = true;\n\n  public firstTurnUseSupporter = true;\n\n  constructor(init: Partial<Rules> = {}) {\n    Object.assign(this, init);\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"78bc2fff45331cc63fd127a6907cf1b055ab8893","contentHash":"d16c7580240ead530ab2939b8f1112334a36644759f1c7b2260246fd516b7127"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/core/player-stats.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/core/player-stats.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}}},"fnMap":{},"branchMap":{},"s":{"0":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/core/player-stats.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/core/player-stats.ts"],"names":[],"mappings":"","sourcesContent":["export interface PlayerStats {\n\n  clientId: number;\n\n  isTimeRunning: boolean;\n\n  timeLeft: number;\n\n  invalidMoves: number;\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"edcc0f338017c408ca226206621f4fe789e2f3dd","contentHash":"07543e0224681601cae24897b8d7cdc737d06065d83476b6060322ec015d5e3f"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/core/replay.interface.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/core/replay.interface.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}}},"fnMap":{},"branchMap":{},"s":{"0":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/core/replay.interface.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/core/replay.interface.ts"],"names":[],"mappings":"","sourcesContent":["\nexport interface ReplayOptions {\n  indexEnabled: boolean;\n  appendEnabled: boolean;\n}\n\n\nexport interface ReplayPlayer {\n\n  userId: number;\n\n  name: string;\n\n  ranking: number;\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"a006fe7bd623109d73093c41c3f8167f51ec15f9","contentHash":"6f5f98e272f2cc3ae5e0f83048c970c457e7dbfcc9d764f45bde70db99c97e8d"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/core/replay.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/core/replay.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":24}},"2":{"start":{"line":4,"column":19},"end":{"line":4,"column":48}},"3":{"start":{"line":5,"column":16},"end":{"line":5,"column":47}},"4":{"start":{"line":6,"column":21},"end":{"line":6,"column":45}},"5":{"start":{"line":7,"column":23},"end":{"line":7,"column":49}},"6":{"start":{"line":8,"column":27},"end":{"line":8,"column":68}},"7":{"start":{"line":11,"column":8},"end":{"line":11,"column":32}},"8":{"start":{"line":12,"column":8},"end":{"line":12,"column":26}},"9":{"start":{"line":13,"column":8},"end":{"line":13,"column":24}},"10":{"start":{"line":14,"column":8},"end":{"line":14,"column":26}},"11":{"start":{"line":15,"column":8},"end":{"line":15,"column":67}},"12":{"start":{"line":16,"column":8},"end":{"line":16,"column":59}},"13":{"start":{"line":17,"column":8},"end":{"line":17,"column":59}},"14":{"start":{"line":18,"column":8},"end":{"line":18,"column":46}},"15":{"start":{"line":19,"column":8},"end":{"line":19,"column":25}},"16":{"start":{"line":20,"column":8},"end":{"line":23,"column":20}},"17":{"start":{"line":26,"column":8},"end":{"line":26,"column":33}},"18":{"start":{"line":29,"column":8},"end":{"line":31,"column":9}},"19":{"start":{"line":30,"column":12},"end":{"line":30,"column":95}},"20":{"start":{"line":32,"column":24},"end":{"line":32,"column":37}},"21":{"start":{"line":33,"column":22},"end":{"line":33,"column":47}},"22":{"start":{"line":34,"column":16},"end":{"line":34,"column":17}},"23":{"start":{"line":35,"column":8},"end":{"line":46,"column":9}},"24":{"start":{"line":36,"column":12},"end":{"line":45,"column":13}},"25":{"start":{"line":37,"column":29},"end":{"line":37,"column":47}},"26":{"start":{"line":38,"column":30},"end":{"line":38,"column":75}},"27":{"start":{"line":39,"column":16},"end":{"line":39,"column":72}},"28":{"start":{"line":40,"column":16},"end":{"line":40,"column":25}},"29":{"start":{"line":43,"column":16},"end":{"line":43,"column":20}},"30":{"start":{"line":44,"column":16},"end":{"line":44,"column":80}},"31":{"start":{"line":47,"column":8},"end":{"line":47,"column":54}},"32":{"start":{"line":50,"column":8},"end":{"line":50,"column":35}},"33":{"start":{"line":53,"column":8},"end":{"line":55,"column":9}},"34":{"start":{"line":54,"column":12},"end":{"line":54,"column":95}},"35":{"start":{"line":56,"column":8},"end":{"line":56,"column":34}},"36":{"start":{"line":59,"column":8},"end":{"line":59,"column":31}},"37":{"start":{"line":62,"column":21},"end":{"line":62,"column":53}},"38":{"start":{"line":63,"column":21},"end":{"line":63,"column":73}},"39":{"start":{"line":66,"column":8},"end":{"line":68,"column":9}},"40":{"start":{"line":67,"column":12},"end":{"line":67,"column":19}},"41":{"start":{"line":69,"column":8},"end":{"line":69,"column":30}},"42":{"start":{"line":70,"column":8},"end":{"line":70,"column":30}},"43":{"start":{"line":71,"column":8},"end":{"line":73,"column":9}},"44":{"start":{"line":72,"column":12},"end":{"line":72,"column":42}},"45":{"start":{"line":74,"column":8},"end":{"line":76,"column":9}},"46":{"start":{"line":75,"column":12},"end":{"line":75,"column":53}},"47":{"start":{"line":79,"column":21},"end":{"line":86,"column":9}},"48":{"start":{"line":87,"column":8},"end":{"line":87,"column":51}},"49":{"start":{"line":90,"column":8},"end":{"line":108,"column":9}},"50":{"start":{"line":91,"column":25},"end":{"line":91,"column":64}},"51":{"start":{"line":92,"column":12},"end":{"line":92,"column":40}},"52":{"start":{"line":93,"column":12},"end":{"line":93,"column":40}},"53":{"start":{"line":94,"column":12},"end":{"line":94,"column":38}},"54":{"start":{"line":95,"column":12},"end":{"line":95,"column":40}},"55":{"start":{"line":96,"column":12},"end":{"line":96,"column":54}},"56":{"start":{"line":97,"column":12},"end":{"line":97,"column":40}},"57":{"start":{"line":98,"column":12},"end":{"line":100,"column":13}},"58":{"start":{"line":99,"column":16},"end":{"line":99,"column":46}},"59":{"start":{"line":101,"column":12},"end":{"line":104,"column":13}},"60":{"start":{"line":102,"column":34},"end":{"line":102,"column":70}},"61":{"start":{"line":103,"column":16},"end":{"line":103,"column":70}},"62":{"start":{"line":107,"column":12},"end":{"line":107,"column":95}},"63":{"start":{"line":111,"column":8},"end":{"line":111,"column":85}},"64":{"start":{"line":111,"column":33},"end":{"line":111,"column":83}},"65":{"start":{"line":111,"column":60},"end":{"line":111,"column":82}},"66":{"start":{"line":114,"column":27},"end":{"line":114,"column":66}},"67":{"start":{"line":115,"column":8},"end":{"line":115,"column":26}},"68":{"start":{"line":118,"column":21},"end":{"line":118,"column":62}},"69":{"start":{"line":119,"column":8},"end":{"line":119,"column":20}},"70":{"start":{"line":122,"column":8},"end":{"line":125,"column":9}},"71":{"start":{"line":123,"column":12},"end":{"line":123,"column":30}},"72":{"start":{"line":124,"column":12},"end":{"line":124,"column":19}},"73":{"start":{"line":126,"column":8},"end":{"line":126,"column":26}},"74":{"start":{"line":127,"column":16},"end":{"line":127,"column":34}},"75":{"start":{"line":128,"column":8},"end":{"line":146,"column":9}},"76":{"start":{"line":129,"column":26},"end":{"line":129,"column":44}},"77":{"start":{"line":130,"column":28},"end":{"line":130,"column":36}},"78":{"start":{"line":131,"column":22},"end":{"line":131,"column":23}},"79":{"start":{"line":132,"column":12},"end":{"line":136,"column":13}},"80":{"start":{"line":132,"column":25},"end":{"line":132,"column":26}},"81":{"start":{"line":133,"column":16},"end":{"line":133,"column":31}},"82":{"start":{"line":134,"column":30},"end":{"line":134,"column":74}},"83":{"start":{"line":135,"column":16},"end":{"line":135,"column":72}},"84":{"start":{"line":137,"column":28},"end":{"line":137,"column":37}},"85":{"start":{"line":138,"column":12},"end":{"line":141,"column":13}},"86":{"start":{"line":139,"column":16},"end":{"line":139,"column":22}},"87":{"start":{"line":140,"column":16},"end":{"line":140,"column":77}},"88":{"start":{"line":142,"column":31},"end":{"line":142,"column":69}},"89":{"start":{"line":143,"column":30},"end":{"line":143,"column":82}},"90":{"start":{"line":144,"column":12},"end":{"line":144,"column":41}},"91":{"start":{"line":145,"column":12},"end":{"line":145,"column":36}},"92":{"start":{"line":149,"column":8},"end":{"line":151,"column":9}},"93":{"start":{"line":150,"column":12},"end":{"line":150,"column":22}},"94":{"start":{"line":152,"column":22},"end":{"line":152,"column":42}},"95":{"start":{"line":153,"column":8},"end":{"line":155,"column":9}},"96":{"start":{"line":154,"column":12},"end":{"line":154,"column":25}},"97":{"start":{"line":156,"column":18},"end":{"line":156,"column":49}},"98":{"start":{"line":157,"column":23},"end":{"line":157,"column":37}},"99":{"start":{"line":158,"column":18},"end":{"line":158,"column":19}},"100":{"start":{"line":159,"column":8},"end":{"line":165,"column":9}},"101":{"start":{"line":160,"column":12},"end":{"line":163,"column":13}},"102":{"start":{"line":161,"column":16},"end":{"line":161,"column":43}},"103":{"start":{"line":162,"column":16},"end":{"line":162,"column":32}},"104":{"start":{"line":164,"column":12},"end":{"line":164,"column":36}},"105":{"start":{"line":166,"column":8},"end":{"line":166,"column":21}},"106":{"start":{"line":169,"column":0},"end":{"line":169,"column":24}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":10,"column":4},"end":{"line":10,"column":5}},"loc":{"start":{"line":10,"column":30},"end":{"line":24,"column":5}},"line":10},"1":{"name":"(anonymous_1)","decl":{"start":{"line":25,"column":4},"end":{"line":25,"column":5}},"loc":{"start":{"line":25,"column":20},"end":{"line":27,"column":5}},"line":25},"2":{"name":"(anonymous_2)","decl":{"start":{"line":28,"column":4},"end":{"line":28,"column":5}},"loc":{"start":{"line":28,"column":23},"end":{"line":48,"column":5}},"line":28},"3":{"name":"(anonymous_3)","decl":{"start":{"line":49,"column":4},"end":{"line":49,"column":5}},"loc":{"start":{"line":49,"column":19},"end":{"line":51,"column":5}},"line":49},"4":{"name":"(anonymous_4)","decl":{"start":{"line":52,"column":4},"end":{"line":52,"column":5}},"loc":{"start":{"line":52,"column":26},"end":{"line":57,"column":5}},"line":52},"5":{"name":"(anonymous_5)","decl":{"start":{"line":58,"column":4},"end":{"line":58,"column":5}},"loc":{"start":{"line":58,"column":24},"end":{"line":60,"column":5}},"line":58},"6":{"name":"(anonymous_6)","decl":{"start":{"line":61,"column":4},"end":{"line":61,"column":5}},"loc":{"start":{"line":61,"column":23},"end":{"line":77,"column":5}},"line":61},"7":{"name":"(anonymous_7)","decl":{"start":{"line":78,"column":4},"end":{"line":78,"column":5}},"loc":{"start":{"line":78,"column":16},"end":{"line":88,"column":5}},"line":78},"8":{"name":"(anonymous_8)","decl":{"start":{"line":89,"column":4},"end":{"line":89,"column":5}},"loc":{"start":{"line":89,"column":28},"end":{"line":109,"column":5}},"line":89},"9":{"name":"(anonymous_9)","decl":{"start":{"line":110,"column":4},"end":{"line":110,"column":5}},"loc":{"start":{"line":110,"column":22},"end":{"line":112,"column":5}},"line":110},"10":{"name":"(anonymous_10)","decl":{"start":{"line":111,"column":25},"end":{"line":111,"column":26}},"loc":{"start":{"line":111,"column":33},"end":{"line":111,"column":83}},"line":111},"11":{"name":"(anonymous_11)","decl":{"start":{"line":111,"column":55},"end":{"line":111,"column":56}},"loc":{"start":{"line":111,"column":60},"end":{"line":111,"column":82}},"line":111},"12":{"name":"(anonymous_12)","decl":{"start":{"line":113,"column":4},"end":{"line":113,"column":5}},"loc":{"start":{"line":113,"column":19},"end":{"line":116,"column":5}},"line":113},"13":{"name":"(anonymous_13)","decl":{"start":{"line":117,"column":4},"end":{"line":117,"column":5}},"loc":{"start":{"line":117,"column":21},"end":{"line":120,"column":5}},"line":117},"14":{"name":"(anonymous_14)","decl":{"start":{"line":121,"column":4},"end":{"line":121,"column":5}},"loc":{"start":{"line":121,"column":24},"end":{"line":147,"column":5}},"line":121},"15":{"name":"(anonymous_15)","decl":{"start":{"line":148,"column":4},"end":{"line":148,"column":5}},"loc":{"start":{"line":148,"column":25},"end":{"line":167,"column":5}},"line":148}},"branchMap":{"0":{"loc":{"start":{"line":10,"column":16},"end":{"line":10,"column":28}},"type":"default-arg","locations":[{"start":{"line":10,"column":26},"end":{"line":10,"column":28}}],"line":10},"1":{"loc":{"start":{"line":29,"column":8},"end":{"line":31,"column":9}},"type":"if","locations":[{"start":{"line":29,"column":8},"end":{"line":31,"column":9}},{"start":{"line":29,"column":8},"end":{"line":31,"column":9}}],"line":29},"2":{"loc":{"start":{"line":29,"column":12},"end":{"line":29,"column":57}},"type":"binary-expr","locations":[{"start":{"line":29,"column":12},"end":{"line":29,"column":24}},{"start":{"line":29,"column":28},"end":{"line":29,"column":57}}],"line":29},"3":{"loc":{"start":{"line":36,"column":12},"end":{"line":45,"column":13}},"type":"if","locations":[{"start":{"line":36,"column":12},"end":{"line":45,"column":13}},{"start":{"line":36,"column":12},"end":{"line":45,"column":13}}],"line":36},"4":{"loc":{"start":{"line":36,"column":16},"end":{"line":36,"column":61}},"type":"binary-expr","locations":[{"start":{"line":36,"column":16},"end":{"line":36,"column":41}},{"start":{"line":36,"column":45},"end":{"line":36,"column":61}}],"line":36},"5":{"loc":{"start":{"line":37,"column":29},"end":{"line":37,"column":47}},"type":"binary-expr","locations":[{"start":{"line":37,"column":29},"end":{"line":37,"column":42}},{"start":{"line":37,"column":46},"end":{"line":37,"column":47}}],"line":37},"6":{"loc":{"start":{"line":53,"column":8},"end":{"line":55,"column":9}},"type":"if","locations":[{"start":{"line":53,"column":8},"end":{"line":55,"column":9}},{"start":{"line":53,"column":8},"end":{"line":55,"column":9}}],"line":53},"7":{"loc":{"start":{"line":53,"column":12},"end":{"line":53,"column":51}},"type":"binary-expr","locations":[{"start":{"line":53,"column":12},"end":{"line":53,"column":20}},{"start":{"line":53,"column":24},"end":{"line":53,"column":51}}],"line":53},"8":{"loc":{"start":{"line":66,"column":8},"end":{"line":68,"column":9}},"type":"if","locations":[{"start":{"line":66,"column":8},"end":{"line":68,"column":9}},{"start":{"line":66,"column":8},"end":{"line":68,"column":9}}],"line":66},"9":{"loc":{"start":{"line":71,"column":8},"end":{"line":73,"column":9}},"type":"if","locations":[{"start":{"line":71,"column":8},"end":{"line":73,"column":9}},{"start":{"line":71,"column":8},"end":{"line":73,"column":9}}],"line":71},"10":{"loc":{"start":{"line":98,"column":12},"end":{"line":100,"column":13}},"type":"if","locations":[{"start":{"line":98,"column":12},"end":{"line":100,"column":13}},{"start":{"line":98,"column":12},"end":{"line":100,"column":13}}],"line":98},"11":{"loc":{"start":{"line":101,"column":12},"end":{"line":104,"column":13}},"type":"if","locations":[{"start":{"line":101,"column":12},"end":{"line":104,"column":13}},{"start":{"line":101,"column":12},"end":{"line":104,"column":13}}],"line":101},"12":{"loc":{"start":{"line":111,"column":60},"end":{"line":111,"column":82}},"type":"cond-expr","locations":[{"start":{"line":111,"column":72},"end":{"line":111,"column":76}},{"start":{"line":111,"column":79},"end":{"line":111,"column":82}}],"line":111},"13":{"loc":{"start":{"line":122,"column":8},"end":{"line":125,"column":9}},"type":"if","locations":[{"start":{"line":122,"column":8},"end":{"line":125,"column":9}},{"start":{"line":122,"column":8},"end":{"line":125,"column":9}}],"line":122},"14":{"loc":{"start":{"line":149,"column":8},"end":{"line":151,"column":9}},"type":"if","locations":[{"start":{"line":149,"column":8},"end":{"line":151,"column":9}},{"start":{"line":149,"column":8},"end":{"line":151,"column":9}}],"line":149},"15":{"loc":{"start":{"line":153,"column":8},"end":{"line":155,"column":9}},"type":"if","locations":[{"start":{"line":153,"column":8},"end":{"line":155,"column":9}},{"start":{"line":153,"column":8},"end":{"line":155,"column":9}}],"line":153},"16":{"loc":{"start":{"line":160,"column":12},"end":{"line":163,"column":13}},"type":"if","locations":[{"start":{"line":160,"column":12},"end":{"line":163,"column":13}},{"start":{"line":160,"column":12},"end":{"line":163,"column":13}}],"line":160}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0},"b":{"0":[0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/core/replay.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/core/replay.ts"],"names":[],"mappings":"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","sourcesContent":["import { gzip, ungzip } from '@progress/pako-esm';\n\nimport { State, GameWinner } from '../store/state/state';\nimport { ReplayPlayer, ReplayOptions } from './replay.interface';\nimport { GameError } from '../game-error';\nimport { GameCoreError } from '../game-message';\nimport { SerializedState } from '../serializer/serializer.interface';\nimport { StateSerializer } from '../serializer/state-serializer';\n\nexport class Replay {\n\n  private readonly indexJumpSize: number = 16;\n\n  public player1: ReplayPlayer;\n  public player2: ReplayPlayer;\n  public winner: GameWinner;\n  public created: number;\n  private turnMap: number[] = [];\n  private diffs: SerializedState[] = [];\n  private indexes: SerializedState[] = [];\n  private prevState: SerializedState | undefined;\n  private serializer = new StateSerializer();\n  private options: ReplayOptions;\n\n  constructor(options: Partial<ReplayOptions> = {}) {\n    this.player1 = { name: '', userId: 0, ranking: 0 };\n    this.player2 = { name: '', userId: 0, ranking: 0 };\n    this.winner = GameWinner.NONE;\n    this.created = 0;\n    this.options = Object.assign({\n      indexEnabled: true,\n      appendEnabled: false\n    }, options);\n  }\n\n  public getStateCount(): number {\n    return this.diffs.length;\n  }\n\n  public getState(position: number): State {\n    if (position < 0 || position >= this.diffs.length) {\n      throw new GameError(GameCoreError.ERROR_INVALID_STATE);\n    }\n\n    let stateData = this.diffs[0];\n    const jumps = this.indexJumps(position);\n    let i = 0;\n    while (i !== position) {\n      if (this.options.indexEnabled && jumps.length > 0) {\n        const jump = jumps.shift() || 0;\n        const index = this.indexes[(jump / this.indexJumpSize) - 1];\n        stateData = this.serializer.applyDiff(stateData, index);\n        i = jump;\n      } else {\n        i++;\n        stateData = this.serializer.applyDiff(stateData, this.diffs[i]);\n      }\n    }\n\n    return this.serializer.deserialize(stateData);\n  }\n\n  public getTurnCount(): number {\n    return this.turnMap.length;\n  }\n\n  public getTurnPosition(turn: number): number {\n    if (turn < 0 || turn >= this.turnMap.length) {\n      throw new GameError(GameCoreError.ERROR_INVALID_STATE);\n    }\n    return this.turnMap[turn];\n  }\n\n  public setCreated(created: number): void {\n    this.created = created;\n  }\n\n  public appendState(state: State): void {\n    const full = this.serializer.serialize(state);\n    const diff = this.serializer.serializeDiff(this.prevState, state);\n\n    // Ignore the actions, which does not modified the state, like\n    // shuffling an empty deck, or changing the hand order in the same matter\n    if (diff === '[[]]') {\n      return;\n    }\n\n    this.prevState = full;\n    this.diffs.push(diff);\n    if (this.options.indexEnabled) {\n      this.rebuildIndex(this.diffs);\n    }\n    while (this.turnMap.length <= state.turn) {\n      this.turnMap.push(this.diffs.length - 1);\n    }\n  }\n\n  public serialize(): string {\n    const json = {\n      player1: this.player1,\n      player2: this.player2,\n      winner: this.winner,\n      created: this.created,\n      turnMap: this.turnMap,\n      states: this.swapQuotes(this.diffs)\n    };\n    return this.compress(JSON.stringify(json));\n  }\n\n  public deserialize(replayData: string): void {\n    try {\n      const data = JSON.parse(this.decompress(replayData));\n      this.player1 = data.player1;\n      this.player2 = data.player2;\n      this.winner = data.winner;\n      this.created = data.created;\n      this.diffs = this.swapQuotes(data.states);\n      this.turnMap = data.turnMap;\n\n      if (this.options.indexEnabled) {\n        this.rebuildIndex(this.diffs);\n      }\n\n      if (this.options.appendEnabled) {\n        const lastState = this.getState(this.diffs.length - 1);\n        this.prevState = this.serializer.serialize(lastState);\n      }\n    } catch (error) {\n      throw new GameError(GameCoreError.ERROR_INVALID_STATE);\n    }\n  }\n\n  private swapQuotes(diffs: SerializedState[]): SerializedState[] {\n    return diffs.map(diff => diff.replace(/[\"']/g, c => c === '\"' ? '\\'' : '\"'));\n  }\n\n  private compress(data: string): string {\n    const compressed = gzip(data, { to: 'string' });\n    return compressed;\n  }\n\n  private decompress(data: string): string {\n    const text = ungzip(data, { to: 'string' });\n    return text;\n  }\n\n  private rebuildIndex(diffs: SerializedState[]): void {\n    if (diffs.length === 0) {\n      this.indexes = [];\n      return;\n    }\n\n    this.indexes = [];\n    let i = this.indexJumpSize;\n    while (i < diffs.length) {\n      const jumps = this.indexJumps(i);\n      let stateData = diffs[0];\n      let pos = 0;\n      for (let j = 0; j < jumps.length - 1; j++) {\n        pos = jumps[j];\n        const index = this.indexes[(pos / this.indexJumpSize) - 1];\n        stateData = this.serializer.applyDiff(stateData, index);\n      }\n      let indexData = stateData;\n      while (pos < i) {\n        pos++;\n        indexData = this.serializer.applyDiff(indexData, diffs[pos]);\n      }\n      const indexState = this.serializer.deserialize(indexData);\n      const indexDiff = this.serializer.serializeDiff(stateData, indexState);\n      this.indexes.push(indexDiff);\n      i += this.indexJumpSize;\n    }\n  }\n\n  private indexJumps(position: number): number[] {\n    if (position < this.indexJumpSize) {\n      return [];\n    }\n    const jumps = [ this.indexJumpSize ];\n\n    if (position < this.indexJumpSize * 2) {\n      return jumps;\n    }\n\n    const n = Math.floor(Math.log2(position));\n    let jumpSize = Math.pow(2, n);\n    let pos = 0;\n\n    while (jumpSize >= this.indexJumpSize) {\n      if (pos + jumpSize <= position) {\n        jumps.push(pos + jumpSize);\n        pos += jumpSize;\n      }\n      jumpSize = jumpSize / 2;\n    }\n\n    return jumps;\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"38184b8af2d9ab9731ed29189e59dfe396211753","contentHash":"7a50330e8b93ede277c9546f2cadedff954603165816a3b4c7772c67ca4c4879"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/state/state.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/state/state.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":64}},"2":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"3":{"start":{"line":6,"column":0},"end":{"line":13,"column":62}},"4":{"start":{"line":7,"column":4},"end":{"line":7,"column":76}},"5":{"start":{"line":8,"column":4},"end":{"line":8,"column":48}},"6":{"start":{"line":9,"column":4},"end":{"line":9,"column":60}},"7":{"start":{"line":10,"column":4},"end":{"line":10,"column":50}},"8":{"start":{"line":11,"column":4},"end":{"line":11,"column":64}},"9":{"start":{"line":12,"column":4},"end":{"line":12,"column":54}},"10":{"start":{"line":15,"column":0},"end":{"line":20,"column":65}},"11":{"start":{"line":16,"column":4},"end":{"line":16,"column":49}},"12":{"start":{"line":17,"column":4},"end":{"line":17,"column":56}},"13":{"start":{"line":18,"column":4},"end":{"line":18,"column":56}},"14":{"start":{"line":19,"column":4},"end":{"line":19,"column":48}},"15":{"start":{"line":23,"column":8},"end":{"line":23,"column":28}},"16":{"start":{"line":24,"column":8},"end":{"line":24,"column":23}},"17":{"start":{"line":25,"column":8},"end":{"line":25,"column":41}},"18":{"start":{"line":26,"column":8},"end":{"line":26,"column":26}},"19":{"start":{"line":27,"column":8},"end":{"line":27,"column":51}},"20":{"start":{"line":28,"column":8},"end":{"line":28,"column":22}},"21":{"start":{"line":29,"column":8},"end":{"line":29,"column":30}},"22":{"start":{"line":30,"column":8},"end":{"line":30,"column":38}},"23":{"start":{"line":31,"column":8},"end":{"line":31,"column":26}},"24":{"start":{"line":34,"column":0},"end":{"line":34,"column":22}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":1},"end":{"line":6,"column":2}},"loc":{"start":{"line":6,"column":22},"end":{"line":13,"column":1}},"line":6},"1":{"name":"(anonymous_1)","decl":{"start":{"line":15,"column":1},"end":{"line":15,"column":2}},"loc":{"start":{"line":15,"column":23},"end":{"line":20,"column":1}},"line":15},"2":{"name":"(anonymous_2)","decl":{"start":{"line":22,"column":4},"end":{"line":22,"column":5}},"loc":{"start":{"line":22,"column":18},"end":{"line":32,"column":5}},"line":22}},"branchMap":{"0":{"loc":{"start":{"line":13,"column":15},"end":{"line":13,"column":60}},"type":"binary-expr","locations":[{"start":{"line":13,"column":15},"end":{"line":13,"column":32}},{"start":{"line":13,"column":37},"end":{"line":13,"column":59}}],"line":13},"1":{"loc":{"start":{"line":20,"column":16},"end":{"line":20,"column":63}},"type":"binary-expr","locations":[{"start":{"line":20,"column":16},"end":{"line":20,"column":34}},{"start":{"line":20,"column":39},"end":{"line":20,"column":62}}],"line":20}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":39,"16":39,"17":39,"18":39,"19":39,"20":39,"21":39,"22":39,"23":39,"24":1},"f":{"0":1,"1":1,"2":39},"b":{"0":[1,1],"1":[1,1]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/state/state.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/state/state.ts"],"names":[],"mappings":";;;AAGA,mCAAgC;AAEhC,IAAY,SAOX;AAPD,WAAY,SAAS;IACnB,uEAAmB,CAAA;IACnB,2CAAK,CAAA;IACL,uDAAW,CAAA;IACX,6CAAM,CAAA;IACN,2DAAa,CAAA;IACb,iDAAQ,CAAA;AACV,CAAC,EAPW,SAAS,GAAT,iBAAS,KAAT,iBAAS,QAOpB;AAED,IAAY,UAKX;AALD,WAAY,UAAU;IACpB,4CAAS,CAAA;IACT,mDAAY,CAAA;IACZ,mDAAY,CAAA;IACZ,2CAAQ,CAAA;AACV,CAAC,EALW,UAAU,GAAV,kBAAU,KAAV,kBAAU,QAKrB;AAED,MAAa,KAAK;IAAlB;QAES,cAAS,GAAa,EAAE,CAAC;QAEzB,SAAI,GAAe,EAAE,CAAC;QAEtB,UAAK,GAAU,IAAI,aAAK,EAAE,CAAC;QAE3B,YAAO,GAAkB,EAAE,CAAC;QAE5B,UAAK,GAAc,SAAS,CAAC,mBAAmB,CAAC;QAEjD,SAAI,GAAG,CAAC,CAAC;QAET,iBAAY,GAAW,CAAC,CAAC;QAEzB,WAAM,GAAe,UAAU,CAAC,IAAI,CAAC;QAErC,YAAO,GAAa,EAAE,CAAC;IAEhC,CAAC;CAAA;AApBD,sBAoBC","sourcesContent":["import { Player } from './player';\nimport { Prompt } from '../prompts/prompt';\nimport { StateLog } from './state-log';\nimport { Rules } from './rules';\n\nexport enum GamePhase {\n  WAITING_FOR_PLAYERS,\n  SETUP,\n  PLAYER_TURN,\n  ATTACK,\n  BETWEEN_TURNS,\n  FINISHED\n}\n\nexport enum GameWinner {\n  NONE = -1,\n  PLAYER_1 = 0,\n  PLAYER_2 = 1,\n  DRAW = 3\n}\n\nexport class State {\n\n  public cardNames: string[] = [];\n\n  public logs: StateLog[] = [];\n\n  public rules: Rules = new Rules();\n\n  public prompts: Prompt<any>[] = [];\n\n  public phase: GamePhase = GamePhase.WAITING_FOR_PLAYERS;\n\n  public turn = 0;\n\n  public activePlayer: number = 0;\n\n  public winner: GameWinner = GameWinner.NONE;\n\n  public players: Player[] = [];\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"5e1b7dd7d25ad3e75c5dd460e9275d8bca6829d1","contentHash":"01b283e708e8edf34308b102902a0d607ab02b4b2d54887c97b9305db2da0d7f"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/serializer/state-serializer.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/serializer/state-serializer.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":33}},"2":{"start":{"line":4,"column":21},"end":{"line":4,"column":45}},"3":{"start":{"line":5,"column":23},"end":{"line":5,"column":49}},"4":{"start":{"line":6,"column":16},"end":{"line":6,"column":47}},"5":{"start":{"line":7,"column":29},"end":{"line":7,"column":60}},"6":{"start":{"line":8,"column":16},"end":{"line":8,"column":47}},"7":{"start":{"line":9,"column":17},"end":{"line":9,"column":49}},"8":{"start":{"line":10,"column":26},"end":{"line":10,"column":54}},"9":{"start":{"line":11,"column":31},"end":{"line":11,"column":64}},"10":{"start":{"line":12,"column":22},"end":{"line":12,"column":59}},"11":{"start":{"line":13,"column":31},"end":{"line":13,"column":64}},"12":{"start":{"line":14,"column":28},"end":{"line":14,"column":58}},"13":{"start":{"line":15,"column":23},"end":{"line":15,"column":48}},"14":{"start":{"line":16,"column":16},"end":{"line":16,"column":38}},"15":{"start":{"line":17,"column":21},"end":{"line":17,"column":44}},"16":{"start":{"line":20,"column":8},"end":{"line":29,"column":10}},"17":{"start":{"line":32,"column":28},"end":{"line":32,"column":44}},"18":{"start":{"line":33,"column":21},"end":{"line":33,"column":23}},"19":{"start":{"line":34,"column":28},"end":{"line":34,"column":60}},"20":{"start":{"line":35,"column":25},"end":{"line":58,"column":9}},"21":{"start":{"line":36,"column":12},"end":{"line":36,"column":40}},"22":{"start":{"line":37,"column":25},"end":{"line":37,"column":46}},"23":{"start":{"line":38,"column":12},"end":{"line":40,"column":13}},"24":{"start":{"line":39,"column":16},"end":{"line":39,"column":29}},"25":{"start":{"line":41,"column":12},"end":{"line":56,"column":13}},"26":{"start":{"line":42,"column":28},"end":{"line":42,"column":60}},"27":{"start":{"line":42,"column":43},"end":{"line":42,"column":59}},"28":{"start":{"line":43,"column":16},"end":{"line":45,"column":17}},"29":{"start":{"line":44,"column":20},"end":{"line":44,"column":60}},"30":{"start":{"line":46,"column":16},"end":{"line":46,"column":49}},"31":{"start":{"line":47,"column":29},"end":{"line":47,"column":51}},"32":{"start":{"line":48,"column":16},"end":{"line":50,"column":17}},"33":{"start":{"line":49,"column":20},"end":{"line":49,"column":33}},"34":{"start":{"line":51,"column":35},"end":{"line":51,"column":97}},"35":{"start":{"line":51,"column":57},"end":{"line":51,"column":96}},"36":{"start":{"line":51,"column":77},"end":{"line":51,"column":95}},"37":{"start":{"line":52,"column":16},"end":{"line":54,"column":17}},"38":{"start":{"line":53,"column":20},"end":{"line":53,"column":55}},"39":{"start":{"line":55,"column":16},"end":{"line":55,"column":133}},"40":{"start":{"line":57,"column":12},"end":{"line":57,"column":25}},"41":{"start":{"line":59,"column":8},"end":{"line":59,"column":64}},"42":{"start":{"line":62,"column":28},"end":{"line":62,"column":44}},"43":{"start":{"line":63,"column":24},"end":{"line":63,"column":60}},"44":{"start":{"line":64,"column":24},"end":{"line":82,"column":9}},"45":{"start":{"line":65,"column":12},"end":{"line":67,"column":13}},"46":{"start":{"line":66,"column":16},"end":{"line":66,"column":29}},"47":{"start":{"line":68,"column":12},"end":{"line":80,"column":13}},"48":{"start":{"line":69,"column":29},"end":{"line":69,"column":40}},"49":{"start":{"line":70,"column":16},"end":{"line":79,"column":17}},"50":{"start":{"line":71,"column":20},"end":{"line":73,"column":21}},"51":{"start":{"line":72,"column":24},"end":{"line":72,"column":37}},"52":{"start":{"line":74,"column":39},"end":{"line":74,"column":84}},"53":{"start":{"line":74,"column":61},"end":{"line":74,"column":83}},"54":{"start":{"line":75,"column":20},"end":{"line":77,"column":21}},"55":{"start":{"line":76,"column":24},"end":{"line":76,"column":70}},"56":{"start":{"line":78,"column":20},"end":{"line":78,"column":139}},"57":{"start":{"line":81,"column":12},"end":{"line":81,"column":25}},"58":{"start":{"line":83,"column":23},"end":{"line":83,"column":59}},"59":{"start":{"line":85,"column":28},"end":{"line":85,"column":60}},"60":{"start":{"line":86,"column":8},"end":{"line":94,"column":11}},"61":{"start":{"line":87,"column":12},"end":{"line":93,"column":13}},"62":{"start":{"line":88,"column":34},"end":{"line":88,"column":74}},"63":{"start":{"line":89,"column":16},"end":{"line":91,"column":17}},"64":{"start":{"line":90,"column":20},"end":{"line":90,"column":138}},"65":{"start":{"line":92,"column":16},"end":{"line":92,"column":40}},"66":{"start":{"line":95,"column":22},"end":{"line":95,"column":31}},"67":{"start":{"line":96,"column":8},"end":{"line":96,"column":21}},"68":{"start":{"line":99,"column":8},"end":{"line":101,"column":9}},"69":{"start":{"line":100,"column":12},"end":{"line":100,"column":41}},"70":{"start":{"line":102,"column":27},"end":{"line":102,"column":43}},"71":{"start":{"line":103,"column":25},"end":{"line":103,"column":38}},"72":{"start":{"line":104,"column":23},"end":{"line":104,"column":36}},"73":{"start":{"line":105,"column":28},"end":{"line":105,"column":49}},"74":{"start":{"line":106,"column":24},"end":{"line":106,"column":47}},"75":{"start":{"line":107,"column":25},"end":{"line":107,"column":35}},"76":{"start":{"line":108,"column":23},"end":{"line":108,"column":33}},"77":{"start":{"line":109,"column":26},"end":{"line":109,"column":54}},"78":{"start":{"line":110,"column":21},"end":{"line":110,"column":75}},"79":{"start":{"line":111,"column":8},"end":{"line":111,"column":38}},"80":{"start":{"line":114,"column":28},"end":{"line":114,"column":54}},"81":{"start":{"line":115,"column":8},"end":{"line":115,"column":45}},"82":{"start":{"line":118,"column":8},"end":{"line":120,"column":9}},"83":{"start":{"line":119,"column":12},"end":{"line":119,"column":24}},"84":{"start":{"line":121,"column":23},"end":{"line":121,"column":39}},"85":{"start":{"line":122,"column":8},"end":{"line":124,"column":9}},"86":{"start":{"line":123,"column":12},"end":{"line":123,"column":24}},"87":{"start":{"line":125,"column":31},"end":{"line":125,"column":47}},"88":{"start":{"line":126,"column":21},"end":{"line":126,"column":30}},"89":{"start":{"line":127,"column":26},"end":{"line":127,"column":54}},"90":{"start":{"line":128,"column":8},"end":{"line":128,"column":67}},"91":{"start":{"line":129,"column":8},"end":{"line":129,"column":48}},"92":{"start":{"line":132,"column":8},"end":{"line":132,"column":43}},"93":{"start":{"line":135,"column":23},"end":{"line":135,"column":50}},"94":{"start":{"line":136,"column":22},"end":{"line":136,"column":41}},"95":{"start":{"line":137,"column":22},"end":{"line":137,"column":24}},"96":{"start":{"line":138,"column":8},"end":{"line":146,"column":11}},"97":{"start":{"line":139,"column":23},"end":{"line":139,"column":80}},"98":{"start":{"line":139,"column":60},"end":{"line":139,"column":79}},"99":{"start":{"line":140,"column":12},"end":{"line":142,"column":13}},"100":{"start":{"line":141,"column":16},"end":{"line":141,"column":123}},"101":{"start":{"line":143,"column":12},"end":{"line":143,"column":43}},"102":{"start":{"line":144,"column":12},"end":{"line":144,"column":28}},"103":{"start":{"line":145,"column":12},"end":{"line":145,"column":29}},"104":{"start":{"line":147,"column":8},"end":{"line":147,"column":25}},"105":{"start":{"line":150,"column":0},"end":{"line":150,"column":42}},"106":{"start":{"line":151,"column":0},"end":{"line":151,"column":32}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":19,"column":4},"end":{"line":19,"column":5}},"loc":{"start":{"line":19,"column":18},"end":{"line":30,"column":5}},"line":19},"1":{"name":"(anonymous_1)","decl":{"start":{"line":31,"column":4},"end":{"line":31,"column":5}},"loc":{"start":{"line":31,"column":21},"end":{"line":60,"column":5}},"line":31},"2":{"name":"(anonymous_2)","decl":{"start":{"line":35,"column":25},"end":{"line":35,"column":26}},"loc":{"start":{"line":35,"column":47},"end":{"line":58,"column":9}},"line":35},"3":{"name":"(anonymous_3)","decl":{"start":{"line":42,"column":38},"end":{"line":42,"column":39}},"loc":{"start":{"line":42,"column":43},"end":{"line":42,"column":59}},"line":42},"4":{"name":"(anonymous_4)","decl":{"start":{"line":51,"column":52},"end":{"line":51,"column":53}},"loc":{"start":{"line":51,"column":57},"end":{"line":51,"column":96}},"line":51},"5":{"name":"(anonymous_5)","decl":{"start":{"line":51,"column":72},"end":{"line":51,"column":73}},"loc":{"start":{"line":51,"column":77},"end":{"line":51,"column":95}},"line":51},"6":{"name":"(anonymous_6)","decl":{"start":{"line":61,"column":4},"end":{"line":61,"column":5}},"loc":{"start":{"line":61,"column":33},"end":{"line":97,"column":5}},"line":61},"7":{"name":"(anonymous_7)","decl":{"start":{"line":64,"column":24},"end":{"line":64,"column":25}},"loc":{"start":{"line":64,"column":46},"end":{"line":82,"column":9}},"line":64},"8":{"name":"(anonymous_8)","decl":{"start":{"line":74,"column":56},"end":{"line":74,"column":57}},"loc":{"start":{"line":74,"column":61},"end":{"line":74,"column":83}},"line":74},"9":{"name":"(anonymous_9)","decl":{"start":{"line":86,"column":36},"end":{"line":86,"column":37}},"loc":{"start":{"line":86,"column":60},"end":{"line":94,"column":9}},"line":86},"10":{"name":"(anonymous_10)","decl":{"start":{"line":98,"column":4},"end":{"line":98,"column":5}},"loc":{"start":{"line":98,"column":31},"end":{"line":112,"column":5}},"line":98},"11":{"name":"(anonymous_11)","decl":{"start":{"line":113,"column":4},"end":{"line":113,"column":5}},"loc":{"start":{"line":113,"column":32},"end":{"line":116,"column":5}},"line":113},"12":{"name":"(anonymous_12)","decl":{"start":{"line":117,"column":4},"end":{"line":117,"column":5}},"loc":{"start":{"line":117,"column":26},"end":{"line":130,"column":5}},"line":117},"13":{"name":"(anonymous_13)","decl":{"start":{"line":131,"column":4},"end":{"line":131,"column":5}},"loc":{"start":{"line":131,"column":32},"end":{"line":133,"column":5}},"line":131},"14":{"name":"(anonymous_14)","decl":{"start":{"line":134,"column":4},"end":{"line":134,"column":5}},"loc":{"start":{"line":134,"column":36},"end":{"line":148,"column":5}},"line":134},"15":{"name":"(anonymous_15)","decl":{"start":{"line":138,"column":22},"end":{"line":138,"column":23}},"loc":{"start":{"line":138,"column":39},"end":{"line":146,"column":9}},"line":138},"16":{"name":"(anonymous_16)","decl":{"start":{"line":139,"column":55},"end":{"line":139,"column":56}},"loc":{"start":{"line":139,"column":60},"end":{"line":139,"column":79}},"line":139}},"branchMap":{"0":{"loc":{"start":{"line":38,"column":12},"end":{"line":40,"column":13}},"type":"if","locations":[{"start":{"line":38,"column":12},"end":{"line":40,"column":13}},{"start":{"line":38,"column":12},"end":{"line":40,"column":13}}],"line":38},"1":{"loc":{"start":{"line":41,"column":12},"end":{"line":56,"column":13}},"type":"if","locations":[{"start":{"line":41,"column":12},"end":{"line":56,"column":13}},{"start":{"line":41,"column":12},"end":{"line":56,"column":13}}],"line":41},"2":{"loc":{"start":{"line":41,"column":16},"end":{"line":41,"column":64}},"type":"binary-expr","locations":[{"start":{"line":41,"column":16},"end":{"line":41,"column":39}},{"start":{"line":41,"column":43},"end":{"line":41,"column":64}}],"line":41},"3":{"loc":{"start":{"line":43,"column":16},"end":{"line":45,"column":17}},"type":"if","locations":[{"start":{"line":43,"column":16},"end":{"line":45,"column":17}},{"start":{"line":43,"column":16},"end":{"line":45,"column":17}}],"line":43},"4":{"loc":{"start":{"line":48,"column":16},"end":{"line":50,"column":17}},"type":"if","locations":[{"start":{"line":48,"column":16},"end":{"line":50,"column":17}},{"start":{"line":48,"column":16},"end":{"line":50,"column":17}}],"line":48},"5":{"loc":{"start":{"line":52,"column":16},"end":{"line":54,"column":17}},"type":"if","locations":[{"start":{"line":52,"column":16},"end":{"line":54,"column":17}},{"start":{"line":52,"column":16},"end":{"line":54,"column":17}}],"line":52},"6":{"loc":{"start":{"line":65,"column":12},"end":{"line":67,"column":13}},"type":"if","locations":[{"start":{"line":65,"column":12},"end":{"line":67,"column":13}},{"start":{"line":65,"column":12},"end":{"line":67,"column":13}}],"line":65},"7":{"loc":{"start":{"line":68,"column":12},"end":{"line":80,"column":13}},"type":"if","locations":[{"start":{"line":68,"column":12},"end":{"line":80,"column":13}},{"start":{"line":68,"column":12},"end":{"line":80,"column":13}}],"line":68},"8":{"loc":{"start":{"line":70,"column":16},"end":{"line":79,"column":17}},"type":"if","locations":[{"start":{"line":70,"column":16},"end":{"line":79,"column":17}},{"start":{"line":70,"column":16},"end":{"line":79,"column":17}}],"line":70},"9":{"loc":{"start":{"line":71,"column":20},"end":{"line":73,"column":21}},"type":"if","locations":[{"start":{"line":71,"column":20},"end":{"line":73,"column":21}},{"start":{"line":71,"column":20},"end":{"line":73,"column":21}}],"line":71},"10":{"loc":{"start":{"line":75,"column":20},"end":{"line":77,"column":21}},"type":"if","locations":[{"start":{"line":75,"column":20},"end":{"line":77,"column":21}},{"start":{"line":75,"column":20},"end":{"line":77,"column":21}}],"line":75},"11":{"loc":{"start":{"line":87,"column":12},"end":{"line":93,"column":13}},"type":"if","locations":[{"start":{"line":87,"column":12},"end":{"line":93,"column":13}},{"start":{"line":87,"column":12},"end":{"line":93,"column":13}}],"line":87},"12":{"loc":{"start":{"line":87,"column":16},"end":{"line":87,"column":64}},"type":"binary-expr","locations":[{"start":{"line":87,"column":16},"end":{"line":87,"column":39}},{"start":{"line":87,"column":43},"end":{"line":87,"column":64}}],"line":87},"13":{"loc":{"start":{"line":89,"column":16},"end":{"line":91,"column":17}},"type":"if","locations":[{"start":{"line":89,"column":16},"end":{"line":91,"column":17}},{"start":{"line":89,"column":16},"end":{"line":91,"column":17}}],"line":89},"14":{"loc":{"start":{"line":99,"column":8},"end":{"line":101,"column":9}},"type":"if","locations":[{"start":{"line":99,"column":8},"end":{"line":101,"column":9}},{"start":{"line":99,"column":8},"end":{"line":101,"column":9}}],"line":99},"15":{"loc":{"start":{"line":118,"column":8},"end":{"line":120,"column":9}},"type":"if","locations":[{"start":{"line":118,"column":8},"end":{"line":120,"column":9}},{"start":{"line":118,"column":8},"end":{"line":120,"column":9}}],"line":118},"16":{"loc":{"start":{"line":122,"column":8},"end":{"line":124,"column":9}},"type":"if","locations":[{"start":{"line":122,"column":8},"end":{"line":124,"column":9}},{"start":{"line":122,"column":8},"end":{"line":124,"column":9}}],"line":122},"17":{"loc":{"start":{"line":140,"column":12},"end":{"line":142,"column":13}},"type":"if","locations":[{"start":{"line":140,"column":12},"end":{"line":142,"column":13}},{"start":{"line":140,"column":12},"end":{"line":142,"column":13}}],"line":140}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":1,"106":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/serializer/state-serializer.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/serializer/state-serializer.ts"],"names":[],"mappings":"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","sourcesContent":["import { GameError } from '../game-error';\nimport { GameCoreError } from '../game-message';\nimport { Serializer, SerializerContext, SerializedState, Serialized } from './serializer.interface';\nimport { State } from '../store/state/state';\nimport { Card } from '../store/card/card';\nimport { GenericSerializer } from './generic.serializer';\nimport { Rules } from '../store/state/rules';\nimport { Player } from '../store/state/player';\nimport { CardSerializer } from './card.serializer';\nimport { CardListSerializer } from './card-list.serializer';\nimport { Marker } from '../store/state/card-marker';\nimport { StateLogSerializer } from './state-log.serializer';\nimport { PromptSerializer } from './prompt.serializer';\nimport { PathBuilder } from './path-builder';\nimport { deepIterate, deepClone } from '../../utils';\nimport { JsonPatch } from './json-patch';\nimport { JsonDiff } from './json-patch.interface';\n\nexport class StateSerializer {\n\n  public serializers: Serializer<any>[];\n  public static knownCards: Card[] = [];\n\n  constructor() {\n    this.serializers = [\n      new GenericSerializer(State, 'State'),\n      new GenericSerializer(Rules, 'Rules'),\n      new GenericSerializer(Player, 'Player'),\n      new GenericSerializer(Marker, 'Marker'),\n      new CardSerializer(),\n      new CardListSerializer(),\n      new StateLogSerializer(),\n      new PromptSerializer()\n    ];\n  }\n\n  public serialize(state: State): SerializedState {\n    const serializers = this.serializers;\n    const refs: { node: Object, path: string }[] = [];\n    const pathBuilder = new PathBuilder();\n\n    const replacer: any = function(this: any, key: string, value: any) {\n      pathBuilder.goTo(this, key);\n      const path = pathBuilder.getPath();\n\n      if (value instanceof Array) {\n        return value;\n      }\n      if (value instanceof Object && value._type !== 'Ref') {\n        const ref = refs.find(r => r.node === value);\n        if (ref !== undefined) {\n          return { _type: 'Ref', path: ref.path };\n        }\n        refs.push({ node: value, path });\n        const name = value.constructor.name;\n        if (name === 'Object') {\n          return value;\n        }\n        const serializer = serializers.find(s => s.classes.some(c => value instanceof c));\n        if (serializer !== undefined) {\n          return serializer.serialize(value);\n        }\n        throw new GameError(GameCoreError.ERROR_SERIALIZER, `Unknown serializer for '${name}'.`);\n      }\n      return value;\n    };\n    return JSON.stringify([state.players, state], replacer);\n  }\n\n  public deserialize(serializedState: SerializedState): State {\n    const serializers = this.serializers;\n    const context = this.restoreContext(serializedState);\n\n    const reviver: any = function (this: any, key: string, value: any) {\n      if (value instanceof Array) {\n        return value;\n      }\n      if (value instanceof Object) {\n        const name = (value as Serialized)._type;\n        if (typeof name === 'string') {\n          if (name === 'Ref') {\n            return value;\n          }\n          const serializer = serializers.find(s => s.types.includes(name));\n          if (serializer !== undefined) {\n            return serializer.deserialize(value, context);\n          }\n          throw new GameError(GameCoreError.ERROR_SERIALIZER, `Unknown deserializer for '${name}'.`);\n        }\n      }\n      return value;\n    };\n\n    const parsed = JSON.parse(serializedState, reviver);\n\n    // Restore Refs\n    const pathBuilder = new PathBuilder();\n    deepIterate(parsed, (holder, key, value) => {\n      if (value instanceof Object && value._type === 'Ref') {\n        const reference = pathBuilder.getValue(parsed, value.path);\n        if (reference === undefined) {\n          throw new GameError(GameCoreError.ERROR_SERIALIZER, `Unknown reference '${value.path}'.`);\n        }\n        holder[key] = reference;\n      }\n    });\n\n    const state = parsed[1];\n    return state;\n  }\n\n  public serializeDiff(base: SerializedState | undefined, state: State): SerializedState {\n    if (base === undefined) {\n      return this.serialize(state);\n    }\n    const parsedBase = JSON.parse(base);\n\n    const players1 = parsedBase[0];\n    const state1 = parsedBase[1];\n\n    const serialized2 = this.serialize(state);\n    const parsed2 = JSON.parse(serialized2);\n    const players2 = parsed2[0];\n    const state2 = parsed2[1];\n\n    const jsonPatch = new JsonPatch();\n    const diff = jsonPatch.diff([players1, state1], [players2, state2]);\n    return JSON.stringify([ diff ]);\n  }\n\n  public deserializeDiff(base: SerializedState | undefined, data: SerializedState): State {\n    const updatedData = this.applyDiff(base, data);\n    return this.deserialize(updatedData);\n  }\n\n  public applyDiff(base: SerializedState | undefined, data: SerializedState): SerializedState {\n    if (base === undefined) {\n      return data;\n    }\n\n    const parsed = JSON.parse(data);\n    if (parsed.length > 1) {\n      return data;\n    }\n\n    let [ players, state ] = JSON.parse(base);\n    const diff: JsonDiff[] = parsed[0];\n\n    const jsonPatch = new JsonPatch();\n    [ players, state ] = jsonPatch.apply([ players, state ], diff);\n\n    return JSON.stringify([ players, state ]);\n  }\n\n  public static setKnownCards(cards: Card[]) {\n    StateSerializer.knownCards = cards;\n  }\n\n  private restoreContext(serializedState: SerializedState): SerializerContext {\n    const parsed = JSON.parse(serializedState);\n    const names: string[] = parsed[1].cardNames;\n    const cards: Card[] = [];\n    names.forEach((name, index) => {\n      let card: Card | undefined = StateSerializer.knownCards.find(c => c.fullName === name);\n      if (card === undefined) {\n        throw new GameError(GameCoreError.ERROR_SERIALIZER, `Unknown card '${name}'.`);\n      }\n      card = deepClone(card) as Card;\n      card.id = index;\n      cards.push(card);\n    });\n    return { cards };\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"7bd34cd97973b58a07178ef64db8738e324a7f41","contentHash":"853f5a9e830bb353e9213504dab2cfc3a224eaa3d586a3a5aef37d6b8c841a79"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/serializer/generic.serializer.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/serializer/generic.serializer.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":35}},"2":{"start":{"line":6,"column":8},"end":{"line":6,"column":41}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":47}},"4":{"start":{"line":8,"column":8},"end":{"line":8,"column":39}},"5":{"start":{"line":9,"column":8},"end":{"line":9,"column":38}},"6":{"start":{"line":12,"column":32},"end":{"line":12,"column":52}},"7":{"start":{"line":13,"column":8},"end":{"line":13,"column":64}},"8":{"start":{"line":16,"column":25},"end":{"line":16,"column":48}},"9":{"start":{"line":17,"column":8},"end":{"line":17,"column":26}},"10":{"start":{"line":18,"column":8},"end":{"line":18,"column":45}},"11":{"start":{"line":21,"column":0},"end":{"line":21,"column":46}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":4},"end":{"line":5,"column":5}},"loc":{"start":{"line":5,"column":47},"end":{"line":10,"column":5}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":11,"column":4},"end":{"line":11,"column":5}},"loc":{"start":{"line":11,"column":21},"end":{"line":14,"column":5}},"line":11},"2":{"name":"(anonymous_2)","decl":{"start":{"line":15,"column":4},"end":{"line":15,"column":5}},"loc":{"start":{"line":15,"column":31},"end":{"line":19,"column":5}},"line":15}},"branchMap":{},"s":{"0":1,"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1},"f":{"0":0,"1":0,"2":0},"b":{},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/serializer/generic.serializer.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/serializer/generic.serializer.ts"],"names":[],"mappings":";;;AAEA,MAAa,iBAAiB;IAK5B,YAAoB,YAAyB,EAAU,eAAuB;QAA1D,iBAAY,GAAZ,YAAY,CAAa;QAAU,oBAAe,GAAf,eAAe,CAAQ;QAC5E,IAAI,CAAC,KAAK,GAAG,CAAC,eAAe,CAAC,CAAC;QAC/B,IAAI,CAAC,OAAO,GAAG,CAAC,YAAY,CAAC,CAAC;IAChC,CAAC;IAEM,SAAS,CAAC,KAAQ;QACvB,MAAM,eAAe,GAAG,IAAI,CAAC,eAAe,CAAC;QAC7C,uBACE,KAAK,EAAE,eAAe,IAClB,KAAgB,EACpB;IACJ,CAAC;IAEM,WAAW,CAAC,IAAgB,EAAE,OAA0B;QAC7D,MAAM,QAAQ,GAAG,IAAI,IAAI,CAAC,YAAY,EAAE,CAAC;QACzC,OAAQ,IAAY,CAAC,KAAK,CAAC;QAC3B,OAAO,MAAM,CAAC,MAAM,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;IACvC,CAAC;CAEF;AAxBD,8CAwBC","sourcesContent":["import { SerializerContext, Serialized, Serializer } from './serializer.interface';\n\nexport class GenericSerializer<T extends Object> implements Serializer<T> {\n\n  public types: string[];\n  public classes: (new () => T)[];\n\n  constructor(private creatorClass: new () => T, private constructorName: string) {\n    this.types = [constructorName];\n    this.classes = [creatorClass];\n  }\n\n  public serialize(state: T): Serialized {\n    const constructorName = this.constructorName;\n    return {\n      _type: constructorName,\n      ...(state as Object)\n    };\n  }\n\n  public deserialize(data: Serialized, context: SerializerContext): T {\n    const instance = new this.creatorClass();\n    delete (data as any)._type;\n    return Object.assign(instance, data);\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"548583ca1d4b8730b9c14761460b8fe139dce862","contentHash":"20d78929ebd8afd07d94075156b0e792e31cc9a7feaf4c794d955e13a1f54c3f"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/state/player.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/state/player.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":24}},"2":{"start":{"line":4,"column":20},"end":{"line":4,"column":42}},"3":{"start":{"line":5,"column":27},"end":{"line":5,"column":65}},"4":{"start":{"line":6,"column":28},"end":{"line":6,"column":58}},"5":{"start":{"line":7,"column":22},"end":{"line":7,"column":46}},"6":{"start":{"line":10,"column":8},"end":{"line":10,"column":20}},"7":{"start":{"line":11,"column":8},"end":{"line":11,"column":23}},"8":{"start":{"line":12,"column":8},"end":{"line":12,"column":47}},"9":{"start":{"line":13,"column":8},"end":{"line":13,"column":47}},"10":{"start":{"line":14,"column":8},"end":{"line":14,"column":50}},"11":{"start":{"line":15,"column":8},"end":{"line":15,"column":50}},"12":{"start":{"line":16,"column":8},"end":{"line":16,"column":52}},"13":{"start":{"line":17,"column":8},"end":{"line":17,"column":64}},"14":{"start":{"line":18,"column":8},"end":{"line":18,"column":24}},"15":{"start":{"line":19,"column":8},"end":{"line":19,"column":25}},"16":{"start":{"line":20,"column":8},"end":{"line":20,"column":31}},"17":{"start":{"line":21,"column":8},"end":{"line":21,"column":34}},"18":{"start":{"line":22,"column":8},"end":{"line":22,"column":35}},"19":{"start":{"line":23,"column":8},"end":{"line":23,"column":33}},"20":{"start":{"line":24,"column":8},"end":{"line":24,"column":49}},"21":{"start":{"line":25,"column":8},"end":{"line":25,"column":55}},"22":{"start":{"line":26,"column":8},"end":{"line":26,"column":56}},"23":{"start":{"line":27,"column":8},"end":{"line":27,"column":29}},"24":{"start":{"line":30,"column":8},"end":{"line":30,"column":51}},"25":{"start":{"line":33,"column":8},"end":{"line":33,"column":73}},"26":{"start":{"line":33,"column":47},"end":{"line":33,"column":68}},"27":{"start":{"line":36,"column":26},"end":{"line":36,"column":54}},"28":{"start":{"line":38,"column":8},"end":{"line":41,"column":9}},"29":{"start":{"line":39,"column":12},"end":{"line":39,"column":84}},"30":{"start":{"line":40,"column":12},"end":{"line":40,"column":54}},"31":{"start":{"line":42,"column":8},"end":{"line":48,"column":9}},"32":{"start":{"line":42,"column":21},"end":{"line":42,"column":22}},"33":{"start":{"line":43,"column":12},"end":{"line":43,"column":57}},"34":{"start":{"line":44,"column":12},"end":{"line":47,"column":13}},"35":{"start":{"line":45,"column":16},"end":{"line":45,"column":87}},"36":{"start":{"line":46,"column":16},"end":{"line":46,"column":60}},"37":{"start":{"line":51,"column":27},"end":{"line":51,"column":53}},"38":{"start":{"line":52,"column":8},"end":{"line":57,"column":9}},"39":{"start":{"line":53,"column":12},"end":{"line":53,"column":39}},"40":{"start":{"line":54,"column":25},"end":{"line":54,"column":36}},"41":{"start":{"line":55,"column":12},"end":{"line":55,"column":49}},"42":{"start":{"line":56,"column":12},"end":{"line":56,"column":42}},"43":{"start":{"line":60,"column":0},"end":{"line":60,"column":24}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":9,"column":4},"end":{"line":9,"column":5}},"loc":{"start":{"line":9,"column":18},"end":{"line":28,"column":5}},"line":9},"1":{"name":"(anonymous_1)","decl":{"start":{"line":29,"column":4},"end":{"line":29,"column":5}},"loc":{"start":{"line":29,"column":24},"end":{"line":31,"column":5}},"line":29},"2":{"name":"(anonymous_2)","decl":{"start":{"line":32,"column":4},"end":{"line":32,"column":5}},"loc":{"start":{"line":32,"column":19},"end":{"line":34,"column":5}},"line":32},"3":{"name":"(anonymous_3)","decl":{"start":{"line":33,"column":34},"end":{"line":33,"column":35}},"loc":{"start":{"line":33,"column":47},"end":{"line":33,"column":68}},"line":33},"4":{"name":"(anonymous_4)","decl":{"start":{"line":35,"column":4},"end":{"line":35,"column":5}},"loc":{"start":{"line":35,"column":36},"end":{"line":49,"column":5}},"line":35},"5":{"name":"(anonymous_5)","decl":{"start":{"line":50,"column":4},"end":{"line":50,"column":5}},"loc":{"start":{"line":50,"column":26},"end":{"line":58,"column":5}},"line":50}},"branchMap":{"0":{"loc":{"start":{"line":38,"column":8},"end":{"line":41,"column":9}},"type":"if","locations":[{"start":{"line":38,"column":8},"end":{"line":41,"column":9}},{"start":{"line":38,"column":8},"end":{"line":41,"column":9}}],"line":38},"1":{"loc":{"start":{"line":44,"column":12},"end":{"line":47,"column":13}},"type":"if","locations":[{"start":{"line":44,"column":12},"end":{"line":47,"column":13}},{"start":{"line":44,"column":12},"end":{"line":47,"column":13}}],"line":44},"2":{"loc":{"start":{"line":52,"column":8},"end":{"line":57,"column":9}},"type":"if","locations":[{"start":{"line":52,"column":8},"end":{"line":57,"column":9}},{"start":{"line":52,"column":8},"end":{"line":57,"column":9}}],"line":52}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":67,"7":67,"8":67,"9":67,"10":67,"11":67,"12":67,"13":67,"14":67,"15":67,"16":67,"17":67,"18":67,"19":67,"20":67,"21":67,"22":67,"23":67,"24":0,"25":0,"26":0,"27":569,"28":569,"29":557,"30":557,"31":569,"32":569,"33":2719,"34":2719,"35":2719,"36":2719,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":1},"f":{"0":67,"1":0,"2":0,"3":0,"4":569,"5":0},"b":{"0":[557,12],"1":[2719,0],"2":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/state/player.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/state/player.ts"],"names":[],"mappings":";;;AAAA,2CAAuC;AACvC,kEAA+E;AAE/E,2DAAsD;AACtD,+CAAuC;AAIvC,MAAa,MAAM;IAAnB;QAKE,OAAE,GAAW,CAAC,CAAC;QAEf,SAAI,GAAW,EAAE,CAAC;QAElB,SAAI,GAAa,IAAI,oBAAQ,EAAE,CAAC;QAEhC,SAAI,GAAa,IAAI,oBAAQ,EAAE,CAAC;QAEhC,YAAO,GAAa,IAAI,oBAAQ,EAAE,CAAC;QAEnC,YAAO,GAAa,IAAI,oBAAQ,EAAE,CAAC;QAEnC,cAAS,GAAa,IAAI,oBAAQ,EAAE,CAAC;QAErC,WAAM,GAAoB,IAAI,mCAAe,EAAE,CAAC;QAEhD,UAAK,GAAsB,EAAE,CAAC;QAE9B,WAAM,GAAe,EAAE,CAAC;QAExB,kBAAa,GAAW,CAAC,CAAC;QAE1B,qBAAgB,GAAW,CAAC,CAAC;QAE7B,sBAAiB,GAAW,CAAC,CAAC;QAE9B,oBAAe,GAAW,CAAC,CAAC;QAE5B,WAAM,GAAG,IAAI,oBAAM,EAAE,CAAC;QAEtB,iBAAY,GAAG,IAAI,oBAAM,EAAE,CAAC;QAE5B,kBAAa,GAAG,IAAI,oBAAM,EAAE,CAAC;QAE7B,eAAU,GAAW,EAAE,CAAC;IAuC1B,CAAC;IA7EC,MAAM,CAAC,KAAY,EAAE,IAAuB;QAC1C,MAAM,IAAI,KAAK,CAAC,yBAAyB,CAAC,CAAC;IAC7C,CAAC;IAwCD,YAAY;QACV,OAAO,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE,CAAC,EAAE,EAAE,CAAC,IAAI,GAAG,CAAC,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;IACnE,CAAC;IAED,cAAc,CACZ,MAAkB,EAClB,OAA0F;QAE1F,IAAI,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC,cAAc,EAAE,CAAC;QAC/C,IAAI,MAAkB,CAAC;QAEvB,IAAI,WAAW,KAAK,SAAS,EAAE;YAC7B,MAAM,GAAG,EAAE,MAAM,EAAE,IAAI,EAAE,2BAAQ,CAAC,MAAM,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC;YACrD,OAAO,CAAC,IAAI,CAAC,MAAM,EAAE,WAAW,EAAE,MAAM,CAAC,CAAC;SAC3C;QAED,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC1C,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,cAAc,EAAE,CAAC;YAC7C,IAAI,WAAW,KAAK,SAAS,EAAE;gBAC7B,MAAM,GAAG,EAAE,MAAM,EAAE,IAAI,EAAE,2BAAQ,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC;gBACpD,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,WAAW,EAAE,MAAM,CAAC,CAAC;aAC7C;SACF;IACH,CAAC;IAED,aAAa,CAAC,MAAuB;QACnC,MAAM,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;QAC9C,IAAI,UAAU,KAAK,CAAC,CAAC,EAAE;YACrB,IAAI,CAAC,MAAM,CAAC,YAAY,EAAE,CAAC;YAC3B,MAAM,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC;YACzB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;YACrC,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,GAAG,IAAI,CAAC;SAC/B;IACH,CAAC;CAEF;AA9ED,wBA8EC","sourcesContent":["import { CardList } from './card-list';\nimport { CardTarget, PlayerType, SlotType } from '../actions/play-card-action';\nimport { PokemonCard } from '../card/pokemon-card';\nimport { PokemonCardList } from './pokemon-card-list';\nimport { Marker } from './card-marker';\nimport { ChooseCardsPrompt } from '../prompts/choose-cards-prompt';\nimport { State } from './state';\n\nexport class Player {\n  prompt(state: State, arg1: ChooseCardsPrompt) {\n    throw new Error('Method not implemented.');\n  }\n\n  id: number = 0;\n\n  name: string = '';\n\n  deck: CardList = new CardList();\n\n  hand: CardList = new CardList();\n\n  discard: CardList = new CardList();\n\n  stadium: CardList = new CardList();\n\n  supporter: CardList = new CardList();\n\n  active: PokemonCardList = new PokemonCardList();\n\n  bench: PokemonCardList[] = [];\n\n  prizes: CardList[] = [];\n\n  retreatedTurn: number = 0;\n\n  energyPlayedTurn: number = 0;\n  \n  stadiumPlayedTurn: number = 0;\n\n  stadiumUsedTurn: number = 0;\n\n  marker = new Marker();\n\n  attackMarker = new Marker();\n\n  abilityMarker = new Marker();\n\n  avatarName: string = '';\n  usedRapidStrikeSearchThisTurn: any;\n  usedExcitingStageThisTurn: any;\n\n  getPrizeLeft(): number {\n    return this.prizes.reduce((left, p) => left + p.cards.length, 0);\n  }\n\n  forEachPokemon(\n    player: PlayerType,\n    handler: (cardList: PokemonCardList, pokemonCard: PokemonCard, target: CardTarget) => void\n  ): void {\n    let pokemonCard = this.active.getPokemonCard();\n    let target: CardTarget;\n\n    if (pokemonCard !== undefined) {\n      target = { player, slot: SlotType.ACTIVE, index: 0 };\n      handler(this.active, pokemonCard, target);\n    }\n\n    for (let i = 0; i < this.bench.length; i++) {\n      pokemonCard = this.bench[i].getPokemonCard();\n      if (pokemonCard !== undefined) {\n        target = { player, slot: SlotType.BENCH, index: i };\n        handler(this.bench[i], pokemonCard, target);\n      }\n    }\n  }\n\n  switchPokemon(target: PokemonCardList) {\n    const benchIndex = this.bench.indexOf(target);\n    if (benchIndex !== -1) {\n      this.active.clearEffects();\n      const temp = this.active;\n      this.active = this.bench[benchIndex];\n      this.bench[benchIndex] = temp;\n    }\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"6676888e8935a638bd66a3d8a94cd4edf388e8ef","contentHash":"b03d1ea0e87063ef67913a21438a43bff50d369333d83553b8d52ab864b89852"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/state/card-list.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/state/card-list.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":26}},"2":{"start":{"line":4,"column":23},"end":{"line":4,"column":58}},"3":{"start":{"line":5,"column":21},"end":{"line":5,"column":48}},"4":{"start":{"line":6,"column":23},"end":{"line":6,"column":52}},"5":{"start":{"line":9,"column":8},"end":{"line":9,"column":24}},"6":{"start":{"line":10,"column":8},"end":{"line":10,"column":30}},"7":{"start":{"line":11,"column":8},"end":{"line":11,"column":30}},"8":{"start":{"line":14,"column":25},"end":{"line":14,"column":39}},"9":{"start":{"line":15,"column":28},"end":{"line":15,"column":68}},"10":{"start":{"line":16,"column":8},"end":{"line":22,"column":11}},"11":{"start":{"line":17,"column":25},"end":{"line":17,"column":60}},"12":{"start":{"line":18,"column":12},"end":{"line":20,"column":13}},"13":{"start":{"line":19,"column":16},"end":{"line":19,"column":100}},"14":{"start":{"line":21,"column":12},"end":{"line":21,"column":24}},"15":{"start":{"line":23,"column":8},"end":{"line":23,"column":24}},"16":{"start":{"line":27,"column":8},"end":{"line":29,"column":9}},"17":{"start":{"line":28,"column":12},"end":{"line":28,"column":19}},"18":{"start":{"line":31,"column":26},"end":{"line":31,"column":39}},"19":{"start":{"line":32,"column":8},"end":{"line":32,"column":40}},"20":{"start":{"line":32,"column":33},"end":{"line":32,"column":38}},"21":{"start":{"line":33,"column":8},"end":{"line":37,"column":9}},"22":{"start":{"line":33,"column":21},"end":{"line":33,"column":22}},"23":{"start":{"line":34,"column":12},"end":{"line":36,"column":13}},"24":{"start":{"line":35,"column":16},"end":{"line":35,"column":23}},"25":{"start":{"line":39,"column":21},"end":{"line":39,"column":39}},"26":{"start":{"line":40,"column":8},"end":{"line":42,"column":9}},"27":{"start":{"line":40,"column":21},"end":{"line":40,"column":22}},"28":{"start":{"line":41,"column":12},"end":{"line":41,"column":43}},"29":{"start":{"line":45,"column":8},"end":{"line":47,"column":9}},"30":{"start":{"line":46,"column":12},"end":{"line":46,"column":38}},"31":{"start":{"line":48,"column":8},"end":{"line":48,"column":51}},"32":{"start":{"line":49,"column":22},"end":{"line":49,"column":49}},"33":{"start":{"line":50,"column":8},"end":{"line":50,"column":41}},"34":{"start":{"line":53,"column":8},"end":{"line":59,"column":9}},"35":{"start":{"line":53,"column":21},"end":{"line":53,"column":22}},"36":{"start":{"line":54,"column":26},"end":{"line":54,"column":54}},"37":{"start":{"line":55,"column":12},"end":{"line":58,"column":13}},"38":{"start":{"line":56,"column":29},"end":{"line":56,"column":56}},"39":{"start":{"line":57,"column":16},"end":{"line":57,"column":48}},"40":{"start":{"line":62,"column":8},"end":{"line":62,"column":46}},"41":{"start":{"line":65,"column":8},"end":{"line":65,"column":51}},"42":{"start":{"line":66,"column":8},"end":{"line":66,"column":42}},"43":{"start":{"line":69,"column":8},"end":{"line":80,"column":11}},"44":{"start":{"line":70,"column":12},"end":{"line":78,"column":13}},"45":{"start":{"line":71,"column":16},"end":{"line":77,"column":17}},"46":{"start":{"line":72,"column":34},"end":{"line":72,"column":40}},"47":{"start":{"line":73,"column":37},"end":{"line":73,"column":47}},"48":{"start":{"line":74,"column":20},"end":{"line":76,"column":21}},"49":{"start":{"line":75,"column":24},"end":{"line":75,"column":37}},"50":{"start":{"line":79,"column":12},"end":{"line":79,"column":24}},"51":{"start":{"line":83,"column":8},"end":{"line":83,"column":41}},"52":{"start":{"line":86,"column":0},"end":{"line":86,"column":28}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":8,"column":4},"end":{"line":8,"column":5}},"loc":{"start":{"line":8,"column":18},"end":{"line":12,"column":5}},"line":8},"1":{"name":"(anonymous_1)","decl":{"start":{"line":13,"column":4},"end":{"line":13,"column":5}},"loc":{"start":{"line":13,"column":27},"end":{"line":24,"column":5}},"line":13},"2":{"name":"(anonymous_2)","decl":{"start":{"line":16,"column":35},"end":{"line":16,"column":36}},"loc":{"start":{"line":16,"column":47},"end":{"line":22,"column":9}},"line":16},"3":{"name":"(anonymous_3)","decl":{"start":{"line":25,"column":4},"end":{"line":25,"column":5}},"loc":{"start":{"line":25,"column":22},"end":{"line":43,"column":5}},"line":25},"4":{"name":"(anonymous_4)","decl":{"start":{"line":32,"column":23},"end":{"line":32,"column":24}},"loc":{"start":{"line":32,"column":33},"end":{"line":32,"column":38}},"line":32},"5":{"name":"(anonymous_5)","decl":{"start":{"line":44,"column":4},"end":{"line":44,"column":5}},"loc":{"start":{"line":44,"column":31},"end":{"line":51,"column":5}},"line":44},"6":{"name":"(anonymous_6)","decl":{"start":{"line":52,"column":4},"end":{"line":52,"column":5}},"loc":{"start":{"line":52,"column":36},"end":{"line":60,"column":5}},"line":52},"7":{"name":"(anonymous_7)","decl":{"start":{"line":61,"column":4},"end":{"line":61,"column":5}},"loc":{"start":{"line":61,"column":34},"end":{"line":63,"column":5}},"line":61},"8":{"name":"(anonymous_8)","decl":{"start":{"line":64,"column":4},"end":{"line":64,"column":5}},"loc":{"start":{"line":64,"column":19},"end":{"line":67,"column":5}},"line":64},"9":{"name":"(anonymous_9)","decl":{"start":{"line":68,"column":4},"end":{"line":68,"column":5}},"loc":{"start":{"line":68,"column":18},"end":{"line":81,"column":5}},"line":68},"10":{"name":"(anonymous_10)","decl":{"start":{"line":69,"column":33},"end":{"line":69,"column":34}},"loc":{"start":{"line":69,"column":38},"end":{"line":80,"column":9}},"line":69},"11":{"name":"(anonymous_11)","decl":{"start":{"line":82,"column":4},"end":{"line":82,"column":5}},"loc":{"start":{"line":82,"column":17},"end":{"line":84,"column":5}},"line":82}},"branchMap":{"0":{"loc":{"start":{"line":18,"column":12},"end":{"line":20,"column":13}},"type":"if","locations":[{"start":{"line":18,"column":12},"end":{"line":20,"column":13}},{"start":{"line":18,"column":12},"end":{"line":20,"column":13}}],"line":18},"1":{"loc":{"start":{"line":27,"column":8},"end":{"line":29,"column":9}},"type":"if","locations":[{"start":{"line":27,"column":8},"end":{"line":29,"column":9}},{"start":{"line":27,"column":8},"end":{"line":29,"column":9}}],"line":27},"2":{"loc":{"start":{"line":34,"column":12},"end":{"line":36,"column":13}},"type":"if","locations":[{"start":{"line":34,"column":12},"end":{"line":36,"column":13}},{"start":{"line":34,"column":12},"end":{"line":36,"column":13}}],"line":34},"3":{"loc":{"start":{"line":45,"column":8},"end":{"line":47,"column":9}},"type":"if","locations":[{"start":{"line":45,"column":8},"end":{"line":47,"column":9}},{"start":{"line":45,"column":8},"end":{"line":47,"column":9}}],"line":45},"4":{"loc":{"start":{"line":55,"column":12},"end":{"line":58,"column":13}},"type":"if","locations":[{"start":{"line":55,"column":12},"end":{"line":58,"column":13}},{"start":{"line":55,"column":12},"end":{"line":58,"column":13}}],"line":55},"5":{"loc":{"start":{"line":64,"column":8},"end":{"line":64,"column":17}},"type":"default-arg","locations":[{"start":{"line":64,"column":16},"end":{"line":64,"column":17}}],"line":64},"6":{"loc":{"start":{"line":71,"column":16},"end":{"line":77,"column":17}},"type":"if","locations":[{"start":{"line":71,"column":16},"end":{"line":77,"column":17}},{"start":{"line":71,"column":16},"end":{"line":77,"column":17}}],"line":71},"7":{"loc":{"start":{"line":74,"column":20},"end":{"line":76,"column":21}},"type":"if","locations":[{"start":{"line":74,"column":20},"end":{"line":76,"column":21}},{"start":{"line":74,"column":20},"end":{"line":76,"column":21}}],"line":74}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":740,"6":740,"7":740,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":159,"35":159,"36":159,"37":159,"38":159,"39":159,"40":159,"41":0,"42":0,"43":50,"44":64,"45":58,"46":58,"47":58,"48":58,"49":47,"50":17,"51":0,"52":1},"f":{"0":740,"1":0,"2":0,"3":0,"4":0,"5":0,"6":159,"7":159,"8":0,"9":50,"10":64,"11":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[159,0],"5":[0],"6":[58,0],"7":[47,11]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/state/card-list.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/state/card-list.ts"],"names":[],"mappings":"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","sourcesContent":["import { Card } from '../card/card';\nimport { CardManager } from '../../cards/card-manager';\nimport { GameError } from '../../game-error';\nimport { GameMessage } from '../../game-message';\n\nexport class CardList {\n\n  public cards: Card[] = [];\n\n  public isPublic: boolean = false;\n\n  public isSecret: boolean = false;\n\n  public static fromList(names: string[]): CardList {\n    const cardList = new CardList();\n    const cardManager = CardManager.getInstance();\n    cardList.cards = names.map(cardName => {\n      const card = cardManager.getCardByName(cardName);\n      if (card === undefined) {\n        throw new GameError(GameMessage.UNKNOWN_CARD, cardName);\n      }\n      return card;\n    });\n    return cardList;\n  }\n\n  public applyOrder(order: number[]) {\n    // Check if order is valid, same length\n    if (this.cards.length !== order.length) {\n      return;\n    }\n    // Contains all elements exacly one time\n    const orderCopy = order.slice();\n    orderCopy.sort((a, b) => a - b);\n    for (let i = 0; i < orderCopy.length; i++) {\n      if (i !== orderCopy[i]) {\n        return;\n      }\n    }\n    // Apply order\n    const copy = this.cards.slice();\n    for (let i = 0; i < order.length; i++) {\n      this.cards[i] = copy[order[i]];\n    }\n  }\n\n  public moveTo(destination: CardList, count?: number): void {\n    if (count === undefined) {\n      count = this.cards.length;\n    }\n\n    count = Math.min(count, this.cards.length);\n    const cards = this.cards.splice(0, count);\n    destination.cards.push(...cards);\n  }\n\n  public moveCardsTo(cards: Card[], destination: CardList): void {\n    for (let i = 0; i < cards.length; i++) {\n      const index = this.cards.indexOf(cards[i]);\n      if (index !== -1) {\n        const card = this.cards.splice(index, 1);\n        destination.cards.push(card[0]);\n      }\n    }\n  }\n\n  public moveCardTo(card: Card, destination: CardList): void {\n    this.moveCardsTo([card], destination);\n  }\n\n  public top(count: number = 1): Card[] {\n    count = Math.min(count, this.cards.length);\n    return this.cards.slice(0, count);\n  }\n\n  public filter(query: Partial<Card>): Card[] {\n    return this.cards.filter(c => {\n      for (const key in query) {\n        if (Object.prototype.hasOwnProperty.call(query, key)) {\n          const value: any = (c as any)[key];\n          const expected: any = (query as any)[key];\n          if (value !== expected) {\n            return false;\n          }\n        }\n      }\n      return true;\n    });\n  }\n\n  public count(query: Partial<Card>): number {\n    return this.filter(query).length;\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"13f34a8ee20d9e6735c29aaab957d4dc4c88783f","contentHash":"9c7ace41449af5b95d0d17995e9193f8bdcfb7fee879acb4ac1acd500b1ba2d9"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/state/pokemon-card-list.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/state/pokemon-card-list.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":33}},"2":{"start":{"line":4,"column":20},"end":{"line":4,"column":42}},"3":{"start":{"line":5,"column":22},"end":{"line":5,"column":46}},"4":{"start":{"line":6,"column":21},"end":{"line":6,"column":50}},"5":{"start":{"line":9,"column":8},"end":{"line":9,"column":28}},"6":{"start":{"line":10,"column":8},"end":{"line":10,"column":24}},"7":{"start":{"line":11,"column":8},"end":{"line":11,"column":36}},"8":{"start":{"line":12,"column":8},"end":{"line":12,"column":31}},"9":{"start":{"line":13,"column":8},"end":{"line":13,"column":29}},"10":{"start":{"line":14,"column":8},"end":{"line":14,"column":49}},"11":{"start":{"line":15,"column":8},"end":{"line":15,"column":35}},"12":{"start":{"line":18,"column":23},"end":{"line":18,"column":25}},"13":{"start":{"line":19,"column":8},"end":{"line":23,"column":9}},"14":{"start":{"line":20,"column":12},"end":{"line":22,"column":13}},"15":{"start":{"line":21,"column":16},"end":{"line":21,"column":34}},"16":{"start":{"line":24,"column":8},"end":{"line":24,"column":22}},"17":{"start":{"line":27,"column":25},"end":{"line":27,"column":43}},"18":{"start":{"line":28,"column":8},"end":{"line":30,"column":9}},"19":{"start":{"line":29,"column":12},"end":{"line":29,"column":49}},"20":{"start":{"line":33,"column":25},"end":{"line":33,"column":43}},"21":{"start":{"line":34,"column":8},"end":{"line":36,"column":9}},"22":{"start":{"line":35,"column":12},"end":{"line":35,"column":25}},"23":{"start":{"line":37,"column":8},"end":{"line":37,"column":62}},"24":{"start":{"line":40,"column":8},"end":{"line":40,"column":33}},"25":{"start":{"line":43,"column":8},"end":{"line":43,"column":33}},"26":{"start":{"line":44,"column":8},"end":{"line":44,"column":36}},"27":{"start":{"line":45,"column":8},"end":{"line":45,"column":31}},"28":{"start":{"line":46,"column":8},"end":{"line":46,"column":29}},"29":{"start":{"line":47,"column":8},"end":{"line":49,"column":9}},"30":{"start":{"line":48,"column":12},"end":{"line":48,"column":28}},"31":{"start":{"line":50,"column":8},"end":{"line":52,"column":9}},"32":{"start":{"line":51,"column":12},"end":{"line":51,"column":34}},"33":{"start":{"line":55,"column":8},"end":{"line":57,"column":9}},"34":{"start":{"line":56,"column":12},"end":{"line":56,"column":19}},"35":{"start":{"line":58,"column":8},"end":{"line":59,"column":35}},"36":{"start":{"line":59,"column":25},"end":{"line":59,"column":33}},"37":{"start":{"line":62,"column":8},"end":{"line":64,"column":9}},"38":{"start":{"line":63,"column":12},"end":{"line":63,"column":35}},"39":{"start":{"line":65,"column":8},"end":{"line":67,"column":9}},"40":{"start":{"line":66,"column":12},"end":{"line":66,"column":33}},"41":{"start":{"line":68,"column":8},"end":{"line":70,"column":9}},"42":{"start":{"line":69,"column":12},"end":{"line":69,"column":19}},"43":{"start":{"line":71,"column":8},"end":{"line":74,"column":9}},"44":{"start":{"line":72,"column":12},"end":{"line":72,"column":44}},"45":{"start":{"line":73,"column":12},"end":{"line":73,"column":19}},"46":{"start":{"line":75,"column":8},"end":{"line":79,"column":33}},"47":{"start":{"line":75,"column":68},"end":{"line":79,"column":31}},"48":{"start":{"line":80,"column":8},"end":{"line":80,"column":40}},"49":{"start":{"line":83,"column":0},"end":{"line":83,"column":42}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":8,"column":4},"end":{"line":8,"column":5}},"loc":{"start":{"line":8,"column":18},"end":{"line":16,"column":5}},"line":8},"1":{"name":"(anonymous_1)","decl":{"start":{"line":17,"column":4},"end":{"line":17,"column":5}},"loc":{"start":{"line":17,"column":18},"end":{"line":25,"column":5}},"line":17},"2":{"name":"(anonymous_2)","decl":{"start":{"line":26,"column":4},"end":{"line":26,"column":5}},"loc":{"start":{"line":26,"column":21},"end":{"line":31,"column":5}},"line":26},"3":{"name":"(anonymous_3)","decl":{"start":{"line":32,"column":4},"end":{"line":32,"column":5}},"loc":{"start":{"line":32,"column":14},"end":{"line":38,"column":5}},"line":32},"4":{"name":"(anonymous_4)","decl":{"start":{"line":39,"column":4},"end":{"line":39,"column":5}},"loc":{"start":{"line":39,"column":25},"end":{"line":41,"column":5}},"line":39},"5":{"name":"(anonymous_5)","decl":{"start":{"line":42,"column":4},"end":{"line":42,"column":5}},"loc":{"start":{"line":42,"column":19},"end":{"line":53,"column":5}},"line":42},"6":{"name":"(anonymous_6)","decl":{"start":{"line":54,"column":4},"end":{"line":54,"column":5}},"loc":{"start":{"line":54,"column":31},"end":{"line":60,"column":5}},"line":54},"7":{"name":"(anonymous_7)","decl":{"start":{"line":59,"column":20},"end":{"line":59,"column":21}},"loc":{"start":{"line":59,"column":25},"end":{"line":59,"column":33}},"line":59},"8":{"name":"(anonymous_8)","decl":{"start":{"line":61,"column":4},"end":{"line":61,"column":5}},"loc":{"start":{"line":61,"column":28},"end":{"line":81,"column":5}},"line":61},"9":{"name":"(anonymous_9)","decl":{"start":{"line":75,"column":63},"end":{"line":75,"column":64}},"loc":{"start":{"line":75,"column":68},"end":{"line":79,"column":31}},"line":75}},"branchMap":{"0":{"loc":{"start":{"line":20,"column":12},"end":{"line":22,"column":13}},"type":"if","locations":[{"start":{"line":20,"column":12},"end":{"line":22,"column":13}},{"start":{"line":20,"column":12},"end":{"line":22,"column":13}}],"line":20},"1":{"loc":{"start":{"line":20,"column":16},"end":{"line":20,"column":87}},"type":"binary-expr","locations":[{"start":{"line":20,"column":16},"end":{"line":20,"column":65}},{"start":{"line":20,"column":69},"end":{"line":20,"column":87}}],"line":20},"2":{"loc":{"start":{"line":28,"column":8},"end":{"line":30,"column":9}},"type":"if","locations":[{"start":{"line":28,"column":8},"end":{"line":30,"column":9}},{"start":{"line":28,"column":8},"end":{"line":30,"column":9}}],"line":28},"3":{"loc":{"start":{"line":34,"column":8},"end":{"line":36,"column":9}},"type":"if","locations":[{"start":{"line":34,"column":8},"end":{"line":36,"column":9}},{"start":{"line":34,"column":8},"end":{"line":36,"column":9}}],"line":34},"4":{"loc":{"start":{"line":47,"column":8},"end":{"line":49,"column":9}},"type":"if","locations":[{"start":{"line":47,"column":8},"end":{"line":49,"column":9}},{"start":{"line":47,"column":8},"end":{"line":49,"column":9}}],"line":47},"5":{"loc":{"start":{"line":50,"column":8},"end":{"line":52,"column":9}},"type":"if","locations":[{"start":{"line":50,"column":8},"end":{"line":52,"column":9}},{"start":{"line":50,"column":8},"end":{"line":52,"column":9}}],"line":50},"6":{"loc":{"start":{"line":50,"column":12},"end":{"line":50,"column":56}},"type":"binary-expr","locations":[{"start":{"line":50,"column":12},"end":{"line":50,"column":21}},{"start":{"line":50,"column":25},"end":{"line":50,"column":56}}],"line":50},"7":{"loc":{"start":{"line":55,"column":8},"end":{"line":57,"column":9}},"type":"if","locations":[{"start":{"line":55,"column":8},"end":{"line":57,"column":9}},{"start":{"line":55,"column":8},"end":{"line":57,"column":9}}],"line":55},"8":{"loc":{"start":{"line":62,"column":8},"end":{"line":64,"column":9}},"type":"if","locations":[{"start":{"line":62,"column":8},"end":{"line":64,"column":9}},{"start":{"line":62,"column":8},"end":{"line":64,"column":9}}],"line":62},"9":{"loc":{"start":{"line":65,"column":8},"end":{"line":67,"column":9}},"type":"if","locations":[{"start":{"line":65,"column":8},"end":{"line":67,"column":9}},{"start":{"line":65,"column":8},"end":{"line":67,"column":9}}],"line":65},"10":{"loc":{"start":{"line":68,"column":8},"end":{"line":70,"column":9}},"type":"if","locations":[{"start":{"line":68,"column":8},"end":{"line":70,"column":9}},{"start":{"line":68,"column":8},"end":{"line":70,"column":9}}],"line":68},"11":{"loc":{"start":{"line":71,"column":8},"end":{"line":74,"column":9}},"type":"if","locations":[{"start":{"line":71,"column":8},"end":{"line":74,"column":9}},{"start":{"line":71,"column":8},"end":{"line":74,"column":9}}],"line":71},"12":{"loc":{"start":{"line":71,"column":12},"end":{"line":71,"column":104}},"type":"binary-expr","locations":[{"start":{"line":71,"column":12},"end":{"line":71,"column":57}},{"start":{"line":71,"column":61},"end":{"line":71,"column":104}}],"line":71}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":355,"6":355,"7":355,"8":355,"9":355,"10":355,"11":355,"12":4865,"13":4865,"14":5918,"15":4853,"16":4865,"17":4865,"18":4865,"19":4853,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":1},"f":{"0":355,"1":4865,"2":4865,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"b":{"0":[4853,1065],"1":[5918,4853],"2":[4853,12],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/state/pokemon-card-list.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/state/pokemon-card-list.ts"],"names":[],"mappings":"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","sourcesContent":["import { CardList } from './card-list';\nimport { Marker } from './card-marker';\nimport { SpecialCondition, Stage, SuperType } from '../card/card-types';\nimport { PokemonCard } from '../card/pokemon-card';\nimport { Card } from '../card/card';\n\nexport class PokemonCardList extends CardList {\n\n  public damage: number = 0;\n\n  public specialConditions: SpecialCondition[] = [];\n\n  public poisonDamage: number = 10;\n\n  public burnDamage: number = 20;\n\n  public marker = new Marker();\n\n  public pokemonPlayedTurn: number = 0;\n\n  // Some pokemon cards can be attached as a tool,\n  // we must remember, which card acts as a pokemon tool.\n  public tool: Card | undefined;\n\n  public getPokemons(): PokemonCard[] {\n    const result: PokemonCard[] = [];\n    for (const card of this.cards) {\n      if (card.superType === SuperType.POKEMON && card !== this.tool) {\n        result.push(card as PokemonCard);\n      }\n    }\n    return result;\n  }\n\n  public getPokemonCard(): PokemonCard | undefined {\n    const pokemons = this.getPokemons();\n    if (pokemons.length > 0) {\n      return pokemons[pokemons.length - 1];\n    }\n  }\n\n  public isBasic(): boolean {\n    const pokemons = this.getPokemons();\n    if (pokemons.length !== 1) {\n      return false;\n    }\n    return pokemons[0].stage === Stage.BASIC;\n  }\n\n  clearAttackEffects(): void {\n    this.marker.markers = [];\n  }\n\n  clearEffects(): void {\n    this.marker.markers = [];\n    this.specialConditions = [];\n    this.poisonDamage = 10;\n    this.burnDamage = 20;\n    if (this.cards.length === 0) {\n      this.damage = 0;\n    }\n    if (this.tool && !this.cards.includes(this.tool)) {\n      this.tool = undefined;\n    }\n  }\n\n  removeSpecialCondition(sp: SpecialCondition): void {\n    if (!this.specialConditions.includes(sp)) {\n      return;\n    }\n    this.specialConditions = this.specialConditions\n      .filter(s => s !== sp);\n  }\n\n  addSpecialCondition(sp: SpecialCondition): void {\n    if (sp === SpecialCondition.POISONED) {\n      this.poisonDamage = 10;\n    }\n    if (sp === SpecialCondition.BURNED) {\n      this.burnDamage = 20;\n    }\n    if (this.specialConditions.includes(sp)) {\n      return;\n    }\n    if (sp === SpecialCondition.POISONED || sp === SpecialCondition.BURNED) {\n      this.specialConditions.push(sp);\n      return;\n    }\n    this.specialConditions = this.specialConditions.filter(s => [\n      SpecialCondition.PARALYZED,\n      SpecialCondition.CONFUSED,\n      SpecialCondition.ASLEEP\n    ].includes(s) === false);\n    this.specialConditions.push(sp);\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"cbc053d1eac4ffd4f7e18e9923a89cd6ef8ce63b","contentHash":"b2465be1d3e8f25ffa411b6ea91f0b4ddec0af88379c3d757f127f634b479597"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/state/card-marker.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/state/card-marker.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":24}},"2":{"start":{"line":6,"column":8},"end":{"line":6,"column":26}},"3":{"start":{"line":9,"column":8},"end":{"line":11,"column":9}},"4":{"start":{"line":10,"column":12},"end":{"line":10,"column":59}},"5":{"start":{"line":10,"column":42},"end":{"line":10,"column":57}},"6":{"start":{"line":12,"column":8},"end":{"line":12,"column":78}},"7":{"start":{"line":12,"column":38},"end":{"line":12,"column":76}},"8":{"start":{"line":15,"column":8},"end":{"line":17,"column":9}},"9":{"start":{"line":16,"column":12},"end":{"line":16,"column":19}},"10":{"start":{"line":18,"column":8},"end":{"line":21,"column":9}},"11":{"start":{"line":19,"column":12},"end":{"line":19,"column":69}},"12":{"start":{"line":19,"column":52},"end":{"line":19,"column":67}},"13":{"start":{"line":20,"column":12},"end":{"line":20,"column":19}},"14":{"start":{"line":22,"column":8},"end":{"line":22,"column":88}},"15":{"start":{"line":22,"column":48},"end":{"line":22,"column":86}},"16":{"start":{"line":25,"column":8},"end":{"line":27,"column":9}},"17":{"start":{"line":26,"column":12},"end":{"line":26,"column":19}},"18":{"start":{"line":28,"column":8},"end":{"line":28,"column":44}},"19":{"start":{"line":31,"column":0},"end":{"line":31,"column":24}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":4},"end":{"line":5,"column":5}},"loc":{"start":{"line":5,"column":18},"end":{"line":7,"column":5}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":8,"column":4},"end":{"line":8,"column":5}},"loc":{"start":{"line":8,"column":28},"end":{"line":13,"column":5}},"line":8},"2":{"name":"(anonymous_2)","decl":{"start":{"line":10,"column":37},"end":{"line":10,"column":38}},"loc":{"start":{"line":10,"column":42},"end":{"line":10,"column":57}},"line":10},"3":{"name":"(anonymous_3)","decl":{"start":{"line":12,"column":33},"end":{"line":12,"column":34}},"loc":{"start":{"line":12,"column":38},"end":{"line":12,"column":76}},"line":12},"4":{"name":"(anonymous_4)","decl":{"start":{"line":14,"column":4},"end":{"line":14,"column":5}},"loc":{"start":{"line":14,"column":31},"end":{"line":23,"column":5}},"line":14},"5":{"name":"(anonymous_5)","decl":{"start":{"line":19,"column":47},"end":{"line":19,"column":48}},"loc":{"start":{"line":19,"column":52},"end":{"line":19,"column":67}},"line":19},"6":{"name":"(anonymous_6)","decl":{"start":{"line":22,"column":43},"end":{"line":22,"column":44}},"loc":{"start":{"line":22,"column":48},"end":{"line":22,"column":86}},"line":22},"7":{"name":"(anonymous_7)","decl":{"start":{"line":24,"column":4},"end":{"line":24,"column":5}},"loc":{"start":{"line":24,"column":28},"end":{"line":29,"column":5}},"line":24}},"branchMap":{"0":{"loc":{"start":{"line":9,"column":8},"end":{"line":11,"column":9}},"type":"if","locations":[{"start":{"line":9,"column":8},"end":{"line":11,"column":9}},{"start":{"line":9,"column":8},"end":{"line":11,"column":9}}],"line":9},"1":{"loc":{"start":{"line":12,"column":38},"end":{"line":12,"column":76}},"type":"binary-expr","locations":[{"start":{"line":12,"column":38},"end":{"line":12,"column":57}},{"start":{"line":12,"column":61},"end":{"line":12,"column":76}}],"line":12},"2":{"loc":{"start":{"line":15,"column":8},"end":{"line":17,"column":9}},"type":"if","locations":[{"start":{"line":15,"column":8},"end":{"line":17,"column":9}},{"start":{"line":15,"column":8},"end":{"line":17,"column":9}}],"line":15},"3":{"loc":{"start":{"line":18,"column":8},"end":{"line":21,"column":9}},"type":"if","locations":[{"start":{"line":18,"column":8},"end":{"line":21,"column":9}},{"start":{"line":18,"column":8},"end":{"line":21,"column":9}}],"line":18},"4":{"loc":{"start":{"line":22,"column":48},"end":{"line":22,"column":86}},"type":"binary-expr","locations":[{"start":{"line":22,"column":48},"end":{"line":22,"column":67}},{"start":{"line":22,"column":71},"end":{"line":22,"column":86}}],"line":22},"5":{"loc":{"start":{"line":25,"column":8},"end":{"line":27,"column":9}},"type":"if","locations":[{"start":{"line":25,"column":8},"end":{"line":27,"column":9}},{"start":{"line":25,"column":8},"end":{"line":27,"column":9}}],"line":25}},"s":{"0":1,"1":1,"2":556,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":1},"f":{"0":556,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/state/card-marker.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/state/card-marker.ts"],"names":[],"mappings":";;;AAOA,MAAa,MAAM;IAAnB;QAES,YAAO,GAAiB,EAAE,CAAC;IA0BpC,CAAC;IAxBC,SAAS,CAAC,IAAY,EAAE,MAAa;QACnC,IAAI,MAAM,KAAK,SAAS,EAAE;YACxB,OAAO,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,KAAK,IAAI,CAAC,CAAC;SAChD;QACD,OAAO,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,MAAM,KAAK,MAAM,IAAI,CAAC,CAAC,IAAI,KAAK,IAAI,CAAC,CAAC;IACxE,CAAC;IAED,YAAY,CAAC,IAAY,EAAE,MAAa;QACtC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,MAAM,CAAC,EAAE;YACjC,OAAO;SACR;QACD,IAAI,MAAM,KAAK,SAAS,EAAE;YACxB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,KAAK,IAAI,CAAC,CAAC;YACzD,OAAO;SACR;QACD,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,MAAM,KAAK,MAAM,IAAI,CAAC,CAAC,IAAI,KAAK,IAAI,CAAC,CAAC;IAClF,CAAC;IAED,SAAS,CAAC,IAAY,EAAE,MAAY;QAClC,IAAI,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,MAAM,CAAC,EAAE;YAChC,OAAO;SACR;QACD,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC,CAAC;IACtC,CAAC;CACF;AA5BD,wBA4BC","sourcesContent":["import { Card } from '../card/card';\n\ninterface MarkerItem {\n  source: Card;\n  name: string;\n}\n\nexport class Marker {\n\n  public markers: MarkerItem[] = [];\n\n  hasMarker(name: string, source?: Card) {\n    if (source === undefined) {\n      return this.markers.some(c => c.name === name);\n    }\n    return this.markers.some(c => c.source === source && c.name === name);\n  }\n\n  removeMarker(name: string, source?: Card) {\n    if (!this.hasMarker(name, source)) {\n      return;\n    }\n    if (source === undefined) {\n      this.markers = this.markers.filter(c => c.name !== name);\n      return;\n    }\n    this.markers = this.markers.filter(c => c.source !== source || c.name !== name);\n  }\n\n  addMarker(name: string, source: Card) {\n    if (this.hasMarker(name, source)) {\n      return;\n    }\n    this.markers.push({ name, source });\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"705d7d7e2cccbe967f422cddb89081f11c0ed314","contentHash":"a95ac49b256b157af679f64c4d9f5bf09dd57910498768b6b5904542642ead43"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/serializer/card.serializer.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/serializer/card.serializer.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":32}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":44}},"3":{"start":{"line":5,"column":21},"end":{"line":5,"column":45}},"4":{"start":{"line":6,"column":23},"end":{"line":6,"column":49}},"5":{"start":{"line":9,"column":8},"end":{"line":9,"column":30}},"6":{"start":{"line":10,"column":8},"end":{"line":10,"column":37}},"7":{"start":{"line":13,"column":22},"end":{"line":13,"column":29}},"8":{"start":{"line":14,"column":8},"end":{"line":16,"column":9}},"9":{"start":{"line":15,"column":12},"end":{"line":15,"column":130}},"10":{"start":{"line":17,"column":8},"end":{"line":17,"column":40}},"11":{"start":{"line":20,"column":22},"end":{"line":20,"column":32}},"12":{"start":{"line":21,"column":21},"end":{"line":21,"column":41}},"13":{"start":{"line":22,"column":8},"end":{"line":24,"column":9}},"14":{"start":{"line":23,"column":12},"end":{"line":23,"column":131}},"15":{"start":{"line":25,"column":8},"end":{"line":25,"column":20}},"16":{"start":{"line":28,"column":0},"end":{"line":28,"column":40}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":8,"column":4},"end":{"line":8,"column":5}},"loc":{"start":{"line":8,"column":18},"end":{"line":11,"column":5}},"line":8},"1":{"name":"(anonymous_1)","decl":{"start":{"line":12,"column":4},"end":{"line":12,"column":5}},"loc":{"start":{"line":12,"column":20},"end":{"line":18,"column":5}},"line":12},"2":{"name":"(anonymous_2)","decl":{"start":{"line":19,"column":4},"end":{"line":19,"column":5}},"loc":{"start":{"line":19,"column":31},"end":{"line":26,"column":5}},"line":19}},"branchMap":{"0":{"loc":{"start":{"line":14,"column":8},"end":{"line":16,"column":9}},"type":"if","locations":[{"start":{"line":14,"column":8},"end":{"line":16,"column":9}},{"start":{"line":14,"column":8},"end":{"line":16,"column":9}}],"line":14},"1":{"loc":{"start":{"line":22,"column":8},"end":{"line":24,"column":9}},"type":"if","locations":[{"start":{"line":22,"column":8},"end":{"line":24,"column":9}},{"start":{"line":22,"column":8},"end":{"line":24,"column":9}}],"line":22}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":1},"f":{"0":0,"1":0,"2":0},"b":{"0":[0,0],"1":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/serializer/card.serializer.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/serializer/card.serializer.ts"],"names":[],"mappings":";;;AACA,6CAA0C;AAC1C,8CAA0C;AAC1C,kDAAgD;AAEhD,MAAa,cAAc;IAKzB;QAHgB,UAAK,GAAG,CAAC,MAAM,CAAC,CAAC;QACjB,YAAO,GAAG,CAAC,WAAI,CAAC,CAAC;IAEhB,CAAC;IAEX,SAAS,CAAC,IAAU;QACzB,MAAM,KAAK,GAAG,IAAI,CAAC,EAAE,CAAC;QACtB,IAAI,KAAK,KAAK,CAAC,CAAC,EAAE;YAChB,MAAM,IAAI,sBAAS,CAAC,4BAAa,CAAC,gBAAgB,EAAE,mBAAmB,IAAI,CAAC,QAAQ,IAAI,CAAC,CAAC;SAC3F;QAED,OAAO,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE,CAAC;IAClC,CAAC;IAEM,WAAW,CAAC,IAAgB,EAAE,OAA0B;QAC7D,MAAM,KAAK,GAAW,IAAI,CAAC,KAAK,CAAC;QACjC,MAAM,IAAI,GAAG,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;QAClC,IAAI,IAAI,KAAK,SAAS,EAAE;YACtB,MAAM,IAAI,sBAAS,CAAC,4BAAa,CAAC,gBAAgB,EAAE,4BAA4B,KAAK,IAAI,CAAC,CAAC;SAC5F;QACD,OAAO,IAAI,CAAC;IACd,CAAC;CAEF;AAzBD,wCAyBC","sourcesContent":["import { SerializerContext, Serialized, Serializer } from './serializer.interface';\nimport { Card } from '../store/card/card';\nimport { GameError } from '../game-error';\nimport { GameCoreError } from '../game-message';\n\nexport class CardSerializer implements Serializer<Card> {\n\n  public readonly types = ['Card'];\n  public readonly classes = [Card];\n\n  constructor () { }\n\n  public serialize(card: Card): Serialized {\n    const index = card.id;\n    if (index === -1) {\n      throw new GameError(GameCoreError.ERROR_SERIALIZER, `Card not found '${card.fullName}'.`);\n    }\n\n    return { _type: 'Card', index };\n  }\n\n  public deserialize(data: Serialized, context: SerializerContext): Card {\n    const index: number = data.index;\n    const card = context.cards[index];\n    if (card === undefined) {\n      throw new GameError(GameCoreError.ERROR_SERIALIZER, `Card not found on index '${index}'.`);\n    }\n    return card;\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"79ac00d8d51c3c9352691f1c3af6bd93e423896e","contentHash":"f177bdba8ce6f232356a8bc8a444e57754095cd754d1546144cdafbaf7fa277a"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/serializer/card-list.serializer.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/serializer/card-list.serializer.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":36}},"2":{"start":{"line":4,"column":20},"end":{"line":4,"column":55}},"3":{"start":{"line":5,"column":21},"end":{"line":5,"column":45}},"4":{"start":{"line":6,"column":23},"end":{"line":6,"column":49}},"5":{"start":{"line":7,"column":28},"end":{"line":7,"column":71}},"6":{"start":{"line":10,"column":8},"end":{"line":10,"column":53}},"7":{"start":{"line":11,"column":8},"end":{"line":11,"column":83}},"8":{"start":{"line":14,"column":21},"end":{"line":14,"column":48}},"9":{"start":{"line":15,"column":30},"end":{"line":15,"column":40}},"10":{"start":{"line":16,"column":8},"end":{"line":21,"column":9}},"11":{"start":{"line":17,"column":12},"end":{"line":17,"column":48}},"12":{"start":{"line":18,"column":12},"end":{"line":20,"column":13}},"13":{"start":{"line":19,"column":16},"end":{"line":19,"column":45}},"14":{"start":{"line":22,"column":8},"end":{"line":22,"column":126}},"15":{"start":{"line":22,"column":114},"end":{"line":22,"column":121}},"16":{"start":{"line":25,"column":25},"end":{"line":27,"column":40}},"17":{"start":{"line":28,"column":8},"end":{"line":28,"column":26}},"18":{"start":{"line":29,"column":8},"end":{"line":31,"column":9}},"19":{"start":{"line":30,"column":12},"end":{"line":30,"column":59}},"20":{"start":{"line":32,"column":24},"end":{"line":32,"column":34}},"21":{"start":{"line":33,"column":8},"end":{"line":33,"column":74}},"22":{"start":{"line":33,"column":42},"end":{"line":33,"column":72}},"23":{"start":{"line":34,"column":8},"end":{"line":34,"column":45}},"24":{"start":{"line":37,"column":21},"end":{"line":37,"column":41}},"25":{"start":{"line":38,"column":8},"end":{"line":40,"column":9}},"26":{"start":{"line":39,"column":12},"end":{"line":39,"column":131}},"27":{"start":{"line":41,"column":8},"end":{"line":41,"column":20}},"28":{"start":{"line":44,"column":0},"end":{"line":44,"column":48}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":9,"column":4},"end":{"line":9,"column":5}},"loc":{"start":{"line":9,"column":18},"end":{"line":12,"column":5}},"line":9},"1":{"name":"(anonymous_1)","decl":{"start":{"line":13,"column":4},"end":{"line":13,"column":5}},"loc":{"start":{"line":13,"column":24},"end":{"line":23,"column":5}},"line":13},"2":{"name":"(anonymous_2)","decl":{"start":{"line":22,"column":106},"end":{"line":22,"column":107}},"loc":{"start":{"line":22,"column":114},"end":{"line":22,"column":121}},"line":22},"3":{"name":"(anonymous_3)","decl":{"start":{"line":24,"column":4},"end":{"line":24,"column":5}},"loc":{"start":{"line":24,"column":31},"end":{"line":35,"column":5}},"line":24},"4":{"name":"(anonymous_4)","decl":{"start":{"line":33,"column":33},"end":{"line":33,"column":34}},"loc":{"start":{"line":33,"column":42},"end":{"line":33,"column":72}},"line":33},"5":{"name":"(anonymous_5)","decl":{"start":{"line":36,"column":4},"end":{"line":36,"column":5}},"loc":{"start":{"line":36,"column":30},"end":{"line":42,"column":5}},"line":36}},"branchMap":{"0":{"loc":{"start":{"line":16,"column":8},"end":{"line":21,"column":9}},"type":"if","locations":[{"start":{"line":16,"column":8},"end":{"line":21,"column":9}},{"start":{"line":16,"column":8},"end":{"line":21,"column":9}}],"line":16},"1":{"loc":{"start":{"line":18,"column":12},"end":{"line":20,"column":13}},"type":"if","locations":[{"start":{"line":18,"column":12},"end":{"line":20,"column":13}},{"start":{"line":18,"column":12},"end":{"line":20,"column":13}}],"line":18},"2":{"loc":{"start":{"line":25,"column":25},"end":{"line":27,"column":40}},"type":"cond-expr","locations":[{"start":{"line":26,"column":14},"end":{"line":26,"column":55}},{"start":{"line":27,"column":14},"end":{"line":27,"column":40}}],"line":25},"3":{"loc":{"start":{"line":29,"column":8},"end":{"line":31,"column":9}},"type":"if","locations":[{"start":{"line":29,"column":8},"end":{"line":31,"column":9}},{"start":{"line":29,"column":8},"end":{"line":31,"column":9}}],"line":29},"4":{"loc":{"start":{"line":38,"column":8},"end":{"line":40,"column":9}},"type":"if","locations":[{"start":{"line":38,"column":8},"end":{"line":40,"column":9}},{"start":{"line":38,"column":8},"end":{"line":40,"column":9}}],"line":38}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/serializer/card-list.serializer.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/serializer/card-list.serializer.ts"],"names":[],"mappings":";;;AACA,wDAAoD;AAEpD,8CAA0C;AAC1C,kDAAgD;AAChD,wEAAmE;AAEnE,MAAa,kBAAkB;IAK7B;QAHgB,UAAK,GAAG,CAAC,UAAU,EAAE,iBAAiB,CAAC,CAAC;QACxC,YAAO,GAAG,CAAC,oBAAQ,EAAE,mCAAe,CAAC,CAAC;IAErC,CAAC;IAEX,SAAS,CAAC,QAAkB;QACjC,MAAM,IAAI,qBAAa,QAAQ,CAAE,CAAC;QAClC,IAAI,eAAe,GAAG,UAAU,CAAC;QAEjC,IAAI,QAAQ,YAAY,mCAAe,EAAE;YACvC,eAAe,GAAG,iBAAiB,CAAC;YACpC,IAAI,QAAQ,CAAC,IAAI,KAAK,SAAS,EAAE;gBAC/B,IAAI,CAAC,IAAI,GAAG,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC;aAC9B;SACF;QAED,uCACK,IAAI,KACP,KAAK,EAAE,eAAe,EACtB,KAAK,EAAE,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,IAC1C;IACJ,CAAC;IAEM,WAAW,CAAC,IAAgB,EAAE,OAA0B;QAC7D,MAAM,QAAQ,GAAG,IAAI,CAAC,KAAK,KAAK,iBAAiB;YAC/C,CAAC,CAAC,IAAI,mCAAe,EAAE;YACvB,CAAC,CAAC,IAAI,oBAAQ,EAAE,CAAC;QAEnB,OAAQ,IAAY,CAAC,KAAK,CAAC;QAE3B,IAAI,IAAI,CAAC,IAAI,KAAK,SAAS,EAAE;YAC3B,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;SAChD;QAED,MAAM,OAAO,GAAa,IAAI,CAAC,KAAK,CAAC;QACrC,IAAI,CAAC,KAAK,GAAG,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC,CAAC;QAElE,OAAO,MAAM,CAAC,MAAM,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;IACvC,CAAC;IAEO,SAAS,CAAC,KAAa,EAAE,OAA0B;QACzD,MAAM,IAAI,GAAG,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;QAClC,IAAI,IAAI,KAAK,SAAS,EAAE;YACtB,MAAM,IAAI,sBAAS,CAAC,4BAAa,CAAC,gBAAgB,EAAE,4BAA4B,KAAK,IAAI,CAAC,CAAC;SAC5F;QACD,OAAO,IAAI,CAAC;IACd,CAAC;CAEF;AAlDD,gDAkDC","sourcesContent":["import { SerializerContext, Serialized, Serializer } from './serializer.interface';\nimport { CardList } from '../store/state/card-list';\nimport { Card } from '../store/card/card';\nimport { GameError } from '../game-error';\nimport { GameCoreError } from '../game-message';\nimport { PokemonCardList } from '../store/state/pokemon-card-list';\n\nexport class CardListSerializer implements Serializer<CardList> {\n\n  public readonly types = ['CardList', 'PokemonCardList'];\n  public readonly classes = [CardList, PokemonCardList];\n\n  constructor () { }\n\n  public serialize(cardList: CardList): Serialized {\n    const data: any = { ...cardList };\n    let constructorName = 'CardList';\n\n    if (cardList instanceof PokemonCardList) {\n      constructorName = 'PokemonCardList';\n      if (cardList.tool !== undefined) {\n        data.tool = cardList.tool.id;\n      }\n    }\n\n    return {\n      ...data,\n      _type: constructorName,\n      cards: cardList.cards.map(card => card.id)\n    };\n  }\n\n  public deserialize(data: Serialized, context: SerializerContext): CardList {\n    const instance = data._type === 'PokemonCardList'\n      ? new PokemonCardList()\n      : new CardList();\n\n    delete (data as any)._type;\n\n    if (data.tool !== undefined) {\n      data.tool = this.fromIndex(data.tool, context);\n    }\n\n    const indexes: number[] = data.cards;\n    data.cards = indexes.map(index => this.fromIndex(index, context));\n\n    return Object.assign(instance, data);\n  }\n\n  private fromIndex(index: number, context: SerializerContext): Card {\n    const card = context.cards[index];\n    if (card === undefined) {\n      throw new GameError(GameCoreError.ERROR_SERIALIZER, `Card not found on index '${index}'.`);\n    }\n    return card;\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"cc848eb68b25047acf7fb7d4f094640b8d10fdf6","contentHash":"f8f3d4cba4da75556be569e2e55f0569a74c6ed749e4a0687aa666c42cb43cfc"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/serializer/state-log.serializer.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/serializer/state-log.serializer.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":36}},"2":{"start":{"line":4,"column":20},"end":{"line":4,"column":55}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":34}},"4":{"start":{"line":8,"column":8},"end":{"line":8,"column":46}},"5":{"start":{"line":11,"column":8},"end":{"line":11,"column":81}},"6":{"start":{"line":14,"column":8},"end":{"line":14,"column":26}},"7":{"start":{"line":15,"column":25},"end":{"line":15,"column":89}},"8":{"start":{"line":16,"column":8},"end":{"line":16,"column":45}},"9":{"start":{"line":19,"column":0},"end":{"line":19,"column":48}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":4},"end":{"line":6,"column":5}},"loc":{"start":{"line":6,"column":18},"end":{"line":9,"column":5}},"line":6},"1":{"name":"(anonymous_1)","decl":{"start":{"line":10,"column":4},"end":{"line":10,"column":5}},"loc":{"start":{"line":10,"column":24},"end":{"line":12,"column":5}},"line":10},"2":{"name":"(anonymous_2)","decl":{"start":{"line":13,"column":4},"end":{"line":13,"column":5}},"loc":{"start":{"line":13,"column":31},"end":{"line":17,"column":5}},"line":13}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":1},"f":{"0":0,"1":0,"2":0},"b":{},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/serializer/state-log.serializer.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/serializer/state-log.serializer.ts"],"names":[],"mappings":";;;AACA,wDAAoD;AAEpD,MAAa,kBAAkB;IAK7B;QAHgB,UAAK,GAAG,CAAC,UAAU,CAAC,CAAC;QACrB,YAAO,GAAG,CAAC,oBAAQ,CAAC,CAAC;IAEpB,CAAC;IAEX,SAAS,CAAC,QAAkB;QACjC,uCACK,QAAQ,KACX,KAAK,EAAE,UAAU,IACjB;IACJ,CAAC;IAEM,WAAW,CAAC,IAAgB,EAAE,OAA0B;QAC7D,OAAQ,IAAY,CAAC,KAAK,CAAC;QAC3B,MAAM,QAAQ,GAAG,IAAI,oBAAQ,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;QACtE,OAAO,MAAM,CAAC,MAAM,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;IACvC,CAAC;CAEF;AApBD,gDAoBC","sourcesContent":["import { SerializerContext, Serialized, Serializer } from './serializer.interface';\nimport { StateLog } from '../store/state/state-log';\n\nexport class StateLogSerializer implements Serializer<StateLog> {\n\n  public readonly types = ['StateLog'];\n  public readonly classes = [StateLog];\n\n  constructor () { }\n\n  public serialize(stateLog: StateLog): Serialized {\n    return {\n      ...stateLog,\n      _type: 'StateLog'\n    };\n  }\n\n  public deserialize(data: Serialized, context: SerializerContext): StateLog {\n    delete (data as any)._type;\n    const instance = new StateLog(data.message, data.params, data.client);\n    return Object.assign(instance, data);\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"c8ea9c259a5feffaa3707b92b20d6bb06d7e4444","contentHash":"194ed6b542fb537e5e77f28b3ecffefef7da77f7a5ff26d2f0ebeff9a6a610cc"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/state/state-log.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/state/state-log.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":26}},"2":{"start":{"line":6,"column":8},"end":{"line":6,"column":20}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":31}},"4":{"start":{"line":8,"column":8},"end":{"line":8,"column":29}},"5":{"start":{"line":9,"column":8},"end":{"line":9,"column":29}},"6":{"start":{"line":12,"column":0},"end":{"line":12,"column":28}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":4},"end":{"line":5,"column":5}},"loc":{"start":{"line":5,"column":50},"end":{"line":10,"column":5}},"line":5}},"branchMap":{"0":{"loc":{"start":{"line":5,"column":25},"end":{"line":5,"column":36}},"type":"default-arg","locations":[{"start":{"line":5,"column":34},"end":{"line":5,"column":36}}],"line":5},"1":{"loc":{"start":{"line":5,"column":38},"end":{"line":5,"column":48}},"type":"default-arg","locations":[{"start":{"line":5,"column":47},"end":{"line":5,"column":48}}],"line":5}},"s":{"0":1,"1":1,"2":0,"3":0,"4":0,"5":0,"6":1},"f":{"0":0},"b":{"0":[0],"1":[0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/state/state-log.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/state/state-log.ts"],"names":[],"mappings":";;;AAIA,MAAa,QAAQ;IAMnB,YACE,OAAgB,EAChB,SAAwB,EAAE,EAC1B,SAAiB,CAAC;QARb,OAAE,GAAW,CAAC,CAAC;QAUpB,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;QACvB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;IACvB,CAAC;CACF;AAfD,4BAeC","sourcesContent":["import { GameLog } from '../../game-message';\n\nexport type StateLogParam = { [key: string]: string | number };\n\nexport class StateLog {\n  public id: number = 0;\n  public client: number;\n  public params: StateLogParam;\n  public message: GameLog;\n\n  constructor(\n    message: GameLog,\n    params: StateLogParam = {},\n    client: number = 0,\n  ) {\n    this.message = message;\n    this.params = params;\n    this.client = client;\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"6acc923ae6c1e0a7278fed1793ca9c34d960fa3c","contentHash":"432b9d09b5c2dc0cfa402399200b5c6ccc0a284f14284ac6429486755705bbf2"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/serializer/path-builder.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/serializer/path-builder.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":29}},"2":{"start":{"line":6,"column":8},"end":{"line":6,"column":26}},"3":{"start":{"line":9,"column":28},"end":{"line":9,"column":72}},"4":{"start":{"line":9,"column":56},"end":{"line":9,"column":71}},"5":{"start":{"line":10,"column":8},"end":{"line":12,"column":9}},"6":{"start":{"line":11,"column":12},"end":{"line":11,"column":46}},"7":{"start":{"line":13,"column":8},"end":{"line":13,"column":41}},"8":{"start":{"line":16,"column":22},"end":{"line":18,"column":33}},"9":{"start":{"line":17,"column":22},"end":{"line":17,"column":27}},"10":{"start":{"line":18,"column":27},"end":{"line":18,"column":32}},"11":{"start":{"line":19,"column":8},"end":{"line":19,"column":31}},"12":{"start":{"line":22,"column":22},"end":{"line":22,"column":37}},"13":{"start":{"line":23,"column":20},"end":{"line":23,"column":24}},"14":{"start":{"line":24,"column":8},"end":{"line":31,"column":9}},"15":{"start":{"line":25,"column":12},"end":{"line":27,"column":13}},"16":{"start":{"line":26,"column":16},"end":{"line":26,"column":36}},"17":{"start":{"line":30,"column":12},"end":{"line":30,"column":19}},"18":{"start":{"line":32,"column":8},"end":{"line":32,"column":21}},"19":{"start":{"line":35,"column":0},"end":{"line":35,"column":34}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":4},"end":{"line":5,"column":5}},"loc":{"start":{"line":5,"column":18},"end":{"line":7,"column":5}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":8,"column":4},"end":{"line":8,"column":5}},"loc":{"start":{"line":8,"column":20},"end":{"line":14,"column":5}},"line":8},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":51},"end":{"line":9,"column":52}},"loc":{"start":{"line":9,"column":56},"end":{"line":9,"column":71}},"line":9},"3":{"name":"(anonymous_3)","decl":{"start":{"line":15,"column":4},"end":{"line":15,"column":5}},"loc":{"start":{"line":15,"column":14},"end":{"line":20,"column":5}},"line":15},"4":{"name":"(anonymous_4)","decl":{"start":{"line":17,"column":17},"end":{"line":17,"column":18}},"loc":{"start":{"line":17,"column":22},"end":{"line":17,"column":27}},"line":17},"5":{"name":"(anonymous_5)","decl":{"start":{"line":18,"column":20},"end":{"line":18,"column":21}},"loc":{"start":{"line":18,"column":27},"end":{"line":18,"column":32}},"line":18},"6":{"name":"(anonymous_6)","decl":{"start":{"line":21,"column":4},"end":{"line":21,"column":5}},"loc":{"start":{"line":21,"column":25},"end":{"line":33,"column":5}},"line":21}},"branchMap":{"0":{"loc":{"start":{"line":10,"column":8},"end":{"line":12,"column":9}},"type":"if","locations":[{"start":{"line":10,"column":8},"end":{"line":12,"column":9}},{"start":{"line":10,"column":8},"end":{"line":12,"column":9}}],"line":10}},"s":{"0":1,"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},"b":{"0":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/serializer/path-builder.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/serializer/path-builder.ts"],"names":[],"mappings":";;;AACA,MAAa,WAAW;IAAxB;QAEE,YAAO,GAAiC,EAAE,CAAC;IA8B7C,CAAC;IA5BQ,IAAI,CAAC,IAAS,EAAE,GAAW;QAChC,MAAM,WAAW,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,KAAK,IAAI,CAAC,CAAC;QACjE,IAAI,WAAW,KAAK,CAAC,CAAC,EAAE;YACtB,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,WAAW,CAAC;SACnC;QACD,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,GAAG,EAAE,CAAC,CAAC;IACnC,CAAC;IAEM,OAAO;QACZ,MAAM,KAAK,GAAa,IAAI,CAAC,OAAO;aACjC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC;aACf,MAAM,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;QACxB,OAAO,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IACzB,CAAC;IAEM,QAAQ,CAAC,IAAS,EAAE,IAAY;QACrC,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QAC9B,IAAI,KAAK,GAAG,IAAI,CAAC;QACjB,IAAI;YACF,KAAK,MAAM,IAAI,IAAI,KAAK,EAAE;gBACxB,KAAK,GAAG,KAAK,CAAC,IAAI,CAAC,CAAC;aACrB;SACF;QAAC,OAAO,KAAK,EAAE;YACd,OAAO;SACR;QACD,OAAO,KAAK,CAAC;IACf,CAAC;CAEF;AAhCD,kCAgCC","sourcesContent":["\nexport class PathBuilder {\n\n  parents: { node: any, key: string }[] = [];\n\n  public goTo(node: any, key: string) {\n    const parentIndex = this.parents.findIndex(p => p.node === node);\n    if (parentIndex !== -1) {\n      this.parents.length = parentIndex;\n    }\n    this.parents.push({ node, key });\n  }\n\n  public getPath(): string {\n    const parts: string[] = this.parents\n      .map(p => p.key)\n      .filter(key => !!key);\n    return parts.join('.');\n  }\n\n  public getValue(root: any, path: string): any {\n    const parts = path.split('.');\n    let value = root;\n    try {\n      for (const part of parts) {\n        value = value[part];\n      }\n    } catch (error) {\n      return;\n    }\n    return value;\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"1472bc73661b2f0490299d7666d752e3ae669383","contentHash":"1da15380adae5972ca9f15296975397c7db6e60aa82e89b825699ea2896b4bc4"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/serializer/index.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/serializer/index.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":4},"end":{"line":4,"column":89}},"4":{"start":{"line":4,"column":71},"end":{"line":4,"column":83}},"5":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"6":{"start":{"line":6,"column":26},"end":{"line":6,"column":33}},"7":{"start":{"line":7,"column":4},"end":{"line":7,"column":17}},"8":{"start":{"line":9,"column":19},"end":{"line":11,"column":1}},"9":{"start":{"line":10,"column":4},"end":{"line":10,"column":126}},"10":{"start":{"line":10,"column":21},"end":{"line":10,"column":126}},"11":{"start":{"line":10,"column":95},"end":{"line":10,"column":126}},"12":{"start":{"line":12,"column":0},"end":{"line":12,"column":62}},"13":{"start":{"line":13,"column":0},"end":{"line":13,"column":53}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":57}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":5,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":4,"column":58},"end":{"line":4,"column":59}},"loc":{"start":{"line":4,"column":69},"end":{"line":4,"column":85}},"line":4},"2":{"name":"(anonymous_2)","decl":{"start":{"line":5,"column":6},"end":{"line":5,"column":7}},"loc":{"start":{"line":5,"column":28},"end":{"line":8,"column":1}},"line":5},"3":{"name":"(anonymous_3)","decl":{"start":{"line":9,"column":50},"end":{"line":9,"column":51}},"loc":{"start":{"line":9,"column":71},"end":{"line":11,"column":1}},"line":9}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":8,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":8,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":8,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":5,"column":1}},{"start":{"line":5,"column":6},"end":{"line":8,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},"type":"if","locations":[{"start":{"line":6,"column":4},"end":{"line":6,"column":33}},{"start":{"line":6,"column":4},"end":{"line":6,"column":33}}],"line":6},"4":{"loc":{"start":{"line":9,"column":19},"end":{"line":11,"column":1}},"type":"binary-expr","locations":[{"start":{"line":9,"column":20},"end":{"line":9,"column":24}},{"start":{"line":9,"column":28},"end":{"line":9,"column":45}},{"start":{"line":9,"column":50},"end":{"line":11,"column":1}}],"line":9},"5":{"loc":{"start":{"line":10,"column":21},"end":{"line":10,"column":126}},"type":"if","locations":[{"start":{"line":10,"column":21},"end":{"line":10,"column":126}},{"start":{"line":10,"column":21},"end":{"line":10,"column":126}}],"line":10},"6":{"loc":{"start":{"line":10,"column":25},"end":{"line":10,"column":93}},"type":"binary-expr","locations":[{"start":{"line":10,"column":25},"end":{"line":10,"column":40}},{"start":{"line":10,"column":44},"end":{"line":10,"column":93}}],"line":10}},"s":{"0":1,"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":1,"9":2,"10":1,"11":1,"12":1,"13":1,"14":1},"f":{"0":1,"1":0,"2":0,"3":2},"b":{"0":[1,1,1],"1":[1,0],"2":[1,0],"3":[0,0],"4":[1,1,1],"5":[1,0],"6":[1,1]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/serializer/index.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/serializer/index.ts"],"names":[],"mappings":";;;;;;;;;;;;AAAA,qDAAmC;AACnC,yDAAuC","sourcesContent":["export * from './state-serializer';\nexport * from './serializer.interface';\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"558a4bdb12caa0d9a2cbca4cbf1bced2d5ee14b4","contentHash":"0b3eb454cc855390e8498af13479bbeb001c4f7b9370abfdb8bfea62aa87f456"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/serializer/serializer.interface.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/serializer/serializer.interface.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}}},"fnMap":{},"branchMap":{},"s":{"0":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/serializer/serializer.interface.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/serializer/serializer.interface.ts"],"names":[],"mappings":"","sourcesContent":["import { Card } from '../store/card/card';\n\nexport type SerializedState = string;\n\nexport interface SerializerContext {\n  cards: Card[];\n}\n\nexport interface Serialized {\n  _type: string;\n  [x: string]: any;\n}\n\nexport interface Serializer<T extends Object> {\n  types: string[];\n  classes: any[];\n  serialize(state: T): Serialized;\n  deserialize(data: Serialized, context: SerializerContext): T;\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"67a83a5c73777bd493bd1b1e9be06ebe3fcf53ee","contentHash":"042b821c147eaa4a930c6da07b44a018a7de8c00c19ffe98c78ff9ecae57c9b6"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/actions/action.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/actions/action.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}}},"fnMap":{},"branchMap":{},"s":{"0":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/actions/action.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/actions/action.ts"],"names":[],"mappings":"","sourcesContent":["export interface Action {\n\n  readonly type: string;\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"ba54af18f17fff378fdf2ee6a0bf904b29f7052c","contentHash":"72f07b5f8c061585cb3da100302e64a9af318e3b40082ac0e17f327ca7a26717"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/actions/add-player-action.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/actions/add-player-action.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":33}},"2":{"start":{"line":6,"column":8},"end":{"line":6,"column":33}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":25}},"4":{"start":{"line":8,"column":8},"end":{"line":8,"column":25}},"5":{"start":{"line":9,"column":8},"end":{"line":9,"column":33}},"6":{"start":{"line":12,"column":0},"end":{"line":12,"column":42}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":4},"end":{"line":5,"column":5}},"loc":{"start":{"line":5,"column":38},"end":{"line":10,"column":5}},"line":5}},"branchMap":{},"s":{"0":1,"1":1,"2":0,"3":0,"4":0,"5":0,"6":1},"f":{"0":0},"b":{},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/actions/add-player-action.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/actions/add-player-action.ts"],"names":[],"mappings":";;;AAEA,MAAa,eAAe;IAI1B,YACS,QAAgB,EAChB,IAAY,EACZ,IAAc;QAFd,aAAQ,GAAR,QAAQ,CAAQ;QAChB,SAAI,GAAJ,IAAI,CAAQ;QACZ,SAAI,GAAJ,IAAI,CAAU;QALd,SAAI,GAAW,YAAY,CAAC;IAMlC,CAAC;CAEL;AAVD,0CAUC","sourcesContent":["import { Action } from './action';\n\nexport class AddPlayerAction implements Action {\n\n  readonly type: string = 'ADD_PLAYER';\n\n  constructor(\n    public clientId: number,\n    public name: string,\n    public deck: string[]\n  ) {}\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"340a390c161bc31ff80c76bb0dc1190747a2c682","contentHash":"31813dfee8f71d6b8e8047920fa13433610fff22f1508691155b0e1b3a46e436"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/actions/append-log-action.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/actions/append-log-action.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":33}},"2":{"start":{"line":6,"column":8},"end":{"line":6,"column":21}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":31}},"4":{"start":{"line":8,"column":8},"end":{"line":8,"column":29}},"5":{"start":{"line":9,"column":8},"end":{"line":9,"column":40}},"6":{"start":{"line":12,"column":0},"end":{"line":12,"column":42}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":4},"end":{"line":5,"column":5}},"loc":{"start":{"line":5,"column":37},"end":{"line":10,"column":5}},"line":5}},"branchMap":{},"s":{"0":1,"1":1,"2":0,"3":0,"4":0,"5":0,"6":1},"f":{"0":0},"b":{},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/actions/append-log-action.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/actions/append-log-action.ts"],"names":[],"mappings":";;;AAIA,MAAa,eAAe;IAI1B,YAAmB,EAAU,EAAS,OAAgB,EAAS,MAAqB;QAAjE,OAAE,GAAF,EAAE,CAAQ;QAAS,YAAO,GAAP,OAAO,CAAS;QAAS,WAAM,GAAN,MAAM,CAAe;QAF3E,SAAI,GAAW,mBAAmB,CAAC;IAE2C,CAAC;CAEzF;AAND,0CAMC","sourcesContent":["import { Action } from './action';\nimport { GameLog } from '../../game-message';\nimport { StateLogParam } from '../state/state-log';\n\nexport class AppendLogAction implements Action {\n\n  readonly type: string = 'APPEND_LOG_ACTION';\n\n  constructor(public id: number, public message: GameLog, public params: StateLogParam) {}\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"b0ca4e8380640a213853c7cdcb62e37ecb0522b8","contentHash":"d5072f9b6e54c59369e7f089d64430107b158808f5b25e84984efef152faf903"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/actions/change-avatar-action.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/actions/change-avatar-action.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":36}},"2":{"start":{"line":6,"column":8},"end":{"line":6,"column":21}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":37}},"4":{"start":{"line":8,"column":8},"end":{"line":8,"column":23}},"5":{"start":{"line":9,"column":8},"end":{"line":9,"column":36}},"6":{"start":{"line":12,"column":0},"end":{"line":12,"column":48}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":4},"end":{"line":5,"column":5}},"loc":{"start":{"line":5,"column":37},"end":{"line":10,"column":5}},"line":5}},"branchMap":{},"s":{"0":1,"1":1,"2":0,"3":0,"4":0,"5":0,"6":1},"f":{"0":0},"b":{},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/actions/change-avatar-action.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/actions/change-avatar-action.ts"],"names":[],"mappings":";;;AAGA,MAAa,kBAAkB;IAI7B,YAAmB,EAAU,EAAS,UAAkB,EAAS,GAAc;QAA5D,OAAE,GAAF,EAAE,CAAQ;QAAS,eAAU,GAAV,UAAU,CAAQ;QAAS,QAAG,GAAH,GAAG,CAAW;QAFtE,SAAI,GAAW,eAAe,CAAC;IAE0C,CAAC;CAEpF;AAND,gDAMC","sourcesContent":["import { Action } from './action';\nimport { StateLog } from '../state/state-log';\n\nexport class ChangeAvatarAction implements Action {\n\n  readonly type: string = 'CHANGE_AVATAR';\n\n  constructor(public id: number, public avatarName: string, public log?: StateLog) {}\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"d419d429cb6adcea59c2a3714122943b3b304d0b","contentHash":"f9f22867b69d2b4ea7f32e65d2c36abd555d515e536f7aa938acf3f01463d913"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/actions/game-actions.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/actions/game-actions.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":133}},"2":{"start":{"line":6,"column":8},"end":{"line":6,"column":33}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":25}},"4":{"start":{"line":8,"column":8},"end":{"line":8,"column":36}},"5":{"start":{"line":11,"column":0},"end":{"line":11,"column":36}},"6":{"start":{"line":14,"column":8},"end":{"line":14,"column":33}},"7":{"start":{"line":15,"column":8},"end":{"line":15,"column":25}},"8":{"start":{"line":16,"column":8},"end":{"line":16,"column":29}},"9":{"start":{"line":17,"column":8},"end":{"line":17,"column":41}},"10":{"start":{"line":20,"column":0},"end":{"line":20,"column":44}},"11":{"start":{"line":23,"column":8},"end":{"line":23,"column":33}},"12":{"start":{"line":24,"column":8},"end":{"line":24,"column":41}},"13":{"start":{"line":27,"column":0},"end":{"line":27,"column":44}},"14":{"start":{"line":30,"column":8},"end":{"line":30,"column":33}},"15":{"start":{"line":31,"column":8},"end":{"line":31,"column":37}},"16":{"start":{"line":32,"column":8},"end":{"line":32,"column":37}},"17":{"start":{"line":35,"column":0},"end":{"line":35,"column":38}},"18":{"start":{"line":38,"column":8},"end":{"line":38,"column":33}},"19":{"start":{"line":39,"column":8},"end":{"line":39,"column":32}},"20":{"start":{"line":42,"column":0},"end":{"line":42,"column":40}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":4},"end":{"line":5,"column":5}},"loc":{"start":{"line":5,"column":32},"end":{"line":9,"column":5}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":13,"column":4},"end":{"line":13,"column":5}},"loc":{"start":{"line":13,"column":40},"end":{"line":18,"column":5}},"line":13},"2":{"name":"(anonymous_2)","decl":{"start":{"line":22,"column":4},"end":{"line":22,"column":5}},"loc":{"start":{"line":22,"column":26},"end":{"line":25,"column":5}},"line":22},"3":{"name":"(anonymous_3)","decl":{"start":{"line":29,"column":4},"end":{"line":29,"column":5}},"loc":{"start":{"line":29,"column":38},"end":{"line":33,"column":5}},"line":29},"4":{"name":"(anonymous_4)","decl":{"start":{"line":37,"column":4},"end":{"line":37,"column":5}},"loc":{"start":{"line":37,"column":26},"end":{"line":40,"column":5}},"line":37}},"branchMap":{},"s":{"0":1,"1":1,"2":0,"3":0,"4":0,"5":1,"6":0,"7":0,"8":0,"9":0,"10":1,"11":0,"12":0,"13":1,"14":0,"15":0,"16":0,"17":1,"18":0,"19":0,"20":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0},"b":{},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/actions/game-actions.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/actions/game-actions.ts"],"names":[],"mappings":";;;AAGA,MAAa,YAAY;IAIvB,YACS,QAAgB,EAChB,IAAY;QADZ,aAAQ,GAAR,QAAQ,CAAQ;QAChB,SAAI,GAAJ,IAAI,CAAQ;QAJZ,SAAI,GAAW,eAAe,CAAC;IAKrC,CAAC;CAEL;AATD,oCASC;AAED,MAAa,gBAAgB;IAI3B,YACS,QAAgB,EAChB,IAAY,EACZ,MAAkB;QAFlB,aAAQ,GAAR,QAAQ,CAAQ;QAChB,SAAI,GAAJ,IAAI,CAAQ;QACZ,WAAM,GAAN,MAAM,CAAY;QALlB,SAAI,GAAW,oBAAoB,CAAC;IAM1C,CAAC;CAEL;AAVD,4CAUC;AAED,MAAa,gBAAgB;IAI3B,YACS,QAAgB;QAAhB,aAAQ,GAAR,QAAQ,CAAQ;QAHhB,SAAI,GAAW,oBAAoB,CAAC;IAI1C,CAAC;CAEL;AARD,4CAQC;AAED,MAAa,aAAa;IAIxB,YACS,QAAgB,EAChB,UAAkB;QADlB,aAAQ,GAAR,QAAQ,CAAQ;QAChB,eAAU,GAAV,UAAU,CAAQ;QAJlB,SAAI,GAAW,gBAAgB,CAAC;IAKtC,CAAC;CAEL;AATD,sCASC;AAED,MAAa,cAAc;IAIzB,YAAmB,QAAgB;QAAhB,aAAQ,GAAR,QAAQ,CAAQ;QAF1B,SAAI,GAAW,WAAW,CAAC;IAEE,CAAC;CAExC;AAND,wCAMC","sourcesContent":["import { Action } from './action';\nimport { CardTarget } from './play-card-action';\n\nexport class AttackAction implements Action {\n\n  readonly type: string = 'ATTACK_ACTION';\n\n  constructor(\n    public clientId: number,\n    public name: string\n  ) {}\n\n}\n\nexport class UseAbilityAction implements Action {\n\n  readonly type: string = 'USE_ABILITY_ACTION';\n\n  constructor(\n    public clientId: number,\n    public name: string,\n    public target: CardTarget\n  ) {}\n\n}\n\nexport class UseStadiumAction implements Action {\n\n  readonly type: string = 'USE_STADIUM_ACTION';\n\n  constructor(\n    public clientId: number\n  ) {}\n\n}\n\nexport class RetreatAction implements Action {\n\n  readonly type: string = 'RETREAT_ACTION';\n\n  constructor(\n    public clientId: number,\n    public benchIndex: number\n  ) {}\n\n}\n\nexport class PassTurnAction implements Action {\n\n  readonly type: string = 'PASS_TURN';\n\n  constructor(public clientId: number) {}\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"4ffb728c4c914f777fa4ef94cb610ba23d80fb6c","contentHash":"c1813303f2447e505bbc52b75166c58df635e551c82904484aee0c623b42f7a6"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/actions/invite-player-action.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/actions/invite-player-action.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":36}},"2":{"start":{"line":6,"column":8},"end":{"line":6,"column":33}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":25}},"4":{"start":{"line":8,"column":8},"end":{"line":8,"column":36}},"5":{"start":{"line":11,"column":0},"end":{"line":11,"column":48}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":4},"end":{"line":5,"column":5}},"loc":{"start":{"line":5,"column":32},"end":{"line":9,"column":5}},"line":5}},"branchMap":{},"s":{"0":1,"1":1,"2":0,"3":0,"4":0,"5":1},"f":{"0":0},"b":{},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/actions/invite-player-action.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/actions/invite-player-action.ts"],"names":[],"mappings":";;;AAEA,MAAa,kBAAkB;IAI7B,YACS,QAAgB,EAChB,IAAY;QADZ,aAAQ,GAAR,QAAQ,CAAQ;QAChB,SAAI,GAAJ,IAAI,CAAQ;QAJZ,SAAI,GAAW,eAAe,CAAC;IAKrC,CAAC;CAEL;AATD,gDASC","sourcesContent":["import { Action } from './action';\n\nexport class InvitePlayerAction implements Action {\n\n  readonly type: string = 'INVITE_PLAYER';\n\n  constructor(\n    public clientId: number,\n    public name: string\n  ) {}\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"64032e3df18b9e8fb030438347caac99dc7dacc4","contentHash":"dadde0beabaa8b3beabaa8a7b09c49bff49d2c7c97dd4211668640bab0d54e6a"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/actions/reorder-actions.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/actions/reorder-actions.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":64}},"2":{"start":{"line":6,"column":8},"end":{"line":6,"column":21}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":25}},"4":{"start":{"line":8,"column":8},"end":{"line":8,"column":21}},"5":{"start":{"line":9,"column":8},"end":{"line":9,"column":43}},"6":{"start":{"line":12,"column":0},"end":{"line":12,"column":48}},"7":{"start":{"line":15,"column":8},"end":{"line":15,"column":21}},"8":{"start":{"line":16,"column":8},"end":{"line":16,"column":27}},"9":{"start":{"line":17,"column":8},"end":{"line":17,"column":42}},"10":{"start":{"line":20,"column":0},"end":{"line":20,"column":46}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":4},"end":{"line":5,"column":5}},"loc":{"start":{"line":5,"column":30},"end":{"line":10,"column":5}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":14,"column":4},"end":{"line":14,"column":5}},"loc":{"start":{"line":14,"column":27},"end":{"line":18,"column":5}},"line":14}},"branchMap":{},"s":{"0":1,"1":1,"2":0,"3":0,"4":0,"5":0,"6":1,"7":0,"8":0,"9":0,"10":1},"f":{"0":0,"1":0},"b":{},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/actions/reorder-actions.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/actions/reorder-actions.ts"],"names":[],"mappings":";;;AAEA,MAAa,kBAAkB;IAI7B,YAAmB,EAAU,EAAS,IAAY,EAAS,EAAU;QAAlD,OAAE,GAAF,EAAE,CAAQ;QAAS,SAAI,GAAJ,IAAI,CAAQ;QAAS,OAAE,GAAF,EAAE,CAAQ;QAF5D,SAAI,GAAW,sBAAsB,CAAC;IAEyB,CAAC;CAE1E;AAND,gDAMC;AAGD,MAAa,iBAAiB;IAI5B,YAAmB,EAAU,EAAS,KAAe;QAAlC,OAAE,GAAF,EAAE,CAAQ;QAAS,UAAK,GAAL,KAAK,CAAU;QAF5C,SAAI,GAAW,qBAAqB,CAAC;IAEU,CAAC;CAE1D;AAND,8CAMC","sourcesContent":["import { Action } from './action';\n\nexport class ReorderBenchAction implements Action {\n\n  readonly type: string = 'REORDER_BENCH_ACTION';\n\n  constructor(public id: number, public from: number, public to: number) {}\n\n}\n\n\nexport class ReorderHandAction implements Action {\n\n  readonly type: string = 'REORDER_HAND_ACTION';\n\n  constructor(public id: number, public order: number[]) {}\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"68a1fccd3710a0b07a1028679ab4da3629373f62","contentHash":"68ea6fcf8a66cec68f9f7e51a9dc1055aec49f812ed229f92ab975ee433db7cb"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/actions/resolve-prompt-action.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/actions/resolve-prompt-action.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"2":{"start":{"line":6,"column":8},"end":{"line":6,"column":21}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":29}},"4":{"start":{"line":8,"column":8},"end":{"line":8,"column":23}},"5":{"start":{"line":9,"column":8},"end":{"line":9,"column":37}},"6":{"start":{"line":12,"column":0},"end":{"line":12,"column":50}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":4},"end":{"line":5,"column":5}},"loc":{"start":{"line":5,"column":33},"end":{"line":10,"column":5}},"line":5}},"branchMap":{},"s":{"0":1,"1":1,"2":36,"3":36,"4":36,"5":36,"6":1},"f":{"0":36},"b":{},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/actions/resolve-prompt-action.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/actions/resolve-prompt-action.ts"],"names":[],"mappings":";;;AAGA,MAAa,mBAAmB;IAI9B,YAAmB,EAAU,EAAS,MAAW,EAAS,GAAc;QAArD,OAAE,GAAF,EAAE,CAAQ;QAAS,WAAM,GAAN,MAAM,CAAK;QAAS,QAAG,GAAH,GAAG,CAAW;QAF/D,SAAI,GAAW,gBAAgB,CAAC;IAEkC,CAAC;CAE7E;AAND,kDAMC","sourcesContent":["import { Action } from './action';\nimport { StateLog } from '../state/state-log';\n\nexport class ResolvePromptAction implements Action {\n\n  readonly type: string = 'RESOLVE_PROMPT';\n\n  constructor(public id: number, public result: any, public log?: StateLog) {}\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"5acbb118e615f459cff4d96e09832cf68aabfb29","contentHash":"0910178c7f96e968b172fd7b582725af3efb66325f4dd1e1686ee6f7ea78cdaa"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/card/pokemon-types.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/card/pokemon-types.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":27}},"2":{"start":{"line":5,"column":0},"end":{"line":10,"column":62}},"3":{"start":{"line":6,"column":4},"end":{"line":6,"column":54}},"4":{"start":{"line":7,"column":4},"end":{"line":7,"column":56}},"5":{"start":{"line":8,"column":4},"end":{"line":8,"column":52}},"6":{"start":{"line":9,"column":4},"end":{"line":9,"column":64}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":1},"end":{"line":5,"column":2}},"loc":{"start":{"line":5,"column":22},"end":{"line":10,"column":1}},"line":5}},"branchMap":{"0":{"loc":{"start":{"line":10,"column":15},"end":{"line":10,"column":60}},"type":"binary-expr","locations":[{"start":{"line":10,"column":15},"end":{"line":10,"column":32}},{"start":{"line":10,"column":37},"end":{"line":10,"column":59}}],"line":10}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1},"f":{"0":1},"b":{"0":[1,1]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/card/pokemon-types.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/card/pokemon-types.ts"],"names":[],"mappings":";;;AAmBA,IAAY,SAKX;AALD,WAAY,SAAS;IACnB,iDAAQ,CAAA;IACR,mDAAS,CAAA;IACT,+CAAO,CAAA;IACP,2DAAa,CAAA;AACf,CAAC,EALW,SAAS,GAAT,iBAAS,KAAT,iBAAS,QAKpB","sourcesContent":["import {CardType} from './card-types';\n\nexport interface Weakness {\n  type: CardType;\n  value?: number; // when undefined, then it's x2\n}\n\nexport interface Resistance {\n  type: CardType;\n  value: number;\n}\n\nexport interface Attack {\n  cost: CardType[];\n  damage: number;\n  name: string;\n  text: string;\n}\n\nexport enum PowerType {\n  POKEBODY,\n  POKEPOWER,\n  ABILITY,\n  ANCIENT_TRAIT\n}\n\nexport interface Power {\n  name: string;\n  powerType: PowerType;\n  text: string;\n  useWhenInPlay?: boolean;\n  useFromHand?: boolean;\n  useFromDiscard?: boolean;\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"8d514ae674b5becfc0dee8fb3f7c098caf5c9a00","contentHash":"512126a8dd7216f2c1a67469aaa420b26c949709291239c0b147e8c1df89bab0"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/card/trainer-card.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/card/trainer-card.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":29}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":32}},"3":{"start":{"line":5,"column":21},"end":{"line":5,"column":44}},"4":{"start":{"line":8,"column":8},"end":{"line":8,"column":28}},"5":{"start":{"line":9,"column":8},"end":{"line":9,"column":56}},"6":{"start":{"line":10,"column":8},"end":{"line":10,"column":57}},"7":{"start":{"line":11,"column":8},"end":{"line":11,"column":25}},"8":{"start":{"line":12,"column":8},"end":{"line":12,"column":23}},"9":{"start":{"line":15,"column":0},"end":{"line":15,"column":34}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":7,"column":4},"end":{"line":7,"column":5}},"loc":{"start":{"line":7,"column":18},"end":{"line":13,"column":5}},"line":7}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":1},"f":{"0":0},"b":{},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/card/trainer-card.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/card/trainer-card.ts"],"names":[],"mappings":";;;AAAA,iCAA8B;AAC9B,6CAA8D;AAG9D,MAAsB,WAAY,SAAQ,WAAI;IAA9C;;QAES,cAAS,GAAc,sBAAS,CAAC,OAAO,CAAC;QAEzC,gBAAW,GAAgB,wBAAW,CAAC,IAAI,CAAC;QAE5C,WAAM,GAAa,EAAE,CAAC;QAEtB,SAAI,GAAW,EAAE,CAAC;IAC3B,CAAC;CAAA;AATD,kCASC","sourcesContent":["import { Card } from './card';\nimport { Format, SuperType, TrainerType } from './card-types';\n\n\nexport abstract class TrainerCard extends Card {\n\n  public superType: SuperType = SuperType.TRAINER;\n\n  public trainerType: TrainerType = TrainerType.ITEM;\n\n  public format: Format[] = [];\n\n  public text: string = '';\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"bc0f5ed6e3d2b671c7955294387d0f4a58884f6b","contentHash":"d1be0b92a69b643654cbaca31cee14bf588c39e236a98e7fb78254a950219e3c"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/store-handler.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/store-handler.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}}},"fnMap":{},"branchMap":{},"s":{"0":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/store-handler.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/store-handler.ts"],"names":[],"mappings":"","sourcesContent":["import { State } from './state/state';\n\nexport interface StoreHandler {\n\n  onStateChange(state: State): void;\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"7f6cc268448e5484a2910fc8f505fbaeb5d047c5","contentHash":"adc7897745212d278e27141e35587fff7ed940019a62a3d9302ee2321453d5a4"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/store-like.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/store-like.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}}},"fnMap":{},"branchMap":{},"s":{"0":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/store-like.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/store-like.ts"],"names":[],"mappings":"","sourcesContent":["import { Action } from './actions/action';\nimport { Effect } from './effects/effect';\nimport { Prompt } from './prompts/prompt';\nimport { State } from './state/state';\nimport { StateLogParam } from './state/state-log';\nimport { GameLog } from '../game-message';\n\nexport interface StoreLike {\n  dispatch(action: Action): void;\n\n  reduceEffect(state: State, effect: Effect): State;\n\n  log(state: State, message: GameLog, params?: StateLogParam, client?: number): void;\n\n  waitPrompt(state: State, callback: () => void): State;\n\n  hasPrompts(): boolean;\n\n  prompt<T>(\n    state: State, prompt: Prompt<T>,\n    then: (result: T) => void): State;\n\n  prompt<T>(\n    state: State, prompt: [Prompt<T>],\n    then: (result: T) => void): State;\n\n  prompt<T, S>(\n    state: State, prompt: [Prompt<T>, Prompt<S>],\n    then: (result: [T, S]) => void): State;\n\n  prompt<T, S, R>(\n    state: State, prompt: [Prompt<T>, Prompt<S>, Prompt<R>],\n    then: (result: [T, S, R]) => void): State;\n\n  prompt<T, S, R, P>(\n    state: State, prompt: [Prompt<T>, Prompt<S>, Prompt<R>, Prompt<P>],\n    then: (result: [T, S, R, P]) => void): State;\n\n  prompt<T>(\n    state: State, prompt: Prompt<T>[],\n    then: (result: T[]) => void): State;\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"45ec30c07041a316b2f297cefa96df7f0ff826bf","contentHash":"4e56f349810763421b85ec48bd7e0a720c9988a0455bf6b451f0c62d01356227"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/store.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/store.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":23}},"2":{"start":{"line":4,"column":28},"end":{"line":4,"column":66}},"3":{"start":{"line":5,"column":28},"end":{"line":5,"column":66}},"4":{"start":{"line":6,"column":15},"end":{"line":6,"column":37}},"5":{"start":{"line":7,"column":31},"end":{"line":7,"column":72}},"6":{"start":{"line":8,"column":21},"end":{"line":8,"column":45}},"7":{"start":{"line":9,"column":23},"end":{"line":9,"column":49}},"8":{"start":{"line":10,"column":26},"end":{"line":10,"column":62}},"9":{"start":{"line":11,"column":32},"end":{"line":11,"column":74}},"10":{"start":{"line":12,"column":16},"end":{"line":12,"column":40}},"11":{"start":{"line":13,"column":20},"end":{"line":13,"column":48}},"12":{"start":{"line":14,"column":16},"end":{"line":14,"column":44}},"13":{"start":{"line":15,"column":24},"end":{"line":15,"column":66}},"14":{"start":{"line":16,"column":28},"end":{"line":16,"column":67}},"15":{"start":{"line":17,"column":29},"end":{"line":17,"column":76}},"16":{"start":{"line":18,"column":30},"end":{"line":18,"column":78}},"17":{"start":{"line":19,"column":30},"end":{"line":19,"column":78}},"18":{"start":{"line":20,"column":30},"end":{"line":20,"column":71}},"19":{"start":{"line":21,"column":28},"end":{"line":21,"column":74}},"20":{"start":{"line":22,"column":22},"end":{"line":22,"column":62}},"21":{"start":{"line":23,"column":23},"end":{"line":23,"column":64}},"22":{"start":{"line":24,"column":31},"end":{"line":24,"column":73}},"23":{"start":{"line":25,"column":25},"end":{"line":25,"column":68}},"24":{"start":{"line":26,"column":24},"end":{"line":26,"column":59}},"25":{"start":{"line":27,"column":29},"end":{"line":27,"column":69}},"26":{"start":{"line":30,"column":8},"end":{"line":30,"column":31}},"27":{"start":{"line":31,"column":8},"end":{"line":31,"column":41}},"28":{"start":{"line":32,"column":8},"end":{"line":32,"column":30}},"29":{"start":{"line":33,"column":8},"end":{"line":33,"column":28}},"30":{"start":{"line":34,"column":8},"end":{"line":34,"column":23}},"31":{"start":{"line":37,"column":20},"end":{"line":37,"column":30}},"32":{"start":{"line":38,"column":8},"end":{"line":42,"column":9}},"33":{"start":{"line":39,"column":12},"end":{"line":39,"column":79}},"34":{"start":{"line":40,"column":12},"end":{"line":40,"column":46}},"35":{"start":{"line":41,"column":12},"end":{"line":41,"column":25}},"36":{"start":{"line":43,"column":8},"end":{"line":49,"column":9}},"37":{"start":{"line":46,"column":12},"end":{"line":46,"column":83}},"38":{"start":{"line":47,"column":12},"end":{"line":47,"column":46}},"39":{"start":{"line":48,"column":12},"end":{"line":48,"column":25}},"40":{"start":{"line":50,"column":8},"end":{"line":57,"column":9}},"41":{"start":{"line":51,"column":12},"end":{"line":51,"column":53}},"42":{"start":{"line":52,"column":12},"end":{"line":54,"column":13}},"43":{"start":{"line":53,"column":16},"end":{"line":53,"column":63}},"44":{"start":{"line":55,"column":12},"end":{"line":55,"column":46}},"45":{"start":{"line":56,"column":12},"end":{"line":56,"column":25}},"46":{"start":{"line":58,"column":8},"end":{"line":62,"column":9}},"47":{"start":{"line":59,"column":12},"end":{"line":59,"column":70}},"48":{"start":{"line":60,"column":12},"end":{"line":60,"column":46}},"49":{"start":{"line":61,"column":12},"end":{"line":61,"column":25}},"50":{"start":{"line":63,"column":8},"end":{"line":65,"column":9}},"51":{"start":{"line":63,"column":36},"end":{"line":63,"column":58}},"52":{"start":{"line":64,"column":12},"end":{"line":64,"column":92}},"53":{"start":{"line":66,"column":8},"end":{"line":66,"column":43}},"54":{"start":{"line":67,"column":8},"end":{"line":67,"column":21}},"55":{"start":{"line":70,"column":8},"end":{"line":70,"column":52}},"56":{"start":{"line":71,"column":8},"end":{"line":73,"column":9}},"57":{"start":{"line":72,"column":12},"end":{"line":72,"column":25}},"58":{"start":{"line":74,"column":8},"end":{"line":74,"column":74}},"59":{"start":{"line":75,"column":8},"end":{"line":75,"column":76}},"60":{"start":{"line":76,"column":8},"end":{"line":76,"column":78}},"61":{"start":{"line":77,"column":8},"end":{"line":77,"column":78}},"62":{"start":{"line":78,"column":8},"end":{"line":78,"column":69}},"63":{"start":{"line":79,"column":8},"end":{"line":79,"column":63}},"64":{"start":{"line":80,"column":8},"end":{"line":80,"column":67}},"65":{"start":{"line":81,"column":8},"end":{"line":81,"column":70}},"66":{"start":{"line":82,"column":8},"end":{"line":82,"column":21}},"67":{"start":{"line":85,"column":8},"end":{"line":87,"column":9}},"68":{"start":{"line":86,"column":12},"end":{"line":86,"column":32}},"69":{"start":{"line":88,"column":8},"end":{"line":92,"column":9}},"70":{"start":{"line":88,"column":21},"end":{"line":88,"column":22}},"71":{"start":{"line":89,"column":23},"end":{"line":89,"column":56}},"72":{"start":{"line":90,"column":12},"end":{"line":90,"column":31}},"73":{"start":{"line":91,"column":12},"end":{"line":91,"column":43}},"74":{"start":{"line":93,"column":27},"end":{"line":96,"column":9}},"75":{"start":{"line":94,"column":39},"end":{"line":94,"column":48}},"76":{"start":{"line":97,"column":8},"end":{"line":97,"column":42}},"77":{"start":{"line":98,"column":8},"end":{"line":98,"column":21}},"78":{"start":{"line":101,"column":8},"end":{"line":101,"column":38}},"79":{"start":{"line":102,"column":8},"end":{"line":102,"column":21}},"80":{"start":{"line":105,"column":20},"end":{"line":105,"column":69}},"81":{"start":{"line":106,"column":8},"end":{"line":106,"column":30}},"82":{"start":{"line":107,"column":8},"end":{"line":107,"column":29}},"83":{"start":{"line":111,"column":23},"end":{"line":111,"column":72}},"84":{"start":{"line":111,"column":50},"end":{"line":111,"column":71}},"85":{"start":{"line":112,"column":27},"end":{"line":112,"column":92}},"86":{"start":{"line":112,"column":57},"end":{"line":112,"column":91}},"87":{"start":{"line":113,"column":8},"end":{"line":115,"column":9}},"88":{"start":{"line":114,"column":12},"end":{"line":114,"column":88}},"89":{"start":{"line":116,"column":8},"end":{"line":118,"column":9}},"90":{"start":{"line":117,"column":12},"end":{"line":117,"column":97}},"91":{"start":{"line":119,"column":8},"end":{"line":139,"column":9}},"92":{"start":{"line":120,"column":12},"end":{"line":120,"column":42}},"93":{"start":{"line":121,"column":28},"end":{"line":124,"column":14}},"94":{"start":{"line":122,"column":26},"end":{"line":122,"column":68}},"95":{"start":{"line":122,"column":53},"end":{"line":122,"column":67}},"96":{"start":{"line":123,"column":16},"end":{"line":123,"column":62}},"97":{"start":{"line":125,"column":12},"end":{"line":127,"column":13}},"98":{"start":{"line":126,"column":16},"end":{"line":126,"column":90}},"99":{"start":{"line":128,"column":12},"end":{"line":132,"column":13}},"100":{"start":{"line":128,"column":40},"end":{"line":128,"column":60}},"101":{"start":{"line":129,"column":34},"end":{"line":129,"column":70}},"102":{"start":{"line":130,"column":16},"end":{"line":130,"column":77}},"103":{"start":{"line":131,"column":16},"end":{"line":131,"column":54}},"104":{"start":{"line":133,"column":12},"end":{"line":133,"column":36}},"105":{"start":{"line":137,"column":12},"end":{"line":137,"column":38}},"106":{"start":{"line":138,"column":12},"end":{"line":138,"column":29}},"107":{"start":{"line":140,"column":8},"end":{"line":140,"column":21}},"108":{"start":{"line":143,"column":8},"end":{"line":148,"column":9}},"109":{"start":{"line":144,"column":29},"end":{"line":144,"column":49}},"110":{"start":{"line":145,"column":12},"end":{"line":147,"column":13}},"111":{"start":{"line":146,"column":16},"end":{"line":146,"column":27}},"112":{"start":{"line":151,"column":8},"end":{"line":151,"column":43}},"113":{"start":{"line":154,"column":28},"end":{"line":154,"column":67}},"114":{"start":{"line":155,"column":8},"end":{"line":155,"column":36}},"115":{"start":{"line":156,"column":8},"end":{"line":170,"column":9}},"116":{"start":{"line":157,"column":12},"end":{"line":157,"column":75}},"117":{"start":{"line":158,"column":12},"end":{"line":158,"column":77}},"118":{"start":{"line":159,"column":12},"end":{"line":159,"column":81}},"119":{"start":{"line":160,"column":12},"end":{"line":160,"column":36}},"120":{"start":{"line":161,"column":12},"end":{"line":163,"column":13}},"121":{"start":{"line":162,"column":16},"end":{"line":162,"column":63}},"122":{"start":{"line":167,"column":12},"end":{"line":167,"column":37}},"123":{"start":{"line":168,"column":12},"end":{"line":168,"column":40}},"124":{"start":{"line":169,"column":12},"end":{"line":169,"column":29}},"125":{"start":{"line":171,"column":8},"end":{"line":171,"column":42}},"126":{"start":{"line":172,"column":8},"end":{"line":172,"column":21}},"127":{"start":{"line":175,"column":22},"end":{"line":175,"column":24}},"128":{"start":{"line":176,"column":8},"end":{"line":189,"column":9}},"129":{"start":{"line":177,"column":12},"end":{"line":177,"column":61}},"130":{"start":{"line":177,"column":46},"end":{"line":177,"column":59}},"131":{"start":{"line":178,"column":12},"end":{"line":178,"column":63}},"132":{"start":{"line":178,"column":48},"end":{"line":178,"column":61}},"133":{"start":{"line":179,"column":12},"end":{"line":179,"column":60}},"134":{"start":{"line":179,"column":45},"end":{"line":179,"column":58}},"135":{"start":{"line":180,"column":12},"end":{"line":182,"column":13}},"136":{"start":{"line":181,"column":16},"end":{"line":181,"column":56}},"137":{"start":{"line":181,"column":41},"end":{"line":181,"column":54}},"138":{"start":{"line":183,"column":12},"end":{"line":185,"column":13}},"139":{"start":{"line":184,"column":16},"end":{"line":184,"column":56}},"140":{"start":{"line":184,"column":41},"end":{"line":184,"column":54}},"141":{"start":{"line":186,"column":12},"end":{"line":186,"column":58}},"142":{"start":{"line":186,"column":43},"end":{"line":186,"column":56}},"143":{"start":{"line":187,"column":12},"end":{"line":187,"column":58}},"144":{"start":{"line":187,"column":43},"end":{"line":187,"column":56}},"145":{"start":{"line":188,"column":12},"end":{"line":188,"column":61}},"146":{"start":{"line":188,"column":46},"end":{"line":188,"column":59}},"147":{"start":{"line":190,"column":8},"end":{"line":190,"column":37}},"148":{"start":{"line":190,"column":24},"end":{"line":190,"column":35}},"149":{"start":{"line":191,"column":8},"end":{"line":191,"column":77}},"150":{"start":{"line":191,"column":29},"end":{"line":191,"column":73}},"151":{"start":{"line":192,"column":8},"end":{"line":192,"column":21}},"152":{"start":{"line":195,"column":0},"end":{"line":195,"column":22}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":29,"column":4},"end":{"line":29,"column":5}},"loc":{"start":{"line":29,"column":25},"end":{"line":35,"column":5}},"line":29},"1":{"name":"(anonymous_1)","decl":{"start":{"line":36,"column":4},"end":{"line":36,"column":5}},"loc":{"start":{"line":36,"column":21},"end":{"line":68,"column":5}},"line":36},"2":{"name":"(anonymous_2)","decl":{"start":{"line":63,"column":31},"end":{"line":63,"column":32}},"loc":{"start":{"line":63,"column":36},"end":{"line":63,"column":58}},"line":63},"3":{"name":"(anonymous_3)","decl":{"start":{"line":69,"column":4},"end":{"line":69,"column":5}},"loc":{"start":{"line":69,"column":32},"end":{"line":83,"column":5}},"line":69},"4":{"name":"(anonymous_4)","decl":{"start":{"line":84,"column":4},"end":{"line":84,"column":5}},"loc":{"start":{"line":84,"column":33},"end":{"line":99,"column":5}},"line":84},"5":{"name":"(anonymous_5)","decl":{"start":{"line":94,"column":29},"end":{"line":94,"column":30}},"loc":{"start":{"line":94,"column":39},"end":{"line":94,"column":48}},"line":94},"6":{"name":"(anonymous_6)","decl":{"start":{"line":100,"column":4},"end":{"line":100,"column":5}},"loc":{"start":{"line":100,"column":32},"end":{"line":103,"column":5}},"line":100},"7":{"name":"(anonymous_7)","decl":{"start":{"line":104,"column":4},"end":{"line":104,"column":5}},"loc":{"start":{"line":104,"column":40},"end":{"line":108,"column":5}},"line":104},"8":{"name":"(anonymous_8)","decl":{"start":{"line":109,"column":4},"end":{"line":109,"column":5}},"loc":{"start":{"line":109,"column":32},"end":{"line":141,"column":5}},"line":109},"9":{"name":"(anonymous_9)","decl":{"start":{"line":111,"column":42},"end":{"line":111,"column":43}},"loc":{"start":{"line":111,"column":50},"end":{"line":111,"column":71}},"line":111},"10":{"name":"(anonymous_10)","decl":{"start":{"line":112,"column":49},"end":{"line":112,"column":50}},"loc":{"start":{"line":112,"column":57},"end":{"line":112,"column":91}},"line":112},"11":{"name":"(anonymous_11)","decl":{"start":{"line":121,"column":47},"end":{"line":121,"column":48}},"loc":{"start":{"line":121,"column":53},"end":{"line":124,"column":13}},"line":121},"12":{"name":"(anonymous_12)","decl":{"start":{"line":122,"column":45},"end":{"line":122,"column":46}},"loc":{"start":{"line":122,"column":53},"end":{"line":122,"column":67}},"line":122},"13":{"name":"(anonymous_13)","decl":{"start":{"line":128,"column":30},"end":{"line":128,"column":31}},"loc":{"start":{"line":128,"column":40},"end":{"line":128,"column":60}},"line":128},"14":{"name":"(anonymous_14)","decl":{"start":{"line":142,"column":4},"end":{"line":142,"column":5}},"loc":{"start":{"line":142,"column":23},"end":{"line":149,"column":5}},"line":142},"15":{"name":"(anonymous_15)","decl":{"start":{"line":150,"column":4},"end":{"line":150,"column":5}},"loc":{"start":{"line":150,"column":17},"end":{"line":152,"column":5}},"line":150},"16":{"name":"(anonymous_16)","decl":{"start":{"line":153,"column":4},"end":{"line":153,"column":5}},"loc":{"start":{"line":153,"column":26},"end":{"line":173,"column":5}},"line":153},"17":{"name":"(anonymous_17)","decl":{"start":{"line":174,"column":4},"end":{"line":174,"column":5}},"loc":{"start":{"line":174,"column":35},"end":{"line":193,"column":5}},"line":174},"18":{"name":"(anonymous_18)","decl":{"start":{"line":177,"column":41},"end":{"line":177,"column":42}},"loc":{"start":{"line":177,"column":46},"end":{"line":177,"column":59}},"line":177},"19":{"name":"(anonymous_19)","decl":{"start":{"line":178,"column":43},"end":{"line":178,"column":44}},"loc":{"start":{"line":178,"column":48},"end":{"line":178,"column":61}},"line":178},"20":{"name":"(anonymous_20)","decl":{"start":{"line":179,"column":40},"end":{"line":179,"column":41}},"loc":{"start":{"line":179,"column":45},"end":{"line":179,"column":58}},"line":179},"21":{"name":"(anonymous_21)","decl":{"start":{"line":181,"column":36},"end":{"line":181,"column":37}},"loc":{"start":{"line":181,"column":41},"end":{"line":181,"column":54}},"line":181},"22":{"name":"(anonymous_22)","decl":{"start":{"line":184,"column":36},"end":{"line":184,"column":37}},"loc":{"start":{"line":184,"column":41},"end":{"line":184,"column":54}},"line":184},"23":{"name":"(anonymous_23)","decl":{"start":{"line":186,"column":38},"end":{"line":186,"column":39}},"loc":{"start":{"line":186,"column":43},"end":{"line":186,"column":56}},"line":186},"24":{"name":"(anonymous_24)","decl":{"start":{"line":187,"column":38},"end":{"line":187,"column":39}},"loc":{"start":{"line":187,"column":43},"end":{"line":187,"column":56}},"line":187},"25":{"name":"(anonymous_25)","decl":{"start":{"line":188,"column":41},"end":{"line":188,"column":42}},"loc":{"start":{"line":188,"column":46},"end":{"line":188,"column":59}},"line":188},"26":{"name":"(anonymous_26)","decl":{"start":{"line":190,"column":19},"end":{"line":190,"column":20}},"loc":{"start":{"line":190,"column":24},"end":{"line":190,"column":35}},"line":190},"27":{"name":"(anonymous_27)","decl":{"start":{"line":191,"column":22},"end":{"line":191,"column":23}},"loc":{"start":{"line":191,"column":27},"end":{"line":191,"column":75}},"line":191}},"branchMap":{"0":{"loc":{"start":{"line":38,"column":8},"end":{"line":42,"column":9}},"type":"if","locations":[{"start":{"line":38,"column":8},"end":{"line":42,"column":9}},{"start":{"line":38,"column":8},"end":{"line":42,"column":9}}],"line":38},"1":{"loc":{"start":{"line":43,"column":8},"end":{"line":49,"column":9}},"type":"if","locations":[{"start":{"line":43,"column":8},"end":{"line":49,"column":9}},{"start":{"line":43,"column":8},"end":{"line":49,"column":9}}],"line":43},"2":{"loc":{"start":{"line":43,"column":12},"end":{"line":45,"column":74}},"type":"binary-expr","locations":[{"start":{"line":43,"column":12},"end":{"line":43,"column":65}},{"start":{"line":44,"column":15},"end":{"line":44,"column":69}},{"start":{"line":45,"column":15},"end":{"line":45,"column":74}}],"line":43},"3":{"loc":{"start":{"line":50,"column":8},"end":{"line":57,"column":9}},"type":"if","locations":[{"start":{"line":50,"column":8},"end":{"line":57,"column":9}},{"start":{"line":50,"column":8},"end":{"line":57,"column":9}}],"line":50},"4":{"loc":{"start":{"line":52,"column":12},"end":{"line":54,"column":13}},"type":"if","locations":[{"start":{"line":52,"column":12},"end":{"line":54,"column":13}},{"start":{"line":52,"column":12},"end":{"line":54,"column":13}}],"line":52},"5":{"loc":{"start":{"line":58,"column":8},"end":{"line":62,"column":9}},"type":"if","locations":[{"start":{"line":58,"column":8},"end":{"line":62,"column":9}},{"start":{"line":58,"column":8},"end":{"line":62,"column":9}}],"line":58},"6":{"loc":{"start":{"line":63,"column":8},"end":{"line":65,"column":9}},"type":"if","locations":[{"start":{"line":63,"column":8},"end":{"line":65,"column":9}},{"start":{"line":63,"column":8},"end":{"line":65,"column":9}}],"line":63},"7":{"loc":{"start":{"line":71,"column":8},"end":{"line":73,"column":9}},"type":"if","locations":[{"start":{"line":71,"column":8},"end":{"line":73,"column":9}},{"start":{"line":71,"column":8},"end":{"line":73,"column":9}}],"line":71},"8":{"loc":{"start":{"line":85,"column":8},"end":{"line":87,"column":9}},"type":"if","locations":[{"start":{"line":85,"column":8},"end":{"line":87,"column":9}},{"start":{"line":85,"column":8},"end":{"line":87,"column":9}}],"line":85},"9":{"loc":{"start":{"line":113,"column":8},"end":{"line":115,"column":9}},"type":"if","locations":[{"start":{"line":113,"column":8},"end":{"line":115,"column":9}},{"start":{"line":113,"column":8},"end":{"line":115,"column":9}}],"line":113},"10":{"loc":{"start":{"line":113,"column":12},"end":{"line":113,"column":60}},"type":"binary-expr","locations":[{"start":{"line":113,"column":12},"end":{"line":113,"column":32}},{"start":{"line":113,"column":36},"end":{"line":113,"column":60}}],"line":113},"11":{"loc":{"start":{"line":116,"column":8},"end":{"line":118,"column":9}},"type":"if","locations":[{"start":{"line":116,"column":8},"end":{"line":118,"column":9}},{"start":{"line":116,"column":8},"end":{"line":118,"column":9}}],"line":116},"12":{"loc":{"start":{"line":123,"column":23},"end":{"line":123,"column":61}},"type":"cond-expr","locations":[{"start":{"line":123,"column":41},"end":{"line":123,"column":50}},{"start":{"line":123,"column":53},"end":{"line":123,"column":61}}],"line":123},"13":{"loc":{"start":{"line":125,"column":12},"end":{"line":127,"column":13}},"type":"if","locations":[{"start":{"line":125,"column":12},"end":{"line":127,"column":13}},{"start":{"line":125,"column":12},"end":{"line":127,"column":13}}],"line":125},"14":{"loc":{"start":{"line":128,"column":12},"end":{"line":132,"column":13}},"type":"if","locations":[{"start":{"line":128,"column":12},"end":{"line":132,"column":13}},{"start":{"line":128,"column":12},"end":{"line":132,"column":13}}],"line":128},"15":{"loc":{"start":{"line":130,"column":32},"end":{"line":130,"column":75}},"type":"cond-expr","locations":[{"start":{"line":130,"column":55},"end":{"line":130,"column":65}},{"start":{"line":130,"column":68},"end":{"line":130,"column":75}}],"line":130},"16":{"loc":{"start":{"line":143,"column":15},"end":{"line":143,"column":73}},"type":"binary-expr","locations":[{"start":{"line":143,"column":15},"end":{"line":143,"column":44}},{"start":{"line":143,"column":48},"end":{"line":143,"column":73}}],"line":143},"17":{"loc":{"start":{"line":145,"column":12},"end":{"line":147,"column":13}},"type":"if","locations":[{"start":{"line":145,"column":12},"end":{"line":147,"column":13}},{"start":{"line":145,"column":12},"end":{"line":147,"column":13}}],"line":145},"18":{"loc":{"start":{"line":161,"column":12},"end":{"line":163,"column":13}},"type":"if","locations":[{"start":{"line":161,"column":12},"end":{"line":163,"column":13}},{"start":{"line":161,"column":12},"end":{"line":163,"column":13}}],"line":161}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/store.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/store.ts"],"names":[],"mappings":"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","sourcesContent":["import { Action } from './actions/action';\nimport { AbortGameAction } from './actions/abort-game-action';\nimport { AppendLogAction } from './actions/append-log-action';\nimport { Card } from './card/card';\nimport { ChangeAvatarAction } from './actions/change-avatar-action';\nimport { Effect } from './effects/effect';\nimport { GameError } from '../game-error';\nimport { GameMessage, GameLog } from '../game-message';\nimport { Prompt } from './prompts/prompt';\nimport { ReorderHandAction, ReorderBenchAction } from './actions/reorder-actions';\nimport { ResolvePromptAction } from './actions/resolve-prompt-action';\nimport { State } from './state/state';\nimport { StateLog, StateLogParam } from './state/state-log';\nimport { StoreHandler } from './store-handler';\nimport { StoreLike } from './store-like';\nimport { generateId, deepClone } from '../../utils/utils';\nimport { attackReducer } from './effect-reducers/attack-effect';\nimport { playCardReducer } from './reducers/play-card-reducer';\nimport { playEnergyReducer } from './effect-reducers/play-energy-effect';\nimport { playPokemonReducer } from './effect-reducers/play-pokemon-effect';\nimport { playTrainerReducer } from './effect-reducers/play-trainer-effect';\nimport { playerTurnReducer } from './reducers/player-turn-reducer';\nimport { gamePhaseReducer } from './effect-reducers/game-phase-effect';\nimport { gameReducer } from './effect-reducers/game-effect';\nimport { checkState, checkStateReducer } from './effect-reducers/check-effect';\nimport { playerStateReducer} from './reducers/player-state-reducer';\nimport { retreatReducer } from './effect-reducers/retreat-effect';\nimport { setupPhaseReducer } from './reducers/setup-reducer';\nimport { abortGameReducer } from './reducers/abort-game-reducer';\n\ninterface PromptItem {\n  ids: number[],\n  then: (results: any) => void;\n}\n\nexport class Store implements StoreLike {\n\n  public state: State = new State();\n  private promptItems: PromptItem[] = [];\n  private waitItems: (() => void)[] = [];\n  private logId: number = 0;\n\n  constructor(private handler: StoreHandler) { }\n\n  public dispatch(action: Action): State {\n    let state = this.state;\n\n    if (action instanceof AbortGameAction) {\n      state = abortGameReducer(this, state, action);\n      this.handler.onStateChange(state);\n      return state;\n    }\n\n    if (action instanceof ReorderHandAction\n      || action instanceof ReorderBenchAction\n      || action instanceof ChangeAvatarAction) {\n      state = playerStateReducer(this, state, action);\n      this.handler.onStateChange(state);\n      return state;\n    }\n\n    if (action instanceof ResolvePromptAction) {\n      state = this.reducePrompt(state, action);\n      if (this.promptItems.length === 0) {\n        state = checkState(this, state);\n      }\n      this.handler.onStateChange(state);\n      return state;\n    }\n\n    if (action instanceof AppendLogAction) {\n      this.log(state, action.message, action.params, action.id);\n      this.handler.onStateChange(state);\n      return state;\n    }\n\n    if (state.prompts.some(p => p.result === undefined)) {\n      throw new GameError(GameMessage.ACTION_IN_PROGRESS);\n    }\n\n    state = this.reduce(state, action);\n\n    return state;\n  }\n\n  public reduceEffect(state: State, effect: Effect): State {\n    state = this.propagateEffect(state, effect);\n\n    if (effect.preventDefault === true) {\n      return state;\n    }\n\n    state = gamePhaseReducer(this, state, effect);\n    state = playEnergyReducer(this, state, effect);\n    state = playPokemonReducer(this, state, effect);\n    state = playTrainerReducer(this, state, effect);\n    state = retreatReducer(this, state, effect);\n    state = gameReducer(this, state, effect);\n    state = attackReducer(this, state, effect);\n    state = checkStateReducer(this, state, effect);\n\n    return state;\n  }\n\n  public prompt(state: State, prompts: Prompt<any>[] | Prompt<any>, then: (results: any) => void): State {\n    if (!(prompts instanceof Array)) {\n      prompts = [prompts];\n    }\n\n    for (let i = 0; i < prompts.length; i++) {\n      const id = generateId(state.prompts);\n      prompts[i].id = id;\n      state.prompts.push(prompts[i]);\n    }\n\n    const promptItem: PromptItem = {\n      ids: prompts.map(prompt => prompt.id),\n      then: then\n    };\n\n    this.promptItems.push(promptItem);\n    return state;\n  }\n\n  public waitPrompt(state: State, callback: () => void): State {\n    this.waitItems.push(callback);\n    return state;\n  }\n\n  public log(state: State, message: GameLog, params?: StateLogParam, client?: number): void {\n    const log = new StateLog(message, params, client);\n    log.id = ++this.logId;\n    state.logs.push(log);\n  }\n\n  private reducePrompt(state: State, action: ResolvePromptAction): State {\n    // Resolve prompts actions\n    const prompt = state.prompts.find(item => item.id === action.id);\n    const promptItem = this.promptItems.find(item => item.ids.indexOf(action.id) !== -1);\n\n    if (prompt === undefined || promptItem === undefined) {\n      throw new GameError(GameMessage.ILLEGAL_ACTION);\n    }\n\n    if (prompt.result !== undefined) {\n      throw new GameError(GameMessage.PROMPT_ALREADY_RESOLVED);\n    }\n\n    try {\n      prompt.result = action.result;\n\n      const results = promptItem.ids.map(id => {\n        const p = state.prompts.find(item => item.id === id);\n        return p === undefined ? undefined : p.result;\n      });\n\n      if (action.log !== undefined) {\n        this.log(state, action.log.message, action.log.params, action.log.client);\n      }\n\n      if (results.every(result => result !== undefined)) {\n        const itemIndex = this.promptItems.indexOf(promptItem);\n        promptItem.then(results.length === 1 ? results[0] : results);\n        this.promptItems.splice(itemIndex, 1);\n      }\n\n      this.resolveWaitItems();\n    } catch (storeError) {\n      // Illegal action\n      prompt.result = undefined;\n      throw storeError;\n    }\n\n    return state;\n  }\n\n  private resolveWaitItems(): void {\n    while (this.promptItems.length === 0 && this.waitItems.length > 0) {\n      const waitItem = this.waitItems.pop();\n      if (waitItem !== undefined) {\n        waitItem();\n      }\n    }\n  }\n\n  public hasPrompts(): boolean {\n    return this.promptItems.length > 0;\n  }\n\n  private reduce(state: State, action: Action): State {\n    const stateBackup = deepClone(state, [ Card ]);\n    this.promptItems.length = 0;\n\n    try {\n      state = setupPhaseReducer(this, state, action);\n      state = playCardReducer(this, state, action);\n      state = playerTurnReducer(this, state, action);\n\n      this.resolveWaitItems();\n      if (this.promptItems.length === 0) {\n        state = checkState(this, state);\n      }\n    } catch (storeError) {\n      // Illegal action\n      this.state = stateBackup;\n      this.promptItems.length = 0;\n      throw storeError;\n    }\n\n    this.handler.onStateChange(state);\n    return state;\n  }\n\n  private propagateEffect(state: State, effect: Effect): State {\n    const cards: Card[] = [];\n    for (const player of state.players) {\n      player.stadium.cards.forEach(c => cards.push(c));\n      player.supporter.cards.forEach(c => cards.push(c));\n      player.active.cards.forEach(c => cards.push(c));\n      for (const bench of player.bench) {\n        bench.cards.forEach(c => cards.push(c));\n      }\n      for (const prize of player.prizes) {\n        prize.cards.forEach(c => cards.push(c));\n      }\n      player.hand.cards.forEach(c => cards.push(c));\n      player.deck.cards.forEach(c => cards.push(c));\n      player.discard.cards.forEach(c => cards.push(c));\n    }\n    cards.sort(c => c.superType);\n    cards.forEach(c => { state = c.reduceEffect(this, state, effect); });\n    return state;\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"f793a123d3e2f7867495bd4ab2c5f81e1fb9d618","contentHash":"2b33ad093408e4a017f76f79365f9894799819a3f46499334e40f81c1f2f33f3"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/actions/abort-game-action.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/actions/abort-game-action.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":59}},"2":{"start":{"line":5,"column":0},"end":{"line":9,"column":80}},"3":{"start":{"line":6,"column":4},"end":{"line":6,"column":74}},"4":{"start":{"line":7,"column":4},"end":{"line":7,"column":76}},"5":{"start":{"line":8,"column":4},"end":{"line":8,"column":74}},"6":{"start":{"line":12,"column":8},"end":{"line":12,"column":35}},"7":{"start":{"line":13,"column":8},"end":{"line":13,"column":29}},"8":{"start":{"line":14,"column":8},"end":{"line":14,"column":33}},"9":{"start":{"line":17,"column":0},"end":{"line":17,"column":42}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":1},"end":{"line":5,"column":2}},"loc":{"start":{"line":5,"column":28},"end":{"line":9,"column":1}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":11,"column":4},"end":{"line":11,"column":5}},"loc":{"start":{"line":11,"column":35},"end":{"line":15,"column":5}},"line":11}},"branchMap":{"0":{"loc":{"start":{"line":9,"column":21},"end":{"line":9,"column":78}},"type":"binary-expr","locations":[{"start":{"line":9,"column":21},"end":{"line":9,"column":44}},{"start":{"line":9,"column":49},"end":{"line":9,"column":77}}],"line":9}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":1},"f":{"0":1,"1":0},"b":{"0":[1,1]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/actions/abort-game-action.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/actions/abort-game-action.ts"],"names":[],"mappings":";;;AAEA,IAAY,eAIX;AAJD,WAAY,eAAe;IACzB,qEAAY,CAAA;IACZ,uEAAa,CAAA;IACb,qEAAY,CAAA;AACd,CAAC,EAJW,eAAe,GAAf,uBAAe,KAAf,uBAAe,QAI1B;AAED,MAAa,eAAe;IAI1B,YACS,SAAiB,EACjB,MAAuB;QADvB,cAAS,GAAT,SAAS,CAAQ;QACjB,WAAM,GAAN,MAAM,CAAiB;QAJvB,SAAI,GAAW,YAAY,CAAC;IAKlC,CAAC;CAEL;AATD,0CASC","sourcesContent":["import { Action } from './action';\n\nexport enum AbortGameReason {\n  TIME_ELAPSED,\n  ILLEGAL_MOVES,\n  DISCONNECTED\n}\n\nexport class AbortGameAction implements Action {\n\n  readonly type: string = 'ABORT_GAME';\n\n  constructor(\n    public culpritId: number,\n    public reason: AbortGameReason\n  ) {}\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"a54c9eaffe066d730c1318c2fafce3f36cdff2a2","contentHash":"ca8795317d729692d38589ac130abcf87d8006dd3119a9c7d43b8646a8c13e8d"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/effect-reducers/attack-effect.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/effect-reducers/attack-effect.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":31}},"2":{"start":{"line":4,"column":21},"end":{"line":4,"column":48}},"3":{"start":{"line":5,"column":23},"end":{"line":5,"column":52}},"4":{"start":{"line":6,"column":25},"end":{"line":6,"column":61}},"5":{"start":{"line":7,"column":23},"end":{"line":7,"column":57}},"6":{"start":{"line":8,"column":22},"end":{"line":8,"column":47}},"7":{"start":{"line":10,"column":4},"end":{"line":23,"column":5}},"8":{"start":{"line":11,"column":23},"end":{"line":11,"column":36}},"9":{"start":{"line":12,"column":28},"end":{"line":12,"column":51}},"10":{"start":{"line":13,"column":8},"end":{"line":15,"column":9}},"11":{"start":{"line":14,"column":12},"end":{"line":14,"column":88}},"12":{"start":{"line":16,"column":23},"end":{"line":16,"column":49}},"13":{"start":{"line":17,"column":8},"end":{"line":17,"column":32}},"14":{"start":{"line":18,"column":8},"end":{"line":22,"column":9}},"15":{"start":{"line":19,"column":38},"end":{"line":19,"column":105}},"16":{"start":{"line":20,"column":12},"end":{"line":20,"column":53}},"17":{"start":{"line":21,"column":12},"end":{"line":21,"column":57}},"18":{"start":{"line":24,"column":4},"end":{"line":35,"column":5}},"19":{"start":{"line":25,"column":21},"end":{"line":25,"column":40}},"20":{"start":{"line":26,"column":30},"end":{"line":26,"column":91}},"21":{"start":{"line":27,"column":8},"end":{"line":27,"column":45}},"22":{"start":{"line":28,"column":8},"end":{"line":28,"column":59}},"23":{"start":{"line":29,"column":8},"end":{"line":29,"column":63}},"24":{"start":{"line":30,"column":8},"end":{"line":30,"column":57}},"25":{"start":{"line":31,"column":27},"end":{"line":31,"column":91}},"26":{"start":{"line":32,"column":8},"end":{"line":32,"column":42}},"27":{"start":{"line":33,"column":8},"end":{"line":33,"column":54}},"28":{"start":{"line":34,"column":8},"end":{"line":34,"column":21}},"29":{"start":{"line":36,"column":4},"end":{"line":44,"column":5}},"30":{"start":{"line":37,"column":23},"end":{"line":37,"column":36}},"31":{"start":{"line":38,"column":28},"end":{"line":38,"column":51}},"32":{"start":{"line":39,"column":8},"end":{"line":41,"column":9}},"33":{"start":{"line":40,"column":12},"end":{"line":40,"column":88}},"34":{"start":{"line":42,"column":23},"end":{"line":42,"column":49}},"35":{"start":{"line":43,"column":8},"end":{"line":43,"column":32}},"36":{"start":{"line":45,"column":4},"end":{"line":51,"column":5}},"37":{"start":{"line":46,"column":23},"end":{"line":46,"column":36}},"38":{"start":{"line":47,"column":22},"end":{"line":47,"column":34}},"39":{"start":{"line":48,"column":22},"end":{"line":48,"column":71}},"40":{"start":{"line":49,"column":8},"end":{"line":49,"column":49}},"41":{"start":{"line":50,"column":8},"end":{"line":50,"column":21}},"42":{"start":{"line":52,"column":4},"end":{"line":56,"column":5}},"43":{"start":{"line":53,"column":23},"end":{"line":53,"column":36}},"44":{"start":{"line":54,"column":8},"end":{"line":54,"column":72}},"45":{"start":{"line":55,"column":8},"end":{"line":55,"column":21}},"46":{"start":{"line":57,"column":4},"end":{"line":63,"column":5}},"47":{"start":{"line":58,"column":23},"end":{"line":58,"column":36}},"48":{"start":{"line":59,"column":22},"end":{"line":59,"column":71}},"49":{"start":{"line":60,"column":27},"end":{"line":60,"column":86}},"50":{"start":{"line":61,"column":8},"end":{"line":61,"column":54}},"51":{"start":{"line":62,"column":8},"end":{"line":62,"column":21}},"52":{"start":{"line":64,"column":4},"end":{"line":73,"column":5}},"53":{"start":{"line":65,"column":23},"end":{"line":65,"column":36}},"54":{"start":{"line":66,"column":8},"end":{"line":68,"column":11}},"55":{"start":{"line":67,"column":12},"end":{"line":67,"column":43}},"56":{"start":{"line":69,"column":8},"end":{"line":71,"column":9}},"57":{"start":{"line":70,"column":12},"end":{"line":70,"column":54}},"58":{"start":{"line":72,"column":8},"end":{"line":72,"column":21}},"59":{"start":{"line":74,"column":4},"end":{"line":80,"column":5}},"60":{"start":{"line":75,"column":23},"end":{"line":75,"column":36}},"61":{"start":{"line":76,"column":8},"end":{"line":78,"column":11}},"62":{"start":{"line":77,"column":12},"end":{"line":77,"column":46}},"63":{"start":{"line":79,"column":8},"end":{"line":79,"column":21}},"64":{"start":{"line":81,"column":4},"end":{"line":81,"column":17}},"65":{"start":{"line":83,"column":0},"end":{"line":83,"column":38}}},"fnMap":{"0":{"name":"attackReducer","decl":{"start":{"line":9,"column":9},"end":{"line":9,"column":22}},"loc":{"start":{"line":9,"column":45},"end":{"line":82,"column":1}},"line":9},"1":{"name":"(anonymous_1)","decl":{"start":{"line":66,"column":41},"end":{"line":66,"column":42}},"loc":{"start":{"line":66,"column":47},"end":{"line":68,"column":9}},"line":66},"2":{"name":"(anonymous_2)","decl":{"start":{"line":76,"column":41},"end":{"line":76,"column":42}},"loc":{"start":{"line":76,"column":47},"end":{"line":78,"column":9}},"line":76}},"branchMap":{"0":{"loc":{"start":{"line":10,"column":4},"end":{"line":23,"column":5}},"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":23,"column":5}},{"start":{"line":10,"column":4},"end":{"line":23,"column":5}}],"line":10},"1":{"loc":{"start":{"line":13,"column":8},"end":{"line":15,"column":9}},"type":"if","locations":[{"start":{"line":13,"column":8},"end":{"line":15,"column":9}},{"start":{"line":13,"column":8},"end":{"line":15,"column":9}}],"line":13},"2":{"loc":{"start":{"line":18,"column":8},"end":{"line":22,"column":9}},"type":"if","locations":[{"start":{"line":18,"column":8},"end":{"line":22,"column":9}},{"start":{"line":18,"column":8},"end":{"line":22,"column":9}}],"line":18},"3":{"loc":{"start":{"line":24,"column":4},"end":{"line":35,"column":5}},"type":"if","locations":[{"start":{"line":24,"column":4},"end":{"line":35,"column":5}},{"start":{"line":24,"column":4},"end":{"line":35,"column":5}}],"line":24},"4":{"loc":{"start":{"line":36,"column":4},"end":{"line":44,"column":5}},"type":"if","locations":[{"start":{"line":36,"column":4},"end":{"line":44,"column":5}},{"start":{"line":36,"column":4},"end":{"line":44,"column":5}}],"line":36},"5":{"loc":{"start":{"line":39,"column":8},"end":{"line":41,"column":9}},"type":"if","locations":[{"start":{"line":39,"column":8},"end":{"line":41,"column":9}},{"start":{"line":39,"column":8},"end":{"line":41,"column":9}}],"line":39},"6":{"loc":{"start":{"line":45,"column":4},"end":{"line":51,"column":5}},"type":"if","locations":[{"start":{"line":45,"column":4},"end":{"line":51,"column":5}},{"start":{"line":45,"column":4},"end":{"line":51,"column":5}}],"line":45},"7":{"loc":{"start":{"line":52,"column":4},"end":{"line":56,"column":5}},"type":"if","locations":[{"start":{"line":52,"column":4},"end":{"line":56,"column":5}},{"start":{"line":52,"column":4},"end":{"line":56,"column":5}}],"line":52},"8":{"loc":{"start":{"line":57,"column":4},"end":{"line":63,"column":5}},"type":"if","locations":[{"start":{"line":57,"column":4},"end":{"line":63,"column":5}},{"start":{"line":57,"column":4},"end":{"line":63,"column":5}}],"line":57},"9":{"loc":{"start":{"line":64,"column":4},"end":{"line":73,"column":5}},"type":"if","locations":[{"start":{"line":64,"column":4},"end":{"line":73,"column":5}},{"start":{"line":64,"column":4},"end":{"line":73,"column":5}}],"line":64},"10":{"loc":{"start":{"line":69,"column":8},"end":{"line":71,"column":9}},"type":"if","locations":[{"start":{"line":69,"column":8},"end":{"line":71,"column":9}},{"start":{"line":69,"column":8},"end":{"line":71,"column":9}}],"line":69},"11":{"loc":{"start":{"line":74,"column":4},"end":{"line":80,"column":5}},"type":"if","locations":[{"start":{"line":74,"column":4},"end":{"line":80,"column":5}},{"start":{"line":74,"column":4},"end":{"line":80,"column":5}}],"line":74}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":1},"f":{"0":0,"1":0,"2":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/effect-reducers/attack-effect.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/effect-reducers/attack-effect.ts"],"names":[],"mappings":"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","sourcesContent":["import { GameError } from '../../game-error';\nimport { GameMessage } from '../../game-message';\nimport { Effect } from '../effects/effect';\nimport { State } from '../state/state';\nimport { StoreLike } from '../store-like';\nimport { PutDamageEffect, DealDamageEffect, DiscardCardsEffect,\n  AddMarkerEffect, HealTargetEffect, AddSpecialConditionsEffect,\n  RemoveSpecialConditionsEffect, ApplyWeaknessEffect, AfterDamageEffect,\n  PutCountersEffect } from '../effects/attack-effects';\nimport { HealEffect } from '../effects/game-effects';\nimport { StateUtils } from '../state-utils';\n\nexport function attackReducer(store: StoreLike, state: State, effect: Effect): State {\n\n  if (effect instanceof PutDamageEffect) {\n    const target = effect.target;\n    const pokemonCard = target.getPokemonCard();\n    if (pokemonCard === undefined) {\n      throw new GameError(GameMessage.ILLEGAL_ACTION);\n    }\n\n    const damage = Math.max(0, effect.damage);\n    target.damage += damage;\n\n    if (damage > 0) {\n      const afterDamageEffect = new AfterDamageEffect(effect.attackEffect, damage);\n      afterDamageEffect.target = effect.target;\n      store.reduceEffect(state, afterDamageEffect);\n    }\n  }\n\n  if (effect instanceof DealDamageEffect) {\n    const base = effect.attackEffect;\n\n    const applyWeakness = new ApplyWeaknessEffect(base, effect.damage);\n    applyWeakness.target = effect.target;\n    applyWeakness.ignoreWeakness = base.ignoreWeakness;\n    applyWeakness.ignoreResistance = base.ignoreResistance;\n    state = store.reduceEffect(state, applyWeakness);\n\n    const dealDamage = new PutDamageEffect(base, applyWeakness.damage);\n    dealDamage.target = effect.target;\n    state = store.reduceEffect(state, dealDamage);\n\n    return state;\n  }\n\n  if (effect instanceof PutCountersEffect) {\n    const target = effect.target;\n    const pokemonCard = target.getPokemonCard();\n    if (pokemonCard === undefined) {\n      throw new GameError(GameMessage.ILLEGAL_ACTION);\n    }\n\n    const damage = Math.max(0, effect.damage);\n    target.damage += damage;\n  }\n\n  if (effect instanceof DiscardCardsEffect) {\n    const target = effect.target;\n    const cards = effect.cards;\n    const owner = StateUtils.findOwner(state, target);\n    target.moveCardsTo(cards, owner.discard);\n    return state;\n  }\n\n  if (effect instanceof AddMarkerEffect) {\n    const target = effect.target;\n    target.marker.addMarker(effect.markerName, effect.markerSource);\n    return state;\n  }\n\n  if (effect instanceof HealTargetEffect) {\n    const target = effect.target;\n    const owner = StateUtils.findOwner(state, target);\n    const healEffect = new HealEffect(owner, target, effect.damage);\n    state = store.reduceEffect(state, healEffect);\n    return state;\n  }\n\n  if (effect instanceof AddSpecialConditionsEffect) {\n    const target = effect.target;\n    effect.specialConditions.forEach(sp => {\n      target.addSpecialCondition(sp);\n    });\n    if (effect.poisonDamage !== undefined) {\n      target.poisonDamage = effect.poisonDamage;\n    }\n    return state;\n  }\n\n  if (effect instanceof RemoveSpecialConditionsEffect) {\n    const target = effect.target;\n    effect.specialConditions.forEach(sp => {\n      target.removeSpecialCondition(sp);\n    });\n    return state;\n  }\n\n  return state;\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"05b06d6f9ad2de3c7e93489897b9a9c3b53deae2","contentHash":"f6e0a040133a6f2f7416d447ca500fc451999aa9525a2e95c3c2c53e7929c8f9"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/effects/attack-effects.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/effects/attack-effects.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":360}},"2":{"start":{"line":4,"column":21},"end":{"line":4,"column":50}},"3":{"start":{"line":6,"column":0},"end":{"line":15,"column":74}},"4":{"start":{"line":7,"column":4},"end":{"line":7,"column":69}},"5":{"start":{"line":8,"column":4},"end":{"line":8,"column":63}},"6":{"start":{"line":9,"column":4},"end":{"line":9,"column":61}},"7":{"start":{"line":10,"column":4},"end":{"line":10,"column":65}},"8":{"start":{"line":11,"column":4},"end":{"line":11,"column":65}},"9":{"start":{"line":12,"column":4},"end":{"line":12,"column":65}},"10":{"start":{"line":13,"column":4},"end":{"line":13,"column":61}},"11":{"start":{"line":14,"column":4},"end":{"line":14,"column":85}},"12":{"start":{"line":18,"column":8},"end":{"line":18,"column":33}},"13":{"start":{"line":19,"column":8},"end":{"line":19,"column":34}},"14":{"start":{"line":20,"column":8},"end":{"line":20,"column":38}},"15":{"start":{"line":21,"column":8},"end":{"line":21,"column":34}},"16":{"start":{"line":22,"column":8},"end":{"line":22,"column":41}},"17":{"start":{"line":23,"column":8},"end":{"line":23,"column":43}},"18":{"start":{"line":26,"column":0},"end":{"line":26,"column":52}},"19":{"start":{"line":29,"column":8},"end":{"line":29,"column":20}},"20":{"start":{"line":30,"column":8},"end":{"line":30,"column":56}},"21":{"start":{"line":31,"column":8},"end":{"line":31,"column":36}},"22":{"start":{"line":32,"column":8},"end":{"line":32,"column":38}},"23":{"start":{"line":33,"column":8},"end":{"line":33,"column":36}},"24":{"start":{"line":34,"column":8},"end":{"line":34,"column":29}},"25":{"start":{"line":37,"column":0},"end":{"line":37,"column":50}},"26":{"start":{"line":40,"column":8},"end":{"line":40,"column":20}},"27":{"start":{"line":41,"column":8},"end":{"line":41,"column":53}},"28":{"start":{"line":42,"column":8},"end":{"line":42,"column":36}},"29":{"start":{"line":43,"column":8},"end":{"line":43,"column":29}},"30":{"start":{"line":46,"column":0},"end":{"line":46,"column":44}},"31":{"start":{"line":49,"column":8},"end":{"line":49,"column":20}},"32":{"start":{"line":50,"column":8},"end":{"line":50,"column":52}},"33":{"start":{"line":51,"column":8},"end":{"line":51,"column":36}},"34":{"start":{"line":52,"column":8},"end":{"line":52,"column":29}},"35":{"start":{"line":55,"column":0},"end":{"line":55,"column":42}},"36":{"start":{"line":58,"column":8},"end":{"line":58,"column":20}},"37":{"start":{"line":59,"column":8},"end":{"line":59,"column":54}},"38":{"start":{"line":60,"column":8},"end":{"line":60,"column":36}},"39":{"start":{"line":61,"column":8},"end":{"line":61,"column":29}},"40":{"start":{"line":64,"column":0},"end":{"line":64,"column":46}},"41":{"start":{"line":67,"column":8},"end":{"line":67,"column":20}},"42":{"start":{"line":68,"column":8},"end":{"line":68,"column":54}},"43":{"start":{"line":69,"column":8},"end":{"line":69,"column":36}},"44":{"start":{"line":70,"column":8},"end":{"line":70,"column":29}},"45":{"start":{"line":73,"column":0},"end":{"line":73,"column":46}},"46":{"start":{"line":76,"column":8},"end":{"line":76,"column":20}},"47":{"start":{"line":77,"column":8},"end":{"line":77,"column":54}},"48":{"start":{"line":78,"column":8},"end":{"line":78,"column":36}},"49":{"start":{"line":79,"column":8},"end":{"line":79,"column":33}},"50":{"start":{"line":82,"column":0},"end":{"line":82,"column":48}},"51":{"start":{"line":85,"column":8},"end":{"line":85,"column":20}},"52":{"start":{"line":86,"column":8},"end":{"line":86,"column":52}},"53":{"start":{"line":87,"column":8},"end":{"line":87,"column":36}},"54":{"start":{"line":88,"column":8},"end":{"line":88,"column":37}},"55":{"start":{"line":89,"column":8},"end":{"line":89,"column":41}},"56":{"start":{"line":92,"column":0},"end":{"line":92,"column":42}},"57":{"start":{"line":95,"column":8},"end":{"line":95,"column":20}},"58":{"start":{"line":96,"column":8},"end":{"line":96,"column":64}},"59":{"start":{"line":97,"column":8},"end":{"line":97,"column":36}},"60":{"start":{"line":98,"column":8},"end":{"line":98,"column":51}},"61":{"start":{"line":101,"column":0},"end":{"line":101,"column":64}},"62":{"start":{"line":104,"column":8},"end":{"line":104,"column":20}},"63":{"start":{"line":105,"column":8},"end":{"line":105,"column":64}},"64":{"start":{"line":106,"column":8},"end":{"line":106,"column":36}},"65":{"start":{"line":107,"column":8},"end":{"line":115,"column":9}},"66":{"start":{"line":108,"column":12},"end":{"line":114,"column":14}},"67":{"start":{"line":116,"column":8},"end":{"line":116,"column":51}},"68":{"start":{"line":119,"column":0},"end":{"line":119,"column":70}},"69":{"start":{"line":122,"column":8},"end":{"line":122,"column":20}},"70":{"start":{"line":123,"column":8},"end":{"line":123,"column":52}},"71":{"start":{"line":124,"column":8},"end":{"line":124,"column":36}},"72":{"start":{"line":125,"column":8},"end":{"line":125,"column":29}},"73":{"start":{"line":128,"column":0},"end":{"line":128,"column":44}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":1},"end":{"line":6,"column":2}},"loc":{"start":{"line":6,"column":26},"end":{"line":15,"column":1}},"line":6},"1":{"name":"(anonymous_1)","decl":{"start":{"line":17,"column":4},"end":{"line":17,"column":5}},"loc":{"start":{"line":17,"column":22},"end":{"line":24,"column":5}},"line":17},"2":{"name":"(anonymous_2)","decl":{"start":{"line":28,"column":4},"end":{"line":28,"column":5}},"loc":{"start":{"line":28,"column":30},"end":{"line":35,"column":5}},"line":28},"3":{"name":"(anonymous_3)","decl":{"start":{"line":39,"column":4},"end":{"line":39,"column":5}},"loc":{"start":{"line":39,"column":30},"end":{"line":44,"column":5}},"line":39},"4":{"name":"(anonymous_4)","decl":{"start":{"line":48,"column":4},"end":{"line":48,"column":5}},"loc":{"start":{"line":48,"column":30},"end":{"line":53,"column":5}},"line":48},"5":{"name":"(anonymous_5)","decl":{"start":{"line":57,"column":4},"end":{"line":57,"column":5}},"loc":{"start":{"line":57,"column":30},"end":{"line":62,"column":5}},"line":57},"6":{"name":"(anonymous_6)","decl":{"start":{"line":66,"column":4},"end":{"line":66,"column":5}},"loc":{"start":{"line":66,"column":30},"end":{"line":71,"column":5}},"line":66},"7":{"name":"(anonymous_7)","decl":{"start":{"line":75,"column":4},"end":{"line":75,"column":5}},"loc":{"start":{"line":75,"column":35},"end":{"line":80,"column":5}},"line":75},"8":{"name":"(anonymous_8)","decl":{"start":{"line":84,"column":4},"end":{"line":84,"column":5}},"loc":{"start":{"line":84,"column":48},"end":{"line":90,"column":5}},"line":84},"9":{"name":"(anonymous_9)","decl":{"start":{"line":94,"column":4},"end":{"line":94,"column":5}},"loc":{"start":{"line":94,"column":41},"end":{"line":99,"column":5}},"line":94},"10":{"name":"(anonymous_10)","decl":{"start":{"line":103,"column":4},"end":{"line":103,"column":5}},"loc":{"start":{"line":103,"column":41},"end":{"line":117,"column":5}},"line":103},"11":{"name":"(anonymous_11)","decl":{"start":{"line":121,"column":4},"end":{"line":121,"column":5}},"loc":{"start":{"line":121,"column":30},"end":{"line":126,"column":5}},"line":121}},"branchMap":{"0":{"loc":{"start":{"line":15,"column":19},"end":{"line":15,"column":72}},"type":"binary-expr","locations":[{"start":{"line":15,"column":19},"end":{"line":15,"column":40}},{"start":{"line":15,"column":45},"end":{"line":15,"column":71}}],"line":15},"1":{"loc":{"start":{"line":107,"column":8},"end":{"line":115,"column":9}},"type":"if","locations":[{"start":{"line":107,"column":8},"end":{"line":115,"column":9}},{"start":{"line":107,"column":8},"end":{"line":115,"column":9}}],"line":107}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":1,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":1,"26":0,"27":0,"28":0,"29":0,"30":1,"31":0,"32":0,"33":0,"34":0,"35":1,"36":0,"37":0,"38":0,"39":0,"40":1,"41":0,"42":0,"43":0,"44":0,"45":1,"46":0,"47":0,"48":0,"49":0,"50":1,"51":0,"52":0,"53":0,"54":0,"55":0,"56":1,"57":0,"58":0,"59":0,"60":0,"61":1,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":1,"69":0,"70":0,"71":0,"72":0,"73":1},"f":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0},"b":{"0":[1,1],"1":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/effects/attack-effects.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/effects/attack-effects.ts"],"names":[],"mappings":"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","sourcesContent":["import { Attack } from '../card/pokemon-types';\nimport { AttackEffect } from './game-effects';\nimport { Card } from '../card/card';\nimport { Effect } from './effect';\nimport { Player } from '../state/player';\nimport { PokemonCardList } from '../state/pokemon-card-list';\nimport { SpecialCondition } from '../card/card-types';\n\nexport enum AttackEffects {\n  APPLY_WEAKNESS_EFFECT = 'APPLY_WEAKNESS_EFFECT',\n  DEAL_DAMAGE_EFFECT = 'DEAL_DAMAGE_EFFECT',\n  PUT_DAMAGE_EFFECT = 'PUT_DAMAGE_EFFECT',\n  AFTER_DAMAGE_EFFECT = 'AFTER_DAMAGE_EFFECT',\n  PUT_COUNTERS_EFFECT = 'PUT_COUNTERS_EFFECT',\n  DISCARD_CARD_EFFECT = 'DISCARD_CARD_EFFECT',\n  ADD_MARKER_EFFECT = 'ADD_MARKER_EFFECT',\n  ADD_SPECIAL_CONDITIONS_EFFECT = 'ADD_SPECIAL_CONDITIONS_EFFECT'\n}\n\nexport abstract class AbstractAttackEffect {\n  public attackEffect: AttackEffect;\n  public attack: Attack;\n  public player: Player;\n  public opponent: Player;\n  public target: PokemonCardList;\n  public source: PokemonCardList;\n\n  constructor(base: AttackEffect) {\n    this.attackEffect = base;\n    this.player = base.player;\n    this.opponent = base.opponent;\n    this.attack = base.attack;\n    this.source = base.player.active;\n    this.target = base.opponent.active;\n  }\n}\n\nexport class ApplyWeaknessEffect extends AbstractAttackEffect implements Effect {\n  readonly type: string = AttackEffects.APPLY_WEAKNESS_EFFECT;\n  public preventDefault = false;\n  public damage: number;\n  public ignoreResistance = false;\n  public ignoreWeakness = false;\n\n  constructor(base: AttackEffect, damage: number) {\n    super(base);\n    this.damage = damage;\n  }\n}\n\nexport class DealDamageEffect extends AbstractAttackEffect implements Effect {\n  readonly type: string = AttackEffects.DEAL_DAMAGE_EFFECT;\n  public preventDefault = false;\n  public damage: number;\n\n  constructor(base: AttackEffect, damage: number) {\n    super(base);\n    this.damage = damage;\n  }\n}\n\nexport class PutDamageEffect extends AbstractAttackEffect implements Effect {\n  readonly type: string = AttackEffects.PUT_DAMAGE_EFFECT;\n  public preventDefault = false;\n  public damage: number;\n\n  constructor(base: AttackEffect, damage: number) {\n    super(base);\n    this.damage = damage;\n  }\n}\n\nexport class AfterDamageEffect extends AbstractAttackEffect implements Effect {\n  readonly type: string = AttackEffects.AFTER_DAMAGE_EFFECT;\n  public preventDefault = false;\n  public damage: number;\n\n  constructor(base: AttackEffect, damage: number) {\n    super(base);\n    this.damage = damage;\n  }\n}\n\nexport class PutCountersEffect extends AbstractAttackEffect implements Effect {\n  readonly type: string = AttackEffects.PUT_COUNTERS_EFFECT;\n  public preventDefault = false;\n  public damage: number;\n\n  constructor(base: AttackEffect, damage: number) {\n    super(base);\n    this.damage = damage;\n  }\n}\n\nexport class DiscardCardsEffect extends AbstractAttackEffect implements Effect {\n  readonly type: string = AttackEffects.DISCARD_CARD_EFFECT;\n  public preventDefault = false;\n  public cards: Card[];\n\n  constructor(base: AttackEffect, energyCards: Card[]) {\n    super(base);\n    this.cards = energyCards;\n  }\n}\n\nexport class AddMarkerEffect extends AbstractAttackEffect implements Effect {\n  readonly type: string = AttackEffects.ADD_MARKER_EFFECT;\n  public preventDefault = false;\n  public markerName: string;\n  public markerSource: Card;\n\n  constructor(base: AttackEffect, markerName: string, markerSource: Card) {\n    super(base);\n    this.markerName = markerName;\n    this.markerSource = markerSource;\n  }\n}\n\nexport class AddSpecialConditionsEffect extends AbstractAttackEffect implements Effect {\n  readonly type: string = AttackEffects.ADD_SPECIAL_CONDITIONS_EFFECT;\n  public preventDefault = false;\n  public poisonDamage?: number;\n  public specialConditions: SpecialCondition[];\n\n  constructor(base: AttackEffect, specialConditions: SpecialCondition[]) {\n    super(base);\n    this.specialConditions = specialConditions;\n  }\n}\n\nexport class RemoveSpecialConditionsEffect extends AbstractAttackEffect implements Effect {\n  readonly type: string = AttackEffects.ADD_SPECIAL_CONDITIONS_EFFECT;\n  public preventDefault = false;\n  public specialConditions: SpecialCondition[];\n\n  constructor(base: AttackEffect, specialConditions: SpecialCondition[] | undefined) {\n    super(base);\n    if (specialConditions === undefined) {\n      specialConditions = [\n        SpecialCondition.PARALYZED,\n        SpecialCondition.CONFUSED,\n        SpecialCondition.ASLEEP,\n        SpecialCondition.POISONED,\n        SpecialCondition.BURNED\n      ];\n    }\n    this.specialConditions = specialConditions;\n  }\n}\n\nexport class HealTargetEffect extends AbstractAttackEffect implements Effect {\n  readonly type: string = AttackEffects.ADD_MARKER_EFFECT;\n  public preventDefault = false;\n  public damage: number;\n\n  constructor(base: AttackEffect, damage: number) {\n    super(base);\n    this.damage = damage;\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"6df80fd6cd766a732d4a5bc799ac40453647a72f","contentHash":"c9ad0bad54a01feb53d875c298bc7920a5b47766672ef8501dd4dc3ec7cc19a5"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/effects/game-effects.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/effects/game-effects.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":245}},"2":{"start":{"line":5,"column":0},"end":{"line":15,"column":68}},"3":{"start":{"line":6,"column":4},"end":{"line":6,"column":53}},"4":{"start":{"line":7,"column":4},"end":{"line":7,"column":59}},"5":{"start":{"line":8,"column":4},"end":{"line":8,"column":61}},"6":{"start":{"line":9,"column":4},"end":{"line":9,"column":57}},"7":{"start":{"line":10,"column":4},"end":{"line":10,"column":49}},"8":{"start":{"line":11,"column":4},"end":{"line":11,"column":51}},"9":{"start":{"line":12,"column":4},"end":{"line":12,"column":57}},"10":{"start":{"line":13,"column":4},"end":{"line":13,"column":47}},"11":{"start":{"line":14,"column":4},"end":{"line":14,"column":51}},"12":{"start":{"line":18,"column":8},"end":{"line":18,"column":47}},"13":{"start":{"line":19,"column":8},"end":{"line":19,"column":36}},"14":{"start":{"line":20,"column":8},"end":{"line":20,"column":29}},"15":{"start":{"line":21,"column":8},"end":{"line":21,"column":37}},"16":{"start":{"line":24,"column":0},"end":{"line":24,"column":38}},"17":{"start":{"line":27,"column":8},"end":{"line":27,"column":49}},"18":{"start":{"line":28,"column":8},"end":{"line":28,"column":36}},"19":{"start":{"line":29,"column":8},"end":{"line":29,"column":29}},"20":{"start":{"line":30,"column":8},"end":{"line":30,"column":27}},"21":{"start":{"line":31,"column":8},"end":{"line":31,"column":25}},"22":{"start":{"line":34,"column":0},"end":{"line":34,"column":40}},"23":{"start":{"line":37,"column":8},"end":{"line":37,"column":45}},"24":{"start":{"line":38,"column":8},"end":{"line":38,"column":36}},"25":{"start":{"line":39,"column":8},"end":{"line":39,"column":29}},"26":{"start":{"line":40,"column":8},"end":{"line":40,"column":27}},"27":{"start":{"line":41,"column":8},"end":{"line":41,"column":25}},"28":{"start":{"line":44,"column":0},"end":{"line":44,"column":34}},"29":{"start":{"line":47,"column":8},"end":{"line":47,"column":50}},"30":{"start":{"line":48,"column":8},"end":{"line":48,"column":36}},"31":{"start":{"line":49,"column":8},"end":{"line":49,"column":29}},"32":{"start":{"line":50,"column":8},"end":{"line":50,"column":29}},"33":{"start":{"line":53,"column":0},"end":{"line":53,"column":42}},"34":{"start":{"line":56,"column":8},"end":{"line":56,"column":51}},"35":{"start":{"line":57,"column":8},"end":{"line":57,"column":36}},"36":{"start":{"line":58,"column":8},"end":{"line":58,"column":29}},"37":{"start":{"line":59,"column":8},"end":{"line":59,"column":31}},"38":{"start":{"line":62,"column":0},"end":{"line":62,"column":44}},"39":{"start":{"line":65,"column":8},"end":{"line":65,"column":46}},"40":{"start":{"line":66,"column":8},"end":{"line":66,"column":36}},"41":{"start":{"line":67,"column":8},"end":{"line":67,"column":36}},"42":{"start":{"line":68,"column":8},"end":{"line":68,"column":38}},"43":{"start":{"line":69,"column":8},"end":{"line":69,"column":29}},"44":{"start":{"line":70,"column":8},"end":{"line":70,"column":33}},"45":{"start":{"line":71,"column":8},"end":{"line":71,"column":29}},"46":{"start":{"line":72,"column":8},"end":{"line":72,"column":36}},"47":{"start":{"line":75,"column":0},"end":{"line":75,"column":36}},"48":{"start":{"line":79,"column":8},"end":{"line":79,"column":49}},"49":{"start":{"line":80,"column":8},"end":{"line":80,"column":36}},"50":{"start":{"line":81,"column":8},"end":{"line":81,"column":29}},"51":{"start":{"line":82,"column":8},"end":{"line":82,"column":29}},"52":{"start":{"line":83,"column":8},"end":{"line":83,"column":28}},"53":{"start":{"line":86,"column":0},"end":{"line":86,"column":40}},"54":{"start":{"line":89,"column":8},"end":{"line":89,"column":44}},"55":{"start":{"line":90,"column":8},"end":{"line":90,"column":36}},"56":{"start":{"line":91,"column":8},"end":{"line":91,"column":29}},"57":{"start":{"line":92,"column":8},"end":{"line":92,"column":29}},"58":{"start":{"line":93,"column":8},"end":{"line":93,"column":29}},"59":{"start":{"line":96,"column":0},"end":{"line":96,"column":32}},"60":{"start":{"line":99,"column":8},"end":{"line":99,"column":46}},"61":{"start":{"line":100,"column":8},"end":{"line":100,"column":36}},"62":{"start":{"line":101,"column":8},"end":{"line":101,"column":29}},"63":{"start":{"line":102,"column":8},"end":{"line":102,"column":29}},"64":{"start":{"line":103,"column":8},"end":{"line":103,"column":39}},"65":{"start":{"line":106,"column":0},"end":{"line":106,"column":36}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":1},"end":{"line":5,"column":2}},"loc":{"start":{"line":5,"column":24},"end":{"line":15,"column":1}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":17,"column":4},"end":{"line":17,"column":5}},"loc":{"start":{"line":17,"column":36},"end":{"line":22,"column":5}},"line":17},"2":{"name":"(anonymous_2)","decl":{"start":{"line":26,"column":4},"end":{"line":26,"column":5}},"loc":{"start":{"line":26,"column":37},"end":{"line":32,"column":5}},"line":26},"3":{"name":"(anonymous_3)","decl":{"start":{"line":36,"column":4},"end":{"line":36,"column":5}},"loc":{"start":{"line":36,"column":37},"end":{"line":42,"column":5}},"line":36},"4":{"name":"(anonymous_4)","decl":{"start":{"line":46,"column":4},"end":{"line":46,"column":5}},"loc":{"start":{"line":46,"column":32},"end":{"line":51,"column":5}},"line":46},"5":{"name":"(anonymous_5)","decl":{"start":{"line":55,"column":4},"end":{"line":55,"column":5}},"loc":{"start":{"line":55,"column":33},"end":{"line":60,"column":5}},"line":55},"6":{"name":"(anonymous_6)","decl":{"start":{"line":64,"column":4},"end":{"line":64,"column":5}},"loc":{"start":{"line":64,"column":42},"end":{"line":73,"column":5}},"line":64},"7":{"name":"(anonymous_7)","decl":{"start":{"line":78,"column":4},"end":{"line":78,"column":5}},"loc":{"start":{"line":78,"column":32},"end":{"line":84,"column":5}},"line":78},"8":{"name":"(anonymous_8)","decl":{"start":{"line":88,"column":4},"end":{"line":88,"column":5}},"loc":{"start":{"line":88,"column":40},"end":{"line":94,"column":5}},"line":88},"9":{"name":"(anonymous_9)","decl":{"start":{"line":98,"column":4},"end":{"line":98,"column":5}},"loc":{"start":{"line":98,"column":45},"end":{"line":104,"column":5}},"line":98}},"branchMap":{"0":{"loc":{"start":{"line":15,"column":17},"end":{"line":15,"column":66}},"type":"binary-expr","locations":[{"start":{"line":15,"column":17},"end":{"line":15,"column":36}},{"start":{"line":15,"column":41},"end":{"line":15,"column":65}}],"line":15}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":0,"13":0,"14":0,"15":0,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":1,"23":0,"24":0,"25":0,"26":0,"27":0,"28":1,"29":0,"30":0,"31":0,"32":0,"33":1,"34":0,"35":0,"36":0,"37":0,"38":1,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":1,"48":0,"49":0,"50":0,"51":0,"52":0,"53":1,"54":0,"55":0,"56":0,"57":0,"58":0,"59":1,"60":0,"61":0,"62":0,"63":0,"64":0,"65":1},"f":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"b":{"0":[1,1]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/effects/game-effects.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/effects/game-effects.ts"],"names":[],"mappings":"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","sourcesContent":["import { Attack, Power } from '../card/pokemon-types';\nimport { Effect } from './effect';\nimport { Player } from '../state/player';\nimport { PokemonCard } from '../card/pokemon-card';\nimport { PokemonCardList } from '../state/pokemon-card-list';\nimport { Card } from '../card/card';\n\nexport enum GameEffects {\n  RETREAT_EFFECT = 'RETREAT_EFFECT',\n  USE_ATTACK_EFFECT = 'USE_ATTACK_EFFECT',\n  USE_STADIUM_EFFECT = 'USE_STADIUM_EFFECT',\n  USE_POWER_EFFECT = 'USE_POWER_EFFECT',\n  POWER_EFFECT = 'POWER_EFFECT',\n  ATTACK_EFFECT = 'ATTACK_EFFECT',\n  KNOCK_OUT_EFFECT = 'KNOCK_OUT_EFFECT',\n  HEAL_EFFECT = 'HEAL_EFFECT',\n  EVOLVE_EFFECT = 'EVOLVE_EFFECT'\n}\n\nexport class RetreatEffect implements Effect {\n  readonly type: string = GameEffects.RETREAT_EFFECT;\n  public preventDefault = false;\n  public player: Player;\n  public benchIndex: number;\n\n  constructor(player: Player, benchIndex: number) {\n    this.player = player;\n    this.benchIndex = benchIndex;\n  }\n}\n\nexport class UsePowerEffect implements Effect {\n  readonly type: string = GameEffects.USE_POWER_EFFECT;\n  public preventDefault = false;\n  public player: Player;\n  public power: Power;\n  public card: PokemonCard;\n\n  constructor(player: Player, power: Power, card: PokemonCard) {\n    this.player = player;\n    this.power = power;\n    this.card = card;\n  }\n}\n\nexport class PowerEffect implements Effect {\n  readonly type: string = GameEffects.POWER_EFFECT;\n  public preventDefault = false;\n  public player: Player;\n  public power: Power;\n  public card: PokemonCard;\n\n  constructor(player: Player, power: Power, card: PokemonCard) {\n    this.player = player;\n    this.power = power;\n    this.card = card;\n  }\n}\n\nexport class UseAttackEffect implements Effect {\n  readonly type: string = GameEffects.USE_ATTACK_EFFECT;\n  public preventDefault = false;\n  public player: Player;\n  public attack: Attack;\n\n  constructor(player: Player, attack: Attack) {\n    this.player = player;\n    this.attack = attack;\n  }\n}\n\nexport class UseStadiumEffect implements Effect {\n  readonly type: string = GameEffects.USE_STADIUM_EFFECT;\n  public preventDefault = false;\n  public player: Player;\n  public stadium: Card;\n\n  constructor(player: Player, stadium: Card) {\n    this.player = player;\n    this.stadium = stadium;\n  }\n}\n\nexport class AttackEffect implements Effect {\n  readonly type: string = GameEffects.ATTACK_EFFECT;\n  public preventDefault = false;\n  public player: Player;\n  public opponent: Player;\n  public attack: Attack;\n  public damage: number;\n  public ignoreWeakness = false;\n  public ignoreResistance = false;\n  target: any;\n\n  constructor(player: Player, opponent: Player, attack: Attack) {\n    this.player = player;\n    this.opponent = opponent;\n    this.attack = attack;\n    this.damage = attack.damage;\n  }\n}\n\n// how many prizes when target Pokemon is KO\nexport class KnockOutEffect implements Effect {\n  readonly type: string = GameEffects.KNOCK_OUT_EFFECT;\n  public preventDefault = false;\n  public player: Player;\n  public target: PokemonCardList;\n  public prizeCount: number;\n\n  constructor(player: Player, target: PokemonCardList) {\n    this.player = player;\n    this.target = target;\n    this.prizeCount = 1;\n  }\n}\n\nexport class HealEffect implements Effect {\n  readonly type: string = GameEffects.HEAL_EFFECT;\n  public preventDefault = false;\n  public player: Player;\n  public target: PokemonCardList;\n  public damage: number;\n\n  constructor(player: Player, target: PokemonCardList, damage: number) {\n    this.player = player;\n    this.target = target;\n    this.damage = damage;\n  }\n}\n\nexport class EvolveEffect implements Effect {\n  readonly type: string = GameEffects.EVOLVE_EFFECT;\n  public preventDefault = false;\n  public player: Player;\n  public target: PokemonCardList;\n  public pokemonCard: PokemonCard;\n\n  constructor(player: Player, target: PokemonCardList, pokemonCard: PokemonCard) {\n    this.player = player;\n    this.target = target;\n    this.pokemonCard = pokemonCard;\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"319f9d2c4402e3669c6112efe1ea2b5a179409f9","contentHash":"f6b57fb47a1048278780fc3030acf44d4c78dc63a661c1edb720ccd2f9323ded"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/reducers/play-card-reducer.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/reducers/play-card-reducer.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":33}},"2":{"start":{"line":4,"column":28},"end":{"line":4,"column":67}},"3":{"start":{"line":5,"column":22},"end":{"line":5,"column":52}},"4":{"start":{"line":6,"column":21},"end":{"line":6,"column":48}},"5":{"start":{"line":7,"column":23},"end":{"line":7,"column":52}},"6":{"start":{"line":8,"column":27},"end":{"line":8,"column":65}},"7":{"start":{"line":9,"column":23},"end":{"line":9,"column":54}},"8":{"start":{"line":10,"column":28},"end":{"line":10,"column":65}},"9":{"start":{"line":11,"column":16},"end":{"line":11,"column":41}},"10":{"start":{"line":12,"column":23},"end":{"line":12,"column":54}},"11":{"start":{"line":13,"column":21},"end":{"line":13,"column":50}},"12":{"start":{"line":14,"column":22},"end":{"line":14,"column":47}},"13":{"start":{"line":16,"column":19},"end":{"line":18,"column":51}},"14":{"start":{"line":19,"column":4},"end":{"line":24,"column":5}},"15":{"start":{"line":21,"column":12},"end":{"line":21,"column":33}},"16":{"start":{"line":23,"column":12},"end":{"line":23,"column":46}},"17":{"start":{"line":27,"column":19},"end":{"line":27,"column":52}},"18":{"start":{"line":28,"column":4},"end":{"line":95,"column":5}},"19":{"start":{"line":29,"column":8},"end":{"line":94,"column":9}},"20":{"start":{"line":30,"column":12},"end":{"line":32,"column":13}},"21":{"start":{"line":31,"column":16},"end":{"line":31,"column":91}},"22":{"start":{"line":33,"column":29},"end":{"line":33,"column":64}},"23":{"start":{"line":34,"column":12},"end":{"line":36,"column":13}},"24":{"start":{"line":35,"column":16},"end":{"line":35,"column":90}},"25":{"start":{"line":37,"column":12},"end":{"line":48,"column":13}},"26":{"start":{"line":38,"column":31},"end":{"line":38,"column":65}},"27":{"start":{"line":39,"column":16},"end":{"line":41,"column":17}},"28":{"start":{"line":40,"column":20},"end":{"line":40,"column":96}},"29":{"start":{"line":42,"column":16},"end":{"line":44,"column":17}},"30":{"start":{"line":43,"column":20},"end":{"line":43,"column":105}},"31":{"start":{"line":45,"column":16},"end":{"line":45,"column":53}},"32":{"start":{"line":46,"column":31},"end":{"line":46,"column":99}},"33":{"start":{"line":47,"column":16},"end":{"line":47,"column":57}},"34":{"start":{"line":49,"column":12},"end":{"line":56,"column":13}},"35":{"start":{"line":50,"column":31},"end":{"line":50,"column":65}},"36":{"start":{"line":51,"column":16},"end":{"line":53,"column":17}},"37":{"start":{"line":52,"column":20},"end":{"line":52,"column":96}},"38":{"start":{"line":54,"column":31},"end":{"line":54,"column":98}},"39":{"start":{"line":55,"column":16},"end":{"line":55,"column":57}},"40":{"start":{"line":57,"column":12},"end":{"line":93,"column":13}},"41":{"start":{"line":58,"column":31},"end":{"line":58,"column":65}},"42":{"start":{"line":60,"column":16},"end":{"line":91,"column":17}},"43":{"start":{"line":62,"column":24},"end":{"line":64,"column":25}},"44":{"start":{"line":63,"column":28},"end":{"line":63,"column":111}},"45":{"start":{"line":65,"column":24},"end":{"line":67,"column":25}},"46":{"start":{"line":66,"column":28},"end":{"line":66,"column":114}},"47":{"start":{"line":68,"column":24},"end":{"line":68,"column":103}},"48":{"start":{"line":69,"column":24},"end":{"line":69,"column":30}},"49":{"start":{"line":71,"column":24},"end":{"line":73,"column":25}},"50":{"start":{"line":72,"column":28},"end":{"line":72,"column":112}},"51":{"start":{"line":74,"column":40},"end":{"line":74,"column":86}},"52":{"start":{"line":75,"column":24},"end":{"line":77,"column":25}},"53":{"start":{"line":76,"column":28},"end":{"line":76,"column":118}},"54":{"start":{"line":78,"column":24},"end":{"line":78,"column":62}},"55":{"start":{"line":79,"column":24},"end":{"line":79,"column":93}},"56":{"start":{"line":80,"column":24},"end":{"line":80,"column":30}},"57":{"start":{"line":83,"column":24},"end":{"line":85,"column":25}},"58":{"start":{"line":84,"column":28},"end":{"line":84,"column":104}},"59":{"start":{"line":86,"column":24},"end":{"line":86,"column":107}},"60":{"start":{"line":87,"column":24},"end":{"line":87,"column":30}},"61":{"start":{"line":89,"column":24},"end":{"line":89,"column":98}},"62":{"start":{"line":90,"column":24},"end":{"line":90,"column":30}},"63":{"start":{"line":92,"column":16},"end":{"line":92,"column":57}},"64":{"start":{"line":96,"column":4},"end":{"line":96,"column":17}},"65":{"start":{"line":98,"column":0},"end":{"line":98,"column":42}}},"fnMap":{"0":{"name":"findCardList","decl":{"start":{"line":15,"column":9},"end":{"line":15,"column":21}},"loc":{"start":{"line":15,"column":37},"end":{"line":25,"column":1}},"line":15},"1":{"name":"playCardReducer","decl":{"start":{"line":26,"column":9},"end":{"line":26,"column":24}},"loc":{"start":{"line":26,"column":47},"end":{"line":97,"column":1}},"line":26}},"branchMap":{"0":{"loc":{"start":{"line":16,"column":19},"end":{"line":18,"column":51}},"type":"cond-expr","locations":[{"start":{"line":17,"column":10},"end":{"line":17,"column":43}},{"start":{"line":18,"column":10},"end":{"line":18,"column":51}}],"line":16},"1":{"loc":{"start":{"line":18,"column":24},"end":{"line":18,"column":50}},"type":"cond-expr","locations":[{"start":{"line":18,"column":45},"end":{"line":18,"column":46}},{"start":{"line":18,"column":49},"end":{"line":18,"column":50}}],"line":18},"2":{"loc":{"start":{"line":19,"column":4},"end":{"line":24,"column":5}},"type":"switch","locations":[{"start":{"line":20,"column":8},"end":{"line":21,"column":33}},{"start":{"line":22,"column":8},"end":{"line":23,"column":46}}],"line":19},"3":{"loc":{"start":{"line":28,"column":4},"end":{"line":95,"column":5}},"type":"if","locations":[{"start":{"line":28,"column":4},"end":{"line":95,"column":5}},{"start":{"line":28,"column":4},"end":{"line":95,"column":5}}],"line":28},"4":{"loc":{"start":{"line":29,"column":8},"end":{"line":94,"column":9}},"type":"if","locations":[{"start":{"line":29,"column":8},"end":{"line":94,"column":9}},{"start":{"line":29,"column":8},"end":{"line":94,"column":9}}],"line":29},"5":{"loc":{"start":{"line":30,"column":12},"end":{"line":32,"column":13}},"type":"if","locations":[{"start":{"line":30,"column":12},"end":{"line":32,"column":13}},{"start":{"line":30,"column":12},"end":{"line":32,"column":13}}],"line":30},"6":{"loc":{"start":{"line":30,"column":16},"end":{"line":30,"column":63}},"type":"binary-expr","locations":[{"start":{"line":30,"column":16},"end":{"line":30,"column":36}},{"start":{"line":30,"column":40},"end":{"line":30,"column":63}}],"line":30},"7":{"loc":{"start":{"line":34,"column":12},"end":{"line":36,"column":13}},"type":"if","locations":[{"start":{"line":34,"column":12},"end":{"line":36,"column":13}},{"start":{"line":34,"column":12},"end":{"line":36,"column":13}}],"line":34},"8":{"loc":{"start":{"line":37,"column":12},"end":{"line":48,"column":13}},"type":"if","locations":[{"start":{"line":37,"column":12},"end":{"line":48,"column":13}},{"start":{"line":37,"column":12},"end":{"line":48,"column":13}}],"line":37},"9":{"loc":{"start":{"line":39,"column":16},"end":{"line":41,"column":17}},"type":"if","locations":[{"start":{"line":39,"column":16},"end":{"line":41,"column":17}},{"start":{"line":39,"column":16},"end":{"line":41,"column":17}}],"line":39},"10":{"loc":{"start":{"line":39,"column":20},"end":{"line":39,"column":105}},"type":"binary-expr","locations":[{"start":{"line":39,"column":20},"end":{"line":39,"column":76}},{"start":{"line":39,"column":80},"end":{"line":39,"column":105}}],"line":39},"11":{"loc":{"start":{"line":42,"column":16},"end":{"line":44,"column":17}},"type":"if","locations":[{"start":{"line":42,"column":16},"end":{"line":44,"column":17}},{"start":{"line":42,"column":16},"end":{"line":44,"column":17}}],"line":42},"12":{"loc":{"start":{"line":49,"column":12},"end":{"line":56,"column":13}},"type":"if","locations":[{"start":{"line":49,"column":12},"end":{"line":56,"column":13}},{"start":{"line":49,"column":12},"end":{"line":56,"column":13}}],"line":49},"13":{"loc":{"start":{"line":51,"column":16},"end":{"line":53,"column":17}},"type":"if","locations":[{"start":{"line":51,"column":16},"end":{"line":53,"column":17}},{"start":{"line":51,"column":16},"end":{"line":53,"column":17}}],"line":51},"14":{"loc":{"start":{"line":57,"column":12},"end":{"line":93,"column":13}},"type":"if","locations":[{"start":{"line":57,"column":12},"end":{"line":93,"column":13}},{"start":{"line":57,"column":12},"end":{"line":93,"column":13}}],"line":57},"15":{"loc":{"start":{"line":60,"column":16},"end":{"line":91,"column":17}},"type":"switch","locations":[{"start":{"line":61,"column":20},"end":{"line":69,"column":30}},{"start":{"line":70,"column":20},"end":{"line":81,"column":21}},{"start":{"line":82,"column":20},"end":{"line":87,"column":30}},{"start":{"line":88,"column":20},"end":{"line":90,"column":30}}],"line":60},"16":{"loc":{"start":{"line":62,"column":24},"end":{"line":64,"column":25}},"type":"if","locations":[{"start":{"line":62,"column":24},"end":{"line":64,"column":25}},{"start":{"line":62,"column":24},"end":{"line":64,"column":25}}],"line":62},"17":{"loc":{"start":{"line":62,"column":28},"end":{"line":62,"column":82}},"type":"binary-expr","locations":[{"start":{"line":62,"column":28},"end":{"line":62,"column":44}},{"start":{"line":62,"column":48},"end":{"line":62,"column":82}}],"line":62},"18":{"loc":{"start":{"line":65,"column":24},"end":{"line":67,"column":25}},"type":"if","locations":[{"start":{"line":65,"column":24},"end":{"line":67,"column":25}},{"start":{"line":65,"column":24},"end":{"line":67,"column":25}}],"line":65},"19":{"loc":{"start":{"line":71,"column":24},"end":{"line":73,"column":25}},"type":"if","locations":[{"start":{"line":71,"column":24},"end":{"line":73,"column":25}},{"start":{"line":71,"column":24},"end":{"line":73,"column":25}}],"line":71},"20":{"loc":{"start":{"line":75,"column":24},"end":{"line":77,"column":25}},"type":"if","locations":[{"start":{"line":75,"column":24},"end":{"line":77,"column":25}},{"start":{"line":75,"column":24},"end":{"line":77,"column":25}}],"line":75},"21":{"loc":{"start":{"line":75,"column":28},"end":{"line":75,"column":69}},"type":"binary-expr","locations":[{"start":{"line":75,"column":28},"end":{"line":75,"column":35}},{"start":{"line":75,"column":39},"end":{"line":75,"column":69}}],"line":75},"22":{"loc":{"start":{"line":83,"column":24},"end":{"line":85,"column":25}},"type":"if","locations":[{"start":{"line":83,"column":24},"end":{"line":85,"column":25}},{"start":{"line":83,"column":24},"end":{"line":85,"column":25}}],"line":83}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":1},"f":{"0":0,"1":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0,0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/reducers/play-card-reducer.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/reducers/play-card-reducer.ts"],"names":[],"mappings":"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","sourcesContent":["import { Action } from '../actions/action';\nimport { AttachEnergyEffect, PlayPokemonEffect, PlayStadiumEffect,\n  PlaySupporterEffect, AttachPokemonToolEffect, PlayItemEffect } from '../effects/play-card-effects';\nimport { CardList } from '../state/card-list';\nimport { EnergyCard } from '../card/energy-card';\nimport { GameError } from '../../game-error';\nimport { GameMessage } from '../../game-message';\nimport { PlayCardAction, PlayerType, SlotType, CardTarget } from '../actions/play-card-action';\nimport { PokemonCard } from '../card/pokemon-card';\nimport { PokemonCardList } from '../state/pokemon-card-list';\nimport { State, GamePhase } from '../state/state';\nimport { StoreLike } from '../store-like';\nimport { TrainerCard } from '../card/trainer-card';\nimport { TrainerType } from '../card/card-types';\nimport { Effect } from '../effects/effect';\nimport { StateUtils } from '../state-utils';\n\nfunction findCardList(state: State, target: CardTarget): CardList | undefined {\n  const player = target.player === PlayerType.BOTTOM_PLAYER\n    ? state.players[state.activePlayer]\n    : state.players[state.activePlayer ? 0 : 1];\n\n  switch (target.slot) {\n    case SlotType.ACTIVE:\n      return player.active;\n    case SlotType.BENCH:\n      return player.bench[target.index];\n  }\n}\n\nexport function playCardReducer(store: StoreLike, state: State, action: Action): State {\n  const player = state.players[state.activePlayer];\n\n  if (state.phase === GamePhase.PLAYER_TURN) {\n\n    if (action instanceof PlayCardAction) {\n      if (player === undefined || player.id !== action.id) {\n        throw new GameError(GameMessage.NOT_YOUR_TURN);\n      }\n\n      const handCard = player.hand.cards[action.handIndex];\n\n      if (handCard === undefined) {\n        throw new GameError(GameMessage.UNKNOWN_CARD);\n      }\n\n      if (handCard instanceof EnergyCard) {\n        const target = findCardList(state, action.target);\n        if (!(target instanceof PokemonCardList) || target.cards.length === 0) {\n          throw new GameError(GameMessage.INVALID_TARGET);\n        }\n        if (player.energyPlayedTurn === state.turn) {\n          throw new GameError(GameMessage.ENERGY_ALREADY_ATTACHED);\n        }\n        player.energyPlayedTurn = state.turn;\n\n        const effect = new AttachEnergyEffect(player, handCard, target);\n        return store.reduceEffect(state, effect);\n      }\n\n      if (handCard instanceof PokemonCard) {\n        const target = findCardList(state, action.target);\n        if (!(target instanceof PokemonCardList)) {\n          throw new GameError(GameMessage.INVALID_TARGET);\n        }\n\n        const effect = new PlayPokemonEffect(player, handCard, target);\n        return store.reduceEffect(state, effect);\n      }\n\n      if (handCard instanceof TrainerCard) {\n        const target = findCardList(state, action.target);\n        let effect: Effect;\n        switch (handCard.trainerType) {\n          case TrainerType.SUPPORTER:\n            if (state.turn === 1 && !state.rules.firstTurnUseSupporter) {\n              throw new GameError(GameMessage.CANNOT_PLAY_THIS_CARD);\n            }\n            if (player.supporter.cards.length > 0) {\n              throw new GameError(GameMessage.SUPPORTER_ALREADY_PLAYED);\n            }\n            effect = new PlaySupporterEffect(player, handCard, target);\n            break;\n          case TrainerType.STADIUM: {\n            if (player.stadiumPlayedTurn === state.turn) {\n              throw new GameError(GameMessage.STADIUM_ALREADY_PLAYED);\n            }\n            const stadium = StateUtils.getStadiumCard(state);\n            if (stadium && stadium.name === handCard.name) {\n              throw new GameError(GameMessage.SAME_STADIUM_ALREADY_IN_PLAY);\n            }\n            player.stadiumPlayedTurn = state.turn;\n            effect = new PlayStadiumEffect(player, handCard);\n            break;\n          }\n          case TrainerType.TOOL:\n            if (!(target instanceof PokemonCardList)) {\n              throw new GameError(GameMessage.INVALID_TARGET);\n            }\n            effect = new AttachPokemonToolEffect(player, handCard, target);\n            break;\n          default:\n            effect = new PlayItemEffect(player, handCard, target);\n            break;\n        }\n        return store.reduceEffect(state, effect);\n      }\n    }\n\n  }\n\n  return state;\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"61eda6d448446dda62368d9b392c99597df326ee","contentHash":"8e5511c9a8ace482ce7d59fa4defd94af257daf047ed515fd3c3f18f3bd5001b"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/effects/play-card-effects.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/effects/play-card-effects.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":231}},"2":{"start":{"line":5,"column":0},"end":{"line":13,"column":80}},"3":{"start":{"line":6,"column":4},"end":{"line":6,"column":69}},"4":{"start":{"line":7,"column":4},"end":{"line":7,"column":67}},"5":{"start":{"line":8,"column":4},"end":{"line":8,"column":71}},"6":{"start":{"line":9,"column":4},"end":{"line":9,"column":67}},"7":{"start":{"line":10,"column":4},"end":{"line":10,"column":77}},"8":{"start":{"line":11,"column":4},"end":{"line":11,"column":61}},"9":{"start":{"line":12,"column":4},"end":{"line":12,"column":57}},"10":{"start":{"line":16,"column":8},"end":{"line":16,"column":57}},"11":{"start":{"line":17,"column":8},"end":{"line":17,"column":36}},"12":{"start":{"line":18,"column":8},"end":{"line":18,"column":29}},"13":{"start":{"line":19,"column":8},"end":{"line":19,"column":37}},"14":{"start":{"line":20,"column":8},"end":{"line":20,"column":29}},"15":{"start":{"line":23,"column":0},"end":{"line":23,"column":48}},"16":{"start":{"line":26,"column":8},"end":{"line":26,"column":56}},"17":{"start":{"line":27,"column":8},"end":{"line":27,"column":36}},"18":{"start":{"line":28,"column":8},"end":{"line":28,"column":29}},"19":{"start":{"line":29,"column":8},"end":{"line":29,"column":39}},"20":{"start":{"line":30,"column":8},"end":{"line":30,"column":29}},"21":{"start":{"line":33,"column":0},"end":{"line":33,"column":46}},"22":{"start":{"line":36,"column":8},"end":{"line":36,"column":58}},"23":{"start":{"line":37,"column":8},"end":{"line":37,"column":36}},"24":{"start":{"line":38,"column":8},"end":{"line":38,"column":29}},"25":{"start":{"line":39,"column":8},"end":{"line":39,"column":39}},"26":{"start":{"line":40,"column":8},"end":{"line":40,"column":29}},"27":{"start":{"line":43,"column":0},"end":{"line":43,"column":50}},"28":{"start":{"line":46,"column":8},"end":{"line":46,"column":56}},"29":{"start":{"line":47,"column":8},"end":{"line":47,"column":36}},"30":{"start":{"line":48,"column":8},"end":{"line":48,"column":29}},"31":{"start":{"line":49,"column":8},"end":{"line":49,"column":39}},"32":{"start":{"line":52,"column":0},"end":{"line":52,"column":46}},"33":{"start":{"line":55,"column":8},"end":{"line":55,"column":61}},"34":{"start":{"line":56,"column":8},"end":{"line":56,"column":36}},"35":{"start":{"line":57,"column":8},"end":{"line":57,"column":29}},"36":{"start":{"line":58,"column":8},"end":{"line":58,"column":39}},"37":{"start":{"line":59,"column":8},"end":{"line":59,"column":29}},"38":{"start":{"line":62,"column":0},"end":{"line":62,"column":58}},"39":{"start":{"line":65,"column":8},"end":{"line":65,"column":53}},"40":{"start":{"line":66,"column":8},"end":{"line":66,"column":36}},"41":{"start":{"line":67,"column":8},"end":{"line":67,"column":29}},"42":{"start":{"line":68,"column":8},"end":{"line":68,"column":39}},"43":{"start":{"line":69,"column":8},"end":{"line":69,"column":29}},"44":{"start":{"line":72,"column":0},"end":{"line":72,"column":40}},"45":{"start":{"line":75,"column":8},"end":{"line":75,"column":51}},"46":{"start":{"line":76,"column":8},"end":{"line":76,"column":36}},"47":{"start":{"line":77,"column":8},"end":{"line":77,"column":29}},"48":{"start":{"line":78,"column":8},"end":{"line":78,"column":39}},"49":{"start":{"line":79,"column":8},"end":{"line":79,"column":29}},"50":{"start":{"line":82,"column":0},"end":{"line":82,"column":38}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":1},"end":{"line":5,"column":2}},"loc":{"start":{"line":5,"column":28},"end":{"line":13,"column":1}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":15,"column":4},"end":{"line":15,"column":5}},"loc":{"start":{"line":15,"column":44},"end":{"line":21,"column":5}},"line":15},"2":{"name":"(anonymous_2)","decl":{"start":{"line":25,"column":4},"end":{"line":25,"column":5}},"loc":{"start":{"line":25,"column":45},"end":{"line":31,"column":5}},"line":25},"3":{"name":"(anonymous_3)","decl":{"start":{"line":35,"column":4},"end":{"line":35,"column":5}},"loc":{"start":{"line":35,"column":45},"end":{"line":41,"column":5}},"line":35},"4":{"name":"(anonymous_4)","decl":{"start":{"line":45,"column":4},"end":{"line":45,"column":5}},"loc":{"start":{"line":45,"column":37},"end":{"line":50,"column":5}},"line":45},"5":{"name":"(anonymous_5)","decl":{"start":{"line":54,"column":4},"end":{"line":54,"column":5}},"loc":{"start":{"line":54,"column":45},"end":{"line":60,"column":5}},"line":54},"6":{"name":"(anonymous_6)","decl":{"start":{"line":64,"column":4},"end":{"line":64,"column":5}},"loc":{"start":{"line":64,"column":45},"end":{"line":70,"column":5}},"line":64},"7":{"name":"(anonymous_7)","decl":{"start":{"line":74,"column":4},"end":{"line":74,"column":5}},"loc":{"start":{"line":74,"column":45},"end":{"line":80,"column":5}},"line":74}},"branchMap":{"0":{"loc":{"start":{"line":13,"column":21},"end":{"line":13,"column":78}},"type":"binary-expr","locations":[{"start":{"line":13,"column":21},"end":{"line":13,"column":44}},{"start":{"line":13,"column":49},"end":{"line":13,"column":77}}],"line":13}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":0,"11":0,"12":0,"13":0,"14":0,"15":1,"16":0,"17":0,"18":0,"19":0,"20":0,"21":1,"22":0,"23":0,"24":0,"25":0,"26":0,"27":1,"28":0,"29":0,"30":0,"31":0,"32":1,"33":0,"34":0,"35":0,"36":0,"37":0,"38":1,"39":0,"40":0,"41":0,"42":0,"43":0,"44":1,"45":0,"46":0,"47":0,"48":0,"49":0,"50":1},"f":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0},"b":{"0":[1,1]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/effects/play-card-effects.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/effects/play-card-effects.ts"],"names":[],"mappings":";;;AAQA,IAAY,eAQX;AARD,WAAY,eAAe;IACzB,gEAA6C,CAAA;IAC7C,8DAA2C,CAAA;IAC3C,kEAA+C,CAAA;IAC/C,8DAA2C,CAAA;IAC3C,wEAAqD,CAAA;IACrD,wDAAqC,CAAA;IACrC,oDAAiC,CAAA;AACnC,CAAC,EARW,eAAe,GAAf,uBAAe,KAAf,uBAAe,QAQ1B;AAED,MAAa,kBAAkB;IAO7B,YAAY,MAAc,EAAE,UAAsB,EAAE,MAAuB;QANlE,SAAI,GAAW,eAAe,CAAC,oBAAoB,CAAC;QACtD,mBAAc,GAAG,KAAK,CAAC;QAM5B,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;QAC7B,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;IACvB,CAAC;CACF;AAZD,gDAYC;AAED,MAAa,iBAAiB;IAO5B,YAAY,MAAc,EAAE,WAAwB,EAAE,MAAuB;QANpE,SAAI,GAAW,eAAe,CAAC,mBAAmB,CAAC;QACrD,mBAAc,GAAG,KAAK,CAAC;QAM5B,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;QAC/B,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;IACvB,CAAC;CACF;AAZD,8CAYC;AAED,MAAa,mBAAmB;IAO9B,YAAY,MAAc,EAAE,WAAwB,EAAE,MAAiB;QAN9D,SAAI,GAAW,eAAe,CAAC,qBAAqB,CAAC;QACvD,mBAAc,GAAG,KAAK,CAAC;QAM5B,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;QAC/B,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;IACvB,CAAC;CACF;AAZD,kDAYC;AAED,MAAa,iBAAiB;IAM5B,YAAY,MAAc,EAAE,WAAwB;QAL3C,SAAI,GAAW,eAAe,CAAC,mBAAmB,CAAC;QACrD,mBAAc,GAAG,KAAK,CAAC;QAK5B,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;IACjC,CAAC;CACF;AAVD,8CAUC;AAED,MAAa,uBAAuB;IAOlC,YAAY,MAAc,EAAE,WAAwB,EAAE,MAAuB;QANpE,SAAI,GAAW,eAAe,CAAC,wBAAwB,CAAC;QAC1D,mBAAc,GAAG,KAAK,CAAC;QAM5B,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;QAC/B,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;IACvB,CAAC;CACF;AAZD,0DAYC;AAED,MAAa,cAAc;IAOzB,YAAY,MAAc,EAAE,WAAwB,EAAE,MAAiB;QAN9D,SAAI,GAAW,eAAe,CAAC,gBAAgB,CAAC;QAClD,mBAAc,GAAG,KAAK,CAAC;QAM5B,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;QAC/B,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;IACvB,CAAC;CACF;AAZD,wCAYC;AAED,MAAa,aAAa;IAOxB,YAAY,MAAc,EAAE,WAAwB,EAAE,MAAiB;QAN9D,SAAI,GAAW,eAAe,CAAC,cAAc,CAAC;QAChD,mBAAc,GAAG,KAAK,CAAC;QAM5B,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;QAC/B,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;IACvB,CAAC;CACF;AAZD,sCAYC","sourcesContent":["import { Effect } from './effect';\nimport { EnergyCard } from '../card/energy-card';\nimport { Player } from '../state/player';\nimport { PokemonCard } from '../card/pokemon-card';\nimport { PokemonCardList } from '../state/pokemon-card-list';\nimport { TrainerCard } from '../card/trainer-card';\nimport {CardList} from '../state/card-list';\n\nexport enum PlayCardEffects {\n  ATTACH_ENERGY_EFFECT = 'ATTACH_ENERGY_EFFECT',\n  PLAY_POKEMON_EFFECT = 'PLAY_POKEMON_EFFECT',\n  PLAY_SUPPORTER_EFFECT = 'PLAY_SUPPORTER_EFFECT',\n  PLAY_STADIUM_EFFECT = 'PLAY_STADIUM_EFFECT',\n  PLAY_POKEMON_TOOL_EFFECT = 'PLAY_POKEMON_TOOL_EFFECT',\n  PLAY_ITEM_EFFECT = 'PLAY_ITEM_EFFECT',\n  TRAINER_EFFECT = 'TRAINER_EFFECT'\n}\n\nexport class AttachEnergyEffect implements Effect {\n  readonly type: string = PlayCardEffects.ATTACH_ENERGY_EFFECT;\n  public preventDefault = false;\n  public player: Player;\n  public energyCard: EnergyCard;\n  public target: PokemonCardList;\n\n  constructor(player: Player, energyCard: EnergyCard, target: PokemonCardList) {\n    this.player = player;\n    this.energyCard = energyCard;\n    this.target = target;\n  }\n}\n\nexport class PlayPokemonEffect implements Effect {\n  readonly type: string = PlayCardEffects.PLAY_POKEMON_EFFECT;\n  public preventDefault = false;\n  public player: Player;\n  public pokemonCard: PokemonCard;\n  public target: PokemonCardList;\n\n  constructor(player: Player, pokemonCard: PokemonCard, target: PokemonCardList) {\n    this.player = player;\n    this.pokemonCard = pokemonCard;\n    this.target = target;\n  }\n}\n\nexport class PlaySupporterEffect implements Effect {\n  readonly type: string = PlayCardEffects.PLAY_SUPPORTER_EFFECT;\n  public preventDefault = false;\n  public player: Player;\n  public trainerCard: TrainerCard;\n  public target: CardList | undefined;\n\n  constructor(player: Player, trainerCard: TrainerCard, target?: CardList) {\n    this.player = player;\n    this.trainerCard = trainerCard;\n    this.target = target;\n  }\n}\n\nexport class PlayStadiumEffect implements Effect {\n  readonly type: string = PlayCardEffects.PLAY_STADIUM_EFFECT;\n  public preventDefault = false;\n  public player: Player;\n  public trainerCard: TrainerCard;\n\n  constructor(player: Player, trainerCard: TrainerCard) {\n    this.player = player;\n    this.trainerCard = trainerCard;\n  }\n}\n\nexport class AttachPokemonToolEffect implements Effect {\n  readonly type: string = PlayCardEffects.PLAY_POKEMON_TOOL_EFFECT;\n  public preventDefault = false;\n  public player: Player;\n  public trainerCard: TrainerCard;\n  public target: PokemonCardList;\n\n  constructor(player: Player, trainerCard: TrainerCard, target: PokemonCardList) {\n    this.player = player;\n    this.trainerCard = trainerCard;\n    this.target = target;\n  }\n}\n\nexport class PlayItemEffect implements Effect {\n  readonly type: string = PlayCardEffects.PLAY_ITEM_EFFECT;\n  public preventDefault = false;\n  public player: Player;\n  public trainerCard: TrainerCard;\n  public target: CardList | undefined;\n\n  constructor(player: Player, trainerCard: TrainerCard, target?: CardList) {\n    this.player = player;\n    this.trainerCard = trainerCard;\n    this.target = target;\n  }\n}\n\nexport class TrainerEffect implements Effect {\n  readonly type: string = PlayCardEffects.TRAINER_EFFECT;\n  public preventDefault = false;\n  public player: Player;\n  public trainerCard: TrainerCard;\n  public target: CardList | undefined;\n\n  constructor(player: Player, trainerCard: TrainerCard, target?: CardList) {\n    this.player = player;\n    this.trainerCard = trainerCard;\n    this.target = target;\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"7d665ed89184de0d3d1d30ff3ad17c340230eb14","contentHash":"893c07fddf6f0d1b12455a08fc8ba0bf3f21692676a325341ddb12b2302cecf0"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/effect-reducers/play-energy-effect.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/effect-reducers/play-energy-effect.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":35}},"2":{"start":{"line":4,"column":28},"end":{"line":4,"column":67}},"3":{"start":{"line":5,"column":21},"end":{"line":5,"column":48}},"4":{"start":{"line":6,"column":23},"end":{"line":6,"column":52}},"5":{"start":{"line":9,"column":4},"end":{"line":21,"column":5}},"6":{"start":{"line":10,"column":28},"end":{"line":10,"column":58}},"7":{"start":{"line":11,"column":8},"end":{"line":13,"column":9}},"8":{"start":{"line":12,"column":12},"end":{"line":12,"column":88}},"9":{"start":{"line":14,"column":8},"end":{"line":18,"column":11}},"10":{"start":{"line":19,"column":8},"end":{"line":19,"column":72}},"11":{"start":{"line":20,"column":8},"end":{"line":20,"column":21}},"12":{"start":{"line":22,"column":4},"end":{"line":22,"column":17}},"13":{"start":{"line":24,"column":0},"end":{"line":24,"column":46}}},"fnMap":{"0":{"name":"playEnergyReducer","decl":{"start":{"line":7,"column":9},"end":{"line":7,"column":26}},"loc":{"start":{"line":7,"column":49},"end":{"line":23,"column":1}},"line":7}},"branchMap":{"0":{"loc":{"start":{"line":9,"column":4},"end":{"line":21,"column":5}},"type":"if","locations":[{"start":{"line":9,"column":4},"end":{"line":21,"column":5}},{"start":{"line":9,"column":4},"end":{"line":21,"column":5}}],"line":9},"1":{"loc":{"start":{"line":11,"column":8},"end":{"line":13,"column":9}},"type":"if","locations":[{"start":{"line":11,"column":8},"end":{"line":13,"column":9}},{"start":{"line":11,"column":8},"end":{"line":13,"column":9}}],"line":11}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":1},"f":{"0":0},"b":{"0":[0,0],"1":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/effect-reducers/play-energy-effect.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/effect-reducers/play-energy-effect.ts"],"names":[],"mappings":";;;AAAA,oEAAkE;AAClE,iDAA6C;AAC7C,qDAA0D;AAM1D,SAAgB,iBAAiB,CAAC,KAAgB,EAAE,KAAY,EAAE,MAAc;IAG9E,sBAAsB;IACtB,IAAI,MAAM,YAAY,sCAAkB,EAAE;QACxC,MAAM,WAAW,GAAG,MAAM,CAAC,MAAM,CAAC,cAAc,EAAE,CAAC;QACnD,IAAI,WAAW,KAAK,SAAS,EAAE;YAC7B,MAAM,IAAI,sBAAS,CAAC,0BAAW,CAAC,cAAc,CAAC,CAAC;SACjD;QAED,KAAK,CAAC,GAAG,CAAC,KAAK,EAAE,sBAAO,CAAC,wBAAwB,EAAE;YACjD,IAAI,EAAE,MAAM,CAAC,MAAM,CAAC,IAAI;YACxB,IAAI,EAAE,MAAM,CAAC,UAAU,CAAC,IAAI;YAC5B,OAAO,EAAE,WAAW,CAAC,IAAI;SAC1B,CAAC,CAAC;QACH,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,UAAU,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC;QAChE,OAAO,KAAK,CAAC;KACd;IAED,OAAO,KAAK,CAAC;AACf,CAAC;AApBD,8CAoBC","sourcesContent":["import { AttachEnergyEffect } from '../effects/play-card-effects';\nimport { GameError } from '../../game-error';\nimport { GameMessage, GameLog } from '../../game-message';\nimport { Effect } from '../effects/effect';\nimport { State } from '../state/state';\nimport { StoreLike } from '../store-like';\n\n\nexport function playEnergyReducer(store: StoreLike, state: State, effect: Effect): State {\n\n\n  /* Play energy card */\n  if (effect instanceof AttachEnergyEffect) {\n    const pokemonCard = effect.target.getPokemonCard();\n    if (pokemonCard === undefined) {\n      throw new GameError(GameMessage.INVALID_TARGET);\n    }\n\n    store.log(state, GameLog.LOG_PLAYER_ATTACHES_CARD, {\n      name: effect.player.name,\n      card: effect.energyCard.name,\n      pokemon: pokemonCard.name\n    });\n    effect.player.hand.moveCardTo(effect.energyCard, effect.target);\n    return state;\n  }\n\n  return state;\n}\n\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e432a9e72befc03523dbae7b0b2789ef2456dffb","contentHash":"0260e167c724c9025f505fe247e8b9d5bd34fd247921af5e38dfe69c5cadde78"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/effect-reducers/play-pokemon-effect.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/effect-reducers/play-pokemon-effect.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":36}},"2":{"start":{"line":4,"column":28},"end":{"line":4,"column":67}},"3":{"start":{"line":5,"column":21},"end":{"line":5,"column":48}},"4":{"start":{"line":6,"column":23},"end":{"line":6,"column":52}},"5":{"start":{"line":7,"column":21},"end":{"line":7,"column":50}},"6":{"start":{"line":8,"column":24},"end":{"line":8,"column":59}},"7":{"start":{"line":9,"column":23},"end":{"line":9,"column":57}},"8":{"start":{"line":12,"column":4},"end":{"line":41,"column":5}},"9":{"start":{"line":13,"column":22},"end":{"line":13,"column":46}},"10":{"start":{"line":14,"column":24},"end":{"line":14,"column":58}},"11":{"start":{"line":15,"column":8},"end":{"line":23,"column":9}},"12":{"start":{"line":16,"column":12},"end":{"line":19,"column":15}},"13":{"start":{"line":20,"column":12},"end":{"line":20,"column":77}},"14":{"start":{"line":21,"column":12},"end":{"line":21,"column":57}},"15":{"start":{"line":22,"column":12},"end":{"line":22,"column":25}},"16":{"start":{"line":24,"column":26},"end":{"line":24,"column":92}},"17":{"start":{"line":25,"column":28},"end":{"line":25,"column":58}},"18":{"start":{"line":26,"column":28},"end":{"line":26,"column":58}},"19":{"start":{"line":27,"column":8},"end":{"line":29,"column":9}},"20":{"start":{"line":28,"column":12},"end":{"line":28,"column":88}},"21":{"start":{"line":30,"column":8},"end":{"line":39,"column":9}},"22":{"start":{"line":31,"column":37},"end":{"line":31,"column":115}},"23":{"start":{"line":32,"column":12},"end":{"line":32,"column":56}},"24":{"start":{"line":33,"column":12},"end":{"line":35,"column":13}},"25":{"start":{"line":34,"column":16},"end":{"line":34,"column":107}},"26":{"start":{"line":36,"column":33},"end":{"line":36,"column":114}},"27":{"start":{"line":37,"column":12},"end":{"line":37,"column":52}},"28":{"start":{"line":38,"column":12},"end":{"line":38,"column":25}},"29":{"start":{"line":40,"column":8},"end":{"line":40,"column":84}},"30":{"start":{"line":42,"column":4},"end":{"line":42,"column":17}},"31":{"start":{"line":44,"column":0},"end":{"line":44,"column":48}}},"fnMap":{"0":{"name":"playPokemonReducer","decl":{"start":{"line":10,"column":9},"end":{"line":10,"column":27}},"loc":{"start":{"line":10,"column":50},"end":{"line":43,"column":1}},"line":10}},"branchMap":{"0":{"loc":{"start":{"line":12,"column":4},"end":{"line":41,"column":5}},"type":"if","locations":[{"start":{"line":12,"column":4},"end":{"line":41,"column":5}},{"start":{"line":12,"column":4},"end":{"line":41,"column":5}}],"line":12},"1":{"loc":{"start":{"line":15,"column":8},"end":{"line":23,"column":9}},"type":"if","locations":[{"start":{"line":15,"column":8},"end":{"line":23,"column":9}},{"start":{"line":15,"column":8},"end":{"line":23,"column":9}}],"line":15},"2":{"loc":{"start":{"line":15,"column":12},"end":{"line":15,"column":55}},"type":"binary-expr","locations":[{"start":{"line":15,"column":12},"end":{"line":15,"column":19}},{"start":{"line":15,"column":23},"end":{"line":15,"column":55}}],"line":15},"3":{"loc":{"start":{"line":24,"column":26},"end":{"line":24,"column":92}},"type":"binary-expr","locations":[{"start":{"line":24,"column":26},"end":{"line":24,"column":62}},{"start":{"line":24,"column":66},"end":{"line":24,"column":92}}],"line":24},"4":{"loc":{"start":{"line":27,"column":8},"end":{"line":29,"column":9}},"type":"if","locations":[{"start":{"line":27,"column":8},"end":{"line":29,"column":9}},{"start":{"line":27,"column":8},"end":{"line":29,"column":9}}],"line":27},"5":{"loc":{"start":{"line":30,"column":8},"end":{"line":39,"column":9}},"type":"if","locations":[{"start":{"line":30,"column":8},"end":{"line":39,"column":9}},{"start":{"line":30,"column":8},"end":{"line":39,"column":9}}],"line":30},"6":{"loc":{"start":{"line":30,"column":12},"end":{"line":30,"column":86}},"type":"binary-expr","locations":[{"start":{"line":30,"column":12},"end":{"line":30,"column":21}},{"start":{"line":30,"column":25},"end":{"line":30,"column":50}},{"start":{"line":30,"column":54},"end":{"line":30,"column":86}}],"line":30},"7":{"loc":{"start":{"line":33,"column":12},"end":{"line":35,"column":13}},"type":"if","locations":[{"start":{"line":33,"column":12},"end":{"line":35,"column":13}},{"start":{"line":33,"column":12},"end":{"line":35,"column":13}}],"line":33}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":1},"f":{"0":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0,0],"7":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/effect-reducers/play-pokemon-effect.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/effect-reducers/play-pokemon-effect.ts"],"names":[],"mappings":";;;AAAA,oEAAiE;AACjE,iDAA6C;AAC7C,qDAA0D;AAE1D,mDAA2C;AAG3C,4DAAwE;AACxE,0DAAqD;AAGrD,SAAgB,kBAAkB,CAAC,KAAgB,EAAE,KAAY,EAAE,MAAc;IAE/E,uBAAuB;IACvB,IAAI,MAAM,YAAY,qCAAiB,EAAE;QACvC,MAAM,KAAK,GAAG,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC;QACvC,MAAM,OAAO,GAAG,KAAK,KAAK,kBAAK,CAAC,KAAK,CAAC;QAEtC,IAAI,OAAO,IAAI,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,KAAK,CAAC,EAAE;YAC/C,KAAK,CAAC,GAAG,CAAC,KAAK,EAAE,sBAAO,CAAC,8BAA8B,EAAE;gBACvD,IAAI,EAAE,MAAM,CAAC,MAAM,CAAC,IAAI;gBACxB,IAAI,EAAE,MAAM,CAAC,WAAW,CAAC,IAAI;aAC9B,CAAC,CAAC;YACH,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,WAAW,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC;YACjE,MAAM,CAAC,MAAM,CAAC,iBAAiB,GAAG,KAAK,CAAC,IAAI,CAAC;YAC7C,OAAO,KAAK,CAAC;SACd;QAED,MAAM,SAAS,GAAG,KAAK,KAAK,kBAAK,CAAC,OAAO,IAAI,kBAAK,CAAC,OAAO,CAAC;QAC3D,MAAM,WAAW,GAAG,MAAM,CAAC,WAAW,CAAC,WAAW,CAAC;QACnD,MAAM,WAAW,GAAG,MAAM,CAAC,MAAM,CAAC,cAAc,EAAE,CAAC;QACnD,IAAI,WAAW,KAAK,SAAS,EAAE;YAC7B,MAAM,IAAI,sBAAS,CAAC,0BAAW,CAAC,cAAc,CAAC,CAAC;SACjD;QAED,IAAI,SAAS,IAAI,WAAW,CAAC,KAAK,GAAG,KAAK,IAAI,WAAW,CAAC,IAAI,KAAK,WAAW,EAAE;YAC9E,MAAM,gBAAgB,GAAG,IAAI,4CAA4B,CAAC,MAAM,CAAC,MAAM,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC;YACxF,KAAK,CAAC,YAAY,CAAC,KAAK,EAAE,gBAAgB,CAAC,CAAC;YAE5C,IAAI,gBAAgB,CAAC,iBAAiB,IAAI,KAAK,CAAC,IAAI,EAAE;gBACpD,MAAM,IAAI,sBAAS,CAAC,0BAAW,CAAC,6BAA6B,CAAC,CAAC;aAChE;YAED,MAAM,YAAY,GAAG,IAAI,2BAAY,CAAC,MAAM,CAAC,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,MAAM,CAAC,WAAW,CAAC,CAAC;YACxF,KAAK,CAAC,YAAY,CAAC,KAAK,EAAE,YAAY,CAAC,CAAC;YACxC,OAAO,KAAK,CAAC;SACd;QAED,MAAM,IAAI,sBAAS,CAAC,0BAAW,CAAC,cAAc,CAAC,CAAC;KACjD;IAED,OAAO,KAAK,CAAC;AACf,CAAC;AAzCD,gDAyCC","sourcesContent":["import { PlayPokemonEffect } from '../effects/play-card-effects';\nimport { GameError } from '../../game-error';\nimport { GameMessage, GameLog } from '../../game-message';\nimport { Effect } from '../effects/effect';\nimport { Stage } from '../card/card-types';\nimport { State } from '../state/state';\nimport { StoreLike } from '../store-like';\nimport { CheckPokemonPlayedTurnEffect } from '../effects/check-effects';\nimport {EvolveEffect} from '../effects/game-effects';\n\n\nexport function playPokemonReducer(store: StoreLike, state: State, effect: Effect): State {\n\n  /* Play pokemon card */\n  if (effect instanceof PlayPokemonEffect) {\n    const stage = effect.pokemonCard.stage;\n    const isBasic = stage === Stage.BASIC;\n\n    if (isBasic && effect.target.cards.length === 0) {\n      store.log(state, GameLog.LOG_PLAYER_PLAYS_BASIC_POKEMON, {\n        name: effect.player.name,\n        card: effect.pokemonCard.name\n      });\n      effect.player.hand.moveCardTo(effect.pokemonCard, effect.target);\n      effect.target.pokemonPlayedTurn = state.turn;\n      return state;\n    }\n\n    const isEvolved = stage === Stage.STAGE_1 || Stage.STAGE_2;\n    const evolvesFrom = effect.pokemonCard.evolvesFrom;\n    const pokemonCard = effect.target.getPokemonCard();\n    if (pokemonCard === undefined) {\n      throw new GameError(GameMessage.INVALID_TARGET);\n    }\n\n    if (isEvolved && pokemonCard.stage < stage && pokemonCard.name === evolvesFrom) {\n      const playedTurnEffect = new CheckPokemonPlayedTurnEffect(effect.player, effect.target);\n      store.reduceEffect(state, playedTurnEffect);\n\n      if (playedTurnEffect.pokemonPlayedTurn >= state.turn) {\n        throw new GameError(GameMessage.POKEMON_CANT_EVOLVE_THIS_TURN);\n      }\n\n      const evolveEffect = new EvolveEffect(effect.player, effect.target, effect.pokemonCard);\n      store.reduceEffect(state, evolveEffect);\n      return state;\n    }\n\n    throw new GameError(GameMessage.INVALID_TARGET);\n  }\n\n  return state;\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"d905b13828048e6a4ca4d9da8c1027566d7a9ad5","contentHash":"3b8dca2daf63aa04cec1ab2f1b3ab2e9ba9137c8f75e23e6b9aedbf0475cf208"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/effects/check-effects.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/effects/check-effects.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":293}},"2":{"start":{"line":5,"column":0},"end":{"line":15,"column":71}},"3":{"start":{"line":6,"column":4},"end":{"line":6,"column":56}},"4":{"start":{"line":7,"column":4},"end":{"line":7,"column":75}},"5":{"start":{"line":8,"column":4},"end":{"line":8,"column":78}},"6":{"start":{"line":9,"column":4},"end":{"line":9,"column":76}},"7":{"start":{"line":10,"column":4},"end":{"line":10,"column":76}},"8":{"start":{"line":11,"column":4},"end":{"line":11,"column":74}},"9":{"start":{"line":12,"column":4},"end":{"line":12,"column":78}},"10":{"start":{"line":13,"column":4},"end":{"line":13,"column":90}},"11":{"start":{"line":14,"column":4},"end":{"line":14,"column":74}},"12":{"start":{"line":18,"column":8},"end":{"line":18,"column":49}},"13":{"start":{"line":19,"column":8},"end":{"line":19,"column":36}},"14":{"start":{"line":20,"column":8},"end":{"line":20,"column":29}},"15":{"start":{"line":21,"column":8},"end":{"line":21,"column":29}},"16":{"start":{"line":22,"column":28},"end":{"line":22,"column":51}},"17":{"start":{"line":23,"column":8},"end":{"line":23,"column":51}},"18":{"start":{"line":26,"column":0},"end":{"line":26,"column":38}},"19":{"start":{"line":29,"column":8},"end":{"line":29,"column":66}},"20":{"start":{"line":30,"column":8},"end":{"line":30,"column":36}},"21":{"start":{"line":31,"column":8},"end":{"line":31,"column":29}},"22":{"start":{"line":32,"column":8},"end":{"line":32,"column":29}},"23":{"start":{"line":33,"column":8},"end":{"line":33,"column":58}},"24":{"start":{"line":36,"column":0},"end":{"line":36,"column":68}},"25":{"start":{"line":39,"column":8},"end":{"line":39,"column":60}},"26":{"start":{"line":40,"column":8},"end":{"line":40,"column":36}},"27":{"start":{"line":41,"column":8},"end":{"line":41,"column":29}},"28":{"start":{"line":42,"column":28},"end":{"line":42,"column":51}},"29":{"start":{"line":43,"column":8},"end":{"line":43,"column":69}},"30":{"start":{"line":44,"column":8},"end":{"line":44,"column":73}},"31":{"start":{"line":47,"column":0},"end":{"line":47,"column":58}},"32":{"start":{"line":50,"column":8},"end":{"line":50,"column":59}},"33":{"start":{"line":51,"column":8},"end":{"line":51,"column":36}},"34":{"start":{"line":52,"column":8},"end":{"line":52,"column":29}},"35":{"start":{"line":53,"column":28},"end":{"line":53,"column":51}},"36":{"start":{"line":54,"column":8},"end":{"line":54,"column":67}},"37":{"start":{"line":57,"column":0},"end":{"line":57,"column":56}},"38":{"start":{"line":60,"column":8},"end":{"line":60,"column":59}},"39":{"start":{"line":61,"column":8},"end":{"line":61,"column":36}},"40":{"start":{"line":62,"column":8},"end":{"line":62,"column":29}},"41":{"start":{"line":63,"column":28},"end":{"line":63,"column":58}},"42":{"start":{"line":64,"column":8},"end":{"line":64,"column":78}},"43":{"start":{"line":67,"column":0},"end":{"line":67,"column":56}},"44":{"start":{"line":70,"column":8},"end":{"line":70,"column":58}},"45":{"start":{"line":71,"column":8},"end":{"line":71,"column":36}},"46":{"start":{"line":72,"column":8},"end":{"line":72,"column":29}},"47":{"start":{"line":73,"column":8},"end":{"line":73,"column":29}},"48":{"start":{"line":74,"column":8},"end":{"line":74,"column":37}},"49":{"start":{"line":77,"column":0},"end":{"line":77,"column":54}},"50":{"start":{"line":80,"column":8},"end":{"line":80,"column":60}},"51":{"start":{"line":81,"column":8},"end":{"line":81,"column":36}},"52":{"start":{"line":82,"column":8},"end":{"line":82,"column":28}},"53":{"start":{"line":83,"column":8},"end":{"line":83,"column":29}},"54":{"start":{"line":84,"column":8},"end":{"line":84,"column":68}},"55":{"start":{"line":87,"column":0},"end":{"line":87,"column":62}},"56":{"start":{"line":90,"column":8},"end":{"line":90,"column":58}},"57":{"start":{"line":91,"column":8},"end":{"line":91,"column":36}},"58":{"start":{"line":92,"column":8},"end":{"line":92,"column":27}},"59":{"start":{"line":95,"column":0},"end":{"line":95,"column":54}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":1},"end":{"line":5,"column":2}},"loc":{"start":{"line":5,"column":25},"end":{"line":15,"column":1}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":17,"column":4},"end":{"line":17,"column":5}},"loc":{"start":{"line":17,"column":32},"end":{"line":24,"column":5}},"line":17},"2":{"name":"(anonymous_2)","decl":{"start":{"line":28,"column":4},"end":{"line":28,"column":5}},"loc":{"start":{"line":28,"column":32},"end":{"line":34,"column":5}},"line":28},"3":{"name":"(anonymous_3)","decl":{"start":{"line":38,"column":4},"end":{"line":38,"column":5}},"loc":{"start":{"line":38,"column":24},"end":{"line":45,"column":5}},"line":38},"4":{"name":"(anonymous_4)","decl":{"start":{"line":49,"column":4},"end":{"line":49,"column":5}},"loc":{"start":{"line":49,"column":24},"end":{"line":55,"column":5}},"line":49},"5":{"name":"(anonymous_5)","decl":{"start":{"line":59,"column":4},"end":{"line":59,"column":5}},"loc":{"start":{"line":59,"column":24},"end":{"line":65,"column":5}},"line":59},"6":{"name":"(anonymous_6)","decl":{"start":{"line":69,"column":4},"end":{"line":69,"column":5}},"loc":{"start":{"line":69,"column":32},"end":{"line":75,"column":5}},"line":69},"7":{"name":"(anonymous_7)","decl":{"start":{"line":79,"column":4},"end":{"line":79,"column":5}},"loc":{"start":{"line":79,"column":32},"end":{"line":85,"column":5}},"line":79},"8":{"name":"(anonymous_8)","decl":{"start":{"line":89,"column":4},"end":{"line":89,"column":5}},"loc":{"start":{"line":89,"column":18},"end":{"line":93,"column":5}},"line":89}},"branchMap":{"0":{"loc":{"start":{"line":15,"column":18},"end":{"line":15,"column":69}},"type":"binary-expr","locations":[{"start":{"line":15,"column":18},"end":{"line":15,"column":38}},{"start":{"line":15,"column":43},"end":{"line":15,"column":68}}],"line":15},"1":{"loc":{"start":{"line":23,"column":18},"end":{"line":23,"column":50}},"type":"cond-expr","locations":[{"start":{"line":23,"column":32},"end":{"line":23,"column":46}},{"start":{"line":23,"column":49},"end":{"line":23,"column":50}}],"line":23},"2":{"loc":{"start":{"line":43,"column":24},"end":{"line":43,"column":68}},"type":"cond-expr","locations":[{"start":{"line":43,"column":38},"end":{"line":43,"column":63}},{"start":{"line":43,"column":66},"end":{"line":43,"column":68}}],"line":43},"3":{"loc":{"start":{"line":44,"column":26},"end":{"line":44,"column":72}},"type":"cond-expr","locations":[{"start":{"line":44,"column":40},"end":{"line":44,"column":67}},{"start":{"line":44,"column":70},"end":{"line":44,"column":72}}],"line":44},"4":{"loc":{"start":{"line":54,"column":25},"end":{"line":54,"column":66}},"type":"cond-expr","locations":[{"start":{"line":54,"column":39},"end":{"line":54,"column":61}},{"start":{"line":54,"column":64},"end":{"line":54,"column":66}}],"line":54},"5":{"loc":{"start":{"line":64,"column":20},"end":{"line":64,"column":77}},"type":"cond-expr","locations":[{"start":{"line":64,"column":48},"end":{"line":64,"column":72}},{"start":{"line":64,"column":75},"end":{"line":64,"column":77}}],"line":64},"6":{"loc":{"start":{"line":84,"column":22},"end":{"line":84,"column":67}},"type":"cond-expr","locations":[{"start":{"line":84,"column":45},"end":{"line":84,"column":58}},{"start":{"line":84,"column":61},"end":{"line":84,"column":67}}],"line":84}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":1,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":1,"32":0,"33":0,"34":0,"35":0,"36":0,"37":1,"38":0,"39":0,"40":0,"41":0,"42":0,"43":1,"44":0,"45":0,"46":0,"47":0,"48":0,"49":1,"50":0,"51":0,"52":0,"53":0,"54":0,"55":1,"56":0,"57":0,"58":0,"59":1},"f":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},"b":{"0":[1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/effects/check-effects.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/effects/check-effects.ts"],"names":[],"mappings":"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","sourcesContent":["import { CardType } from '../card/card-types';\nimport { Effect } from './effect';\nimport { Player } from '../state/player';\nimport { PokemonCardList } from '../state/pokemon-card-list';\nimport { Resistance, Weakness, Attack } from '../card/pokemon-types';\nimport { EnergyMap } from '../prompts/choose-energy-prompt';\n\nexport enum CheckEffects {\n  CHECK_HP_EFFECT = 'CHECK_HP_EFFECT',\n  CHECK_PRIZES_COUNT_EFFECT = 'CHECK_PRIZE_COUNT_EFFECT',\n  CHECK_POKEMON_STATS_EFFECT = 'CHECK_POKEMON_STATS_EFFECT',\n  CHECK_POKEMON_TYPE_EFFECT = 'CHECK_POKEMON_TYPE_EFFECT',\n  CHECK_RETREAT_COST_EFFECT = 'CHECK_RETREAT_COST_EFFECT',\n  CHECK_ATTACK_COST_EFFECT = 'CHECK_ATTACK_COST_EFFECT',\n  CHECK_ENOUGH_ENERGY_EFFECT = 'CHECK_ENOUGH_ENERGY_EFFECT',\n  CHECK_POKEMON_PLAYED_TURN_EFFECT = 'CHECK_POKEMON_PLAYED_TURN_EFFECT',\n  CHECK_TABLE_STATE_EFFECT = 'CHECK_TABLE_STATE_EFFECT'\n}\n\nexport class CheckHpEffect implements Effect {\n  readonly type: string = CheckEffects.CHECK_HP_EFFECT;\n  public preventDefault = false;\n  public player: Player;\n  public target: PokemonCardList;\n  public hp: number;\n\n  constructor(player: Player, target: PokemonCardList) {\n    this.player = player;\n    this.target = target;\n    const pokemonCard = target.getPokemonCard();\n    this.hp = pokemonCard ? pokemonCard.hp : 0;\n  }\n}\n\nexport class CheckPokemonPlayedTurnEffect implements Effect {\n  readonly type: string = CheckEffects.CHECK_POKEMON_PLAYED_TURN_EFFECT;\n  public preventDefault = false;\n  public player: Player;\n  public target: PokemonCardList;\n  public pokemonPlayedTurn: number;\n\n  constructor(player: Player, target: PokemonCardList) {\n    this.player = player;\n    this.target = target;\n    this.pokemonPlayedTurn = target.pokemonPlayedTurn;\n  }\n}\n\nexport class CheckPokemonStatsEffect implements Effect {\n  readonly type: string = CheckEffects.CHECK_POKEMON_STATS_EFFECT;\n  public preventDefault = false;\n  public target: PokemonCardList;\n  public weakness: Weakness[];\n  public resistance: Resistance[];\n\n  constructor(target: PokemonCardList) {\n    this.target = target;\n    const pokemonCard = target.getPokemonCard();\n    this.weakness = pokemonCard ? [ ...pokemonCard.weakness ] : [];\n    this.resistance = pokemonCard ? [ ...pokemonCard.resistance ] : [];\n  }\n}\n\nexport class CheckPokemonTypeEffect implements Effect {\n  readonly type: string = CheckEffects.CHECK_POKEMON_TYPE_EFFECT;\n  public preventDefault = false;\n  public target: PokemonCardList;\n  public cardTypes: CardType[];\n\n  constructor(target: PokemonCardList) {\n    this.target = target;\n    const pokemonCard = target.getPokemonCard();\n    this.cardTypes = pokemonCard ? [ pokemonCard.cardType ] : [];\n  }\n}\n\nexport class CheckRetreatCostEffect implements Effect {\n  readonly type: string = CheckEffects.CHECK_RETREAT_COST_EFFECT;\n  public preventDefault = false;\n  public player: Player;\n  public cost: CardType[];\n\n  constructor(player: Player) {\n    this.player = player;\n    const pokemonCard = player.active.getPokemonCard();\n    this.cost = pokemonCard !== undefined ? [ ...pokemonCard.retreat ] : [];\n  }\n}\n\nexport class CheckAttackCostEffect implements Effect {\n  readonly type: string = CheckEffects.CHECK_ATTACK_COST_EFFECT;\n  public preventDefault = false;\n  public player: Player;\n  public attack: Attack;\n  public cost: CardType[];\n\n  constructor(player: Player, attack: Attack) {\n    this.player = player;\n    this.attack = attack;\n    this.cost = [ ...attack.cost ];\n  }\n}\n\nexport class CheckProvidedEnergyEffect implements Effect {\n  readonly type: string = CheckEffects.CHECK_ENOUGH_ENERGY_EFFECT;\n  public preventDefault = false;\n  public player: Player;\n  public source: PokemonCardList;\n  public energyMap: EnergyMap[] = [];\n\n  constructor(player: Player, source?: PokemonCardList) {\n    this.player = player;\n    this.source = source === undefined ? player.active : source;\n  }\n}\n\nexport class CheckTableStateEffect implements Effect {\n  readonly type: string = CheckEffects.CHECK_TABLE_STATE_EFFECT;\n  public preventDefault = false;\n  public benchSize: number;\n\n  constructor() {\n    this.benchSize = 5;\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"02e2b3736dd2daa8ca67da1621772a32e86bd38f","contentHash":"57d83bf5f9d13e80463654e489ef9c32b9e9c2ac04ab8ae246a00dd3e90be47f"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/effect-reducers/play-trainer-effect.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/effect-reducers/play-trainer-effect.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":36}},"2":{"start":{"line":4,"column":28},"end":{"line":4,"column":67}},"3":{"start":{"line":5,"column":21},"end":{"line":5,"column":48}},"4":{"start":{"line":6,"column":23},"end":{"line":6,"column":52}},"5":{"start":{"line":7,"column":22},"end":{"line":7,"column":47}},"6":{"start":{"line":8,"column":21},"end":{"line":8,"column":50}},"7":{"start":{"line":11,"column":4},"end":{"line":19,"column":5}},"8":{"start":{"line":12,"column":28},"end":{"line":12,"column":115}},"9":{"start":{"line":13,"column":8},"end":{"line":13,"column":55}},"10":{"start":{"line":14,"column":8},"end":{"line":17,"column":11}},"11":{"start":{"line":18,"column":8},"end":{"line":18,"column":21}},"12":{"start":{"line":21,"column":4},"end":{"line":37,"column":5}},"13":{"start":{"line":22,"column":23},"end":{"line":22,"column":36}},"14":{"start":{"line":23,"column":25},"end":{"line":23,"column":76}},"15":{"start":{"line":24,"column":8},"end":{"line":26,"column":9}},"16":{"start":{"line":25,"column":12},"end":{"line":25,"column":50}},"17":{"start":{"line":27,"column":8},"end":{"line":29,"column":9}},"18":{"start":{"line":28,"column":12},"end":{"line":28,"column":54}},"19":{"start":{"line":30,"column":8},"end":{"line":33,"column":11}},"20":{"start":{"line":34,"column":8},"end":{"line":34,"column":35}},"21":{"start":{"line":35,"column":8},"end":{"line":35,"column":67}},"22":{"start":{"line":36,"column":8},"end":{"line":36,"column":21}},"23":{"start":{"line":39,"column":4},"end":{"line":57,"column":5}},"24":{"start":{"line":40,"column":28},"end":{"line":40,"column":58}},"25":{"start":{"line":41,"column":8},"end":{"line":43,"column":9}},"26":{"start":{"line":42,"column":12},"end":{"line":42,"column":88}},"27":{"start":{"line":44,"column":8},"end":{"line":46,"column":9}},"28":{"start":{"line":45,"column":12},"end":{"line":45,"column":103}},"29":{"start":{"line":47,"column":8},"end":{"line":51,"column":11}},"30":{"start":{"line":52,"column":8},"end":{"line":52,"column":73}},"31":{"start":{"line":53,"column":8},"end":{"line":53,"column":48}},"32":{"start":{"line":54,"column":28},"end":{"line":54,"column":115}},"33":{"start":{"line":55,"column":8},"end":{"line":55,"column":55}},"34":{"start":{"line":56,"column":8},"end":{"line":56,"column":21}},"35":{"start":{"line":59,"column":4},"end":{"line":67,"column":5}},"36":{"start":{"line":60,"column":28},"end":{"line":60,"column":115}},"37":{"start":{"line":61,"column":8},"end":{"line":61,"column":55}},"38":{"start":{"line":62,"column":8},"end":{"line":65,"column":11}},"39":{"start":{"line":66,"column":8},"end":{"line":66,"column":21}},"40":{"start":{"line":69,"column":4},"end":{"line":76,"column":5}},"41":{"start":{"line":70,"column":8},"end":{"line":74,"column":9}},"42":{"start":{"line":71,"column":32},"end":{"line":71,"column":101}},"43":{"start":{"line":72,"column":27},"end":{"line":72,"column":88}},"44":{"start":{"line":73,"column":12},"end":{"line":73,"column":70}},"45":{"start":{"line":75,"column":8},"end":{"line":75,"column":21}},"46":{"start":{"line":77,"column":4},"end":{"line":77,"column":17}},"47":{"start":{"line":79,"column":0},"end":{"line":79,"column":48}}},"fnMap":{"0":{"name":"playTrainerReducer","decl":{"start":{"line":9,"column":9},"end":{"line":9,"column":27}},"loc":{"start":{"line":9,"column":50},"end":{"line":78,"column":1}},"line":9}},"branchMap":{"0":{"loc":{"start":{"line":11,"column":4},"end":{"line":19,"column":5}},"type":"if","locations":[{"start":{"line":11,"column":4},"end":{"line":19,"column":5}},{"start":{"line":11,"column":4},"end":{"line":19,"column":5}}],"line":11},"1":{"loc":{"start":{"line":21,"column":4},"end":{"line":37,"column":5}},"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":37,"column":5}},{"start":{"line":21,"column":4},"end":{"line":37,"column":5}}],"line":21},"2":{"loc":{"start":{"line":24,"column":8},"end":{"line":26,"column":9}},"type":"if","locations":[{"start":{"line":24,"column":8},"end":{"line":26,"column":9}},{"start":{"line":24,"column":8},"end":{"line":26,"column":9}}],"line":24},"3":{"loc":{"start":{"line":27,"column":8},"end":{"line":29,"column":9}},"type":"if","locations":[{"start":{"line":27,"column":8},"end":{"line":29,"column":9}},{"start":{"line":27,"column":8},"end":{"line":29,"column":9}}],"line":27},"4":{"loc":{"start":{"line":39,"column":4},"end":{"line":57,"column":5}},"type":"if","locations":[{"start":{"line":39,"column":4},"end":{"line":57,"column":5}},{"start":{"line":39,"column":4},"end":{"line":57,"column":5}}],"line":39},"5":{"loc":{"start":{"line":41,"column":8},"end":{"line":43,"column":9}},"type":"if","locations":[{"start":{"line":41,"column":8},"end":{"line":43,"column":9}},{"start":{"line":41,"column":8},"end":{"line":43,"column":9}}],"line":41},"6":{"loc":{"start":{"line":44,"column":8},"end":{"line":46,"column":9}},"type":"if","locations":[{"start":{"line":44,"column":8},"end":{"line":46,"column":9}},{"start":{"line":44,"column":8},"end":{"line":46,"column":9}}],"line":44},"7":{"loc":{"start":{"line":59,"column":4},"end":{"line":67,"column":5}},"type":"if","locations":[{"start":{"line":59,"column":4},"end":{"line":67,"column":5}},{"start":{"line":59,"column":4},"end":{"line":67,"column":5}}],"line":59},"8":{"loc":{"start":{"line":69,"column":4},"end":{"line":76,"column":5}},"type":"if","locations":[{"start":{"line":69,"column":4},"end":{"line":76,"column":5}},{"start":{"line":69,"column":4},"end":{"line":76,"column":5}}],"line":69},"9":{"loc":{"start":{"line":70,"column":8},"end":{"line":74,"column":9}},"type":"if","locations":[{"start":{"line":70,"column":8},"end":{"line":74,"column":9}},{"start":{"line":70,"column":8},"end":{"line":74,"column":9}}],"line":70},"10":{"loc":{"start":{"line":72,"column":27},"end":{"line":72,"column":88}},"type":"cond-expr","locations":[{"start":{"line":72,"column":41},"end":{"line":72,"column":64}},{"start":{"line":72,"column":67},"end":{"line":72,"column":88}}],"line":72}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":1},"f":{"0":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/effect-reducers/play-trainer-effect.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/effect-reducers/play-trainer-effect.ts"],"names":[],"mappings":"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","sourcesContent":["import { AttachPokemonToolEffect, TrainerEffect, PlaySupporterEffect,\n  PlayItemEffect, PlayStadiumEffect } from '../effects/play-card-effects';\nimport { GameError } from '../../game-error';\nimport { GameMessage, GameLog } from '../../game-message';\nimport { Effect } from '../effects/effect';\nimport { State } from '../state/state';\nimport { StoreLike } from '../store-like';\nimport { StateUtils } from '../state-utils';\nimport { TrainerType } from '../card/card-types';\n\n\nexport function playTrainerReducer(store: StoreLike, state: State, effect: Effect): State {\n\n  /* Play supporter card */\n  if (effect instanceof PlaySupporterEffect) {\n    const playTrainer = new TrainerEffect(effect.player, effect.trainerCard, effect.target);\n    state = store.reduceEffect(state, playTrainer);\n    store.log(state, GameLog.LOG_PLAYER_PLAYS_SUPPORTER, {\n      name: effect.player.name,\n      card: effect.trainerCard.name\n    });\n    return state;\n  }\n\n  /* Play stadium card */\n  if (effect instanceof PlayStadiumEffect) {\n    const player = effect.player;\n    const opponent = StateUtils.getOpponent(state, player);\n    if (player.stadium.cards.length > 0) {\n      player.stadium.moveTo(player.discard);\n    }\n    if (opponent.stadium.cards.length > 0) {\n      opponent.stadium.moveTo(opponent.discard);\n    }\n    store.log(state, GameLog.LOG_PLAYER_PLAYS_STADIUM, {\n      name: effect.player.name,\n      card: effect.trainerCard.name\n    });\n    player.stadiumUsedTurn = 0;\n    player.hand.moveCardTo(effect.trainerCard, player.stadium);\n    return state;\n  }\n\n  // Play Pokemon Tool card\n  if (effect instanceof AttachPokemonToolEffect) {\n    const pokemonCard = effect.target.getPokemonCard();\n    if (pokemonCard === undefined) {\n      throw new GameError(GameMessage.INVALID_TARGET);\n    }\n    if (effect.target.tool !== undefined) {\n      throw new GameError(GameMessage.POKEMON_TOOL_ALREADY_ATTACHED);\n    }\n\n    store.log(state, GameLog.LOG_PLAYER_PLAYS_TOOL, {\n      name: effect.player.name,\n      card: effect.trainerCard.name,\n      pokemon: pokemonCard.name\n    });\n    effect.player.hand.moveCardTo(effect.trainerCard, effect.target);\n    effect.target.tool = effect.trainerCard;\n\n    const playTrainer = new TrainerEffect(effect.player, effect.trainerCard, effect.target);\n    state = store.reduceEffect(state, playTrainer);\n\n    return state;\n  }\n\n  // Play item card\n  if (effect instanceof PlayItemEffect) {\n    const playTrainer = new TrainerEffect(effect.player, effect.trainerCard, effect.target);\n    state = store.reduceEffect(state, playTrainer);\n    store.log(state, GameLog.LOG_PLAYER_PLAYS_ITEM, {\n      name: effect.player.name,\n      card: effect.trainerCard.name\n    });\n    return state;\n  }\n\n  // Process trainer effect\n  if (effect instanceof TrainerEffect) {\n    if (effect.player.hand.cards.includes(effect.trainerCard)) {\n      const isSupporter = effect.trainerCard.trainerType === TrainerType.SUPPORTER;\n      const target = isSupporter ? effect.player.supporter : effect.player.discard;\n      effect.player.hand.moveCardTo(effect.trainerCard, target);\n    }\n    return state;\n  }\n\n  return state;\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"a31c26372dfc80b8022b7f6302cdacd7ad8bcbb3","contentHash":"5529694a229331d38ce03e332a697905ae3cad8c4ccf8c6ace2a539b9d8edf12"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/reducers/player-turn-reducer.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/reducers/player-turn-reducer.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":35}},"2":{"start":{"line":4,"column":23},"end":{"line":4,"column":57}},"3":{"start":{"line":5,"column":16},"end":{"line":5,"column":41}},"4":{"start":{"line":6,"column":21},"end":{"line":6,"column":48}},"5":{"start":{"line":7,"column":23},"end":{"line":7,"column":52}},"6":{"start":{"line":8,"column":23},"end":{"line":8,"column":57}},"7":{"start":{"line":9,"column":29},"end":{"line":9,"column":69}},"8":{"start":{"line":10,"column":22},"end":{"line":10,"column":47}},"9":{"start":{"line":11,"column":27},"end":{"line":11,"column":65}},"10":{"start":{"line":12,"column":23},"end":{"line":12,"column":54}},"11":{"start":{"line":14,"column":4},"end":{"line":115,"column":5}},"12":{"start":{"line":15,"column":8},"end":{"line":23,"column":9}},"13":{"start":{"line":16,"column":27},"end":{"line":16,"column":60}},"14":{"start":{"line":17,"column":12},"end":{"line":19,"column":13}},"15":{"start":{"line":18,"column":16},"end":{"line":18,"column":91}},"16":{"start":{"line":20,"column":34},"end":{"line":20,"column":80}},"17":{"start":{"line":21,"column":12},"end":{"line":21,"column":61}},"18":{"start":{"line":22,"column":12},"end":{"line":22,"column":25}},"19":{"start":{"line":24,"column":8},"end":{"line":32,"column":9}},"20":{"start":{"line":25,"column":27},"end":{"line":25,"column":60}},"21":{"start":{"line":26,"column":12},"end":{"line":28,"column":13}},"22":{"start":{"line":27,"column":16},"end":{"line":27,"column":91}},"23":{"start":{"line":29,"column":34},"end":{"line":29,"column":93}},"24":{"start":{"line":30,"column":12},"end":{"line":30,"column":61}},"25":{"start":{"line":31,"column":12},"end":{"line":31,"column":25}},"26":{"start":{"line":33,"column":8},"end":{"line":49,"column":9}},"27":{"start":{"line":34,"column":27},"end":{"line":34,"column":60}},"28":{"start":{"line":35,"column":12},"end":{"line":37,"column":13}},"29":{"start":{"line":36,"column":16},"end":{"line":36,"column":91}},"30":{"start":{"line":38,"column":32},"end":{"line":38,"column":62}},"31":{"start":{"line":39,"column":12},"end":{"line":41,"column":13}},"32":{"start":{"line":40,"column":16},"end":{"line":40,"column":92}},"33":{"start":{"line":42,"column":27},"end":{"line":42,"column":80}},"34":{"start":{"line":42,"column":57},"end":{"line":42,"column":79}},"35":{"start":{"line":43,"column":12},"end":{"line":45,"column":13}},"36":{"start":{"line":44,"column":16},"end":{"line":44,"column":92}},"37":{"start":{"line":46,"column":36},"end":{"line":46,"column":86}},"38":{"start":{"line":47,"column":12},"end":{"line":47,"column":63}},"39":{"start":{"line":48,"column":12},"end":{"line":48,"column":25}},"40":{"start":{"line":50,"column":8},"end":{"line":99,"column":9}},"41":{"start":{"line":51,"column":27},"end":{"line":51,"column":60}},"42":{"start":{"line":52,"column":12},"end":{"line":54,"column":13}},"43":{"start":{"line":53,"column":16},"end":{"line":53,"column":91}},"44":{"start":{"line":56,"column":12},"end":{"line":77,"column":13}},"45":{"start":{"line":59,"column":35},"end":{"line":59,"column":99}},"46":{"start":{"line":60,"column":20},"end":{"line":60,"column":58}},"47":{"start":{"line":61,"column":20},"end":{"line":61,"column":26}},"48":{"start":{"line":64,"column":40},"end":{"line":64,"column":81}},"49":{"start":{"line":65,"column":20},"end":{"line":67,"column":21}},"50":{"start":{"line":66,"column":24},"end":{"line":66,"column":50}},"51":{"start":{"line":68,"column":20},"end":{"line":68,"column":26}},"52":{"start":{"line":71,"column":37},"end":{"line":71,"column":75}},"53":{"start":{"line":72,"column":20},"end":{"line":74,"column":21}},"54":{"start":{"line":73,"column":24},"end":{"line":73,"column":47}},"55":{"start":{"line":75,"column":20},"end":{"line":75,"column":26}},"56":{"start":{"line":78,"column":12},"end":{"line":80,"column":13}},"57":{"start":{"line":79,"column":16},"end":{"line":79,"column":92}},"58":{"start":{"line":81,"column":26},"end":{"line":81,"column":78}},"59":{"start":{"line":81,"column":55},"end":{"line":81,"column":77}},"60":{"start":{"line":82,"column":12},"end":{"line":84,"column":13}},"61":{"start":{"line":83,"column":16},"end":{"line":83,"column":91}},"62":{"start":{"line":85,"column":25},"end":{"line":85,"column":43}},"63":{"start":{"line":86,"column":12},"end":{"line":90,"column":13}},"64":{"start":{"line":87,"column":16},"end":{"line":89,"column":17}},"65":{"start":{"line":88,"column":20},"end":{"line":88,"column":98}},"66":{"start":{"line":91,"column":12},"end":{"line":93,"column":13}},"67":{"start":{"line":92,"column":16},"end":{"line":92,"column":94}},"68":{"start":{"line":94,"column":12},"end":{"line":96,"column":13}},"69":{"start":{"line":95,"column":16},"end":{"line":95,"column":94}},"70":{"start":{"line":97,"column":12},"end":{"line":97,"column":109}},"71":{"start":{"line":98,"column":12},"end":{"line":98,"column":25}},"72":{"start":{"line":100,"column":8},"end":{"line":114,"column":9}},"73":{"start":{"line":101,"column":27},"end":{"line":101,"column":60}},"74":{"start":{"line":102,"column":12},"end":{"line":104,"column":13}},"75":{"start":{"line":103,"column":16},"end":{"line":103,"column":91}},"76":{"start":{"line":105,"column":12},"end":{"line":107,"column":13}},"77":{"start":{"line":106,"column":16},"end":{"line":106,"column":98}},"78":{"start":{"line":108,"column":28},"end":{"line":108,"column":74}},"79":{"start":{"line":109,"column":12},"end":{"line":111,"column":13}},"80":{"start":{"line":110,"column":16},"end":{"line":110,"column":96}},"81":{"start":{"line":112,"column":12},"end":{"line":112,"column":100}},"82":{"start":{"line":113,"column":12},"end":{"line":113,"column":25}},"83":{"start":{"line":116,"column":4},"end":{"line":116,"column":17}},"84":{"start":{"line":118,"column":0},"end":{"line":118,"column":46}}},"fnMap":{"0":{"name":"playerTurnReducer","decl":{"start":{"line":13,"column":9},"end":{"line":13,"column":26}},"loc":{"start":{"line":13,"column":49},"end":{"line":117,"column":1}},"line":13},"1":{"name":"(anonymous_1)","decl":{"start":{"line":42,"column":52},"end":{"line":42,"column":53}},"loc":{"start":{"line":42,"column":57},"end":{"line":42,"column":79}},"line":42},"2":{"name":"(anonymous_2)","decl":{"start":{"line":81,"column":50},"end":{"line":81,"column":51}},"loc":{"start":{"line":81,"column":55},"end":{"line":81,"column":77}},"line":81}},"branchMap":{"0":{"loc":{"start":{"line":14,"column":4},"end":{"line":115,"column":5}},"type":"if","locations":[{"start":{"line":14,"column":4},"end":{"line":115,"column":5}},{"start":{"line":14,"column":4},"end":{"line":115,"column":5}}],"line":14},"1":{"loc":{"start":{"line":15,"column":8},"end":{"line":23,"column":9}},"type":"if","locations":[{"start":{"line":15,"column":8},"end":{"line":23,"column":9}},{"start":{"line":15,"column":8},"end":{"line":23,"column":9}}],"line":15},"2":{"loc":{"start":{"line":17,"column":12},"end":{"line":19,"column":13}},"type":"if","locations":[{"start":{"line":17,"column":12},"end":{"line":19,"column":13}},{"start":{"line":17,"column":12},"end":{"line":19,"column":13}}],"line":17},"3":{"loc":{"start":{"line":17,"column":16},"end":{"line":17,"column":69}},"type":"binary-expr","locations":[{"start":{"line":17,"column":16},"end":{"line":17,"column":36}},{"start":{"line":17,"column":40},"end":{"line":17,"column":69}}],"line":17},"4":{"loc":{"start":{"line":24,"column":8},"end":{"line":32,"column":9}},"type":"if","locations":[{"start":{"line":24,"column":8},"end":{"line":32,"column":9}},{"start":{"line":24,"column":8},"end":{"line":32,"column":9}}],"line":24},"5":{"loc":{"start":{"line":26,"column":12},"end":{"line":28,"column":13}},"type":"if","locations":[{"start":{"line":26,"column":12},"end":{"line":28,"column":13}},{"start":{"line":26,"column":12},"end":{"line":28,"column":13}}],"line":26},"6":{"loc":{"start":{"line":26,"column":16},"end":{"line":26,"column":69}},"type":"binary-expr","locations":[{"start":{"line":26,"column":16},"end":{"line":26,"column":36}},{"start":{"line":26,"column":40},"end":{"line":26,"column":69}}],"line":26},"7":{"loc":{"start":{"line":33,"column":8},"end":{"line":49,"column":9}},"type":"if","locations":[{"start":{"line":33,"column":8},"end":{"line":49,"column":9}},{"start":{"line":33,"column":8},"end":{"line":49,"column":9}}],"line":33},"8":{"loc":{"start":{"line":35,"column":12},"end":{"line":37,"column":13}},"type":"if","locations":[{"start":{"line":35,"column":12},"end":{"line":37,"column":13}},{"start":{"line":35,"column":12},"end":{"line":37,"column":13}}],"line":35},"9":{"loc":{"start":{"line":35,"column":16},"end":{"line":35,"column":69}},"type":"binary-expr","locations":[{"start":{"line":35,"column":16},"end":{"line":35,"column":36}},{"start":{"line":35,"column":40},"end":{"line":35,"column":69}}],"line":35},"10":{"loc":{"start":{"line":39,"column":12},"end":{"line":41,"column":13}},"type":"if","locations":[{"start":{"line":39,"column":12},"end":{"line":41,"column":13}},{"start":{"line":39,"column":12},"end":{"line":41,"column":13}}],"line":39},"11":{"loc":{"start":{"line":43,"column":12},"end":{"line":45,"column":13}},"type":"if","locations":[{"start":{"line":43,"column":12},"end":{"line":45,"column":13}},{"start":{"line":43,"column":12},"end":{"line":45,"column":13}}],"line":43},"12":{"loc":{"start":{"line":50,"column":8},"end":{"line":99,"column":9}},"type":"if","locations":[{"start":{"line":50,"column":8},"end":{"line":99,"column":9}},{"start":{"line":50,"column":8},"end":{"line":99,"column":9}}],"line":50},"13":{"loc":{"start":{"line":52,"column":12},"end":{"line":54,"column":13}},"type":"if","locations":[{"start":{"line":52,"column":12},"end":{"line":54,"column":13}},{"start":{"line":52,"column":12},"end":{"line":54,"column":13}}],"line":52},"14":{"loc":{"start":{"line":52,"column":16},"end":{"line":52,"column":69}},"type":"binary-expr","locations":[{"start":{"line":52,"column":16},"end":{"line":52,"column":36}},{"start":{"line":52,"column":40},"end":{"line":52,"column":69}}],"line":52},"15":{"loc":{"start":{"line":56,"column":12},"end":{"line":77,"column":13}},"type":"switch","locations":[{"start":{"line":57,"column":16},"end":{"line":57,"column":56}},{"start":{"line":58,"column":16},"end":{"line":62,"column":17}},{"start":{"line":63,"column":16},"end":{"line":69,"column":17}},{"start":{"line":70,"column":16},"end":{"line":76,"column":17}}],"line":56},"16":{"loc":{"start":{"line":65,"column":20},"end":{"line":67,"column":21}},"type":"if","locations":[{"start":{"line":65,"column":20},"end":{"line":67,"column":21}},{"start":{"line":65,"column":20},"end":{"line":67,"column":21}}],"line":65},"17":{"loc":{"start":{"line":72,"column":20},"end":{"line":74,"column":21}},"type":"if","locations":[{"start":{"line":72,"column":20},"end":{"line":74,"column":21}},{"start":{"line":72,"column":20},"end":{"line":74,"column":21}}],"line":72},"18":{"loc":{"start":{"line":78,"column":12},"end":{"line":80,"column":13}},"type":"if","locations":[{"start":{"line":78,"column":12},"end":{"line":80,"column":13}},{"start":{"line":78,"column":12},"end":{"line":80,"column":13}}],"line":78},"19":{"loc":{"start":{"line":82,"column":12},"end":{"line":84,"column":13}},"type":"if","locations":[{"start":{"line":82,"column":12},"end":{"line":84,"column":13}},{"start":{"line":82,"column":12},"end":{"line":84,"column":13}}],"line":82},"20":{"loc":{"start":{"line":86,"column":12},"end":{"line":90,"column":13}},"type":"if","locations":[{"start":{"line":86,"column":12},"end":{"line":90,"column":13}},{"start":{"line":86,"column":12},"end":{"line":90,"column":13}}],"line":86},"21":{"loc":{"start":{"line":86,"column":16},"end":{"line":86,"column":105}},"type":"binary-expr","locations":[{"start":{"line":86,"column":16},"end":{"line":86,"column":59}},{"start":{"line":86,"column":63},"end":{"line":86,"column":105}}],"line":86},"22":{"loc":{"start":{"line":87,"column":16},"end":{"line":89,"column":17}},"type":"if","locations":[{"start":{"line":87,"column":16},"end":{"line":89,"column":17}},{"start":{"line":87,"column":16},"end":{"line":89,"column":17}}],"line":87},"23":{"loc":{"start":{"line":91,"column":12},"end":{"line":93,"column":13}},"type":"if","locations":[{"start":{"line":91,"column":12},"end":{"line":93,"column":13}},{"start":{"line":91,"column":12},"end":{"line":93,"column":13}}],"line":91},"24":{"loc":{"start":{"line":91,"column":16},"end":{"line":91,"column":79}},"type":"binary-expr","locations":[{"start":{"line":91,"column":16},"end":{"line":91,"column":57}},{"start":{"line":91,"column":61},"end":{"line":91,"column":79}}],"line":91},"25":{"loc":{"start":{"line":94,"column":12},"end":{"line":96,"column":13}},"type":"if","locations":[{"start":{"line":94,"column":12},"end":{"line":96,"column":13}},{"start":{"line":94,"column":12},"end":{"line":96,"column":13}}],"line":94},"26":{"loc":{"start":{"line":94,"column":16},"end":{"line":94,"column":85}},"type":"binary-expr","locations":[{"start":{"line":94,"column":16},"end":{"line":94,"column":60}},{"start":{"line":94,"column":64},"end":{"line":94,"column":85}}],"line":94},"27":{"loc":{"start":{"line":100,"column":8},"end":{"line":114,"column":9}},"type":"if","locations":[{"start":{"line":100,"column":8},"end":{"line":114,"column":9}},{"start":{"line":100,"column":8},"end":{"line":114,"column":9}}],"line":100},"28":{"loc":{"start":{"line":102,"column":12},"end":{"line":104,"column":13}},"type":"if","locations":[{"start":{"line":102,"column":12},"end":{"line":104,"column":13}},{"start":{"line":102,"column":12},"end":{"line":104,"column":13}}],"line":102},"29":{"loc":{"start":{"line":102,"column":16},"end":{"line":102,"column":69}},"type":"binary-expr","locations":[{"start":{"line":102,"column":16},"end":{"line":102,"column":36}},{"start":{"line":102,"column":40},"end":{"line":102,"column":69}}],"line":102},"30":{"loc":{"start":{"line":105,"column":12},"end":{"line":107,"column":13}},"type":"if","locations":[{"start":{"line":105,"column":12},"end":{"line":107,"column":13}},{"start":{"line":105,"column":12},"end":{"line":107,"column":13}}],"line":105},"31":{"loc":{"start":{"line":109,"column":12},"end":{"line":111,"column":13}},"type":"if","locations":[{"start":{"line":109,"column":12},"end":{"line":111,"column":13}},{"start":{"line":109,"column":12},"end":{"line":111,"column":13}}],"line":109}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":1},"f":{"0":0,"1":0,"2":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0,0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/reducers/player-turn-reducer.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/reducers/player-turn-reducer.ts"],"names":[],"mappings":"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","sourcesContent":["import { Action } from '../actions/action';\nimport { PassTurnAction, RetreatAction, AttackAction, UseAbilityAction, UseStadiumAction } from '../actions/game-actions';\nimport { State, GamePhase } from '../state/state';\nimport { StoreLike } from '../store-like';\nimport { GameError } from '../../game-error';\nimport { GameMessage } from '../../game-message';\nimport { RetreatEffect, UseAttackEffect, UsePowerEffect, UseStadiumEffect } from '../effects/game-effects';\nimport { EndTurnEffect } from '../effects/game-phase-effects';\nimport { StateUtils } from '../state-utils';\nimport {SlotType} from '../actions/play-card-action';\nimport {PokemonCard} from '../card/pokemon-card';\n\nexport function playerTurnReducer(store: StoreLike, state: State, action: Action): State {\n\n  if (state.phase === GamePhase.PLAYER_TURN) {\n\n    if (action instanceof PassTurnAction) {\n      const player = state.players[state.activePlayer];\n\n      if (player === undefined || player.id !== action.clientId) {\n        throw new GameError(GameMessage.NOT_YOUR_TURN);\n      }\n\n      const endTurnEffect = new EndTurnEffect(player);\n\n      state = store.reduceEffect(state, endTurnEffect);\n      return state;\n    }\n\n    if (action instanceof RetreatAction) {\n      const player = state.players[state.activePlayer];\n\n      if (player === undefined || player.id !== action.clientId) {\n        throw new GameError(GameMessage.NOT_YOUR_TURN);\n      }\n\n      const retreatEffect = new RetreatEffect(player, action.benchIndex);\n      state = store.reduceEffect(state, retreatEffect);\n      return state;\n    }\n\n    if (action instanceof AttackAction) {\n      const player = state.players[state.activePlayer];\n\n      if (player === undefined || player.id !== action.clientId) {\n        throw new GameError(GameMessage.NOT_YOUR_TURN);\n      }\n\n      const pokemonCard = player.active.getPokemonCard();\n      if (pokemonCard === undefined) {\n        throw new GameError(GameMessage.UNKNOWN_ATTACK);\n      }\n\n      const attack = pokemonCard.attacks.find(a => a.name === action.name);\n      if (attack === undefined) {\n        throw new GameError(GameMessage.UNKNOWN_ATTACK);\n      }\n\n      const useAttackEffect = new UseAttackEffect(player, attack);\n      state = store.reduceEffect(state, useAttackEffect);\n      return state;\n    }\n\n    if (action instanceof UseAbilityAction) {\n      const player = state.players[state.activePlayer];\n\n      if (player === undefined || player.id !== action.clientId) {\n        throw new GameError(GameMessage.NOT_YOUR_TURN);\n      }\n\n      let pokemonCard: PokemonCard | undefined;\n\n      switch (action.target.slot) {\n        case SlotType.ACTIVE:\n        case SlotType.BENCH: {\n          const target = StateUtils.getTarget(state, player, action.target);\n          pokemonCard = target.getPokemonCard();\n          break;\n        }\n        case SlotType.DISCARD: {\n          const discardCard = player.discard.cards[action.target.index];\n          if (discardCard instanceof PokemonCard) {\n            pokemonCard = discardCard;\n          }\n          break;\n        }\n        case SlotType.HAND: {\n          const handCard = player.hand.cards[action.target.index];\n          if (handCard instanceof PokemonCard) {\n            pokemonCard = handCard;\n          }\n          break;\n        }\n      }\n\n      if (pokemonCard === undefined) {\n        throw new GameError(GameMessage.INVALID_TARGET);\n      }\n\n      const power = pokemonCard.powers.find(a => a.name === action.name);\n      if (power === undefined) {\n        throw new GameError(GameMessage.UNKNOWN_POWER);\n      }\n\n      const slot = action.target.slot;\n      if (slot === SlotType.ACTIVE || slot === SlotType.BENCH) {\n        if (!power.useWhenInPlay) {\n          throw new GameError(GameMessage.CANNOT_USE_POWER);\n        }\n      }\n\n      if (slot === SlotType.HAND && !power.useFromHand) {\n        throw new GameError(GameMessage.CANNOT_USE_POWER);\n      }\n\n      if (slot === SlotType.DISCARD && !power.useFromDiscard) {\n        throw new GameError(GameMessage.CANNOT_USE_POWER);\n      }\n\n      state = store.reduceEffect(state, new UsePowerEffect(player, power, pokemonCard));\n      return state;\n    }\n\n    if (action instanceof UseStadiumAction) {\n      const player = state.players[state.activePlayer];\n\n      if (player === undefined || player.id !== action.clientId) {\n        throw new GameError(GameMessage.NOT_YOUR_TURN);\n      }\n\n      if (player.stadiumUsedTurn === state.turn) {\n        throw new GameError(GameMessage.STADIUM_ALREADY_USED);\n      }\n\n      const stadium = StateUtils.getStadiumCard(state);\n      if (stadium === undefined) {\n        throw new GameError(GameMessage.NO_STADIUM_IN_PLAY);\n      }\n\n      state = store.reduceEffect(state, new UseStadiumEffect(player, stadium));\n      return state;\n    }\n\n  }\n\n  return state;\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"b02ea6f0d6b55640c64e3ce360907e022ef7e2be","contentHash":"62a398963d8f675654dac5b819b67f690fc2a03bf9e8c9902e809013ab450b77"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/effects/game-phase-effects.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/effects/game-phase-effects.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":113}},"2":{"start":{"line":5,"column":0},"end":{"line":9,"column":83}},"3":{"start":{"line":6,"column":4},"end":{"line":6,"column":60}},"4":{"start":{"line":7,"column":4},"end":{"line":7,"column":64}},"5":{"start":{"line":8,"column":4},"end":{"line":8,"column":70}},"6":{"start":{"line":12,"column":8},"end":{"line":12,"column":53}},"7":{"start":{"line":13,"column":8},"end":{"line":13,"column":36}},"8":{"start":{"line":14,"column":8},"end":{"line":14,"column":29}},"9":{"start":{"line":17,"column":0},"end":{"line":17,"column":38}},"10":{"start":{"line":20,"column":8},"end":{"line":20,"column":53}},"11":{"start":{"line":21,"column":8},"end":{"line":21,"column":36}},"12":{"start":{"line":24,"column":0},"end":{"line":24,"column":42}},"13":{"start":{"line":27,"column":8},"end":{"line":27,"column":58}},"14":{"start":{"line":28,"column":8},"end":{"line":28,"column":36}},"15":{"start":{"line":29,"column":8},"end":{"line":29,"column":29}},"16":{"start":{"line":30,"column":8},"end":{"line":30,"column":55}},"17":{"start":{"line":31,"column":8},"end":{"line":31,"column":51}},"18":{"start":{"line":32,"column":8},"end":{"line":32,"column":40}},"19":{"start":{"line":33,"column":8},"end":{"line":33,"column":42}},"20":{"start":{"line":36,"column":0},"end":{"line":36,"column":48}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":1},"end":{"line":5,"column":2}},"loc":{"start":{"line":5,"column":29},"end":{"line":9,"column":1}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":11,"column":4},"end":{"line":11,"column":5}},"loc":{"start":{"line":11,"column":24},"end":{"line":15,"column":5}},"line":11},"2":{"name":"(anonymous_2)","decl":{"start":{"line":19,"column":4},"end":{"line":19,"column":5}},"loc":{"start":{"line":19,"column":18},"end":{"line":22,"column":5}},"line":19},"3":{"name":"(anonymous_3)","decl":{"start":{"line":26,"column":4},"end":{"line":26,"column":5}},"loc":{"start":{"line":26,"column":24},"end":{"line":34,"column":5}},"line":26}},"branchMap":{"0":{"loc":{"start":{"line":9,"column":22},"end":{"line":9,"column":81}},"type":"binary-expr","locations":[{"start":{"line":9,"column":22},"end":{"line":9,"column":46}},{"start":{"line":9,"column":51},"end":{"line":9,"column":80}}],"line":9}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":1,"10":0,"11":0,"12":1,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":1},"f":{"0":1,"1":0,"2":0,"3":0},"b":{"0":[1,1]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/effects/game-phase-effects.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/effects/game-phase-effects.ts"],"names":[],"mappings":";;;AAGA,IAAY,gBAIX;AAJD,WAAY,gBAAgB;IAC1B,uDAAmC,CAAA;IACnC,2DAAuC,CAAA;IACvC,iEAA6C,CAAA;AAC/C,CAAC,EAJW,gBAAgB,GAAhB,wBAAgB,KAAhB,wBAAgB,QAI3B;AAED,MAAa,aAAa;IAKxB,YAAY,MAAc;QAJjB,SAAI,GAAW,gBAAgB,CAAC,eAAe,CAAC;QAClD,mBAAc,GAAG,KAAK,CAAC;QAI5B,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;IACvB,CAAC;CACF;AARD,sCAQC;AAED,MAAa,eAAe;IAK1B;QAJS,SAAI,GAAW,gBAAgB,CAAC,eAAe,CAAC;QAClD,mBAAc,GAAG,KAAK,CAAC;IAGd,CAAC;CAClB;AAND,0CAMC;AAED,MAAa,kBAAkB;IAS7B,YAAY,MAAc;QARjB,SAAI,GAAW,gBAAgB,CAAC,oBAAoB,CAAC;QACvD,mBAAc,GAAG,KAAK,CAAC;QAQ5B,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAI,CAAC,YAAY,GAAG,MAAM,CAAC,MAAM,CAAC,YAAY,CAAC;QAC/C,IAAI,CAAC,UAAU,GAAG,MAAM,CAAC,MAAM,CAAC,UAAU,CAAC;QAC3C,IAAI,CAAC,cAAc,GAAG,SAAS,CAAC;QAChC,IAAI,CAAC,gBAAgB,GAAG,SAAS,CAAC;IACpC,CAAC;CACF;AAhBD,gDAgBC","sourcesContent":["import { Effect } from './effect';\nimport { Player } from '../state/player';\n\nexport enum GamePhaseEffects {\n  END_TURN_EFFECT = 'END_TURN_EFFECT',\n  WHO_BEGINS_EFFECT = 'WHO_BEGINS_EFFECT',\n  BETWEEN_TURNS_EFFECT = 'BETWEEN_TURNS_EFFECT'\n}\n\nexport class EndTurnEffect implements Effect {\n  readonly type: string = GamePhaseEffects.END_TURN_EFFECT;\n  public preventDefault = false;\n  public player: Player;\n\n  constructor(player: Player) {\n    this.player = player;\n  }\n}\n\nexport class WhoBeginsEffect implements Effect {\n  readonly type: string = GamePhaseEffects.END_TURN_EFFECT;\n  public preventDefault = false;\n  public player: Player | undefined;\n\n  constructor() { }\n}\n\nexport class BetweenTurnsEffect implements Effect {\n  readonly type: string = GamePhaseEffects.BETWEEN_TURNS_EFFECT;\n  public preventDefault = false;\n  public player: Player;\n  public poisonDamage: number;\n  public burnDamage: number;\n  public burnFlipResult: boolean | undefined;\n  public asleepFlipResult: boolean | undefined;\n\n  constructor(player: Player) {\n    this.player = player;\n    this.poisonDamage = player.active.poisonDamage;\n    this.burnDamage = player.active.burnDamage;\n    this.burnFlipResult = undefined;\n    this.asleepFlipResult = undefined;\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"372dc38ff033f447fa0c25953aafcaa266834140","contentHash":"06881506f1226edd920f881cb12e5efc391a746c632fc624f8f9dfe3e2d86869"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/effect-reducers/game-phase-effect.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/effect-reducers/game-phase-effect.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":80}},"2":{"start":{"line":4,"column":29},"end":{"line":4,"column":69}},"3":{"start":{"line":5,"column":21},"end":{"line":5,"column":48}},"4":{"start":{"line":6,"column":23},"end":{"line":6,"column":52}},"5":{"start":{"line":7,"column":21},"end":{"line":7,"column":50}},"6":{"start":{"line":8,"column":16},"end":{"line":8,"column":41}},"7":{"start":{"line":9,"column":23},"end":{"line":9,"column":48}},"8":{"start":{"line":10,"column":27},"end":{"line":10,"column":65}},"9":{"start":{"line":12,"column":4},"end":{"line":12,"column":45}},"10":{"start":{"line":15,"column":4},"end":{"line":17,"column":5}},"11":{"start":{"line":16,"column":8},"end":{"line":16,"column":54}},"12":{"start":{"line":18,"column":4},"end":{"line":20,"column":5}},"13":{"start":{"line":19,"column":8},"end":{"line":19,"column":87}},"14":{"start":{"line":21,"column":4},"end":{"line":25,"column":5}},"15":{"start":{"line":22,"column":8},"end":{"line":24,"column":11}},"16":{"start":{"line":23,"column":12},"end":{"line":23,"column":72}},"17":{"start":{"line":23,"column":58},"end":{"line":23,"column":70}},"18":{"start":{"line":26,"column":4},"end":{"line":26,"column":71}},"19":{"start":{"line":26,"column":57},"end":{"line":26,"column":69}},"20":{"start":{"line":28,"column":0},"end":{"line":28,"column":36}},"21":{"start":{"line":30,"column":4},"end":{"line":32,"column":5}},"22":{"start":{"line":31,"column":8},"end":{"line":31,"column":21}},"23":{"start":{"line":33,"column":17},"end":{"line":33,"column":39}},"24":{"start":{"line":34,"column":4},"end":{"line":36,"column":5}},"25":{"start":{"line":35,"column":8},"end":{"line":35,"column":52}},"26":{"start":{"line":37,"column":4},"end":{"line":41,"column":5}},"27":{"start":{"line":38,"column":8},"end":{"line":38,"column":56}},"28":{"start":{"line":39,"column":8},"end":{"line":39,"column":52}},"29":{"start":{"line":40,"column":8},"end":{"line":40,"column":40}},"30":{"start":{"line":42,"column":4},"end":{"line":42,"column":17}},"31":{"start":{"line":43,"column":4},"end":{"line":43,"column":76}},"32":{"start":{"line":45,"column":4},"end":{"line":47,"column":5}},"33":{"start":{"line":46,"column":8},"end":{"line":46,"column":21}},"34":{"start":{"line":49,"column":4},"end":{"line":49,"column":90}},"35":{"start":{"line":50,"column":4},"end":{"line":55,"column":5}},"36":{"start":{"line":51,"column":8},"end":{"line":51,"column":100}},"37":{"start":{"line":52,"column":23},"end":{"line":52,"column":101}},"38":{"start":{"line":53,"column":8},"end":{"line":53,"column":61}},"39":{"start":{"line":54,"column":8},"end":{"line":54,"column":21}},"40":{"start":{"line":56,"column":4},"end":{"line":56,"column":39}},"41":{"start":{"line":57,"column":4},"end":{"line":57,"column":17}},"42":{"start":{"line":59,"column":0},"end":{"line":59,"column":36}},"43":{"start":{"line":61,"column":19},"end":{"line":61,"column":52}},"44":{"start":{"line":62,"column":4},"end":{"line":62,"column":89}},"45":{"start":{"line":64,"column":4},"end":{"line":64,"column":82}},"46":{"start":{"line":66,"column":4},"end":{"line":66,"column":44}},"47":{"start":{"line":67,"column":4},"end":{"line":71,"column":7}},"48":{"start":{"line":68,"column":8},"end":{"line":70,"column":9}},"49":{"start":{"line":69,"column":12},"end":{"line":69,"column":46}},"50":{"start":{"line":74,"column":19},"end":{"line":74,"column":32}},"51":{"start":{"line":75,"column":4},"end":{"line":110,"column":5}},"52":{"start":{"line":76,"column":8},"end":{"line":109,"column":9}},"53":{"start":{"line":78,"column":16},"end":{"line":78,"column":60}},"54":{"start":{"line":79,"column":16},"end":{"line":79,"column":22}},"55":{"start":{"line":81,"column":16},"end":{"line":83,"column":17}},"56":{"start":{"line":82,"column":20},"end":{"line":82,"column":26}},"57":{"start":{"line":84,"column":16},"end":{"line":87,"column":17}},"58":{"start":{"line":85,"column":20},"end":{"line":85,"column":62}},"59":{"start":{"line":86,"column":20},"end":{"line":86,"column":26}},"60":{"start":{"line":88,"column":16},"end":{"line":92,"column":19}},"61":{"start":{"line":89,"column":20},"end":{"line":91,"column":21}},"62":{"start":{"line":90,"column":24},"end":{"line":90,"column":66}},"63":{"start":{"line":93,"column":16},"end":{"line":93,"column":22}},"64":{"start":{"line":95,"column":16},"end":{"line":98,"column":17}},"65":{"start":{"line":96,"column":20},"end":{"line":96,"column":95}},"66":{"start":{"line":97,"column":20},"end":{"line":97,"column":26}},"67":{"start":{"line":99,"column":16},"end":{"line":101,"column":17}},"68":{"start":{"line":100,"column":20},"end":{"line":100,"column":26}},"69":{"start":{"line":102,"column":16},"end":{"line":102,"column":96}},"70":{"start":{"line":103,"column":16},"end":{"line":107,"column":19}},"71":{"start":{"line":104,"column":20},"end":{"line":106,"column":21}},"72":{"start":{"line":105,"column":24},"end":{"line":105,"column":99}},"73":{"start":{"line":108,"column":16},"end":{"line":108,"column":22}},"74":{"start":{"line":113,"column":4},"end":{"line":125,"column":5}},"75":{"start":{"line":114,"column":23},"end":{"line":114,"column":56}},"76":{"start":{"line":115,"column":8},"end":{"line":117,"column":9}},"77":{"start":{"line":116,"column":12},"end":{"line":116,"column":87}},"78":{"start":{"line":118,"column":8},"end":{"line":123,"column":11}},"79":{"start":{"line":119,"column":12},"end":{"line":121,"column":13}},"80":{"start":{"line":120,"column":16},"end":{"line":120,"column":23}},"81":{"start":{"line":122,"column":12},"end":{"line":122,"column":47}},"82":{"start":{"line":124,"column":8},"end":{"line":124,"column":21}},"83":{"start":{"line":126,"column":4},"end":{"line":128,"column":5}},"84":{"start":{"line":127,"column":8},"end":{"line":127,"column":54}},"85":{"start":{"line":129,"column":4},"end":{"line":129,"column":17}},"86":{"start":{"line":131,"column":0},"end":{"line":131,"column":44}}},"fnMap":{"0":{"name":"getActivePlayer","decl":{"start":{"line":11,"column":9},"end":{"line":11,"column":24}},"loc":{"start":{"line":11,"column":32},"end":{"line":13,"column":1}},"line":11},"1":{"name":"betweenTurns","decl":{"start":{"line":14,"column":9},"end":{"line":14,"column":21}},"loc":{"start":{"line":14,"column":48},"end":{"line":27,"column":1}},"line":14},"2":{"name":"(anonymous_2)","decl":{"start":{"line":22,"column":39},"end":{"line":22,"column":40}},"loc":{"start":{"line":22,"column":45},"end":{"line":24,"column":9}},"line":22},"3":{"name":"(anonymous_3)","decl":{"start":{"line":23,"column":52},"end":{"line":23,"column":53}},"loc":{"start":{"line":23,"column":58},"end":{"line":23,"column":70}},"line":23},"4":{"name":"(anonymous_4)","decl":{"start":{"line":26,"column":51},"end":{"line":26,"column":52}},"loc":{"start":{"line":26,"column":57},"end":{"line":26,"column":69}},"line":26},"5":{"name":"initNextTurn","decl":{"start":{"line":29,"column":9},"end":{"line":29,"column":21}},"loc":{"start":{"line":29,"column":36},"end":{"line":58,"column":1}},"line":29},"6":{"name":"startNextTurn","decl":{"start":{"line":60,"column":9},"end":{"line":60,"column":22}},"loc":{"start":{"line":60,"column":37},"end":{"line":72,"column":1}},"line":60},"7":{"name":"(anonymous_7)","decl":{"start":{"line":67,"column":38},"end":{"line":67,"column":39}},"loc":{"start":{"line":67,"column":44},"end":{"line":71,"column":5}},"line":67},"8":{"name":"handleSpecialConditions","decl":{"start":{"line":73,"column":9},"end":{"line":73,"column":32}},"loc":{"start":{"line":73,"column":55},"end":{"line":111,"column":1}},"line":73},"9":{"name":"(anonymous_9)","decl":{"start":{"line":88,"column":126},"end":{"line":88,"column":127}},"loc":{"start":{"line":88,"column":136},"end":{"line":92,"column":17}},"line":88},"10":{"name":"(anonymous_10)","decl":{"start":{"line":103,"column":126},"end":{"line":103,"column":127}},"loc":{"start":{"line":103,"column":136},"end":{"line":107,"column":17}},"line":103},"11":{"name":"gamePhaseReducer","decl":{"start":{"line":112,"column":9},"end":{"line":112,"column":25}},"loc":{"start":{"line":112,"column":48},"end":{"line":130,"column":1}},"line":112},"12":{"name":"(anonymous_12)","decl":{"start":{"line":118,"column":56},"end":{"line":118,"column":57}},"loc":{"start":{"line":118,"column":62},"end":{"line":123,"column":9}},"line":118}},"branchMap":{"0":{"loc":{"start":{"line":15,"column":4},"end":{"line":17,"column":5}},"type":"if","locations":[{"start":{"line":15,"column":4},"end":{"line":17,"column":5}},{"start":{"line":15,"column":4},"end":{"line":17,"column":5}}],"line":15},"1":{"loc":{"start":{"line":15,"column":8},"end":{"line":15,"column":97}},"type":"binary-expr","locations":[{"start":{"line":15,"column":8},"end":{"line":15,"column":53}},{"start":{"line":15,"column":57},"end":{"line":15,"column":97}}],"line":15},"2":{"loc":{"start":{"line":21,"column":4},"end":{"line":25,"column":5}},"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":25,"column":5}},{"start":{"line":21,"column":4},"end":{"line":25,"column":5}}],"line":21},"3":{"loc":{"start":{"line":30,"column":4},"end":{"line":32,"column":5}},"type":"if","locations":[{"start":{"line":30,"column":4},"end":{"line":32,"column":5}},{"start":{"line":30,"column":4},"end":{"line":32,"column":5}}],"line":30},"4":{"loc":{"start":{"line":34,"column":4},"end":{"line":36,"column":5}},"type":"if","locations":[{"start":{"line":34,"column":4},"end":{"line":36,"column":5}},{"start":{"line":34,"column":4},"end":{"line":36,"column":5}}],"line":34},"5":{"loc":{"start":{"line":37,"column":4},"end":{"line":41,"column":5}},"type":"if","locations":[{"start":{"line":37,"column":4},"end":{"line":41,"column":5}},{"start":{"line":37,"column":4},"end":{"line":41,"column":5}}],"line":37},"6":{"loc":{"start":{"line":38,"column":29},"end":{"line":38,"column":55}},"type":"cond-expr","locations":[{"start":{"line":38,"column":50},"end":{"line":38,"column":51}},{"start":{"line":38,"column":54},"end":{"line":38,"column":55}}],"line":38},"7":{"loc":{"start":{"line":45,"column":4},"end":{"line":47,"column":5}},"type":"if","locations":[{"start":{"line":45,"column":4},"end":{"line":47,"column":5}},{"start":{"line":45,"column":4},"end":{"line":47,"column":5}}],"line":45},"8":{"loc":{"start":{"line":45,"column":8},"end":{"line":45,"column":58}},"type":"binary-expr","locations":[{"start":{"line":45,"column":8},"end":{"line":45,"column":24}},{"start":{"line":45,"column":28},"end":{"line":45,"column":58}}],"line":45},"9":{"loc":{"start":{"line":50,"column":4},"end":{"line":55,"column":5}},"type":"if","locations":[{"start":{"line":50,"column":4},"end":{"line":55,"column":5}},{"start":{"line":50,"column":4},"end":{"line":55,"column":5}}],"line":50},"10":{"loc":{"start":{"line":52,"column":23},"end":{"line":52,"column":101}},"type":"cond-expr","locations":[{"start":{"line":52,"column":44},"end":{"line":52,"column":71}},{"start":{"line":52,"column":74},"end":{"line":52,"column":101}}],"line":52},"11":{"loc":{"start":{"line":68,"column":8},"end":{"line":70,"column":9}},"type":"if","locations":[{"start":{"line":68,"column":8},"end":{"line":70,"column":9}},{"start":{"line":68,"column":8},"end":{"line":70,"column":9}}],"line":68},"12":{"loc":{"start":{"line":76,"column":8},"end":{"line":109,"column":9}},"type":"switch","locations":[{"start":{"line":77,"column":12},"end":{"line":79,"column":22}},{"start":{"line":80,"column":12},"end":{"line":93,"column":22}},{"start":{"line":94,"column":12},"end":{"line":108,"column":22}}],"line":76},"13":{"loc":{"start":{"line":81,"column":16},"end":{"line":83,"column":17}},"type":"if","locations":[{"start":{"line":81,"column":16},"end":{"line":83,"column":17}},{"start":{"line":81,"column":16},"end":{"line":83,"column":17}}],"line":81},"14":{"loc":{"start":{"line":84,"column":16},"end":{"line":87,"column":17}},"type":"if","locations":[{"start":{"line":84,"column":16},"end":{"line":87,"column":17}},{"start":{"line":84,"column":16},"end":{"line":87,"column":17}}],"line":84},"15":{"loc":{"start":{"line":89,"column":20},"end":{"line":91,"column":21}},"type":"if","locations":[{"start":{"line":89,"column":20},"end":{"line":91,"column":21}},{"start":{"line":89,"column":20},"end":{"line":91,"column":21}}],"line":89},"16":{"loc":{"start":{"line":95,"column":16},"end":{"line":98,"column":17}},"type":"if","locations":[{"start":{"line":95,"column":16},"end":{"line":98,"column":17}},{"start":{"line":95,"column":16},"end":{"line":98,"column":17}}],"line":95},"17":{"loc":{"start":{"line":99,"column":16},"end":{"line":101,"column":17}},"type":"if","locations":[{"start":{"line":99,"column":16},"end":{"line":101,"column":17}},{"start":{"line":99,"column":16},"end":{"line":101,"column":17}}],"line":99},"18":{"loc":{"start":{"line":104,"column":20},"end":{"line":106,"column":21}},"type":"if","locations":[{"start":{"line":104,"column":20},"end":{"line":106,"column":21}},{"start":{"line":104,"column":20},"end":{"line":106,"column":21}}],"line":104},"19":{"loc":{"start":{"line":113,"column":4},"end":{"line":125,"column":5}},"type":"if","locations":[{"start":{"line":113,"column":4},"end":{"line":125,"column":5}},{"start":{"line":113,"column":4},"end":{"line":125,"column":5}}],"line":113},"20":{"loc":{"start":{"line":115,"column":8},"end":{"line":117,"column":9}},"type":"if","locations":[{"start":{"line":115,"column":8},"end":{"line":117,"column":9}},{"start":{"line":115,"column":8},"end":{"line":117,"column":9}}],"line":115},"21":{"loc":{"start":{"line":119,"column":12},"end":{"line":121,"column":13}},"type":"if","locations":[{"start":{"line":119,"column":12},"end":{"line":121,"column":13}},{"start":{"line":119,"column":12},"end":{"line":121,"column":13}}],"line":119},"22":{"loc":{"start":{"line":126,"column":4},"end":{"line":128,"column":5}},"type":"if","locations":[{"start":{"line":126,"column":4},"end":{"line":128,"column":5}},{"start":{"line":126,"column":4},"end":{"line":128,"column":5}}],"line":126}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":1,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":1,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/effect-reducers/game-phase-effect.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/effect-reducers/game-phase-effect.ts"],"names":[],"mappings":";;;AACA,sEAAkF;AAClF,iDAA6C;AAC7C,qDAA0D;AAE1D,mDAAsD;AACtD,0CAA8D;AAE9D,iDAAqD;AACrD,kEAA6D;AAE7D,SAAS,eAAe,CAAC,KAAY;IACnC,OAAO,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC;AAC3C,CAAC;AAED,SAAgB,YAAY,CAAC,KAAgB,EAAE,KAAY,EAAE,UAAsB;IACjF,IAAI,KAAK,CAAC,KAAK,KAAK,iBAAS,CAAC,WAAW,IAAI,KAAK,CAAC,KAAK,KAAK,iBAAS,CAAC,MAAM,EAAE;QAC7E,KAAK,CAAC,KAAK,GAAG,iBAAS,CAAC,aAAa,CAAC;KACvC;IAED,KAAK,MAAM,MAAM,IAAI,KAAK,CAAC,OAAO,EAAE;QAClC,KAAK,CAAC,YAAY,CAAC,KAAK,EAAE,IAAI,uCAAkB,CAAC,MAAM,CAAC,CAAC,CAAC;KAC3D;IAED,IAAI,KAAK,CAAC,UAAU,EAAE,EAAE;QACtB,OAAO,KAAK,CAAC,UAAU,CAAC,KAAK,EAAE,GAAG,EAAE;YAClC,yBAAU,CAAC,KAAK,EAAE,KAAK,EAAE,GAAG,EAAE,CAAC,UAAU,EAAE,CAAC,CAAC;QAC/C,CAAC,CAAC,CAAC;KACJ;IACD,OAAO,yBAAU,CAAC,KAAK,EAAE,KAAK,EAAE,GAAG,EAAE,CAAC,UAAU,EAAE,CAAC,CAAC;AACtD,CAAC;AAfD,oCAeC;AAED,SAAgB,YAAY,CAAC,KAAgB,EAAE,KAAY;IACzD,IAAI,CAAC,iBAAS,CAAC,KAAK,EAAE,iBAAS,CAAC,aAAa,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,EAAE;QAC1E,OAAO,KAAK,CAAC;KACd;IAED,IAAI,MAAM,GAAW,eAAe,CAAC,KAAK,CAAC,CAAC;IAE5C,IAAI,KAAK,CAAC,KAAK,KAAK,iBAAS,CAAC,KAAK,EAAE;QACnC,KAAK,CAAC,KAAK,GAAG,iBAAS,CAAC,WAAW,CAAC;KACrC;IAED,IAAI,KAAK,CAAC,KAAK,KAAK,iBAAS,CAAC,aAAa,EAAE;QAC3C,KAAK,CAAC,YAAY,GAAG,KAAK,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAChD,KAAK,CAAC,KAAK,GAAG,iBAAS,CAAC,WAAW,CAAC;QACpC,MAAM,GAAG,eAAe,CAAC,KAAK,CAAC,CAAC;KACjC;IAED,KAAK,CAAC,IAAI,EAAE,CAAC;IACb,KAAK,CAAC,GAAG,CAAC,KAAK,EAAE,sBAAO,CAAC,QAAQ,EAAE,EAAE,IAAI,EAAE,KAAK,CAAC,IAAI,EAAE,CAAC,CAAC;IAEzD,+BAA+B;IAC/B,IAAI,KAAK,CAAC,IAAI,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,iBAAiB,EAAE;QACtD,OAAO,KAAK,CAAC;KACd;IAED,6BAA6B;IAC7B,KAAK,CAAC,GAAG,CAAC,KAAK,EAAE,sBAAO,CAAC,qBAAqB,EAAE,EAAE,IAAI,EAAE,MAAM,CAAC,IAAI,EAAE,CAAC,CAAC;IACvE,IAAI,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,KAAK,CAAC,EAAE;QAElC,KAAK,CAAC,GAAG,CAAC,KAAK,EAAE,sBAAO,CAAC,2BAA2B,EAAE,EAAE,IAAI,EAAE,MAAM,CAAC,IAAI,EAAE,CAAC,CAAC;QAC7E,MAAM,MAAM,GAAG,KAAK,CAAC,YAAY,CAAC,CAAC,CAAC,kBAAU,CAAC,QAAQ,CAAC,CAAC,CAAC,kBAAU,CAAC,QAAQ,CAAC;QAC9E,KAAK,GAAG,sBAAO,CAAC,KAAK,EAAE,KAAK,EAAE,MAAM,CAAC,CAAC;QACtC,OAAO,KAAK,CAAC;KACd;IAED,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;IACnC,OAAO,KAAK,CAAC;AACf,CAAC;AArCD,oCAqCC;AAED,SAAS,aAAa,CAAC,KAAgB,EAAE,KAAY;IACnD,MAAM,MAAM,GAAG,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC;IACjD,KAAK,CAAC,GAAG,CAAC,KAAK,EAAE,sBAAO,CAAC,oBAAoB,EAAE,EAAE,IAAI,EAAE,MAAM,CAAC,IAAI,EAAE,CAAC,CAAC;IAEtE,0CAA0C;IAC1C,MAAM,CAAC,MAAM,CAAC,sBAAsB,CAAC,6BAAgB,CAAC,SAAS,CAAC,CAAC;IAEjE,kCAAkC;IAClC,MAAM,CAAC,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;IAExC,OAAO,YAAY,CAAC,KAAK,EAAE,KAAK,EAAE,GAAG,EAAE;QACrC,IAAI,KAAK,CAAC,KAAK,KAAK,iBAAS,CAAC,QAAQ,EAAE;YACtC,OAAO,YAAY,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;SACnC;IACH,CAAC,CAAC,CAAC;AACL,CAAC;AAED,SAAS,uBAAuB,CAAC,KAAgB,EAAE,KAAY,EAAE,MAA0B;IACzF,MAAM,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC;IAC7B,KAAK,MAAM,EAAE,IAAI,MAAM,CAAC,MAAM,CAAC,iBAAiB,EAAE;QAChD,QAAQ,EAAE,EAAE;YACV,KAAK,6BAAgB,CAAC,QAAQ;gBAC5B,MAAM,CAAC,MAAM,CAAC,MAAM,IAAI,MAAM,CAAC,YAAY,CAAC;gBAC5C,MAAM;YACR,KAAK,6BAAgB,CAAC,MAAM;gBAC1B,IAAI,MAAM,CAAC,cAAc,KAAK,IAAI,EAAE;oBAClC,MAAM;iBACP;gBACD,IAAI,MAAM,CAAC,cAAc,KAAK,KAAK,EAAE;oBACnC,MAAM,CAAC,MAAM,CAAC,MAAM,IAAI,MAAM,CAAC,UAAU,CAAC;oBAC1C,MAAM;iBACP;gBACD,KAAK,CAAC,MAAM,CAAC,KAAK,EAAE,IAAI,iCAAc,CACpC,MAAM,CAAC,EAAE,EACT,0BAAW,CAAC,WAAW,CACxB,EAAE,MAAM,CAAC,EAAE;oBACV,IAAI,MAAM,KAAK,KAAK,EAAE;wBACpB,MAAM,CAAC,MAAM,CAAC,MAAM,IAAI,MAAM,CAAC,UAAU,CAAC;qBAC3C;gBACH,CAAC,CAAC,CAAC;gBACH,MAAM;YACR,KAAK,6BAAgB,CAAC,MAAM;gBAC1B,IAAI,MAAM,CAAC,gBAAgB,KAAK,IAAI,EAAE;oBACpC,MAAM,CAAC,MAAM,CAAC,sBAAsB,CAAC,6BAAgB,CAAC,MAAM,CAAC,CAAC;oBAC9D,MAAM;iBACP;gBACD,IAAI,MAAM,CAAC,gBAAgB,KAAK,KAAK,EAAE;oBACrC,MAAM;iBACP;gBACD,KAAK,CAAC,GAAG,CAAC,KAAK,EAAE,sBAAO,CAAC,eAAe,EAAE,EAAE,IAAI,EAAE,MAAM,CAAC,IAAI,EAAE,CAAC,CAAC;gBACjE,KAAK,CAAC,MAAM,CAAC,KAAK,EAAE,IAAI,iCAAc,CACpC,MAAM,CAAC,EAAE,EACT,0BAAW,CAAC,WAAW,CACxB,EAAE,MAAM,CAAC,EAAE;oBACV,IAAI,MAAM,KAAK,IAAI,EAAE;wBACnB,MAAM,CAAC,MAAM,CAAC,sBAAsB,CAAC,6BAAgB,CAAC,MAAM,CAAC,CAAC;qBAC/D;gBACH,CAAC,CAAC,CAAC;gBACH,MAAM;SACT;KACF;AACH,CAAC;AAED,SAAgB,gBAAgB,CAAC,KAAgB,EAAE,KAAY,EAAE,MAAc;IAE7E,IAAI,MAAM,YAAY,kCAAa,EAAE;QACnC,MAAM,MAAM,GAAG,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC;QAEjD,IAAI,MAAM,KAAK,SAAS,EAAE;YACxB,MAAM,IAAI,sBAAS,CAAC,0BAAW,CAAC,aAAa,CAAC,CAAC;SAChD;QAED,KAAK,GAAG,yBAAU,CAAC,KAAK,EAAE,KAAK,EAAE,GAAG,EAAE;YACpC,IAAI,KAAK,CAAC,KAAK,KAAK,iBAAS,CAAC,QAAQ,EAAE;gBACtC,OAAO;aACR;YAED,OAAO,aAAa,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;QACrC,CAAC,CAAC,CAAC;QAEH,OAAO,KAAK,CAAC;KACd;IAED,IAAI,MAAM,YAAY,uCAAkB,EAAE;QACxC,uBAAuB,CAAC,KAAK,EAAE,KAAK,EAAE,MAAM,CAAC,CAAC;KAC/C;IAED,OAAO,KAAK,CAAC;AACf,CAAC;AAzBD,4CAyBC","sourcesContent":["import { Effect } from '../effects/effect';\nimport { EndTurnEffect, BetweenTurnsEffect } from '../effects/game-phase-effects';\nimport { GameError } from '../../game-error';\nimport { GameMessage, GameLog } from '../../game-message';\nimport { Player } from '../state/player';\nimport { SpecialCondition } from '../card/card-types';\nimport { State, GamePhase, GameWinner } from '../state/state';\nimport { StoreLike } from '../store-like';\nimport { checkState, endGame } from './check-effect';\nimport { CoinFlipPrompt } from '../prompts/coin-flip-prompt';\n\nfunction getActivePlayer(state: State): Player {\n  return state.players[state.activePlayer];\n}\n\nexport function betweenTurns(store: StoreLike, state: State, onComplete: () => void): State {\n  if (state.phase === GamePhase.PLAYER_TURN || state.phase === GamePhase.ATTACK) {\n    state.phase = GamePhase.BETWEEN_TURNS;\n  }\n\n  for (const player of state.players) {\n    store.reduceEffect(state, new BetweenTurnsEffect(player));\n  }\n\n  if (store.hasPrompts()) {\n    return store.waitPrompt(state, () => {\n      checkState(store, state, () => onComplete());\n    });\n  }\n  return checkState(store, state, () => onComplete());\n}\n\nexport function initNextTurn(store: StoreLike, state: State): State {\n  if ([GamePhase.SETUP, GamePhase.BETWEEN_TURNS].indexOf(state.phase) === -1) {\n    return state;\n  }\n\n  let player: Player = getActivePlayer(state);\n\n  if (state.phase === GamePhase.SETUP) {\n    state.phase = GamePhase.PLAYER_TURN;\n  }\n\n  if (state.phase === GamePhase.BETWEEN_TURNS) {\n    state.activePlayer = state.activePlayer ? 0 : 1;\n    state.phase = GamePhase.PLAYER_TURN;\n    player = getActivePlayer(state);\n  }\n\n  state.turn++;\n  store.log(state, GameLog.LOG_TURN, { turn: state.turn });\n\n  // Skip draw card on first turn\n  if (state.turn === 1 && !state.rules.firstTurnDrawCard) {\n    return state;\n  }\n\n  // Draw card at the beginning\n  store.log(state, GameLog.LOG_PLAYER_DRAWS_CARD, { name: player.name });\n  if (player.deck.cards.length === 0) {\n\n    store.log(state, GameLog.LOG_PLAYER_NO_CARDS_IN_DECK, { name: player.name });\n    const winner = state.activePlayer ? GameWinner.PLAYER_1 : GameWinner.PLAYER_2;\n    state = endGame(store, state, winner);\n    return state;\n  }\n\n  player.deck.moveTo(player.hand, 1);\n  return state;\n}\n\nfunction startNextTurn(store: StoreLike, state: State): State {\n  const player = state.players[state.activePlayer];\n  store.log(state, GameLog.LOG_PLAYER_ENDS_TURN, { name: player.name });\n\n  // Remove Paralyzed at the end of the turn\n  player.active.removeSpecialCondition(SpecialCondition.PARALYZED);\n\n  // Move supporter cards to discard\n  player.supporter.moveTo(player.discard);\n\n  return betweenTurns(store, state, () => {\n    if (state.phase !== GamePhase.FINISHED) {\n      return initNextTurn(store, state);\n    }\n  });\n}\n\nfunction handleSpecialConditions(store: StoreLike, state: State, effect: BetweenTurnsEffect) {\n  const player = effect.player;\n  for (const sp of player.active.specialConditions) {\n    switch (sp) {\n      case SpecialCondition.POISONED:\n        player.active.damage += effect.poisonDamage;\n        break;\n      case SpecialCondition.BURNED:\n        if (effect.burnFlipResult === true) {\n          break;\n        }\n        if (effect.burnFlipResult === false) {\n          player.active.damage += effect.burnDamage;\n          break;\n        }\n        store.prompt(state, new CoinFlipPrompt(\n          player.id,\n          GameMessage.FLIP_BURNED\n        ), result => {\n          if (result === false) {\n            player.active.damage += effect.burnDamage;\n          }\n        });\n        break;\n      case SpecialCondition.ASLEEP:\n        if (effect.asleepFlipResult === true) {\n          player.active.removeSpecialCondition(SpecialCondition.ASLEEP);\n          break;\n        }\n        if (effect.asleepFlipResult === false) {\n          break;\n        }\n        store.log(state, GameLog.LOG_FLIP_ASLEEP, { name: player.name });\n        store.prompt(state, new CoinFlipPrompt(\n          player.id,\n          GameMessage.FLIP_ASLEEP\n        ), result => {\n          if (result === true) {\n            player.active.removeSpecialCondition(SpecialCondition.ASLEEP);\n          }\n        });\n        break;\n    }\n  }\n}\n\nexport function gamePhaseReducer(store: StoreLike, state: State, effect: Effect): State {\n\n  if (effect instanceof EndTurnEffect) {\n    const player = state.players[state.activePlayer];\n\n    if (player === undefined) {\n      throw new GameError(GameMessage.NOT_YOUR_TURN);\n    }\n\n    state = checkState(store, state, () => {\n      if (state.phase === GamePhase.FINISHED) {\n        return;\n      }\n\n      return startNextTurn(store, state);\n    });\n\n    return state;\n  }\n\n  if (effect instanceof BetweenTurnsEffect) {\n    handleSpecialConditions(store, state, effect);\n  }\n\n  return state;\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"ebea41c64d023886036ce98dc5b952b6d4b148a1","contentHash":"96d0795e79ca1ca2a86ce7ce0734a9982f3b02cc3eaa53002fb9fe1919d54bbd"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/effect-reducers/check-effect.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/effect-reducers/check-effect.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":74}},"2":{"start":{"line":4,"column":16},"end":{"line":4,"column":41}},"3":{"start":{"line":5,"column":24},"end":{"line":5,"column":59}},"4":{"start":{"line":6,"column":28},"end":{"line":6,"column":65}},"5":{"start":{"line":7,"column":32},"end":{"line":7,"column":75}},"6":{"start":{"line":8,"column":21},"end":{"line":8,"column":48}},"7":{"start":{"line":9,"column":23},"end":{"line":9,"column":52}},"8":{"start":{"line":10,"column":30},"end":{"line":10,"column":71}},"9":{"start":{"line":11,"column":27},"end":{"line":11,"column":65}},"10":{"start":{"line":12,"column":23},"end":{"line":12,"column":57}},"11":{"start":{"line":13,"column":22},"end":{"line":13,"column":52}},"12":{"start":{"line":15,"column":21},"end":{"line":15,"column":23}},"13":{"start":{"line":16,"column":4},"end":{"line":25,"column":5}},"14":{"start":{"line":16,"column":17},"end":{"line":16,"column":18}},"15":{"start":{"line":17,"column":23},"end":{"line":17,"column":39}},"16":{"start":{"line":18,"column":8},"end":{"line":24,"column":11}},"17":{"start":{"line":19,"column":34},"end":{"line":19,"column":85}},"18":{"start":{"line":20,"column":12},"end":{"line":20,"column":53}},"19":{"start":{"line":21,"column":12},"end":{"line":23,"column":13}},"20":{"start":{"line":22,"column":16},"end":{"line":22,"column":58}},"21":{"start":{"line":26,"column":4},"end":{"line":26,"column":20}},"22":{"start":{"line":29,"column":4},"end":{"line":70,"column":7}},"23":{"start":{"line":31,"column":8},"end":{"line":35,"column":9}},"24":{"start":{"line":32,"column":26},"end":{"line":32,"column":67}},"25":{"start":{"line":33,"column":12},"end":{"line":33,"column":34}},"26":{"start":{"line":34,"column":12},"end":{"line":34,"column":37}},"27":{"start":{"line":36,"column":8},"end":{"line":38,"column":9}},"28":{"start":{"line":37,"column":12},"end":{"line":37,"column":19}},"29":{"start":{"line":40,"column":22},"end":{"line":40,"column":24}},"30":{"start":{"line":41,"column":8},"end":{"line":47,"column":9}},"31":{"start":{"line":41,"column":25},"end":{"line":41,"column":48}},"32":{"start":{"line":42,"column":26},"end":{"line":42,"column":45}},"33":{"start":{"line":43,"column":28},"end":{"line":43,"column":52}},"34":{"start":{"line":44,"column":12},"end":{"line":46,"column":13}},"35":{"start":{"line":45,"column":16},"end":{"line":45,"column":34}},"36":{"start":{"line":48,"column":8},"end":{"line":56,"column":9}},"37":{"start":{"line":50,"column":12},"end":{"line":54,"column":13}},"38":{"start":{"line":50,"column":25},"end":{"line":50,"column":48}},"39":{"start":{"line":51,"column":16},"end":{"line":53,"column":17}},"40":{"start":{"line":52,"column":20},"end":{"line":52,"column":46}},"41":{"start":{"line":55,"column":12},"end":{"line":55,"column":19}},"42":{"start":{"line":58,"column":22},"end":{"line":58,"column":68}},"43":{"start":{"line":59,"column":8},"end":{"line":69,"column":11}},"44":{"start":{"line":60,"column":12},"end":{"line":60,"column":36}},"45":{"start":{"line":61,"column":29},"end":{"line":61,"column":51}},"46":{"start":{"line":63,"column":12},"end":{"line":68,"column":13}},"47":{"start":{"line":63,"column":25},"end":{"line":63,"column":48}},"48":{"start":{"line":64,"column":16},"end":{"line":67,"column":17}},"49":{"start":{"line":65,"column":20},"end":{"line":65,"column":59}},"50":{"start":{"line":66,"column":20},"end":{"line":66,"column":46}},"51":{"start":{"line":71,"column":4},"end":{"line":71,"column":17}},"52":{"start":{"line":74,"column":20},"end":{"line":74,"column":22}},"53":{"start":{"line":75,"column":4},"end":{"line":82,"column":5}},"54":{"start":{"line":76,"column":26},"end":{"line":76,"column":56}},"55":{"start":{"line":77,"column":27},"end":{"line":77,"column":77}},"56":{"start":{"line":77,"column":54},"end":{"line":77,"column":76}},"57":{"start":{"line":78,"column":8},"end":{"line":81,"column":9}},"58":{"start":{"line":79,"column":27},"end":{"line":79,"column":253}},"59":{"start":{"line":80,"column":12},"end":{"line":80,"column":33}},"60":{"start":{"line":83,"column":4},"end":{"line":83,"column":19}},"61":{"start":{"line":86,"column":20},"end":{"line":86,"column":22}},"62":{"start":{"line":87,"column":4},"end":{"line":97,"column":5}},"63":{"start":{"line":87,"column":17},"end":{"line":87,"column":18}},"64":{"start":{"line":88,"column":23},"end":{"line":88,"column":39}},"65":{"start":{"line":89,"column":26},"end":{"line":89,"column":47}},"66":{"start":{"line":90,"column":8},"end":{"line":92,"column":9}},"67":{"start":{"line":91,"column":12},"end":{"line":91,"column":40}},"68":{"start":{"line":93,"column":8},"end":{"line":96,"column":9}},"69":{"start":{"line":94,"column":27},"end":{"line":94,"column":155}},"70":{"start":{"line":95,"column":12},"end":{"line":95,"column":33}},"71":{"start":{"line":98,"column":4},"end":{"line":98,"column":19}},"72":{"start":{"line":101,"column":4},"end":{"line":103,"column":5}},"73":{"start":{"line":102,"column":8},"end":{"line":102,"column":84}},"74":{"start":{"line":104,"column":4},"end":{"line":111,"column":5}},"75":{"start":{"line":110,"column":8},"end":{"line":110,"column":84}},"76":{"start":{"line":112,"column":4},"end":{"line":127,"column":5}},"77":{"start":{"line":114,"column":12},"end":{"line":114,"column":71}},"78":{"start":{"line":115,"column":12},"end":{"line":115,"column":18}},"79":{"start":{"line":117,"column":12},"end":{"line":117,"column":76}},"80":{"start":{"line":118,"column":12},"end":{"line":118,"column":18}},"81":{"start":{"line":121,"column":31},"end":{"line":123,"column":39}},"82":{"start":{"line":124,"column":12},"end":{"line":124,"column":100}},"83":{"start":{"line":125,"column":12},"end":{"line":125,"column":18}},"84":{"start":{"line":128,"column":4},"end":{"line":128,"column":26}},"85":{"start":{"line":129,"column":4},"end":{"line":129,"column":45}},"86":{"start":{"line":130,"column":4},"end":{"line":130,"column":17}},"87":{"start":{"line":132,"column":0},"end":{"line":132,"column":26}},"88":{"start":{"line":134,"column":19},"end":{"line":134,"column":25}},"89":{"start":{"line":135,"column":4},"end":{"line":147,"column":5}},"90":{"start":{"line":135,"column":17},"end":{"line":135,"column":18}},"91":{"start":{"line":136,"column":23},"end":{"line":136,"column":39}},"92":{"start":{"line":138,"column":8},"end":{"line":141,"column":9}},"93":{"start":{"line":139,"column":12},"end":{"line":139,"column":105}},"94":{"start":{"line":140,"column":12},"end":{"line":140,"column":38}},"95":{"start":{"line":143,"column":8},"end":{"line":146,"column":9}},"96":{"start":{"line":143,"column":37},"end":{"line":143,"column":57}},"97":{"start":{"line":144,"column":12},"end":{"line":144,"column":101}},"98":{"start":{"line":145,"column":12},"end":{"line":145,"column":24}},"99":{"start":{"line":148,"column":4},"end":{"line":153,"column":5}},"100":{"start":{"line":149,"column":8},"end":{"line":151,"column":9}},"101":{"start":{"line":150,"column":12},"end":{"line":150,"column":25}},"102":{"start":{"line":152,"column":8},"end":{"line":152,"column":21}},"103":{"start":{"line":154,"column":17},"end":{"line":154,"column":40}},"104":{"start":{"line":155,"column":4},"end":{"line":160,"column":5}},"105":{"start":{"line":156,"column":8},"end":{"line":156,"column":45}},"106":{"start":{"line":158,"column":9},"end":{"line":160,"column":5}},"107":{"start":{"line":159,"column":8},"end":{"line":159,"column":45}},"108":{"start":{"line":161,"column":4},"end":{"line":161,"column":42}},"109":{"start":{"line":162,"column":4},"end":{"line":164,"column":5}},"110":{"start":{"line":163,"column":8},"end":{"line":163,"column":21}},"111":{"start":{"line":165,"column":4},"end":{"line":165,"column":17}},"112":{"start":{"line":168,"column":19},"end":{"line":168,"column":34}},"113":{"start":{"line":169,"column":4},"end":{"line":172,"column":5}},"114":{"start":{"line":170,"column":8},"end":{"line":170,"column":21}},"115":{"start":{"line":171,"column":8},"end":{"line":171,"column":21}},"116":{"start":{"line":173,"column":19},"end":{"line":173,"column":68}},"117":{"start":{"line":173,"column":43},"end":{"line":173,"column":67}},"118":{"start":{"line":174,"column":4},"end":{"line":176,"column":5}},"119":{"start":{"line":175,"column":8},"end":{"line":175,"column":84}},"120":{"start":{"line":177,"column":4},"end":{"line":197,"column":7}},"121":{"start":{"line":178,"column":8},"end":{"line":196,"column":9}},"122":{"start":{"line":179,"column":27},"end":{"line":179,"column":33}},"123":{"start":{"line":180,"column":12},"end":{"line":180,"column":63}},"124":{"start":{"line":180,"column":36},"end":{"line":180,"column":61}},"125":{"start":{"line":181,"column":12},"end":{"line":181,"column":61}},"126":{"start":{"line":183,"column":13},"end":{"line":196,"column":9}},"127":{"start":{"line":184,"column":36},"end":{"line":184,"column":42}},"128":{"start":{"line":185,"column":12},"end":{"line":187,"column":13}},"129":{"start":{"line":186,"column":16},"end":{"line":186,"column":92}},"130":{"start":{"line":188,"column":31},"end":{"line":188,"column":71}},"131":{"start":{"line":189,"column":12},"end":{"line":191,"column":13}},"132":{"start":{"line":190,"column":16},"end":{"line":190,"column":92}},"133":{"start":{"line":192,"column":25},"end":{"line":192,"column":38}},"134":{"start":{"line":193,"column":12},"end":{"line":193,"column":53}},"135":{"start":{"line":194,"column":12},"end":{"line":194,"column":44}},"136":{"start":{"line":195,"column":12},"end":{"line":195,"column":61}},"137":{"start":{"line":200,"column":25},"end":{"line":200,"column":31}},"138":{"start":{"line":202,"column":34},"end":{"line":202,"column":77}},"139":{"start":{"line":203,"column":4},"end":{"line":203,"column":53}},"140":{"start":{"line":205,"column":4},"end":{"line":205,"column":73}},"141":{"start":{"line":206,"column":4},"end":{"line":208,"column":5}},"142":{"start":{"line":207,"column":8},"end":{"line":207,"column":52}},"143":{"start":{"line":207,"column":44},"end":{"line":207,"column":50}},"144":{"start":{"line":209,"column":30},"end":{"line":209,"column":58}},"145":{"start":{"line":210,"column":4},"end":{"line":221,"column":5}},"146":{"start":{"line":211,"column":23},"end":{"line":211,"column":52}},"147":{"start":{"line":212,"column":31},"end":{"line":212,"column":87}},"148":{"start":{"line":213,"column":8},"end":{"line":213,"column":58}},"149":{"start":{"line":214,"column":8},"end":{"line":216,"column":9}},"150":{"start":{"line":215,"column":12},"end":{"line":215,"column":56}},"151":{"start":{"line":215,"column":48},"end":{"line":215,"column":54}},"152":{"start":{"line":217,"column":8},"end":{"line":220,"column":9}},"153":{"start":{"line":218,"column":32},"end":{"line":218,"column":60}},"154":{"start":{"line":219,"column":12},"end":{"line":219,"column":67}},"155":{"start":{"line":222,"column":20},"end":{"line":225,"column":5}},"156":{"start":{"line":226,"column":22},"end":{"line":226,"column":36}},"157":{"start":{"line":227,"column":4},"end":{"line":236,"column":5}},"158":{"start":{"line":227,"column":17},"end":{"line":227,"column":18}},"159":{"start":{"line":228,"column":23},"end":{"line":228,"column":39}},"160":{"start":{"line":229,"column":30},"end":{"line":229,"column":75}},"161":{"start":{"line":229,"column":50},"end":{"line":229,"column":74}},"162":{"start":{"line":230,"column":8},"end":{"line":235,"column":11}},"163":{"start":{"line":231,"column":12},"end":{"line":231,"column":32}},"164":{"start":{"line":232,"column":12},"end":{"line":234,"column":13}},"165":{"start":{"line":232,"column":37},"end":{"line":232,"column":38}},"166":{"start":{"line":233,"column":16},"end":{"line":233,"column":54}},"167":{"start":{"line":237,"column":4},"end":{"line":237,"column":17}},"168":{"start":{"line":240,"column":4},"end":{"line":245,"column":5}},"169":{"start":{"line":241,"column":8},"end":{"line":243,"column":9}},"170":{"start":{"line":242,"column":12},"end":{"line":242,"column":25}},"171":{"start":{"line":244,"column":8},"end":{"line":244,"column":21}},"172":{"start":{"line":246,"column":22},"end":{"line":246,"column":89}},"173":{"start":{"line":246,"column":46},"end":{"line":246,"column":62}},"174":{"start":{"line":247,"column":4},"end":{"line":247,"column":34}},"175":{"start":{"line":249,"column":0},"end":{"line":249,"column":32}},"176":{"start":{"line":251,"column":4},"end":{"line":258,"column":5}},"177":{"start":{"line":252,"column":8},"end":{"line":256,"column":11}},"178":{"start":{"line":253,"column":12},"end":{"line":255,"column":13}},"179":{"start":{"line":253,"column":85},"end":{"line":253,"column":97}},"180":{"start":{"line":254,"column":16},"end":{"line":254,"column":73}},"181":{"start":{"line":257,"column":8},"end":{"line":257,"column":21}},"182":{"start":{"line":259,"column":4},"end":{"line":259,"column":17}},"183":{"start":{"line":261,"column":0},"end":{"line":261,"column":46}}},"fnMap":{"0":{"name":"findKoPokemons","decl":{"start":{"line":14,"column":9},"end":{"line":14,"column":23}},"loc":{"start":{"line":14,"column":38},"end":{"line":27,"column":1}},"line":14},"1":{"name":"(anonymous_1)","decl":{"start":{"line":18,"column":75},"end":{"line":18,"column":76}},"loc":{"start":{"line":18,"column":103},"end":{"line":24,"column":9}},"line":18},"2":{"name":"handleBenchSizeChange","decl":{"start":{"line":28,"column":9},"end":{"line":28,"column":30}},"loc":{"start":{"line":28,"column":56},"end":{"line":72,"column":1}},"line":28},"3":{"name":"(anonymous_3)","decl":{"start":{"line":29,"column":26},"end":{"line":29,"column":27}},"loc":{"start":{"line":29,"column":36},"end":{"line":70,"column":5}},"line":29},"4":{"name":"(anonymous_4)","decl":{"start":{"line":59,"column":272},"end":{"line":59,"column":273}},"loc":{"start":{"line":59,"column":283},"end":{"line":69,"column":9}},"line":59},"5":{"name":"chooseActivePokemons","decl":{"start":{"line":73,"column":9},"end":{"line":73,"column":29}},"loc":{"start":{"line":73,"column":37},"end":{"line":84,"column":1}},"line":73},"6":{"name":"(anonymous_6)","decl":{"start":{"line":77,"column":45},"end":{"line":77,"column":46}},"loc":{"start":{"line":77,"column":54},"end":{"line":77,"column":76}},"line":77},"7":{"name":"choosePrizeCards","decl":{"start":{"line":85,"column":9},"end":{"line":85,"column":25}},"loc":{"start":{"line":85,"column":47},"end":{"line":99,"column":1}},"line":85},"8":{"name":"endGame","decl":{"start":{"line":100,"column":9},"end":{"line":100,"column":16}},"loc":{"start":{"line":100,"column":39},"end":{"line":131,"column":1}},"line":100},"9":{"name":"checkWinner","decl":{"start":{"line":133,"column":9},"end":{"line":133,"column":20}},"loc":{"start":{"line":133,"column":47},"end":{"line":166,"column":1}},"line":133},"10":{"name":"(anonymous_10)","decl":{"start":{"line":143,"column":32},"end":{"line":143,"column":33}},"loc":{"start":{"line":143,"column":37},"end":{"line":143,"column":57}},"line":143},"11":{"name":"handlePrompts","decl":{"start":{"line":167,"column":9},"end":{"line":167,"column":22}},"loc":{"start":{"line":167,"column":58},"end":{"line":198,"column":1}},"line":167},"12":{"name":"(anonymous_12)","decl":{"start":{"line":173,"column":38},"end":{"line":173,"column":39}},"loc":{"start":{"line":173,"column":43},"end":{"line":173,"column":67}},"line":173},"13":{"name":"(anonymous_13)","decl":{"start":{"line":177,"column":39},"end":{"line":177,"column":40}},"loc":{"start":{"line":177,"column":51},"end":{"line":197,"column":5}},"line":177},"14":{"name":"(anonymous_14)","decl":{"start":{"line":180,"column":27},"end":{"line":180,"column":28}},"loc":{"start":{"line":180,"column":36},"end":{"line":180,"column":61}},"line":180},"15":{"name":"executeCheckState","decl":{"start":{"line":199,"column":10},"end":{"line":199,"column":27}},"loc":{"start":{"line":199,"column":60},"end":{"line":238,"column":1}},"line":199},"16":{"name":"(anonymous_16)","decl":{"start":{"line":207,"column":38},"end":{"line":207,"column":39}},"loc":{"start":{"line":207,"column":44},"end":{"line":207,"column":50}},"line":207},"17":{"name":"(anonymous_17)","decl":{"start":{"line":215,"column":42},"end":{"line":215,"column":43}},"loc":{"start":{"line":215,"column":48},"end":{"line":215,"column":54}},"line":215},"18":{"name":"(anonymous_18)","decl":{"start":{"line":229,"column":45},"end":{"line":229,"column":46}},"loc":{"start":{"line":229,"column":50},"end":{"line":229,"column":74}},"line":229},"19":{"name":"(anonymous_19)","decl":{"start":{"line":230,"column":59},"end":{"line":230,"column":60}},"loc":{"start":{"line":230,"column":65},"end":{"line":235,"column":9}},"line":230},"20":{"name":"(anonymous_20)","decl":{"start":{"line":232,"column":32},"end":{"line":232,"column":33}},"loc":{"start":{"line":232,"column":37},"end":{"line":232,"column":38}},"line":232},"21":{"name":"checkState","decl":{"start":{"line":239,"column":9},"end":{"line":239,"column":19}},"loc":{"start":{"line":239,"column":46},"end":{"line":248,"column":1}},"line":239},"22":{"name":"(anonymous_22)","decl":{"start":{"line":246,"column":40},"end":{"line":246,"column":41}},"loc":{"start":{"line":246,"column":46},"end":{"line":246,"column":62}},"line":246},"23":{"name":"checkStateReducer","decl":{"start":{"line":250,"column":9},"end":{"line":250,"column":26}},"loc":{"start":{"line":250,"column":49},"end":{"line":260,"column":1}},"line":250},"24":{"name":"(anonymous_24)","decl":{"start":{"line":252,"column":36},"end":{"line":252,"column":37}},"loc":{"start":{"line":252,"column":41},"end":{"line":256,"column":9}},"line":252},"25":{"name":"(anonymous_25)","decl":{"start":{"line":253,"column":80},"end":{"line":253,"column":81}},"loc":{"start":{"line":253,"column":85},"end":{"line":253,"column":97}},"line":253}},"branchMap":{"0":{"loc":{"start":{"line":21,"column":12},"end":{"line":23,"column":13}},"type":"if","locations":[{"start":{"line":21,"column":12},"end":{"line":23,"column":13}},{"start":{"line":21,"column":12},"end":{"line":23,"column":13}}],"line":21},"1":{"loc":{"start":{"line":36,"column":8},"end":{"line":38,"column":9}},"type":"if","locations":[{"start":{"line":36,"column":8},"end":{"line":38,"column":9}},{"start":{"line":36,"column":8},"end":{"line":38,"column":9}}],"line":36},"2":{"loc":{"start":{"line":44,"column":12},"end":{"line":46,"column":13}},"type":"if","locations":[{"start":{"line":44,"column":12},"end":{"line":46,"column":13}},{"start":{"line":44,"column":12},"end":{"line":46,"column":13}}],"line":44},"3":{"loc":{"start":{"line":44,"column":16},"end":{"line":44,"column":73}},"type":"binary-expr","locations":[{"start":{"line":44,"column":16},"end":{"line":44,"column":62}},{"start":{"line":44,"column":66},"end":{"line":44,"column":73}}],"line":44},"4":{"loc":{"start":{"line":48,"column":8},"end":{"line":56,"column":9}},"type":"if","locations":[{"start":{"line":48,"column":8},"end":{"line":56,"column":9}},{"start":{"line":48,"column":8},"end":{"line":56,"column":9}}],"line":48},"5":{"loc":{"start":{"line":51,"column":16},"end":{"line":53,"column":17}},"type":"if","locations":[{"start":{"line":51,"column":16},"end":{"line":53,"column":17}},{"start":{"line":51,"column":16},"end":{"line":53,"column":17}}],"line":51},"6":{"loc":{"start":{"line":60,"column":22},"end":{"line":60,"column":35}},"type":"binary-expr","locations":[{"start":{"line":60,"column":22},"end":{"line":60,"column":29}},{"start":{"line":60,"column":33},"end":{"line":60,"column":35}}],"line":60},"7":{"loc":{"start":{"line":64,"column":16},"end":{"line":67,"column":17}},"type":"if","locations":[{"start":{"line":64,"column":16},"end":{"line":67,"column":17}},{"start":{"line":64,"column":16},"end":{"line":67,"column":17}}],"line":64},"8":{"loc":{"start":{"line":78,"column":8},"end":{"line":81,"column":9}},"type":"if","locations":[{"start":{"line":78,"column":8},"end":{"line":81,"column":9}},{"start":{"line":78,"column":8},"end":{"line":81,"column":9}}],"line":78},"9":{"loc":{"start":{"line":78,"column":12},"end":{"line":78,"column":36}},"type":"binary-expr","locations":[{"start":{"line":78,"column":12},"end":{"line":78,"column":22}},{"start":{"line":78,"column":26},"end":{"line":78,"column":36}}],"line":78},"10":{"loc":{"start":{"line":90,"column":8},"end":{"line":92,"column":9}},"type":"if","locations":[{"start":{"line":90,"column":8},"end":{"line":92,"column":9}},{"start":{"line":90,"column":8},"end":{"line":92,"column":9}}],"line":90},"11":{"loc":{"start":{"line":93,"column":8},"end":{"line":96,"column":9}},"type":"if","locations":[{"start":{"line":93,"column":8},"end":{"line":96,"column":9}},{"start":{"line":93,"column":8},"end":{"line":96,"column":9}}],"line":93},"12":{"loc":{"start":{"line":101,"column":4},"end":{"line":103,"column":5}},"type":"if","locations":[{"start":{"line":101,"column":4},"end":{"line":103,"column":5}},{"start":{"line":101,"column":4},"end":{"line":103,"column":5}}],"line":101},"13":{"loc":{"start":{"line":104,"column":4},"end":{"line":111,"column":5}},"type":"if","locations":[{"start":{"line":104,"column":4},"end":{"line":111,"column":5}},{"start":{"line":104,"column":4},"end":{"line":111,"column":5}}],"line":104},"14":{"loc":{"start":{"line":112,"column":4},"end":{"line":127,"column":5}},"type":"switch","locations":[{"start":{"line":113,"column":8},"end":{"line":115,"column":18}},{"start":{"line":116,"column":8},"end":{"line":118,"column":18}},{"start":{"line":119,"column":8},"end":{"line":119,"column":41}},{"start":{"line":120,"column":8},"end":{"line":126,"column":9}}],"line":112},"15":{"loc":{"start":{"line":121,"column":31},"end":{"line":123,"column":39}},"type":"cond-expr","locations":[{"start":{"line":122,"column":18},"end":{"line":122,"column":39}},{"start":{"line":123,"column":18},"end":{"line":123,"column":39}}],"line":121},"16":{"loc":{"start":{"line":138,"column":8},"end":{"line":141,"column":9}},"type":"if","locations":[{"start":{"line":138,"column":8},"end":{"line":141,"column":9}},{"start":{"line":138,"column":8},"end":{"line":141,"column":9}}],"line":138},"17":{"loc":{"start":{"line":140,"column":19},"end":{"line":140,"column":34}},"type":"cond-expr","locations":[{"start":{"line":140,"column":29},"end":{"line":140,"column":30}},{"start":{"line":140,"column":33},"end":{"line":140,"column":34}}],"line":140},"18":{"loc":{"start":{"line":143,"column":8},"end":{"line":146,"column":9}},"type":"if","locations":[{"start":{"line":143,"column":8},"end":{"line":146,"column":9}},{"start":{"line":143,"column":8},"end":{"line":146,"column":9}}],"line":143},"19":{"loc":{"start":{"line":148,"column":4},"end":{"line":153,"column":5}},"type":"if","locations":[{"start":{"line":148,"column":4},"end":{"line":153,"column":5}},{"start":{"line":148,"column":4},"end":{"line":153,"column":5}}],"line":148},"20":{"loc":{"start":{"line":149,"column":8},"end":{"line":151,"column":9}},"type":"if","locations":[{"start":{"line":149,"column":8},"end":{"line":151,"column":9}},{"start":{"line":149,"column":8},"end":{"line":151,"column":9}}],"line":149},"21":{"loc":{"start":{"line":155,"column":4},"end":{"line":160,"column":5}},"type":"if","locations":[{"start":{"line":155,"column":4},"end":{"line":160,"column":5}},{"start":{"line":155,"column":4},"end":{"line":160,"column":5}}],"line":155},"22":{"loc":{"start":{"line":158,"column":9},"end":{"line":160,"column":5}},"type":"if","locations":[{"start":{"line":158,"column":9},"end":{"line":160,"column":5}},{"start":{"line":158,"column":9},"end":{"line":160,"column":5}}],"line":158},"23":{"loc":{"start":{"line":162,"column":4},"end":{"line":164,"column":5}},"type":"if","locations":[{"start":{"line":162,"column":4},"end":{"line":164,"column":5}},{"start":{"line":162,"column":4},"end":{"line":164,"column":5}}],"line":162},"24":{"loc":{"start":{"line":169,"column":4},"end":{"line":172,"column":5}},"type":"if","locations":[{"start":{"line":169,"column":4},"end":{"line":172,"column":5}},{"start":{"line":169,"column":4},"end":{"line":172,"column":5}}],"line":169},"25":{"loc":{"start":{"line":174,"column":4},"end":{"line":176,"column":5}},"type":"if","locations":[{"start":{"line":174,"column":4},"end":{"line":176,"column":5}},{"start":{"line":174,"column":4},"end":{"line":176,"column":5}}],"line":174},"26":{"loc":{"start":{"line":178,"column":8},"end":{"line":196,"column":9}},"type":"if","locations":[{"start":{"line":178,"column":8},"end":{"line":196,"column":9}},{"start":{"line":178,"column":8},"end":{"line":196,"column":9}}],"line":178},"27":{"loc":{"start":{"line":183,"column":13},"end":{"line":196,"column":9}},"type":"if","locations":[{"start":{"line":183,"column":13},"end":{"line":196,"column":9}},{"start":{"line":183,"column":13},"end":{"line":196,"column":9}}],"line":183},"28":{"loc":{"start":{"line":185,"column":12},"end":{"line":187,"column":13}},"type":"if","locations":[{"start":{"line":185,"column":12},"end":{"line":187,"column":13}},{"start":{"line":185,"column":12},"end":{"line":187,"column":13}}],"line":185},"29":{"loc":{"start":{"line":189,"column":12},"end":{"line":191,"column":13}},"type":"if","locations":[{"start":{"line":189,"column":12},"end":{"line":191,"column":13}},{"start":{"line":189,"column":12},"end":{"line":191,"column":13}}],"line":189},"30":{"loc":{"start":{"line":189,"column":16},"end":{"line":189,"column":67}},"type":"binary-expr","locations":[{"start":{"line":189,"column":16},"end":{"line":189,"column":33}},{"start":{"line":189,"column":37},"end":{"line":189,"column":67}}],"line":189},"31":{"loc":{"start":{"line":206,"column":4},"end":{"line":208,"column":5}},"type":"if","locations":[{"start":{"line":206,"column":4},"end":{"line":208,"column":5}},{"start":{"line":206,"column":4},"end":{"line":208,"column":5}}],"line":206},"32":{"loc":{"start":{"line":214,"column":8},"end":{"line":216,"column":9}},"type":"if","locations":[{"start":{"line":214,"column":8},"end":{"line":216,"column":9}},{"start":{"line":214,"column":8},"end":{"line":216,"column":9}}],"line":214},"33":{"loc":{"start":{"line":217,"column":8},"end":{"line":220,"column":9}},"type":"if","locations":[{"start":{"line":217,"column":8},"end":{"line":220,"column":9}},{"start":{"line":217,"column":8},"end":{"line":220,"column":9}}],"line":217},"34":{"loc":{"start":{"line":218,"column":32},"end":{"line":218,"column":60}},"type":"cond-expr","locations":[{"start":{"line":218,"column":55},"end":{"line":218,"column":56}},{"start":{"line":218,"column":59},"end":{"line":218,"column":60}}],"line":218},"35":{"loc":{"start":{"line":232,"column":12},"end":{"line":234,"column":13}},"type":"if","locations":[{"start":{"line":232,"column":12},"end":{"line":234,"column":13}},{"start":{"line":232,"column":12},"end":{"line":234,"column":13}}],"line":232},"36":{"loc":{"start":{"line":240,"column":4},"end":{"line":245,"column":5}},"type":"if","locations":[{"start":{"line":240,"column":4},"end":{"line":245,"column":5}},{"start":{"line":240,"column":4},"end":{"line":245,"column":5}}],"line":240},"37":{"loc":{"start":{"line":241,"column":8},"end":{"line":243,"column":9}},"type":"if","locations":[{"start":{"line":241,"column":8},"end":{"line":243,"column":9}},{"start":{"line":241,"column":8},"end":{"line":243,"column":9}}],"line":241},"38":{"loc":{"start":{"line":251,"column":4},"end":{"line":258,"column":5}},"type":"if","locations":[{"start":{"line":251,"column":4},"end":{"line":258,"column":5}},{"start":{"line":251,"column":4},"end":{"line":258,"column":5}}],"line":251},"39":{"loc":{"start":{"line":253,"column":12},"end":{"line":255,"column":13}},"type":"if","locations":[{"start":{"line":253,"column":12},"end":{"line":255,"column":13}},{"start":{"line":253,"column":12},"end":{"line":255,"column":13}}],"line":253},"40":{"loc":{"start":{"line":253,"column":16},"end":{"line":253,"column":98}},"type":"binary-expr","locations":[{"start":{"line":253,"column":16},"end":{"line":253,"column":53}},{"start":{"line":253,"column":57},"end":{"line":253,"column":98}}],"line":253}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":1,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"175":1,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0,0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/effect-reducers/check-effect.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/effect-reducers/check-effect.ts"],"names":[],"mappings":"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","sourcesContent":["import { State, GamePhase, GameWinner } from '../state/state';\nimport { StoreLike } from '../store-like';\nimport { CheckHpEffect, CheckProvidedEnergyEffect, CheckTableStateEffect } from '../effects/check-effects';\nimport { PokemonCardList } from '../state/pokemon-card-list';\nimport { ChoosePokemonPrompt } from '../prompts/choose-pokemon-prompt';\nimport { GameError } from '../../game-error';\nimport { GameMessage, GameLog } from '../../game-message';\nimport { ChoosePrizePrompt } from '../prompts/choose-prize-prompt';\nimport { CardList } from '../state/card-list';\nimport { PlayerType, SlotType } from '../actions/play-card-action';\nimport { KnockOutEffect } from '../effects/game-effects';\nimport { Effect } from '../effects/effect';\nimport { EnergyCard } from '../card/energy-card';\n\ninterface PokemonItem {\n  playerNum: number;\n  cardList: PokemonCardList;\n}\n\nfunction findKoPokemons(store: StoreLike, state: State): PokemonItem[] {\n  const pokemons: PokemonItem[] = [];\n\n  for (let i = 0; i < state.players.length; i++) {\n    const player = state.players[i];\n    player.forEachPokemon(PlayerType.BOTTOM_PLAYER, (cardList, card, target) => {\n      const checkHpEffect = new CheckHpEffect(player, cardList);\n      store.reduceEffect(state, checkHpEffect);\n\n      if (cardList.damage >= checkHpEffect.hp) {\n        pokemons.push({ playerNum: i, cardList });\n      }\n    });\n  }\n\n  return pokemons;\n}\n\nfunction handleBenchSizeChange(store: StoreLike, state: State, benchSize: number): State {\n  state.players.forEach(player => {\n    // Add empty slots if bench is smaller\n    while (player.bench.length < benchSize) {\n      const bench = new PokemonCardList();\n      bench.isPublic = true;\n      player.bench.push(bench);\n    }\n\n    if (player.bench.length === benchSize) {\n      return;\n    }\n\n    // Remove empty slots, starting from the right side\n    const empty: PokemonCardList[] = [];\n    for (let index = player.bench.length - 1; index >= 0; index--) {\n      const bench = player.bench[index];\n      const isEmpty = bench.cards.length === 0;\n      if (player.bench.length - empty.length > benchSize && isEmpty) {\n        empty.push(bench);\n      }\n    }\n\n    if (player.bench.length - empty.length <= benchSize) {\n      // Discarding empty slots is enough\n      for (let i = player.bench.length - 1; i >= 0; i--) {\n        if (empty.includes(player.bench[i])) {\n          player.bench.splice(i, 1);\n        }\n      }\n      return;\n    }\n\n    // Player has more Pokemons than bench size, discard some\n    const count = player.bench.length - empty.length - benchSize;\n    store.prompt(state, new ChoosePokemonPrompt(\n      player.id,\n      GameMessage.CHOOSE_POKEMON_TO_DISCARD,\n      PlayerType.BOTTOM_PLAYER,\n      [ SlotType.BENCH ],\n      { min: count, max: count, allowCancel: false }\n    ), results => {\n      results = results || [];\n      const selected = [ ...empty, ...results ];\n\n      // Discard all empty slots and selected Pokemons\n      for (let i = player.bench.length - 1; i >= 0; i--) {\n        if (selected.includes(player.bench[i])) {\n          player.bench[i].moveTo(player.discard);\n          player.bench.splice(i, 1);\n        }\n      }\n    });\n\n  });\n\n  return state;\n}\n\nfunction chooseActivePokemons(state: State): ChoosePokemonPrompt[] {\n  const prompts: ChoosePokemonPrompt[] = [];\n\n  for (const player of state.players) {\n    const hasActive = player.active.cards.length > 0;\n    const hasBenched = player.bench.some(bench => bench.cards.length > 0);\n    if (!hasActive && hasBenched) {\n      const choose = new ChoosePokemonPrompt(\n        player.id,\n        GameMessage.CHOOSE_NEW_ACTIVE_POKEMON,\n        PlayerType.BOTTOM_PLAYER,\n        [ SlotType.BENCH ],\n        { min: 1, allowCancel: false }\n      );\n      prompts.push(choose);\n    }\n  }\n\n  return prompts;\n}\n\nfunction choosePrizeCards(state: State, prizesToTake: [number, number]): ChoosePrizePrompt[] {\n  const prompts: ChoosePrizePrompt[] = [];\n\n  for (let i = 0; i < state.players.length; i++) {\n    const player = state.players[i];\n    const prizeLeft = player.getPrizeLeft();\n\n    if (prizesToTake[i] > prizeLeft) {\n      prizesToTake[i] = prizeLeft;\n    }\n\n    if (prizesToTake[i] > 0) {\n      const prompt = new ChoosePrizePrompt(player.id, GameMessage.CHOOSE_PRIZE_CARD, { count: prizesToTake[i] });\n      prompts.push(prompt);\n    }\n  }\n\n  return prompts;\n}\n\nexport function endGame(store: StoreLike, state: State, winner: GameWinner): State {\n\n  if (state.players.length !== 2) {\n    throw new GameError(GameMessage.ILLEGAL_ACTION);\n  }\n\n  if ([\n    GamePhase.WAITING_FOR_PLAYERS,\n    GamePhase.PLAYER_TURN,\n    GamePhase.ATTACK,\n    GamePhase.BETWEEN_TURNS\n  ].includes(state.phase) === false) {\n    throw new GameError(GameMessage.ILLEGAL_ACTION);\n  }\n\n  switch (winner) {\n    case GameWinner.NONE:\n      store.log(state, GameLog.LOG_GAME_FINISHED);\n      break;\n    case GameWinner.DRAW:\n      store.log(state, GameLog.LOG_GAME_FINISHED_DRAW);\n      break;\n    case GameWinner.PLAYER_1:\n    case GameWinner.PLAYER_2: {\n      const winnerName = winner === GameWinner.PLAYER_1\n        ? state.players[0].name\n        : state.players[1].name;\n      store.log(state, GameLog.LOG_GAME_FINISHED_WINNER, { name: winnerName });\n      break;\n    }\n  }\n\n  state.winner = winner;\n  state.phase = GamePhase.FINISHED;\n  return state;\n}\n\nfunction checkWinner(\n  store: StoreLike,\n  state: State,\n  onComplete?: () => void\n): State {\n  const points: [number, number] = [0, 0];\n  for (let i = 0; i < state.players.length; i++) {\n    const player = state.players[i];\n    // Player has no active Pokemon, opponent wins.\n    if (player.active.cards.length === 0) {\n      store.log(state, GameLog.LOG_PLAYER_NO_ACTIVE_POKEMON, { name: player.name });\n      points[i === 0 ? 1 : 0]++;\n    }\n    // Player has no Prize cards left, player wins.\n    if (player.prizes.every(p => p.cards.length === 0)) {\n      store.log(state, GameLog.LOG_PLAYER_NO_PRIZE_CARD, { name: player.name });\n      points[i]++;\n    }\n  }\n\n  if (points[0] + points[1] === 0) {\n    if (onComplete) {\n      onComplete();\n    }\n    return state;\n  }\n\n  let winner = GameWinner.DRAW;\n  if (points[0] > points[1]) {\n    winner = GameWinner.PLAYER_1;\n  } else if (points[1] > points[0]) {\n    winner = GameWinner.PLAYER_2;\n  }\n\n  state = endGame(store, state, winner);\n  if (onComplete) {\n    onComplete();\n  }\n  return state;\n}\n\nfunction handlePrompts(\n  store: StoreLike,\n  state: State,\n  prompts: (ChoosePrizePrompt | ChoosePokemonPrompt)[],\n  onComplete: () => void\n): State {\n  const prompt = prompts.shift();\n  if (prompt === undefined) {\n    onComplete();\n    return state;\n  }\n\n  const player = state.players.find(p => p.id === prompt.playerId);\n  if (player === undefined) {\n    throw new GameError(GameMessage.ILLEGAL_ACTION);\n  }\n\n  return store.prompt(state, prompt, (result) => {\n    if (prompt instanceof ChoosePrizePrompt) {\n      const prizes: CardList[] = result;\n      prizes.forEach(prize => prize.moveTo(player.hand));\n      handlePrompts(store, state, prompts, onComplete);\n    } else if (prompt instanceof ChoosePokemonPrompt) {\n      const selectedPokemon = result as PokemonCardList[];\n      if (selectedPokemon.length !== 1) {\n        throw new GameError(GameMessage.ILLEGAL_ACTION);\n      }\n      const benchIndex = player.bench.indexOf(selectedPokemon[0]);\n      if (benchIndex === -1 || player.active.cards.length > 0) {\n        throw new GameError(GameMessage.ILLEGAL_ACTION);\n      }\n      const temp = player.active;\n      player.active = player.bench[benchIndex];\n      player.bench[benchIndex] = temp;\n      handlePrompts(store, state, prompts, onComplete);\n    }\n  });\n}\n\nfunction* executeCheckState(next: Function, store: StoreLike, state: State,\n  onComplete?: () => void): IterableIterator<State> {\n\n  const prizesToTake: [number, number] = [0, 0];\n\n  // This effect checks the general data from the table (bench size)\n  const checkTableStateEffect = new CheckTableStateEffect();\n  store.reduceEffect(state, checkTableStateEffect);\n\n  // Size of the bench has changed. This may require some Pokemons to be discarded\n  handleBenchSizeChange(store, state, checkTableStateEffect.benchSize);\n  if (store.hasPrompts()) {\n    yield store.waitPrompt(state, () => next());\n  }\n\n  const pokemonsToDiscard = findKoPokemons(store, state);\n  for (const item of pokemonsToDiscard) {\n    const player = state.players[item.playerNum];\n    const knockOutEffect = new KnockOutEffect(player, item.cardList);\n    state = store.reduceEffect(state, knockOutEffect);\n\n    if (store.hasPrompts()) {\n      yield store.waitPrompt(state, () => next());\n    }\n\n    if (knockOutEffect.preventDefault === false) {\n      const opponentNum = item.playerNum === 0 ? 1 : 0;\n      prizesToTake[opponentNum] += knockOutEffect.prizeCount;\n    }\n  }\n\n  const prompts: (ChoosePrizePrompt | ChoosePokemonPrompt)[] = [\n    ...choosePrizeCards(state, prizesToTake),\n    ...chooseActivePokemons(state)\n  ];\n\n  const completed: [boolean, boolean] = [false, false];\n  for (let i = 0; i < state.players.length; i++) {\n    const player = state.players[i];\n    const playerPrompts = prompts.filter(p => p.playerId === player.id);\n    state = handlePrompts(store, state, playerPrompts, () => {\n      completed[i] = true;\n      if (completed.every(c => c)) {\n        checkWinner(store, state, onComplete);\n      }\n    });\n  }\n\n  return state;\n}\n\nexport function checkState(store: StoreLike, state: State, onComplete?: () => void): State {\n  if ([GamePhase.PLAYER_TURN, GamePhase.ATTACK, GamePhase.BETWEEN_TURNS].includes(state.phase) === false) {\n    if (onComplete !== undefined) {\n      onComplete();\n    }\n    return state;\n  }\n\n  const generator = executeCheckState(() => generator.next(), store, state, onComplete);\n  return generator.next().value;\n}\n\n\nexport function checkStateReducer(store: StoreLike, state: State, effect: Effect): State {\n\n\n  if (effect instanceof CheckProvidedEnergyEffect) {\n    effect.source.cards.forEach(c => {\n      if (c instanceof EnergyCard && !effect.energyMap.some(e => e.card === c)) {\n        effect.energyMap.push({ card: c, provides: c.provides });\n      }\n    });\n    return state;\n  }\n\n  return state;\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"781b594c0f3e99a8d7b0a16cbb08bada1c21f3e5","contentHash":"6027f84dc4109b36f893499f4c60f034ef74397fc57bf90d62a7c33fac3a705b"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/effect-reducers/game-effect.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/effect-reducers/game-effect.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":29}},"2":{"start":{"line":4,"column":21},"end":{"line":4,"column":48}},"3":{"start":{"line":5,"column":23},"end":{"line":5,"column":52}},"4":{"start":{"line":6,"column":29},"end":{"line":6,"column":69}},"5":{"start":{"line":7,"column":16},"end":{"line":7,"column":41}},"6":{"start":{"line":8,"column":22},"end":{"line":8,"column":47}},"7":{"start":{"line":9,"column":24},"end":{"line":9,"column":59}},"8":{"start":{"line":10,"column":21},"end":{"line":10,"column":50}},"9":{"start":{"line":11,"column":23},"end":{"line":11,"column":57}},"10":{"start":{"line":12,"column":27},"end":{"line":12,"column":65}},"11":{"start":{"line":13,"column":25},"end":{"line":13,"column":61}},"12":{"start":{"line":15,"column":19},"end":{"line":15,"column":20}},"13":{"start":{"line":16,"column":19},"end":{"line":16,"column":20}},"14":{"start":{"line":17,"column":4},"end":{"line":26,"column":5}},"15":{"start":{"line":18,"column":8},"end":{"line":25,"column":9}},"16":{"start":{"line":19,"column":12},"end":{"line":24,"column":13}},"17":{"start":{"line":20,"column":16},"end":{"line":20,"column":30}},"18":{"start":{"line":23,"column":16},"end":{"line":23,"column":39}},"19":{"start":{"line":27,"column":4},"end":{"line":31,"column":5}},"20":{"start":{"line":28,"column":8},"end":{"line":30,"column":9}},"21":{"start":{"line":29,"column":12},"end":{"line":29,"column":35}},"22":{"start":{"line":32,"column":4},"end":{"line":32,"column":42}},"23":{"start":{"line":35,"column":19},"end":{"line":35,"column":32}},"24":{"start":{"line":36,"column":21},"end":{"line":36,"column":72}},"25":{"start":{"line":37,"column":15},"end":{"line":37,"column":46}},"26":{"start":{"line":38,"column":4},"end":{"line":40,"column":5}},"27":{"start":{"line":39,"column":8},"end":{"line":39,"column":98}},"28":{"start":{"line":41,"column":19},"end":{"line":41,"column":32}},"29":{"start":{"line":42,"column":28},"end":{"line":42,"column":85}},"30":{"start":{"line":43,"column":4},"end":{"line":43,"column":55}},"31":{"start":{"line":44,"column":32},"end":{"line":44,"column":85}},"32":{"start":{"line":45,"column":4},"end":{"line":45,"column":59}},"33":{"start":{"line":46,"column":4},"end":{"line":48,"column":5}},"34":{"start":{"line":47,"column":8},"end":{"line":47,"column":87}},"35":{"start":{"line":49,"column":4},"end":{"line":62,"column":5}},"36":{"start":{"line":50,"column":19},"end":{"line":50,"column":24}},"37":{"start":{"line":51,"column":8},"end":{"line":51,"column":91}},"38":{"start":{"line":52,"column":8},"end":{"line":55,"column":11}},"39":{"start":{"line":53,"column":12},"end":{"line":53,"column":26}},"40":{"start":{"line":54,"column":12},"end":{"line":54,"column":19}},"41":{"start":{"line":56,"column":8},"end":{"line":61,"column":9}},"42":{"start":{"line":57,"column":12},"end":{"line":57,"column":70}},"43":{"start":{"line":58,"column":12},"end":{"line":58,"column":39}},"44":{"start":{"line":59,"column":12},"end":{"line":59,"column":94}},"45":{"start":{"line":60,"column":12},"end":{"line":60,"column":25}},"46":{"start":{"line":63,"column":4},"end":{"line":63,"column":112}},"47":{"start":{"line":64,"column":4},"end":{"line":64,"column":43}},"48":{"start":{"line":65,"column":25},"end":{"line":65,"column":82}},"49":{"start":{"line":66,"column":4},"end":{"line":66,"column":52}},"50":{"start":{"line":67,"column":4},"end":{"line":69,"column":5}},"51":{"start":{"line":68,"column":8},"end":{"line":68,"column":52}},"52":{"start":{"line":68,"column":44},"end":{"line":68,"column":50}},"53":{"start":{"line":70,"column":4},"end":{"line":73,"column":5}},"54":{"start":{"line":71,"column":27},"end":{"line":71,"column":99}},"55":{"start":{"line":72,"column":8},"end":{"line":72,"column":54}},"56":{"start":{"line":74,"column":4},"end":{"line":76,"column":5}},"57":{"start":{"line":75,"column":8},"end":{"line":75,"column":52}},"58":{"start":{"line":75,"column":44},"end":{"line":75,"column":50}},"59":{"start":{"line":77,"column":4},"end":{"line":77,"column":85}},"60":{"start":{"line":80,"column":4},"end":{"line":94,"column":5}},"61":{"start":{"line":81,"column":21},"end":{"line":81,"column":51}},"62":{"start":{"line":82,"column":8},"end":{"line":93,"column":9}},"63":{"start":{"line":84,"column":12},"end":{"line":86,"column":13}},"64":{"start":{"line":85,"column":16},"end":{"line":85,"column":39}},"65":{"start":{"line":87,"column":12},"end":{"line":89,"column":13}},"66":{"start":{"line":88,"column":16},"end":{"line":88,"column":39}},"67":{"start":{"line":90,"column":12},"end":{"line":90,"column":89}},"68":{"start":{"line":91,"column":12},"end":{"line":91,"column":56}},"69":{"start":{"line":92,"column":12},"end":{"line":92,"column":41}},"70":{"start":{"line":95,"column":4},"end":{"line":105,"column":5}},"71":{"start":{"line":96,"column":33},"end":{"line":96,"column":90}},"72":{"start":{"line":97,"column":8},"end":{"line":97,"column":60}},"73":{"start":{"line":98,"column":34},"end":{"line":98,"column":92}},"74":{"start":{"line":99,"column":8},"end":{"line":99,"column":61}},"75":{"start":{"line":100,"column":25},"end":{"line":100,"column":51}},"76":{"start":{"line":101,"column":25},"end":{"line":101,"column":80}},"77":{"start":{"line":102,"column":27},"end":{"line":102,"column":86}},"78":{"start":{"line":103,"column":8},"end":{"line":103,"column":98}},"79":{"start":{"line":104,"column":8},"end":{"line":104,"column":21}},"80":{"start":{"line":106,"column":4},"end":{"line":109,"column":5}},"81":{"start":{"line":107,"column":26},"end":{"line":107,"column":81}},"82":{"start":{"line":107,"column":42},"end":{"line":107,"column":58}},"83":{"start":{"line":108,"column":8},"end":{"line":108,"column":38}},"84":{"start":{"line":110,"column":4},"end":{"line":117,"column":5}},"85":{"start":{"line":111,"column":23},"end":{"line":111,"column":36}},"86":{"start":{"line":112,"column":22},"end":{"line":112,"column":34}},"87":{"start":{"line":113,"column":21},"end":{"line":113,"column":32}},"88":{"start":{"line":114,"column":8},"end":{"line":114,"column":117}},"89":{"start":{"line":115,"column":8},"end":{"line":115,"column":95}},"90":{"start":{"line":116,"column":8},"end":{"line":116,"column":21}},"91":{"start":{"line":118,"column":4},"end":{"line":122,"column":5}},"92":{"start":{"line":119,"column":23},"end":{"line":119,"column":36}},"93":{"start":{"line":120,"column":8},"end":{"line":120,"column":126}},"94":{"start":{"line":121,"column":8},"end":{"line":121,"column":44}},"95":{"start":{"line":123,"column":4},"end":{"line":126,"column":5}},"96":{"start":{"line":124,"column":8},"end":{"line":124,"column":81}},"97":{"start":{"line":125,"column":8},"end":{"line":125,"column":21}},"98":{"start":{"line":127,"column":4},"end":{"line":140,"column":5}},"99":{"start":{"line":128,"column":28},"end":{"line":128,"column":58}},"100":{"start":{"line":129,"column":8},"end":{"line":131,"column":9}},"101":{"start":{"line":130,"column":12},"end":{"line":130,"column":88}},"102":{"start":{"line":132,"column":8},"end":{"line":136,"column":11}},"103":{"start":{"line":137,"column":8},"end":{"line":137,"column":73}},"104":{"start":{"line":138,"column":8},"end":{"line":138,"column":53}},"105":{"start":{"line":139,"column":8},"end":{"line":139,"column":37}},"106":{"start":{"line":141,"column":4},"end":{"line":141,"column":17}},"107":{"start":{"line":143,"column":0},"end":{"line":143,"column":34}}},"fnMap":{"0":{"name":"applyWeaknessAndResistance","decl":{"start":{"line":14,"column":9},"end":{"line":14,"column":35}},"loc":{"start":{"line":14,"column":77},"end":{"line":33,"column":1}},"line":14},"1":{"name":"useAttack","decl":{"start":{"line":34,"column":10},"end":{"line":34,"column":19}},"loc":{"start":{"line":34,"column":48},"end":{"line":78,"column":1}},"line":34},"2":{"name":"(anonymous_2)","decl":{"start":{"line":52,"column":127},"end":{"line":52,"column":128}},"loc":{"start":{"line":52,"column":137},"end":{"line":55,"column":9}},"line":52},"3":{"name":"(anonymous_3)","decl":{"start":{"line":68,"column":38},"end":{"line":68,"column":39}},"loc":{"start":{"line":68,"column":44},"end":{"line":68,"column":50}},"line":68},"4":{"name":"(anonymous_4)","decl":{"start":{"line":75,"column":38},"end":{"line":75,"column":39}},"loc":{"start":{"line":75,"column":44},"end":{"line":75,"column":50}},"line":75},"5":{"name":"gameReducer","decl":{"start":{"line":79,"column":9},"end":{"line":79,"column":20}},"loc":{"start":{"line":79,"column":43},"end":{"line":142,"column":1}},"line":79},"6":{"name":"(anonymous_6)","decl":{"start":{"line":107,"column":36},"end":{"line":107,"column":37}},"loc":{"start":{"line":107,"column":42},"end":{"line":107,"column":58}},"line":107}},"branchMap":{"0":{"loc":{"start":{"line":18,"column":8},"end":{"line":25,"column":9}},"type":"if","locations":[{"start":{"line":18,"column":8},"end":{"line":25,"column":9}},{"start":{"line":18,"column":8},"end":{"line":25,"column":9}}],"line":18},"1":{"loc":{"start":{"line":19,"column":12},"end":{"line":24,"column":13}},"type":"if","locations":[{"start":{"line":19,"column":12},"end":{"line":24,"column":13}},{"start":{"line":19,"column":12},"end":{"line":24,"column":13}}],"line":19},"2":{"loc":{"start":{"line":28,"column":8},"end":{"line":30,"column":9}},"type":"if","locations":[{"start":{"line":28,"column":8},"end":{"line":30,"column":9}},{"start":{"line":28,"column":8},"end":{"line":30,"column":9}}],"line":28},"3":{"loc":{"start":{"line":38,"column":4},"end":{"line":40,"column":5}},"type":"if","locations":[{"start":{"line":38,"column":4},"end":{"line":40,"column":5}},{"start":{"line":38,"column":4},"end":{"line":40,"column":5}}],"line":38},"4":{"loc":{"start":{"line":38,"column":8},"end":{"line":38,"column":113}},"type":"binary-expr","locations":[{"start":{"line":38,"column":8},"end":{"line":38,"column":60}},{"start":{"line":38,"column":64},"end":{"line":38,"column":113}}],"line":38},"5":{"loc":{"start":{"line":46,"column":4},"end":{"line":48,"column":5}},"type":"if","locations":[{"start":{"line":46,"column":4},"end":{"line":48,"column":5}},{"start":{"line":46,"column":4},"end":{"line":48,"column":5}}],"line":46},"6":{"loc":{"start":{"line":49,"column":4},"end":{"line":62,"column":5}},"type":"if","locations":[{"start":{"line":49,"column":4},"end":{"line":62,"column":5}},{"start":{"line":49,"column":4},"end":{"line":62,"column":5}}],"line":49},"7":{"loc":{"start":{"line":56,"column":8},"end":{"line":61,"column":9}},"type":"if","locations":[{"start":{"line":56,"column":8},"end":{"line":61,"column":9}},{"start":{"line":56,"column":8},"end":{"line":61,"column":9}}],"line":56},"8":{"loc":{"start":{"line":67,"column":4},"end":{"line":69,"column":5}},"type":"if","locations":[{"start":{"line":67,"column":4},"end":{"line":69,"column":5}},{"start":{"line":67,"column":4},"end":{"line":69,"column":5}}],"line":67},"9":{"loc":{"start":{"line":70,"column":4},"end":{"line":73,"column":5}},"type":"if","locations":[{"start":{"line":70,"column":4},"end":{"line":73,"column":5}},{"start":{"line":70,"column":4},"end":{"line":73,"column":5}}],"line":70},"10":{"loc":{"start":{"line":74,"column":4},"end":{"line":76,"column":5}},"type":"if","locations":[{"start":{"line":74,"column":4},"end":{"line":76,"column":5}},{"start":{"line":74,"column":4},"end":{"line":76,"column":5}}],"line":74},"11":{"loc":{"start":{"line":80,"column":4},"end":{"line":94,"column":5}},"type":"if","locations":[{"start":{"line":80,"column":4},"end":{"line":94,"column":5}},{"start":{"line":80,"column":4},"end":{"line":94,"column":5}}],"line":80},"12":{"loc":{"start":{"line":82,"column":8},"end":{"line":93,"column":9}},"type":"if","locations":[{"start":{"line":82,"column":8},"end":{"line":93,"column":9}},{"start":{"line":82,"column":8},"end":{"line":93,"column":9}}],"line":82},"13":{"loc":{"start":{"line":84,"column":12},"end":{"line":86,"column":13}},"type":"if","locations":[{"start":{"line":84,"column":12},"end":{"line":86,"column":13}},{"start":{"line":84,"column":12},"end":{"line":86,"column":13}}],"line":84},"14":{"loc":{"start":{"line":84,"column":16},"end":{"line":84,"column":234}},"type":"binary-expr","locations":[{"start":{"line":84,"column":16},"end":{"line":84,"column":67}},{"start":{"line":84,"column":71},"end":{"line":84,"column":121}},{"start":{"line":84,"column":125},"end":{"line":84,"column":179}},{"start":{"line":84,"column":183},"end":{"line":84,"column":234}}],"line":84},"15":{"loc":{"start":{"line":87,"column":12},"end":{"line":89,"column":13}},"type":"if","locations":[{"start":{"line":87,"column":12},"end":{"line":89,"column":13}},{"start":{"line":87,"column":12},"end":{"line":89,"column":13}}],"line":87},"16":{"loc":{"start":{"line":95,"column":4},"end":{"line":105,"column":5}},"type":"if","locations":[{"start":{"line":95,"column":4},"end":{"line":105,"column":5}},{"start":{"line":95,"column":4},"end":{"line":105,"column":5}}],"line":95},"17":{"loc":{"start":{"line":101,"column":25},"end":{"line":101,"column":80}},"type":"cond-expr","locations":[{"start":{"line":101,"column":49},"end":{"line":101,"column":51}},{"start":{"line":101,"column":54},"end":{"line":101,"column":80}}],"line":101},"18":{"loc":{"start":{"line":102,"column":27},"end":{"line":102,"column":86}},"type":"cond-expr","locations":[{"start":{"line":102,"column":53},"end":{"line":102,"column":55}},{"start":{"line":102,"column":58},"end":{"line":102,"column":86}}],"line":102},"19":{"loc":{"start":{"line":106,"column":4},"end":{"line":109,"column":5}},"type":"if","locations":[{"start":{"line":106,"column":4},"end":{"line":109,"column":5}},{"start":{"line":106,"column":4},"end":{"line":109,"column":5}}],"line":106},"20":{"loc":{"start":{"line":110,"column":4},"end":{"line":117,"column":5}},"type":"if","locations":[{"start":{"line":110,"column":4},"end":{"line":117,"column":5}},{"start":{"line":110,"column":4},"end":{"line":117,"column":5}}],"line":110},"21":{"loc":{"start":{"line":118,"column":4},"end":{"line":122,"column":5}},"type":"if","locations":[{"start":{"line":118,"column":4},"end":{"line":122,"column":5}},{"start":{"line":118,"column":4},"end":{"line":122,"column":5}}],"line":118},"22":{"loc":{"start":{"line":123,"column":4},"end":{"line":126,"column":5}},"type":"if","locations":[{"start":{"line":123,"column":4},"end":{"line":126,"column":5}},{"start":{"line":123,"column":4},"end":{"line":126,"column":5}}],"line":123},"23":{"loc":{"start":{"line":127,"column":4},"end":{"line":140,"column":5}},"type":"if","locations":[{"start":{"line":127,"column":4},"end":{"line":140,"column":5}},{"start":{"line":127,"column":4},"end":{"line":140,"column":5}}],"line":127},"24":{"loc":{"start":{"line":129,"column":8},"end":{"line":131,"column":9}},"type":"if","locations":[{"start":{"line":129,"column":8},"end":{"line":131,"column":9}},{"start":{"line":129,"column":8},"end":{"line":131,"column":9}}],"line":129}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0,0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/effect-reducers/game-effect.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/effect-reducers/game-effect.ts"],"names":[],"mappings":"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","sourcesContent":["import { GameError } from '../../game-error';\nimport { GameMessage, GameLog } from '../../game-message';\nimport { EndTurnEffect } from '../effects/game-phase-effects';\nimport { Effect } from '../effects/effect';\nimport { State, GamePhase } from '../state/state';\nimport { StoreLike } from '../store-like';\nimport { StateUtils } from '../state-utils';\nimport { CheckPokemonTypeEffect, CheckPokemonStatsEffect,\n  CheckProvidedEnergyEffect, CheckAttackCostEffect } from '../effects/check-effects';\nimport { Weakness, Resistance } from '../card/pokemon-types';\nimport { CardType, SpecialCondition, CardTag } from '../card/card-types';\nimport { AttackEffect, UseAttackEffect, HealEffect, KnockOutEffect,\n  UsePowerEffect, PowerEffect, UseStadiumEffect, EvolveEffect } from '../effects/game-effects';\nimport { CoinFlipPrompt } from '../prompts/coin-flip-prompt';\nimport { DealDamageEffect, ApplyWeaknessEffect } from '../effects/attack-effects';\n\nfunction applyWeaknessAndResistance(\n  damage: number,\n  cardTypes: CardType[],\n  weakness: Weakness[],\n  resistance: Resistance[]\n): number {\n  let multiply = 1;\n  let modifier = 0;\n\n  for (const item of weakness) {\n    if (cardTypes.includes(item.type)) {\n      if (item.value === undefined) {\n        multiply *= 2;\n      } else {\n        modifier += item.value;\n      }\n    }\n  }\n\n  for (const item of resistance) {\n    if (cardTypes.includes(item.type)) {\n      modifier += item.value;\n    }\n  }\n\n  return (damage * multiply) + modifier;\n}\n\nfunction* useAttack(next: Function, store: StoreLike, state: State, effect: UseAttackEffect): IterableIterator<State> {\n  const player = effect.player;\n  const opponent = StateUtils.getOpponent(state, player);\n\n  const sp = player.active.specialConditions;\n  if (sp.includes(SpecialCondition.PARALYZED) || sp.includes(SpecialCondition.ASLEEP)) {\n    throw new GameError(GameMessage.BLOCKED_BY_SPECIAL_CONDITION);\n  }\n\n  const attack = effect.attack;\n  const checkAttackCost = new CheckAttackCostEffect(player, attack);\n  state = store.reduceEffect(state, checkAttackCost);\n\n  const checkProvidedEnergy = new CheckProvidedEnergyEffect(player);\n  state = store.reduceEffect(state, checkProvidedEnergy);\n\n  if (StateUtils.checkEnoughEnergy(checkProvidedEnergy.energyMap, checkAttackCost.cost) === false) {\n    throw new GameError(GameMessage.NOT_ENOUGH_ENERGY);\n  }\n\n  if (sp.includes(SpecialCondition.CONFUSED)) {\n    let flip = false;\n\n    store.log(state, GameLog.LOG_FLIP_CONFUSION, { name: player.name });\n    yield store.prompt(state, new CoinFlipPrompt(\n      player.id,\n      GameMessage.FLIP_CONFUSION),\n    result => {\n      flip = result;\n      next();\n    });\n\n    if (flip === false) {\n      store.log(state, GameLog.LOG_HURTS_ITSELF);\n      player.active.damage += 30;\n      state = store.reduceEffect(state, new EndTurnEffect(player));\n      return state;\n    }\n  }\n\n  store.log(state, GameLog.LOG_PLAYER_USES_ATTACK, { name: player.name, attack: attack.name });\n  state.phase = GamePhase.ATTACK;\n  const attackEffect = new AttackEffect(player, opponent, attack);\n  state = store.reduceEffect(state, attackEffect);\n\n  if (store.hasPrompts()) {\n    yield store.waitPrompt(state, () => next());\n  }\n\n  if (attackEffect.damage > 0) {\n    const dealDamage = new DealDamageEffect(attackEffect, attackEffect.damage);\n    state = store.reduceEffect(state, dealDamage);\n  }\n\n  if (store.hasPrompts()) {\n    yield store.waitPrompt(state, () => next());\n  }\n\n  return store.reduceEffect(state, new EndTurnEffect(player));\n}\n\nexport function gameReducer(store: StoreLike, state: State, effect: Effect): State {\n\n  if (effect instanceof KnockOutEffect) {\n    const card = effect.target.getPokemonCard();\n    if (card !== undefined) {\n\n      // Pokemon ex rule\n      if (card.tags.includes(CardTag.POKEMON_EX) || card.tags.includes(CardTag.POKEMON_V) || card.tags.includes(CardTag.POKEMON_VSTAR) || card.tags.includes(CardTag.POKEMON_ex)) {\n        effect.prizeCount += 1;\n      }\n      if (card.tags.includes(CardTag.POKEMON_VMAX)) {\n        effect.prizeCount += 2;\n      }\n\n      store.log(state, GameLog.LOG_POKEMON_KO, { name: card.name });\n      effect.target.moveTo(effect.player.discard);\n      effect.target.clearEffects();\n    }\n  }\n\n  if (effect instanceof ApplyWeaknessEffect) {\n    const checkPokemonType = new CheckPokemonTypeEffect(effect.source);\n    state = store.reduceEffect(state, checkPokemonType);\n    const checkPokemonStats = new CheckPokemonStatsEffect(effect.target);\n    state = store.reduceEffect(state, checkPokemonStats);\n\n    const cardType = checkPokemonType.cardTypes;\n    const weakness = effect.ignoreWeakness ? [] : checkPokemonStats.weakness;\n    const resistance = effect.ignoreResistance ? [] : checkPokemonStats.resistance;\n    effect.damage = applyWeaknessAndResistance(effect.damage, cardType, weakness, resistance);\n    return state;\n  }\n\n  if (effect instanceof UseAttackEffect) {\n    const generator = useAttack(() => generator.next(), store, state, effect);\n    return generator.next().value;\n  }\n\n  if (effect instanceof UsePowerEffect) {\n    const player = effect.player;\n    const power = effect.power;\n    const card = effect.card;\n\n    store.log(state, GameLog.LOG_PLAYER_USES_ABILITY, { name: player.name, ability: power.name });\n    state = store.reduceEffect(state, new PowerEffect(player, power, card));\n    return state;\n  }\n\n  if (effect instanceof UseStadiumEffect) {\n    const player = effect.player;\n    store.log(state, GameLog.LOG_PLAYER_USES_STADIUM, { name: player.name, stadium: effect.stadium.name });\n    player.stadiumUsedTurn = state.turn;\n  }\n\n  if (effect instanceof HealEffect) {\n    effect.target.damage = Math.max(0, effect.target.damage - effect.damage);\n    return state;\n  }\n\n  if (effect instanceof EvolveEffect) {\n    const pokemonCard = effect.target.getPokemonCard();\n    if (pokemonCard === undefined) {\n      throw new GameError(GameMessage.INVALID_TARGET);\n    }\n    store.log(state, GameLog.LOG_PLAYER_EVOLVES_POKEMON, {\n      name: effect.player.name,\n      pokemon: pokemonCard.name,\n      card: effect.pokemonCard.name\n    });\n    effect.player.hand.moveCardTo(effect.pokemonCard, effect.target);\n    effect.target.pokemonPlayedTurn = state.turn;\n    effect.target.clearEffects();\n  }\n\n  return state;\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"db0b81f67cc2f226f1d3289b08fc9ea06c15d521","contentHash":"789d4378d120f45d6a6a1ba60f6e68de93dd531ce8861687d88dbfe40e2fd20e"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/reducers/player-state-reducer.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/reducers/player-state-reducer.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":36}},"2":{"start":{"line":4,"column":31},"end":{"line":4,"column":73}},"3":{"start":{"line":5,"column":21},"end":{"line":5,"column":48}},"4":{"start":{"line":6,"column":23},"end":{"line":6,"column":52}},"5":{"start":{"line":7,"column":26},"end":{"line":7,"column":63}},"6":{"start":{"line":9,"column":4},"end":{"line":18,"column":5}},"7":{"start":{"line":10,"column":23},"end":{"line":10,"column":66}},"8":{"start":{"line":10,"column":47},"end":{"line":10,"column":65}},"9":{"start":{"line":11,"column":8},"end":{"line":13,"column":9}},"10":{"start":{"line":12,"column":12},"end":{"line":12,"column":88}},"11":{"start":{"line":14,"column":21},"end":{"line":14,"column":46}},"12":{"start":{"line":15,"column":8},"end":{"line":15,"column":60}},"13":{"start":{"line":16,"column":8},"end":{"line":16,"column":39}},"14":{"start":{"line":17,"column":8},"end":{"line":17,"column":21}},"15":{"start":{"line":19,"column":4},"end":{"line":26,"column":5}},"16":{"start":{"line":20,"column":23},"end":{"line":20,"column":66}},"17":{"start":{"line":20,"column":47},"end":{"line":20,"column":65}},"18":{"start":{"line":21,"column":8},"end":{"line":23,"column":9}},"19":{"start":{"line":22,"column":12},"end":{"line":22,"column":88}},"20":{"start":{"line":24,"column":8},"end":{"line":24,"column":45}},"21":{"start":{"line":25,"column":8},"end":{"line":25,"column":21}},"22":{"start":{"line":27,"column":4},"end":{"line":37,"column":5}},"23":{"start":{"line":28,"column":23},"end":{"line":28,"column":66}},"24":{"start":{"line":28,"column":47},"end":{"line":28,"column":65}},"25":{"start":{"line":29,"column":8},"end":{"line":31,"column":9}},"26":{"start":{"line":30,"column":12},"end":{"line":30,"column":88}},"27":{"start":{"line":32,"column":8},"end":{"line":32,"column":46}},"28":{"start":{"line":33,"column":8},"end":{"line":35,"column":9}},"29":{"start":{"line":34,"column":12},"end":{"line":34,"column":79}},"30":{"start":{"line":36,"column":8},"end":{"line":36,"column":21}},"31":{"start":{"line":38,"column":4},"end":{"line":38,"column":17}},"32":{"start":{"line":40,"column":0},"end":{"line":40,"column":48}}},"fnMap":{"0":{"name":"playerStateReducer","decl":{"start":{"line":8,"column":9},"end":{"line":8,"column":27}},"loc":{"start":{"line":8,"column":50},"end":{"line":39,"column":1}},"line":8},"1":{"name":"(anonymous_1)","decl":{"start":{"line":10,"column":42},"end":{"line":10,"column":43}},"loc":{"start":{"line":10,"column":47},"end":{"line":10,"column":65}},"line":10},"2":{"name":"(anonymous_2)","decl":{"start":{"line":20,"column":42},"end":{"line":20,"column":43}},"loc":{"start":{"line":20,"column":47},"end":{"line":20,"column":65}},"line":20},"3":{"name":"(anonymous_3)","decl":{"start":{"line":28,"column":42},"end":{"line":28,"column":43}},"loc":{"start":{"line":28,"column":47},"end":{"line":28,"column":65}},"line":28}},"branchMap":{"0":{"loc":{"start":{"line":9,"column":4},"end":{"line":18,"column":5}},"type":"if","locations":[{"start":{"line":9,"column":4},"end":{"line":18,"column":5}},{"start":{"line":9,"column":4},"end":{"line":18,"column":5}}],"line":9},"1":{"loc":{"start":{"line":11,"column":8},"end":{"line":13,"column":9}},"type":"if","locations":[{"start":{"line":11,"column":8},"end":{"line":13,"column":9}},{"start":{"line":11,"column":8},"end":{"line":13,"column":9}}],"line":11},"2":{"loc":{"start":{"line":11,"column":12},"end":{"line":11,"column":75}},"type":"binary-expr","locations":[{"start":{"line":11,"column":12},"end":{"line":11,"column":32}},{"start":{"line":11,"column":36},"end":{"line":11,"column":75}}],"line":11},"3":{"loc":{"start":{"line":19,"column":4},"end":{"line":26,"column":5}},"type":"if","locations":[{"start":{"line":19,"column":4},"end":{"line":26,"column":5}},{"start":{"line":19,"column":4},"end":{"line":26,"column":5}}],"line":19},"4":{"loc":{"start":{"line":21,"column":8},"end":{"line":23,"column":9}},"type":"if","locations":[{"start":{"line":21,"column":8},"end":{"line":23,"column":9}},{"start":{"line":21,"column":8},"end":{"line":23,"column":9}}],"line":21},"5":{"loc":{"start":{"line":21,"column":12},"end":{"line":21,"column":84}},"type":"binary-expr","locations":[{"start":{"line":21,"column":12},"end":{"line":21,"column":32}},{"start":{"line":21,"column":36},"end":{"line":21,"column":84}}],"line":21},"6":{"loc":{"start":{"line":27,"column":4},"end":{"line":37,"column":5}},"type":"if","locations":[{"start":{"line":27,"column":4},"end":{"line":37,"column":5}},{"start":{"line":27,"column":4},"end":{"line":37,"column":5}}],"line":27},"7":{"loc":{"start":{"line":29,"column":8},"end":{"line":31,"column":9}},"type":"if","locations":[{"start":{"line":29,"column":8},"end":{"line":31,"column":9}},{"start":{"line":29,"column":8},"end":{"line":31,"column":9}}],"line":29},"8":{"loc":{"start":{"line":33,"column":8},"end":{"line":35,"column":9}},"type":"if","locations":[{"start":{"line":33,"column":8},"end":{"line":35,"column":9}},{"start":{"line":33,"column":8},"end":{"line":35,"column":9}}],"line":33}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":1},"f":{"0":0,"1":0,"2":0,"3":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/reducers/player-state-reducer.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/reducers/player-state-reducer.ts"],"names":[],"mappings":";;;AACA,0EAAqE;AACrE,iDAA6C;AAC7C,qDAAiD;AACjD,gEAAmF;AAKnF,SAAgB,kBAAkB,CAAC,KAAgB,EAAE,KAAY,EAAE,MAAc;IAE/E,IAAI,MAAM,YAAY,oCAAkB,EAAE;QACxC,MAAM,MAAM,GAAG,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,KAAK,MAAM,CAAC,EAAE,CAAC,CAAC;QAC3D,IAAI,MAAM,KAAK,SAAS,IAAI,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,SAAS,EAAE;YACnE,MAAM,IAAI,sBAAS,CAAC,0BAAW,CAAC,cAAc,CAAC,CAAC;SACjD;QAED,MAAM,IAAI,GAAG,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QACvC,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;QACpD,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC;QAE/B,OAAO,KAAK,CAAC;KACd;IAED,IAAI,MAAM,YAAY,mCAAiB,EAAE;QAEvC,MAAM,MAAM,GAAG,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,KAAK,MAAM,CAAC,EAAE,CAAC,CAAC;QAC3D,IAAI,MAAM,KAAK,SAAS,IAAI,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,KAAK,MAAM,CAAC,KAAK,CAAC,MAAM,EAAE;YAC5E,MAAM,IAAI,sBAAS,CAAC,0BAAW,CAAC,cAAc,CAAC,CAAC;SACjD;QAED,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;QAErC,OAAO,KAAK,CAAC;KACd;IAED,IAAI,MAAM,YAAY,yCAAkB,EAAE;QAExC,MAAM,MAAM,GAAG,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,KAAK,MAAM,CAAC,EAAE,CAAC,CAAC;QAC3D,IAAI,MAAM,KAAK,SAAS,EAAE;YACxB,MAAM,IAAI,sBAAS,CAAC,0BAAW,CAAC,cAAc,CAAC,CAAC;SACjD;QAED,MAAM,CAAC,UAAU,GAAG,MAAM,CAAC,UAAU,CAAC;QAEtC,IAAI,MAAM,CAAC,GAAG,EAAE;YACd,KAAK,CAAC,GAAG,CAAC,KAAK,EAAE,MAAM,CAAC,GAAG,CAAC,OAAO,EAAE,MAAM,CAAC,GAAG,CAAC,MAAM,EAAE,MAAM,CAAC,EAAE,CAAC,CAAC;SACpE;QAED,OAAO,KAAK,CAAC;KACd;IAED,OAAO,KAAK,CAAC;AACf,CAAC;AA5CD,gDA4CC","sourcesContent":["import { Action } from '../actions/action';\nimport { ChangeAvatarAction } from '../actions/change-avatar-action';\nimport { GameError } from '../../game-error';\nimport { GameMessage } from '../../game-message';\nimport { ReorderBenchAction, ReorderHandAction } from '../actions/reorder-actions';\nimport { State } from '../state/state';\nimport { StoreLike } from '../store-like';\n\n\nexport function playerStateReducer(store: StoreLike, state: State, action: Action): State {\n\n  if (action instanceof ReorderBenchAction) {\n    const player = state.players.find(p => p.id === action.id);\n    if (player === undefined || player.bench[action.from] === undefined) {\n      throw new GameError(GameMessage.ILLEGAL_ACTION);\n    }\n\n    const temp = player.bench[action.from];\n    player.bench[action.from] = player.bench[action.to];\n    player.bench[action.to] = temp;\n\n    return state;\n  }\n\n  if (action instanceof ReorderHandAction) {\n    \n    const player = state.players.find(p => p.id === action.id);\n    if (player === undefined || player.hand.cards.length !== action.order.length) {\n      throw new GameError(GameMessage.ILLEGAL_ACTION);\n    }\n\n    player.hand.applyOrder(action.order);\n\n    return state;\n  }\n\n  if (action instanceof ChangeAvatarAction) {\n\n    const player = state.players.find(p => p.id === action.id);\n    if (player === undefined) {\n      throw new GameError(GameMessage.ILLEGAL_ACTION);\n    }\n\n    player.avatarName = action.avatarName;\n\n    if (action.log) {\n      store.log(state, action.log.message, action.log.params, player.id);\n    }\n\n    return state;\n  }\n\n  return state;\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"7af889b0355ae5db05a840e19186768ce2d2cdad","contentHash":"9504d2cf204c847bc02746f92c015258c07ea60ba81997d2e11c1172986b29ed"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/effect-reducers/retreat-effect.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/effect-reducers/retreat-effect.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":32}},"2":{"start":{"line":4,"column":31},"end":{"line":4,"column":73}},"3":{"start":{"line":5,"column":21},"end":{"line":5,"column":48}},"4":{"start":{"line":6,"column":23},"end":{"line":6,"column":52}},"5":{"start":{"line":7,"column":23},"end":{"line":7,"column":57}},"6":{"start":{"line":8,"column":22},"end":{"line":8,"column":47}},"7":{"start":{"line":9,"column":24},"end":{"line":9,"column":59}},"8":{"start":{"line":10,"column":21},"end":{"line":10,"column":50}},"9":{"start":{"line":12,"column":19},"end":{"line":12,"column":32}},"10":{"start":{"line":13,"column":26},"end":{"line":13,"column":56}},"11":{"start":{"line":14,"column":27},"end":{"line":14,"column":75}},"12":{"start":{"line":15,"column":4},"end":{"line":17,"column":5}},"13":{"start":{"line":16,"column":8},"end":{"line":16,"column":15}},"14":{"start":{"line":18,"column":4},"end":{"line":22,"column":7}},"15":{"start":{"line":23,"column":4},"end":{"line":23,"column":38}},"16":{"start":{"line":24,"column":4},"end":{"line":24,"column":58}},"17":{"start":{"line":28,"column":4},"end":{"line":65,"column":5}},"18":{"start":{"line":29,"column":23},"end":{"line":29,"column":36}},"19":{"start":{"line":30,"column":8},"end":{"line":32,"column":9}},"20":{"start":{"line":31,"column":12},"end":{"line":31,"column":88}},"21":{"start":{"line":33,"column":19},"end":{"line":33,"column":50}},"22":{"start":{"line":34,"column":8},"end":{"line":36,"column":9}},"23":{"start":{"line":35,"column":12},"end":{"line":35,"column":102}},"24":{"start":{"line":37,"column":8},"end":{"line":39,"column":9}},"25":{"start":{"line":38,"column":12},"end":{"line":38,"column":94}},"26":{"start":{"line":40,"column":33},"end":{"line":40,"column":90}},"27":{"start":{"line":41,"column":8},"end":{"line":41,"column":60}},"28":{"start":{"line":42,"column":8},"end":{"line":45,"column":9}},"29":{"start":{"line":43,"column":12},"end":{"line":43,"column":49}},"30":{"start":{"line":44,"column":12},"end":{"line":44,"column":25}},"31":{"start":{"line":46,"column":36},"end":{"line":46,"column":89}},"32":{"start":{"line":47,"column":8},"end":{"line":47,"column":63}},"33":{"start":{"line":48,"column":31},"end":{"line":48,"column":127}},"34":{"start":{"line":49,"column":8},"end":{"line":51,"column":9}},"35":{"start":{"line":50,"column":12},"end":{"line":50,"column":91}},"36":{"start":{"line":52,"column":8},"end":{"line":64,"column":11}},"37":{"start":{"line":53,"column":12},"end":{"line":55,"column":13}},"38":{"start":{"line":54,"column":16},"end":{"line":54,"column":23}},"39":{"start":{"line":56,"column":34},"end":{"line":56,"column":64}},"40":{"start":{"line":57,"column":35},"end":{"line":57,"column":83}},"41":{"start":{"line":58,"column":12},"end":{"line":60,"column":13}},"42":{"start":{"line":59,"column":16},"end":{"line":59,"column":23}},"43":{"start":{"line":61,"column":26},"end":{"line":61,"column":49}},"44":{"start":{"line":61,"column":42},"end":{"line":61,"column":48}},"45":{"start":{"line":62,"column":12},"end":{"line":62,"column":61}},"46":{"start":{"line":63,"column":12},"end":{"line":63,"column":49}},"47":{"start":{"line":66,"column":4},"end":{"line":66,"column":17}},"48":{"start":{"line":68,"column":0},"end":{"line":68,"column":40}}},"fnMap":{"0":{"name":"retreatPokemon","decl":{"start":{"line":11,"column":9},"end":{"line":11,"column":23}},"loc":{"start":{"line":11,"column":46},"end":{"line":25,"column":1}},"line":11},"1":{"name":"retreatReducer","decl":{"start":{"line":26,"column":9},"end":{"line":26,"column":23}},"loc":{"start":{"line":26,"column":46},"end":{"line":67,"column":1}},"line":26},"2":{"name":"(anonymous_2)","decl":{"start":{"line":52,"column":200},"end":{"line":52,"column":201}},"loc":{"start":{"line":52,"column":210},"end":{"line":64,"column":9}},"line":52},"3":{"name":"(anonymous_3)","decl":{"start":{"line":61,"column":37},"end":{"line":61,"column":38}},"loc":{"start":{"line":61,"column":42},"end":{"line":61,"column":48}},"line":61}},"branchMap":{"0":{"loc":{"start":{"line":15,"column":4},"end":{"line":17,"column":5}},"type":"if","locations":[{"start":{"line":15,"column":4},"end":{"line":17,"column":5}},{"start":{"line":15,"column":4},"end":{"line":17,"column":5}}],"line":15},"1":{"loc":{"start":{"line":15,"column":8},"end":{"line":15,"column":67}},"type":"binary-expr","locations":[{"start":{"line":15,"column":8},"end":{"line":15,"column":35}},{"start":{"line":15,"column":39},"end":{"line":15,"column":67}}],"line":15},"2":{"loc":{"start":{"line":28,"column":4},"end":{"line":65,"column":5}},"type":"if","locations":[{"start":{"line":28,"column":4},"end":{"line":65,"column":5}},{"start":{"line":28,"column":4},"end":{"line":65,"column":5}}],"line":28},"3":{"loc":{"start":{"line":30,"column":8},"end":{"line":32,"column":9}},"type":"if","locations":[{"start":{"line":30,"column":8},"end":{"line":32,"column":9}},{"start":{"line":30,"column":8},"end":{"line":32,"column":9}}],"line":30},"4":{"loc":{"start":{"line":34,"column":8},"end":{"line":36,"column":9}},"type":"if","locations":[{"start":{"line":34,"column":8},"end":{"line":36,"column":9}},{"start":{"line":34,"column":8},"end":{"line":36,"column":9}}],"line":34},"5":{"loc":{"start":{"line":34,"column":12},"end":{"line":34,"column":117}},"type":"binary-expr","locations":[{"start":{"line":34,"column":12},"end":{"line":34,"column":64}},{"start":{"line":34,"column":68},"end":{"line":34,"column":117}}],"line":34},"6":{"loc":{"start":{"line":37,"column":8},"end":{"line":39,"column":9}},"type":"if","locations":[{"start":{"line":37,"column":8},"end":{"line":39,"column":9}},{"start":{"line":37,"column":8},"end":{"line":39,"column":9}}],"line":37},"7":{"loc":{"start":{"line":42,"column":8},"end":{"line":45,"column":9}},"type":"if","locations":[{"start":{"line":42,"column":8},"end":{"line":45,"column":9}},{"start":{"line":42,"column":8},"end":{"line":45,"column":9}}],"line":42},"8":{"loc":{"start":{"line":49,"column":8},"end":{"line":51,"column":9}},"type":"if","locations":[{"start":{"line":49,"column":8},"end":{"line":51,"column":9}},{"start":{"line":49,"column":8},"end":{"line":51,"column":9}}],"line":49},"9":{"loc":{"start":{"line":53,"column":12},"end":{"line":55,"column":13}},"type":"if","locations":[{"start":{"line":53,"column":12},"end":{"line":55,"column":13}},{"start":{"line":53,"column":12},"end":{"line":55,"column":13}}],"line":53},"10":{"loc":{"start":{"line":58,"column":12},"end":{"line":60,"column":13}},"type":"if","locations":[{"start":{"line":58,"column":12},"end":{"line":60,"column":13}},{"start":{"line":58,"column":12},"end":{"line":60,"column":13}}],"line":58},"11":{"loc":{"start":{"line":58,"column":16},"end":{"line":58,"column":75}},"type":"binary-expr","locations":[{"start":{"line":58,"column":16},"end":{"line":58,"column":43}},{"start":{"line":58,"column":47},"end":{"line":58,"column":75}}],"line":58}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":1},"f":{"0":0,"1":0,"2":0,"3":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/effect-reducers/retreat-effect.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/effect-reducers/retreat-effect.ts"],"names":[],"mappings":";;;AAAA,0EAAqE;AACrE,iDAA6C;AAC7C,qDAA0D;AAI1D,0DAAwD;AACxD,gDAA4C;AAC5C,4DAA6F;AAC7F,mDAAsD;AAGtD,SAAS,cAAc,CAAC,KAAgB,EAAE,KAAY,EAAE,MAAqB;IAC3E,MAAM,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC;IAC7B,MAAM,aAAa,GAAG,MAAM,CAAC,MAAM,CAAC,cAAc,EAAE,CAAC;IACrD,MAAM,cAAc,GAAG,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,cAAc,EAAE,CAAC;IACxE,IAAI,aAAa,KAAK,SAAS,IAAI,cAAc,KAAK,SAAS,EAAE;QAC/D,OAAO;KACR;IAED,KAAK,CAAC,GAAG,CAAC,KAAK,EAAE,sBAAO,CAAC,mBAAmB,EAAE;QAC5C,IAAI,EAAE,MAAM,CAAC,IAAI;QACjB,MAAM,EAAE,aAAa,CAAC,IAAI;QAC1B,OAAO,EAAE,cAAc,CAAC,IAAI;KAC7B,CAAC,CAAC;IACH,MAAM,CAAC,aAAa,GAAG,KAAK,CAAC,IAAI,CAAC;IAClC,MAAM,CAAC,aAAa,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,CAAC;AACxD,CAAC;AAED,SAAgB,cAAc,CAAC,KAAgB,EAAE,KAAY,EAAE,MAAc;IAE3E,qBAAqB;IACrB,IAAI,MAAM,YAAY,4BAAa,EAAE;QACnC,MAAM,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC;QAE7B,IAAI,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,KAAK,CAAC,MAAM,KAAK,CAAC,EAAE;YACtD,MAAM,IAAI,sBAAS,CAAC,0BAAW,CAAC,cAAc,CAAC,CAAC;SACjD;QAED,MAAM,EAAE,GAAG,MAAM,CAAC,MAAM,CAAC,iBAAiB,CAAC;QAC3C,IAAI,EAAE,CAAC,QAAQ,CAAC,6BAAgB,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC,QAAQ,CAAC,6BAAgB,CAAC,MAAM,CAAC,EAAE;YACnF,MAAM,IAAI,sBAAS,CAAC,0BAAW,CAAC,4BAA4B,CAAC,CAAC;SAC/D;QAED,IAAI,MAAM,CAAC,aAAa,KAAK,KAAK,CAAC,IAAI,EAAE;YACvC,MAAM,IAAI,sBAAS,CAAC,0BAAW,CAAC,oBAAoB,CAAC,CAAC;SACvD;QAED,MAAM,gBAAgB,GAAG,IAAI,sCAAsB,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;QACnE,KAAK,GAAG,KAAK,CAAC,YAAY,CAAC,KAAK,EAAE,gBAAgB,CAAC,CAAC;QAEpD,IAAI,gBAAgB,CAAC,IAAI,CAAC,MAAM,KAAK,CAAC,EAAE;YACtC,cAAc,CAAC,KAAK,EAAE,KAAK,EAAE,MAAM,CAAC,CAAC;YACrC,OAAO,KAAK,CAAC;SACd;QAED,MAAM,mBAAmB,GAAG,IAAI,yCAAyB,CAAC,MAAM,CAAC,CAAC;QAClE,KAAK,GAAG,KAAK,CAAC,YAAY,CAAC,KAAK,EAAE,mBAAmB,CAAC,CAAC;QAEvD,MAAM,cAAc,GAAG,wBAAU,CAAC,iBAAiB,CAAC,mBAAmB,CAAC,SAAS,EAAE,gBAAgB,CAAC,IAAI,CAAC,CAAC;QAC1G,IAAI,cAAc,KAAK,KAAK,EAAE;YAC5B,MAAM,IAAI,sBAAS,CAAC,0BAAW,CAAC,iBAAiB,CAAC,CAAC;SACpD;QAED,OAAO,KAAK,CAAC,MAAM,CAAC,KAAK,EAAE,IAAI,yCAAkB,CAC/C,MAAM,CAAC,EAAE,EACT,0BAAW,CAAC,wBAAwB,EACpC,mBAAmB,CAAC,SAAS,EAC7B,gBAAgB,CAAC,IAAI,CACtB,EAAE,MAAM,CAAC,EAAE;YACV,IAAI,MAAM,KAAK,IAAI,EAAE;gBACnB,OAAO,CAAC,sBAAsB;aAC/B;YACD,MAAM,aAAa,GAAG,MAAM,CAAC,MAAM,CAAC,cAAc,EAAE,CAAC;YACrD,MAAM,cAAc,GAAG,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,cAAc,EAAE,CAAC;YACxE,IAAI,aAAa,KAAK,SAAS,IAAI,cAAc,KAAK,SAAS,EAAE;gBAC/D,OAAO;aACR;YAED,MAAM,KAAK,GAAG,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;YACtC,MAAM,CAAC,MAAM,CAAC,WAAW,CAAC,KAAK,EAAE,MAAM,CAAC,OAAO,CAAC,CAAC;YACjD,cAAc,CAAC,KAAK,EAAE,KAAK,EAAE,MAAM,CAAC,CAAC;QACvC,CAAC,CAAC,CAAC;KACJ;IAED,OAAO,KAAK,CAAC;AACf,CAAC;AAzDD,wCAyDC","sourcesContent":["import { ChooseEnergyPrompt } from '../prompts/choose-energy-prompt';\nimport { GameError } from '../../game-error';\nimport { GameMessage, GameLog } from '../../game-message';\nimport { Effect } from '../effects/effect';\nimport { State } from '../state/state';\nimport { StoreLike } from '../store-like';\nimport { RetreatEffect } from '../effects/game-effects';\nimport { StateUtils } from '../state-utils';\nimport { CheckRetreatCostEffect, CheckProvidedEnergyEffect } from '../effects/check-effects';\nimport { SpecialCondition } from '../card/card-types';\n\n\nfunction retreatPokemon(store: StoreLike, state: State, effect: RetreatEffect) {\n  const player = effect.player;\n  const activePokemon = player.active.getPokemonCard();\n  const benchedPokemon = player.bench[effect.benchIndex].getPokemonCard();\n  if (activePokemon === undefined || benchedPokemon === undefined) {\n    return;\n  }\n\n  store.log(state, GameLog.LOG_PLAYER_RETREATS, {\n    name: player.name,\n    active: activePokemon.name,\n    benched: benchedPokemon.name\n  });\n  player.retreatedTurn = state.turn;\n  player.switchPokemon(player.bench[effect.benchIndex]);\n}\n\nexport function retreatReducer(store: StoreLike, state: State, effect: Effect): State {\n\n  /* Retreat pokemon */\n  if (effect instanceof RetreatEffect) {\n    const player = effect.player;\n\n    if (player.bench[effect.benchIndex].cards.length === 0) {\n      throw new GameError(GameMessage.INVALID_TARGET);\n    }\n\n    const sp = player.active.specialConditions;\n    if (sp.includes(SpecialCondition.PARALYZED) || sp.includes(SpecialCondition.ASLEEP)) {\n      throw new GameError(GameMessage.BLOCKED_BY_SPECIAL_CONDITION);\n    }\n\n    if (player.retreatedTurn === state.turn) {\n      throw new GameError(GameMessage.RETREAT_ALREADY_USED);\n    }\n\n    const checkRetreatCost = new CheckRetreatCostEffect(effect.player);\n    state = store.reduceEffect(state, checkRetreatCost);\n\n    if (checkRetreatCost.cost.length === 0) {\n      retreatPokemon(store, state, effect);\n      return state;\n    }\n\n    const checkProvidedEnergy = new CheckProvidedEnergyEffect(player);\n    state = store.reduceEffect(state, checkProvidedEnergy);\n\n    const enoughEnergies = StateUtils.checkEnoughEnergy(checkProvidedEnergy.energyMap, checkRetreatCost.cost);\n    if (enoughEnergies === false) {\n      throw new GameError(GameMessage.NOT_ENOUGH_ENERGY);\n    }\n\n    return store.prompt(state, new ChooseEnergyPrompt(\n      player.id,\n      GameMessage.CHOOSE_POKEMON_TO_SWITCH,\n      checkProvidedEnergy.energyMap,\n      checkRetreatCost.cost\n    ), energy => {\n      if (energy === null) {\n        return; // operation cancelled\n      }\n      const activePokemon = player.active.getPokemonCard();\n      const benchedPokemon = player.bench[effect.benchIndex].getPokemonCard();\n      if (activePokemon === undefined || benchedPokemon === undefined) {\n        return;\n      }\n\n      const cards = energy.map(e => e.card);\n      player.active.moveCardsTo(cards, player.discard);\n      retreatPokemon(store, state, effect);\n    });\n  }\n\n  return state;\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"fa1f22b61c54fc3b50ef9db856c88c2963aef74d","contentHash":"17087e56ce4f0a1d5d0c02ccf9cc11d2ba9d7c53fb804776d6a3377f572722eb"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/reducers/setup-reducer.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/reducers/setup-reducer.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":35}},"2":{"start":{"line":4,"column":28},"end":{"line":4,"column":67}},"3":{"start":{"line":5,"column":23},"end":{"line":5,"column":57}},"4":{"start":{"line":6,"column":20},"end":{"line":6,"column":49}},"5":{"start":{"line":7,"column":27},"end":{"line":7,"column":65}},"6":{"start":{"line":8,"column":30},"end":{"line":8,"column":71}},"7":{"start":{"line":9,"column":24},"end":{"line":9,"column":60}},"8":{"start":{"line":10,"column":31},"end":{"line":10,"column":73}},"9":{"start":{"line":11,"column":31},"end":{"line":11,"column":73}},"10":{"start":{"line":12,"column":17},"end":{"line":12,"column":43}},"11":{"start":{"line":13,"column":28},"end":{"line":13,"column":67}},"12":{"start":{"line":14,"column":25},"end":{"line":14,"column":61}},"13":{"start":{"line":15,"column":16},"end":{"line":15,"column":41}},"14":{"start":{"line":16,"column":21},"end":{"line":16,"column":48}},"15":{"start":{"line":17,"column":23},"end":{"line":17,"column":52}},"16":{"start":{"line":18,"column":27},"end":{"line":18,"column":65}},"17":{"start":{"line":19,"column":28},"end":{"line":19,"column":65}},"18":{"start":{"line":20,"column":21},"end":{"line":20,"column":50}},"19":{"start":{"line":21,"column":29},"end":{"line":21,"column":69}},"20":{"start":{"line":22,"column":23},"end":{"line":22,"column":65}},"21":{"start":{"line":23,"column":28},"end":{"line":23,"column":75}},"22":{"start":{"line":25,"column":4},"end":{"line":27,"column":5}},"23":{"start":{"line":26,"column":8},"end":{"line":26,"column":15}},"24":{"start":{"line":28,"column":4},"end":{"line":28,"column":52}},"25":{"start":{"line":29,"column":4},"end":{"line":31,"column":5}},"26":{"start":{"line":29,"column":17},"end":{"line":29,"column":18}},"27":{"start":{"line":30,"column":8},"end":{"line":30,"column":62}},"28":{"start":{"line":32,"column":4},"end":{"line":34,"column":5}},"29":{"start":{"line":32,"column":17},"end":{"line":32,"column":18}},"30":{"start":{"line":33,"column":8},"end":{"line":33,"column":48}},"31":{"start":{"line":37,"column":25},"end":{"line":37,"column":103}},"32":{"start":{"line":38,"column":31},"end":{"line":38,"column":69}},"33":{"start":{"line":39,"column":19},"end":{"line":39,"column":35}},"34":{"start":{"line":40,"column":21},"end":{"line":40,"column":37}},"35":{"start":{"line":41,"column":25},"end":{"line":41,"column":30}},"36":{"start":{"line":42,"column":27},"end":{"line":42,"column":32}},"37":{"start":{"line":43,"column":4},"end":{"line":86,"column":5}},"38":{"start":{"line":44,"column":8},"end":{"line":52,"column":9}},"39":{"start":{"line":45,"column":12},"end":{"line":45,"column":44}},"40":{"start":{"line":46,"column":12},"end":{"line":51,"column":15}},"41":{"start":{"line":47,"column":16},"end":{"line":47,"column":46}},"42":{"start":{"line":48,"column":16},"end":{"line":48,"column":51}},"43":{"start":{"line":49,"column":16},"end":{"line":49,"column":69}},"44":{"start":{"line":50,"column":16},"end":{"line":50,"column":23}},"45":{"start":{"line":53,"column":8},"end":{"line":61,"column":9}},"46":{"start":{"line":54,"column":12},"end":{"line":54,"column":48}},"47":{"start":{"line":55,"column":12},"end":{"line":60,"column":15}},"48":{"start":{"line":56,"column":16},"end":{"line":56,"column":48}},"49":{"start":{"line":57,"column":16},"end":{"line":57,"column":55}},"50":{"start":{"line":58,"column":16},"end":{"line":58,"column":73}},"51":{"start":{"line":59,"column":16},"end":{"line":59,"column":23}},"52":{"start":{"line":62,"column":8},"end":{"line":73,"column":9}},"53":{"start":{"line":63,"column":12},"end":{"line":63,"column":105}},"54":{"start":{"line":64,"column":12},"end":{"line":72,"column":15}},"55":{"start":{"line":68,"column":16},"end":{"line":70,"column":17}},"56":{"start":{"line":69,"column":20},"end":{"line":69,"column":55}},"57":{"start":{"line":71,"column":16},"end":{"line":71,"column":23}},"58":{"start":{"line":74,"column":8},"end":{"line":85,"column":9}},"59":{"start":{"line":75,"column":12},"end":{"line":75,"column":103}},"60":{"start":{"line":76,"column":12},"end":{"line":84,"column":15}},"61":{"start":{"line":80,"column":16},"end":{"line":82,"column":17}},"62":{"start":{"line":81,"column":20},"end":{"line":81,"column":59}},"63":{"start":{"line":83,"column":16},"end":{"line":83,"column":23}},"64":{"start":{"line":87,"column":4},"end":{"line":94,"column":7}},"65":{"start":{"line":91,"column":8},"end":{"line":91,"column":56}},"66":{"start":{"line":92,"column":8},"end":{"line":92,"column":58}},"67":{"start":{"line":93,"column":8},"end":{"line":93,"column":15}},"68":{"start":{"line":95,"column":28},"end":{"line":95,"column":70}},"69":{"start":{"line":96,"column":4},"end":{"line":96,"column":47}},"70":{"start":{"line":97,"column":4},"end":{"line":106,"column":5}},"71":{"start":{"line":98,"column":8},"end":{"line":98,"column":75}},"72":{"start":{"line":101,"column":31},"end":{"line":101,"column":129}},"73":{"start":{"line":102,"column":8},"end":{"line":105,"column":11}},"74":{"start":{"line":103,"column":12},"end":{"line":103,"column":51}},"75":{"start":{"line":104,"column":12},"end":{"line":104,"column":19}},"76":{"start":{"line":108,"column":18},"end":{"line":108,"column":51}},"77":{"start":{"line":109,"column":19},"end":{"line":109,"column":60}},"78":{"start":{"line":110,"column":4},"end":{"line":110,"column":119}},"79":{"start":{"line":110,"column":84},"end":{"line":110,"column":115}},"80":{"start":{"line":111,"column":4},"end":{"line":111,"column":117}},"81":{"start":{"line":111,"column":82},"end":{"line":111,"column":113}},"82":{"start":{"line":112,"column":4},"end":{"line":112,"column":58}},"83":{"start":{"line":115,"column":19},"end":{"line":115,"column":40}},"84":{"start":{"line":116,"column":4},"end":{"line":116,"column":19}},"85":{"start":{"line":117,"column":4},"end":{"line":117,"column":23}},"86":{"start":{"line":119,"column":4},"end":{"line":123,"column":5}},"87":{"start":{"line":119,"column":17},"end":{"line":119,"column":18}},"88":{"start":{"line":120,"column":22},"end":{"line":120,"column":48}},"89":{"start":{"line":121,"column":8},"end":{"line":121,"column":30}},"90":{"start":{"line":122,"column":8},"end":{"line":122,"column":34}},"91":{"start":{"line":125,"column":4},"end":{"line":129,"column":5}},"92":{"start":{"line":125,"column":17},"end":{"line":125,"column":18}},"93":{"start":{"line":126,"column":22},"end":{"line":126,"column":63}},"94":{"start":{"line":127,"column":8},"end":{"line":127,"column":30}},"95":{"start":{"line":128,"column":8},"end":{"line":128,"column":33}},"96":{"start":{"line":130,"column":4},"end":{"line":130,"column":34}},"97":{"start":{"line":131,"column":4},"end":{"line":131,"column":35}},"98":{"start":{"line":132,"column":4},"end":{"line":132,"column":35}},"99":{"start":{"line":133,"column":4},"end":{"line":133,"column":37}},"100":{"start":{"line":134,"column":4},"end":{"line":134,"column":18}},"101":{"start":{"line":137,"column":4},"end":{"line":197,"column":5}},"102":{"start":{"line":138,"column":8},"end":{"line":163,"column":9}},"103":{"start":{"line":139,"column":12},"end":{"line":141,"column":13}},"104":{"start":{"line":140,"column":16},"end":{"line":140,"column":97}},"105":{"start":{"line":142,"column":12},"end":{"line":144,"column":13}},"106":{"start":{"line":143,"column":16},"end":{"line":143,"column":93}},"107":{"start":{"line":145,"column":33},"end":{"line":145,"column":78}},"108":{"start":{"line":146,"column":12},"end":{"line":148,"column":13}},"109":{"start":{"line":147,"column":16},"end":{"line":147,"column":90}},"110":{"start":{"line":149,"column":27},"end":{"line":149,"column":69}},"111":{"start":{"line":150,"column":12},"end":{"line":150,"column":69}},"112":{"start":{"line":151,"column":12},"end":{"line":151,"column":40}},"113":{"start":{"line":152,"column":12},"end":{"line":155,"column":15}},"114":{"start":{"line":153,"column":16},"end":{"line":153,"column":49}},"115":{"start":{"line":154,"column":16},"end":{"line":154,"column":50}},"116":{"start":{"line":156,"column":12},"end":{"line":156,"column":39}},"117":{"start":{"line":157,"column":12},"end":{"line":161,"column":13}},"118":{"start":{"line":158,"column":16},"end":{"line":158,"column":54}},"119":{"start":{"line":159,"column":34},"end":{"line":159,"column":81}},"120":{"start":{"line":159,"column":50},"end":{"line":159,"column":66}},"121":{"start":{"line":160,"column":16},"end":{"line":160,"column":46}},"122":{"start":{"line":162,"column":12},"end":{"line":162,"column":25}},"123":{"start":{"line":164,"column":8},"end":{"line":196,"column":9}},"124":{"start":{"line":165,"column":12},"end":{"line":167,"column":13}},"125":{"start":{"line":166,"column":16},"end":{"line":166,"column":97}},"126":{"start":{"line":168,"column":12},"end":{"line":170,"column":13}},"127":{"start":{"line":169,"column":16},"end":{"line":169,"column":93}},"128":{"start":{"line":171,"column":27},"end":{"line":171,"column":69}},"129":{"start":{"line":172,"column":12},"end":{"line":172,"column":39}},"130":{"start":{"line":173,"column":12},"end":{"line":195,"column":15}},"131":{"start":{"line":174,"column":16},"end":{"line":179,"column":17}},"132":{"start":{"line":175,"column":20},"end":{"line":175,"column":112}},"133":{"start":{"line":176,"column":35},"end":{"line":176,"column":58}},"134":{"start":{"line":177,"column":20},"end":{"line":177,"column":73}},"135":{"start":{"line":178,"column":20},"end":{"line":178,"column":27}},"136":{"start":{"line":180,"column":37},"end":{"line":180,"column":75}},"137":{"start":{"line":181,"column":16},"end":{"line":183,"column":17}},"138":{"start":{"line":182,"column":20},"end":{"line":182,"column":94}},"139":{"start":{"line":184,"column":16},"end":{"line":184,"column":66}},"140":{"start":{"line":185,"column":16},"end":{"line":185,"column":44}},"141":{"start":{"line":186,"column":16},"end":{"line":189,"column":19}},"142":{"start":{"line":187,"column":20},"end":{"line":187,"column":53}},"143":{"start":{"line":188,"column":20},"end":{"line":188,"column":54}},"144":{"start":{"line":190,"column":16},"end":{"line":194,"column":17}},"145":{"start":{"line":191,"column":20},"end":{"line":191,"column":58}},"146":{"start":{"line":192,"column":38},"end":{"line":192,"column":85}},"147":{"start":{"line":192,"column":54},"end":{"line":192,"column":70}},"148":{"start":{"line":193,"column":20},"end":{"line":193,"column":50}},"149":{"start":{"line":198,"column":4},"end":{"line":198,"column":17}},"150":{"start":{"line":200,"column":0},"end":{"line":200,"column":46}}},"fnMap":{"0":{"name":"putStartingPokemonsAndPrizes","decl":{"start":{"line":24,"column":9},"end":{"line":24,"column":37}},"loc":{"start":{"line":24,"column":53},"end":{"line":35,"column":1}},"line":24},"1":{"name":"setupGame","decl":{"start":{"line":36,"column":10},"end":{"line":36,"column":19}},"loc":{"start":{"line":36,"column":40},"end":{"line":113,"column":1}},"line":36},"2":{"name":"(anonymous_2)","decl":{"start":{"line":46,"column":89},"end":{"line":46,"column":90}},"loc":{"start":{"line":46,"column":98},"end":{"line":51,"column":13}},"line":46},"3":{"name":"(anonymous_3)","decl":{"start":{"line":55,"column":91},"end":{"line":55,"column":92}},"loc":{"start":{"line":55,"column":100},"end":{"line":60,"column":13}},"line":55},"4":{"name":"(anonymous_4)","decl":{"start":{"line":67,"column":15},"end":{"line":67,"column":16}},"loc":{"start":{"line":67,"column":26},"end":{"line":72,"column":13}},"line":67},"5":{"name":"(anonymous_5)","decl":{"start":{"line":79,"column":15},"end":{"line":79,"column":16}},"loc":{"start":{"line":79,"column":26},"end":{"line":84,"column":13}},"line":79},"6":{"name":"(anonymous_6)","decl":{"start":{"line":90,"column":7},"end":{"line":90,"column":8}},"loc":{"start":{"line":90,"column":17},"end":{"line":94,"column":5}},"line":90},"7":{"name":"(anonymous_7)","decl":{"start":{"line":102,"column":50},"end":{"line":102,"column":51}},"loc":{"start":{"line":102,"column":63},"end":{"line":105,"column":9}},"line":102},"8":{"name":"(anonymous_8)","decl":{"start":{"line":110,"column":70},"end":{"line":110,"column":71}},"loc":{"start":{"line":110,"column":82},"end":{"line":110,"column":117}},"line":110},"9":{"name":"(anonymous_9)","decl":{"start":{"line":111,"column":68},"end":{"line":111,"column":69}},"loc":{"start":{"line":111,"column":80},"end":{"line":111,"column":115}},"line":111},"10":{"name":"createPlayer","decl":{"start":{"line":114,"column":9},"end":{"line":114,"column":21}},"loc":{"start":{"line":114,"column":32},"end":{"line":135,"column":1}},"line":114},"11":{"name":"setupPhaseReducer","decl":{"start":{"line":136,"column":9},"end":{"line":136,"column":26}},"loc":{"start":{"line":136,"column":49},"end":{"line":199,"column":1}},"line":136},"12":{"name":"(anonymous_12)","decl":{"start":{"line":152,"column":38},"end":{"line":152,"column":39}},"loc":{"start":{"line":152,"column":43},"end":{"line":155,"column":13}},"line":152},"13":{"name":"(anonymous_13)","decl":{"start":{"line":159,"column":44},"end":{"line":159,"column":45}},"loc":{"start":{"line":159,"column":50},"end":{"line":159,"column":66}},"line":159},"14":{"name":"(anonymous_14)","decl":{"start":{"line":173,"column":145},"end":{"line":173,"column":146}},"loc":{"start":{"line":173,"column":153},"end":{"line":195,"column":13}},"line":173},"15":{"name":"(anonymous_15)","decl":{"start":{"line":186,"column":42},"end":{"line":186,"column":43}},"loc":{"start":{"line":186,"column":47},"end":{"line":189,"column":17}},"line":186},"16":{"name":"(anonymous_16)","decl":{"start":{"line":192,"column":48},"end":{"line":192,"column":49}},"loc":{"start":{"line":192,"column":54},"end":{"line":192,"column":70}},"line":192}},"branchMap":{"0":{"loc":{"start":{"line":25,"column":4},"end":{"line":27,"column":5}},"type":"if","locations":[{"start":{"line":25,"column":4},"end":{"line":27,"column":5}},{"start":{"line":25,"column":4},"end":{"line":27,"column":5}}],"line":25},"1":{"loc":{"start":{"line":43,"column":11},"end":{"line":43,"column":47}},"type":"binary-expr","locations":[{"start":{"line":43,"column":11},"end":{"line":43,"column":26}},{"start":{"line":43,"column":30},"end":{"line":43,"column":47}}],"line":43},"2":{"loc":{"start":{"line":44,"column":8},"end":{"line":52,"column":9}},"type":"if","locations":[{"start":{"line":44,"column":8},"end":{"line":52,"column":9}},{"start":{"line":44,"column":8},"end":{"line":52,"column":9}}],"line":44},"3":{"loc":{"start":{"line":53,"column":8},"end":{"line":61,"column":9}},"type":"if","locations":[{"start":{"line":53,"column":8},"end":{"line":61,"column":9}},{"start":{"line":53,"column":8},"end":{"line":61,"column":9}}],"line":53},"4":{"loc":{"start":{"line":62,"column":8},"end":{"line":73,"column":9}},"type":"if","locations":[{"start":{"line":62,"column":8},"end":{"line":73,"column":9}},{"start":{"line":62,"column":8},"end":{"line":73,"column":9}}],"line":62},"5":{"loc":{"start":{"line":62,"column":12},"end":{"line":62,"column":47}},"type":"binary-expr","locations":[{"start":{"line":62,"column":12},"end":{"line":62,"column":26}},{"start":{"line":62,"column":30},"end":{"line":62,"column":47}}],"line":62},"6":{"loc":{"start":{"line":68,"column":16},"end":{"line":70,"column":17}},"type":"if","locations":[{"start":{"line":68,"column":16},"end":{"line":70,"column":17}},{"start":{"line":68,"column":16},"end":{"line":70,"column":17}}],"line":68},"7":{"loc":{"start":{"line":74,"column":8},"end":{"line":85,"column":9}},"type":"if","locations":[{"start":{"line":74,"column":8},"end":{"line":85,"column":9}},{"start":{"line":74,"column":8},"end":{"line":85,"column":9}}],"line":74},"8":{"loc":{"start":{"line":74,"column":12},"end":{"line":74,"column":47}},"type":"binary-expr","locations":[{"start":{"line":74,"column":12},"end":{"line":74,"column":27}},{"start":{"line":74,"column":31},"end":{"line":74,"column":47}}],"line":74},"9":{"loc":{"start":{"line":80,"column":16},"end":{"line":82,"column":17}},"type":"if","locations":[{"start":{"line":80,"column":16},"end":{"line":82,"column":17}},{"start":{"line":80,"column":16},"end":{"line":82,"column":17}}],"line":80},"10":{"loc":{"start":{"line":97,"column":4},"end":{"line":106,"column":5}},"type":"if","locations":[{"start":{"line":97,"column":4},"end":{"line":106,"column":5}},{"start":{"line":97,"column":4},"end":{"line":106,"column":5}}],"line":97},"11":{"loc":{"start":{"line":103,"column":33},"end":{"line":103,"column":50}},"type":"cond-expr","locations":[{"start":{"line":103,"column":45},"end":{"line":103,"column":46}},{"start":{"line":103,"column":49},"end":{"line":103,"column":50}}],"line":103},"12":{"loc":{"start":{"line":109,"column":33},"end":{"line":109,"column":59}},"type":"cond-expr","locations":[{"start":{"line":109,"column":54},"end":{"line":109,"column":55}},{"start":{"line":109,"column":58},"end":{"line":109,"column":59}}],"line":109},"13":{"loc":{"start":{"line":137,"column":4},"end":{"line":197,"column":5}},"type":"if","locations":[{"start":{"line":137,"column":4},"end":{"line":197,"column":5}},{"start":{"line":137,"column":4},"end":{"line":197,"column":5}}],"line":137},"14":{"loc":{"start":{"line":138,"column":8},"end":{"line":163,"column":9}},"type":"if","locations":[{"start":{"line":138,"column":8},"end":{"line":163,"column":9}},{"start":{"line":138,"column":8},"end":{"line":163,"column":9}}],"line":138},"15":{"loc":{"start":{"line":139,"column":12},"end":{"line":141,"column":13}},"type":"if","locations":[{"start":{"line":139,"column":12},"end":{"line":141,"column":13}},{"start":{"line":139,"column":12},"end":{"line":141,"column":13}}],"line":139},"16":{"loc":{"start":{"line":142,"column":12},"end":{"line":144,"column":13}},"type":"if","locations":[{"start":{"line":142,"column":12},"end":{"line":144,"column":13}},{"start":{"line":142,"column":12},"end":{"line":144,"column":13}}],"line":142},"17":{"loc":{"start":{"line":142,"column":16},"end":{"line":142,"column":84}},"type":"binary-expr","locations":[{"start":{"line":142,"column":16},"end":{"line":142,"column":41}},{"start":{"line":142,"column":45},"end":{"line":142,"column":84}}],"line":142},"18":{"loc":{"start":{"line":146,"column":12},"end":{"line":148,"column":13}},"type":"if","locations":[{"start":{"line":146,"column":12},"end":{"line":148,"column":13}},{"start":{"line":146,"column":12},"end":{"line":148,"column":13}}],"line":146},"19":{"loc":{"start":{"line":157,"column":12},"end":{"line":161,"column":13}},"type":"if","locations":[{"start":{"line":157,"column":12},"end":{"line":161,"column":13}},{"start":{"line":157,"column":12},"end":{"line":161,"column":13}}],"line":157},"20":{"loc":{"start":{"line":164,"column":8},"end":{"line":196,"column":9}},"type":"if","locations":[{"start":{"line":164,"column":8},"end":{"line":196,"column":9}},{"start":{"line":164,"column":8},"end":{"line":196,"column":9}}],"line":164},"21":{"loc":{"start":{"line":165,"column":12},"end":{"line":167,"column":13}},"type":"if","locations":[{"start":{"line":165,"column":12},"end":{"line":167,"column":13}},{"start":{"line":165,"column":12},"end":{"line":167,"column":13}}],"line":165},"22":{"loc":{"start":{"line":168,"column":12},"end":{"line":170,"column":13}},"type":"if","locations":[{"start":{"line":168,"column":12},"end":{"line":170,"column":13}},{"start":{"line":168,"column":12},"end":{"line":170,"column":13}}],"line":168},"23":{"loc":{"start":{"line":168,"column":16},"end":{"line":168,"column":84}},"type":"binary-expr","locations":[{"start":{"line":168,"column":16},"end":{"line":168,"column":41}},{"start":{"line":168,"column":45},"end":{"line":168,"column":84}}],"line":168},"24":{"loc":{"start":{"line":174,"column":16},"end":{"line":179,"column":17}},"type":"if","locations":[{"start":{"line":174,"column":16},"end":{"line":179,"column":17}},{"start":{"line":174,"column":16},"end":{"line":179,"column":17}}],"line":174},"25":{"loc":{"start":{"line":181,"column":16},"end":{"line":183,"column":17}},"type":"if","locations":[{"start":{"line":181,"column":16},"end":{"line":183,"column":17}},{"start":{"line":181,"column":16},"end":{"line":183,"column":17}}],"line":181},"26":{"loc":{"start":{"line":190,"column":16},"end":{"line":194,"column":17}},"type":"if","locations":[{"start":{"line":190,"column":16},"end":{"line":194,"column":17}},{"start":{"line":190,"column":16},"end":{"line":194,"column":17}}],"line":190}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/reducers/setup-reducer.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/reducers/setup-reducer.ts"],"names":[],"mappings":"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","sourcesContent":["import { Action } from '../actions/action';\nimport { AddPlayerAction } from '../actions/add-player-action';\nimport { AlertPrompt } from '../prompts/alert-prompt';\nimport { Card } from '../card/card';\nimport { CardList } from '../state/card-list';\nimport { CoinFlipPrompt } from '../prompts/coin-flip-prompt';\nimport { ChooseCardsPrompt } from '../prompts/choose-cards-prompt';\nimport { DeckAnalyser } from '../../cards/deck-analyser';\nimport { InvitePlayerAction } from '../actions/invite-player-action';\nimport { InvitePlayerPrompt } from '../prompts/invite-player-prompt';\nimport { Player } from '../state/player';\nimport { ShowCardsPrompt } from '../prompts/show-cards-prompt';\nimport { ShuffleDeckPrompt } from '../prompts/shuffle-prompt';\nimport { State, GamePhase, GameWinner } from '../state/state';\nimport { GameError } from '../../game-error';\nimport { GameMessage, GameLog } from '../../game-message';\nimport { PlayerType } from '../actions/play-card-action';\nimport { PokemonCardList } from '../state/pokemon-card-list';\nimport { StoreLike } from '../store-like';\nimport { SuperType, Stage } from '../card/card-types';\nimport { WhoBeginsEffect } from '../effects/game-phase-effects';\nimport { endGame } from '../effect-reducers/check-effect';\nimport { initNextTurn } from '../effect-reducers/game-phase-effect';\n\n\nfunction putStartingPokemonsAndPrizes(player: Player, cards: Card[]): void {\n  if (cards.length === 0) {\n    return;\n  }\n  player.hand.moveCardTo(cards[0], player.active);\n  for (let i = 1; i < cards.length; i++) {\n    player.hand.moveCardTo(cards[i], player.bench[i - 1]);\n  }\n  for (let i = 0; i < 6; i++) {\n    player.deck.moveTo(player.prizes[i], 1);\n  }\n}\n\nfunction* setupGame(next: Function, store: StoreLike, state: State): IterableIterator<State> {\n  const basicPokemon = {superType: SuperType.POKEMON, stage: Stage.BASIC};\n  const chooseCardsOptions = { min: 1, max: 6, allowCancel: false };\n  const player = state.players[0];\n  const opponent = state.players[1];\n\n  let playerHasBasic = false;\n  let opponentHasBasic = false;\n\n  while (!playerHasBasic || !opponentHasBasic) {\n    if (!playerHasBasic) {\n      player.hand.moveTo(player.deck);\n      yield store.prompt(state, new ShuffleDeckPrompt(player.id), order => {\n        player.deck.applyOrder(order);\n        player.deck.moveTo(player.hand, 7);\n        playerHasBasic = player.hand.count(basicPokemon) > 0;\n        next();\n      });\n    }\n\n    if (!opponentHasBasic) {\n      opponent.hand.moveTo(opponent.deck);\n      yield store.prompt(state, new ShuffleDeckPrompt(opponent.id), order => {\n        opponent.deck.applyOrder(order);\n        opponent.deck.moveTo(opponent.hand, 7);\n        opponentHasBasic = opponent.hand.count(basicPokemon) > 0;\n        next();\n      });\n    }\n\n    if (playerHasBasic && !opponentHasBasic) {\n      store.log(state, GameLog.LOG_SETUP_NO_BASIC_POKEMON, { name: opponent.name });\n      yield store.prompt(state, [\n        new ShowCardsPrompt(player.id, GameMessage.SETUP_OPPONENT_NO_BASIC,\n          opponent.hand.cards, { allowCancel: true }),\n        new AlertPrompt(opponent.id, GameMessage.SETUP_PLAYER_NO_BASIC)\n      ], results => {\n        if (results[0]) {\n          player.deck.moveTo(player.hand, 1);\n        }\n        next();\n      });\n    }\n\n    if (!playerHasBasic && opponentHasBasic) {\n      store.log(state, GameLog.LOG_SETUP_NO_BASIC_POKEMON, { name: player.name });\n      yield store.prompt(state, [\n        new ShowCardsPrompt(opponent.id, GameMessage.SETUP_OPPONENT_NO_BASIC,\n          player.hand.cards, { allowCancel: true }),\n        new AlertPrompt(player.id, GameMessage.SETUP_PLAYER_NO_BASIC)\n      ], results => {\n        if (results[0]) {\n          opponent.deck.moveTo(opponent.hand, 1);\n        }\n        next();\n      });\n    }\n  }\n\n  yield store.prompt(state, [\n    new ChooseCardsPrompt(player.id, GameMessage.CHOOSE_STARTING_POKEMONS,\n      player.hand, basicPokemon, chooseCardsOptions),\n    new ChooseCardsPrompt(opponent.id, GameMessage.CHOOSE_STARTING_POKEMONS,\n      opponent.hand, basicPokemon, chooseCardsOptions)\n  ], choice => {\n    putStartingPokemonsAndPrizes(player, choice[0]);\n    putStartingPokemonsAndPrizes(opponent, choice[1]);\n    next();\n  });\n\n  const whoBeginsEffect = new WhoBeginsEffect();\n  store.reduceEffect(state, whoBeginsEffect);\n\n  if (whoBeginsEffect.player) {\n    state.activePlayer = state.players.indexOf(whoBeginsEffect.player);\n  } else {\n    const coinFlipPrompt = new CoinFlipPrompt(player.id, GameMessage.SETUP_WHO_BEGINS_FLIP);\n    yield store.prompt(state, coinFlipPrompt, whoBegins => {\n      state.activePlayer = whoBegins ? 0 : 1;\n      next();\n    });\n  }\n\n  // Set initial Pokemon Played Turn, so players can't evolve during first turn\n  const first = state.players[state.activePlayer];\n  const second = state.players[state.activePlayer ? 0 : 1];\n  first.forEachPokemon(PlayerType.BOTTOM_PLAYER, cardList => { cardList.pokemonPlayedTurn = 1; });\n  second.forEachPokemon(PlayerType.TOP_PLAYER, cardList => { cardList.pokemonPlayedTurn = 2; });\n\n  return initNextTurn(store, state);\n}\n\nfunction createPlayer(id: number, name: string): Player {\n  const player = new Player();\n  player.id = id;\n  player.name = name;\n\n  // Empty prizes, places for 6 cards\n  for (let i = 0; i < 6; i++) {\n    const prize = new CardList();\n    prize.isSecret = true;\n    player.prizes.push(prize);\n  }\n\n  // Empty bench, places for 5 pokemons\n  for (let i = 0; i < 5; i++) {\n    const bench = new PokemonCardList();\n    bench.isPublic = true;\n    player.bench.push(bench);\n  }\n\n  player.active.isPublic = true;\n  player.discard.isPublic = true;\n  player.stadium.isPublic = true;\n  player.supporter.isPublic = true;\n  return player;\n}\n\nexport function setupPhaseReducer(store: StoreLike, state: State, action: Action): State {\n\n  if (state.phase === GamePhase.WAITING_FOR_PLAYERS) {\n\n    if (action instanceof AddPlayerAction) {\n      if (state.players.length >= 2) {\n        throw new GameError(GameMessage.MAX_PLAYERS_REACHED);\n      }\n\n      if (state.players.length == 1 && state.players[0].id === action.clientId) {\n        throw new GameError(GameMessage.ALREADY_PLAYING);\n      }\n\n      const deckAnalyser = new DeckAnalyser(action.deck);\n      if (!deckAnalyser.isValid()) {\n        throw new GameError(GameMessage.INVALID_DECK);\n      }\n\n      const player = createPlayer(action.clientId, action.name);\n      player.deck = CardList.fromList(action.deck);\n      player.deck.isSecret = true;\n      player.deck.cards.forEach(c => {\n        state.cardNames.push(c.fullName);\n        c.id = state.cardNames.length - 1;\n      });\n\n      state.players.push(player);\n\n      if (state.players.length === 2) {\n        state.phase = GamePhase.SETUP;\n        const generator = setupGame(() => generator.next(), store, state);\n        return generator.next().value;\n      }\n\n      return state;\n    }\n\n    if (action instanceof InvitePlayerAction) {\n      if (state.players.length >= 2) {\n        throw new GameError(GameMessage.MAX_PLAYERS_REACHED);\n      }\n\n      if (state.players.length == 1 && state.players[0].id === action.clientId) {\n        throw new GameError(GameMessage.ALREADY_PLAYING);\n      }\n\n      const player = createPlayer(action.clientId, action.name);\n      state.players.push(player);\n\n      state = store.prompt(state, new InvitePlayerPrompt(\n        player.id,\n        GameMessage.INVITATION_MESSAGE\n      ), deck => {\n        if (deck === null) {\n          store.log(state, GameLog.LOG_INVITATION_NOT_ACCEPTED, { name: player.name });\n          const winner = GameWinner.NONE;\n          state = endGame(store, state, winner);\n          return;\n        }\n        const deckAnalyser = new DeckAnalyser(deck);\n        if (!deckAnalyser.isValid()) {\n          throw new GameError(GameMessage.INVALID_DECK);\n        }\n\n        player.deck = CardList.fromList(deck);\n        player.deck.isSecret = true;\n        player.deck.cards.forEach(c => {\n          state.cardNames.push(c.fullName);\n          c.id = state.cardNames.length - 1;\n        });\n\n        if (state.players.length === 2) {\n          state.phase = GamePhase.SETUP;\n          const generator = setupGame(() => generator.next(), store, state);\n          return generator.next().value;\n        }\n      });\n    }\n  }\n\n  return state;\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"31da0603d6e61daac717a0ca387f5d3a750af34e","contentHash":"0743b09ab55fcfbc05e4b2bf54e8eae2084b292ec60e2b24a13fcff0335037d4"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/reducers/abort-game-reducer.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/reducers/abort-game-reducer.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":34}},"2":{"start":{"line":4,"column":16},"end":{"line":4,"column":41}},"3":{"start":{"line":5,"column":21},"end":{"line":5,"column":48}},"4":{"start":{"line":6,"column":23},"end":{"line":6,"column":52}},"5":{"start":{"line":7,"column":28},"end":{"line":7,"column":67}},"6":{"start":{"line":8,"column":23},"end":{"line":8,"column":65}},"7":{"start":{"line":9,"column":22},"end":{"line":9,"column":47}},"8":{"start":{"line":11,"column":4},"end":{"line":60,"column":5}},"9":{"start":{"line":12,"column":24},"end":{"line":12,"column":74}},"10":{"start":{"line":12,"column":48},"end":{"line":12,"column":73}},"11":{"start":{"line":13,"column":8},"end":{"line":15,"column":9}},"12":{"start":{"line":14,"column":12},"end":{"line":14,"column":88}},"13":{"start":{"line":17,"column":8},"end":{"line":21,"column":11}},"14":{"start":{"line":18,"column":12},"end":{"line":20,"column":13}},"15":{"start":{"line":19,"column":16},"end":{"line":19,"column":37}},"16":{"start":{"line":23,"column":8},"end":{"line":33,"column":9}},"17":{"start":{"line":25,"column":16},"end":{"line":25,"column":98}},"18":{"start":{"line":26,"column":16},"end":{"line":26,"column":22}},"19":{"start":{"line":28,"column":16},"end":{"line":28,"column":103}},"20":{"start":{"line":29,"column":16},"end":{"line":29,"column":22}},"21":{"start":{"line":31,"column":16},"end":{"line":31,"column":106}},"22":{"start":{"line":32,"column":16},"end":{"line":32,"column":22}},"23":{"start":{"line":35,"column":8},"end":{"line":40,"column":9}},"24":{"start":{"line":36,"column":12},"end":{"line":36,"column":86}},"25":{"start":{"line":37,"column":12},"end":{"line":37,"column":53}},"26":{"start":{"line":38,"column":12},"end":{"line":38,"column":51}},"27":{"start":{"line":39,"column":12},"end":{"line":39,"column":25}},"28":{"start":{"line":42,"column":25},"end":{"line":42,"column":77}},"29":{"start":{"line":43,"column":33},"end":{"line":43,"column":55}},"30":{"start":{"line":44,"column":34},"end":{"line":44,"column":57}},"31":{"start":{"line":46,"column":8},"end":{"line":49,"column":9}},"32":{"start":{"line":47,"column":12},"end":{"line":47,"column":82}},"33":{"start":{"line":48,"column":12},"end":{"line":48,"column":25}},"34":{"start":{"line":51,"column":8},"end":{"line":57,"column":9}},"35":{"start":{"line":52,"column":27},"end":{"line":54,"column":45}},"36":{"start":{"line":55,"column":12},"end":{"line":55,"column":65}},"37":{"start":{"line":56,"column":12},"end":{"line":56,"column":25}},"38":{"start":{"line":59,"column":8},"end":{"line":59,"column":78}},"39":{"start":{"line":61,"column":4},"end":{"line":61,"column":17}},"40":{"start":{"line":63,"column":0},"end":{"line":63,"column":44}}},"fnMap":{"0":{"name":"abortGameReducer","decl":{"start":{"line":10,"column":9},"end":{"line":10,"column":25}},"loc":{"start":{"line":10,"column":48},"end":{"line":62,"column":1}},"line":10},"1":{"name":"(anonymous_1)","decl":{"start":{"line":12,"column":43},"end":{"line":12,"column":44}},"loc":{"start":{"line":12,"column":48},"end":{"line":12,"column":73}},"line":12},"2":{"name":"(anonymous_2)","decl":{"start":{"line":17,"column":30},"end":{"line":17,"column":31}},"loc":{"start":{"line":17,"column":40},"end":{"line":21,"column":9}},"line":17}},"branchMap":{"0":{"loc":{"start":{"line":11,"column":4},"end":{"line":60,"column":5}},"type":"if","locations":[{"start":{"line":11,"column":4},"end":{"line":60,"column":5}},{"start":{"line":11,"column":4},"end":{"line":60,"column":5}}],"line":11},"1":{"loc":{"start":{"line":11,"column":8},"end":{"line":11,"column":107}},"type":"binary-expr","locations":[{"start":{"line":11,"column":8},"end":{"line":11,"column":50}},{"start":{"line":11,"column":54},"end":{"line":11,"column":107}}],"line":11},"2":{"loc":{"start":{"line":13,"column":8},"end":{"line":15,"column":9}},"type":"if","locations":[{"start":{"line":13,"column":8},"end":{"line":15,"column":9}},{"start":{"line":13,"column":8},"end":{"line":15,"column":9}}],"line":13},"3":{"loc":{"start":{"line":18,"column":12},"end":{"line":20,"column":13}},"type":"if","locations":[{"start":{"line":18,"column":12},"end":{"line":20,"column":13}},{"start":{"line":18,"column":12},"end":{"line":20,"column":13}}],"line":18},"4":{"loc":{"start":{"line":23,"column":8},"end":{"line":33,"column":9}},"type":"switch","locations":[{"start":{"line":24,"column":12},"end":{"line":26,"column":22}},{"start":{"line":27,"column":12},"end":{"line":29,"column":22}},{"start":{"line":30,"column":12},"end":{"line":32,"column":22}}],"line":23},"5":{"loc":{"start":{"line":35,"column":8},"end":{"line":40,"column":9}},"type":"if","locations":[{"start":{"line":35,"column":8},"end":{"line":40,"column":9}},{"start":{"line":35,"column":8},"end":{"line":40,"column":9}}],"line":35},"6":{"loc":{"start":{"line":35,"column":12},"end":{"line":35,"column":108}},"type":"binary-expr","locations":[{"start":{"line":35,"column":12},"end":{"line":35,"column":65}},{"start":{"line":35,"column":69},"end":{"line":35,"column":108}}],"line":35},"7":{"loc":{"start":{"line":46,"column":8},"end":{"line":49,"column":9}},"type":"if","locations":[{"start":{"line":46,"column":8},"end":{"line":49,"column":9}},{"start":{"line":46,"column":8},"end":{"line":49,"column":9}}],"line":46},"8":{"loc":{"start":{"line":46,"column":12},"end":{"line":46,"column":69}},"type":"binary-expr","locations":[{"start":{"line":46,"column":12},"end":{"line":46,"column":27}},{"start":{"line":46,"column":31},"end":{"line":46,"column":69}}],"line":46},"9":{"loc":{"start":{"line":51,"column":8},"end":{"line":57,"column":9}},"type":"if","locations":[{"start":{"line":51,"column":8},"end":{"line":57,"column":9}},{"start":{"line":51,"column":8},"end":{"line":57,"column":9}}],"line":51},"10":{"loc":{"start":{"line":52,"column":27},"end":{"line":54,"column":45}},"type":"cond-expr","locations":[{"start":{"line":53,"column":18},"end":{"line":53,"column":45}},{"start":{"line":54,"column":18},"end":{"line":54,"column":45}}],"line":52}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":1},"f":{"0":0,"1":0,"2":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/reducers/abort-game-reducer.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/store/reducers/abort-game-reducer.ts"],"names":[],"mappings":"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","sourcesContent":["import { Action } from '../actions/action';\nimport { State, GamePhase, GameWinner } from '../state/state';\nimport { GameError } from '../../game-error';\nimport { GameMessage, GameLog } from '../../game-message';\nimport { StoreLike } from '../store-like';\nimport { AbortGameAction, AbortGameReason} from '../actions/abort-game-action';\nimport { endGame } from '../effect-reducers/check-effect';\nimport {StateUtils} from '../state-utils';\n\n\nexport function abortGameReducer(store: StoreLike, state: State, action: Action): State {\n\n  if (state.phase !== GamePhase.FINISHED && action instanceof AbortGameAction) {\n\n    const culprit = state.players.find(p => p.id === action.culpritId);\n    if (culprit === undefined) {\n      throw new GameError(GameMessage.ILLEGAL_ACTION);\n    }\n\n    // Mark all prompts as resolved, so they won't mess with our state anymore.\n    state.prompts.forEach(prompt => {\n      if (prompt.result === undefined) {\n        prompt.result = null;\n      }\n    });\n\n    // Explain why game was aborted\n    switch (action.reason) {\n      case AbortGameReason.TIME_ELAPSED:\n        store.log(state, GameLog.LOG_TIME_ELAPSED, { name: culprit.name });\n        break;\n      case AbortGameReason.ILLEGAL_MOVES:\n        store.log(state, GameLog.LOG_BANNED_BY_ARBITER, { name: culprit.name });\n        break;\n      case AbortGameReason.DISCONNECTED:\n        store.log(state, GameLog.LOG_PLAYER_LEFT_THE_GAME, { name: culprit.name });\n        break;\n    }\n\n    // Game has not started, no winner\n    if (state.phase === GamePhase.WAITING_FOR_PLAYERS || state.phase === GamePhase.SETUP) {\n      store.log(state, GameLog.LOG_GAME_FINISHED_BEFORE_STARTED);\n      state.phase = GamePhase.FINISHED;\n      state.winner = GameWinner.NONE;\n      return state;\n    }\n\n    // Let's decide who wins.\n    const opponent = StateUtils.getOpponent(state, culprit);\n    const culpritPrizeLeft = culprit.getPrizeLeft();\n    const opponentPrizeLeft = opponent.getPrizeLeft();\n\n    // It was first turn, no winner\n    if (state.turn <= 2 && culpritPrizeLeft === opponentPrizeLeft) {\n      state = endGame(store, state, GameWinner.NONE);\n      return state;\n    }\n\n    // Opponent has same or less prizes, he wins\n    if (opponentPrizeLeft <= culpritPrizeLeft) {\n      const winner = opponent === state.players[0]\n        ? GameWinner.PLAYER_1\n        : GameWinner.PLAYER_2;\n      state = endGame(store, state, winner);\n      return state;\n    }\n\n    // Otherwise it's a draw\n    state = endGame(store, state, GameWinner.DRAW);\n  }\n\n  return state;\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e0e351853fda48ab63d151a0e9960e09b9a14b27","contentHash":"03440afbbbb1bf326d8cc2cda10b69f2b6cadb6824ca0ec2bb4c9a07d9aab7e3"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/choose-attack-prompt-resolver.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/choose-attack-prompt-resolver.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":44}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":36}},"3":{"start":{"line":5,"column":26},"end":{"line":5,"column":54}},"4":{"start":{"line":6,"column":31},"end":{"line":6,"column":87}},"5":{"start":{"line":9,"column":8},"end":{"line":12,"column":9}},"6":{"start":{"line":10,"column":27},"end":{"line":10,"column":66}},"7":{"start":{"line":11,"column":12},"end":{"line":11,"column":69}},"8":{"start":{"line":15,"column":24},"end":{"line":15,"column":26}},"9":{"start":{"line":18,"column":23},"end":{"line":19,"column":32}},"10":{"start":{"line":20,"column":8},"end":{"line":29,"column":11}},"11":{"start":{"line":21,"column":12},"end":{"line":28,"column":15}},"12":{"start":{"line":22,"column":34},"end":{"line":24,"column":18}},"13":{"start":{"line":23,"column":20},"end":{"line":23,"column":73}},"14":{"start":{"line":25,"column":16},"end":{"line":27,"column":17}},"15":{"start":{"line":26,"column":20},"end":{"line":26,"column":41}},"16":{"start":{"line":30,"column":8},"end":{"line":35,"column":11}},"17":{"start":{"line":31,"column":12},"end":{"line":33,"column":13}},"18":{"start":{"line":32,"column":16},"end":{"line":32,"column":43}},"19":{"start":{"line":34,"column":12},"end":{"line":34,"column":49}},"20":{"start":{"line":36,"column":8},"end":{"line":36,"column":54}},"21":{"start":{"line":39,"column":0},"end":{"line":39,"column":64}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":8,"column":4},"end":{"line":8,"column":5}},"loc":{"start":{"line":8,"column":41},"end":{"line":13,"column":5}},"line":8},"1":{"name":"(anonymous_1)","decl":{"start":{"line":14,"column":4},"end":{"line":14,"column":5}},"loc":{"start":{"line":14,"column":39},"end":{"line":37,"column":5}},"line":14},"2":{"name":"(anonymous_2)","decl":{"start":{"line":20,"column":29},"end":{"line":20,"column":30}},"loc":{"start":{"line":20,"column":46},"end":{"line":29,"column":9}},"line":20},"3":{"name":"(anonymous_3)","decl":{"start":{"line":21,"column":33},"end":{"line":21,"column":34}},"loc":{"start":{"line":21,"column":43},"end":{"line":28,"column":13}},"line":21},"4":{"name":"(anonymous_4)","decl":{"start":{"line":22,"column":62},"end":{"line":22,"column":63}},"loc":{"start":{"line":22,"column":67},"end":{"line":24,"column":17}},"line":22},"5":{"name":"(anonymous_5)","decl":{"start":{"line":30,"column":21},"end":{"line":30,"column":22}},"loc":{"start":{"line":30,"column":31},"end":{"line":35,"column":9}},"line":30}},"branchMap":{"0":{"loc":{"start":{"line":9,"column":8},"end":{"line":12,"column":9}},"type":"if","locations":[{"start":{"line":9,"column":8},"end":{"line":12,"column":9}},{"start":{"line":9,"column":8},"end":{"line":12,"column":9}}],"line":9},"1":{"loc":{"start":{"line":18,"column":23},"end":{"line":19,"column":32}},"type":"cond-expr","locations":[{"start":{"line":19,"column":14},"end":{"line":19,"column":27}},{"start":{"line":19,"column":30},"end":{"line":19,"column":32}}],"line":18},"2":{"loc":{"start":{"line":23,"column":27},"end":{"line":23,"column":72}},"type":"binary-expr","locations":[{"start":{"line":23,"column":27},"end":{"line":23,"column":44}},{"start":{"line":23,"column":48},"end":{"line":23,"column":72}}],"line":23},"3":{"loc":{"start":{"line":25,"column":16},"end":{"line":27,"column":17}},"type":"if","locations":[{"start":{"line":25,"column":16},"end":{"line":27,"column":17}},{"start":{"line":25,"column":16},"end":{"line":27,"column":17}}],"line":25},"4":{"loc":{"start":{"line":25,"column":20},"end":{"line":25,"column":63}},"type":"binary-expr","locations":[{"start":{"line":25,"column":20},"end":{"line":25,"column":30}},{"start":{"line":25,"column":34},"end":{"line":25,"column":63}}],"line":25},"5":{"loc":{"start":{"line":31,"column":12},"end":{"line":33,"column":13}},"type":"if","locations":[{"start":{"line":31,"column":12},"end":{"line":33,"column":13}},{"start":{"line":31,"column":12},"end":{"line":33,"column":13}}],"line":31},"6":{"loc":{"start":{"line":36,"column":15},"end":{"line":36,"column":53}},"type":"cond-expr","locations":[{"start":{"line":36,"column":36},"end":{"line":36,"column":46}},{"start":{"line":36,"column":49},"end":{"line":36,"column":53}}],"line":36}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":4,"6":3,"7":3,"8":3,"9":3,"10":3,"11":3,"12":6,"13":3,"14":6,"15":4,"16":3,"17":4,"18":2,"19":2,"20":3,"21":1},"f":{"0":4,"1":3,"2":3,"3":6,"4":3,"5":4},"b":{"0":[3,1],"1":[0,3],"2":[3,3],"3":[4,2],"4":[6,4],"5":[2,2],"6":[2,1]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/choose-attack-prompt-resolver.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/choose-attack-prompt-resolver.ts"],"names":[],"mappings":";;;AAAA,qCAAkG;AAClG,uDAAmD;AACnD,wFAAmF;AAGnF,MAAa,0BAA2B,SAAQ,gCAAc;IAErD,aAAa,CAAC,KAAY,EAAE,MAAc,EAAE,MAAmB;QACpE,IAAI,MAAM,YAAY,yCAAkB,EAAE;YACxC,MAAM,MAAM,GAAkB,IAAI,CAAC,mBAAmB,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;YACtE,OAAO,IAAI,0BAAmB,CAAC,MAAM,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC;SACnD;IACH,CAAC;IAEO,mBAAmB,CAAC,KAAY,EAAE,MAA0B;QAClE,MAAM,OAAO,GAAa,EAAE,CAAC;QAE7B,kEAAkE;QAClE,uDAAuD;QACvD,MAAM,MAAM,GAAa,KAAK,CAAC,KAAK,KAAK,gBAAS,CAAC,MAAM;YACvD,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;QAEvB,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,IAAI,EAAE,KAAK,EAAE,EAAE;YACnC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE;gBAC5B,MAAM,SAAS,GAAG,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE;oBAChD,OAAO,CAAC,CAAC,KAAK,KAAK,KAAK,IAAI,CAAC,CAAC,MAAM,KAAK,MAAM,CAAC,IAAI,CAAC;gBACvD,CAAC,CAAC,CAAC;gBACH,IAAI,CAAC,SAAS,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE;oBAC/C,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;iBACtB;YACH,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE;YACpB,IAAI,CAAC,CAAC,MAAM,KAAK,CAAC,CAAC,MAAM,EAAE;gBACzB,OAAO,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,MAAM,CAAC;aAC5B;YACD,OAAO,CAAC,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC;QACvC,CAAC,CAAC,CAAC;QAEH,OAAO,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;IAChD,CAAC;CAEF;AAtCD,gEAsCC","sourcesContent":["import { Player, State, Action, ResolvePromptAction, Prompt, Attack, GamePhase} from '../../game';\nimport { PromptResolver } from './prompt-resolver';\nimport { ChooseAttackPrompt } from '../../game/store/prompts/choose-attack-prompt';\n\n\nexport class ChooseAttackPromptResolver extends PromptResolver {\n\n  public resolvePrompt(state: State, player: Player, prompt: Prompt<any>): Action | undefined {\n    if (prompt instanceof ChooseAttackPrompt) {\n      const result: Attack | null = this.buildAttackToChoose(state, prompt);\n      return new ResolvePromptAction(prompt.id, result);\n    }\n  }\n\n  private buildAttackToChoose(state: State, prompt: ChooseAttackPrompt): Attack | null {\n    const attacks: Attack[] = [];\n\n    // Foul Play is banned, because when Zoroark meet's another Zoroak\n    // they would copy theirs attacks in the infinite loop.\n    const banned: string[] = state.phase === GamePhase.ATTACK\n      ? ['Foul Play'] : [];\n\n    prompt.cards.forEach((card, index) => {\n      card.attacks.forEach(attack => {\n        const isBlocked = prompt.options.blocked.some(b => {\n          return b.index === index && b.attack === attack.name;\n        });\n        if (!isBlocked && !banned.includes(attack.name)) {\n          attacks.push(attack);\n        }\n      });\n    });\n\n    attacks.sort((a, b) => {\n      if (a.damage !== b.damage) {\n        return b.damage - a.damage;\n      }\n      return b.cost.length - a.cost.length;\n    });\n\n    return attacks.length > 0 ? attacks[0] : null;\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"ce24b3126d1dcf7a7e35d539aac5d0a1b71f7794","contentHash":"5faab9f726111dc64b79881244af625a6e006298e4c80584eff38adf6c7b9bc9"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/prompt-resolver.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/prompt-resolver.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":32}},"2":{"start":{"line":4,"column":22},"end":{"line":4,"column":59}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":31}},"4":{"start":{"line":8,"column":8},"end":{"line":8,"column":69}},"5":{"start":{"line":11,"column":8},"end":{"line":11,"column":57}},"6":{"start":{"line":14,"column":0},"end":{"line":14,"column":40}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":4},"end":{"line":6,"column":5}},"loc":{"start":{"line":6,"column":25},"end":{"line":9,"column":5}},"line":6},"1":{"name":"(anonymous_1)","decl":{"start":{"line":10,"column":4},"end":{"line":10,"column":5}},"loc":{"start":{"line":10,"column":35},"end":{"line":12,"column":5}},"line":10}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":39,"4":39,"5":83,"6":1},"f":{"0":39,"1":83},"b":{},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/prompt-resolver.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/prompt-resolver.ts"],"names":[],"mappings":";;;AAEA,4DAAwD;AAIxD,MAAsB,cAAc;IAIlC,YAAsB,OAAyB;QAAzB,YAAO,GAAP,OAAO,CAAkB;QAC7C,IAAI,CAAC,UAAU,GAAG,IAAI,wBAAU,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;IACjD,CAAC;IAIS,aAAa,CAAC,KAAY,EAAE,QAAgB;QACpD,OAAO,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;IACnD,CAAC;CAEF;AAdD,wCAcC","sourcesContent":["import { Player, State, Action, Prompt } from '../../game';\nimport { SimpleBotOptions } from '../simple-bot-options';\nimport { StateScore } from '../state-score/state-score';\n\nexport type PromptResolverList = (new (options: SimpleBotOptions) => PromptResolver)[];\n\nexport abstract class PromptResolver {\n\n  protected stateScore: StateScore;\n\n  constructor(protected options: SimpleBotOptions) {\n    this.stateScore = new StateScore(this.options);\n  }\n\n  public abstract resolvePrompt(state: State, player: Player, prompt: Prompt<any>): Action | undefined;\n\n  protected getStateScore(state: State, playerId: number): number {\n    return this.stateScore.getScore(state, playerId);\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"0184d90445929c1e6d6a7e5dee5d48d3dc6d2687","contentHash":"bc3e4ae33b00dd6c5b77a9c62c9acdbe449160a4a069325e439fe121852b754f"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/state-score/state-score.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/state-score/state-score.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":28}},"2":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"3":{"start":{"line":5,"column":21},"end":{"line":5,"column":44}},"4":{"start":{"line":6,"column":25},"end":{"line":6,"column":52}},"5":{"start":{"line":7,"column":23},"end":{"line":7,"column":48}},"6":{"start":{"line":8,"column":35},"end":{"line":8,"column":72}},"7":{"start":{"line":9,"column":23},"end":{"line":9,"column":48}},"8":{"start":{"line":10,"column":22},"end":{"line":10,"column":46}},"9":{"start":{"line":11,"column":23},"end":{"line":11,"column":48}},"10":{"start":{"line":12,"column":23},"end":{"line":12,"column":48}},"11":{"start":{"line":13,"column":22},"end":{"line":13,"column":46}},"12":{"start":{"line":16,"column":8},"end":{"line":16,"column":23}},"13":{"start":{"line":17,"column":8},"end":{"line":17,"column":31}},"14":{"start":{"line":18,"column":8},"end":{"line":18,"column":61}},"15":{"start":{"line":19,"column":8},"end":{"line":19,"column":73}},"16":{"start":{"line":20,"column":8},"end":{"line":20,"column":67}},"17":{"start":{"line":21,"column":8},"end":{"line":21,"column":101}},"18":{"start":{"line":22,"column":8},"end":{"line":22,"column":67}},"19":{"start":{"line":23,"column":8},"end":{"line":23,"column":64}},"20":{"start":{"line":24,"column":8},"end":{"line":24,"column":67}},"21":{"start":{"line":25,"column":8},"end":{"line":25,"column":67}},"22":{"start":{"line":26,"column":8},"end":{"line":26,"column":64}},"23":{"start":{"line":29,"column":26},"end":{"line":29,"column":66}},"24":{"start":{"line":30,"column":30},"end":{"line":30,"column":74}},"25":{"start":{"line":31,"column":28},"end":{"line":31,"column":70}},"26":{"start":{"line":32,"column":39},"end":{"line":32,"column":92}},"27":{"start":{"line":33,"column":28},"end":{"line":33,"column":70}},"28":{"start":{"line":34,"column":27},"end":{"line":34,"column":68}},"29":{"start":{"line":35,"column":28},"end":{"line":35,"column":70}},"30":{"start":{"line":36,"column":28},"end":{"line":36,"column":70}},"31":{"start":{"line":37,"column":27},"end":{"line":37,"column":68}},"32":{"start":{"line":38,"column":22},"end":{"line":46,"column":24}},"33":{"start":{"line":47,"column":8},"end":{"line":47,"column":21}},"34":{"start":{"line":50,"column":23},"end":{"line":50,"column":54}},"35":{"start":{"line":51,"column":22},"end":{"line":51,"column":72}},"36":{"start":{"line":51,"column":55},"end":{"line":51,"column":71}},"37":{"start":{"line":52,"column":26},"end":{"line":52,"column":66}},"38":{"start":{"line":53,"column":25},"end":{"line":53,"column":34}},"39":{"start":{"line":55,"column":8},"end":{"line":65,"column":9}},"40":{"start":{"line":56,"column":12},"end":{"line":56,"column":41}},"41":{"start":{"line":57,"column":12},"end":{"line":57,"column":66}},"42":{"start":{"line":58,"column":12},"end":{"line":58,"column":36}},"43":{"start":{"line":62,"column":22},"end":{"line":62,"column":56}},"44":{"start":{"line":63,"column":12},"end":{"line":63,"column":66}},"45":{"start":{"line":64,"column":12},"end":{"line":64,"column":53}},"46":{"start":{"line":66,"column":8},"end":{"line":66,"column":38}},"47":{"start":{"line":69,"column":8},"end":{"line":69,"column":76}},"48":{"start":{"line":72,"column":0},"end":{"line":72,"column":32}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":15,"column":4},"end":{"line":15,"column":5}},"loc":{"start":{"line":15,"column":25},"end":{"line":27,"column":5}},"line":15},"1":{"name":"(anonymous_1)","decl":{"start":{"line":28,"column":4},"end":{"line":28,"column":5}},"loc":{"start":{"line":28,"column":30},"end":{"line":48,"column":5}},"line":28},"2":{"name":"(anonymous_2)","decl":{"start":{"line":49,"column":4},"end":{"line":49,"column":5}},"loc":{"start":{"line":49,"column":40},"end":{"line":67,"column":5}},"line":49},"3":{"name":"(anonymous_3)","decl":{"start":{"line":51,"column":50},"end":{"line":51,"column":51}},"loc":{"start":{"line":51,"column":55},"end":{"line":51,"column":71}},"line":51},"4":{"name":"(anonymous_4)","decl":{"start":{"line":68,"column":4},"end":{"line":68,"column":5}},"loc":{"start":{"line":68,"column":30},"end":{"line":70,"column":5}},"line":68}},"branchMap":{"0":{"loc":{"start":{"line":55,"column":8},"end":{"line":65,"column":9}},"type":"if","locations":[{"start":{"line":55,"column":8},"end":{"line":65,"column":9}},{"start":{"line":55,"column":8},"end":{"line":65,"column":9}}],"line":55}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":39,"13":39,"14":39,"15":39,"16":39,"17":39,"18":39,"19":39,"20":39,"21":39,"22":39,"23":83,"24":83,"25":83,"26":83,"27":83,"28":83,"29":83,"30":83,"31":83,"32":83,"33":83,"34":6,"35":6,"36":0,"37":6,"38":6,"39":6,"40":6,"41":6,"42":6,"43":0,"44":0,"45":0,"46":6,"47":83,"48":1},"f":{"0":39,"1":83,"2":6,"3":0,"4":83},"b":{"0":[6,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/state-score/state-score.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/state-score/state-score.ts"],"names":[],"mappings":"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","sourcesContent":["import { State, PokemonCardList, Card } from '../../game';\nimport { SimpleScore } from './score';\nimport { SimpleBotOptions } from '../simple-bot-options';\nimport { HandScore } from './hand-score';\nimport { OpponentScore } from './opponent-score';\nimport { PlayerScore } from './player-score';\nimport { SpecialConditionsScore } from './special-conditions-score';\nimport { ActiveScore } from './active-score';\nimport { BenchScore } from './bench-score';\nimport { EnergyScore } from './energy-score';\nimport { DamageScore } from './damage-score';\nimport { ToolsScore } from './tools-score';\n\nexport class StateScore extends SimpleScore {\n\n  private handScore: HandScore;\n  private opponentScore: OpponentScore;\n  private playerScore: PlayerScore;\n  private specialConditionsScore: SpecialConditionsScore;\n  private activeScore: ActiveScore;\n  private benchScore: BenchScore;\n  private energyScore: EnergyScore;\n  private damageScore: DamageScore;\n  private toolsScore: ToolsScore;\n\n  constructor(protected options: SimpleBotOptions) {\n    super(options);\n    this.handScore = new HandScore(options);\n    this.opponentScore = new OpponentScore(options);\n    this.playerScore = new PlayerScore(options);\n    this.specialConditionsScore = new SpecialConditionsScore(options);\n    this.activeScore = new ActiveScore(options);\n    this.benchScore = new BenchScore(options);\n    this.energyScore = new EnergyScore(options);\n    this.damageScore = new DamageScore(options);\n    this.toolsScore = new ToolsScore(options);\n  }\n\n  public getScore(state: State, playerId: number): number {\n    const handScore = this.handScore.getScore(state, playerId);\n    const opponentScore = this.opponentScore.getScore(state, playerId);\n    const playerScore = this.playerScore.getScore(state, playerId);\n    const specialConditionsScore = this.specialConditionsScore.getScore(state, playerId);\n    const activeScore = this.activeScore.getScore(state, playerId);\n    const benchScore = this.benchScore.getScore(state, playerId);\n    const energyScore = this.energyScore.getScore(state, playerId);\n    const damageScore = this.damageScore.getScore(state, playerId);\n    const toolsScore = this.toolsScore.getScore(state, playerId);\n\n    const score = handScore\n      + opponentScore\n      + playerScore\n      + specialConditionsScore\n      + activeScore\n      + benchScore\n      + energyScore\n      + damageScore\n      + toolsScore;\n\n    return score;\n  }\n\n  public getCardScore(state: State, playerId: number, card: Card): number {\n    const player = this.getPlayer(state, playerId);\n    const index = player.hand.cards.findIndex(c => c.id === card.id);\n\n    const baseScore = this.handScore.getScore(state, playerId);\n    let afterScore = baseScore;\n\n    // Card is not in the hand, what if we have it?\n    if (index === -1) {\n      player.hand.cards.push(card);\n      afterScore = this.handScore.getScore(state, playerId);\n      player.hand.cards.pop();\n    // Card is in our hand, what if we loses it?\n    } else {\n      const c = player.hand.cards.splice(index, 1);\n      afterScore = this.handScore.getScore(state, playerId);\n      player.hand.cards.splice(index, 0, c[0]);\n    }\n\n    return afterScore - baseScore;\n  }\n\n  public getPokemonScore(cardList: PokemonCardList): number {\n    return this.getPokemonScoreBy(this.options.scores.active, cardList);\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"476833fa4a1eeaade9b1b0272d2cdd21aefe5979","contentHash":"deb34370683123bf72bb67de4eb2669b2255a43d36cb198dde0fdc5ae5b00376"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/state-score/score.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/state-score/score.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":29}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":36}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":31}},"4":{"start":{"line":10,"column":23},"end":{"line":10,"column":65}},"5":{"start":{"line":10,"column":47},"end":{"line":10,"column":64}},"6":{"start":{"line":11,"column":8},"end":{"line":13,"column":9}},"7":{"start":{"line":12,"column":12},"end":{"line":12,"column":78}},"8":{"start":{"line":14,"column":8},"end":{"line":14,"column":22}},"9":{"start":{"line":17,"column":21},"end":{"line":17,"column":46}},"10":{"start":{"line":18,"column":8},"end":{"line":20,"column":9}},"11":{"start":{"line":19,"column":12},"end":{"line":19,"column":21}},"12":{"start":{"line":21,"column":21},"end":{"line":21,"column":22}},"13":{"start":{"line":22,"column":8},"end":{"line":22,"column":54}},"14":{"start":{"line":22,"column":34},"end":{"line":22,"column":52}},"15":{"start":{"line":23,"column":20},"end":{"line":23,"column":21}},"16":{"start":{"line":24,"column":8},"end":{"line":24,"column":37}},"17":{"start":{"line":25,"column":8},"end":{"line":25,"column":40}},"18":{"start":{"line":26,"column":8},"end":{"line":26,"column":53}},"19":{"start":{"line":27,"column":8},"end":{"line":27,"column":54}},"20":{"start":{"line":28,"column":8},"end":{"line":28,"column":21}},"21":{"start":{"line":31,"column":0},"end":{"line":31,"column":34}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":4},"end":{"line":6,"column":5}},"loc":{"start":{"line":6,"column":25},"end":{"line":8,"column":5}},"line":6},"1":{"name":"(anonymous_1)","decl":{"start":{"line":9,"column":4},"end":{"line":9,"column":5}},"loc":{"start":{"line":9,"column":31},"end":{"line":15,"column":5}},"line":9},"2":{"name":"(anonymous_2)","decl":{"start":{"line":10,"column":42},"end":{"line":10,"column":43}},"loc":{"start":{"line":10,"column":47},"end":{"line":10,"column":64}},"line":10},"3":{"name":"(anonymous_3)","decl":{"start":{"line":16,"column":4},"end":{"line":16,"column":5}},"loc":{"start":{"line":16,"column":40},"end":{"line":29,"column":5}},"line":16},"4":{"name":"(anonymous_4)","decl":{"start":{"line":22,"column":29},"end":{"line":22,"column":30}},"loc":{"start":{"line":22,"column":34},"end":{"line":22,"column":52}},"line":22}},"branchMap":{"0":{"loc":{"start":{"line":11,"column":8},"end":{"line":13,"column":9}},"type":"if","locations":[{"start":{"line":11,"column":8},"end":{"line":13,"column":9}},{"start":{"line":11,"column":8},"end":{"line":13,"column":9}}],"line":11},"1":{"loc":{"start":{"line":18,"column":8},"end":{"line":20,"column":9}},"type":"if","locations":[{"start":{"line":18,"column":8},"end":{"line":20,"column":9}},{"start":{"line":18,"column":8},"end":{"line":20,"column":9}}],"line":18}},"s":{"0":1,"1":1,"2":1,"3":390,"4":765,"5":765,"6":765,"7":0,"8":765,"9":1577,"10":1577,"11":0,"12":1577,"13":1577,"14":0,"15":1577,"16":1577,"17":1577,"18":1577,"19":1577,"20":1577,"21":1},"f":{"0":390,"1":765,"2":765,"3":1577,"4":0},"b":{"0":[0,765],"1":[0,1577]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/state-score/score.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/state-score/score.ts"],"names":[],"mappings":";;;AAAA,qCAAoF;AAGpF,MAAsB,WAAW;IAE/B,YAAsB,OAAyB;QAAzB,YAAO,GAAP,OAAO,CAAkB;IAAI,CAAC;IAI1C,SAAS,CAAC,KAAY,EAAE,QAAgB;QAChD,MAAM,MAAM,GAAG,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,KAAK,QAAQ,CAAC,CAAC;QAC1D,IAAI,MAAM,KAAK,SAAS,EAAE;YACxB,MAAM,IAAI,gBAAS,CAAC,kBAAW,CAAC,kBAAkB,CAAC,CAAC;SACrD;QACD,OAAO,MAAM,CAAC;IAChB,CAAC;IAES,iBAAiB,CAAC,MAAqB,EAAE,QAAyB;QAC1E,MAAM,IAAI,GAAG,QAAQ,CAAC,cAAc,EAAE,CAAC;QAEvC,IAAI,IAAI,KAAK,SAAS,EAAE;YACtB,OAAO,CAAC,CAAC;SACV;QAED,IAAI,MAAM,GAAG,CAAC,CAAC;QACf,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,MAAM,IAAI,CAAC,CAAC,MAAM,CAAC,CAAC;QAE9C,IAAI,KAAK,GAAG,CAAC,CAAC;QACd,KAAK,IAAI,MAAM,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC;QAC7B,KAAK,IAAI,MAAM,CAAC,MAAM,GAAG,MAAM,CAAC;QAChC,KAAK,IAAI,MAAM,CAAC,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;QAC7C,KAAK,IAAI,MAAM,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC;QAC9C,OAAO,KAAK,CAAC;IACf,CAAC;CAEF;AAhCD,kCAgCC","sourcesContent":["import { State, GameError, GameMessage, Player, PokemonCardList } from '../../game';\nimport { SimpleBotOptions, PokemonScores } from '../simple-bot-options';\n\nexport abstract class SimpleScore {\n\n  constructor(protected options: SimpleBotOptions) { }\n\n  public abstract getScore(state: State, playerId: number): number;\n\n  protected getPlayer(state: State, playerId: number): Player {\n    const player = state.players.find(p => p.id === playerId);\n    if (player === undefined) {\n      throw new GameError(GameMessage.INVALID_GAME_STATE);\n    }\n    return player;\n  }\n\n  protected getPokemonScoreBy(scores: PokemonScores, cardList: PokemonCardList): number {\n    const card = cardList.getPokemonCard();\n\n    if (card === undefined) {\n      return 0;\n    }\n\n    let damage = 0;\n    card.attacks.forEach(a => damage += a.damage);\n\n    let score = 0;\n    score += scores.hp * card.hp;\n    score += scores.damage * damage;\n    score += scores.ability * card.powers.length;\n    score += scores.retreat * card.retreat.length;\n    return score;\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"65b6a107f72506121df21b42b57fe4774b322a18","contentHash":"bfd05d4c7b1273d09ac353c058275af8d7a9b0f6646ad05dde92696a88acca54"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/state-score/hand-score.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/state-score/hand-score.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":27}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":36}},"3":{"start":{"line":5,"column":16},"end":{"line":5,"column":34}},"4":{"start":{"line":6,"column":22},"end":{"line":6,"column":66}},"5":{"start":{"line":7,"column":23},"end":{"line":7,"column":68}},"6":{"start":{"line":8,"column":21},"end":{"line":8,"column":64}},"7":{"start":{"line":9,"column":23},"end":{"line":9,"column":68}},"8":{"start":{"line":12,"column":23},"end":{"line":12,"column":54}},"9":{"start":{"line":13,"column":23},"end":{"line":13,"column":47}},"10":{"start":{"line":14,"column":29},"end":{"line":14,"column":74}},"11":{"start":{"line":14,"column":53},"end":{"line":14,"column":73}},"12":{"start":{"line":15,"column":33},"end":{"line":15,"column":35}},"13":{"start":{"line":16,"column":8},"end":{"line":20,"column":11}},"14":{"start":{"line":17,"column":12},"end":{"line":19,"column":13}},"15":{"start":{"line":18,"column":16},"end":{"line":18,"column":49}},"16":{"start":{"line":21,"column":20},"end":{"line":21,"column":21}},"17":{"start":{"line":22,"column":24},"end":{"line":22,"column":29}},"18":{"start":{"line":23,"column":25},"end":{"line":23,"column":30}},"19":{"start":{"line":24,"column":23},"end":{"line":24,"column":28}},"20":{"start":{"line":25,"column":27},"end":{"line":25,"column":32}},"21":{"start":{"line":26,"column":8},"end":{"line":49,"column":11}},"22":{"start":{"line":27,"column":12},"end":{"line":48,"column":13}},"23":{"start":{"line":28,"column":16},"end":{"line":28,"column":33}},"24":{"start":{"line":29,"column":16},"end":{"line":29,"column":42}},"25":{"start":{"line":31,"column":17},"end":{"line":48,"column":13}},"26":{"start":{"line":32,"column":16},"end":{"line":32,"column":34}},"27":{"start":{"line":33,"column":16},"end":{"line":33,"column":42}},"28":{"start":{"line":34,"column":16},"end":{"line":36,"column":17}},"29":{"start":{"line":35,"column":20},"end":{"line":35,"column":36}},"30":{"start":{"line":37,"column":30},"end":{"line":37,"column":69}},"31":{"start":{"line":38,"column":16},"end":{"line":41,"column":17}},"32":{"start":{"line":39,"column":20},"end":{"line":39,"column":51}},"33":{"start":{"line":40,"column":20},"end":{"line":40,"column":54}},"34":{"start":{"line":43,"column":17},"end":{"line":48,"column":13}},"35":{"start":{"line":44,"column":16},"end":{"line":46,"column":17}},"36":{"start":{"line":45,"column":20},"end":{"line":45,"column":40}},"37":{"start":{"line":47,"column":16},"end":{"line":47,"column":42}},"38":{"start":{"line":50,"column":8},"end":{"line":52,"column":9}},"39":{"start":{"line":51,"column":12},"end":{"line":51,"column":38}},"40":{"start":{"line":53,"column":8},"end":{"line":55,"column":9}},"41":{"start":{"line":54,"column":12},"end":{"line":54,"column":39}},"42":{"start":{"line":56,"column":8},"end":{"line":58,"column":9}},"43":{"start":{"line":57,"column":12},"end":{"line":57,"column":51}},"44":{"start":{"line":59,"column":8},"end":{"line":61,"column":9}},"45":{"start":{"line":60,"column":12},"end":{"line":60,"column":41}},"46":{"start":{"line":62,"column":8},"end":{"line":62,"column":21}},"47":{"start":{"line":65,"column":0},"end":{"line":65,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":11,"column":4},"end":{"line":11,"column":5}},"loc":{"start":{"line":11,"column":30},"end":{"line":63,"column":5}},"line":11},"1":{"name":"(anonymous_1)","decl":{"start":{"line":14,"column":48},"end":{"line":14,"column":49}},"loc":{"start":{"line":14,"column":53},"end":{"line":14,"column":73}},"line":14},"2":{"name":"(anonymous_2)","decl":{"start":{"line":16,"column":63},"end":{"line":16,"column":64}},"loc":{"start":{"line":16,"column":91},"end":{"line":20,"column":9}},"line":16},"3":{"name":"(anonymous_3)","decl":{"start":{"line":26,"column":34},"end":{"line":26,"column":35}},"loc":{"start":{"line":26,"column":39},"end":{"line":49,"column":9}},"line":26}},"branchMap":{"0":{"loc":{"start":{"line":17,"column":12},"end":{"line":19,"column":13}},"type":"if","locations":[{"start":{"line":17,"column":12},"end":{"line":19,"column":13}},{"start":{"line":17,"column":12},"end":{"line":19,"column":13}}],"line":17},"1":{"loc":{"start":{"line":27,"column":12},"end":{"line":48,"column":13}},"type":"if","locations":[{"start":{"line":27,"column":12},"end":{"line":48,"column":13}},{"start":{"line":27,"column":12},"end":{"line":48,"column":13}}],"line":27},"2":{"loc":{"start":{"line":31,"column":17},"end":{"line":48,"column":13}},"type":"if","locations":[{"start":{"line":31,"column":17},"end":{"line":48,"column":13}},{"start":{"line":31,"column":17},"end":{"line":48,"column":13}}],"line":31},"3":{"loc":{"start":{"line":34,"column":16},"end":{"line":36,"column":17}},"type":"if","locations":[{"start":{"line":34,"column":16},"end":{"line":36,"column":17}},{"start":{"line":34,"column":16},"end":{"line":36,"column":17}}],"line":34},"4":{"loc":{"start":{"line":38,"column":16},"end":{"line":41,"column":17}},"type":"if","locations":[{"start":{"line":38,"column":16},"end":{"line":41,"column":17}},{"start":{"line":38,"column":16},"end":{"line":41,"column":17}}],"line":38},"5":{"loc":{"start":{"line":43,"column":17},"end":{"line":48,"column":13}},"type":"if","locations":[{"start":{"line":43,"column":17},"end":{"line":48,"column":13}},{"start":{"line":43,"column":17},"end":{"line":48,"column":13}}],"line":43},"6":{"loc":{"start":{"line":44,"column":16},"end":{"line":46,"column":17}},"type":"if","locations":[{"start":{"line":44,"column":16},"end":{"line":46,"column":17}},{"start":{"line":44,"column":16},"end":{"line":46,"column":17}}],"line":44},"7":{"loc":{"start":{"line":50,"column":8},"end":{"line":52,"column":9}},"type":"if","locations":[{"start":{"line":50,"column":8},"end":{"line":52,"column":9}},{"start":{"line":50,"column":8},"end":{"line":52,"column":9}}],"line":50},"8":{"loc":{"start":{"line":53,"column":8},"end":{"line":55,"column":9}},"type":"if","locations":[{"start":{"line":53,"column":8},"end":{"line":55,"column":9}},{"start":{"line":53,"column":8},"end":{"line":55,"column":9}}],"line":53},"9":{"loc":{"start":{"line":56,"column":8},"end":{"line":58,"column":9}},"type":"if","locations":[{"start":{"line":56,"column":8},"end":{"line":58,"column":9}},{"start":{"line":56,"column":8},"end":{"line":58,"column":9}}],"line":56},"10":{"loc":{"start":{"line":56,"column":12},"end":{"line":56,"column":36}},"type":"binary-expr","locations":[{"start":{"line":56,"column":12},"end":{"line":56,"column":20}},{"start":{"line":56,"column":24},"end":{"line":56,"column":36}}],"line":56},"11":{"loc":{"start":{"line":59,"column":8},"end":{"line":61,"column":9}},"type":"if","locations":[{"start":{"line":59,"column":8},"end":{"line":61,"column":9}},{"start":{"line":59,"column":8},"end":{"line":61,"column":9}}],"line":59}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":95,"9":95,"10":95,"11":83,"12":95,"13":95,"14":498,"15":0,"16":95,"17":95,"18":95,"19":95,"20":95,"21":95,"22":6,"23":0,"24":0,"25":6,"26":6,"27":6,"28":6,"29":6,"30":6,"31":6,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":95,"39":0,"40":95,"41":6,"42":95,"43":6,"44":95,"45":0,"46":95,"47":1},"f":{"0":95,"1":83,"2":498,"3":6},"b":{"0":[0,498],"1":[0,6],"2":[6,0],"3":[6,0],"4":[0,6],"5":[0,0],"6":[0,0],"7":[0,95],"8":[6,89],"9":[6,89],"10":[95,6],"11":[0,95]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/state-score/hand-score.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/state-score/hand-score.ts"],"names":[],"mappings":";;;AAAA,qCAA+C;AAC/C,mCAAsC;AACtC,mEAA+D;AAC/D,qEAAiE;AACjE,iEAAsE;AACtE,qEAAiE;AAGjE,MAAa,SAAU,SAAQ,mBAAW;IAEjC,QAAQ,CAAC,KAAY,EAAE,QAAgB;QAC5C,MAAM,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;QAC/C,MAAM,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC;QAExC,MAAM,YAAY,GAAG,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC;QAEnE,MAAM,gBAAgB,GAAa,EAAE,CAAC;QACtC,MAAM,CAAC,cAAc,CAAC,iBAAU,CAAC,aAAa,EAAE,CAAC,QAAQ,EAAE,IAAI,EAAE,MAAM,EAAE,EAAE;YACzE,IAAI,QAAQ,CAAC,iBAAiB,GAAG,KAAK,CAAC,IAAI,EAAE;gBAC3C,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;aAClC;QACH,CAAC,CAAC,CAAC;QAEH,IAAI,KAAK,GAAG,CAAC,CAAC;QACd,IAAI,SAAS,GAAG,KAAK,CAAC;QACtB,IAAI,UAAU,GAAG,KAAK,CAAC;QACvB,IAAI,QAAQ,GAAG,KAAK,CAAC;QACrB,IAAI,YAAY,GAAG,KAAK,CAAC;QAEzB,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE;YAC5B,IAAI,CAAC,YAAY,wBAAU,EAAE;gBAC3B,SAAS,GAAG,IAAI,CAAC;gBACjB,KAAK,IAAI,MAAM,CAAC,SAAS,CAAC;aAC3B;iBAAM,IAAI,CAAC,YAAY,0BAAW,EAAE;gBACnC,UAAU,GAAG,IAAI,CAAC;gBAClB,KAAK,IAAI,MAAM,CAAC,SAAS,CAAC;gBAC1B,IAAI,CAAC,CAAC,KAAK,KAAK,kBAAK,CAAC,KAAK,EAAE;oBAC3B,QAAQ,GAAG,IAAI,CAAC;iBACjB;gBACD,MAAM,KAAK,GAAG,gBAAgB,CAAC,OAAO,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC;gBACtD,IAAI,KAAK,KAAK,CAAC,CAAC,EAAE;oBAChB,KAAK,IAAI,MAAM,CAAC,cAAc,CAAC;oBAC/B,gBAAgB,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;iBACnC;aACF;iBAAM,IAAI,CAAC,YAAY,0BAAW,EAAE;gBACnC,IAAI,CAAC,CAAC,WAAW,KAAK,wBAAW,CAAC,SAAS,EAAE;oBAC3C,YAAY,GAAG,IAAI,CAAC;iBACrB;gBACD,KAAK,IAAI,MAAM,CAAC,SAAS,CAAC;aAC3B;QACH,CAAC,CAAC,CAAC;QAEH,IAAI,SAAS,EAAE;YACb,KAAK,IAAI,MAAM,CAAC,SAAS,CAAC;SAC3B;QAED,IAAI,UAAU,EAAE;YACd,KAAK,IAAI,MAAM,CAAC,UAAU,CAAC;SAC5B;QAED,IAAI,QAAQ,IAAI,YAAY,EAAE;YAC5B,KAAK,IAAI,MAAM,CAAC,sBAAsB,CAAC;SACxC;QAED,IAAI,YAAY,EAAE;YAChB,KAAK,IAAI,MAAM,CAAC,YAAY,CAAC;SAC9B;QAED,OAAO,KAAK,CAAC;IACf,CAAC;CAEF;AA/DD,8BA+DC","sourcesContent":["import { State, PlayerType } from '../../game';\nimport { SimpleScore } from './score';\nimport { EnergyCard } from '../../game/store/card/energy-card';\nimport { PokemonCard } from '../../game/store/card/pokemon-card';\nimport { Stage, TrainerType } from '../../game/store/card/card-types';\nimport { TrainerCard } from '../../game/store/card/trainer-card';\n\n\nexport class HandScore extends SimpleScore {\n\n  public getScore(state: State, playerId: number): number {\n    const player = this.getPlayer(state, playerId);\n    const scores = this.options.scores.hand;\n\n    const isBenchEmpty = player.bench.every(b => b.cards.length === 0);\n\n    const pokemonsToEvolve: string[] = [];\n    player.forEachPokemon(PlayerType.BOTTOM_PLAYER, (cardList, card, target) => {\n      if (cardList.pokemonPlayedTurn < state.turn) {\n        pokemonsToEvolve.push(card.name);\n      }\n    });\n\n    let score = 0;\n    let hasEnergy = false;\n    let hasPokemon = false;\n    let hasBasic = false;\n    let hasSupporter = false;\n\n    player.hand.cards.forEach(c => {\n      if (c instanceof EnergyCard) {\n        hasEnergy = true;\n        score += scores.cardScore;\n      } else if (c instanceof PokemonCard) {\n        hasPokemon = true;\n        score += scores.cardScore;\n        if (c.stage === Stage.BASIC) {\n          hasBasic = true;\n        }\n        const index = pokemonsToEvolve.indexOf(c.evolvesFrom);\n        if (index !== -1) {\n          score += scores.evolutionScore;\n          pokemonsToEvolve.splice(index, 1);\n        }\n      } else if (c instanceof TrainerCard) {\n        if (c.trainerType === TrainerType.SUPPORTER) {\n          hasSupporter = true;\n        }\n        score += scores.itemScore;\n      }\n    });\n\n    if (hasEnergy) {\n      score += scores.hasEnergy;\n    }\n\n    if (hasPokemon) {\n      score += scores.hasPokemon;\n    }\n\n    if (hasBasic && isBenchEmpty) {\n      score += scores.hasBasicWhenBenchEmpty;\n    }\n\n    if (hasSupporter) {\n      score += scores.hasSupporter;\n    }\n\n    return score;\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"a7ed450d7ed9ba56fdbc1208c4fe2e4928e9e368","contentHash":"fdddc68e34e02ad8b5d94be25ecff9ea428d5552b74de46105ea494f3c1598f4"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/state-score/opponent-score.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/state-score/opponent-score.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":31}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":36}},"3":{"start":{"line":5,"column":16},"end":{"line":5,"column":34}},"4":{"start":{"line":8,"column":23},"end":{"line":8,"column":54}},"5":{"start":{"line":9,"column":25},"end":{"line":9,"column":69}},"6":{"start":{"line":10,"column":23},"end":{"line":10,"column":51}},"7":{"start":{"line":11,"column":20},"end":{"line":11,"column":21}},"8":{"start":{"line":13,"column":8},"end":{"line":13,"column":58}},"9":{"start":{"line":15,"column":8},"end":{"line":15,"column":58}},"10":{"start":{"line":17,"column":29},"end":{"line":17,"column":76}},"11":{"start":{"line":17,"column":55},"end":{"line":17,"column":75}},"12":{"start":{"line":18,"column":8},"end":{"line":20,"column":9}},"13":{"start":{"line":19,"column":12},"end":{"line":19,"column":39}},"14":{"start":{"line":22,"column":31},"end":{"line":22,"column":98}},"15":{"start":{"line":22,"column":64},"end":{"line":22,"column":97}},"16":{"start":{"line":23,"column":8},"end":{"line":25,"column":9}},"17":{"start":{"line":24,"column":12},"end":{"line":24,"column":43}},"18":{"start":{"line":26,"column":8},"end":{"line":30,"column":11}},"19":{"start":{"line":27,"column":29},"end":{"line":27,"column":87}},"20":{"start":{"line":27,"column":56},"end":{"line":27,"column":86}},"21":{"start":{"line":28,"column":12},"end":{"line":28,"column":53}},"22":{"start":{"line":29,"column":12},"end":{"line":29,"column":58}},"23":{"start":{"line":31,"column":8},"end":{"line":31,"column":21}},"24":{"start":{"line":34,"column":0},"end":{"line":34,"column":38}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":7,"column":4},"end":{"line":7,"column":5}},"loc":{"start":{"line":7,"column":30},"end":{"line":32,"column":5}},"line":7},"1":{"name":"(anonymous_1)","decl":{"start":{"line":17,"column":50},"end":{"line":17,"column":51}},"loc":{"start":{"line":17,"column":55},"end":{"line":17,"column":75}},"line":17},"2":{"name":"(anonymous_2)","decl":{"start":{"line":22,"column":59},"end":{"line":22,"column":60}},"loc":{"start":{"line":22,"column":64},"end":{"line":22,"column":97}},"line":22},"3":{"name":"(anonymous_3)","decl":{"start":{"line":26,"column":62},"end":{"line":26,"column":63}},"loc":{"start":{"line":26,"column":74},"end":{"line":30,"column":9}},"line":26},"4":{"name":"(anonymous_4)","decl":{"start":{"line":27,"column":51},"end":{"line":27,"column":52}},"loc":{"start":{"line":27,"column":56},"end":{"line":27,"column":86}},"line":27}},"branchMap":{"0":{"loc":{"start":{"line":18,"column":8},"end":{"line":20,"column":9}},"type":"if","locations":[{"start":{"line":18,"column":8},"end":{"line":20,"column":9}},{"start":{"line":18,"column":8},"end":{"line":20,"column":9}}],"line":18},"1":{"loc":{"start":{"line":23,"column":8},"end":{"line":25,"column":9}},"type":"if","locations":[{"start":{"line":23,"column":8},"end":{"line":25,"column":9}},{"start":{"line":23,"column":8},"end":{"line":25,"column":9}}],"line":23}},"s":{"0":1,"1":1,"2":1,"3":1,"4":83,"5":83,"6":83,"7":83,"8":83,"9":83,"10":83,"11":83,"12":83,"13":0,"14":83,"15":84,"16":83,"17":82,"18":83,"19":498,"20":504,"21":498,"22":498,"23":83,"24":1},"f":{"0":83,"1":83,"2":84,"3":498,"4":504},"b":{"0":[0,83],"1":[82,1]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/state-score/opponent-score.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/state-score/opponent-score.ts"],"names":[],"mappings":";;;AAAA,qCAAuE;AACvE,mCAAsC;AAGtC,MAAa,aAAc,SAAQ,mBAAW;IAErC,QAAQ,CAAC,KAAY,EAAE,QAAgB;QAC5C,MAAM,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;QAC/C,MAAM,QAAQ,GAAG,iBAAU,CAAC,WAAW,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;QACvD,MAAM,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,QAAQ,CAAC;QAE5C,IAAI,KAAK,GAAG,CAAC,CAAC;QAEd,sCAAsC;QACtC,KAAK,IAAI,MAAM,CAAC,IAAI,GAAG,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;QAElD,sCAAsC;QACtC,KAAK,IAAI,MAAM,CAAC,IAAI,GAAG,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;QAElD,qCAAqC;QACrC,MAAM,YAAY,GAAG,QAAQ,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC;QACrE,IAAI,YAAY,EAAE;YAChB,KAAK,IAAI,MAAM,CAAC,UAAU,CAAC;SAC5B;QAED,2CAA2C;QAC3C,MAAM,cAAc,GAAG,QAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,YAAY,iBAAU,CAAC,CAAC,CAAC;QACpF,IAAI,cAAc,EAAE;YAClB,KAAK,IAAI,MAAM,CAAC,cAAc,CAAC;SAChC;QAED,QAAQ,CAAC,cAAc,CAAC,iBAAU,CAAC,UAAU,EAAE,QAAQ,CAAC,EAAE;YACxD,MAAM,QAAQ,GAAG,QAAQ,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,YAAY,iBAAU,CAAC,CAAC;YACrE,KAAK,IAAI,MAAM,CAAC,MAAM,GAAG,QAAQ,CAAC,MAAM,CAAC;YACzC,KAAK,IAAI,MAAM,CAAC,KAAK,GAAG,QAAQ,CAAC,KAAK,CAAC,MAAM,CAAC;QAChD,CAAC,CAAC,CAAC;QAEH,OAAO,KAAK,CAAC;IACf,CAAC;CAEF;AApCD,sCAoCC","sourcesContent":["import { State, StateUtils, EnergyCard, PlayerType } from '../../game';\nimport { SimpleScore } from './score';\n\n\nexport class OpponentScore extends SimpleScore {\n\n  public getScore(state: State, playerId: number): number {\n    const player = this.getPlayer(state, playerId);\n    const opponent = StateUtils.getOpponent(state, player);\n    const scores = this.options.scores.opponent;\n\n    let score = 0;\n\n    // for each card in the opponents deck\n    score += scores.deck * opponent.deck.cards.length;\n\n    // for each card in the opponents hand\n    score += scores.hand * opponent.hand.cards.length;\n\n    // bonus if opponent's bench is empty\n    const isBenchEmpty = opponent.bench.every(b => b.cards.length === 0);\n    if (isBenchEmpty) {\n      score += scores.emptyBench;\n    }\n\n    // Opponent's active has no attached energy\n    const noActiveEnergy = opponent.active.cards.every(c => !(c instanceof EnergyCard));\n    if (noActiveEnergy) {\n      score += scores.noActiveEnergy;\n    }\n\n    opponent.forEachPokemon(PlayerType.TOP_PLAYER, cardList => {\n      const energies = cardList.cards.filter(c => c instanceof EnergyCard);\n      score += scores.energy * energies.length;\n      score += scores.board * cardList.cards.length;\n    });\n\n    return score;\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"79121a3298c2dc7ea4ba0d47194ac42bf7eb1045","contentHash":"5f03ee06fff4b1c21380f8fe3600190de0812d8f21baf37f728e5cb4ff37f37e"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/state-score/player-score.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/state-score/player-score.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":29}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":36}},"3":{"start":{"line":5,"column":16},"end":{"line":5,"column":34}},"4":{"start":{"line":8,"column":23},"end":{"line":8,"column":54}},"5":{"start":{"line":9,"column":25},"end":{"line":9,"column":69}},"6":{"start":{"line":10,"column":23},"end":{"line":10,"column":49}},"7":{"start":{"line":11,"column":20},"end":{"line":11,"column":21}},"8":{"start":{"line":13,"column":26},"end":{"line":13,"column":53}},"9":{"start":{"line":14,"column":8},"end":{"line":16,"column":9}},"10":{"start":{"line":15,"column":12},"end":{"line":15,"column":64}},"11":{"start":{"line":17,"column":26},"end":{"line":17,"column":53}},"12":{"start":{"line":18,"column":8},"end":{"line":20,"column":9}},"13":{"start":{"line":19,"column":12},"end":{"line":19,"column":64}},"14":{"start":{"line":22,"column":29},"end":{"line":22,"column":76}},"15":{"start":{"line":22,"column":55},"end":{"line":22,"column":75}},"16":{"start":{"line":23,"column":31},"end":{"line":23,"column":80}},"17":{"start":{"line":23,"column":59},"end":{"line":23,"column":79}},"18":{"start":{"line":24,"column":8},"end":{"line":24,"column":78}},"19":{"start":{"line":26,"column":8},"end":{"line":26,"column":56}},"20":{"start":{"line":28,"column":8},"end":{"line":30,"column":9}},"21":{"start":{"line":29,"column":12},"end":{"line":29,"column":77}},"22":{"start":{"line":31,"column":8},"end":{"line":31,"column":21}},"23":{"start":{"line":34,"column":0},"end":{"line":34,"column":34}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":7,"column":4},"end":{"line":7,"column":5}},"loc":{"start":{"line":7,"column":30},"end":{"line":32,"column":5}},"line":7},"1":{"name":"(anonymous_1)","decl":{"start":{"line":22,"column":50},"end":{"line":22,"column":51}},"loc":{"start":{"line":22,"column":55},"end":{"line":22,"column":75}},"line":22},"2":{"name":"(anonymous_2)","decl":{"start":{"line":23,"column":54},"end":{"line":23,"column":55}},"loc":{"start":{"line":23,"column":59},"end":{"line":23,"column":79}},"line":23}},"branchMap":{"0":{"loc":{"start":{"line":14,"column":8},"end":{"line":16,"column":9}},"type":"if","locations":[{"start":{"line":14,"column":8},"end":{"line":16,"column":9}},{"start":{"line":14,"column":8},"end":{"line":16,"column":9}}],"line":14},"1":{"loc":{"start":{"line":15,"column":21},"end":{"line":15,"column":63}},"type":"cond-expr","locations":[{"start":{"line":15,"column":33},"end":{"line":15,"column":46}},{"start":{"line":15,"column":49},"end":{"line":15,"column":63}}],"line":15},"2":{"loc":{"start":{"line":18,"column":8},"end":{"line":20,"column":9}},"type":"if","locations":[{"start":{"line":18,"column":8},"end":{"line":20,"column":9}},{"start":{"line":18,"column":8},"end":{"line":20,"column":9}}],"line":18},"3":{"loc":{"start":{"line":19,"column":21},"end":{"line":19,"column":63}},"type":"cond-expr","locations":[{"start":{"line":19,"column":33},"end":{"line":19,"column":46}},{"start":{"line":19,"column":49},"end":{"line":19,"column":63}}],"line":19},"4":{"loc":{"start":{"line":28,"column":8},"end":{"line":30,"column":9}},"type":"if","locations":[{"start":{"line":28,"column":8},"end":{"line":30,"column":9}},{"start":{"line":28,"column":8},"end":{"line":30,"column":9}}],"line":28}},"s":{"0":1,"1":1,"2":1,"3":1,"4":83,"5":83,"6":83,"7":83,"8":83,"9":83,"10":0,"11":83,"12":83,"13":0,"14":83,"15":0,"16":83,"17":0,"18":83,"19":83,"20":83,"21":83,"22":83,"23":1},"f":{"0":83,"1":0,"2":0},"b":{"0":[0,83],"1":[0,0],"2":[0,83],"3":[0,0],"4":[83,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/state-score/player-score.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/state-score/player-score.ts"],"names":[],"mappings":";;;AAAA,qCAA2D;AAC3D,mCAAsC;AAEtC,MAAa,WAAY,SAAQ,mBAAW;IAEnC,QAAQ,CAAC,KAAY,EAAE,QAAgB;QAC5C,MAAM,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;QAC/C,MAAM,QAAQ,GAAG,iBAAU,CAAC,WAAW,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;QACvD,MAAM,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC;QAE1C,IAAI,KAAK,GAAG,CAAC,CAAC;QAEd,uCAAuC;QACvC,MAAM,SAAS,GAAG,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,MAAM,CAAC;QAC9C,IAAI,KAAK,CAAC,MAAM,KAAK,iBAAU,CAAC,QAAQ,EAAE;YACxC,KAAK,IAAI,SAAS,CAAC,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC;SACrD;QACD,MAAM,SAAS,GAAG,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,MAAM,CAAC;QAC9C,IAAI,KAAK,CAAC,MAAM,KAAK,iBAAU,CAAC,QAAQ,EAAE;YACxC,KAAK,IAAI,SAAS,CAAC,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC;SACrD;QAED,qDAAqD;QACrD,MAAM,YAAY,GAAG,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC;QACrE,MAAM,cAAc,GAAG,QAAQ,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC;QACzE,KAAK,IAAI,MAAM,CAAC,KAAK,GAAG,CAAC,cAAc,CAAC,MAAM,GAAG,YAAY,CAAC,MAAM,CAAC,CAAC;QAEtE,oCAAoC;QACpC,KAAK,IAAI,MAAM,CAAC,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;QAEhD,iDAAiD;QACjD,IAAI,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,EAAE,EAAE;YACjC,KAAK,IAAI,MAAM,CAAC,cAAc,GAAG,CAAC,EAAE,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;SAClE;QAED,OAAO,KAAK,CAAC;IACf,CAAC;CAEF;AAnCD,kCAmCC","sourcesContent":["import { State, StateUtils, GameWinner } from '../../game';\nimport { SimpleScore } from './score';\n\nexport class PlayerScore extends SimpleScore {\n\n  public getScore(state: State, playerId: number): number {\n    const player = this.getPlayer(state, playerId);\n    const opponent = StateUtils.getOpponent(state, player);\n    const scores = this.options.scores.player;\n\n    let score = 0;\n\n    // 10000 points if we have won the game\n    const isPlayer1 = state.players[0] === player;\n    if (state.winner === GameWinner.PLAYER_1) {\n      score += isPlayer1 ? scores.winner : -scores.winner;\n    }\n    const isPlayer2 = state.players[1] === player;\n    if (state.winner === GameWinner.PLAYER_2) {\n      score += isPlayer2 ? scores.winner : -scores.winner;\n    }\n\n    // 1000 points for each prize card less than opponent\n    const playerPrizes = player.prizes.filter(p => p.cards.length !== 0);\n    const opponentPrizes = opponent.prizes.filter(p => p.cards.length !== 0);\n    score += scores.prize * (opponentPrizes.length - playerPrizes.length);\n\n    // 1 point for each card in the deck\n    score += scores.deck * player.deck.cards.length;\n\n    // -10 points, if our deck has less than 10 cards\n    if (player.deck.cards.length < 10) {\n      score += scores.deckLessThan10 * (10 - player.deck.cards.length);\n    }\n\n    return score;\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"7ec0fded1ff02548a9cb30ea7931b01053afe8c1","contentHash":"51763aecfb7e1cf48356d37d54603f8286117c0905fe81e91b7b35e95da64e56"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/state-score/special-conditions-score.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/state-score/special-conditions-score.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":40}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":36}},"3":{"start":{"line":5,"column":16},"end":{"line":5,"column":34}},"4":{"start":{"line":6,"column":21},"end":{"line":6,"column":64}},"5":{"start":{"line":9,"column":23},"end":{"line":9,"column":54}},"6":{"start":{"line":10,"column":25},"end":{"line":10,"column":69}},"7":{"start":{"line":11,"column":20},"end":{"line":11,"column":21}},"8":{"start":{"line":12,"column":8},"end":{"line":12,"column":48}},"9":{"start":{"line":13,"column":8},"end":{"line":13,"column":50}},"10":{"start":{"line":14,"column":8},"end":{"line":14,"column":21}},"11":{"start":{"line":17,"column":23},"end":{"line":17,"column":60}},"12":{"start":{"line":18,"column":20},"end":{"line":18,"column":21}},"13":{"start":{"line":19,"column":8},"end":{"line":37,"column":11}},"14":{"start":{"line":20,"column":12},"end":{"line":36,"column":13}},"15":{"start":{"line":22,"column":20},"end":{"line":22,"column":46}},"16":{"start":{"line":23,"column":20},"end":{"line":23,"column":26}},"17":{"start":{"line":25,"column":20},"end":{"line":25,"column":45}},"18":{"start":{"line":26,"column":20},"end":{"line":26,"column":26}},"19":{"start":{"line":28,"column":20},"end":{"line":28,"column":43}},"20":{"start":{"line":29,"column":20},"end":{"line":29,"column":26}},"21":{"start":{"line":31,"column":20},"end":{"line":31,"column":45}},"22":{"start":{"line":32,"column":20},"end":{"line":32,"column":26}},"23":{"start":{"line":34,"column":20},"end":{"line":34,"column":45}},"24":{"start":{"line":35,"column":20},"end":{"line":35,"column":26}},"25":{"start":{"line":38,"column":8},"end":{"line":38,"column":21}},"26":{"start":{"line":41,"column":0},"end":{"line":41,"column":56}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":8,"column":4},"end":{"line":8,"column":5}},"loc":{"start":{"line":8,"column":30},"end":{"line":15,"column":5}},"line":8},"1":{"name":"(anonymous_1)","decl":{"start":{"line":16,"column":4},"end":{"line":16,"column":5}},"loc":{"start":{"line":16,"column":30},"end":{"line":39,"column":5}},"line":16},"2":{"name":"(anonymous_2)","decl":{"start":{"line":19,"column":48},"end":{"line":19,"column":49}},"loc":{"start":{"line":19,"column":61},"end":{"line":37,"column":9}},"line":19}},"branchMap":{"0":{"loc":{"start":{"line":20,"column":12},"end":{"line":36,"column":13}},"type":"switch","locations":[{"start":{"line":21,"column":16},"end":{"line":23,"column":26}},{"start":{"line":24,"column":16},"end":{"line":26,"column":26}},{"start":{"line":27,"column":16},"end":{"line":29,"column":26}},{"start":{"line":30,"column":16},"end":{"line":32,"column":26}},{"start":{"line":33,"column":16},"end":{"line":35,"column":26}}],"line":20}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":83,"6":83,"7":83,"8":83,"9":83,"10":83,"11":166,"12":166,"13":166,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":166,"26":1},"f":{"0":83,"1":166,"2":0},"b":{"0":[0,0,0,0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/state-score/special-conditions-score.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/state-score/special-conditions-score.ts"],"names":[],"mappings":";;;AAAA,qCAAuD;AACvD,mCAAsC;AACtC,iEAAoE;AAGpE,MAAa,sBAAuB,SAAQ,mBAAW;IAE9C,QAAQ,CAAC,KAAY,EAAE,QAAgB;QAC5C,MAAM,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;QAC/C,MAAM,QAAQ,GAAG,iBAAU,CAAC,WAAW,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;QAEvD,IAAI,KAAK,GAAG,CAAC,CAAC;QACd,KAAK,IAAI,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC;QACxC,KAAK,IAAI,IAAI,CAAC,iBAAiB,CAAC,QAAQ,CAAC,CAAC;QAE1C,OAAO,KAAK,CAAC;IACf,CAAC;IAEO,iBAAiB,CAAC,MAAc;QACtC,MAAM,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,iBAAiB,CAAC;QACrD,IAAI,KAAK,GAAG,CAAC,CAAC;QACd,MAAM,CAAC,MAAM,CAAC,iBAAiB,CAAC,OAAO,CAAC,SAAS,CAAC,EAAE;YAClD,QAAQ,SAAS,EAAE;gBACjB,KAAK,6BAAgB,CAAC,SAAS;oBAC7B,KAAK,IAAI,MAAM,CAAC,SAAS,CAAC;oBAC1B,MAAM;gBACR,KAAK,6BAAgB,CAAC,QAAQ;oBAC5B,KAAK,IAAI,MAAM,CAAC,QAAQ,CAAC;oBACzB,MAAM;gBACR,KAAK,6BAAgB,CAAC,MAAM;oBAC1B,KAAK,IAAI,MAAM,CAAC,MAAM,CAAC;oBACvB,MAAM;gBACR,KAAK,6BAAgB,CAAC,QAAQ;oBAC5B,KAAK,IAAI,MAAM,CAAC,QAAQ,CAAC;oBACzB,MAAM;gBACR,KAAK,6BAAgB,CAAC,MAAM;oBAC1B,KAAK,IAAI,MAAM,CAAC,QAAQ,CAAC;oBACzB,MAAM;aACT;QACH,CAAC,CAAC,CAAC;QACH,OAAO,KAAK,CAAC;IACf,CAAC;CAEF;AAtCD,wDAsCC","sourcesContent":["import { State, StateUtils, Player } from '../../game';\nimport { SimpleScore } from './score';\nimport { SpecialCondition } from '../../game/store/card/card-types';\n\n\nexport class SpecialConditionsScore extends SimpleScore {\n\n  public getScore(state: State, playerId: number): number {\n    const player = this.getPlayer(state, playerId);\n    const opponent = StateUtils.getOpponent(state, player);\n\n    let score = 0;\n    score += this.getScoreForPlayer(player);\n    score -= this.getScoreForPlayer(opponent);\n\n    return score;\n  }\n\n  private getScoreForPlayer(player: Player): number {\n    const scores = this.options.scores.specialConditions;\n    let score = 0;\n    player.active.specialConditions.forEach(condition => {\n      switch (condition) {\n        case SpecialCondition.PARALYZED:\n          score += scores.paralyzed;\n          break;\n        case SpecialCondition.CONFUSED:\n          score += scores.confused;\n          break;\n        case SpecialCondition.ASLEEP:\n          score += scores.asleep;\n          break;\n        case SpecialCondition.POISONED:\n          score += scores.poisoned;\n          break;\n        case SpecialCondition.BURNED:\n          score += scores.confused;\n          break;\n      }\n    });\n    return score;\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"b183e0b3b28fbdff720d519b0451976c8e0add83","contentHash":"6b699c825d2546c2810551b2156ea164f1a43662b4bb2f78b8ad990eb83b74fc"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/state-score/active-score.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/state-score/active-score.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":29}},"2":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"3":{"start":{"line":7,"column":23},"end":{"line":7,"column":54}},"4":{"start":{"line":8,"column":8},"end":{"line":8,"column":81}},"5":{"start":{"line":11,"column":0},"end":{"line":11,"column":34}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":4},"end":{"line":6,"column":5}},"loc":{"start":{"line":6,"column":30},"end":{"line":9,"column":5}},"line":6}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":83,"4":83,"5":1},"f":{"0":83},"b":{},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/state-score/active-score.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/state-score/active-score.ts"],"names":[],"mappings":";;;AACA,mCAAsC;AAEtC,MAAa,WAAY,SAAQ,mBAAW;IAEnC,QAAQ,CAAC,KAAY,EAAE,QAAgB;QAC5C,MAAM,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;QAC/C,OAAO,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC;IAC3E,CAAC;CAEF;AAPD,kCAOC","sourcesContent":["import { State } from '../../game';\nimport { SimpleScore } from './score';\n\nexport class ActiveScore extends SimpleScore {\n\n  public getScore(state: State, playerId: number): number {\n    const player = this.getPlayer(state, playerId);\n    return this.getPokemonScoreBy(this.options.scores.active, player.active);\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"2e8a308602d4964d2d788bbc4d74708a61de8687","contentHash":"f670bd6f1fb06d3ba892b6d595548a7403dcb34e186ff3fb279fed0026ad6104"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/state-score/bench-score.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/state-score/bench-score.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":28}},"2":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"3":{"start":{"line":7,"column":23},"end":{"line":7,"column":54}},"4":{"start":{"line":8,"column":23},"end":{"line":8,"column":48}},"5":{"start":{"line":9,"column":20},"end":{"line":9,"column":21}},"6":{"start":{"line":10,"column":8},"end":{"line":10,"column":83}},"7":{"start":{"line":10,"column":36},"end":{"line":10,"column":79}},"8":{"start":{"line":11,"column":8},"end":{"line":11,"column":21}},"9":{"start":{"line":14,"column":0},"end":{"line":14,"column":32}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":4},"end":{"line":6,"column":5}},"loc":{"start":{"line":6,"column":30},"end":{"line":12,"column":5}},"line":6},"1":{"name":"(anonymous_1)","decl":{"start":{"line":10,"column":29},"end":{"line":10,"column":30}},"loc":{"start":{"line":10,"column":34},"end":{"line":10,"column":81}},"line":10}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":83,"4":83,"5":83,"6":83,"7":415,"8":83,"9":1},"f":{"0":83,"1":415},"b":{},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/state-score/bench-score.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/state-score/bench-score.ts"],"names":[],"mappings":";;;AACA,mCAAsC;AAEtC,MAAa,UAAW,SAAQ,mBAAW;IAElC,QAAQ,CAAC,KAAY,EAAE,QAAgB;QAC5C,MAAM,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;QAC/C,MAAM,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;QAEzC,IAAI,KAAK,GAAG,CAAC,CAAC;QACd,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,GAAG,KAAK,IAAI,IAAI,CAAC,iBAAiB,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC3E,OAAO,KAAK,CAAC;IACf,CAAC;CAEF;AAXD,gCAWC","sourcesContent":["import { State } from '../../game';\nimport { SimpleScore } from './score';\n\nexport class BenchScore extends SimpleScore {\n\n  public getScore(state: State, playerId: number): number {\n    const player = this.getPlayer(state, playerId);\n    const scores = this.options.scores.bench;\n    \n    let score = 0;\n    player.bench.forEach(b => { score += this.getPokemonScoreBy(scores, b); });\n    return score;\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"bdd8b903373234d2186196ebc54cbc10fd866fc0","contentHash":"523237b52ddd2fa6efa56053ca35e92d8135aebd18f047eaaad0807c99e05274"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/state-score/energy-score.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/state-score/energy-score.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":29}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":36}},"3":{"start":{"line":5,"column":16},"end":{"line":5,"column":34}},"4":{"start":{"line":8,"column":23},"end":{"line":8,"column":54}},"5":{"start":{"line":9,"column":23},"end":{"line":9,"column":49}},"6":{"start":{"line":10,"column":20},"end":{"line":10,"column":21}},"7":{"start":{"line":11,"column":8},"end":{"line":25,"column":11}},"8":{"start":{"line":12,"column":26},"end":{"line":12,"column":76}},"9":{"start":{"line":13,"column":12},"end":{"line":16,"column":15}},"10":{"start":{"line":14,"column":33},"end":{"line":14,"column":74}},"11":{"start":{"line":15,"column":16},"end":{"line":15,"column":63}},"12":{"start":{"line":17,"column":30},"end":{"line":19,"column":30}},"13":{"start":{"line":20,"column":12},"end":{"line":24,"column":15}},"14":{"start":{"line":21,"column":16},"end":{"line":23,"column":54}},"15":{"start":{"line":26,"column":8},"end":{"line":26,"column":21}},"16":{"start":{"line":29,"column":19},"end":{"line":29,"column":20}},"17":{"start":{"line":30,"column":8},"end":{"line":30,"column":78}},"18":{"start":{"line":30,"column":32},"end":{"line":30,"column":74}},"19":{"start":{"line":31,"column":8},"end":{"line":31,"column":67}},"20":{"start":{"line":31,"column":40},"end":{"line":31,"column":65}},"21":{"start":{"line":32,"column":19},"end":{"line":32,"column":20}},"22":{"start":{"line":33,"column":8},"end":{"line":33,"column":78}},"23":{"start":{"line":33,"column":32},"end":{"line":33,"column":74}},"24":{"start":{"line":34,"column":8},"end":{"line":34,"column":67}},"25":{"start":{"line":34,"column":40},"end":{"line":34,"column":65}},"26":{"start":{"line":35,"column":8},"end":{"line":43,"column":11}},"27":{"start":{"line":36,"column":26},"end":{"line":36,"column":45}},"28":{"start":{"line":37,"column":12},"end":{"line":42,"column":13}},"29":{"start":{"line":38,"column":16},"end":{"line":38,"column":42}},"30":{"start":{"line":40,"column":17},"end":{"line":42,"column":13}},"31":{"start":{"line":41,"column":16},"end":{"line":41,"column":26}},"32":{"start":{"line":44,"column":8},"end":{"line":46,"column":11}},"33":{"start":{"line":45,"column":12},"end":{"line":45,"column":29}},"34":{"start":{"line":47,"column":20},"end":{"line":47,"column":40}},"35":{"start":{"line":48,"column":8},"end":{"line":50,"column":9}},"36":{"start":{"line":48,"column":21},"end":{"line":48,"column":22}},"37":{"start":{"line":49,"column":12},"end":{"line":49,"column":47}},"38":{"start":{"line":51,"column":8},"end":{"line":51,"column":24}},"39":{"start":{"line":54,"column":8},"end":{"line":56,"column":9}},"40":{"start":{"line":55,"column":12},"end":{"line":55,"column":22}},"41":{"start":{"line":57,"column":25},"end":{"line":57,"column":27}},"42":{"start":{"line":58,"column":8},"end":{"line":62,"column":11}},"43":{"start":{"line":59,"column":12},"end":{"line":61,"column":13}},"44":{"start":{"line":60,"column":16},"end":{"line":60,"column":71}},"45":{"start":{"line":60,"column":48},"end":{"line":60,"column":69}},"46":{"start":{"line":63,"column":24},"end":{"line":63,"column":26}},"47":{"start":{"line":64,"column":24},"end":{"line":64,"column":25}},"48":{"start":{"line":66,"column":8},"end":{"line":84,"column":11}},"49":{"start":{"line":67,"column":12},"end":{"line":83,"column":13}},"50":{"start":{"line":70,"column":20},"end":{"line":70,"column":26}},"51":{"start":{"line":72,"column":20},"end":{"line":72,"column":35}},"52":{"start":{"line":73,"column":20},"end":{"line":73,"column":26}},"53":{"start":{"line":75,"column":34},"end":{"line":75,"column":83}},"54":{"start":{"line":75,"column":63},"end":{"line":75,"column":82}},"55":{"start":{"line":76,"column":20},"end":{"line":81,"column":21}},"56":{"start":{"line":77,"column":24},"end":{"line":77,"column":50}},"57":{"start":{"line":80,"column":24},"end":{"line":80,"column":47}},"58":{"start":{"line":85,"column":8},"end":{"line":85,"column":37}},"59":{"start":{"line":86,"column":8},"end":{"line":88,"column":9}},"60":{"start":{"line":86,"column":21},"end":{"line":86,"column":22}},"61":{"start":{"line":87,"column":12},"end":{"line":87,"column":46}},"62":{"start":{"line":89,"column":8},"end":{"line":89,"column":23}},"63":{"start":{"line":92,"column":0},"end":{"line":92,"column":34}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":7,"column":4},"end":{"line":7,"column":5}},"loc":{"start":{"line":7,"column":30},"end":{"line":27,"column":5}},"line":7},"1":{"name":"(anonymous_1)","decl":{"start":{"line":11,"column":63},"end":{"line":11,"column":64}},"loc":{"start":{"line":11,"column":94},"end":{"line":25,"column":9}},"line":11},"2":{"name":"(anonymous_2)","decl":{"start":{"line":13,"column":36},"end":{"line":13,"column":37}},"loc":{"start":{"line":13,"column":41},"end":{"line":16,"column":13}},"line":13},"3":{"name":"(anonymous_3)","decl":{"start":{"line":20,"column":28},"end":{"line":20,"column":29}},"loc":{"start":{"line":20,"column":33},"end":{"line":24,"column":13}},"line":20},"4":{"name":"(anonymous_4)","decl":{"start":{"line":28,"column":4},"end":{"line":28,"column":5}},"loc":{"start":{"line":28,"column":37},"end":{"line":52,"column":5}},"line":28},"5":{"name":"(anonymous_5)","decl":{"start":{"line":30,"column":25},"end":{"line":30,"column":26}},"loc":{"start":{"line":30,"column":30},"end":{"line":30,"column":76}},"line":30},"6":{"name":"(anonymous_6)","decl":{"start":{"line":31,"column":35},"end":{"line":31,"column":36}},"loc":{"start":{"line":31,"column":40},"end":{"line":31,"column":65}},"line":31},"7":{"name":"(anonymous_7)","decl":{"start":{"line":33,"column":25},"end":{"line":33,"column":26}},"loc":{"start":{"line":33,"column":30},"end":{"line":33,"column":76}},"line":33},"8":{"name":"(anonymous_8)","decl":{"start":{"line":34,"column":35},"end":{"line":34,"column":36}},"loc":{"start":{"line":34,"column":40},"end":{"line":34,"column":65}},"line":34},"9":{"name":"(anonymous_9)","decl":{"start":{"line":35,"column":25},"end":{"line":35,"column":26}},"loc":{"start":{"line":35,"column":30},"end":{"line":43,"column":9}},"line":35},"10":{"name":"(anonymous_10)","decl":{"start":{"line":44,"column":25},"end":{"line":44,"column":26}},"loc":{"start":{"line":44,"column":30},"end":{"line":46,"column":9}},"line":44},"11":{"name":"(anonymous_11)","decl":{"start":{"line":53,"column":4},"end":{"line":53,"column":5}},"loc":{"start":{"line":53,"column":39},"end":{"line":90,"column":5}},"line":53},"12":{"name":"(anonymous_12)","decl":{"start":{"line":58,"column":31},"end":{"line":58,"column":32}},"loc":{"start":{"line":58,"column":39},"end":{"line":62,"column":9}},"line":58},"13":{"name":"(anonymous_13)","decl":{"start":{"line":60,"column":38},"end":{"line":60,"column":39}},"loc":{"start":{"line":60,"column":48},"end":{"line":60,"column":69}},"line":60},"14":{"name":"(anonymous_14)","decl":{"start":{"line":66,"column":21},"end":{"line":66,"column":22}},"loc":{"start":{"line":66,"column":33},"end":{"line":84,"column":9}},"line":66},"15":{"name":"(anonymous_15)","decl":{"start":{"line":75,"column":53},"end":{"line":75,"column":54}},"loc":{"start":{"line":75,"column":63},"end":{"line":75,"column":82}},"line":75}},"branchMap":{"0":{"loc":{"start":{"line":17,"column":30},"end":{"line":19,"column":30}},"type":"cond-expr","locations":[{"start":{"line":18,"column":18},"end":{"line":18,"column":31}},{"start":{"line":19,"column":18},"end":{"line":19,"column":30}}],"line":17},"1":{"loc":{"start":{"line":21,"column":25},"end":{"line":23,"column":53}},"type":"cond-expr","locations":[{"start":{"line":22,"column":22},"end":{"line":22,"column":57}},{"start":{"line":23,"column":22},"end":{"line":23,"column":53}}],"line":21},"2":{"loc":{"start":{"line":30,"column":40},"end":{"line":30,"column":73}},"type":"cond-expr","locations":[{"start":{"line":30,"column":68},"end":{"line":30,"column":69}},{"start":{"line":30,"column":72},"end":{"line":30,"column":73}}],"line":30},"3":{"loc":{"start":{"line":33,"column":40},"end":{"line":33,"column":73}},"type":"cond-expr","locations":[{"start":{"line":33,"column":68},"end":{"line":33,"column":69}},{"start":{"line":33,"column":72},"end":{"line":33,"column":73}}],"line":33},"4":{"loc":{"start":{"line":37,"column":12},"end":{"line":42,"column":13}},"type":"if","locations":[{"start":{"line":37,"column":12},"end":{"line":42,"column":13}},{"start":{"line":37,"column":12},"end":{"line":42,"column":13}}],"line":37},"5":{"loc":{"start":{"line":40,"column":17},"end":{"line":42,"column":13}},"type":"if","locations":[{"start":{"line":40,"column":17},"end":{"line":42,"column":13}},{"start":{"line":40,"column":17},"end":{"line":42,"column":13}}],"line":40},"6":{"loc":{"start":{"line":54,"column":8},"end":{"line":56,"column":9}},"type":"if","locations":[{"start":{"line":54,"column":8},"end":{"line":56,"column":9}},{"start":{"line":54,"column":8},"end":{"line":56,"column":9}}],"line":54},"7":{"loc":{"start":{"line":59,"column":12},"end":{"line":61,"column":13}},"type":"if","locations":[{"start":{"line":59,"column":12},"end":{"line":61,"column":13}},{"start":{"line":59,"column":12},"end":{"line":61,"column":13}}],"line":59},"8":{"loc":{"start":{"line":67,"column":12},"end":{"line":83,"column":13}},"type":"switch","locations":[{"start":{"line":68,"column":16},"end":{"line":68,"column":41}},{"start":{"line":69,"column":16},"end":{"line":70,"column":26}},{"start":{"line":71,"column":16},"end":{"line":73,"column":26}},{"start":{"line":74,"column":16},"end":{"line":82,"column":17}}],"line":67},"9":{"loc":{"start":{"line":76,"column":20},"end":{"line":81,"column":21}},"type":"if","locations":[{"start":{"line":76,"column":20},"end":{"line":81,"column":21}},{"start":{"line":76,"column":20},"end":{"line":81,"column":21}}],"line":76}},"s":{"0":1,"1":1,"2":1,"3":1,"4":83,"5":83,"6":83,"7":83,"8":498,"9":498,"10":0,"11":0,"12":498,"13":498,"14":113,"15":83,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":498,"40":390,"41":108,"42":108,"43":166,"44":58,"45":58,"46":108,"47":108,"48":108,"49":167,"50":0,"51":167,"52":167,"53":0,"54":0,"55":0,"56":0,"57":0,"58":108,"59":108,"60":108,"61":113,"62":108,"63":1},"f":{"0":83,"1":498,"2":0,"3":113,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":498,"12":166,"13":58,"14":167,"15":0},"b":{"0":[83,415],"1":[113,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[390,108],"7":[58,108],"8":[0,0,167,0],"9":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/state-score/energy-score.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/state-score/energy-score.ts"],"names":[],"mappings":"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","sourcesContent":["import { State, PokemonCardList, CardType, EnergyCard, PlayerType } from '../../game';\nimport { SimpleScore } from './score';\n\nexport class EnergyScore extends SimpleScore {\n\n  public getScore(state: State, playerId: number): number {\n    const player = this.getPlayer(state, playerId);\n    const scores = this.options.scores.energy;\n    let score = 0;\n\n    player.forEachPokemon(PlayerType.BOTTOM_PLAYER, (cardList, pokemon, target) => {\n      let missing: CardType[] = this.getMissingEnergies(cardList, pokemon.retreat);\n      pokemon.attacks.forEach(a => {\n        const missing2 = this.getMissingEnergies(cardList, a.cost);\n        missing = this.mergeMissing(missing, missing2);\n      });\n\n      const multipier = cardList === player.active\n        ? scores.active\n        : scores.bench;\n\n      missing.forEach(p => {\n        score += p === CardType.ANY\n          ? scores.missingColorless * multipier\n          : scores.missingMatch * multipier;\n      });\n    });\n\n    return score;\n  }\n\n  private mergeMissing(missing1: CardType[], missing2: CardType[]): CardType[] {\n    let any1 = 0;\n    missing1.forEach(c => { any1 += c === CardType.ANY ? 1 : 0; });\n    missing1 = missing1.filter(c => c !== CardType.ANY);\n    let any2 = 0;\n    missing2.forEach(c => { any2 += c === CardType.ANY ? 1 : 0; });\n    missing2 = missing2.filter(c => c !== CardType.ANY);\n\n    missing1.forEach(c => {\n      const index = missing2.indexOf(c);\n      if (index !== -1) {\n        missing2.splice(index, 1);\n      } else if (any2 > 0) {\n        any2 -= 1;\n      }\n    });\n\n    missing2.forEach(c => {\n      missing1.push(c);\n    });\n\n    const max = Math.max(any1, any2);\n    for (let i = 0; i < max ; i++) {\n      missing1.push(CardType.ANY);\n    }\n\n    return missing1;\n  }\n\n\n  private getMissingEnergies(cardList: PokemonCardList, cost: CardType[]): CardType[] {\n    if (cost.length === 0) {\n      return [];\n    }\n\n    const provided: CardType[] = [];\n    cardList.cards.forEach(card => {\n      if (card instanceof EnergyCard) {\n        card.provides.forEach(energy => provided.push(energy));\n      }\n    });\n\n    const missing: CardType[] = [];\n    let colorless = 0;\n    // First remove from array cards with specific energy types\n    cost.forEach(costType => {\n      switch (costType) {\n        case CardType.ANY:\n        case CardType.NONE:\n          break;\n        case CardType.COLORLESS:\n          colorless += 1;\n          break;\n        default: {\n          const index = provided.findIndex(energy => energy === costType);\n          if (index !== -1) {\n            provided.splice(index, 1);\n          } else {\n            missing.push(costType);\n          }\n        }\n      }\n    });\n\n    colorless -= provided.length;\n\n    for (let i = 0; i < colorless; i++) {\n      missing.push(CardType.ANY);\n    }\n\n    return missing;\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"c67435f4b71f9571daf003f459d0b4ce74fffff2","contentHash":"78fb2f3dc36d44c3f894b4cc88c6fa3630c2651cd93c79e4c14c76a1fce43736"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/state-score/damage-score.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/state-score/damage-score.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":29}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":36}},"3":{"start":{"line":5,"column":16},"end":{"line":5,"column":34}},"4":{"start":{"line":8,"column":23},"end":{"line":8,"column":54}},"5":{"start":{"line":9,"column":25},"end":{"line":9,"column":69}},"6":{"start":{"line":10,"column":30},"end":{"line":10,"column":31}},"7":{"start":{"line":11,"column":20},"end":{"line":11,"column":21}},"8":{"start":{"line":12,"column":8},"end":{"line":19,"column":11}},"9":{"start":{"line":13,"column":47},"end":{"line":15,"column":85}},"10":{"start":{"line":16,"column":33},"end":{"line":16,"column":80}},"11":{"start":{"line":17,"column":12},"end":{"line":17,"column":44}},"12":{"start":{"line":18,"column":12},"end":{"line":18,"column":64}},"13":{"start":{"line":20,"column":8},"end":{"line":27,"column":11}},"14":{"start":{"line":21,"column":47},"end":{"line":23,"column":87}},"15":{"start":{"line":24,"column":33},"end":{"line":24,"column":80}},"16":{"start":{"line":25,"column":12},"end":{"line":25,"column":44}},"17":{"start":{"line":26,"column":12},"end":{"line":26,"column":64}},"18":{"start":{"line":28,"column":8},"end":{"line":28,"column":52}},"19":{"start":{"line":29,"column":8},"end":{"line":29,"column":21}},"20":{"start":{"line":32,"column":0},"end":{"line":32,"column":34}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":7,"column":4},"end":{"line":7,"column":5}},"loc":{"start":{"line":7,"column":30},"end":{"line":30,"column":5}},"line":7},"1":{"name":"(anonymous_1)","decl":{"start":{"line":12,"column":63},"end":{"line":12,"column":64}},"loc":{"start":{"line":12,"column":91},"end":{"line":19,"column":9}},"line":12},"2":{"name":"(anonymous_2)","decl":{"start":{"line":20,"column":62},"end":{"line":20,"column":63}},"loc":{"start":{"line":20,"column":90},"end":{"line":27,"column":9}},"line":20}},"branchMap":{"0":{"loc":{"start":{"line":13,"column":47},"end":{"line":15,"column":85}},"type":"cond-expr","locations":[{"start":{"line":14,"column":18},"end":{"line":14,"column":87}},{"start":{"line":15,"column":18},"end":{"line":15,"column":85}}],"line":13},"1":{"loc":{"start":{"line":21,"column":47},"end":{"line":23,"column":87}},"type":"cond-expr","locations":[{"start":{"line":22,"column":18},"end":{"line":22,"column":89}},{"start":{"line":23,"column":18},"end":{"line":23,"column":87}}],"line":21}},"s":{"0":1,"1":1,"2":1,"3":1,"4":83,"5":83,"6":83,"7":83,"8":83,"9":498,"10":498,"11":498,"12":498,"13":83,"14":498,"15":498,"16":498,"17":498,"18":83,"19":83,"20":1},"f":{"0":83,"1":498,"2":498},"b":{"0":[83,415],"1":[83,415]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/state-score/damage-score.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/state-score/damage-score.ts"],"names":[],"mappings":";;;AAAA,qCAAqE;AACrE,mCAAsC;AAEtC,MAAa,WAAY,SAAQ,mBAAW;IAEnC,QAAQ,CAAC,KAAY,EAAE,QAAgB;QAC5C,MAAM,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;QAC/C,MAAM,QAAQ,GAAG,iBAAU,CAAC,WAAW,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;QAEvD,IAAI,eAAe,GAAG,CAAC,CAAC;QACxB,IAAI,KAAK,GAAG,CAAC,CAAC;QAEd,MAAM,CAAC,cAAc,CAAC,iBAAU,CAAC,aAAa,EAAE,CAAC,QAAQ,EAAE,IAAI,EAAE,MAAM,EAAE,EAAE;YACzE,MAAM,CAAE,aAAa,EAAE,SAAS,CAAE,GAAG,MAAM,CAAC,IAAI,KAAK,eAAQ,CAAC,MAAM;gBAClE,CAAC,CAAC,CAAE,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,EAAE,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC,YAAY,CAAE;gBACzE,CAAC,CAAC,CAAE,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,EAAE,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC,WAAW,CAAE,CAAC;YAE1E,MAAM,YAAY,GAAG,IAAI,CAAC,iBAAiB,CAAC,aAAa,EAAE,QAAQ,CAAC,CAAC;YACrE,eAAe,IAAI,YAAY,CAAC;YAChC,KAAK,IAAI,SAAS,GAAG,YAAY,GAAG,QAAQ,CAAC,MAAM,CAAC;QACtD,CAAC,CAAC,CAAC;QAEH,QAAQ,CAAC,cAAc,CAAC,iBAAU,CAAC,UAAU,EAAE,CAAC,QAAQ,EAAE,IAAI,EAAE,MAAM,EAAE,EAAE;YACxE,MAAM,CAAE,aAAa,EAAE,SAAS,CAAE,GAAG,MAAM,CAAC,IAAI,KAAK,eAAQ,CAAC,MAAM;gBAClE,CAAC,CAAC,CAAE,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,EAAE,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC,cAAc,CAAE;gBAC3E,CAAC,CAAC,CAAE,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,EAAE,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC,aAAa,CAAE,CAAC;YAE5E,MAAM,YAAY,GAAG,IAAI,CAAC,iBAAiB,CAAC,aAAa,EAAE,QAAQ,CAAC,CAAC;YACrE,eAAe,IAAI,YAAY,CAAC;YAChC,KAAK,IAAI,SAAS,GAAG,YAAY,GAAG,QAAQ,CAAC,MAAM,CAAC;QACtD,CAAC,CAAC,CAAC;QAEH,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,eAAe,CAAC,CAAC;QAC5C,OAAO,KAAK,CAAC;IACf,CAAC;CAEF;AAjCD,kCAiCC","sourcesContent":["import { State, StateUtils, PlayerType, SlotType } from '../../game';\nimport { SimpleScore } from './score';\n\nexport class DamageScore extends SimpleScore {\n\n  public getScore(state: State, playerId: number): number {\n    const player = this.getPlayer(state, playerId);\n    const opponent = StateUtils.getOpponent(state, player);\n\n    let pokemonScoreSum = 0;\n    let score = 0;\n\n    player.forEachPokemon(PlayerType.BOTTOM_PLAYER, (cardList, card, target) => {\n      const [ pokemonScores, multipier ] = target.slot === SlotType.ACTIVE\n        ? [ this.options.scores.active, this.options.scores.damage.playerActive ]\n        : [ this.options.scores.bench, this.options.scores.damage.playerBench ];\n\n      const pokemonScore = this.getPokemonScoreBy(pokemonScores, cardList);\n      pokemonScoreSum += pokemonScore;\n      score += multipier * pokemonScore * cardList.damage;\n    });\n\n    opponent.forEachPokemon(PlayerType.TOP_PLAYER, (cardList, card, target) => {\n      const [ pokemonScores, multipier ] = target.slot === SlotType.ACTIVE\n        ? [ this.options.scores.active, this.options.scores.damage.opponentActive ]\n        : [ this.options.scores.bench, this.options.scores.damage.opponentBench ];\n\n      const pokemonScore = this.getPokemonScoreBy(pokemonScores, cardList);\n      pokemonScoreSum += pokemonScore;\n      score += multipier * pokemonScore * cardList.damage;\n    });\n\n    score = Math.round(score / pokemonScoreSum);\n    return score;\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"f6355791e1b7bfd29acb30db50e7c3be19c43d08","contentHash":"352a81c5037113fdb226b59a68940774c273916c34ed3ccf80cfba4ce43b884d"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/state-score/tools-score.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/state-score/tools-score.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":28}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":36}},"3":{"start":{"line":5,"column":16},"end":{"line":5,"column":34}},"4":{"start":{"line":8,"column":23},"end":{"line":8,"column":54}},"5":{"start":{"line":9,"column":23},"end":{"line":9,"column":48}},"6":{"start":{"line":10,"column":20},"end":{"line":10,"column":21}},"7":{"start":{"line":11,"column":8},"end":{"line":20,"column":11}},"8":{"start":{"line":12,"column":12},"end":{"line":14,"column":13}},"9":{"start":{"line":13,"column":16},"end":{"line":13,"column":23}},"10":{"start":{"line":15,"column":32},"end":{"line":15,"column":78}},"11":{"start":{"line":16,"column":28},"end":{"line":16,"column":71}},"12":{"start":{"line":17,"column":12},"end":{"line":19,"column":13}},"13":{"start":{"line":18,"column":16},"end":{"line":18,"column":47}},"14":{"start":{"line":21,"column":8},"end":{"line":21,"column":21}},"15":{"start":{"line":24,"column":0},"end":{"line":24,"column":32}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":7,"column":4},"end":{"line":7,"column":5}},"loc":{"start":{"line":7,"column":30},"end":{"line":22,"column":5}},"line":7},"1":{"name":"(anonymous_1)","decl":{"start":{"line":11,"column":63},"end":{"line":11,"column":64}},"loc":{"start":{"line":11,"column":83},"end":{"line":20,"column":9}},"line":11}},"branchMap":{"0":{"loc":{"start":{"line":12,"column":12},"end":{"line":14,"column":13}},"type":"if","locations":[{"start":{"line":12,"column":12},"end":{"line":14,"column":13}},{"start":{"line":12,"column":12},"end":{"line":14,"column":13}}],"line":12},"1":{"loc":{"start":{"line":15,"column":32},"end":{"line":15,"column":78}},"type":"cond-expr","locations":[{"start":{"line":15,"column":61},"end":{"line":15,"column":74}},{"start":{"line":15,"column":77},"end":{"line":15,"column":78}}],"line":15},"2":{"loc":{"start":{"line":17,"column":12},"end":{"line":19,"column":13}},"type":"if","locations":[{"start":{"line":17,"column":12},"end":{"line":19,"column":13}},{"start":{"line":17,"column":12},"end":{"line":19,"column":13}}],"line":17}},"s":{"0":1,"1":1,"2":1,"3":1,"4":83,"5":83,"6":83,"7":83,"8":498,"9":498,"10":0,"11":0,"12":0,"13":0,"14":83,"15":1},"f":{"0":83,"1":498},"b":{"0":[498,0],"1":[0,0],"2":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/state-score/tools-score.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/state-score/tools-score.ts"],"names":[],"mappings":";;;AAAA,qCAA+C;AAC/C,mCAAsC;AAEtC,MAAa,UAAW,SAAQ,mBAAW;IAElC,QAAQ,CAAC,KAAY,EAAE,QAAgB;QAC5C,MAAM,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;QAC/C,MAAM,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;QAEzC,IAAI,KAAK,GAAG,CAAC,CAAC;QACd,MAAM,CAAC,cAAc,CAAC,iBAAU,CAAC,aAAa,EAAE,CAAC,QAAQ,EAAE,IAAI,EAAE,EAAE;YACjE,IAAI,QAAQ,CAAC,IAAI,KAAK,SAAS,EAAE;gBAC/B,OAAO;aACR;YACD,MAAM,WAAW,GAAG,QAAQ,KAAK,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;YACnE,MAAM,OAAO,GAAG,CAAC,IAAI,CAAC,EAAE,GAAG,QAAQ,CAAC,MAAM,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC;YAC5D,IAAI,WAAW,GAAG,OAAO,IAAI,MAAM,CAAC,QAAQ,EAAE;gBAC5C,KAAK,IAAI,WAAW,GAAG,OAAO,CAAC;aAChC;QACH,CAAC,CAAC,CAAC;QAEH,OAAO,KAAK,CAAC;IACf,CAAC;CAEF;AArBD,gCAqBC","sourcesContent":["import { State, PlayerType } from '../../game';\nimport { SimpleScore } from './score';\n\nexport class ToolsScore extends SimpleScore {\n\n  public getScore(state: State, playerId: number): number {\n    const player = this.getPlayer(state, playerId);\n    const scores = this.options.scores.tools;\n    \n    let score = 0;\n    player.forEachPokemon(PlayerType.BOTTOM_PLAYER, (cardList, card) => {\n      if (cardList.tool === undefined) {\n        return;\n      }\n      const activeScore = cardList === player.active ? scores.active : 0;\n      const hpScore = (card.hp - cardList.damage) * scores.hpLeft;\n      if (activeScore + hpScore >= scores.minScore) {\n        score += activeScore + hpScore;\n      }\n    });\n\n    return score;\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"d2388f8acfaf95ef4b11a679544a78c5083344cd","contentHash":"5a3062f829d4be467fd0afbfcb80dc36aafe83a2ed5b3feae4e0fa4fdd0a02cb"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-bot-definitions.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-bot-definitions.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":124}},"2":{"start":{"line":4,"column":31},"end":{"line":4,"column":79}},"3":{"start":{"line":5,"column":29},"end":{"line":5,"column":75}},"4":{"start":{"line":6,"column":24},"end":{"line":6,"column":65}},"5":{"start":{"line":7,"column":25},"end":{"line":7,"column":67}},"6":{"start":{"line":8,"column":24},"end":{"line":8,"column":65}},"7":{"start":{"line":9,"column":28},"end":{"line":9,"column":73}},"8":{"start":{"line":10,"column":30},"end":{"line":10,"column":77}},"9":{"start":{"line":11,"column":32},"end":{"line":11,"column":81}},"10":{"start":{"line":12,"column":30},"end":{"line":12,"column":77}},"11":{"start":{"line":13,"column":37},"end":{"line":13,"column":91}},"12":{"start":{"line":14,"column":29},"end":{"line":14,"column":75}},"13":{"start":{"line":15,"column":29},"end":{"line":15,"column":75}},"14":{"start":{"line":16,"column":32},"end":{"line":16,"column":82}},"15":{"start":{"line":17,"column":40},"end":{"line":17,"column":98}},"16":{"start":{"line":18,"column":40},"end":{"line":18,"column":98}},"17":{"start":{"line":19,"column":39},"end":{"line":19,"column":96}},"18":{"start":{"line":20,"column":40},"end":{"line":20,"column":98}},"19":{"start":{"line":21,"column":41},"end":{"line":21,"column":100}},"20":{"start":{"line":22,"column":39},"end":{"line":22,"column":96}},"21":{"start":{"line":23,"column":34},"end":{"line":23,"column":86}},"22":{"start":{"line":24,"column":38},"end":{"line":24,"column":94}},"23":{"start":{"line":25,"column":38},"end":{"line":25,"column":94}},"24":{"start":{"line":26,"column":38},"end":{"line":26,"column":94}},"25":{"start":{"line":27,"column":37},"end":{"line":27,"column":92}},"26":{"start":{"line":28,"column":33},"end":{"line":28,"column":84}},"27":{"start":{"line":29,"column":22},"end":{"line":29,"column":57}},"28":{"start":{"line":30,"column":0},"end":{"line":95,"column":2}},"29":{"start":{"line":96,"column":0},"end":{"line":99,"column":2}},"30":{"start":{"line":100,"column":0},"end":{"line":114,"column":2}},"31":{"start":{"line":115,"column":0},"end":{"line":128,"column":2}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-bot-definitions.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-bot-definitions.ts"],"names":[],"mappings":"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","sourcesContent":["import { SimpleTacticList } from './simple-tactics/simple-tactics';\nimport { PromptResolverList } from './prompt-resolver/prompt-resolver';\nimport { AttachEnergyTactic } from './simple-tactics/attach-energy-tactic';\nimport { AttachToolTactic } from './simple-tactics/attach-tool-tactic';\nimport { AttackTactic } from './simple-tactics/attack-tactic';\nimport { RetreatTactic } from './simple-tactics/retreat-tactic';\nimport { EvolveTactic } from './simple-tactics/evolve-tactic';\nimport { PlayBasicTactic } from './simple-tactics/play-basic-tactic';\nimport { PlayStadiumTactic } from './simple-tactics/play-stadium-tactic';\nimport { PlaySupporterTactic } from './simple-tactics/play-supporter-tactic';\nimport { PlayTrainerTactic } from './simple-tactics/play-trainer-tactic';\nimport { UseDiscardAbilityTactic } from './simple-tactics/use-discard-ability-tactic';\nimport { UseAbilityTactic } from './simple-tactics/use-ability-tactic';\nimport { UseStadiumTactic } from './simple-tactics/use-stadium-tactic';\nimport { AlertPromptResolver } from './prompt-resolver/alert-prompt-resolver';\nimport { AttachEnergyPromptResolver } from './prompt-resolver/attach-energy-prompt-resolver';\nimport { ChooseAttackPromptResolver } from './prompt-resolver/choose-attack-prompt-resolver';\nimport { ChooseCardsPromptResolver } from './prompt-resolver/choose-cards-prompt-resolver';\nimport { ChooseEnergyPromptResolver } from './prompt-resolver/choose-energy-prompt-resolver';\nimport { ChoosePokemonPromptResolver } from './prompt-resolver/choose-pokemon-prompt-resolver';\nimport { ChoosePrizePromptResolver } from './prompt-resolver/choose-prize-prompt-resolver';\nimport { ConfirmPromptResolver } from './prompt-resolver/confirm-prompt-resolver';\nimport { MoveDamagePromptResolver } from './prompt-resolver/move-damage-prompt-resolver';\nimport { MoveEnergyPromptResolver } from './prompt-resolver/move-energy-prompt-resolver';\nimport { OrderCardsPromptResolver } from './prompt-resolver/order-cards-prompt-resolver';\nimport { PutDamagePromptResolver } from './prompt-resolver/put-damage-prompt-resolver';\nimport { SelectPromptResolver } from './prompt-resolver/select-prompt-resolver';\nimport { BotFlipMode, BotShuffleMode } from '../game/bots/bot-arbiter';\n\nexport const defaultStateScores = {\n  hand: {\n    hasSupporter: 5,\n    hasEnergy: 5,\n    hasPokemon: 2,\n    hasBasicWhenBenchEmpty: 20,\n    evolutionScore: 10,\n    itemScore: 2,\n    cardScore: 1\n  },\n  active: {\n    hp: 0.3,\n    damage: 0.4,\n    ability: 1,\n    retreat: -5\n  },\n  bench: {\n    hp: 0.1,\n    damage: 0.1,\n    ability: 25,\n    retreat: 0\n  },\n  energy: {\n    active: 30,\n    bench: 20,\n    missingColorless: -1,\n    missingMatch: -2\n  },\n  specialConditions: {\n    burned: -10,\n    poisoned: -10,\n    asleep: -50,\n    paralyzed: -50,\n    confused: -20\n  },\n  player: {\n    winner: 10000,\n    prize: 1000,\n    deck: 1,\n    deckLessThan10: -10\n  },\n  damage: {\n    playerActive: -1,\n    playerBench: -1,\n    opponentActive: 3,\n    opponentBench: 1\n  },\n  opponent: {\n    deck: -1,\n    hand: -2,\n    board: -2,\n    energy: -3,\n    emptyBench: 50,\n    noActiveEnergy: 50\n  },\n  tools: {\n    active: 50,\n    hpLeft: 1,\n    minScore: 70\n  },\n  tactics: {\n    passTurn: -1000,\n    attackBonus: 100,\n    supporterBonus: 25\n  }\n};\n\nexport const defaultArbiterOptions = {\n  flipMode: BotFlipMode.ALL_HEADS,\n  shuffleMode: BotShuffleMode.NO_SHUFFLE\n};\n\nexport const allPromptResolvers: PromptResolverList = [\n  AlertPromptResolver,\n  AttachEnergyPromptResolver,\n  ChooseAttackPromptResolver,\n  ChooseCardsPromptResolver,\n  ChooseEnergyPromptResolver,\n  ChoosePokemonPromptResolver,\n  ChoosePrizePromptResolver,\n  ConfirmPromptResolver,\n  MoveDamagePromptResolver,\n  MoveEnergyPromptResolver,\n  OrderCardsPromptResolver,\n  PutDamagePromptResolver,\n  SelectPromptResolver\n];\n\nexport const allSimpleTactics: SimpleTacticList = [\n  EvolveTactic,\n  PlayBasicTactic,\n  AttachEnergyTactic,\n  AttachToolTactic,\n  UseDiscardAbilityTactic,\n  PlayTrainerTactic,\n  PlayStadiumTactic,\n  PlaySupporterTactic,\n  UseAbilityTactic,\n  UseStadiumTactic,\n  RetreatTactic,\n  AttackTactic\n];\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"8b836baf9b712ee59f627cc612c5424fbf14a2a5","contentHash":"901824a6ad03755fef1543f031172dad05b420137e6475df4792fec158020d05"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-tactics/attach-energy-tactic.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-tactics/attach-energy-tactic.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":36}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":36}},"3":{"start":{"line":5,"column":25},"end":{"line":5,"column":52}},"4":{"start":{"line":6,"column":23},"end":{"line":6,"column":61}},"5":{"start":{"line":9,"column":8},"end":{"line":11,"column":9}},"6":{"start":{"line":10,"column":12},"end":{"line":10,"column":29}},"7":{"start":{"line":13,"column":25},"end":{"line":13,"column":27}},"8":{"start":{"line":14,"column":8},"end":{"line":18,"column":11}},"9":{"start":{"line":15,"column":12},"end":{"line":17,"column":13}},"10":{"start":{"line":15,"column":70},"end":{"line":15,"column":95}},"11":{"start":{"line":16,"column":16},"end":{"line":16,"column":33}},"12":{"start":{"line":19,"column":8},"end":{"line":21,"column":9}},"13":{"start":{"line":20,"column":12},"end":{"line":20,"column":19}},"14":{"start":{"line":22,"column":28},"end":{"line":22,"column":72}},"15":{"start":{"line":23,"column":26},"end":{"line":23,"column":64}},"16":{"start":{"line":24,"column":24},"end":{"line":24,"column":26}},"17":{"start":{"line":25,"column":8},"end":{"line":34,"column":11}},"18":{"start":{"line":26,"column":12},"end":{"line":33,"column":13}},"19":{"start":{"line":27,"column":16},"end":{"line":27,"column":42}},"20":{"start":{"line":28,"column":30},"end":{"line":28,"column":68}},"21":{"start":{"line":29,"column":16},"end":{"line":29,"column":37}},"22":{"start":{"line":30,"column":16},"end":{"line":32,"column":17}},"23":{"start":{"line":31,"column":20},"end":{"line":31,"column":58}},"24":{"start":{"line":35,"column":8},"end":{"line":37,"column":9}},"25":{"start":{"line":36,"column":12},"end":{"line":36,"column":19}},"26":{"start":{"line":38,"column":8},"end":{"line":38,"column":50}},"27":{"start":{"line":38,"column":31},"end":{"line":38,"column":48}},"28":{"start":{"line":39,"column":23},"end":{"line":39,"column":40}},"29":{"start":{"line":40,"column":22},"end":{"line":40,"column":64}},"30":{"start":{"line":41,"column":8},"end":{"line":41,"column":67}},"31":{"start":{"line":44,"column":0},"end":{"line":44,"column":48}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":8,"column":4},"end":{"line":8,"column":5}},"loc":{"start":{"line":8,"column":29},"end":{"line":42,"column":5}},"line":8},"1":{"name":"(anonymous_1)","decl":{"start":{"line":14,"column":34},"end":{"line":14,"column":35}},"loc":{"start":{"line":14,"column":39},"end":{"line":18,"column":9}},"line":14},"2":{"name":"(anonymous_2)","decl":{"start":{"line":15,"column":65},"end":{"line":15,"column":66}},"loc":{"start":{"line":15,"column":70},"end":{"line":15,"column":95}},"line":15},"3":{"name":"(anonymous_3)","decl":{"start":{"line":25,"column":63},"end":{"line":25,"column":64}},"loc":{"start":{"line":25,"column":94},"end":{"line":34,"column":9}},"line":25},"4":{"name":"(anonymous_4)","decl":{"start":{"line":38,"column":21},"end":{"line":38,"column":22}},"loc":{"start":{"line":38,"column":31},"end":{"line":38,"column":48}},"line":38}},"branchMap":{"0":{"loc":{"start":{"line":9,"column":8},"end":{"line":11,"column":9}},"type":"if","locations":[{"start":{"line":9,"column":8},"end":{"line":11,"column":9}},{"start":{"line":9,"column":8},"end":{"line":11,"column":9}}],"line":9},"1":{"loc":{"start":{"line":15,"column":12},"end":{"line":17,"column":13}},"type":"if","locations":[{"start":{"line":15,"column":12},"end":{"line":17,"column":13}},{"start":{"line":15,"column":12},"end":{"line":17,"column":13}}],"line":15},"2":{"loc":{"start":{"line":15,"column":16},"end":{"line":15,"column":96}},"type":"binary-expr","locations":[{"start":{"line":15,"column":16},"end":{"line":15,"column":46}},{"start":{"line":15,"column":50},"end":{"line":15,"column":96}}],"line":15},"3":{"loc":{"start":{"line":19,"column":8},"end":{"line":21,"column":9}},"type":"if","locations":[{"start":{"line":19,"column":8},"end":{"line":21,"column":9}},{"start":{"line":19,"column":8},"end":{"line":21,"column":9}}],"line":19},"4":{"loc":{"start":{"line":30,"column":16},"end":{"line":32,"column":17}},"type":"if","locations":[{"start":{"line":30,"column":16},"end":{"line":32,"column":17}},{"start":{"line":30,"column":16},"end":{"line":32,"column":17}}],"line":30},"5":{"loc":{"start":{"line":35,"column":8},"end":{"line":37,"column":9}},"type":"if","locations":[{"start":{"line":35,"column":8},"end":{"line":37,"column":9}},{"start":{"line":35,"column":8},"end":{"line":37,"column":9}}],"line":35}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-tactics/attach-energy-tactic.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-tactics/attach-energy-tactic.ts"],"names":[],"mappings":";;;AAAA,qCACsC;AACtC,qDAAgD;AAChD,8DAA0D;AAE1D,MAAa,kBAAmB,SAAQ,6BAAY;IAE3C,SAAS,CAAC,KAAY,EAAE,MAAc;QAC3C,IAAI,MAAM,CAAC,gBAAgB,IAAI,KAAK,CAAC,IAAI,EAAE;YACzC,OAAO,SAAS,CAAC;SAClB;QAED,wCAAwC;QACxC,MAAM,QAAQ,GAAiB,EAAE,CAAC;QAClC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE;YAC5B,IAAI,CAAC,YAAY,iBAAU,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ,KAAK,CAAC,CAAC,QAAQ,CAAC,EAAE;gBAC7E,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;aAClB;QACH,CAAC,CAAC,CAAC;QAEH,IAAI,QAAQ,CAAC,MAAM,KAAK,CAAC,EAAE;YACzB,OAAO;SACR;QAED,MAAM,WAAW,GAAG,IAAI,0BAAW,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAClD,MAAM,SAAS,GAAG,WAAW,CAAC,QAAQ,CAAC,KAAK,EAAE,MAAM,CAAC,EAAE,CAAC,CAAC;QACzD,MAAM,OAAO,GAAwD,EAAE,CAAC;QACxE,MAAM,CAAC,cAAc,CAAC,iBAAU,CAAC,aAAa,EAAE,CAAC,QAAQ,EAAE,OAAO,EAAE,MAAM,EAAE,EAAE;YAE5E,KAAK,MAAM,IAAI,IAAI,QAAQ,EAAE;gBAC3B,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;gBAC1B,MAAM,KAAK,GAAG,WAAW,CAAC,QAAQ,CAAC,KAAK,EAAE,MAAM,CAAC,EAAE,CAAC,CAAC;gBACrD,QAAQ,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC;gBACrB,IAAI,KAAK,GAAG,SAAS,EAAE;oBACrB,OAAO,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;iBACvC;aACF;QACH,CAAC,CAAC,CAAC;QAEH,IAAI,OAAO,CAAC,MAAM,KAAK,CAAC,EAAE;YACxB,OAAO;SACR;QAED,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC;QAC1C,MAAM,MAAM,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;QACjC,MAAM,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;QACzD,OAAO,IAAI,qBAAc,CAAC,MAAM,CAAC,EAAE,EAAE,KAAK,EAAE,MAAM,CAAC,CAAC;IACtD,CAAC;CAEF;AA5CD,gDA4CC","sourcesContent":["import { Action, Player, State, EnergyCard, PlayCardAction, CardTarget,\n  PlayerType, Card} from '../../game';\nimport { SimpleTactic } from './simple-tactics';\nimport { EnergyScore } from '../state-score/energy-score';\n\nexport class AttachEnergyTactic extends SimpleTactic {\n\n  public useTactic(state: State, player: Player): Action | undefined {\n    if (player.energyPlayedTurn >= state.turn) {\n      return undefined;\n    }\n\n    // Distinct list with player's energies.\n    const energies: EnergyCard[] = [];\n    player.hand.cards.forEach(c => {\n      if (c instanceof EnergyCard && !energies.some(e => e.fullName === c.fullName)) {\n        energies.push(c);\n      }\n    });\n\n    if (energies.length === 0) {\n      return;\n    }\n\n    const energyScore = new EnergyScore(this.options);\n    const baseScore = energyScore.getScore(state, player.id);\n    const targets: { target: CardTarget, card: Card, score: number }[] = [];\n    player.forEachPokemon(PlayerType.BOTTOM_PLAYER, (cardList, pokemon, target) => {\n\n      for (const card of energies) {\n        cardList.cards.push(card);\n        const score = energyScore.getScore(state, player.id);\n        cardList.cards.pop();\n        if (score > baseScore) {\n          targets.push({ target, score, card });\n        }\n      }\n    });\n\n    if (targets.length === 0) {\n      return;\n    }\n\n    targets.sort((a, b) => b.score - a.score);\n    const target = targets[0].target;\n    const index = player.hand.cards.indexOf(targets[0].card);\n    return new PlayCardAction(player.id, index, target); \n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"f8ca6751770ef01bb6bbb978e454ed8807cf093e","contentHash":"966220f59db2abbd107ece27169e4914d05df7dc28585bac76ba5e6d01f29cac"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-tactics/simple-tactics.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-tactics/simple-tactics.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":30}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":36}},"3":{"start":{"line":5,"column":20},"end":{"line":5,"column":56}},"4":{"start":{"line":6,"column":22},"end":{"line":6,"column":59}},"5":{"start":{"line":9,"column":8},"end":{"line":9,"column":31}},"6":{"start":{"line":10,"column":8},"end":{"line":10,"column":69}},"7":{"start":{"line":13,"column":8},"end":{"line":15,"column":9}},"8":{"start":{"line":14,"column":12},"end":{"line":14,"column":103}},"9":{"start":{"line":16,"column":8},"end":{"line":20,"column":9}},"10":{"start":{"line":16,"column":25},"end":{"line":16,"column":26}},"11":{"start":{"line":17,"column":12},"end":{"line":19,"column":13}},"12":{"start":{"line":18,"column":16},"end":{"line":18,"column":103}},"13":{"start":{"line":21,"column":25},"end":{"line":21,"column":62}},"14":{"start":{"line":21,"column":49},"end":{"line":21,"column":61}},"15":{"start":{"line":22,"column":8},"end":{"line":24,"column":9}},"16":{"start":{"line":23,"column":12},"end":{"line":23,"column":78}},"17":{"start":{"line":25,"column":8},"end":{"line":27,"column":9}},"18":{"start":{"line":26,"column":12},"end":{"line":26,"column":100}},"19":{"start":{"line":28,"column":8},"end":{"line":32,"column":9}},"20":{"start":{"line":28,"column":25},"end":{"line":28,"column":26}},"21":{"start":{"line":29,"column":12},"end":{"line":31,"column":13}},"22":{"start":{"line":30,"column":16},"end":{"line":30,"column":100}},"23":{"start":{"line":33,"column":8},"end":{"line":33,"column":70}},"24":{"start":{"line":36,"column":23},"end":{"line":36,"column":28}},"25":{"start":{"line":37,"column":8},"end":{"line":56,"column":9}},"26":{"start":{"line":38,"column":30},"end":{"line":38,"column":84}},"27":{"start":{"line":39,"column":12},"end":{"line":39,"column":50}},"28":{"start":{"line":40,"column":12},"end":{"line":52,"column":13}},"29":{"start":{"line":40,"column":59},"end":{"line":40,"column":81}},"30":{"start":{"line":41,"column":16},"end":{"line":41,"column":49}},"31":{"start":{"line":42,"column":31},"end":{"line":42,"column":81}},"32":{"start":{"line":42,"column":58},"end":{"line":42,"column":80}},"33":{"start":{"line":43,"column":16},"end":{"line":45,"column":17}},"34":{"start":{"line":44,"column":20},"end":{"line":44,"column":26}},"35":{"start":{"line":46,"column":31},"end":{"line":46,"column":83}},"36":{"start":{"line":46,"column":58},"end":{"line":46,"column":82}},"37":{"start":{"line":47,"column":16},"end":{"line":49,"column":17}},"38":{"start":{"line":48,"column":20},"end":{"line":48,"column":26}},"39":{"start":{"line":50,"column":38},"end":{"line":50,"column":82}},"40":{"start":{"line":51,"column":16},"end":{"line":51,"column":61}},"41":{"start":{"line":55,"column":12},"end":{"line":55,"column":29}},"42":{"start":{"line":57,"column":8},"end":{"line":57,"column":24}},"43":{"start":{"line":60,"column":26},"end":{"line":60,"column":98}},"44":{"start":{"line":60,"column":71},"end":{"line":60,"column":97}},"45":{"start":{"line":61,"column":8},"end":{"line":66,"column":9}},"46":{"start":{"line":61,"column":21},"end":{"line":61,"column":22}},"47":{"start":{"line":62,"column":27},"end":{"line":62,"column":76}},"48":{"start":{"line":63,"column":12},"end":{"line":65,"column":13}},"49":{"start":{"line":64,"column":16},"end":{"line":64,"column":30}},"50":{"start":{"line":68,"column":8},"end":{"line":68,"column":63}},"51":{"start":{"line":71,"column":8},"end":{"line":71,"column":57}},"52":{"start":{"line":74,"column":25},"end":{"line":74,"column":59}},"53":{"start":{"line":75,"column":26},"end":{"line":75,"column":83}},"54":{"start":{"line":75,"column":65},"end":{"line":75,"column":82}},"55":{"start":{"line":76,"column":8},"end":{"line":79,"column":9}},"56":{"start":{"line":77,"column":12},"end":{"line":78,"column":67}},"57":{"start":{"line":82,"column":0},"end":{"line":82,"column":36}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":8,"column":4},"end":{"line":8,"column":5}},"loc":{"start":{"line":8,"column":25},"end":{"line":11,"column":5}},"line":8},"1":{"name":"(anonymous_1)","decl":{"start":{"line":12,"column":4},"end":{"line":12,"column":5}},"loc":{"start":{"line":12,"column":41},"end":{"line":34,"column":5}},"line":12},"2":{"name":"(anonymous_2)","decl":{"start":{"line":21,"column":44},"end":{"line":21,"column":45}},"loc":{"start":{"line":21,"column":49},"end":{"line":21,"column":61}},"line":21},"3":{"name":"(anonymous_3)","decl":{"start":{"line":35,"column":4},"end":{"line":35,"column":5}},"loc":{"start":{"line":35,"column":34},"end":{"line":58,"column":5}},"line":35},"4":{"name":"(anonymous_4)","decl":{"start":{"line":40,"column":54},"end":{"line":40,"column":55}},"loc":{"start":{"line":40,"column":59},"end":{"line":40,"column":81}},"line":40},"5":{"name":"(anonymous_5)","decl":{"start":{"line":42,"column":53},"end":{"line":42,"column":54}},"loc":{"start":{"line":42,"column":58},"end":{"line":42,"column":80}},"line":42},"6":{"name":"(anonymous_6)","decl":{"start":{"line":46,"column":53},"end":{"line":46,"column":54}},"loc":{"start":{"line":46,"column":58},"end":{"line":46,"column":82}},"line":46},"7":{"name":"(anonymous_7)","decl":{"start":{"line":59,"column":4},"end":{"line":59,"column":5}},"loc":{"start":{"line":59,"column":41},"end":{"line":69,"column":5}},"line":59},"8":{"name":"(anonymous_8)","decl":{"start":{"line":60,"column":59},"end":{"line":60,"column":60}},"loc":{"start":{"line":60,"column":71},"end":{"line":60,"column":97}},"line":60},"9":{"name":"(anonymous_9)","decl":{"start":{"line":70,"column":4},"end":{"line":70,"column":5}},"loc":{"start":{"line":70,"column":35},"end":{"line":72,"column":5}},"line":70},"10":{"name":"(anonymous_10)","decl":{"start":{"line":73,"column":4},"end":{"line":73,"column":5}},"loc":{"start":{"line":73,"column":63},"end":{"line":80,"column":5}},"line":73},"11":{"name":"(anonymous_11)","decl":{"start":{"line":75,"column":60},"end":{"line":75,"column":61}},"loc":{"start":{"line":75,"column":65},"end":{"line":75,"column":82}},"line":75}},"branchMap":{"0":{"loc":{"start":{"line":13,"column":8},"end":{"line":15,"column":9}},"type":"if","locations":[{"start":{"line":13,"column":8},"end":{"line":15,"column":9}},{"start":{"line":13,"column":8},"end":{"line":15,"column":9}}],"line":13},"1":{"loc":{"start":{"line":17,"column":12},"end":{"line":19,"column":13}},"type":"if","locations":[{"start":{"line":17,"column":12},"end":{"line":19,"column":13}},{"start":{"line":17,"column":12},"end":{"line":19,"column":13}}],"line":17},"2":{"loc":{"start":{"line":22,"column":8},"end":{"line":24,"column":9}},"type":"if","locations":[{"start":{"line":22,"column":8},"end":{"line":24,"column":9}},{"start":{"line":22,"column":8},"end":{"line":24,"column":9}}],"line":22},"3":{"loc":{"start":{"line":25,"column":8},"end":{"line":27,"column":9}},"type":"if","locations":[{"start":{"line":25,"column":8},"end":{"line":27,"column":9}},{"start":{"line":25,"column":8},"end":{"line":27,"column":9}}],"line":25},"4":{"loc":{"start":{"line":29,"column":12},"end":{"line":31,"column":13}},"type":"if","locations":[{"start":{"line":29,"column":12},"end":{"line":31,"column":13}},{"start":{"line":29,"column":12},"end":{"line":31,"column":13}}],"line":29},"5":{"loc":{"start":{"line":43,"column":16},"end":{"line":45,"column":17}},"type":"if","locations":[{"start":{"line":43,"column":16},"end":{"line":45,"column":17}},{"start":{"line":43,"column":16},"end":{"line":45,"column":17}}],"line":43},"6":{"loc":{"start":{"line":47,"column":16},"end":{"line":49,"column":17}},"type":"if","locations":[{"start":{"line":47,"column":16},"end":{"line":49,"column":17}},{"start":{"line":47,"column":16},"end":{"line":49,"column":17}}],"line":47},"7":{"loc":{"start":{"line":63,"column":12},"end":{"line":65,"column":13}},"type":"if","locations":[{"start":{"line":63,"column":12},"end":{"line":65,"column":13}},{"start":{"line":63,"column":12},"end":{"line":65,"column":13}}],"line":63},"8":{"loc":{"start":{"line":73,"column":44},"end":{"line":73,"column":61}},"type":"default-arg","locations":[{"start":{"line":73,"column":60},"end":{"line":73,"column":61}}],"line":73},"9":{"loc":{"start":{"line":75,"column":26},"end":{"line":75,"column":83}},"type":"binary-expr","locations":[{"start":{"line":75,"column":26},"end":{"line":75,"column":34}},{"start":{"line":75,"column":38},"end":{"line":75,"column":83}}],"line":75},"10":{"loc":{"start":{"line":76,"column":8},"end":{"line":79,"column":9}},"type":"if","locations":[{"start":{"line":76,"column":8},"end":{"line":79,"column":9}},{"start":{"line":76,"column":8},"end":{"line":79,"column":9}}],"line":76},"11":{"loc":{"start":{"line":76,"column":12},"end":{"line":76,"column":61}},"type":"binary-expr","locations":[{"start":{"line":76,"column":12},"end":{"line":76,"column":34}},{"start":{"line":76,"column":38},"end":{"line":76,"column":61}}],"line":76},"12":{"loc":{"start":{"line":78,"column":19},"end":{"line":78,"column":65}},"type":"cond-expr","locations":[{"start":{"line":78,"column":48},"end":{"line":78,"column":61}},{"start":{"line":78,"column":64},"end":{"line":78,"column":65}}],"line":78}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-tactics/simple-tactics.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-tactics/simple-tactics.ts"],"names":[],"mappings":"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","sourcesContent":["import { Action, Player, State, PokemonCardList, CardTarget, PlayerType,\n  SlotType, GameError, GameMessage, Prompt, ResolvePromptAction } from '../../game';\nimport { Simulator } from '../../game/bots/simulator';\nimport { SimpleBotOptions } from '../simple-bot-options';\nimport { StateScore } from '../state-score/state-score';\n\nexport type SimpleTacticList = (new (options: SimpleBotOptions) => SimpleTactic)[];\n\nexport abstract class SimpleTactic {\n\n  private stateScore: StateScore;\n\n  constructor(protected options: SimpleBotOptions) {\n    this.stateScore = new StateScore(this.options);\n  }\n\n  public abstract useTactic(state: State, player: Player): Action | undefined;\n\n  protected getCardTarget(player: Player, state: State, target: PokemonCardList): CardTarget {\n    if (target === player.active) {\n      return { player: PlayerType.BOTTOM_PLAYER, slot: SlotType.ACTIVE, index: 0 };\n    }\n\n    for (let index = 0; index < player.bench.length; index++) {\n      if (target === player.bench[index]) {\n        return { player: PlayerType.BOTTOM_PLAYER, slot: SlotType.BENCH, index };\n      }\n    }\n\n    const opponent = state.players.find(p => p !== player);\n    if (opponent === undefined) {\n      throw new GameError(GameMessage.INVALID_GAME_STATE);\n    }\n\n    if (target === opponent.active) {\n      return { player: PlayerType.TOP_PLAYER, slot: SlotType.ACTIVE, index: 0 };\n    }\n\n    for (let index = 0; index < opponent.bench.length; index++) {\n      if (target === opponent.bench[index]) {\n        return { player: PlayerType.TOP_PLAYER, slot: SlotType.BENCH, index };\n      }\n    }\n\n    throw new GameError(GameMessage.INVALID_TARGET);\n  }\n\n  protected simulateAction(state: State, action: Action): State | undefined {\n    let newState = state;\n    try {\n      const simulator = new Simulator(state, this.options.arbiter);\n      newState = simulator.dispatch(action);\n      \n      while (simulator.store.state.prompts.some(p => p.result === undefined)) {\n        newState = simulator.store.state;\n        const prompt = newState.prompts.find(p => p.result === undefined);\n        if (prompt === undefined) {\n          break;\n        }\n        const player = newState.players.find(p => p.id === prompt.playerId);\n        if (player === undefined) {\n          break;\n        }\n        const resolveAction = this.resolvePrompt(newState, player, prompt);\n        newState = simulator.dispatch(resolveAction);\n      }\n    } catch (error) {\n      return undefined;\n    }\n\n    return newState;\n  }\n\n  private resolvePrompt(state: State, player: Player, prompt: Prompt<any>): Action {\n    const resolvers = this.options.promptResolvers.map(resolver => new resolver(this.options));\n\n    for (let i = 0; i < resolvers.length; i++) {\n      const action = resolvers[i].resolvePrompt(state, player, prompt);\n      if (action !== undefined) {\n        return action;\n      }\n    }\n\n    // Unknown prompt. Try to cancel it.\n    return new ResolvePromptAction(prompt.id, null);\n  }\n\n  protected getStateScore(state: State, playerId: number): number {\n    return this.stateScore.getScore(state, playerId);\n  }\n\n  protected evaluateAction(state: State, playerId: number, action: Action, passTurnScore: number = 0): number | undefined {\n    const newState = this.simulateAction(state, action);\n    const newPlayer = newState && newState.players.find(p => p.id === playerId);\n    if (newState !== undefined && newPlayer !== undefined) {\n      return this.stateScore.getScore(newState, playerId)\n        + (newState.turn > state.turn ? passTurnScore : 0);\n    }\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"87980b64b998817e2ddc75940488bc26467d29e9","contentHash":"699bdcea1ee2ba750db0ed14c4da61df585be24a5d8bbc83e56bea458382f185"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/bots/simulator.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/bots/simulator.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":27}},"2":{"start":{"line":4,"column":16},"end":{"line":4,"column":41}},"3":{"start":{"line":5,"column":22},"end":{"line":5,"column":46}},"4":{"start":{"line":6,"column":21},"end":{"line":6,"column":45}},"5":{"start":{"line":7,"column":23},"end":{"line":7,"column":49}},"6":{"start":{"line":8,"column":16},"end":{"line":8,"column":38}},"7":{"start":{"line":9,"column":15},"end":{"line":9,"column":44}},"8":{"start":{"line":12,"column":8},"end":{"line":14,"column":9}},"9":{"start":{"line":12,"column":36},"end":{"line":12,"column":58}},"10":{"start":{"line":13,"column":12},"end":{"line":13,"column":102}},"11":{"start":{"line":15,"column":8},"end":{"line":15,"column":74}},"12":{"start":{"line":16,"column":8},"end":{"line":16,"column":45}},"13":{"start":{"line":17,"column":8},"end":{"line":17,"column":67}},"14":{"start":{"line":20,"column":8},"end":{"line":20,"column":47}},"15":{"start":{"line":25,"column":27},"end":{"line":25,"column":82}},"16":{"start":{"line":25,"column":56},"end":{"line":25,"column":81}},"17":{"start":{"line":26,"column":8},"end":{"line":32,"column":9}},"18":{"start":{"line":26,"column":21},"end":{"line":26,"column":22}},"19":{"start":{"line":27,"column":27},"end":{"line":27,"column":78}},"20":{"start":{"line":28,"column":12},"end":{"line":31,"column":13}},"21":{"start":{"line":29,"column":16},"end":{"line":29,"column":60}},"22":{"start":{"line":30,"column":16},"end":{"line":30,"column":22}},"23":{"start":{"line":33,"column":8},"end":{"line":33,"column":54}},"24":{"start":{"line":36,"column":20},"end":{"line":36,"column":47}},"25":{"start":{"line":37,"column":22},"end":{"line":37,"column":65}},"26":{"start":{"line":38,"column":8},"end":{"line":41,"column":9}},"27":{"start":{"line":39,"column":12},"end":{"line":39,"column":49}},"28":{"start":{"line":40,"column":12},"end":{"line":40,"column":66}},"29":{"start":{"line":42,"column":8},"end":{"line":42,"column":21}},"30":{"start":{"line":45,"column":0},"end":{"line":45,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":11,"column":4},"end":{"line":11,"column":5}},"loc":{"start":{"line":11,"column":47},"end":{"line":18,"column":5}},"line":11},"1":{"name":"(anonymous_1)","decl":{"start":{"line":12,"column":31},"end":{"line":12,"column":32}},"loc":{"start":{"line":12,"column":36},"end":{"line":12,"column":58}},"line":12},"2":{"name":"(anonymous_2)","decl":{"start":{"line":19,"column":4},"end":{"line":19,"column":5}},"loc":{"start":{"line":19,"column":12},"end":{"line":21,"column":5}},"line":19},"3":{"name":"(anonymous_3)","decl":{"start":{"line":22,"column":4},"end":{"line":22,"column":5}},"loc":{"start":{"line":22,"column":25},"end":{"line":22,"column":28}},"line":22},"4":{"name":"(anonymous_4)","decl":{"start":{"line":23,"column":4},"end":{"line":23,"column":5}},"loc":{"start":{"line":23,"column":32},"end":{"line":34,"column":5}},"line":23},"5":{"name":"(anonymous_5)","decl":{"start":{"line":25,"column":48},"end":{"line":25,"column":49}},"loc":{"start":{"line":25,"column":56},"end":{"line":25,"column":81}},"line":25},"6":{"name":"(anonymous_6)","decl":{"start":{"line":35,"column":4},"end":{"line":35,"column":5}},"loc":{"start":{"line":35,"column":21},"end":{"line":43,"column":5}},"line":35}},"branchMap":{"0":{"loc":{"start":{"line":11,"column":23},"end":{"line":11,"column":45}},"type":"default-arg","locations":[{"start":{"line":11,"column":43},"end":{"line":11,"column":45}}],"line":11},"1":{"loc":{"start":{"line":12,"column":8},"end":{"line":14,"column":9}},"type":"if","locations":[{"start":{"line":12,"column":8},"end":{"line":14,"column":9}},{"start":{"line":12,"column":8},"end":{"line":14,"column":9}}],"line":12},"2":{"loc":{"start":{"line":28,"column":12},"end":{"line":31,"column":13}},"type":"if","locations":[{"start":{"line":28,"column":12},"end":{"line":31,"column":13}},{"start":{"line":28,"column":12},"end":{"line":31,"column":13}}],"line":28},"3":{"loc":{"start":{"line":33,"column":15},"end":{"line":33,"column":53}},"type":"cond-expr","locations":[{"start":{"line":33,"column":26},"end":{"line":33,"column":41}},{"start":{"line":33,"column":44},"end":{"line":33,"column":53}}],"line":33}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},"b":{"0":[0],"1":[0,0],"2":[0,0],"3":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/bots/simulator.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/bots/simulator.ts"],"names":[],"mappings":";;;AAAA,0CAAuC;AAEvC,+CAA8D;AAG9D,8CAA0C;AAC1C,kDAAgD;AAEhD,uCAAwC;AACxC,6CAA0C;AAG1C,MAAa,SAAS;IAIpB,YAAY,KAAY,EAAE,oBAAgD,EAAE;QAC1E,IAAI,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,MAAM,KAAK,SAAS,CAAC,EAAE;YACnD,MAAM,IAAI,sBAAS,CAAC,4BAAa,CAAC,0BAA0B,CAAC,CAAC;SAC/D;QACD,IAAI,CAAC,UAAU,GAAG,IAAI,wBAAU,CAAC,iBAAiB,CAAC,CAAC;QACpD,IAAI,CAAC,KAAK,GAAG,IAAI,aAAK,CAAC,IAAI,CAAC,CAAC;QAC7B,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,iBAAS,CAAC,KAAK,EAAE,CAAE,WAAI,CAAE,CAAC,CAAC;IAChD,CAAC;IAEM,KAAK;QACV,OAAO,IAAI,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;IACzC,CAAC;IAEM,aAAa,CAAC,KAAY,IAAS,CAAC;IAEnC,oBAAoB,CAAC,KAAY;QACvC,IAAI,QAA+D,CAAC;QACpE,MAAM,UAAU,GAAG,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,MAAM,KAAK,SAAS,CAAC,CAAC;QAE3E,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC1C,MAAM,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,KAAK,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;YACnE,IAAI,MAAM,KAAK,SAAS,EAAE;gBACxB,QAAQ,GAAG,EAAE,EAAE,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,MAAM,EAAE,CAAC;gBAC5C,MAAM;aACP;SACF;QAED,OAAO,QAAQ,CAAC,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,SAAS,CAAC;IAChD,CAAC;IAEM,QAAQ,CAAC,MAAc;QAC5B,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;QAExC,IAAI,OAAO,GAAG,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;QAC1D,OAAO,OAAO,KAAK,SAAS,EAAE;YAC5B,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;YACrC,OAAO,GAAG,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;SACvD;QAED,OAAO,KAAK,CAAC;IACf,CAAC;CAEF;AA9CD,8BA8CC","sourcesContent":["import { Store } from '../store/store';\nimport { Action } from '../store/actions/action';\nimport { BotArbiter, BotArbiterOptions } from './bot-arbiter';\nimport { State } from '../store/state/state';\nimport { StoreHandler } from '../store/store-handler';\nimport { GameError } from '../game-error';\nimport { GameCoreError } from '../game-message';\nimport { ResolvePromptAction } from '../store/actions/resolve-prompt-action';\nimport { deepClone } from '../../utils';\nimport { Card } from '../store/card/card';\n\n\nexport class Simulator implements StoreHandler {\n  public store: Store;\n  private botArbiter: BotArbiter;\n\n  constructor(state: State, botArbiterOptions: Partial<BotArbiterOptions> = {}) {\n    if (state.prompts.some(p => p.result === undefined)) {\n      throw new GameError(GameCoreError.ERROR_SIMULATOR_NOT_STABLE);\n    }\n    this.botArbiter = new BotArbiter(botArbiterOptions);\n    this.store = new Store(this);\n    this.store.state = deepClone(state, [ Card ]);\n  }\n\n  public clone(): Simulator {\n    return new Simulator(this.store.state);\n  }\n\n  public onStateChange(state: State): void {}\n\n  private handleArbiterPrompts(state: State): ResolvePromptAction | undefined {\n    let resolved: {id: number, action: ResolvePromptAction} | undefined;\n    const unresolved = state.prompts.filter(item => item.result === undefined);\n\n    for (let i = 0; i < unresolved.length; i++) {\n      const action = this.botArbiter.resolvePrompt(state, unresolved[i]);\n      if (action !== undefined) {\n        resolved = { id: unresolved[i].id, action };\n        break;\n      }\n    }\n\n    return resolved ? resolved.action : undefined;\n  }\n\n  public dispatch(action: Action): State {\n    let state = this.store.dispatch(action);\n\n    let resolve = this.handleArbiterPrompts(this.store.state);\n    while (resolve !== undefined) {\n      state = this.store.dispatch(resolve);\n      resolve = this.handleArbiterPrompts(this.store.state);\n    }\n\n    return state;\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"4d714e5364f3226763e2040d5e1d074769909dd5","contentHash":"afee0b7860d41b8326cd82e263f4fc80faf4afefc8135eab63842333dce29f4a"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/bots/bot-arbiter.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/bots/bot-arbiter.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":75}},"2":{"start":{"line":4,"column":27},"end":{"line":4,"column":71}},"3":{"start":{"line":5,"column":25},"end":{"line":5,"column":67}},"4":{"start":{"line":6,"column":32},"end":{"line":6,"column":81}},"5":{"start":{"line":8,"column":0},"end":{"line":12,"column":68}},"6":{"start":{"line":9,"column":4},"end":{"line":9,"column":60}},"7":{"start":{"line":10,"column":4},"end":{"line":10,"column":60}},"8":{"start":{"line":11,"column":4},"end":{"line":11,"column":54}},"9":{"start":{"line":14,"column":0},"end":{"line":18,"column":77}},"10":{"start":{"line":15,"column":4},"end":{"line":15,"column":68}},"11":{"start":{"line":16,"column":4},"end":{"line":16,"column":62}},"12":{"start":{"line":17,"column":4},"end":{"line":17,"column":60}},"13":{"start":{"line":21,"column":8},"end":{"line":21,"column":27}},"14":{"start":{"line":22,"column":8},"end":{"line":25,"column":20}},"15":{"start":{"line":28,"column":23},"end":{"line":28,"column":72}},"16":{"start":{"line":28,"column":47},"end":{"line":28,"column":71}},"17":{"start":{"line":29,"column":8},"end":{"line":31,"column":9}},"18":{"start":{"line":30,"column":12},"end":{"line":30,"column":19}},"19":{"start":{"line":32,"column":8},"end":{"line":49,"column":9}},"20":{"start":{"line":33,"column":25},"end":{"line":33,"column":27}},"21":{"start":{"line":34,"column":12},"end":{"line":48,"column":13}},"22":{"start":{"line":36,"column":20},"end":{"line":36,"column":55}},"23":{"start":{"line":37,"column":20},"end":{"line":37,"column":94}},"24":{"start":{"line":39,"column":20},"end":{"line":41,"column":21}},"25":{"start":{"line":39,"column":33},"end":{"line":39,"column":61}},"26":{"start":{"line":40,"column":24},"end":{"line":40,"column":39}},"27":{"start":{"line":42,"column":20},"end":{"line":42,"column":94}},"28":{"start":{"line":44,"column":20},"end":{"line":46,"column":21}},"29":{"start":{"line":44,"column":33},"end":{"line":44,"column":34}},"30":{"start":{"line":45,"column":24},"end":{"line":45,"column":39}},"31":{"start":{"line":47,"column":20},"end":{"line":47,"column":94}},"32":{"start":{"line":50,"column":8},"end":{"line":65,"column":9}},"33":{"start":{"line":51,"column":12},"end":{"line":51,"column":32}},"34":{"start":{"line":52,"column":25},"end":{"line":52,"column":30}},"35":{"start":{"line":53,"column":12},"end":{"line":64,"column":13}},"36":{"start":{"line":55,"column":20},"end":{"line":55,"column":61}},"37":{"start":{"line":56,"column":20},"end":{"line":56,"column":94}},"38":{"start":{"line":59,"column":20},"end":{"line":59,"column":72}},"39":{"start":{"line":60,"column":20},"end":{"line":60,"column":94}},"40":{"start":{"line":62,"column":20},"end":{"line":62,"column":72}},"41":{"start":{"line":63,"column":20},"end":{"line":63,"column":94}},"42":{"start":{"line":68,"column":20},"end":{"line":68,"column":38}},"43":{"start":{"line":69,"column":22},"end":{"line":69,"column":24}},"44":{"start":{"line":70,"column":8},"end":{"line":72,"column":9}},"45":{"start":{"line":70,"column":21},"end":{"line":70,"column":22}},"46":{"start":{"line":71,"column":12},"end":{"line":71,"column":26}},"47":{"start":{"line":73,"column":8},"end":{"line":78,"column":9}},"48":{"start":{"line":73,"column":21},"end":{"line":73,"column":22}},"49":{"start":{"line":74,"column":29},"end":{"line":74,"column":79}},"50":{"start":{"line":75,"column":24},"end":{"line":75,"column":32}},"51":{"start":{"line":76,"column":12},"end":{"line":76,"column":39}},"52":{"start":{"line":77,"column":12},"end":{"line":77,"column":34}},"53":{"start":{"line":79,"column":8},"end":{"line":79,"column":21}},"54":{"start":{"line":82,"column":0},"end":{"line":82,"column":32}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":8,"column":1},"end":{"line":8,"column":2}},"loc":{"start":{"line":8,"column":24},"end":{"line":12,"column":1}},"line":8},"1":{"name":"(anonymous_1)","decl":{"start":{"line":14,"column":1},"end":{"line":14,"column":2}},"loc":{"start":{"line":14,"column":27},"end":{"line":18,"column":1}},"line":14},"2":{"name":"(anonymous_2)","decl":{"start":{"line":20,"column":4},"end":{"line":20,"column":5}},"loc":{"start":{"line":20,"column":30},"end":{"line":26,"column":5}},"line":20},"3":{"name":"(anonymous_3)","decl":{"start":{"line":27,"column":4},"end":{"line":27,"column":5}},"loc":{"start":{"line":27,"column":33},"end":{"line":66,"column":5}},"line":27},"4":{"name":"(anonymous_4)","decl":{"start":{"line":28,"column":42},"end":{"line":28,"column":43}},"loc":{"start":{"line":28,"column":47},"end":{"line":28,"column":71}},"line":28},"5":{"name":"(anonymous_5)","decl":{"start":{"line":67,"column":4},"end":{"line":67,"column":5}},"loc":{"start":{"line":67,"column":19},"end":{"line":80,"column":5}},"line":67}},"branchMap":{"0":{"loc":{"start":{"line":12,"column":17},"end":{"line":12,"column":66}},"type":"binary-expr","locations":[{"start":{"line":12,"column":17},"end":{"line":12,"column":36}},{"start":{"line":12,"column":41},"end":{"line":12,"column":65}}],"line":12},"1":{"loc":{"start":{"line":18,"column":20},"end":{"line":18,"column":75}},"type":"binary-expr","locations":[{"start":{"line":18,"column":20},"end":{"line":18,"column":42}},{"start":{"line":18,"column":47},"end":{"line":18,"column":74}}],"line":18},"2":{"loc":{"start":{"line":20,"column":16},"end":{"line":20,"column":28}},"type":"default-arg","locations":[{"start":{"line":20,"column":26},"end":{"line":20,"column":28}}],"line":20},"3":{"loc":{"start":{"line":29,"column":8},"end":{"line":31,"column":9}},"type":"if","locations":[{"start":{"line":29,"column":8},"end":{"line":31,"column":9}},{"start":{"line":29,"column":8},"end":{"line":31,"column":9}}],"line":29},"4":{"loc":{"start":{"line":32,"column":8},"end":{"line":49,"column":9}},"type":"if","locations":[{"start":{"line":32,"column":8},"end":{"line":49,"column":9}},{"start":{"line":32,"column":8},"end":{"line":49,"column":9}}],"line":32},"5":{"loc":{"start":{"line":34,"column":12},"end":{"line":48,"column":13}},"type":"switch","locations":[{"start":{"line":35,"column":16},"end":{"line":37,"column":94}},{"start":{"line":38,"column":16},"end":{"line":42,"column":94}},{"start":{"line":43,"column":16},"end":{"line":47,"column":94}}],"line":34},"6":{"loc":{"start":{"line":50,"column":8},"end":{"line":65,"column":9}},"type":"if","locations":[{"start":{"line":50,"column":8},"end":{"line":65,"column":9}},{"start":{"line":50,"column":8},"end":{"line":65,"column":9}}],"line":50},"7":{"loc":{"start":{"line":53,"column":12},"end":{"line":64,"column":13}},"type":"switch","locations":[{"start":{"line":54,"column":16},"end":{"line":56,"column":94}},{"start":{"line":57,"column":16},"end":{"line":60,"column":94}},{"start":{"line":61,"column":16},"end":{"line":63,"column":94}}],"line":53},"8":{"loc":{"start":{"line":59,"column":29},"end":{"line":59,"column":71}},"type":"cond-expr","locations":[{"start":{"line":59,"column":59},"end":{"line":59,"column":63}},{"start":{"line":59,"column":66},"end":{"line":59,"column":71}}],"line":59},"9":{"loc":{"start":{"line":62,"column":29},"end":{"line":62,"column":71}},"type":"cond-expr","locations":[{"start":{"line":62,"column":59},"end":{"line":62,"column":64}},{"start":{"line":62,"column":67},"end":{"line":62,"column":71}}],"line":62}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":1},"f":{"0":1,"1":1,"2":0,"3":0,"4":0,"5":0},"b":{"0":[1,1],"1":[1,1],"2":[0],"3":[0,0],"4":[0,0],"5":[0,0,0],"6":[0,0],"7":[0,0,0],"8":[0,0],"9":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/bots/bot-arbiter.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/game/bots/bot-arbiter.ts"],"names":[],"mappings":"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","sourcesContent":["import { CardList } from '../store/state/card-list';\nimport { CoinFlipPrompt } from '../store/prompts/coin-flip-prompt';\nimport { Prompt } from '../store/prompts/prompt';\nimport { ShuffleDeckPrompt } from '../store/prompts/shuffle-prompt';\nimport { State } from '../store/state/state';\nimport { ResolvePromptAction } from '../store/actions/resolve-prompt-action';\n\nexport enum BotFlipMode {\n  ALL_HEADS,\n  ALL_TAILS,\n  RANDOM\n}\n\nexport enum BotShuffleMode {\n  NO_SHUFFLE,\n  REVERSE,\n  RANDOM\n}\n\nexport interface BotArbiterOptions {\n  flipMode: BotFlipMode,\n  shuffleMode: BotShuffleMode\n}\n\nexport class BotArbiter {\n\n  private options: BotArbiterOptions;\n  private flipCount: number = 0;\n\n  constructor(options: Partial<BotArbiterOptions> = {}) {\n    this.options = Object.assign({\n      flipMode: BotFlipMode.ALL_HEADS,\n      shuffleMode: BotShuffleMode.NO_SHUFFLE\n    }, options);\n  }\n\n  public resolvePrompt(state: State, prompt: Prompt<any>): ResolvePromptAction | undefined {\n    const player = state.players.find(p => p.id === prompt.playerId);\n\n    if (player === undefined) {\n      return;\n    }\n\n    if (prompt instanceof ShuffleDeckPrompt) {\n      let result: number[] = [];\n      switch (this.options.shuffleMode) {\n        case BotShuffleMode.RANDOM:\n          result = this.shuffle(player.deck);\n          return new ResolvePromptAction(prompt.id, result);\n        case BotShuffleMode.REVERSE:\n          for (let i = player.deck.cards.length - 1; i >= 0; i--) {\n            result.push(i);\n          }\n          return new ResolvePromptAction(prompt.id, result);\n        default:\n          for (let i = 0; i < player.deck.cards.length; i++) {\n            result.push(i);\n          }\n          return new ResolvePromptAction(prompt.id, result);\n      }\n    }\n\n    if (prompt instanceof CoinFlipPrompt) {\n      this.flipCount += 1;\n      let result: boolean = false;\n      switch (this.options.flipMode) {\n        case BotFlipMode.RANDOM:\n          result = Math.round(Math.random()) === 0;\n          return new ResolvePromptAction(prompt.id, result);\n        case BotFlipMode.ALL_TAILS:\n          // Every 10th coin is opposite to avoid infinite loops.\n          result = (this.flipCount % 10 === 9) ? true : false;\n          return new ResolvePromptAction(prompt.id, result);\n        default:\n          result = (this.flipCount % 10 === 9) ? false : true;\n          return new ResolvePromptAction(prompt.id, result);\n      }\n    }\n  }\n\n  private shuffle(cards: CardList): number[] {\n    const len = cards.cards.length;\n    const order: number[] = [];\n\n    for (let i = 0; i < len; i++) {\n      order.push(i);\n    }\n\n    for (let i = 0; i < len; i++) {\n      const position = Math.min(len - 1, Math.round(Math.random() * len));\n      const tmp = order[i];\n      order[i] = order[position];\n      order[position] = tmp;\n    }\n\n    return order;\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"c48bf60fb06087e2979fdb5b46a3d5d5a8896afa","contentHash":"1515fef059f17b1ee1d2638d6c454d77bc95484d77329787248598a5d4a32df2"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-tactics/attach-tool-tactic.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-tactics/attach-tool-tactic.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":34}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":36}},"3":{"start":{"line":5,"column":25},"end":{"line":5,"column":52}},"4":{"start":{"line":8,"column":22},"end":{"line":10,"column":10}},"5":{"start":{"line":9,"column":12},"end":{"line":9,"column":96}},"6":{"start":{"line":11,"column":8},"end":{"line":13,"column":9}},"7":{"start":{"line":12,"column":12},"end":{"line":12,"column":19}},"8":{"start":{"line":14,"column":21},"end":{"line":14,"column":29}},"9":{"start":{"line":15,"column":26},"end":{"line":15,"column":62}},"10":{"start":{"line":16,"column":24},"end":{"line":16,"column":26}},"11":{"start":{"line":17,"column":8},"end":{"line":27,"column":11}},"12":{"start":{"line":18,"column":12},"end":{"line":20,"column":13}},"13":{"start":{"line":19,"column":16},"end":{"line":19,"column":23}},"14":{"start":{"line":21,"column":12},"end":{"line":21,"column":33}},"15":{"start":{"line":22,"column":26},"end":{"line":22,"column":62}},"16":{"start":{"line":23,"column":12},"end":{"line":23,"column":38}},"17":{"start":{"line":24,"column":12},"end":{"line":26,"column":13}},"18":{"start":{"line":25,"column":16},"end":{"line":25,"column":48}},"19":{"start":{"line":28,"column":8},"end":{"line":30,"column":9}},"20":{"start":{"line":29,"column":12},"end":{"line":29,"column":19}},"21":{"start":{"line":31,"column":8},"end":{"line":31,"column":50}},"22":{"start":{"line":31,"column":31},"end":{"line":31,"column":48}},"23":{"start":{"line":32,"column":23},"end":{"line":32,"column":40}},"24":{"start":{"line":33,"column":22},"end":{"line":33,"column":57}},"25":{"start":{"line":34,"column":8},"end":{"line":34,"column":67}},"26":{"start":{"line":37,"column":0},"end":{"line":37,"column":44}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":7,"column":4},"end":{"line":7,"column":5}},"loc":{"start":{"line":7,"column":29},"end":{"line":35,"column":5}},"line":7},"1":{"name":"(anonymous_1)","decl":{"start":{"line":8,"column":47},"end":{"line":8,"column":48}},"loc":{"start":{"line":8,"column":52},"end":{"line":10,"column":9}},"line":8},"2":{"name":"(anonymous_2)","decl":{"start":{"line":17,"column":63},"end":{"line":17,"column":64}},"loc":{"start":{"line":17,"column":94},"end":{"line":27,"column":9}},"line":17},"3":{"name":"(anonymous_3)","decl":{"start":{"line":31,"column":21},"end":{"line":31,"column":22}},"loc":{"start":{"line":31,"column":31},"end":{"line":31,"column":48}},"line":31}},"branchMap":{"0":{"loc":{"start":{"line":9,"column":19},"end":{"line":9,"column":95}},"type":"binary-expr","locations":[{"start":{"line":9,"column":19},"end":{"line":9,"column":50}},{"start":{"line":9,"column":54},"end":{"line":9,"column":95}}],"line":9},"1":{"loc":{"start":{"line":11,"column":8},"end":{"line":13,"column":9}},"type":"if","locations":[{"start":{"line":11,"column":8},"end":{"line":13,"column":9}},{"start":{"line":11,"column":8},"end":{"line":13,"column":9}}],"line":11},"2":{"loc":{"start":{"line":18,"column":12},"end":{"line":20,"column":13}},"type":"if","locations":[{"start":{"line":18,"column":12},"end":{"line":20,"column":13}},{"start":{"line":18,"column":12},"end":{"line":20,"column":13}}],"line":18},"3":{"loc":{"start":{"line":24,"column":12},"end":{"line":26,"column":13}},"type":"if","locations":[{"start":{"line":24,"column":12},"end":{"line":26,"column":13}},{"start":{"line":24,"column":12},"end":{"line":26,"column":13}}],"line":24},"4":{"loc":{"start":{"line":28,"column":8},"end":{"line":30,"column":9}},"type":"if","locations":[{"start":{"line":28,"column":8},"end":{"line":30,"column":9}},{"start":{"line":28,"column":8},"end":{"line":30,"column":9}}],"line":28}},"s":{"0":1,"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":1},"f":{"0":0,"1":0,"2":0,"3":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-tactics/attach-tool-tactic.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-tactics/attach-tool-tactic.ts"],"names":[],"mappings":";;;AAAA,qCAC4C;AAC5C,qDAAgD;AAEhD,MAAa,gBAAiB,SAAQ,6BAAY;IAEzC,SAAS,CAAC,KAAY,EAAE,MAAc;QAC3C,MAAM,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE;YACzC,OAAO,CAAC,YAAY,kBAAW,IAAI,CAAC,CAAC,WAAW,KAAK,kBAAW,CAAC,IAAI,CAAC;QACxE,CAAC,CAAC,CAAC;QAEH,IAAI,KAAK,CAAC,MAAM,KAAK,CAAC,EAAE;YACtB,OAAO;SACR;QAED,MAAM,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;QACtB,MAAM,SAAS,GAAG,IAAI,CAAC,aAAa,CAAC,KAAK,EAAE,MAAM,CAAC,EAAE,CAAC,CAAC;QAEvD,MAAM,OAAO,GAA4C,EAAE,CAAC;QAC5D,MAAM,CAAC,cAAc,CAAC,iBAAU,CAAC,aAAa,EAAE,CAAC,QAAQ,EAAE,OAAO,EAAE,MAAM,EAAE,EAAE;YAC5E,IAAI,QAAQ,CAAC,IAAI,KAAK,SAAS,EAAE;gBAC/B,OAAO;aACR;YAED,QAAQ,CAAC,IAAI,GAAG,IAAI,CAAC;YACrB,MAAM,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,KAAK,EAAE,MAAM,CAAC,EAAE,CAAC,CAAC;YACnD,QAAQ,CAAC,IAAI,GAAG,SAAS,CAAC;YAE1B,IAAI,KAAK,GAAG,SAAS,EAAE;gBACrB,OAAO,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE,CAAC,CAAC;aACjC;QACH,CAAC,CAAC,CAAC;QAEH,IAAI,OAAO,CAAC,MAAM,KAAK,CAAC,EAAE;YACxB,OAAO;SACR;QAED,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC;QAC1C,MAAM,MAAM,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;QACjC,MAAM,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;QAClD,OAAO,IAAI,qBAAc,CAAC,MAAM,CAAC,EAAE,EAAE,KAAK,EAAE,MAAM,CAAC,CAAC;IACtD,CAAC;CAEF;AAvCD,4CAuCC","sourcesContent":["import { Action, Player, State, PlayCardAction, TrainerCard, TrainerType,\n  CardTarget, PlayerType} from '../../game';\nimport { SimpleTactic } from './simple-tactics';\n\nexport class AttachToolTactic extends SimpleTactic {\n\n  public useTactic(state: State, player: Player): Action | undefined {\n    const tools = player.hand.cards.filter(c => {\n      return c instanceof TrainerCard && c.trainerType === TrainerType.TOOL;\n    });\n\n    if (tools.length === 0) {\n      return;\n    }\n\n    const tool = tools[0];\n    const baseScore = this.getStateScore(state, player.id);\n\n    const targets: { target: CardTarget, score: number }[] = [];\n    player.forEachPokemon(PlayerType.BOTTOM_PLAYER, (cardList, pokemon, target) => {\n      if (cardList.tool !== undefined) {\n        return;\n      }\n\n      cardList.tool = tool;\n      const score = this.getStateScore(state, player.id);\n      cardList.tool = undefined;\n\n      if (score > baseScore) {\n        targets.push({ target, score });\n      }\n    });\n\n    if (targets.length === 0) {\n      return;\n    }\n\n    targets.sort((a, b) => b.score - a.score);\n    const target = targets[0].target;\n    const index = player.hand.cards.indexOf(tools[0]);\n    return new PlayCardAction(player.id, index, target); \n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"af35a6ddb55a9d36f8ded04cfb4b453ac041bf21","contentHash":"969f3e6f78eac5ee9f5f39cb27f0aee66aff8918ea941bc672fbcfbb82a6771f"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-tactics/attack-tactic.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-tactics/attack-tactic.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":30}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":36}},"3":{"start":{"line":5,"column":25},"end":{"line":5,"column":52}},"4":{"start":{"line":8,"column":19},"end":{"line":8,"column":50}},"5":{"start":{"line":9,"column":8},"end":{"line":11,"column":9}},"6":{"start":{"line":10,"column":12},"end":{"line":10,"column":29}},"7":{"start":{"line":12,"column":23},"end":{"line":12,"column":53}},"8":{"start":{"line":13,"column":8},"end":{"line":15,"column":9}},"9":{"start":{"line":14,"column":12},"end":{"line":14,"column":29}},"10":{"start":{"line":16,"column":28},"end":{"line":16,"column":67}},"11":{"start":{"line":17,"column":24},"end":{"line":17,"column":74}},"12":{"start":{"line":19,"column":8},"end":{"line":26,"column":11}},"13":{"start":{"line":20,"column":27},"end":{"line":20,"column":74}},"14":{"start":{"line":21,"column":26},"end":{"line":21,"column":71}},"15":{"start":{"line":22,"column":12},"end":{"line":25,"column":13}},"16":{"start":{"line":23,"column":16},"end":{"line":23,"column":34}},"17":{"start":{"line":24,"column":16},"end":{"line":24,"column":38}},"18":{"start":{"line":27,"column":8},"end":{"line":27,"column":28}},"19":{"start":{"line":30,"column":0},"end":{"line":30,"column":36}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":7,"column":4},"end":{"line":7,"column":5}},"loc":{"start":{"line":7,"column":29},"end":{"line":28,"column":5}},"line":7},"1":{"name":"(anonymous_1)","decl":{"start":{"line":19,"column":31},"end":{"line":19,"column":32}},"loc":{"start":{"line":19,"column":41},"end":{"line":26,"column":9}},"line":19}},"branchMap":{"0":{"loc":{"start":{"line":9,"column":8},"end":{"line":11,"column":9}},"type":"if","locations":[{"start":{"line":9,"column":8},"end":{"line":11,"column":9}},{"start":{"line":9,"column":8},"end":{"line":11,"column":9}}],"line":9},"1":{"loc":{"start":{"line":9,"column":12},"end":{"line":9,"column":105}},"type":"binary-expr","locations":[{"start":{"line":9,"column":12},"end":{"line":9,"column":58}},{"start":{"line":9,"column":62},"end":{"line":9,"column":105}}],"line":9},"2":{"loc":{"start":{"line":13,"column":8},"end":{"line":15,"column":9}},"type":"if","locations":[{"start":{"line":13,"column":8},"end":{"line":15,"column":9}},{"start":{"line":13,"column":8},"end":{"line":15,"column":9}}],"line":13},"3":{"loc":{"start":{"line":22,"column":12},"end":{"line":25,"column":13}},"type":"if","locations":[{"start":{"line":22,"column":12},"end":{"line":25,"column":13}},{"start":{"line":22,"column":12},"end":{"line":25,"column":13}}],"line":22},"4":{"loc":{"start":{"line":22,"column":16},"end":{"line":22,"column":56}},"type":"binary-expr","locations":[{"start":{"line":22,"column":16},"end":{"line":22,"column":35}},{"start":{"line":22,"column":39},"end":{"line":22,"column":56}}],"line":22}},"s":{"0":1,"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":1},"f":{"0":0,"1":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-tactics/attack-tactic.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-tactics/attack-tactic.ts"],"names":[],"mappings":";;;AAAA,qCAAmF;AACnF,qDAAgD;AAEhD,MAAa,YAAa,SAAQ,6BAAY;IAErC,SAAS,CAAC,KAAY,EAAE,MAAc;QAC3C,MAAM,EAAE,GAAG,MAAM,CAAC,MAAM,CAAC,iBAAiB,CAAC;QAC3C,IAAI,EAAE,CAAC,QAAQ,CAAC,uBAAgB,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC,QAAQ,CAAC,uBAAgB,CAAC,MAAM,CAAC,EAAE;YACnF,OAAO,SAAS,CAAC;SAClB;QAED,MAAM,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,cAAc,EAAE,CAAC;QAC9C,IAAI,CAAC,MAAM,EAAE;YACX,OAAO,SAAS,CAAC;SAClB;QAED,MAAM,WAAW,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC,WAAW,CAAC;QAC5D,IAAI,SAAS,GAAG,IAAI,CAAC,aAAa,CAAC,KAAK,EAAE,MAAM,CAAC,EAAE,CAAC,GAAG,WAAW,CAAC;QACnE,IAAI,YAAsC,CAAC;QAE3C,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE;YAC9B,MAAM,MAAM,GAAG,IAAI,mBAAY,CAAC,MAAM,CAAC,EAAE,EAAE,MAAM,CAAC,IAAI,CAAC,CAAC;YACxD,MAAM,KAAK,GAAG,IAAI,CAAC,cAAc,CAAC,KAAK,EAAE,MAAM,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC;YAE5D,IAAI,KAAK,KAAK,SAAS,IAAI,SAAS,GAAG,KAAK,EAAE;gBAC5C,SAAS,GAAG,KAAK,CAAC;gBAClB,YAAY,GAAG,MAAM,CAAC;aACvB;QACH,CAAC,CAAC,CAAC;QAEH,OAAO,YAAY,CAAC;IACtB,CAAC;CAEF;AA9BD,oCA8BC","sourcesContent":["import { Action, Player, State, SpecialCondition, AttackAction } from '../../game';\nimport { SimpleTactic } from './simple-tactics';\n\nexport class AttackTactic extends SimpleTactic {\n\n  public useTactic(state: State, player: Player): Action | undefined {\n    const sp = player.active.specialConditions;\n    if (sp.includes(SpecialCondition.PARALYZED) || sp.includes(SpecialCondition.ASLEEP)) {\n      return undefined;\n    }\n\n    const active = player.active.getPokemonCard();\n    if (!active) {\n      return undefined;\n    }\n\n    const attackBonus = this.options.scores.tactics.attackBonus;\n    let bestScore = this.getStateScore(state, player.id) - attackBonus;\n    let attackAction: AttackAction | undefined;\n\n    active.attacks.forEach(attack => {\n      const action = new AttackAction(player.id, attack.name);\n      const score = this.evaluateAction(state, player.id, action);\n\n      if (score !== undefined && bestScore < score) {\n        bestScore = score;\n        attackAction = action;\n      }\n    });\n\n    return attackAction;\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"149a3042dd8fe505510c8ce8c48d70ece2a10236","contentHash":"579f7bf5e29b483b1daa67ec2df3dd29d277b14c1328f94ebf043d65228aaac4"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-tactics/retreat-tactic.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-tactics/retreat-tactic.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":31}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":36}},"3":{"start":{"line":5,"column":25},"end":{"line":5,"column":52}},"4":{"start":{"line":8,"column":8},"end":{"line":10,"column":9}},"5":{"start":{"line":9,"column":12},"end":{"line":9,"column":19}},"6":{"start":{"line":11,"column":24},"end":{"line":11,"column":60}},"7":{"start":{"line":13,"column":8},"end":{"line":23,"column":11}},"8":{"start":{"line":14,"column":12},"end":{"line":16,"column":13}},"9":{"start":{"line":15,"column":16},"end":{"line":15,"column":23}},"10":{"start":{"line":17,"column":27},"end":{"line":17,"column":69}},"11":{"start":{"line":18,"column":26},"end":{"line":18,"column":71}},"12":{"start":{"line":19,"column":12},"end":{"line":22,"column":13}},"13":{"start":{"line":20,"column":16},"end":{"line":20,"column":34}},"14":{"start":{"line":21,"column":16},"end":{"line":21,"column":39}},"15":{"start":{"line":24,"column":8},"end":{"line":24,"column":29}},"16":{"start":{"line":27,"column":0},"end":{"line":27,"column":38}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":7,"column":4},"end":{"line":7,"column":5}},"loc":{"start":{"line":7,"column":29},"end":{"line":25,"column":5}},"line":7},"1":{"name":"(anonymous_1)","decl":{"start":{"line":13,"column":29},"end":{"line":13,"column":30}},"loc":{"start":{"line":13,"column":47},"end":{"line":23,"column":9}},"line":13}},"branchMap":{"0":{"loc":{"start":{"line":8,"column":8},"end":{"line":10,"column":9}},"type":"if","locations":[{"start":{"line":8,"column":8},"end":{"line":10,"column":9}},{"start":{"line":8,"column":8},"end":{"line":10,"column":9}}],"line":8},"1":{"loc":{"start":{"line":14,"column":12},"end":{"line":16,"column":13}},"type":"if","locations":[{"start":{"line":14,"column":12},"end":{"line":16,"column":13}},{"start":{"line":14,"column":12},"end":{"line":16,"column":13}}],"line":14},"2":{"loc":{"start":{"line":19,"column":12},"end":{"line":22,"column":13}},"type":"if","locations":[{"start":{"line":19,"column":12},"end":{"line":22,"column":13}},{"start":{"line":19,"column":12},"end":{"line":22,"column":13}}],"line":19},"3":{"loc":{"start":{"line":19,"column":16},"end":{"line":19,"column":56}},"type":"binary-expr","locations":[{"start":{"line":19,"column":16},"end":{"line":19,"column":35}},{"start":{"line":19,"column":39},"end":{"line":19,"column":56}}],"line":19}},"s":{"0":1,"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":1},"f":{"0":0,"1":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-tactics/retreat-tactic.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-tactics/retreat-tactic.ts"],"names":[],"mappings":";;;AAAA,qCAAkE;AAClE,qDAAgD;AAEhD,MAAa,aAAc,SAAQ,6BAAY;IAEtC,SAAS,CAAC,KAAY,EAAE,MAAc;QAE3C,IAAI,MAAM,CAAC,aAAa,KAAK,KAAK,CAAC,IAAI,EAAE;YACvC,OAAO;SACR;QAED,IAAI,SAAS,GAAG,IAAI,CAAC,aAAa,CAAC,KAAK,EAAE,MAAM,CAAC,EAAE,CAAC,CAAC;QACrD,IAAI,aAAwC,CAAC;QAC7C,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,KAAK,EAAE,KAAK,EAAE,EAAE;YACpC,IAAI,KAAK,CAAC,KAAK,CAAC,MAAM,KAAK,CAAC,EAAE;gBAC5B,OAAO;aACR;YAED,MAAM,MAAM,GAAG,IAAI,oBAAa,CAAC,MAAM,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC;YACnD,MAAM,KAAK,GAAG,IAAI,CAAC,cAAc,CAAC,KAAK,EAAE,MAAM,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC;YAE5D,IAAI,KAAK,KAAK,SAAS,IAAI,SAAS,GAAG,KAAK,EAAE;gBAC5C,SAAS,GAAG,KAAK,CAAC;gBAClB,aAAa,GAAG,MAAM,CAAC;aACxB;QACH,CAAC,CAAC,CAAC;QAEH,OAAO,aAAa,CAAC;IACvB,CAAC;CAEF;AA3BD,sCA2BC","sourcesContent":["import { Action, Player, State, RetreatAction } from '../../game';\nimport { SimpleTactic } from './simple-tactics';\n\nexport class RetreatTactic extends SimpleTactic {\n\n  public useTactic(state: State, player: Player): Action | undefined {\n\n    if (player.retreatedTurn === state.turn) {\n      return;\n    }\n\n    let bestScore = this.getStateScore(state, player.id);\n    let retreatAction: RetreatAction | undefined;\n    player.bench.forEach((bench, index) => {\n      if (bench.cards.length === 0) {\n        return;\n      }\n\n      const action = new RetreatAction(player.id, index);\n      const score = this.evaluateAction(state, player.id, action);\n\n      if (score !== undefined && bestScore < score) {\n        bestScore = score;\n        retreatAction = action;\n      }\n    });\n\n    return retreatAction;\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"7293906f0f3f77808e3826894d31c1e347a78862","contentHash":"cd767fb16a267e49ac7b3877d586960b73219ae29d4ef1f41927509451c37457"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-tactics/evolve-tactic.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-tactics/evolve-tactic.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":30}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":36}},"3":{"start":{"line":5,"column":25},"end":{"line":5,"column":52}},"4":{"start":{"line":8,"column":25},"end":{"line":8,"column":27}},"5":{"start":{"line":9,"column":8},"end":{"line":13,"column":11}},"6":{"start":{"line":10,"column":12},"end":{"line":12,"column":13}},"7":{"start":{"line":11,"column":16},"end":{"line":11,"column":48}},"8":{"start":{"line":14,"column":8},"end":{"line":21,"column":9}},"9":{"start":{"line":14,"column":21},"end":{"line":14,"column":22}},"10":{"start":{"line":15,"column":30},"end":{"line":17,"column":14}},"11":{"start":{"line":16,"column":16},"end":{"line":16,"column":98}},"12":{"start":{"line":18,"column":12},"end":{"line":20,"column":13}},"13":{"start":{"line":19,"column":16},"end":{"line":19,"column":118}},"14":{"start":{"line":24,"column":0},"end":{"line":24,"column":36}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":7,"column":4},"end":{"line":7,"column":5}},"loc":{"start":{"line":7,"column":29},"end":{"line":22,"column":5}},"line":7},"1":{"name":"(anonymous_1)","decl":{"start":{"line":9,"column":63},"end":{"line":9,"column":64}},"loc":{"start":{"line":9,"column":91},"end":{"line":13,"column":9}},"line":9},"2":{"name":"(anonymous_2)","decl":{"start":{"line":15,"column":53},"end":{"line":15,"column":54}},"loc":{"start":{"line":15,"column":58},"end":{"line":17,"column":13}},"line":15}},"branchMap":{"0":{"loc":{"start":{"line":10,"column":12},"end":{"line":12,"column":13}},"type":"if","locations":[{"start":{"line":10,"column":12},"end":{"line":12,"column":13}},{"start":{"line":10,"column":12},"end":{"line":12,"column":13}}],"line":10},"1":{"loc":{"start":{"line":16,"column":23},"end":{"line":16,"column":97}},"type":"binary-expr","locations":[{"start":{"line":16,"column":23},"end":{"line":16,"column":54}},{"start":{"line":16,"column":58},"end":{"line":16,"column":97}}],"line":16},"2":{"loc":{"start":{"line":18,"column":12},"end":{"line":20,"column":13}},"type":"if","locations":[{"start":{"line":18,"column":12},"end":{"line":20,"column":13}},{"start":{"line":18,"column":12},"end":{"line":20,"column":13}}],"line":18}},"s":{"0":1,"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":1},"f":{"0":0,"1":0,"2":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-tactics/evolve-tactic.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-tactics/evolve-tactic.ts"],"names":[],"mappings":";;;AAAA,qCAAwG;AACxG,qDAAgD;AAEhD,MAAa,YAAa,SAAQ,6BAAY;IAErC,SAAS,CAAC,KAAY,EAAE,MAAc;QAC3C,MAAM,QAAQ,GAA8C,EAAE,CAAC;QAE/D,MAAM,CAAC,cAAc,CAAC,iBAAU,CAAC,aAAa,EAAE,CAAC,QAAQ,EAAE,IAAI,EAAE,MAAM,EAAE,EAAE;YACzE,IAAI,QAAQ,CAAC,iBAAiB,KAAK,KAAK,CAAC,IAAI,EAAE;gBAC7C,QAAQ,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC,CAAC;aACjC;QACH,CAAC,CAAC,CAAC;QAEH,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACxC,MAAM,SAAS,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE;gBAC3C,OAAO,CAAC,YAAY,kBAAW,IAAI,CAAC,CAAC,WAAW,KAAK,QAAQ,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC;YAC7E,CAAC,CAAC,CAAC;YACH,IAAI,SAAS,EAAE;gBACb,OAAO,IAAI,qBAAc,CACvB,MAAM,CAAC,EAAE,EACT,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,EACpC,QAAQ,CAAC,CAAC,CAAC,CAAC,MAAM,CACnB,CAAC;aACH;SACF;IACH,CAAC;CAEF;AAzBD,oCAyBC","sourcesContent":["import { Action, Player, State, PokemonCard, PlayerType, CardTarget, PlayCardAction } from '../../game';\nimport { SimpleTactic } from './simple-tactics';\n\nexport class EvolveTactic extends SimpleTactic {\n\n  public useTactic(state: State, player: Player): Action | undefined {\n    const pokemons: {card: PokemonCard, target: CardTarget}[] = [];\n\n    player.forEachPokemon(PlayerType.BOTTOM_PLAYER, (cardList, card, target) => {\n      if (cardList.pokemonPlayedTurn !== state.turn) {\n        pokemons.push({ card, target });\n      }\n    });\n\n    for (let i = 0; i < pokemons.length; i++) {\n      const evolution = player.hand.cards.find(c => {\n        return c instanceof PokemonCard && c.evolvesFrom === pokemons[i].card.name;\n      });\n      if (evolution) {\n        return new PlayCardAction(\n          player.id,\n          player.hand.cards.indexOf(evolution),\n          pokemons[i].target\n        );\n      }\n    }\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"0bf5cfb155044f50d6eb2f118d576a297b83f7c8","contentHash":"9e4642925bfae3fa42378dab60d31b1c74f31f873cebde403ef49f1270e4aace"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-tactics/play-basic-tactic.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-tactics/play-basic-tactic.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":33}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":36}},"3":{"start":{"line":5,"column":25},"end":{"line":5,"column":52}},"4":{"start":{"line":8,"column":29},"end":{"line":9,"column":89}},"5":{"start":{"line":9,"column":23},"end":{"line":9,"column":88}},"6":{"start":{"line":10,"column":31},"end":{"line":11,"column":44}},"7":{"start":{"line":11,"column":23},"end":{"line":11,"column":43}},"8":{"start":{"line":12,"column":8},"end":{"line":14,"column":9}},"9":{"start":{"line":13,"column":12},"end":{"line":13,"column":148}},"10":{"start":{"line":17,"column":0},"end":{"line":17,"column":42}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":7,"column":4},"end":{"line":7,"column":5}},"loc":{"start":{"line":7,"column":29},"end":{"line":15,"column":5}},"line":7},"1":{"name":"(anonymous_1)","decl":{"start":{"line":9,"column":18},"end":{"line":9,"column":19}},"loc":{"start":{"line":9,"column":23},"end":{"line":9,"column":88}},"line":9},"2":{"name":"(anonymous_2)","decl":{"start":{"line":11,"column":18},"end":{"line":11,"column":19}},"loc":{"start":{"line":11,"column":23},"end":{"line":11,"column":43}},"line":11}},"branchMap":{"0":{"loc":{"start":{"line":9,"column":23},"end":{"line":9,"column":88}},"type":"binary-expr","locations":[{"start":{"line":9,"column":23},"end":{"line":9,"column":54}},{"start":{"line":9,"column":58},"end":{"line":9,"column":88}}],"line":9},"1":{"loc":{"start":{"line":12,"column":8},"end":{"line":14,"column":9}},"type":"if","locations":[{"start":{"line":12,"column":8},"end":{"line":14,"column":9}},{"start":{"line":12,"column":8},"end":{"line":14,"column":9}}],"line":12},"2":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":42}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":24}},{"start":{"line":12,"column":28},"end":{"line":12,"column":42}}],"line":12}},"s":{"0":1,"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":1},"f":{"0":0,"1":0,"2":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-tactics/play-basic-tactic.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-tactics/play-basic-tactic.ts"],"names":[],"mappings":";;;AAAA,qCAAuF;AACvF,qDAAgD;AAEhD,MAAa,eAAgB,SAAQ,6BAAY;IAExC,SAAS,CAAC,KAAY,EAAE,MAAc;QAC3C,MAAM,YAAY,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK;aACnC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,YAAY,kBAAW,IAAI,CAAC,CAAC,KAAK,KAAK,YAAK,CAAC,KAAK,CAAC,CAAC;QAElE,MAAM,cAAc,GAAG,MAAM,CAAC,KAAK;aAChC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC;QAEnC,IAAI,YAAY,IAAI,cAAc,EAAE;YAClC,OAAO,IAAI,qBAAc,CACvB,MAAM,CAAC,EAAE,EACT,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,YAAY,CAAC,EACvC,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,KAAK,EAAE,cAAc,CAAC,CAClD,CAAC;SACH;IACH,CAAC;CAEF;AAlBD,0CAkBC","sourcesContent":["import { Action, Player, State, PokemonCard, Stage, PlayCardAction } from '../../game';\nimport { SimpleTactic } from './simple-tactics';\n\nexport class PlayBasicTactic extends SimpleTactic {\n\n  public useTactic(state: State, player: Player): Action | undefined {\n    const basicPokemon = player.hand.cards\n      .find(c => c instanceof PokemonCard && c.stage === Stage.BASIC);\n\n    const emptyBenchSlot = player.bench\n      .find(b => b.cards.length === 0);\n\n    if (basicPokemon && emptyBenchSlot) {\n      return new PlayCardAction(\n        player.id,\n        player.hand.cards.indexOf(basicPokemon),\n        this.getCardTarget(player, state, emptyBenchSlot)\n      );\n    }\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"bc2db8ac244280fbe8b5f36ea95e561d7cadd170","contentHash":"adef9a2efbae5ddc029904bf45ae89150a3195c314ea13293533993ccb8ff7e5"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-tactics/play-stadium-tactic.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-tactics/play-stadium-tactic.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":35}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":36}},"3":{"start":{"line":5,"column":25},"end":{"line":5,"column":52}},"4":{"start":{"line":9,"column":8},"end":{"line":11,"column":9}},"5":{"start":{"line":10,"column":12},"end":{"line":10,"column":19}},"6":{"start":{"line":12,"column":23},"end":{"line":14,"column":10}},"7":{"start":{"line":13,"column":12},"end":{"line":13,"column":99}},"8":{"start":{"line":16,"column":31},"end":{"line":16,"column":70}},"9":{"start":{"line":17,"column":8},"end":{"line":19,"column":9}},"10":{"start":{"line":18,"column":12},"end":{"line":18,"column":84}},"11":{"start":{"line":18,"column":44},"end":{"line":18,"column":82}},"12":{"start":{"line":20,"column":8},"end":{"line":22,"column":9}},"13":{"start":{"line":21,"column":12},"end":{"line":21,"column":19}},"14":{"start":{"line":23,"column":22},"end":{"line":23,"column":60}},"15":{"start":{"line":24,"column":23},"end":{"line":24,"column":95}},"16":{"start":{"line":25,"column":8},"end":{"line":25,"column":67}},"17":{"start":{"line":28,"column":0},"end":{"line":28,"column":46}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":7,"column":4},"end":{"line":7,"column":5}},"loc":{"start":{"line":7,"column":29},"end":{"line":26,"column":5}},"line":7},"1":{"name":"(anonymous_1)","decl":{"start":{"line":12,"column":48},"end":{"line":12,"column":49}},"loc":{"start":{"line":12,"column":53},"end":{"line":14,"column":9}},"line":12},"2":{"name":"(anonymous_2)","decl":{"start":{"line":18,"column":39},"end":{"line":18,"column":40}},"loc":{"start":{"line":18,"column":44},"end":{"line":18,"column":82}},"line":18}},"branchMap":{"0":{"loc":{"start":{"line":9,"column":8},"end":{"line":11,"column":9}},"type":"if","locations":[{"start":{"line":9,"column":8},"end":{"line":11,"column":9}},{"start":{"line":9,"column":8},"end":{"line":11,"column":9}}],"line":9},"1":{"loc":{"start":{"line":9,"column":12},"end":{"line":9,"column":85}},"type":"binary-expr","locations":[{"start":{"line":9,"column":12},"end":{"line":9,"column":50}},{"start":{"line":9,"column":54},"end":{"line":9,"column":85}}],"line":9},"2":{"loc":{"start":{"line":13,"column":19},"end":{"line":13,"column":98}},"type":"binary-expr","locations":[{"start":{"line":13,"column":19},"end":{"line":13,"column":50}},{"start":{"line":13,"column":54},"end":{"line":13,"column":98}}],"line":13},"3":{"loc":{"start":{"line":17,"column":8},"end":{"line":19,"column":9}},"type":"if","locations":[{"start":{"line":17,"column":8},"end":{"line":19,"column":9}},{"start":{"line":17,"column":8},"end":{"line":19,"column":9}}],"line":17},"4":{"loc":{"start":{"line":20,"column":8},"end":{"line":22,"column":9}},"type":"if","locations":[{"start":{"line":20,"column":8},"end":{"line":22,"column":9}},{"start":{"line":20,"column":8},"end":{"line":22,"column":9}}],"line":20}},"s":{"0":1,"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":1},"f":{"0":0,"1":0,"2":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-tactics/play-stadium-tactic.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-tactics/play-stadium-tactic.ts"],"names":[],"mappings":";;;AAAA,qCACuD;AACvD,qDAAgD;AAEhD,MAAa,iBAAkB,SAAQ,6BAAY;IAE1C,SAAS,CAAC,KAAY,EAAE,MAAc;QAC3C,uCAAuC;QACvC,IAAI,MAAM,CAAC,iBAAiB,IAAI,KAAK,CAAC,IAAI,IAAI,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE;YAC7E,OAAO;SACR;QAED,IAAI,QAAQ,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE;YAC1C,OAAO,CAAC,YAAY,kBAAW,IAAI,CAAC,CAAC,WAAW,KAAK,kBAAW,CAAC,OAAO,CAAC;QAC3E,CAAC,CAAC,CAAC;QAEH,0DAA0D;QAC1D,MAAM,cAAc,GAAG,iBAAU,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC;QACxD,IAAI,cAAc,EAAE;YAClB,QAAQ,GAAG,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ,KAAK,cAAc,CAAC,QAAQ,CAAC,CAAC;SACzE;QAED,IAAI,QAAQ,CAAC,MAAM,KAAK,CAAC,EAAE;YACzB,OAAO;SACR;QAED,MAAM,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;QACrD,MAAM,MAAM,GAAG,EAAE,MAAM,EAAE,iBAAU,CAAC,GAAG,EAAE,IAAI,EAAE,eAAQ,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC;QAC1E,OAAO,IAAI,qBAAc,CAAC,MAAM,CAAC,EAAE,EAAE,KAAK,EAAE,MAAM,CAAC,CAAC;IACtD,CAAC;CAEF;AA3BD,8CA2BC","sourcesContent":["import { Action, Player, State, TrainerCard, TrainerType, PlayCardAction,\n  PlayerType, SlotType, StateUtils } from '../../game';\nimport { SimpleTactic } from './simple-tactics';\n\nexport class PlayStadiumTactic extends SimpleTactic {\n\n  public useTactic(state: State, player: Player): Action | undefined {\n    // Don't discard your own stadium cards\n    if (player.stadiumPlayedTurn >= state.turn || player.stadium.cards.length > 0) {\n      return;\n    }\n\n    let stadiums = player.hand.cards.filter(c => {\n      return c instanceof TrainerCard && c.trainerType === TrainerType.STADIUM;\n    });\n\n    // Don't play stadiums of the same name as current stadium\n    const currentStadium = StateUtils.getStadiumCard(state);\n    if (currentStadium) {\n      stadiums = stadiums.filter(c => c.fullName !== currentStadium.fullName);\n    }\n\n    if (stadiums.length === 0) {\n      return;\n    }\n\n    const index = player.hand.cards.indexOf(stadiums[0]);\n    const target = { player: PlayerType.ANY, slot: SlotType.BOARD, index: 0 };\n    return new PlayCardAction(player.id, index, target);\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"db796ae57e8315e92e1cd5ffa21ac308b55140ff","contentHash":"ff56447ae096814701b3a807d895e087c0b66ff1c278109aa520079e567956f8"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-tactics/play-supporter-tactic.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-tactics/play-supporter-tactic.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":36}},"3":{"start":{"line":5,"column":25},"end":{"line":5,"column":52}},"4":{"start":{"line":8,"column":8},"end":{"line":10,"column":9}},"5":{"start":{"line":9,"column":12},"end":{"line":9,"column":19}},"6":{"start":{"line":11,"column":27},"end":{"line":13,"column":10}},"7":{"start":{"line":12,"column":12},"end":{"line":12,"column":101}},"8":{"start":{"line":14,"column":8},"end":{"line":16,"column":9}},"9":{"start":{"line":15,"column":12},"end":{"line":15,"column":19}},"10":{"start":{"line":17,"column":31},"end":{"line":17,"column":73}},"11":{"start":{"line":18,"column":23},"end":{"line":18,"column":95}},"12":{"start":{"line":19,"column":24},"end":{"line":19,"column":77}},"13":{"start":{"line":21,"column":8},"end":{"line":29,"column":11}},"14":{"start":{"line":22,"column":26},"end":{"line":22,"column":57}},"15":{"start":{"line":23,"column":27},"end":{"line":23,"column":78}},"16":{"start":{"line":24,"column":26},"end":{"line":24,"column":71}},"17":{"start":{"line":25,"column":12},"end":{"line":28,"column":13}},"18":{"start":{"line":26,"column":16},"end":{"line":26,"column":34}},"19":{"start":{"line":27,"column":16},"end":{"line":27,"column":40}},"20":{"start":{"line":30,"column":8},"end":{"line":30,"column":30}},"21":{"start":{"line":33,"column":0},"end":{"line":33,"column":50}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":7,"column":4},"end":{"line":7,"column":5}},"loc":{"start":{"line":7,"column":29},"end":{"line":31,"column":5}},"line":7},"1":{"name":"(anonymous_1)","decl":{"start":{"line":11,"column":52},"end":{"line":11,"column":53}},"loc":{"start":{"line":11,"column":57},"end":{"line":13,"column":9}},"line":11},"2":{"name":"(anonymous_2)","decl":{"start":{"line":21,"column":27},"end":{"line":21,"column":28}},"loc":{"start":{"line":21,"column":35},"end":{"line":29,"column":9}},"line":21}},"branchMap":{"0":{"loc":{"start":{"line":8,"column":8},"end":{"line":10,"column":9}},"type":"if","locations":[{"start":{"line":8,"column":8},"end":{"line":10,"column":9}},{"start":{"line":8,"column":8},"end":{"line":10,"column":9}}],"line":8},"1":{"loc":{"start":{"line":12,"column":19},"end":{"line":12,"column":100}},"type":"binary-expr","locations":[{"start":{"line":12,"column":19},"end":{"line":12,"column":50}},{"start":{"line":12,"column":54},"end":{"line":12,"column":100}}],"line":12},"2":{"loc":{"start":{"line":14,"column":8},"end":{"line":16,"column":9}},"type":"if","locations":[{"start":{"line":14,"column":8},"end":{"line":16,"column":9}},{"start":{"line":14,"column":8},"end":{"line":16,"column":9}}],"line":14},"3":{"loc":{"start":{"line":25,"column":12},"end":{"line":28,"column":13}},"type":"if","locations":[{"start":{"line":25,"column":12},"end":{"line":28,"column":13}},{"start":{"line":25,"column":12},"end":{"line":28,"column":13}}],"line":25},"4":{"loc":{"start":{"line":25,"column":16},"end":{"line":25,"column":56}},"type":"binary-expr","locations":[{"start":{"line":25,"column":16},"end":{"line":25,"column":35}},{"start":{"line":25,"column":39},"end":{"line":25,"column":56}}],"line":25}},"s":{"0":1,"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":1},"f":{"0":0,"1":0,"2":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-tactics/play-supporter-tactic.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-tactics/play-supporter-tactic.ts"],"names":[],"mappings":";;;AAAA,qCAC2C;AAC3C,qDAAgD;AAEhD,MAAa,mBAAoB,SAAQ,6BAAY;IAE5C,SAAS,CAAC,KAAY,EAAE,MAAc;QAC3C,IAAI,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE;YACrC,OAAO;SACR;QAED,MAAM,UAAU,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE;YAC9C,OAAO,CAAC,YAAY,kBAAW,IAAI,CAAC,CAAC,WAAW,KAAK,kBAAW,CAAC,SAAS,CAAC;QAC7E,CAAC,CAAC,CAAC;QAEH,IAAI,UAAU,CAAC,MAAM,KAAK,CAAC,EAAE;YAC3B,OAAO;SACR;QAED,MAAM,cAAc,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC,cAAc,CAAC;QAClE,MAAM,MAAM,GAAG,EAAE,MAAM,EAAE,iBAAU,CAAC,GAAG,EAAE,IAAI,EAAE,eAAQ,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC;QAC1E,IAAI,SAAS,GAAG,IAAI,CAAC,aAAa,CAAC,KAAK,EAAE,MAAM,CAAC,EAAE,CAAC,GAAG,cAAc,CAAC;QACtE,IAAI,cAA0C,CAAC;QAE/C,UAAU,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;YACxB,MAAM,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;YAC9C,MAAM,MAAM,GAAG,IAAI,qBAAc,CAAC,MAAM,CAAC,EAAE,EAAE,KAAK,EAAE,MAAM,CAAC,CAAC;YAC5D,MAAM,KAAK,GAAG,IAAI,CAAC,cAAc,CAAC,KAAK,EAAE,MAAM,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC;YAE5D,IAAI,KAAK,KAAK,SAAS,IAAI,SAAS,GAAG,KAAK,EAAE;gBAC5C,SAAS,GAAG,KAAK,CAAC;gBAClB,cAAc,GAAG,MAAM,CAAC;aACzB;QACH,CAAC,CAAC,CAAC;QAEH,OAAO,cAAc,CAAC;IACxB,CAAC;CAEF;AAlCD,kDAkCC","sourcesContent":["import { Action, Player, State, TrainerCard, TrainerType, PlayCardAction,\n  PlayerType, SlotType } from '../../game';\nimport { SimpleTactic } from './simple-tactics';\n\nexport class PlaySupporterTactic extends SimpleTactic {\n\n  public useTactic(state: State, player: Player): Action | undefined {\n    if (player.supporter.cards.length > 0) {\n      return;\n    }\n\n    const supporters = player.hand.cards.filter(c => {\n      return c instanceof TrainerCard && c.trainerType === TrainerType.SUPPORTER;\n    });\n\n    if (supporters.length === 0) {\n      return;\n    }\n\n    const supporterBonus = this.options.scores.tactics.supporterBonus;\n    const target = { player: PlayerType.ANY, slot: SlotType.BOARD, index: 0 };\n    let bestScore = this.getStateScore(state, player.id) - supporterBonus;\n    let playCardAction: PlayCardAction | undefined;\n\n    supporters.forEach(card => {\n      const index = player.hand.cards.indexOf(card);\n      const action = new PlayCardAction(player.id, index, target);\n      const score = this.evaluateAction(state, player.id, action);\n\n      if (score !== undefined && bestScore < score) {\n        bestScore = score;\n        playCardAction = action;\n      }\n    });\n\n    return playCardAction;\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"24716a4cfbcda233b03408ec027aad8debc3b451","contentHash":"0defa4076611a6e9cb1c67cc6da39a0d97d38bbacb5a6c80d50aa78fd2f4e3a0"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-tactics/play-trainer-tactic.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-tactics/play-trainer-tactic.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":35}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":36}},"3":{"start":{"line":5,"column":25},"end":{"line":5,"column":52}},"4":{"start":{"line":8,"column":25},"end":{"line":10,"column":10}},"5":{"start":{"line":9,"column":12},"end":{"line":9,"column":96}},"6":{"start":{"line":11,"column":8},"end":{"line":13,"column":9}},"7":{"start":{"line":12,"column":12},"end":{"line":12,"column":19}},"8":{"start":{"line":14,"column":23},"end":{"line":14,"column":95}},"9":{"start":{"line":15,"column":24},"end":{"line":15,"column":60}},"10":{"start":{"line":17,"column":8},"end":{"line":25,"column":11}},"11":{"start":{"line":18,"column":26},"end":{"line":18,"column":57}},"12":{"start":{"line":19,"column":27},"end":{"line":19,"column":78}},"13":{"start":{"line":20,"column":26},"end":{"line":20,"column":71}},"14":{"start":{"line":21,"column":12},"end":{"line":24,"column":13}},"15":{"start":{"line":22,"column":16},"end":{"line":22,"column":34}},"16":{"start":{"line":23,"column":16},"end":{"line":23,"column":40}},"17":{"start":{"line":26,"column":8},"end":{"line":26,"column":30}},"18":{"start":{"line":29,"column":0},"end":{"line":29,"column":46}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":7,"column":4},"end":{"line":7,"column":5}},"loc":{"start":{"line":7,"column":29},"end":{"line":27,"column":5}},"line":7},"1":{"name":"(anonymous_1)","decl":{"start":{"line":8,"column":50},"end":{"line":8,"column":51}},"loc":{"start":{"line":8,"column":55},"end":{"line":10,"column":9}},"line":8},"2":{"name":"(anonymous_2)","decl":{"start":{"line":17,"column":25},"end":{"line":17,"column":26}},"loc":{"start":{"line":17,"column":33},"end":{"line":25,"column":9}},"line":17}},"branchMap":{"0":{"loc":{"start":{"line":9,"column":19},"end":{"line":9,"column":95}},"type":"binary-expr","locations":[{"start":{"line":9,"column":19},"end":{"line":9,"column":50}},{"start":{"line":9,"column":54},"end":{"line":9,"column":95}}],"line":9},"1":{"loc":{"start":{"line":11,"column":8},"end":{"line":13,"column":9}},"type":"if","locations":[{"start":{"line":11,"column":8},"end":{"line":13,"column":9}},{"start":{"line":11,"column":8},"end":{"line":13,"column":9}}],"line":11},"2":{"loc":{"start":{"line":21,"column":12},"end":{"line":24,"column":13}},"type":"if","locations":[{"start":{"line":21,"column":12},"end":{"line":24,"column":13}},{"start":{"line":21,"column":12},"end":{"line":24,"column":13}}],"line":21},"3":{"loc":{"start":{"line":21,"column":16},"end":{"line":21,"column":56}},"type":"binary-expr","locations":[{"start":{"line":21,"column":16},"end":{"line":21,"column":35}},{"start":{"line":21,"column":39},"end":{"line":21,"column":56}}],"line":21}},"s":{"0":1,"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":1},"f":{"0":0,"1":0,"2":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-tactics/play-trainer-tactic.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-tactics/play-trainer-tactic.ts"],"names":[],"mappings":";;;AAAA,qCAC2C;AAC3C,qDAAgD;AAEhD,MAAa,iBAAkB,SAAQ,6BAAY;IAE1C,SAAS,CAAC,KAAY,EAAE,MAAc;QAC3C,MAAM,QAAQ,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE;YAC5C,OAAO,CAAC,YAAY,kBAAW,IAAI,CAAC,CAAC,WAAW,KAAK,kBAAW,CAAC,IAAI,CAAC;QACxE,CAAC,CAAC,CAAC;QAEH,IAAI,QAAQ,CAAC,MAAM,KAAK,CAAC,EAAE;YACzB,OAAO;SACR;QAED,MAAM,MAAM,GAAG,EAAE,MAAM,EAAE,iBAAU,CAAC,GAAG,EAAE,IAAI,EAAE,eAAQ,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC;QAC1E,IAAI,SAAS,GAAG,IAAI,CAAC,aAAa,CAAC,KAAK,EAAE,MAAM,CAAC,EAAE,CAAC,CAAC;QACrD,IAAI,cAA0C,CAAC;QAE/C,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;YACtB,MAAM,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;YAC9C,MAAM,MAAM,GAAG,IAAI,qBAAc,CAAC,MAAM,CAAC,EAAE,EAAE,KAAK,EAAE,MAAM,CAAC,CAAC;YAC5D,MAAM,KAAK,GAAG,IAAI,CAAC,cAAc,CAAC,KAAK,EAAE,MAAM,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC;YAE5D,IAAI,KAAK,KAAK,SAAS,IAAI,SAAS,GAAG,KAAK,EAAE;gBAC5C,SAAS,GAAG,KAAK,CAAC;gBAClB,cAAc,GAAG,MAAM,CAAC;aACzB;QACH,CAAC,CAAC,CAAC;QAEH,OAAO,cAAc,CAAC;IACxB,CAAC;CAEF;AA7BD,8CA6BC","sourcesContent":["import { Action, Player, State, TrainerCard, TrainerType, PlayCardAction,\n  PlayerType, SlotType } from '../../game';\nimport { SimpleTactic } from './simple-tactics';\n\nexport class PlayTrainerTactic extends SimpleTactic {\n\n  public useTactic(state: State, player: Player): Action | undefined {\n    const trainers = player.hand.cards.filter(c => {\n      return c instanceof TrainerCard && c.trainerType === TrainerType.ITEM;\n    });\n\n    if (trainers.length === 0) {\n      return;\n    }\n\n    const target = { player: PlayerType.ANY, slot: SlotType.BOARD, index: 0 };\n    let bestScore = this.getStateScore(state, player.id);\n    let playCardAction: PlayCardAction | undefined;\n\n    trainers.forEach(card => {\n      const index = player.hand.cards.indexOf(card);\n      const action = new PlayCardAction(player.id, index, target);\n      const score = this.evaluateAction(state, player.id, action);\n\n      if (score !== undefined && bestScore < score) {\n        bestScore = score;\n        playCardAction = action;\n      }\n    });\n\n    return playCardAction;\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"5cbb8d76b0dc118951256149c6ce478d66d91cd0","contentHash":"188c33e3921c7a81f47ab5ce1eaef3459d1825c0ce485247a1064e1db0204845"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-tactics/use-discard-ability-tactic.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-tactics/use-discard-ability-tactic.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":41}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":36}},"3":{"start":{"line":5,"column":25},"end":{"line":5,"column":52}},"4":{"start":{"line":8,"column":24},"end":{"line":8,"column":60}},"5":{"start":{"line":10,"column":30},"end":{"line":10,"column":66}},"6":{"start":{"line":11,"column":8},"end":{"line":30,"column":11}},"7":{"start":{"line":12,"column":12},"end":{"line":14,"column":13}},"8":{"start":{"line":13,"column":16},"end":{"line":13,"column":23}},"9":{"start":{"line":15,"column":27},"end":{"line":19,"column":13}},"10":{"start":{"line":20,"column":12},"end":{"line":29,"column":13}},"11":{"start":{"line":21,"column":16},"end":{"line":28,"column":17}},"12":{"start":{"line":22,"column":35},"end":{"line":22,"column":93}},"13":{"start":{"line":23,"column":34},"end":{"line":23,"column":94}},"14":{"start":{"line":24,"column":20},"end":{"line":27,"column":21}},"15":{"start":{"line":25,"column":24},"end":{"line":25,"column":42}},"16":{"start":{"line":26,"column":24},"end":{"line":26,"column":50}},"17":{"start":{"line":31,"column":8},"end":{"line":31,"column":32}},"18":{"start":{"line":34,"column":0},"end":{"line":34,"column":58}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":7,"column":4},"end":{"line":7,"column":5}},"loc":{"start":{"line":7,"column":29},"end":{"line":32,"column":5}},"line":7},"1":{"name":"(anonymous_1)","decl":{"start":{"line":11,"column":37},"end":{"line":11,"column":38}},"loc":{"start":{"line":11,"column":54},"end":{"line":30,"column":9}},"line":11}},"branchMap":{"0":{"loc":{"start":{"line":12,"column":12},"end":{"line":14,"column":13}},"type":"if","locations":[{"start":{"line":12,"column":12},"end":{"line":14,"column":13}},{"start":{"line":12,"column":12},"end":{"line":14,"column":13}}],"line":12},"1":{"loc":{"start":{"line":21,"column":16},"end":{"line":28,"column":17}},"type":"if","locations":[{"start":{"line":21,"column":16},"end":{"line":28,"column":17}},{"start":{"line":21,"column":16},"end":{"line":28,"column":17}}],"line":21},"2":{"loc":{"start":{"line":24,"column":20},"end":{"line":27,"column":21}},"type":"if","locations":[{"start":{"line":24,"column":20},"end":{"line":27,"column":21}},{"start":{"line":24,"column":20},"end":{"line":27,"column":21}}],"line":24},"3":{"loc":{"start":{"line":24,"column":24},"end":{"line":24,"column":64}},"type":"binary-expr","locations":[{"start":{"line":24,"column":24},"end":{"line":24,"column":43}},{"start":{"line":24,"column":47},"end":{"line":24,"column":64}}],"line":24}},"s":{"0":1,"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":1},"f":{"0":0,"1":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-tactics/use-discard-ability-tactic.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-tactics/use-discard-ability-tactic.ts"],"names":[],"mappings":";;;AAAA,qCAC2C;AAC3C,qDAAgD;AAEhD,MAAa,uBAAwB,SAAQ,6BAAY;IAEhD,SAAS,CAAC,KAAY,EAAE,MAAc;QAC3C,IAAI,SAAS,GAAG,IAAI,CAAC,aAAa,CAAC,KAAK,EAAE,MAAM,CAAC,EAAE,CAAC,CAAC;QACrD,IAAI,gBAA8C,CAAC;QACnD,MAAM,aAAa,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC;QAE3D,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,IAAI,EAAE,KAAK,EAAE,EAAE;YAC3C,IAAI,CAAC,CAAC,IAAI,YAAY,kBAAW,CAAC,EAAE;gBAClC,OAAO;aACR;YACD,MAAM,MAAM,GAAe;gBACzB,MAAM,EAAE,iBAAU,CAAC,aAAa;gBAChC,IAAI,EAAE,eAAQ,CAAC,OAAO;gBACtB,KAAK;aACN,CAAC;YACF,KAAK,MAAM,KAAK,IAAI,IAAI,CAAC,MAAM,EAAE;gBAC/B,IAAI,KAAK,CAAC,cAAc,EAAE;oBACxB,MAAM,MAAM,GAAG,IAAI,uBAAgB,CAAC,MAAM,CAAC,EAAE,EAAE,KAAK,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;oBACnE,MAAM,KAAK,GAAG,IAAI,CAAC,cAAc,CAAC,KAAK,EAAE,MAAM,CAAC,EAAE,EAAE,MAAM,EAAE,aAAa,CAAC,CAAC;oBAE3E,IAAI,KAAK,KAAK,SAAS,IAAI,SAAS,GAAG,KAAK,EAAE;wBAC5C,SAAS,GAAG,KAAK,CAAC;wBAClB,gBAAgB,GAAG,MAAM,CAAC;qBAC3B;iBACF;aACF;QACH,CAAC,CAAC,CAAC;QAEH,OAAO,gBAAgB,CAAC;IAC1B,CAAC;CAEF;AAhCD,0DAgCC","sourcesContent":["import { Action, Player, State, UseAbilityAction, PlayerType, PokemonCard,\n  SlotType, CardTarget } from '../../game';\nimport { SimpleTactic } from './simple-tactics';\n\nexport class UseDiscardAbilityTactic extends SimpleTactic {\n\n  public useTactic(state: State, player: Player): Action | undefined {\n    let bestScore = this.getStateScore(state, player.id);\n    let useAbilityAction: UseAbilityAction | undefined;\n    const passTurnScore = this.options.scores.tactics.passTurn;\n\n    player.discard.cards.forEach((card, index) => {\n      if (!(card instanceof PokemonCard)) {\n        return;\n      }\n      const target: CardTarget = {\n        player: PlayerType.BOTTOM_PLAYER,\n        slot: SlotType.DISCARD,\n        index\n      };\n      for (const power of card.powers) {\n        if (power.useFromDiscard) {\n          const action = new UseAbilityAction(player.id, power.name, target);\n          const score = this.evaluateAction(state, player.id, action, passTurnScore);\n\n          if (score !== undefined && bestScore < score) {\n            bestScore = score;\n            useAbilityAction = action;\n          }\n        }\n      }\n    });\n\n    return useAbilityAction;\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"d936a89a919043313cba0d5e9511d47d3826a7e9","contentHash":"2f83c54e4b141a282e2a6ae8b3665c8270f2b49e87e1a02041fed5202678c297"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-tactics/use-ability-tactic.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-tactics/use-ability-tactic.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":34}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":36}},"3":{"start":{"line":5,"column":25},"end":{"line":5,"column":52}},"4":{"start":{"line":8,"column":24},"end":{"line":8,"column":60}},"5":{"start":{"line":10,"column":30},"end":{"line":10,"column":66}},"6":{"start":{"line":11,"column":8},"end":{"line":22,"column":11}},"7":{"start":{"line":12,"column":12},"end":{"line":21,"column":13}},"8":{"start":{"line":13,"column":16},"end":{"line":20,"column":17}},"9":{"start":{"line":14,"column":35},"end":{"line":14,"column":93}},"10":{"start":{"line":15,"column":34},"end":{"line":15,"column":94}},"11":{"start":{"line":16,"column":20},"end":{"line":19,"column":21}},"12":{"start":{"line":17,"column":24},"end":{"line":17,"column":42}},"13":{"start":{"line":18,"column":24},"end":{"line":18,"column":50}},"14":{"start":{"line":23,"column":8},"end":{"line":23,"column":32}},"15":{"start":{"line":26,"column":0},"end":{"line":26,"column":44}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":7,"column":4},"end":{"line":7,"column":5}},"loc":{"start":{"line":7,"column":29},"end":{"line":24,"column":5}},"line":7},"1":{"name":"(anonymous_1)","decl":{"start":{"line":11,"column":63},"end":{"line":11,"column":64}},"loc":{"start":{"line":11,"column":91},"end":{"line":22,"column":9}},"line":11}},"branchMap":{"0":{"loc":{"start":{"line":13,"column":16},"end":{"line":20,"column":17}},"type":"if","locations":[{"start":{"line":13,"column":16},"end":{"line":20,"column":17}},{"start":{"line":13,"column":16},"end":{"line":20,"column":17}}],"line":13},"1":{"loc":{"start":{"line":16,"column":20},"end":{"line":19,"column":21}},"type":"if","locations":[{"start":{"line":16,"column":20},"end":{"line":19,"column":21}},{"start":{"line":16,"column":20},"end":{"line":19,"column":21}}],"line":16},"2":{"loc":{"start":{"line":16,"column":24},"end":{"line":16,"column":64}},"type":"binary-expr","locations":[{"start":{"line":16,"column":24},"end":{"line":16,"column":43}},{"start":{"line":16,"column":47},"end":{"line":16,"column":64}}],"line":16}},"s":{"0":1,"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":1},"f":{"0":0,"1":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-tactics/use-ability-tactic.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-tactics/use-ability-tactic.ts"],"names":[],"mappings":";;;AAAA,qCAAiF;AACjF,qDAAgD;AAEhD,MAAa,gBAAiB,SAAQ,6BAAY;IAEzC,SAAS,CAAC,KAAY,EAAE,MAAc;QAC3C,IAAI,SAAS,GAAG,IAAI,CAAC,aAAa,CAAC,KAAK,EAAE,MAAM,CAAC,EAAE,CAAC,CAAC;QACrD,IAAI,gBAA8C,CAAC;QACnD,MAAM,aAAa,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC;QAE3D,MAAM,CAAC,cAAc,CAAC,iBAAU,CAAC,aAAa,EAAE,CAAC,QAAQ,EAAE,IAAI,EAAE,MAAM,EAAE,EAAE;YACzE,KAAK,MAAM,KAAK,IAAI,IAAI,CAAC,MAAM,EAAE;gBAC/B,IAAI,KAAK,CAAC,aAAa,EAAE;oBACvB,MAAM,MAAM,GAAG,IAAI,uBAAgB,CAAC,MAAM,CAAC,EAAE,EAAE,KAAK,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;oBACnE,MAAM,KAAK,GAAG,IAAI,CAAC,cAAc,CAAC,KAAK,EAAE,MAAM,CAAC,EAAE,EAAE,MAAM,EAAE,aAAa,CAAC,CAAC;oBAE3E,IAAI,KAAK,KAAK,SAAS,IAAI,SAAS,GAAG,KAAK,EAAE;wBAC5C,SAAS,GAAG,KAAK,CAAC;wBAClB,gBAAgB,GAAG,MAAM,CAAC;qBAC3B;iBACF;aACF;QACH,CAAC,CAAC,CAAC;QAEH,OAAO,gBAAgB,CAAC;IAC1B,CAAC;CAEF;AAxBD,4CAwBC","sourcesContent":["import { Action, Player, State, UseAbilityAction, PlayerType } from '../../game';\nimport { SimpleTactic } from './simple-tactics';\n\nexport class UseAbilityTactic extends SimpleTactic {\n\n  public useTactic(state: State, player: Player): Action | undefined {\n    let bestScore = this.getStateScore(state, player.id);\n    let useAbilityAction: UseAbilityAction | undefined;\n    const passTurnScore = this.options.scores.tactics.passTurn;\n\n    player.forEachPokemon(PlayerType.BOTTOM_PLAYER, (cardList, card, target) => {\n      for (const power of card.powers) {\n        if (power.useWhenInPlay) {\n          const action = new UseAbilityAction(player.id, power.name, target);\n          const score = this.evaluateAction(state, player.id, action, passTurnScore);\n\n          if (score !== undefined && bestScore < score) {\n            bestScore = score;\n            useAbilityAction = action;\n          }\n        }\n      }\n    });\n\n    return useAbilityAction;\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"d01e22992e948a437915eefb104b0afa011f3aa6","contentHash":"b9255d837172b6121bde132b125c1d827266e0241aeb9c3a4da631a231ffdbdb"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-tactics/use-stadium-tactic.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-tactics/use-stadium-tactic.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":34}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":36}},"3":{"start":{"line":5,"column":25},"end":{"line":5,"column":52}},"4":{"start":{"line":8,"column":8},"end":{"line":10,"column":9}},"5":{"start":{"line":9,"column":12},"end":{"line":9,"column":19}},"6":{"start":{"line":11,"column":8},"end":{"line":13,"column":9}},"7":{"start":{"line":12,"column":12},"end":{"line":12,"column":19}},"8":{"start":{"line":14,"column":30},"end":{"line":14,"column":66}},"9":{"start":{"line":15,"column":29},"end":{"line":15,"column":65}},"10":{"start":{"line":16,"column":23},"end":{"line":16,"column":61}},"11":{"start":{"line":17,"column":22},"end":{"line":17,"column":82}},"12":{"start":{"line":18,"column":8},"end":{"line":20,"column":9}},"13":{"start":{"line":19,"column":12},"end":{"line":19,"column":26}},"14":{"start":{"line":23,"column":0},"end":{"line":23,"column":44}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":7,"column":4},"end":{"line":7,"column":5}},"loc":{"start":{"line":7,"column":29},"end":{"line":21,"column":5}},"line":7}},"branchMap":{"0":{"loc":{"start":{"line":8,"column":8},"end":{"line":10,"column":9}},"type":"if","locations":[{"start":{"line":8,"column":8},"end":{"line":10,"column":9}},{"start":{"line":8,"column":8},"end":{"line":10,"column":9}}],"line":8},"1":{"loc":{"start":{"line":11,"column":8},"end":{"line":13,"column":9}},"type":"if","locations":[{"start":{"line":11,"column":8},"end":{"line":13,"column":9}},{"start":{"line":11,"column":8},"end":{"line":13,"column":9}}],"line":11},"2":{"loc":{"start":{"line":18,"column":8},"end":{"line":20,"column":9}},"type":"if","locations":[{"start":{"line":18,"column":8},"end":{"line":20,"column":9}},{"start":{"line":18,"column":8},"end":{"line":20,"column":9}}],"line":18},"3":{"loc":{"start":{"line":18,"column":12},"end":{"line":18,"column":55}},"type":"binary-expr","locations":[{"start":{"line":18,"column":12},"end":{"line":18,"column":31}},{"start":{"line":18,"column":35},"end":{"line":18,"column":55}}],"line":18}},"s":{"0":1,"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":1},"f":{"0":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-tactics/use-stadium-tactic.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/simple-tactics/use-stadium-tactic.ts"],"names":[],"mappings":";;;AAAA,qCAAiF;AACjF,qDAAgD;AAEhD,MAAa,gBAAiB,SAAQ,6BAAY;IAEzC,SAAS,CAAC,KAAY,EAAE,MAAc;QAC3C,IAAI,MAAM,CAAC,eAAe,IAAI,KAAK,CAAC,IAAI,EAAE;YACxC,OAAO;SACR;QAED,IAAI,iBAAU,CAAC,cAAc,CAAC,KAAK,CAAC,KAAK,SAAS,EAAE;YAClD,OAAO;SACR;QAED,MAAM,aAAa,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC;QAC3D,MAAM,YAAY,GAAG,IAAI,CAAC,aAAa,CAAC,KAAK,EAAE,MAAM,CAAC,EAAE,CAAC,CAAC;QAC1D,MAAM,MAAM,GAAG,IAAI,uBAAgB,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;QAC/C,MAAM,KAAK,GAAG,IAAI,CAAC,cAAc,CAAC,KAAK,EAAE,MAAM,CAAC,EAAE,EAAE,MAAM,EAAE,aAAa,CAAC,CAAC;QAE3E,IAAI,KAAK,KAAK,SAAS,IAAI,YAAY,GAAG,KAAK,EAAE;YAC/C,OAAO,MAAM,CAAC;SACf;IACH,CAAC;CAEF;AArBD,4CAqBC","sourcesContent":["import { Action, Player, State, UseStadiumAction, StateUtils } from '../../game';\nimport { SimpleTactic } from './simple-tactics';\n\nexport class UseStadiumTactic extends SimpleTactic {\n\n  public useTactic(state: State, player: Player): Action | undefined {\n    if (player.stadiumUsedTurn >= state.turn) {\n      return;\n    }\n\n    if (StateUtils.getStadiumCard(state) === undefined) {\n      return;\n    }\n\n    const passTurnScore = this.options.scores.tactics.passTurn;\n    const currentScore = this.getStateScore(state, player.id);\n    const action = new UseStadiumAction(player.id);\n    const score = this.evaluateAction(state, player.id, action, passTurnScore);\n\n    if (score !== undefined && currentScore < score) {\n      return action;\n    }\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"ba26006edc5eaa0a37d1ee9fd931a2d8954ef436","contentHash":"512fb2f7a83392eeb00bdb334d6e0b4372a2b293ddacd4993668fb312ae88cac"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/alert-prompt-resolver.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/alert-prompt-resolver.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":36}},"3":{"start":{"line":5,"column":26},"end":{"line":5,"column":54}},"4":{"start":{"line":6,"column":23},"end":{"line":6,"column":71}},"5":{"start":{"line":9,"column":8},"end":{"line":11,"column":9}},"6":{"start":{"line":10,"column":12},"end":{"line":10,"column":67}},"7":{"start":{"line":14,"column":0},"end":{"line":14,"column":50}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":8,"column":4},"end":{"line":8,"column":5}},"loc":{"start":{"line":8,"column":41},"end":{"line":12,"column":5}},"line":8}},"branchMap":{"0":{"loc":{"start":{"line":9,"column":8},"end":{"line":11,"column":9}},"type":"if","locations":[{"start":{"line":9,"column":8},"end":{"line":11,"column":9}},{"start":{"line":9,"column":8},"end":{"line":11,"column":9}}],"line":9}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":1},"f":{"0":0},"b":{"0":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/alert-prompt-resolver.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/alert-prompt-resolver.ts"],"names":[],"mappings":";;;AAAA,qCAAgF;AAChF,uDAAmD;AACnD,wEAAoE;AAGpE,MAAa,mBAAoB,SAAQ,gCAAc;IAE9C,aAAa,CAAC,KAAY,EAAE,MAAc,EAAE,MAAmB;QACpE,IAAI,MAAM,YAAY,0BAAW,EAAE;YACjC,OAAO,IAAI,0BAAmB,CAAC,MAAM,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC;SACjD;IACH,CAAC;CAEF;AARD,kDAQC","sourcesContent":["import { Player, State, Action, ResolvePromptAction, Prompt } from '../../game';\nimport { PromptResolver } from './prompt-resolver';\nimport { AlertPrompt } from '../../game/store/prompts/alert-prompt';\n\n\nexport class AlertPromptResolver extends PromptResolver {\n\n  public resolvePrompt(state: State, player: Player, prompt: Prompt<any>): Action | undefined {\n    if (prompt instanceof AlertPrompt) {\n      return new ResolvePromptAction(prompt.id, true);\n    }\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"31a186eea48c3eedfbf4d89b41f64a3f562d9841","contentHash":"f9a06692e08b3ab2b1aaf96d21d77c53561c7c86e0449b5759729f999750eb38"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/attach-energy-prompt-resolver.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/attach-energy-prompt-resolver.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":44}},"2":{"start":{"line":4,"column":31},"end":{"line":4,"column":87}},"3":{"start":{"line":5,"column":15},"end":{"line":5,"column":36}},"4":{"start":{"line":6,"column":26},"end":{"line":6,"column":54}},"5":{"start":{"line":7,"column":16},"end":{"line":7,"column":44}},"6":{"start":{"line":10,"column":8},"end":{"line":13,"column":9}},"7":{"start":{"line":11,"column":27},"end":{"line":11,"column":62}},"8":{"start":{"line":12,"column":12},"end":{"line":12,"column":69}},"9":{"start":{"line":16,"column":21},"end":{"line":16,"column":60}},"10":{"start":{"line":17,"column":24},"end":{"line":17,"column":26}},"11":{"start":{"line":18,"column":26},"end":{"line":18,"column":68}},"12":{"start":{"line":19,"column":8},"end":{"line":21,"column":9}},"13":{"start":{"line":20,"column":12},"end":{"line":20,"column":60}},"14":{"start":{"line":22,"column":8},"end":{"line":24,"column":9}},"15":{"start":{"line":23,"column":12},"end":{"line":23,"column":58}},"16":{"start":{"line":25,"column":25},"end":{"line":25,"column":62}},"17":{"start":{"line":26,"column":22},"end":{"line":26,"column":44}},"18":{"start":{"line":27,"column":20},"end":{"line":27,"column":22}},"19":{"start":{"line":28,"column":8},"end":{"line":35,"column":9}},"20":{"start":{"line":28,"column":21},"end":{"line":28,"column":22}},"21":{"start":{"line":29,"column":27},"end":{"line":29,"column":84}},"22":{"start":{"line":30,"column":12},"end":{"line":32,"column":13}},"23":{"start":{"line":31,"column":16},"end":{"line":31,"column":22}},"24":{"start":{"line":33,"column":12},"end":{"line":33,"column":48}},"25":{"start":{"line":34,"column":12},"end":{"line":34,"column":57}},"26":{"start":{"line":36,"column":8},"end":{"line":36,"column":50}},"27":{"start":{"line":36,"column":31},"end":{"line":36,"column":48}},"28":{"start":{"line":37,"column":8},"end":{"line":37,"column":60}},"29":{"start":{"line":40,"column":25},"end":{"line":40,"column":46}},"30":{"start":{"line":41,"column":8},"end":{"line":43,"column":11}},"31":{"start":{"line":42,"column":12},"end":{"line":42,"column":59}},"32":{"start":{"line":44,"column":8},"end":{"line":44,"column":56}},"33":{"start":{"line":45,"column":8},"end":{"line":45,"column":24}},"34":{"start":{"line":48,"column":23},"end":{"line":48,"column":72}},"35":{"start":{"line":48,"column":47},"end":{"line":48,"column":71}},"36":{"start":{"line":49,"column":25},"end":{"line":49,"column":74}},"37":{"start":{"line":49,"column":49},"end":{"line":49,"column":73}},"38":{"start":{"line":50,"column":8},"end":{"line":52,"column":9}},"39":{"start":{"line":51,"column":12},"end":{"line":51,"column":19}},"40":{"start":{"line":53,"column":28},"end":{"line":53,"column":109}},"41":{"start":{"line":54,"column":26},"end":{"line":54,"column":110}},"42":{"start":{"line":55,"column":22},"end":{"line":55,"column":24}},"43":{"start":{"line":56,"column":8},"end":{"line":62,"column":9}},"44":{"start":{"line":57,"column":12},"end":{"line":61,"column":15}},"45":{"start":{"line":58,"column":16},"end":{"line":60,"column":17}},"46":{"start":{"line":59,"column":20},"end":{"line":59,"column":65}},"47":{"start":{"line":63,"column":8},"end":{"line":69,"column":9}},"48":{"start":{"line":64,"column":12},"end":{"line":68,"column":15}},"49":{"start":{"line":65,"column":16},"end":{"line":67,"column":17}},"50":{"start":{"line":66,"column":20},"end":{"line":66,"column":65}},"51":{"start":{"line":70,"column":24},"end":{"line":70,"column":104}},"52":{"start":{"line":70,"column":58},"end":{"line":70,"column":103}},"53":{"start":{"line":71,"column":8},"end":{"line":71,"column":69}},"54":{"start":{"line":71,"column":38},"end":{"line":71,"column":67}},"55":{"start":{"line":72,"column":8},"end":{"line":74,"column":9}},"56":{"start":{"line":73,"column":12},"end":{"line":73,"column":19}},"57":{"start":{"line":76,"column":8},"end":{"line":80,"column":9}},"58":{"start":{"line":77,"column":12},"end":{"line":77,"column":55}},"59":{"start":{"line":78,"column":12},"end":{"line":78,"column":64}},"60":{"start":{"line":79,"column":12},"end":{"line":79,"column":55}},"61":{"start":{"line":81,"column":8},"end":{"line":81,"column":50}},"62":{"start":{"line":81,"column":31},"end":{"line":81,"column":48}},"63":{"start":{"line":82,"column":23},"end":{"line":82,"column":33}},"64":{"start":{"line":83,"column":8},"end":{"line":83,"column":51}},"65":{"start":{"line":84,"column":8},"end":{"line":84,"column":77}},"66":{"start":{"line":87,"column":0},"end":{"line":87,"column":64}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":9,"column":4},"end":{"line":9,"column":5}},"loc":{"start":{"line":9,"column":41},"end":{"line":14,"column":5}},"line":9},"1":{"name":"(anonymous_1)","decl":{"start":{"line":15,"column":4},"end":{"line":15,"column":5}},"loc":{"start":{"line":15,"column":35},"end":{"line":38,"column":5}},"line":15},"2":{"name":"(anonymous_2)","decl":{"start":{"line":36,"column":21},"end":{"line":36,"column":22}},"loc":{"start":{"line":36,"column":31},"end":{"line":36,"column":48}},"line":36},"3":{"name":"(anonymous_3)","decl":{"start":{"line":39,"column":4},"end":{"line":39,"column":5}},"loc":{"start":{"line":39,"column":38},"end":{"line":46,"column":5}},"line":39},"4":{"name":"(anonymous_4)","decl":{"start":{"line":41,"column":54},"end":{"line":41,"column":55}},"loc":{"start":{"line":41,"column":71},"end":{"line":43,"column":9}},"line":41},"5":{"name":"(anonymous_5)","decl":{"start":{"line":47,"column":4},"end":{"line":47,"column":5}},"loc":{"start":{"line":47,"column":54},"end":{"line":85,"column":5}},"line":47},"6":{"name":"(anonymous_6)","decl":{"start":{"line":48,"column":42},"end":{"line":48,"column":43}},"loc":{"start":{"line":48,"column":47},"end":{"line":48,"column":71}},"line":48},"7":{"name":"(anonymous_7)","decl":{"start":{"line":49,"column":44},"end":{"line":49,"column":45}},"loc":{"start":{"line":49,"column":49},"end":{"line":49,"column":73}},"line":49},"8":{"name":"(anonymous_8)","decl":{"start":{"line":57,"column":66},"end":{"line":57,"column":67}},"loc":{"start":{"line":57,"column":94},"end":{"line":61,"column":13}},"line":57},"9":{"name":"(anonymous_9)","decl":{"start":{"line":64,"column":67},"end":{"line":64,"column":68}},"loc":{"start":{"line":64,"column":95},"end":{"line":68,"column":13}},"line":64},"10":{"name":"(anonymous_10)","decl":{"start":{"line":70,"column":53},"end":{"line":70,"column":54}},"loc":{"start":{"line":70,"column":58},"end":{"line":70,"column":103}},"line":70},"11":{"name":"(anonymous_11)","decl":{"start":{"line":71,"column":33},"end":{"line":71,"column":34}},"loc":{"start":{"line":71,"column":38},"end":{"line":71,"column":67}},"line":71},"12":{"name":"(anonymous_12)","decl":{"start":{"line":81,"column":21},"end":{"line":81,"column":22}},"loc":{"start":{"line":81,"column":31},"end":{"line":81,"column":48}},"line":81}},"branchMap":{"0":{"loc":{"start":{"line":10,"column":8},"end":{"line":13,"column":9}},"type":"if","locations":[{"start":{"line":10,"column":8},"end":{"line":13,"column":9}},{"start":{"line":10,"column":8},"end":{"line":13,"column":9}}],"line":10},"1":{"loc":{"start":{"line":19,"column":8},"end":{"line":21,"column":9}},"type":"if","locations":[{"start":{"line":19,"column":8},"end":{"line":21,"column":9}},{"start":{"line":19,"column":8},"end":{"line":21,"column":9}}],"line":19},"2":{"loc":{"start":{"line":22,"column":8},"end":{"line":24,"column":9}},"type":"if","locations":[{"start":{"line":22,"column":8},"end":{"line":24,"column":9}},{"start":{"line":22,"column":8},"end":{"line":24,"column":9}}],"line":22},"3":{"loc":{"start":{"line":28,"column":24},"end":{"line":28,"column":66}},"type":"binary-expr","locations":[{"start":{"line":28,"column":24},"end":{"line":28,"column":40}},{"start":{"line":28,"column":44},"end":{"line":28,"column":66}}],"line":28},"4":{"loc":{"start":{"line":30,"column":12},"end":{"line":32,"column":13}},"type":"if","locations":[{"start":{"line":30,"column":12},"end":{"line":32,"column":13}},{"start":{"line":30,"column":12},"end":{"line":32,"column":13}}],"line":30},"5":{"loc":{"start":{"line":30,"column":16},"end":{"line":30,"column":61}},"type":"binary-expr","locations":[{"start":{"line":30,"column":16},"end":{"line":30,"column":36}},{"start":{"line":30,"column":40},"end":{"line":30,"column":61}}],"line":30},"6":{"loc":{"start":{"line":37,"column":15},"end":{"line":37,"column":59}},"type":"cond-expr","locations":[{"start":{"line":37,"column":36},"end":{"line":37,"column":52}},{"start":{"line":37,"column":55},"end":{"line":37,"column":59}}],"line":37},"7":{"loc":{"start":{"line":50,"column":8},"end":{"line":52,"column":9}},"type":"if","locations":[{"start":{"line":50,"column":8},"end":{"line":52,"column":9}},{"start":{"line":50,"column":8},"end":{"line":52,"column":9}}],"line":50},"8":{"loc":{"start":{"line":50,"column":12},"end":{"line":50,"column":58}},"type":"binary-expr","locations":[{"start":{"line":50,"column":12},"end":{"line":50,"column":32}},{"start":{"line":50,"column":36},"end":{"line":50,"column":58}}],"line":50},"9":{"loc":{"start":{"line":56,"column":8},"end":{"line":62,"column":9}},"type":"if","locations":[{"start":{"line":56,"column":8},"end":{"line":62,"column":9}},{"start":{"line":56,"column":8},"end":{"line":62,"column":9}}],"line":56},"10":{"loc":{"start":{"line":58,"column":16},"end":{"line":60,"column":17}},"type":"if","locations":[{"start":{"line":58,"column":16},"end":{"line":60,"column":17}},{"start":{"line":58,"column":16},"end":{"line":60,"column":17}}],"line":58},"11":{"loc":{"start":{"line":63,"column":8},"end":{"line":69,"column":9}},"type":"if","locations":[{"start":{"line":63,"column":8},"end":{"line":69,"column":9}},{"start":{"line":63,"column":8},"end":{"line":69,"column":9}}],"line":63},"12":{"loc":{"start":{"line":65,"column":16},"end":{"line":67,"column":17}},"type":"if","locations":[{"start":{"line":65,"column":16},"end":{"line":67,"column":17}},{"start":{"line":65,"column":16},"end":{"line":67,"column":17}}],"line":65},"13":{"loc":{"start":{"line":72,"column":8},"end":{"line":74,"column":9}},"type":"if","locations":[{"start":{"line":72,"column":8},"end":{"line":74,"column":9}},{"start":{"line":72,"column":8},"end":{"line":74,"column":9}}],"line":72}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/attach-energy-prompt-resolver.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/attach-energy-prompt-resolver.ts"],"names":[],"mappings":"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","sourcesContent":["import { AttachEnergyPrompt, CardAssign } from '../../game/store/prompts/attach-energy-prompt';\nimport { Player, State, Action, ResolvePromptAction, Prompt, StateUtils,\n  PokemonCardList, PlayerType, CardList, Card, CardTarget } from '../../game';\nimport { PromptResolver } from './prompt-resolver';\nimport { deepClone } from '../../utils/utils';\n\ninterface ResultItem {\n  value: CardAssign[] | null;\n  score: number;\n}\n\nexport class AttachEnergyPromptResolver extends PromptResolver {\n\n  public resolvePrompt(state: State, player: Player, prompt: Prompt<any>): Action | undefined {\n    if (prompt instanceof AttachEnergyPrompt) {\n      const result = this.getPromptResult(state, prompt);\n      return new ResolvePromptAction(prompt.id, result);\n    }\n  }\n\n  private getPromptResult(state: State, prompt: AttachEnergyPrompt): CardAssign[] | null {\n    const copy = deepClone(state, [ Card ]);\n\n    const results: ResultItem[] = [];\n    const baseScore = this.getStateScore(state, prompt.playerId);\n\n    if (prompt.options.allowCancel) {\n      results.push({ value: null, score: baseScore });\n    }\n\n    if (prompt.options.min === 0) {\n      results.push({ value: [], score: baseScore });\n    }\n\n    const cardList = this.buildCardsToChoose(copy, prompt);\n    const cards = cardList.cards.slice();\n    let value: CardAssign[] = [];\n\n    for (let i = 0; i < cards.length && i < prompt.options.max; i++) {\n      const result = this.assignToBestTarget(copy, prompt, cardList, cards[i]);\n      if (result === undefined || result.value === null) {\n        break;\n      }\n      value =  [ ...value, result.value[0] ];\n      results.push({ value, score: result.score });\n    }\n\n    results.sort((a, b) => b.score - a.score);\n    return results.length > 0 ? results[0].value : null;\n  }\n\n  private buildCardsToChoose(state: State, prompt: AttachEnergyPrompt): CardList {\n    const cardList = new CardList();\n\n    cardList.cards = prompt.cardList.cards.filter((card, index) => {\n      return !prompt.options.blocked.includes(index);\n    });\n\n    cardList.cards = cardList.filter(prompt.filter);\n    return cardList;\n  }\n\n  private assignToBestTarget(state: State, prompt: AttachEnergyPrompt, cardList: CardList, card: Card): ResultItem | undefined {\n    const player = state.players.find(p => p.id === prompt.playerId);\n    const opponent = state.players.find(p => p.id !== prompt.playerId);\n    if (player === undefined || opponent === undefined) {\n      return;\n    }\n    const hasOpponent = [PlayerType.TOP_PLAYER, PlayerType.ANY].includes(prompt.playerType);\n    const hasPlayer = [PlayerType.BOTTOM_PLAYER, PlayerType.ANY].includes(prompt.playerType);\n\n    let results: {target: CardTarget, cardList: PokemonCardList, score: number}[] = [];\n    if (hasOpponent) {\n      opponent.forEachPokemon(PlayerType.TOP_PLAYER, (cardList, card, target) => {\n        if (prompt.slots.includes(target.slot)) {\n          results.push({ target, cardList, score: 0 });\n        }\n      });\n    }\n    if (hasPlayer) {\n      player.forEachPokemon(PlayerType.BOTTOM_PLAYER, (cardList, card, target) => {\n        if (prompt.slots.includes(target.slot)) {\n          results.push({ target, cardList, score: 0 });\n        }\n      });\n    }\n\n    const blocked = prompt.options.blockedTo.map(b => StateUtils.getTarget(state, player, b));\n    results = results.filter(i => !blocked.includes(i.cardList));\n\n    if (results.length === 0) {\n      return;\n    }\n\n    // evaluate results\n    for (const result of results) {\n      cardList.moveCardTo(card, result.cardList);\n      result.score = this.getStateScore(state, player.id);\n      result.cardList.moveCardTo(card, cardList);\n    }\n\n    results.sort((a, b) => b.score - a.score);\n\n    const result = results[0];\n    cardList.moveCardTo(card, result.cardList);\n\n    return { value: [{ to: result.target, card }], score: result.score };\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"fe2135c0b0e21482e77e3ca5c7c979b493d06c03","contentHash":"2d0b631ba5b36b399ee1b2adc9b788db354da35867d6a90be8ae727f6cf8f05e"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/choose-cards-prompt-resolver.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/choose-cards-prompt-resolver.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":43}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":36}},"3":{"start":{"line":5,"column":26},"end":{"line":5,"column":54}},"4":{"start":{"line":6,"column":30},"end":{"line":6,"column":85}},"5":{"start":{"line":9,"column":8},"end":{"line":19,"column":9}},"6":{"start":{"line":10,"column":25},"end":{"line":10,"column":63}},"7":{"start":{"line":11,"column":12},"end":{"line":11,"column":61}},"8":{"start":{"line":12,"column":12},"end":{"line":14,"column":13}},"9":{"start":{"line":13,"column":16},"end":{"line":13,"column":51}},"10":{"start":{"line":15,"column":12},"end":{"line":17,"column":13}},"11":{"start":{"line":16,"column":16},"end":{"line":16,"column":30}},"12":{"start":{"line":18,"column":12},"end":{"line":18,"column":69}},"13":{"start":{"line":22,"column":23},"end":{"line":22,"column":25}},"14":{"start":{"line":24,"column":24},"end":{"line":24,"column":42}},"15":{"start":{"line":25,"column":8},"end":{"line":25,"column":31}},"16":{"start":{"line":27,"column":8},"end":{"line":31,"column":9}},"17":{"start":{"line":28,"column":12},"end":{"line":30,"column":13}},"18":{"start":{"line":29,"column":16},"end":{"line":29,"column":34}},"19":{"start":{"line":32,"column":8},"end":{"line":32,"column":37}},"20":{"start":{"line":33,"column":8},"end":{"line":33,"column":22}},"21":{"start":{"line":36,"column":25},"end":{"line":36,"column":46}},"22":{"start":{"line":37,"column":8},"end":{"line":39,"column":11}},"23":{"start":{"line":38,"column":12},"end":{"line":38,"column":59}},"24":{"start":{"line":40,"column":22},"end":{"line":43,"column":10}},"25":{"start":{"line":41,"column":26},"end":{"line":41,"column":84}},"26":{"start":{"line":42,"column":12},"end":{"line":42,"column":35}},"27":{"start":{"line":44,"column":8},"end":{"line":44,"column":48}},"28":{"start":{"line":44,"column":29},"end":{"line":44,"column":46}},"29":{"start":{"line":45,"column":8},"end":{"line":45,"column":38}},"30":{"start":{"line":45,"column":30},"end":{"line":45,"column":36}},"31":{"start":{"line":48,"column":0},"end":{"line":48,"column":62}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":8,"column":4},"end":{"line":8,"column":5}},"loc":{"start":{"line":8,"column":41},"end":{"line":20,"column":5}},"line":8},"1":{"name":"(anonymous_1)","decl":{"start":{"line":21,"column":4},"end":{"line":21,"column":5}},"loc":{"start":{"line":21,"column":38},"end":{"line":34,"column":5}},"line":21},"2":{"name":"(anonymous_2)","decl":{"start":{"line":35,"column":4},"end":{"line":35,"column":5}},"loc":{"start":{"line":35,"column":38},"end":{"line":46,"column":5}},"line":35},"3":{"name":"(anonymous_3)","decl":{"start":{"line":37,"column":51},"end":{"line":37,"column":52}},"loc":{"start":{"line":37,"column":68},"end":{"line":39,"column":9}},"line":37},"4":{"name":"(anonymous_4)","decl":{"start":{"line":40,"column":57},"end":{"line":40,"column":58}},"loc":{"start":{"line":40,"column":65},"end":{"line":43,"column":9}},"line":40},"5":{"name":"(anonymous_5)","decl":{"start":{"line":44,"column":19},"end":{"line":44,"column":20}},"loc":{"start":{"line":44,"column":29},"end":{"line":44,"column":46}},"line":44},"6":{"name":"(anonymous_6)","decl":{"start":{"line":45,"column":25},"end":{"line":45,"column":26}},"loc":{"start":{"line":45,"column":30},"end":{"line":45,"column":36}},"line":45}},"branchMap":{"0":{"loc":{"start":{"line":9,"column":8},"end":{"line":19,"column":9}},"type":"if","locations":[{"start":{"line":9,"column":8},"end":{"line":19,"column":9}},{"start":{"line":9,"column":8},"end":{"line":19,"column":9}}],"line":9},"1":{"loc":{"start":{"line":12,"column":12},"end":{"line":14,"column":13}},"type":"if","locations":[{"start":{"line":12,"column":12},"end":{"line":14,"column":13}},{"start":{"line":12,"column":12},"end":{"line":14,"column":13}}],"line":12},"2":{"loc":{"start":{"line":15,"column":12},"end":{"line":17,"column":13}},"type":"if","locations":[{"start":{"line":15,"column":12},"end":{"line":17,"column":13}},{"start":{"line":15,"column":12},"end":{"line":17,"column":13}}],"line":15},"3":{"loc":{"start":{"line":28,"column":12},"end":{"line":30,"column":13}},"type":"if","locations":[{"start":{"line":28,"column":12},"end":{"line":30,"column":13}},{"start":{"line":28,"column":12},"end":{"line":30,"column":13}}],"line":28}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":4,"6":3,"7":3,"8":3,"9":0,"10":3,"11":0,"12":3,"13":3,"14":3,"15":3,"16":3,"17":6,"18":5,"19":3,"20":3,"21":3,"22":3,"23":8,"24":3,"25":6,"26":6,"27":3,"28":3,"29":3,"30":6,"31":1},"f":{"0":4,"1":3,"2":3,"3":8,"4":6,"5":3,"6":6},"b":{"0":[3,1],"1":[0,3],"2":[0,3],"3":[5,1]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/choose-cards-prompt-resolver.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/choose-cards-prompt-resolver.ts"],"names":[],"mappings":";;;AAAA,qCAAgG;AAChG,uDAAmD;AACnD,sFAAiF;AAGjF,MAAa,yBAA0B,SAAQ,gCAAc;IAEpD,aAAa,CAAC,KAAY,EAAE,MAAc,EAAE,MAAmB;QACpE,IAAI,MAAM,YAAY,uCAAiB,EAAE;YACvC,IAAI,MAAM,GAAkB,IAAI,CAAC,kBAAkB,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;YACnE,MAAM,GAAG,IAAI,CAAC,kBAAkB,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;YACjD,IAAI,MAAM,CAAC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,GAAG,EAAE;gBACtC,MAAM,CAAC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC;aACpC;YACD,IAAI,MAAM,CAAC,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,GAAG,EAAE;gBACtC,MAAM,GAAG,IAAI,CAAC;aACf;YACD,OAAO,IAAI,0BAAmB,CAAC,MAAM,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC;SACnD;IACH,CAAC;IAEO,kBAAkB,CAAC,MAAyB,EAAE,KAAa;QACjE,MAAM,MAAM,GAAW,EAAE,CAAC;QAE1B,mDAAmD;QACnD,MAAM,OAAO,GAAG,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC;QACnC,MAAM,CAAC,OAAO,CAAC,GAAG,GAAG,CAAC,CAAC;QAEvB,iEAAiE;QACjE,KAAK,MAAM,IAAI,IAAI,KAAK,EAAE;YACxB,IAAI,MAAM,CAAC,QAAQ,CAAC,CAAC,GAAG,MAAM,EAAE,IAAI,CAAC,CAAC,EAAE;gBACtC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;aACnB;SACF;QAED,MAAM,CAAC,OAAO,CAAC,GAAG,GAAG,OAAO,CAAC;QAC7B,OAAO,MAAM,CAAC;IAChB,CAAC;IAEO,kBAAkB,CAAC,KAAY,EAAE,MAAyB;QAChE,MAAM,QAAQ,GAAG,IAAI,eAAQ,EAAE,CAAC;QAEhC,QAAQ,CAAC,KAAK,GAAG,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE,KAAK,EAAE,EAAE;YACzD,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;QACjD,CAAC,CAAC,CAAC;QAEH,MAAM,KAAK,GAAG,QAAQ,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE;YACtD,MAAM,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,KAAK,EAAE,MAAM,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;YACzE,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC;QACzB,CAAC,CAAC,CAAC;QAEH,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC;QACxC,OAAO,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;IAChC,CAAC;CAEF;AAlDD,8DAkDC","sourcesContent":["import { Player, State, Action, ResolvePromptAction, Prompt, Card, CardList } from '../../game';\nimport { PromptResolver } from './prompt-resolver';\nimport { ChooseCardsPrompt } from '../../game/store/prompts/choose-cards-prompt';\n\n\nexport class ChooseCardsPromptResolver extends PromptResolver {\n\n  public resolvePrompt(state: State, player: Player, prompt: Prompt<any>): Action | undefined {\n    if (prompt instanceof ChooseCardsPrompt) {\n      let result: Card[] | null = this.buildCardsToChoose(state, prompt);\n      result = this.removeInvalidCards(prompt, result);\n      if (result.length > prompt.options.max) {\n        result.length = prompt.options.max;\n      }\n      if (result.length < prompt.options.min) {\n        result = null;\n      }\n      return new ResolvePromptAction(prompt.id, result);\n    }\n  }\n\n  private removeInvalidCards(prompt: ChooseCardsPrompt, cards: Card[]): Card[] {\n    const result: Card[] = [];\n\n    // temporary remove min restriction for this prompt\n    const minCopy = prompt.options.min;\n    prompt.options.min = 0;\n\n    // Add card by card to the results and check if it is still valid\n    for (const card of cards) {\n      if (prompt.validate([...result, card])) {\n        result.push(card);\n      }\n    }\n\n    prompt.options.min = minCopy;\n    return result;\n  }\n\n  private buildCardsToChoose(state: State, prompt: ChooseCardsPrompt): Card[] {\n    const cardList = new CardList();\n\n    cardList.cards = prompt.cards.cards.filter((card, index) => {\n      return !prompt.options.blocked.includes(index);\n    });\n\n    const cards = cardList.filter(prompt.filter).map(card => {\n      const score = this.stateScore.getCardScore(state, prompt.playerId, card);\n      return { card, score };\n    });\n\n    cards.sort((a, b) => b.score - a.score);\n    return cards.map(c => c.card);\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"2dc5ba960ce2041cc2e76e317e3faa208f9b69f3","contentHash":"793cafacba1e7f3010045ef313cac066fd5fb6e604fc4a638f5aeae3c74ca5c8"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/choose-energy-prompt-resolver.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/choose-energy-prompt-resolver.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":44}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":36}},"3":{"start":{"line":5,"column":26},"end":{"line":5,"column":54}},"4":{"start":{"line":6,"column":31},"end":{"line":6,"column":87}},"5":{"start":{"line":9,"column":8},"end":{"line":73,"column":9}},"6":{"start":{"line":10,"column":25},"end":{"line":10,"column":27}},"7":{"start":{"line":11,"column":29},"end":{"line":11,"column":50}},"8":{"start":{"line":12,"column":26},"end":{"line":12,"column":82}},"9":{"start":{"line":12,"column":50},"end":{"line":12,"column":81}},"10":{"start":{"line":13,"column":12},"end":{"line":37,"column":13}},"11":{"start":{"line":14,"column":29},"end":{"line":14,"column":37}},"12":{"start":{"line":15,"column":28},"end":{"line":15,"column":78}},"13":{"start":{"line":15,"column":52},"end":{"line":15,"column":77}},"14":{"start":{"line":16,"column":16},"end":{"line":19,"column":17}},"15":{"start":{"line":18,"column":20},"end":{"line":18,"column":94}},"16":{"start":{"line":18,"column":52},"end":{"line":18,"column":92}},"17":{"start":{"line":20,"column":16},"end":{"line":22,"column":17}},"18":{"start":{"line":21,"column":20},"end":{"line":21,"column":26}},"19":{"start":{"line":23,"column":32},"end":{"line":23,"column":47}},"20":{"start":{"line":24,"column":16},"end":{"line":24,"column":42}},"21":{"start":{"line":25,"column":16},"end":{"line":25,"column":37}},"22":{"start":{"line":26,"column":16},"end":{"line":36,"column":19}},"23":{"start":{"line":27,"column":20},"end":{"line":35,"column":21}},"24":{"start":{"line":28,"column":24},"end":{"line":28,"column":38}},"25":{"start":{"line":31,"column":34},"end":{"line":31,"column":50}},"26":{"start":{"line":32,"column":24},"end":{"line":34,"column":25}},"27":{"start":{"line":33,"column":28},"end":{"line":33,"column":47}},"28":{"start":{"line":38,"column":12},"end":{"line":41,"column":13}},"29":{"start":{"line":40,"column":16},"end":{"line":40,"column":71}},"30":{"start":{"line":45,"column":12},"end":{"line":49,"column":15}},"31":{"start":{"line":46,"column":31},"end":{"line":46,"column":67}},"32":{"start":{"line":47,"column":31},"end":{"line":47,"column":67}},"33":{"start":{"line":48,"column":16},"end":{"line":48,"column":39}},"34":{"start":{"line":51,"column":12},"end":{"line":56,"column":13}},"35":{"start":{"line":52,"column":32},"end":{"line":52,"column":48}},"36":{"start":{"line":53,"column":16},"end":{"line":55,"column":17}},"37":{"start":{"line":54,"column":20},"end":{"line":54,"column":41}},"38":{"start":{"line":58,"column":28},"end":{"line":58,"column":32}},"39":{"start":{"line":59,"column":12},"end":{"line":71,"column":13}},"40":{"start":{"line":60,"column":16},"end":{"line":60,"column":34}},"41":{"start":{"line":61,"column":16},"end":{"line":70,"column":17}},"42":{"start":{"line":61,"column":29},"end":{"line":61,"column":30}},"43":{"start":{"line":62,"column":38},"end":{"line":62,"column":52}},"44":{"start":{"line":63,"column":20},"end":{"line":63,"column":43}},"45":{"start":{"line":64,"column":35},"end":{"line":64,"column":94}},"46":{"start":{"line":65,"column":20},"end":{"line":69,"column":21}},"47":{"start":{"line":66,"column":24},"end":{"line":66,"column":43}},"48":{"start":{"line":67,"column":24},"end":{"line":67,"column":41}},"49":{"start":{"line":68,"column":24},"end":{"line":68,"column":30}},"50":{"start":{"line":72,"column":12},"end":{"line":72,"column":69}},"51":{"start":{"line":76,"column":20},"end":{"line":76,"column":21}},"52":{"start":{"line":77,"column":8},"end":{"line":87,"column":11}},"53":{"start":{"line":78,"column":12},"end":{"line":86,"column":13}},"54":{"start":{"line":79,"column":16},"end":{"line":79,"column":27}},"55":{"start":{"line":81,"column":17},"end":{"line":86,"column":13}},"56":{"start":{"line":82,"column":16},"end":{"line":82,"column":28}},"57":{"start":{"line":85,"column":16},"end":{"line":85,"column":27}},"58":{"start":{"line":88,"column":8},"end":{"line":88,"column":21}},"59":{"start":{"line":91,"column":0},"end":{"line":91,"column":64}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":8,"column":4},"end":{"line":8,"column":5}},"loc":{"start":{"line":8,"column":41},"end":{"line":74,"column":5}},"line":8},"1":{"name":"(anonymous_1)","decl":{"start":{"line":12,"column":45},"end":{"line":12,"column":46}},"loc":{"start":{"line":12,"column":50},"end":{"line":12,"column":81}},"line":12},"2":{"name":"(anonymous_2)","decl":{"start":{"line":15,"column":47},"end":{"line":15,"column":48}},"loc":{"start":{"line":15,"column":52},"end":{"line":15,"column":77}},"line":15},"3":{"name":"(anonymous_3)","decl":{"start":{"line":18,"column":47},"end":{"line":18,"column":48}},"loc":{"start":{"line":18,"column":52},"end":{"line":18,"column":92}},"line":18},"4":{"name":"(anonymous_4)","decl":{"start":{"line":26,"column":41},"end":{"line":26,"column":42}},"loc":{"start":{"line":26,"column":46},"end":{"line":36,"column":17}},"line":26},"5":{"name":"(anonymous_5)","decl":{"start":{"line":45,"column":26},"end":{"line":45,"column":27}},"loc":{"start":{"line":45,"column":38},"end":{"line":49,"column":13}},"line":45},"6":{"name":"(anonymous_6)","decl":{"start":{"line":75,"column":4},"end":{"line":75,"column":5}},"loc":{"start":{"line":75,"column":33},"end":{"line":89,"column":5}},"line":75},"7":{"name":"(anonymous_7)","decl":{"start":{"line":77,"column":25},"end":{"line":77,"column":26}},"loc":{"start":{"line":77,"column":30},"end":{"line":87,"column":9}},"line":77}},"branchMap":{"0":{"loc":{"start":{"line":9,"column":8},"end":{"line":73,"column":9}},"type":"if","locations":[{"start":{"line":9,"column":8},"end":{"line":73,"column":9}},{"start":{"line":9,"column":8},"end":{"line":73,"column":9}}],"line":9},"1":{"loc":{"start":{"line":13,"column":19},"end":{"line":13,"column":58}},"type":"binary-expr","locations":[{"start":{"line":13,"column":19},"end":{"line":13,"column":35}},{"start":{"line":13,"column":39},"end":{"line":13,"column":58}}],"line":13},"2":{"loc":{"start":{"line":16,"column":16},"end":{"line":19,"column":17}},"type":"if","locations":[{"start":{"line":16,"column":16},"end":{"line":19,"column":17}},{"start":{"line":16,"column":16},"end":{"line":19,"column":17}}],"line":16},"3":{"loc":{"start":{"line":20,"column":16},"end":{"line":22,"column":17}},"type":"if","locations":[{"start":{"line":20,"column":16},"end":{"line":22,"column":17}},{"start":{"line":20,"column":16},"end":{"line":22,"column":17}}],"line":20},"4":{"loc":{"start":{"line":27,"column":20},"end":{"line":35,"column":21}},"type":"if","locations":[{"start":{"line":27,"column":20},"end":{"line":35,"column":21}},{"start":{"line":27,"column":20},"end":{"line":35,"column":21}}],"line":27},"5":{"loc":{"start":{"line":27,"column":24},"end":{"line":27,"column":69}},"type":"binary-expr","locations":[{"start":{"line":27,"column":24},"end":{"line":27,"column":49}},{"start":{"line":27,"column":53},"end":{"line":27,"column":69}}],"line":27},"6":{"loc":{"start":{"line":32,"column":24},"end":{"line":34,"column":25}},"type":"if","locations":[{"start":{"line":32,"column":24},"end":{"line":34,"column":25}},{"start":{"line":32,"column":24},"end":{"line":34,"column":25}}],"line":32},"7":{"loc":{"start":{"line":38,"column":12},"end":{"line":41,"column":13}},"type":"if","locations":[{"start":{"line":38,"column":12},"end":{"line":41,"column":13}},{"start":{"line":38,"column":12},"end":{"line":41,"column":13}}],"line":38},"8":{"loc":{"start":{"line":51,"column":19},"end":{"line":51,"column":99}},"type":"binary-expr","locations":[{"start":{"line":51,"column":19},"end":{"line":51,"column":38}},{"start":{"line":51,"column":42},"end":{"line":51,"column":99}}],"line":51},"9":{"loc":{"start":{"line":53,"column":16},"end":{"line":55,"column":17}},"type":"if","locations":[{"start":{"line":53,"column":16},"end":{"line":55,"column":17}},{"start":{"line":53,"column":16},"end":{"line":55,"column":17}}],"line":53},"10":{"loc":{"start":{"line":65,"column":20},"end":{"line":69,"column":21}},"type":"if","locations":[{"start":{"line":65,"column":20},"end":{"line":69,"column":21}},{"start":{"line":65,"column":20},"end":{"line":69,"column":21}}],"line":65},"11":{"loc":{"start":{"line":78,"column":12},"end":{"line":86,"column":13}},"type":"if","locations":[{"start":{"line":78,"column":12},"end":{"line":86,"column":13}},{"start":{"line":78,"column":12},"end":{"line":86,"column":13}}],"line":78},"12":{"loc":{"start":{"line":81,"column":17},"end":{"line":86,"column":13}},"type":"if","locations":[{"start":{"line":81,"column":17},"end":{"line":86,"column":13}},{"start":{"line":81,"column":17},"end":{"line":86,"column":13}}],"line":81}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":7,"6":7,"7":7,"8":7,"9":14,"10":7,"11":6,"12":6,"13":14,"14":6,"15":3,"16":7,"17":6,"18":1,"19":5,"20":5,"21":5,"22":5,"23":5,"24":2,"25":3,"26":3,"27":3,"28":7,"29":1,"30":6,"31":16,"32":16,"33":16,"34":6,"35":6,"36":6,"37":6,"38":6,"39":6,"40":8,"41":8,"42":8,"43":12,"44":12,"45":12,"46":12,"47":2,"48":2,"49":2,"50":6,"51":32,"52":32,"53":43,"54":22,"55":21,"56":13,"57":8,"58":32,"59":1},"f":{"0":7,"1":14,"2":14,"3":7,"4":5,"5":16,"6":32,"7":43},"b":{"0":[7,0],"1":[12,6],"2":[3,3],"3":[1,5],"4":[2,3],"5":[5,2],"6":[3,0],"7":[1,6],"8":[12,12],"9":[6,0],"10":[2,10],"11":[22,21],"12":[13,8]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/choose-energy-prompt-resolver.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/choose-energy-prompt-resolver.ts"],"names":[],"mappings":"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","sourcesContent":["import { Player, State, Action, ResolvePromptAction, Prompt, StateUtils, CardType } from '../../game';\nimport { PromptResolver } from './prompt-resolver';\nimport { ChooseEnergyPrompt, EnergyMap } from '../../game/store/prompts/choose-energy-prompt';\n\n\nexport class ChooseEnergyPromptResolver extends PromptResolver {\n\n  public resolvePrompt(state: State, player: Player, prompt: Prompt<any>): Action | undefined {\n    if (prompt instanceof ChooseEnergyPrompt) {\n      let result: EnergyMap[] = [];\n      const provides = prompt.energy.slice();\n      const costs: CardType[] = prompt.cost.filter(c => c !== CardType.COLORLESS);\n\n      while (costs.length > 0 && provides.length > 0) {\n        const cost = costs[0];\n        let index = provides.findIndex(p => p.provides.includes(cost));\n\n        if (index === -1) {\n          // concrete energy not found, try to use rainbow energies\n          index = provides.findIndex(p => p.provides.includes(CardType.ANY));\n        }\n\n        if (index === -1) {\n          break; // impossible to pay for the cost\n        }\n\n        const provide = provides[index];\n        provides.splice(index, 1);\n        result.push(provide);\n\n        provide.provides.forEach(c => {\n          if (c === CardType.ANY && costs.length > 0) {\n            costs.shift();\n          } else {\n            const i = costs.indexOf(c);\n            if (i !== -1) {\n              costs.splice(i, 1);\n            }\n          }\n        });\n      }\n\n      if (costs.length > 0) {\n        // Impossible to pay for the cost, try to cancel\n        return new ResolvePromptAction(prompt.id, null);\n      }\n\n      // Only colorless energies are remaining to pay\n      // Sort rest of the provided energies by the score\n      // (Number of provided energy, provided type)\n      provides.sort((p1, p2) => {\n        const score1 = this.getEnergyCardScore(p1.provides);\n        const score2 = this.getEnergyCardScore(p2.provides);\n        return score1 - score2;\n      });\n\n      // Add energies until all colorless cost is paid\n      while (provides.length > 0 && !StateUtils.checkEnoughEnergy(result, prompt.cost)) {\n        const provide = provides.shift();\n        if (provide !== undefined) {\n          result.push(provide);\n        }\n      }\n\n      // Make sure we have used only the required energies to pay\n      let needCheck = true;\n      while (needCheck) {\n        needCheck = false;\n        for (let i = 0; i < result.length; i++) {\n          const tempCards = result.slice();\n          tempCards.splice(i, 1);\n          const enough = StateUtils.checkEnoughEnergy(tempCards, prompt.cost);\n          if (enough) {\n            result = tempCards;\n            needCheck = true;\n            break;\n          }\n        }\n      }\n\n      return new ResolvePromptAction(prompt.id, result);\n    }\n  }\n\n  private getEnergyCardScore(provides: CardType[]): number {\n    let score = 0;\n    provides.forEach(c => {\n      if (c === CardType.COLORLESS) {\n        score += 2;\n      } else if (c === CardType.ANY) {\n        score += 10;\n      } else {\n        score += 3;\n      }\n    });\n    return score;\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"a9dc5c50e83c4fe7b7b8fb8a8f5e70abf155140f","contentHash":"4d1e924cf3791e9941e7ded6ae21b89342e52ebe06a27d743b0f8a3b752a0683"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/choose-pokemon-prompt-resolver.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/choose-pokemon-prompt-resolver.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":45}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":36}},"3":{"start":{"line":5,"column":26},"end":{"line":5,"column":54}},"4":{"start":{"line":6,"column":32},"end":{"line":6,"column":89}},"5":{"start":{"line":9,"column":8},"end":{"line":13,"column":9}},"6":{"start":{"line":10,"column":26},"end":{"line":10,"column":66}},"7":{"start":{"line":11,"column":27},"end":{"line":11,"column":62}},"8":{"start":{"line":12,"column":12},"end":{"line":12,"column":69}},"9":{"start":{"line":16,"column":22},"end":{"line":19,"column":10}},"10":{"start":{"line":17,"column":26},"end":{"line":17,"column":69}},"11":{"start":{"line":18,"column":12},"end":{"line":18,"column":54}},"12":{"start":{"line":20,"column":8},"end":{"line":20,"column":48}},"13":{"start":{"line":20,"column":29},"end":{"line":20,"column":46}},"14":{"start":{"line":21,"column":23},"end":{"line":21,"column":25}},"15":{"start":{"line":22,"column":20},"end":{"line":22,"column":38}},"16":{"start":{"line":23,"column":20},"end":{"line":23,"column":38}},"17":{"start":{"line":24,"column":20},"end":{"line":24,"column":21}},"18":{"start":{"line":25,"column":8},"end":{"line":35,"column":9}},"19":{"start":{"line":26,"column":25},"end":{"line":26,"column":38}},"20":{"start":{"line":27,"column":12},"end":{"line":29,"column":13}},"21":{"start":{"line":28,"column":16},"end":{"line":28,"column":22}},"22":{"start":{"line":30,"column":12},"end":{"line":30,"column":39}},"23":{"start":{"line":31,"column":12},"end":{"line":31,"column":32}},"24":{"start":{"line":32,"column":12},"end":{"line":34,"column":13}},"25":{"start":{"line":33,"column":16},"end":{"line":33,"column":22}},"26":{"start":{"line":36,"column":8},"end":{"line":38,"column":9}},"27":{"start":{"line":37,"column":12},"end":{"line":37,"column":24}},"28":{"start":{"line":39,"column":8},"end":{"line":41,"column":9}},"29":{"start":{"line":40,"column":12},"end":{"line":40,"column":24}},"30":{"start":{"line":42,"column":8},"end":{"line":42,"column":22}},"31":{"start":{"line":45,"column":20},"end":{"line":45,"column":66}},"32":{"start":{"line":46,"column":8},"end":{"line":48,"column":9}},"33":{"start":{"line":47,"column":12},"end":{"line":47,"column":27}},"34":{"start":{"line":50,"column":32},"end":{"line":55,"column":9}},"35":{"start":{"line":56,"column":8},"end":{"line":58,"column":9}},"36":{"start":{"line":57,"column":12},"end":{"line":57,"column":27}},"37":{"start":{"line":59,"column":8},"end":{"line":59,"column":21}},"38":{"start":{"line":62,"column":23},"end":{"line":62,"column":72}},"39":{"start":{"line":62,"column":47},"end":{"line":62,"column":71}},"40":{"start":{"line":63,"column":25},"end":{"line":63,"column":74}},"41":{"start":{"line":63,"column":49},"end":{"line":63,"column":73}},"42":{"start":{"line":64,"column":8},"end":{"line":66,"column":9}},"43":{"start":{"line":65,"column":12},"end":{"line":65,"column":22}},"44":{"start":{"line":67,"column":28},"end":{"line":67,"column":109}},"45":{"start":{"line":68,"column":26},"end":{"line":68,"column":110}},"46":{"start":{"line":69,"column":25},"end":{"line":69,"column":69}},"47":{"start":{"line":70,"column":26},"end":{"line":70,"column":71}},"48":{"start":{"line":71,"column":21},"end":{"line":71,"column":23}},"49":{"start":{"line":72,"column":8},"end":{"line":76,"column":9}},"50":{"start":{"line":73,"column":12},"end":{"line":75,"column":15}},"51":{"start":{"line":73,"column":39},"end":{"line":73,"column":53}},"52":{"start":{"line":74,"column":16},"end":{"line":74,"column":83}},"53":{"start":{"line":77,"column":8},"end":{"line":79,"column":9}},"54":{"start":{"line":78,"column":12},"end":{"line":78,"column":93}},"55":{"start":{"line":80,"column":8},"end":{"line":82,"column":9}},"56":{"start":{"line":81,"column":12},"end":{"line":81,"column":94}},"57":{"start":{"line":83,"column":8},"end":{"line":87,"column":9}},"58":{"start":{"line":84,"column":12},"end":{"line":86,"column":15}},"59":{"start":{"line":84,"column":37},"end":{"line":84,"column":51}},"60":{"start":{"line":85,"column":16},"end":{"line":85,"column":86}},"61":{"start":{"line":88,"column":24},"end":{"line":88,"column":102}},"62":{"start":{"line":88,"column":56},"end":{"line":88,"column":101}},"63":{"start":{"line":89,"column":8},"end":{"line":89,"column":67}},"64":{"start":{"line":89,"column":36},"end":{"line":89,"column":65}},"65":{"start":{"line":90,"column":8},"end":{"line":90,"column":22}},"66":{"start":{"line":93,"column":0},"end":{"line":93,"column":66}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":8,"column":4},"end":{"line":8,"column":5}},"loc":{"start":{"line":8,"column":41},"end":{"line":14,"column":5}},"line":8},"1":{"name":"(anonymous_1)","decl":{"start":{"line":15,"column":4},"end":{"line":15,"column":5}},"loc":{"start":{"line":15,"column":38},"end":{"line":43,"column":5}},"line":15},"2":{"name":"(anonymous_2)","decl":{"start":{"line":16,"column":35},"end":{"line":16,"column":36}},"loc":{"start":{"line":16,"column":43},"end":{"line":19,"column":9}},"line":16},"3":{"name":"(anonymous_3)","decl":{"start":{"line":20,"column":19},"end":{"line":20,"column":20}},"loc":{"start":{"line":20,"column":29},"end":{"line":20,"column":46}},"line":20},"4":{"name":"(anonymous_4)","decl":{"start":{"line":44,"column":4},"end":{"line":44,"column":5}},"loc":{"start":{"line":44,"column":43},"end":{"line":60,"column":5}},"line":44},"5":{"name":"(anonymous_5)","decl":{"start":{"line":61,"column":4},"end":{"line":61,"column":5}},"loc":{"start":{"line":61,"column":40},"end":{"line":91,"column":5}},"line":61},"6":{"name":"(anonymous_6)","decl":{"start":{"line":62,"column":42},"end":{"line":62,"column":43}},"loc":{"start":{"line":62,"column":47},"end":{"line":62,"column":71}},"line":62},"7":{"name":"(anonymous_7)","decl":{"start":{"line":63,"column":44},"end":{"line":63,"column":45}},"loc":{"start":{"line":63,"column":49},"end":{"line":63,"column":73}},"line":63},"8":{"name":"(anonymous_8)","decl":{"start":{"line":73,"column":34},"end":{"line":73,"column":35}},"loc":{"start":{"line":73,"column":39},"end":{"line":73,"column":53}},"line":73},"9":{"name":"(anonymous_9)","decl":{"start":{"line":73,"column":63},"end":{"line":73,"column":64}},"loc":{"start":{"line":73,"column":68},"end":{"line":75,"column":13}},"line":73},"10":{"name":"(anonymous_10)","decl":{"start":{"line":84,"column":32},"end":{"line":84,"column":33}},"loc":{"start":{"line":84,"column":37},"end":{"line":84,"column":51}},"line":84},"11":{"name":"(anonymous_11)","decl":{"start":{"line":84,"column":61},"end":{"line":84,"column":62}},"loc":{"start":{"line":84,"column":66},"end":{"line":86,"column":13}},"line":84},"12":{"name":"(anonymous_12)","decl":{"start":{"line":88,"column":51},"end":{"line":88,"column":52}},"loc":{"start":{"line":88,"column":56},"end":{"line":88,"column":101}},"line":88},"13":{"name":"(anonymous_13)","decl":{"start":{"line":89,"column":31},"end":{"line":89,"column":32}},"loc":{"start":{"line":89,"column":36},"end":{"line":89,"column":65}},"line":89}},"branchMap":{"0":{"loc":{"start":{"line":9,"column":8},"end":{"line":13,"column":9}},"type":"if","locations":[{"start":{"line":9,"column":8},"end":{"line":13,"column":9}},{"start":{"line":9,"column":8},"end":{"line":13,"column":9}}],"line":9},"1":{"loc":{"start":{"line":25,"column":15},"end":{"line":25,"column":78}},"type":"binary-expr","locations":[{"start":{"line":25,"column":15},"end":{"line":25,"column":31}},{"start":{"line":25,"column":36},"end":{"line":25,"column":54}},{"start":{"line":25,"column":58},"end":{"line":25,"column":77}}],"line":25},"2":{"loc":{"start":{"line":27,"column":12},"end":{"line":29,"column":13}},"type":"if","locations":[{"start":{"line":27,"column":12},"end":{"line":29,"column":13}},{"start":{"line":27,"column":12},"end":{"line":29,"column":13}}],"line":27},"3":{"loc":{"start":{"line":32,"column":12},"end":{"line":34,"column":13}},"type":"if","locations":[{"start":{"line":32,"column":12},"end":{"line":34,"column":13}},{"start":{"line":32,"column":12},"end":{"line":34,"column":13}}],"line":32},"4":{"loc":{"start":{"line":36,"column":8},"end":{"line":38,"column":9}},"type":"if","locations":[{"start":{"line":36,"column":8},"end":{"line":38,"column":9}},{"start":{"line":36,"column":8},"end":{"line":38,"column":9}}],"line":36},"5":{"loc":{"start":{"line":36,"column":12},"end":{"line":36,"column":61}},"type":"binary-expr","locations":[{"start":{"line":36,"column":12},"end":{"line":36,"column":31}},{"start":{"line":36,"column":35},"end":{"line":36,"column":61}}],"line":36},"6":{"loc":{"start":{"line":39,"column":8},"end":{"line":41,"column":9}},"type":"if","locations":[{"start":{"line":39,"column":8},"end":{"line":41,"column":9}},{"start":{"line":39,"column":8},"end":{"line":41,"column":9}}],"line":39},"7":{"loc":{"start":{"line":39,"column":12},"end":{"line":39,"column":51}},"type":"binary-expr","locations":[{"start":{"line":39,"column":12},"end":{"line":39,"column":21}},{"start":{"line":39,"column":25},"end":{"line":39,"column":51}}],"line":39},"8":{"loc":{"start":{"line":46,"column":8},"end":{"line":48,"column":9}},"type":"if","locations":[{"start":{"line":46,"column":8},"end":{"line":48,"column":9}},{"start":{"line":46,"column":8},"end":{"line":48,"column":9}}],"line":46},"9":{"loc":{"start":{"line":56,"column":8},"end":{"line":58,"column":9}},"type":"if","locations":[{"start":{"line":56,"column":8},"end":{"line":58,"column":9}},{"start":{"line":56,"column":8},"end":{"line":58,"column":9}}],"line":56},"10":{"loc":{"start":{"line":64,"column":8},"end":{"line":66,"column":9}},"type":"if","locations":[{"start":{"line":64,"column":8},"end":{"line":66,"column":9}},{"start":{"line":64,"column":8},"end":{"line":66,"column":9}}],"line":64},"11":{"loc":{"start":{"line":64,"column":12},"end":{"line":64,"column":58}},"type":"binary-expr","locations":[{"start":{"line":64,"column":12},"end":{"line":64,"column":32}},{"start":{"line":64,"column":36},"end":{"line":64,"column":58}}],"line":64},"12":{"loc":{"start":{"line":72,"column":8},"end":{"line":76,"column":9}},"type":"if","locations":[{"start":{"line":72,"column":8},"end":{"line":76,"column":9}},{"start":{"line":72,"column":8},"end":{"line":76,"column":9}}],"line":72},"13":{"loc":{"start":{"line":72,"column":12},"end":{"line":72,"column":35}},"type":"binary-expr","locations":[{"start":{"line":72,"column":12},"end":{"line":72,"column":23}},{"start":{"line":72,"column":27},"end":{"line":72,"column":35}}],"line":72},"14":{"loc":{"start":{"line":77,"column":8},"end":{"line":79,"column":9}},"type":"if","locations":[{"start":{"line":77,"column":8},"end":{"line":79,"column":9}},{"start":{"line":77,"column":8},"end":{"line":79,"column":9}}],"line":77},"15":{"loc":{"start":{"line":77,"column":12},"end":{"line":77,"column":36}},"type":"binary-expr","locations":[{"start":{"line":77,"column":12},"end":{"line":77,"column":23}},{"start":{"line":77,"column":27},"end":{"line":77,"column":36}}],"line":77},"16":{"loc":{"start":{"line":80,"column":8},"end":{"line":82,"column":9}},"type":"if","locations":[{"start":{"line":80,"column":8},"end":{"line":82,"column":9}},{"start":{"line":80,"column":8},"end":{"line":82,"column":9}}],"line":80},"17":{"loc":{"start":{"line":80,"column":12},"end":{"line":80,"column":34}},"type":"binary-expr","locations":[{"start":{"line":80,"column":12},"end":{"line":80,"column":21}},{"start":{"line":80,"column":25},"end":{"line":80,"column":34}}],"line":80},"18":{"loc":{"start":{"line":83,"column":8},"end":{"line":87,"column":9}},"type":"if","locations":[{"start":{"line":83,"column":8},"end":{"line":87,"column":9}},{"start":{"line":83,"column":8},"end":{"line":87,"column":9}}],"line":83},"19":{"loc":{"start":{"line":83,"column":12},"end":{"line":83,"column":33}},"type":"binary-expr","locations":[{"start":{"line":83,"column":12},"end":{"line":83,"column":21}},{"start":{"line":83,"column":25},"end":{"line":83,"column":33}}],"line":83}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":7,"6":6,"7":6,"8":6,"9":6,"10":41,"11":41,"12":6,"13":74,"14":6,"15":6,"16":6,"17":6,"18":6,"19":7,"20":7,"21":0,"22":7,"23":7,"24":7,"25":6,"26":6,"27":0,"28":6,"29":1,"30":5,"31":41,"32":41,"33":12,"34":41,"35":41,"36":24,"37":41,"38":6,"39":6,"40":6,"41":12,"42":6,"43":0,"44":6,"45":6,"46":6,"47":6,"48":6,"49":6,"50":2,"51":10,"52":10,"53":6,"54":2,"55":6,"56":5,"57":6,"58":5,"59":25,"60":25,"61":6,"62":1,"63":6,"64":42,"65":6,"66":1},"f":{"0":7,"1":6,"2":41,"3":74,"4":41,"5":6,"6":6,"7":12,"8":10,"9":10,"10":25,"11":25,"12":1,"13":42},"b":{"0":[6,1],"1":[7,7,3],"2":[0,7],"3":[6,1],"4":[0,6],"5":[6,0],"6":[1,5],"7":[6,3],"8":[12,29],"9":[24,17],"10":[0,6],"11":[6,6],"12":[2,4],"13":[6,2],"14":[2,4],"15":[6,2],"16":[5,1],"17":[6,5],"18":[5,1],"19":[6,5]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/choose-pokemon-prompt-resolver.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/choose-pokemon-prompt-resolver.ts"],"names":[],"mappings":"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","sourcesContent":["import { Player, State, Action, ResolvePromptAction, Prompt, PokemonCardList,\n  PlayerType, SlotType, StateUtils, GameMessage } from '../../game';\nimport { PromptResolver } from './prompt-resolver';\nimport { ChoosePokemonPrompt } from '../../game/store/prompts/choose-pokemon-prompt';\n\ninterface PlayerCardList {\n  cardList: PokemonCardList;\n  player: PlayerType;\n}\n\nexport class ChoosePokemonPromptResolver extends PromptResolver {\n\n  public resolvePrompt(state: State, player: Player, prompt: Prompt<any>): Action | undefined {\n    if (prompt instanceof ChoosePokemonPrompt) {\n      const items = this.buildPokemonToChoose(state, prompt);\n      const result = this.getPromptResult(prompt, items);\n      return new ResolvePromptAction(prompt.id, result);\n    }\n  }\n\n  private getPromptResult(prompt: ChoosePokemonPrompt, pokemons: PlayerCardList[]): PokemonCardList[] | null {\n    const items = pokemons.map(item => {\n      const score = this.getPokemonScoreForPrompt(prompt, item);\n      return { cardList: item.cardList, score };\n    });\n    items.sort((a, b) => b.score - a.score);\n\n    const result: PokemonCardList[] = [];\n    const min = prompt.options.min;\n    const max = prompt.options.max;\n    let score = 0;\n\n    while (items.length > 0 && (items[0].score > 0 || result.length < min)) {\n      const item = items.shift();\n      if (item === undefined) {\n        break;\n      }\n      result.push(item.cardList);\n      score += item.score;\n\n      if (result.length >= max) {\n        break;\n      }\n    }\n\n    if (result.length === 0 && prompt.options.allowCancel) {\n      return null;\n    }\n\n    if (score < 0 && prompt.options.allowCancel) {\n      return null;\n    }\n\n    return result;\n  }\n\n  private getPokemonScoreForPrompt(prompt: ChoosePokemonPrompt, item: PlayerCardList): number {\n    let score = this.stateScore.getPokemonScore(item.cardList);\n\n    if (item.player === PlayerType.TOP_PLAYER) {\n      score = -score;\n    }\n\n    // reverse messages\n    const weakestMessages: GameMessage[] = [\n      GameMessage.CHOOSE_POKEMON_TO_DAMAGE,\n      GameMessage.CHOOSE_POKEMON_TO_DISCARD,\n      GameMessage.CHOOSE_POKEMON_TO_DISCARD_CARDS,\n      GameMessage.CHOOSE_POKEMON_TO_PICK_UP\n    ];\n\n    if (weakestMessages.includes(prompt.message)) {\n      score = -score;\n    }\n\n    return score;\n  }\n\n  private buildPokemonToChoose(state: State, prompt: ChoosePokemonPrompt): PlayerCardList[] {\n    const player = state.players.find(p => p.id === prompt.playerId);\n    const opponent = state.players.find(p => p.id !== prompt.playerId);\n    if (player === undefined || opponent === undefined) {\n      return [];\n    }\n    const hasOpponent = [PlayerType.TOP_PLAYER, PlayerType.ANY].includes(prompt.playerType);\n    const hasPlayer = [PlayerType.BOTTOM_PLAYER, PlayerType.ANY].includes(prompt.playerType);\n    const hasBench = prompt.slots.includes(SlotType.BENCH);\n    const hasActive = prompt.slots.includes(SlotType.ACTIVE);\n\n    let result: PlayerCardList[] = [];\n    if (hasOpponent && hasBench) {\n      opponent.bench.filter(b => b.cards.length).forEach(b => {\n        result.push({ cardList: b, player: PlayerType.TOP_PLAYER });\n      });\n    }\n    if (hasOpponent && hasActive) {\n      result.push({ cardList: opponent.active, player: PlayerType.TOP_PLAYER });\n    }\n    if (hasPlayer && hasActive) {\n      result.push({ cardList: player.active, player: PlayerType.BOTTOM_PLAYER });\n    }\n    if (hasPlayer && hasBench) {\n      player.bench.filter(b => b.cards.length).forEach(b => {\n        result.push({ cardList: b, player: PlayerType.BOTTOM_PLAYER });\n      });\n    }\n\n    const blocked = prompt.options.blocked.map(b => StateUtils.getTarget(state, player, b));\n    result = result.filter(r => !blocked.includes(r.cardList));\n    return result;\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"304df354966d9938fed8076cf613855b025cedc2","contentHash":"1f4e68fe974a11ca15c6c842dc95f2abc9050b772266aaed6933fa68be4f43d5"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/choose-prize-prompt-resolver.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/choose-prize-prompt-resolver.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":43}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":36}},"3":{"start":{"line":5,"column":26},"end":{"line":5,"column":54}},"4":{"start":{"line":6,"column":30},"end":{"line":6,"column":85}},"5":{"start":{"line":9,"column":8},"end":{"line":13,"column":9}},"6":{"start":{"line":10,"column":27},"end":{"line":11,"column":47}},"7":{"start":{"line":10,"column":53},"end":{"line":10,"column":71}},"8":{"start":{"line":12,"column":12},"end":{"line":12,"column":69}},"9":{"start":{"line":16,"column":0},"end":{"line":16,"column":62}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":8,"column":4},"end":{"line":8,"column":5}},"loc":{"start":{"line":8,"column":41},"end":{"line":14,"column":5}},"line":8},"1":{"name":"(anonymous_1)","decl":{"start":{"line":10,"column":48},"end":{"line":10,"column":49}},"loc":{"start":{"line":10,"column":53},"end":{"line":10,"column":71}},"line":10}},"branchMap":{"0":{"loc":{"start":{"line":9,"column":8},"end":{"line":13,"column":9}},"type":"if","locations":[{"start":{"line":9,"column":8},"end":{"line":13,"column":9}},{"start":{"line":9,"column":8},"end":{"line":13,"column":9}}],"line":9}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":1},"f":{"0":0,"1":0},"b":{"0":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/choose-prize-prompt-resolver.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/choose-prize-prompt-resolver.ts"],"names":[],"mappings":";;;AAAA,qCAAgF;AAChF,uDAAmD;AACnD,sFAAiF;AAGjF,MAAa,yBAA0B,SAAQ,gCAAc;IAEpD,aAAa,CAAC,KAAY,EAAE,MAAc,EAAE,MAAmB;QACpE,IAAI,MAAM,YAAY,uCAAiB,EAAE;YACvC,MAAM,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC;iBACzD,KAAK,CAAC,CAAC,EAAE,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;YAClC,OAAO,IAAI,0BAAmB,CAAC,MAAM,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC;SACnD;IACH,CAAC;CAEF;AAVD,8DAUC","sourcesContent":["import { Player, State, Action, ResolvePromptAction, Prompt } from '../../game';\nimport { PromptResolver } from './prompt-resolver';\nimport { ChoosePrizePrompt } from '../../game/store/prompts/choose-prize-prompt';\n\n\nexport class ChoosePrizePromptResolver extends PromptResolver {\n\n  public resolvePrompt(state: State, player: Player, prompt: Prompt<any>): Action | undefined {\n    if (prompt instanceof ChoosePrizePrompt) {\n      const result = player.prizes.filter(p => p.cards.length > 0)\n        .slice(0, prompt.options.count);\n      return new ResolvePromptAction(prompt.id, result);\n    }\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"546649e494df6f07d87d744d72523e9bd0b6f481","contentHash":"6bf2dc92495c18d664d9784d38b0793f06ead44edfc7d23e16fbf71a0402f7b4"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/confirm-prompt-resolver.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/confirm-prompt-resolver.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":39}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":36}},"3":{"start":{"line":5,"column":26},"end":{"line":5,"column":54}},"4":{"start":{"line":6,"column":25},"end":{"line":6,"column":75}},"5":{"start":{"line":7,"column":28},"end":{"line":7,"column":81}},"6":{"start":{"line":10,"column":8},"end":{"line":12,"column":9}},"7":{"start":{"line":11,"column":12},"end":{"line":11,"column":68}},"8":{"start":{"line":13,"column":8},"end":{"line":19,"column":9}},"9":{"start":{"line":14,"column":12},"end":{"line":17,"column":13}},"10":{"start":{"line":15,"column":31},"end":{"line":15,"column":74}},"11":{"start":{"line":16,"column":16},"end":{"line":16,"column":73}},"12":{"start":{"line":18,"column":12},"end":{"line":18,"column":67}},"13":{"start":{"line":22,"column":0},"end":{"line":22,"column":54}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":9,"column":4},"end":{"line":9,"column":5}},"loc":{"start":{"line":9,"column":41},"end":{"line":20,"column":5}},"line":9}},"branchMap":{"0":{"loc":{"start":{"line":10,"column":8},"end":{"line":12,"column":9}},"type":"if","locations":[{"start":{"line":10,"column":8},"end":{"line":12,"column":9}},{"start":{"line":10,"column":8},"end":{"line":12,"column":9}}],"line":10},"1":{"loc":{"start":{"line":13,"column":8},"end":{"line":19,"column":9}},"type":"if","locations":[{"start":{"line":13,"column":8},"end":{"line":19,"column":9}},{"start":{"line":13,"column":8},"end":{"line":19,"column":9}}],"line":13},"2":{"loc":{"start":{"line":14,"column":12},"end":{"line":17,"column":13}},"type":"if","locations":[{"start":{"line":14,"column":12},"end":{"line":17,"column":13}},{"start":{"line":14,"column":12},"end":{"line":17,"column":13}}],"line":14},"3":{"loc":{"start":{"line":15,"column":31},"end":{"line":15,"column":74}},"type":"cond-expr","locations":[{"start":{"line":15,"column":63},"end":{"line":15,"column":67}},{"start":{"line":15,"column":70},"end":{"line":15,"column":74}}],"line":15}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":1},"f":{"0":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/confirm-prompt-resolver.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/confirm-prompt-resolver.ts"],"names":[],"mappings":";;;AAAA,qCAA6F;AAC7F,uDAAmD;AACnD,4EAAwE;AACxE,kFAA6E;AAG7E,MAAa,qBAAsB,SAAQ,gCAAc;IAEhD,aAAa,CAAC,KAAY,EAAE,MAAc,EAAE,MAAmB;QACpE,IAAI,MAAM,YAAY,8BAAa,EAAE;YACnC,OAAO,IAAI,0BAAmB,CAAC,MAAM,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC;SAClD;QAED,IAAI,MAAM,YAAY,mCAAe,EAAE;YACrC,IAAI,MAAM,CAAC,OAAO,KAAK,kBAAW,CAAC,uBAAuB,EAAE;gBAC1D,MAAM,MAAM,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC;gBAC3D,OAAO,IAAI,0BAAmB,CAAC,MAAM,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC;aACnD;YACD,OAAO,IAAI,0BAAmB,CAAC,MAAM,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC;SACjD;IACH,CAAC;CAEF;AAhBD,sDAgBC","sourcesContent":["import { Player, State, Action, ResolvePromptAction, Prompt, GameMessage } from '../../game';\nimport { PromptResolver } from './prompt-resolver';\nimport { ConfirmPrompt } from '../../game/store/prompts/confirm-prompt';\nimport { ShowCardsPrompt } from '../../game/store/prompts/show-cards-prompt';\n\n\nexport class ConfirmPromptResolver extends PromptResolver {\n\n  public resolvePrompt(state: State, player: Player, prompt: Prompt<any>): Action | undefined {\n    if (prompt instanceof ConfirmPrompt) {\n      return new ResolvePromptAction(prompt.id, false);\n    }\n\n    if (prompt instanceof ShowCardsPrompt) {\n      if (prompt.message === GameMessage.SETUP_OPPONENT_NO_BASIC) {\n        const result = player.hand.cards.length < 15 ? true : null;\n        return new ResolvePromptAction(prompt.id, result);\n      }\n      return new ResolvePromptAction(prompt.id, true);\n    }\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"1d676ffdc29058042c898629c096610f7c1efce9","contentHash":"810efb800677a0b5e509f0909b0b05ccd4358f8be99c6dcacfde255e0b1b6b8a"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/move-damage-prompt-resolver.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/move-damage-prompt-resolver.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":42}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":36}},"3":{"start":{"line":5,"column":37},"end":{"line":5,"column":76}},"4":{"start":{"line":8,"column":8},"end":{"line":11,"column":9}},"5":{"start":{"line":9,"column":27},"end":{"line":9,"column":72}},"6":{"start":{"line":10,"column":12},"end":{"line":10,"column":69}},"7":{"start":{"line":14,"column":24},"end":{"line":14,"column":82}},"8":{"start":{"line":15,"column":24},"end":{"line":15,"column":80}},"9":{"start":{"line":16,"column":8},"end":{"line":16,"column":28}},"10":{"start":{"line":17,"column":8},"end":{"line":17,"column":61}},"11":{"start":{"line":17,"column":42},"end":{"line":17,"column":59}},"12":{"start":{"line":18,"column":23},"end":{"line":18,"column":25}},"13":{"start":{"line":19,"column":20},"end":{"line":19,"column":21}},"14":{"start":{"line":20,"column":25},"end":{"line":20,"column":30}},"15":{"start":{"line":21,"column":20},"end":{"line":21,"column":38}},"16":{"start":{"line":22,"column":20},"end":{"line":22,"column":38}},"17":{"start":{"line":23,"column":24},"end":{"line":23,"column":25}},"18":{"start":{"line":24,"column":22},"end":{"line":24,"column":23}},"19":{"start":{"line":25,"column":8},"end":{"line":61,"column":9}},"20":{"start":{"line":26,"column":29},"end":{"line":26,"column":49}},"21":{"start":{"line":27,"column":27},"end":{"line":27,"column":43}},"22":{"start":{"line":28,"column":12},"end":{"line":30,"column":13}},"23":{"start":{"line":29,"column":16},"end":{"line":29,"column":22}},"24":{"start":{"line":31,"column":12},"end":{"line":33,"column":13}},"25":{"start":{"line":32,"column":16},"end":{"line":32,"column":34}},"26":{"start":{"line":36,"column":12},"end":{"line":38,"column":13}},"27":{"start":{"line":37,"column":16},"end":{"line":37,"column":22}},"28":{"start":{"line":40,"column":12},"end":{"line":42,"column":13}},"29":{"start":{"line":41,"column":16},"end":{"line":41,"column":22}},"30":{"start":{"line":43,"column":12},"end":{"line":45,"column":13}},"31":{"start":{"line":44,"column":16},"end":{"line":44,"column":29}},"32":{"start":{"line":46,"column":12},"end":{"line":60,"column":13}},"33":{"start":{"line":47,"column":16},"end":{"line":47,"column":38}},"34":{"start":{"line":48,"column":16},"end":{"line":48,"column":36}},"35":{"start":{"line":49,"column":16},"end":{"line":49,"column":55}},"36":{"start":{"line":50,"column":16},"end":{"line":50,"column":74}},"37":{"start":{"line":51,"column":16},"end":{"line":53,"column":17}},"38":{"start":{"line":52,"column":20},"end":{"line":52,"column":35}},"39":{"start":{"line":54,"column":16},"end":{"line":56,"column":17}},"40":{"start":{"line":55,"column":20},"end":{"line":55,"column":33}},"41":{"start":{"line":57,"column":16},"end":{"line":59,"column":17}},"42":{"start":{"line":58,"column":20},"end":{"line":58,"column":26}},"43":{"start":{"line":62,"column":8},"end":{"line":64,"column":9}},"44":{"start":{"line":63,"column":12},"end":{"line":63,"column":24}},"45":{"start":{"line":65,"column":8},"end":{"line":67,"column":9}},"46":{"start":{"line":66,"column":12},"end":{"line":66,"column":24}},"47":{"start":{"line":68,"column":8},"end":{"line":68,"column":22}},"48":{"start":{"line":71,"column":0},"end":{"line":71,"column":60}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":7,"column":4},"end":{"line":7,"column":5}},"loc":{"start":{"line":7,"column":41},"end":{"line":12,"column":5}},"line":7},"1":{"name":"(anonymous_1)","decl":{"start":{"line":13,"column":4},"end":{"line":13,"column":5}},"loc":{"start":{"line":13,"column":45},"end":{"line":69,"column":5}},"line":13},"2":{"name":"(anonymous_2)","decl":{"start":{"line":17,"column":37},"end":{"line":17,"column":38}},"loc":{"start":{"line":17,"column":42},"end":{"line":17,"column":59}},"line":17}},"branchMap":{"0":{"loc":{"start":{"line":8,"column":8},"end":{"line":11,"column":9}},"type":"if","locations":[{"start":{"line":8,"column":8},"end":{"line":11,"column":9}},{"start":{"line":8,"column":8},"end":{"line":11,"column":9}}],"line":8},"1":{"loc":{"start":{"line":25,"column":15},"end":{"line":25,"column":111}},"type":"binary-expr","locations":[{"start":{"line":25,"column":15},"end":{"line":25,"column":43}},{"start":{"line":25,"column":47},"end":{"line":25,"column":71}},{"start":{"line":25,"column":76},"end":{"line":25,"column":87}},{"start":{"line":25,"column":91},"end":{"line":25,"column":110}}],"line":25},"2":{"loc":{"start":{"line":28,"column":12},"end":{"line":30,"column":13}},"type":"if","locations":[{"start":{"line":28,"column":12},"end":{"line":30,"column":13}},{"start":{"line":28,"column":12},"end":{"line":30,"column":13}}],"line":28},"3":{"loc":{"start":{"line":28,"column":16},"end":{"line":28,"column":62}},"type":"binary-expr","locations":[{"start":{"line":28,"column":16},"end":{"line":28,"column":38}},{"start":{"line":28,"column":42},"end":{"line":28,"column":62}}],"line":28},"4":{"loc":{"start":{"line":31,"column":12},"end":{"line":33,"column":13}},"type":"if","locations":[{"start":{"line":31,"column":12},"end":{"line":33,"column":13}},{"start":{"line":31,"column":12},"end":{"line":33,"column":13}}],"line":31},"5":{"loc":{"start":{"line":36,"column":12},"end":{"line":38,"column":13}},"type":"if","locations":[{"start":{"line":36,"column":12},"end":{"line":38,"column":13}},{"start":{"line":36,"column":12},"end":{"line":38,"column":13}}],"line":36},"6":{"loc":{"start":{"line":36,"column":16},"end":{"line":36,"column":56}},"type":"binary-expr","locations":[{"start":{"line":36,"column":16},"end":{"line":36,"column":26}},{"start":{"line":36,"column":30},"end":{"line":36,"column":56}}],"line":36},"7":{"loc":{"start":{"line":40,"column":12},"end":{"line":42,"column":13}},"type":"if","locations":[{"start":{"line":40,"column":12},"end":{"line":42,"column":13}},{"start":{"line":40,"column":12},"end":{"line":42,"column":13}}],"line":40},"8":{"loc":{"start":{"line":40,"column":16},"end":{"line":40,"column":50}},"type":"binary-expr","locations":[{"start":{"line":40,"column":16},"end":{"line":40,"column":26}},{"start":{"line":40,"column":30},"end":{"line":40,"column":50}}],"line":40},"9":{"loc":{"start":{"line":43,"column":12},"end":{"line":45,"column":13}},"type":"if","locations":[{"start":{"line":43,"column":12},"end":{"line":45,"column":13}},{"start":{"line":43,"column":12},"end":{"line":45,"column":13}}],"line":43},"10":{"loc":{"start":{"line":46,"column":12},"end":{"line":60,"column":13}},"type":"if","locations":[{"start":{"line":46,"column":12},"end":{"line":60,"column":13}},{"start":{"line":46,"column":12},"end":{"line":60,"column":13}}],"line":46},"11":{"loc":{"start":{"line":51,"column":16},"end":{"line":53,"column":17}},"type":"if","locations":[{"start":{"line":51,"column":16},"end":{"line":53,"column":17}},{"start":{"line":51,"column":16},"end":{"line":53,"column":17}}],"line":51},"12":{"loc":{"start":{"line":54,"column":16},"end":{"line":56,"column":17}},"type":"if","locations":[{"start":{"line":54,"column":16},"end":{"line":56,"column":17}},{"start":{"line":54,"column":16},"end":{"line":56,"column":17}}],"line":54},"13":{"loc":{"start":{"line":57,"column":16},"end":{"line":59,"column":17}},"type":"if","locations":[{"start":{"line":57,"column":16},"end":{"line":59,"column":17}},{"start":{"line":57,"column":16},"end":{"line":59,"column":17}}],"line":57},"14":{"loc":{"start":{"line":57,"column":20},"end":{"line":57,"column":61}},"type":"binary-expr","locations":[{"start":{"line":57,"column":20},"end":{"line":57,"column":37}},{"start":{"line":57,"column":41},"end":{"line":57,"column":61}}],"line":57},"15":{"loc":{"start":{"line":62,"column":8},"end":{"line":64,"column":9}},"type":"if","locations":[{"start":{"line":62,"column":8},"end":{"line":64,"column":9}},{"start":{"line":62,"column":8},"end":{"line":64,"column":9}}],"line":62},"16":{"loc":{"start":{"line":62,"column":12},"end":{"line":62,"column":61}},"type":"binary-expr","locations":[{"start":{"line":62,"column":12},"end":{"line":62,"column":31}},{"start":{"line":62,"column":35},"end":{"line":62,"column":61}}],"line":62},"17":{"loc":{"start":{"line":65,"column":8},"end":{"line":67,"column":9}},"type":"if","locations":[{"start":{"line":65,"column":8},"end":{"line":67,"column":9}},{"start":{"line":65,"column":8},"end":{"line":67,"column":9}}],"line":65},"18":{"loc":{"start":{"line":65,"column":12},"end":{"line":65,"column":51}},"type":"binary-expr","locations":[{"start":{"line":65,"column":12},"end":{"line":65,"column":21}},{"start":{"line":65,"column":25},"end":{"line":65,"column":51}}],"line":65}},"s":{"0":1,"1":1,"2":1,"3":1,"4":5,"5":5,"6":5,"7":5,"8":5,"9":5,"10":5,"11":11,"12":5,"13":5,"14":5,"15":5,"16":5,"17":5,"18":5,"19":5,"20":11,"21":11,"22":11,"23":0,"24":11,"25":3,"26":11,"27":1,"28":10,"29":0,"30":10,"31":1,"32":10,"33":9,"34":9,"35":9,"36":9,"37":9,"38":1,"39":9,"40":1,"41":9,"42":2,"43":5,"44":1,"45":4,"46":0,"47":4,"48":1},"f":{"0":5,"1":5,"2":11},"b":{"0":[5,0],"1":[13,12,12,2],"2":[0,11],"3":[11,11],"4":[3,8],"5":[1,10],"6":[11,3],"7":[0,10],"8":[10,2],"9":[1,9],"10":[9,1],"11":[1,8],"12":[1,8],"13":[2,7],"14":[9,6],"15":[1,4],"16":[5,1],"17":[0,4],"18":[4,1]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/move-damage-prompt-resolver.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/move-damage-prompt-resolver.ts"],"names":[],"mappings":"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","sourcesContent":["import { Player, State, Action, ResolvePromptAction, Prompt, MoveDamagePrompt,\n  DamageTransfer } from '../../game';\nimport { PutDamagePromptResolver } from './put-damage-prompt-resolver';\n\n\nexport class MoveDamagePromptResolver extends PutDamagePromptResolver {\n\n  public resolvePrompt(state: State, player: Player, prompt: Prompt<any>): Action | undefined {\n    if (prompt instanceof MoveDamagePrompt) {\n      const result = this.getMoveDamagePromptResult(state, prompt);\n      return new ResolvePromptAction(prompt.id, result);\n    }\n  }\n\n  private getMoveDamagePromptResult(state: State, prompt: MoveDamagePrompt): DamageTransfer[] | null {\n    let fromItems = this.getTargets(state, prompt, prompt.options.blockedFrom);\n    const toItems = this.getTargets(state, prompt, prompt.options.blockedTo);\n\n    fromItems.reverse();\n    fromItems = fromItems.filter(i => i.cardList.damage);\n\n    const result: DamageTransfer[] = [];\n    let score = 0;\n    let isNegative = false;\n\n    const min = prompt.options.min;\n    const max = prompt.options.max;\n    let fromIndex = 0;\n    let toIndex = 0;\n\n    while (fromIndex < fromItems.length && toIndex < toItems.length && (!isNegative || result.length < min)) {\n      const fromItem = fromItems[fromIndex];\n      const toItem = toItems[toIndex];\n      if (fromItem === undefined || toItem === undefined) {\n        break;\n      }\n\n      if (fromItem.score >= toItem.score) {\n        isNegative = true;\n      }\n\n      // Moving any card gives negative score, and we are able to cancel\n      // Don't append any results, just cancel the prompt\n      if (isNegative && prompt.options.allowCancel) {\n        break;\n      }\n\n      // Score is negative, and we already have minimum transfers\n      if (isNegative && result.length >= min) {\n        break;\n      }\n\n      if (toItem.cardList === fromItem.cardList) {\n        toIndex += 1;\n      }\n\n      if (toItem.cardList !== fromItem.cardList) {\n        fromItem.damage -= 10;\n        toItem.damage += 10;\n        score += toItem.score - fromItem.score;\n        result.push({ from: fromItem.target, to: toItem.target });\n\n        if (fromItem.damage <= 0) {\n          fromIndex += 1;\n        }\n\n        if (toItem.hp - toItem.damage <= 0) {\n          toIndex += 1;\n        }\n\n        if (max !== undefined && result.length >= max) {\n          break;\n        }\n      }\n    }\n\n    if (result.length === 0 && prompt.options.allowCancel) {\n      return null;\n    }\n\n    if (score < 0 && prompt.options.allowCancel) {\n      return null;\n    }\n\n    return result;\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"87f66320031cb3423ce1120301757d1e7ede1099","contentHash":"921fd2186f20d768895fd140c2f447dbbd8c9c753f215850056770b36dee4b4f"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/put-damage-prompt-resolver.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/put-damage-prompt-resolver.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":41}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":36}},"3":{"start":{"line":5,"column":26},"end":{"line":5,"column":54}},"4":{"start":{"line":6,"column":28},"end":{"line":6,"column":81}},"5":{"start":{"line":9,"column":8},"end":{"line":12,"column":9}},"6":{"start":{"line":10,"column":27},"end":{"line":10,"column":71}},"7":{"start":{"line":11,"column":12},"end":{"line":11,"column":69}},"8":{"start":{"line":15,"column":22},"end":{"line":15,"column":76}},"9":{"start":{"line":16,"column":23},"end":{"line":16,"column":25}},"10":{"start":{"line":17,"column":20},"end":{"line":17,"column":21}},"11":{"start":{"line":18,"column":27},"end":{"line":18,"column":40}},"12":{"start":{"line":19,"column":8},"end":{"line":31,"column":9}},"13":{"start":{"line":20,"column":25},"end":{"line":20,"column":38}},"14":{"start":{"line":21,"column":12},"end":{"line":23,"column":13}},"15":{"start":{"line":22,"column":16},"end":{"line":22,"column":22}},"16":{"start":{"line":24,"column":27},"end":{"line":24,"column":38}},"17":{"start":{"line":25,"column":27},"end":{"line":25,"column":48}},"18":{"start":{"line":26,"column":27},"end":{"line":26,"column":57}},"19":{"start":{"line":27,"column":12},"end":{"line":27,"column":35}},"20":{"start":{"line":28,"column":12},"end":{"line":28,"column":34}},"21":{"start":{"line":29,"column":12},"end":{"line":29,"column":41}},"22":{"start":{"line":30,"column":12},"end":{"line":30,"column":44}},"23":{"start":{"line":32,"column":8},"end":{"line":34,"column":9}},"24":{"start":{"line":33,"column":12},"end":{"line":33,"column":24}},"25":{"start":{"line":35,"column":8},"end":{"line":37,"column":9}},"26":{"start":{"line":36,"column":12},"end":{"line":36,"column":24}},"27":{"start":{"line":38,"column":8},"end":{"line":38,"column":22}},"28":{"start":{"line":41,"column":23},"end":{"line":41,"column":72}},"29":{"start":{"line":41,"column":47},"end":{"line":41,"column":71}},"30":{"start":{"line":42,"column":25},"end":{"line":42,"column":74}},"31":{"start":{"line":42,"column":49},"end":{"line":42,"column":73}},"32":{"start":{"line":43,"column":8},"end":{"line":45,"column":9}},"33":{"start":{"line":44,"column":12},"end":{"line":44,"column":22}},"34":{"start":{"line":46,"column":28},"end":{"line":46,"column":109}},"35":{"start":{"line":47,"column":26},"end":{"line":47,"column":110}},"36":{"start":{"line":48,"column":22},"end":{"line":48,"column":24}},"37":{"start":{"line":49,"column":8},"end":{"line":63,"column":9}},"38":{"start":{"line":50,"column":12},"end":{"line":62,"column":15}},"39":{"start":{"line":51,"column":41},"end":{"line":55,"column":18}},"40":{"start":{"line":52,"column":20},"end":{"line":54,"column":59}},"41":{"start":{"line":56,"column":27},"end":{"line":56,"column":73}},"42":{"start":{"line":57,"column":31},"end":{"line":57,"column":46}},"43":{"start":{"line":58,"column":30},"end":{"line":58,"column":71}},"44":{"start":{"line":59,"column":16},"end":{"line":61,"column":17}},"45":{"start":{"line":60,"column":20},"end":{"line":60,"column":74}},"46":{"start":{"line":64,"column":8},"end":{"line":78,"column":9}},"47":{"start":{"line":65,"column":12},"end":{"line":77,"column":15}},"48":{"start":{"line":66,"column":30},"end":{"line":70,"column":18}},"49":{"start":{"line":67,"column":20},"end":{"line":69,"column":59}},"50":{"start":{"line":71,"column":27},"end":{"line":71,"column":69}},"51":{"start":{"line":72,"column":31},"end":{"line":72,"column":46}},"52":{"start":{"line":73,"column":30},"end":{"line":73,"column":72}},"53":{"start":{"line":74,"column":16},"end":{"line":76,"column":17}},"54":{"start":{"line":75,"column":20},"end":{"line":75,"column":74}},"55":{"start":{"line":79,"column":28},"end":{"line":79,"column":91}},"56":{"start":{"line":79,"column":45},"end":{"line":79,"column":90}},"57":{"start":{"line":80,"column":8},"end":{"line":80,"column":73}},"58":{"start":{"line":80,"column":38},"end":{"line":80,"column":71}},"59":{"start":{"line":81,"column":8},"end":{"line":81,"column":50}},"60":{"start":{"line":81,"column":31},"end":{"line":81,"column":48}},"61":{"start":{"line":82,"column":8},"end":{"line":82,"column":23}},"62":{"start":{"line":85,"column":0},"end":{"line":85,"column":58}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":8,"column":4},"end":{"line":8,"column":5}},"loc":{"start":{"line":8,"column":41},"end":{"line":13,"column":5}},"line":8},"1":{"name":"(anonymous_1)","decl":{"start":{"line":14,"column":4},"end":{"line":14,"column":5}},"loc":{"start":{"line":14,"column":44},"end":{"line":39,"column":5}},"line":14},"2":{"name":"(anonymous_2)","decl":{"start":{"line":40,"column":4},"end":{"line":40,"column":5}},"loc":{"start":{"line":40,"column":39},"end":{"line":83,"column":5}},"line":40},"3":{"name":"(anonymous_3)","decl":{"start":{"line":41,"column":42},"end":{"line":41,"column":43}},"loc":{"start":{"line":41,"column":47},"end":{"line":41,"column":71}},"line":41},"4":{"name":"(anonymous_4)","decl":{"start":{"line":42,"column":44},"end":{"line":42,"column":45}},"loc":{"start":{"line":42,"column":49},"end":{"line":42,"column":73}},"line":42},"5":{"name":"(anonymous_5)","decl":{"start":{"line":50,"column":66},"end":{"line":50,"column":67}},"loc":{"start":{"line":50,"column":94},"end":{"line":62,"column":13}},"line":50},"6":{"name":"(anonymous_6)","decl":{"start":{"line":51,"column":70},"end":{"line":51,"column":71}},"loc":{"start":{"line":51,"column":75},"end":{"line":55,"column":17}},"line":51},"7":{"name":"(anonymous_7)","decl":{"start":{"line":65,"column":67},"end":{"line":65,"column":68}},"loc":{"start":{"line":65,"column":95},"end":{"line":77,"column":13}},"line":65},"8":{"name":"(anonymous_8)","decl":{"start":{"line":66,"column":59},"end":{"line":66,"column":60}},"loc":{"start":{"line":66,"column":64},"end":{"line":70,"column":17}},"line":66},"9":{"name":"(anonymous_9)","decl":{"start":{"line":79,"column":40},"end":{"line":79,"column":41}},"loc":{"start":{"line":79,"column":45},"end":{"line":79,"column":90}},"line":79},"10":{"name":"(anonymous_10)","decl":{"start":{"line":80,"column":33},"end":{"line":80,"column":34}},"loc":{"start":{"line":80,"column":38},"end":{"line":80,"column":71}},"line":80},"11":{"name":"(anonymous_11)","decl":{"start":{"line":81,"column":21},"end":{"line":81,"column":22}},"loc":{"start":{"line":81,"column":31},"end":{"line":81,"column":48}},"line":81}},"branchMap":{"0":{"loc":{"start":{"line":9,"column":8},"end":{"line":12,"column":9}},"type":"if","locations":[{"start":{"line":9,"column":8},"end":{"line":12,"column":9}},{"start":{"line":9,"column":8},"end":{"line":12,"column":9}}],"line":9},"1":{"loc":{"start":{"line":19,"column":15},"end":{"line":19,"column":51}},"type":"binary-expr","locations":[{"start":{"line":19,"column":15},"end":{"line":19,"column":31}},{"start":{"line":19,"column":35},"end":{"line":19,"column":51}}],"line":19},"2":{"loc":{"start":{"line":21,"column":12},"end":{"line":23,"column":13}},"type":"if","locations":[{"start":{"line":21,"column":12},"end":{"line":23,"column":13}},{"start":{"line":21,"column":12},"end":{"line":23,"column":13}}],"line":21},"3":{"loc":{"start":{"line":32,"column":8},"end":{"line":34,"column":9}},"type":"if","locations":[{"start":{"line":32,"column":8},"end":{"line":34,"column":9}},{"start":{"line":32,"column":8},"end":{"line":34,"column":9}}],"line":32},"4":{"loc":{"start":{"line":32,"column":12},"end":{"line":32,"column":61}},"type":"binary-expr","locations":[{"start":{"line":32,"column":12},"end":{"line":32,"column":31}},{"start":{"line":32,"column":35},"end":{"line":32,"column":61}}],"line":32},"5":{"loc":{"start":{"line":35,"column":8},"end":{"line":37,"column":9}},"type":"if","locations":[{"start":{"line":35,"column":8},"end":{"line":37,"column":9}},{"start":{"line":35,"column":8},"end":{"line":37,"column":9}}],"line":35},"6":{"loc":{"start":{"line":35,"column":12},"end":{"line":35,"column":51}},"type":"binary-expr","locations":[{"start":{"line":35,"column":12},"end":{"line":35,"column":21}},{"start":{"line":35,"column":25},"end":{"line":35,"column":51}}],"line":35},"7":{"loc":{"start":{"line":43,"column":8},"end":{"line":45,"column":9}},"type":"if","locations":[{"start":{"line":43,"column":8},"end":{"line":45,"column":9}},{"start":{"line":43,"column":8},"end":{"line":45,"column":9}}],"line":43},"8":{"loc":{"start":{"line":43,"column":12},"end":{"line":43,"column":58}},"type":"binary-expr","locations":[{"start":{"line":43,"column":12},"end":{"line":43,"column":32}},{"start":{"line":43,"column":36},"end":{"line":43,"column":58}}],"line":43},"9":{"loc":{"start":{"line":49,"column":8},"end":{"line":63,"column":9}},"type":"if","locations":[{"start":{"line":49,"column":8},"end":{"line":63,"column":9}},{"start":{"line":49,"column":8},"end":{"line":63,"column":9}}],"line":49},"10":{"loc":{"start":{"line":52,"column":27},"end":{"line":54,"column":58}},"type":"binary-expr","locations":[{"start":{"line":52,"column":27},"end":{"line":52,"column":60}},{"start":{"line":53,"column":27},"end":{"line":53,"column":56}},{"start":{"line":54,"column":27},"end":{"line":54,"column":58}}],"line":52},"11":{"loc":{"start":{"line":56,"column":27},"end":{"line":56,"column":73}},"type":"cond-expr","locations":[{"start":{"line":56,"column":46},"end":{"line":56,"column":69}},{"start":{"line":56,"column":72},"end":{"line":56,"column":73}}],"line":56},"12":{"loc":{"start":{"line":59,"column":16},"end":{"line":61,"column":17}},"type":"if","locations":[{"start":{"line":59,"column":16},"end":{"line":61,"column":17}},{"start":{"line":59,"column":16},"end":{"line":61,"column":17}}],"line":59},"13":{"loc":{"start":{"line":59,"column":20},"end":{"line":59,"column":64}},"type":"binary-expr","locations":[{"start":{"line":59,"column":20},"end":{"line":59,"column":26}},{"start":{"line":59,"column":30},"end":{"line":59,"column":64}}],"line":59},"14":{"loc":{"start":{"line":64,"column":8},"end":{"line":78,"column":9}},"type":"if","locations":[{"start":{"line":64,"column":8},"end":{"line":78,"column":9}},{"start":{"line":64,"column":8},"end":{"line":78,"column":9}}],"line":64},"15":{"loc":{"start":{"line":67,"column":27},"end":{"line":69,"column":58}},"type":"binary-expr","locations":[{"start":{"line":67,"column":27},"end":{"line":67,"column":60}},{"start":{"line":68,"column":27},"end":{"line":68,"column":56}},{"start":{"line":69,"column":27},"end":{"line":69,"column":58}}],"line":67},"16":{"loc":{"start":{"line":71,"column":27},"end":{"line":71,"column":69}},"type":"cond-expr","locations":[{"start":{"line":71,"column":35},"end":{"line":71,"column":65}},{"start":{"line":71,"column":68},"end":{"line":71,"column":69}}],"line":71},"17":{"loc":{"start":{"line":74,"column":16},"end":{"line":76,"column":17}},"type":"if","locations":[{"start":{"line":74,"column":16},"end":{"line":76,"column":17}},{"start":{"line":74,"column":16},"end":{"line":76,"column":17}}],"line":74},"18":{"loc":{"start":{"line":74,"column":20},"end":{"line":74,"column":64}},"type":"binary-expr","locations":[{"start":{"line":74,"column":20},"end":{"line":74,"column":26}},{"start":{"line":74,"column":30},"end":{"line":74,"column":64}}],"line":74}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":4,"6":4,"7":4,"8":4,"9":4,"10":4,"11":4,"12":4,"13":5,"14":5,"15":0,"16":5,"17":5,"18":5,"19":5,"20":5,"21":5,"22":5,"23":4,"24":0,"25":4,"26":1,"27":3,"28":14,"29":14,"30":14,"31":28,"32":14,"33":0,"34":14,"35":14,"36":14,"37":14,"38":13,"39":32,"40":263,"41":32,"42":32,"43":32,"44":32,"45":32,"46":14,"47":5,"48":10,"49":25,"50":10,"51":10,"52":10,"53":10,"54":10,"55":14,"56":1,"57":14,"58":42,"59":14,"60":27,"61":14,"62":1},"f":{"0":4,"1":4,"2":14,"3":14,"4":28,"5":32,"6":263,"7":10,"8":25,"9":1,"10":42,"11":27},"b":{"0":[4,0],"1":[9,8],"2":[0,5],"3":[0,4],"4":[4,0],"5":[1,3],"6":[4,1],"7":[0,14],"8":[14,14],"9":[13,1],"10":[263,71,52],"11":[32,0],"12":[32,0],"13":[32,32],"14":[5,9],"15":[25,25,20],"16":[10,0],"17":[10,0],"18":[10,10]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/put-damage-prompt-resolver.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/put-damage-prompt-resolver.ts"],"names":[],"mappings":"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","sourcesContent":["import { Player, State, Action, ResolvePromptAction, Prompt, CardTarget,\n  CardList, PlayerType, StateUtils, DamageMap, PokemonCardList, MoveDamagePrompt } from '../../game';\nimport { PromptResolver } from './prompt-resolver';\nimport { PutDamagePrompt } from '../../game/store/prompts/put-damage-prompt';\n\nexport type DamagePromptResolverType = PutDamagePrompt | MoveDamagePrompt;\n\nexport interface DamagePromptResolverTarget {\n  target: CardTarget;\n  cardList: PokemonCardList;\n  damage: number;\n  hp: number;\n  score: number;\n}\n\nexport class PutDamagePromptResolver extends PromptResolver {\n\n  public resolvePrompt(state: State, player: Player, prompt: Prompt<any>): Action | undefined {\n    if (prompt instanceof PutDamagePrompt) {\n      const result = this.getPutDamagePromptResult(state, prompt);\n      return new ResolvePromptAction(prompt.id, result);\n    }\n  }\n\n  private getPutDamagePromptResult(state: State, prompt: PutDamagePrompt): DamageMap[] | null {\n    const items = this.getTargets(state, prompt, prompt.options.blocked);\n\n    const result: DamageMap[] = [];\n    let score = 0;\n    let promptDamage = prompt.damage;\n\n    while (items.length > 0 && promptDamage > 0) {\n      const item = items.shift();\n      if (item === undefined) {\n        break;\n      }\n      const target = item.target;\n      const hpLeft = item.hp - item.damage;\n      const damage = Math.min(promptDamage, hpLeft);\n      promptDamage -= damage;\n      item.damage += damage;\n      score += item.score * damage;\n      result.push({ target, damage });\n    }\n\n    if (result.length === 0 && prompt.options.allowCancel) {\n      return null;\n    }\n\n    if (score < 0 && prompt.options.allowCancel) {\n      return null;\n    }\n\n    return result;\n  }\n\n  protected getTargets(\n    state: State,\n    prompt: DamagePromptResolverType,\n    blocked: CardTarget[]\n  ): DamagePromptResolverTarget[] {\n    const player = state.players.find(p => p.id === prompt.playerId);\n    const opponent = state.players.find(p => p.id !== prompt.playerId);\n    if (player === undefined || opponent === undefined) {\n      return [];\n    }\n    const hasOpponent = [PlayerType.TOP_PLAYER, PlayerType.ANY].includes(prompt.playerType);\n    const hasPlayer = [PlayerType.BOTTOM_PLAYER, PlayerType.ANY].includes(prompt.playerType);\n    let results: DamagePromptResolverTarget[] = [];\n    if (hasOpponent) {\n      opponent.forEachPokemon(PlayerType.TOP_PLAYER, (cardList, card, target) => {\n        const maxAllowedDamage = prompt.maxAllowedDamage.find(d => {\n          return d.target.player === target.player\n            && d.target.slot === target.slot\n            && d.target.index === target.index;\n        });\n        const hp = maxAllowedDamage ? maxAllowedDamage.damage : 0;\n        const damage = cardList.damage;\n        const score = this.stateScore.getPokemonScore(cardList);\n\n        if (hp > 0 && prompt.slots.includes(target.slot)) {\n          results.push({ target, cardList, damage, hp, score });\n        }\n      });\n    }\n    if (hasPlayer) {\n      player.forEachPokemon(PlayerType.BOTTOM_PLAYER, (cardList, card, target) => {\n        const maxHp = prompt.maxAllowedDamage.find(d => {\n          return d.target.player === target.player\n            && d.target.slot === target.slot\n            && d.target.index === target.index;\n        });\n        const hp = maxHp ? maxHp.damage - cardList.damage : 0;\n        const damage = cardList.damage;\n        const score = -this.stateScore.getPokemonScore(cardList);\n\n        if (hp > 0 && prompt.slots.includes(target.slot)) {\n          results.push({ target, cardList, damage, hp, score });\n        }\n      });\n    }\n\n    const blockedList: CardList[] = blocked.map(b => StateUtils.getTarget(state, player, b));\n    results = results.filter(i => !blockedList.includes(i.cardList));\n    results.sort((a, b) => b.score - a.score);\n    return results;\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"1298f1c276feff6bfcb6827908e70691d4a6b7d5","contentHash":"0fbafcb80316ca85a6af22a62cc5ca21a836c7d6f63f55cb3ac7ee6892bd10b8"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/move-energy-prompt-resolver.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/move-energy-prompt-resolver.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":42}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":36}},"3":{"start":{"line":5,"column":26},"end":{"line":5,"column":54}},"4":{"start":{"line":6,"column":16},"end":{"line":6,"column":44}},"5":{"start":{"line":9,"column":8},"end":{"line":12,"column":9}},"6":{"start":{"line":10,"column":27},"end":{"line":10,"column":62}},"7":{"start":{"line":11,"column":12},"end":{"line":11,"column":69}},"8":{"start":{"line":15,"column":21},"end":{"line":15,"column":60}},"9":{"start":{"line":16,"column":26},"end":{"line":16,"column":63}},"10":{"start":{"line":17,"column":20},"end":{"line":17,"column":38}},"11":{"start":{"line":18,"column":20},"end":{"line":18,"column":38}},"12":{"start":{"line":19,"column":23},"end":{"line":19,"column":25}},"13":{"start":{"line":20,"column":24},"end":{"line":20,"column":66}},"14":{"start":{"line":21,"column":25},"end":{"line":21,"column":30}},"15":{"start":{"line":22,"column":8},"end":{"line":52,"column":9}},"16":{"start":{"line":23,"column":30},"end":{"line":23,"column":78}},"17":{"start":{"line":24,"column":12},"end":{"line":24,"column":56}},"18":{"start":{"line":24,"column":37},"end":{"line":24,"column":54}},"19":{"start":{"line":25,"column":12},"end":{"line":27,"column":13}},"20":{"start":{"line":26,"column":16},"end":{"line":26,"column":22}},"21":{"start":{"line":28,"column":25},"end":{"line":28,"column":37}},"22":{"start":{"line":29,"column":30},"end":{"line":29,"column":62}},"23":{"start":{"line":30,"column":12},"end":{"line":30,"column":43}},"24":{"start":{"line":31,"column":12},"end":{"line":33,"column":13}},"25":{"start":{"line":32,"column":16},"end":{"line":32,"column":34}},"26":{"start":{"line":36,"column":12},"end":{"line":38,"column":13}},"27":{"start":{"line":37,"column":16},"end":{"line":37,"column":22}},"28":{"start":{"line":40,"column":12},"end":{"line":42,"column":13}},"29":{"start":{"line":41,"column":16},"end":{"line":41,"column":22}},"30":{"start":{"line":43,"column":27},"end":{"line":43,"column":53}},"31":{"start":{"line":44,"column":27},"end":{"line":44,"column":42}},"32":{"start":{"line":45,"column":25},"end":{"line":45,"column":43}},"33":{"start":{"line":46,"column":12},"end":{"line":46,"column":44}},"34":{"start":{"line":47,"column":12},"end":{"line":47,"column":30}},"35":{"start":{"line":48,"column":12},"end":{"line":48,"column":35}},"36":{"start":{"line":49,"column":12},"end":{"line":51,"column":13}},"37":{"start":{"line":50,"column":16},"end":{"line":50,"column":22}},"38":{"start":{"line":53,"column":8},"end":{"line":55,"column":9}},"39":{"start":{"line":54,"column":12},"end":{"line":54,"column":24}},"40":{"start":{"line":56,"column":8},"end":{"line":58,"column":9}},"41":{"start":{"line":57,"column":12},"end":{"line":57,"column":24}},"42":{"start":{"line":59,"column":8},"end":{"line":59,"column":58}},"43":{"start":{"line":62,"column":23},"end":{"line":62,"column":72}},"44":{"start":{"line":62,"column":47},"end":{"line":62,"column":71}},"45":{"start":{"line":63,"column":8},"end":{"line":65,"column":9}},"46":{"start":{"line":64,"column":12},"end":{"line":64,"column":22}},"47":{"start":{"line":66,"column":8},"end":{"line":74,"column":11}},"48":{"start":{"line":67,"column":29},"end":{"line":67,"column":91}},"49":{"start":{"line":68,"column":25},"end":{"line":68,"column":64}},"50":{"start":{"line":69,"column":12},"end":{"line":73,"column":14}},"51":{"start":{"line":77,"column":24},"end":{"line":77,"column":26}},"52":{"start":{"line":78,"column":8},"end":{"line":93,"column":11}},"53":{"start":{"line":79,"column":33},"end":{"line":79,"column":50}},"54":{"start":{"line":80,"column":32},"end":{"line":80,"column":88}},"55":{"start":{"line":81,"column":12},"end":{"line":92,"column":13}},"56":{"start":{"line":82,"column":16},"end":{"line":91,"column":17}},"57":{"start":{"line":83,"column":20},"end":{"line":83,"column":76}},"58":{"start":{"line":84,"column":20},"end":{"line":89,"column":23}},"59":{"start":{"line":90,"column":20},"end":{"line":90,"column":76}},"60":{"start":{"line":94,"column":8},"end":{"line":94,"column":23}},"61":{"start":{"line":97,"column":30},"end":{"line":97,"column":32}},"62":{"start":{"line":98,"column":28},"end":{"line":98,"column":86}},"63":{"start":{"line":99,"column":8},"end":{"line":121,"column":11}},"64":{"start":{"line":100,"column":31},"end":{"line":104,"column":14}},"65":{"start":{"line":101,"column":16},"end":{"line":103,"column":66}},"66":{"start":{"line":105,"column":28},"end":{"line":105,"column":64}},"67":{"start":{"line":106,"column":29},"end":{"line":106,"column":50}},"68":{"start":{"line":107,"column":12},"end":{"line":111,"column":15}},"69":{"start":{"line":108,"column":16},"end":{"line":110,"column":17}},"70":{"start":{"line":109,"column":20},"end":{"line":109,"column":46}},"71":{"start":{"line":112,"column":12},"end":{"line":112,"column":60}},"72":{"start":{"line":113,"column":12},"end":{"line":120,"column":15}},"73":{"start":{"line":114,"column":16},"end":{"line":119,"column":19}},"74":{"start":{"line":122,"column":8},"end":{"line":122,"column":29}},"75":{"start":{"line":125,"column":23},"end":{"line":125,"column":72}},"76":{"start":{"line":125,"column":47},"end":{"line":125,"column":71}},"77":{"start":{"line":126,"column":25},"end":{"line":126,"column":74}},"78":{"start":{"line":126,"column":49},"end":{"line":126,"column":73}},"79":{"start":{"line":127,"column":8},"end":{"line":129,"column":9}},"80":{"start":{"line":128,"column":12},"end":{"line":128,"column":22}},"81":{"start":{"line":130,"column":28},"end":{"line":130,"column":109}},"82":{"start":{"line":131,"column":26},"end":{"line":131,"column":110}},"83":{"start":{"line":132,"column":22},"end":{"line":132,"column":24}},"84":{"start":{"line":133,"column":8},"end":{"line":139,"column":9}},"85":{"start":{"line":134,"column":12},"end":{"line":138,"column":15}},"86":{"start":{"line":135,"column":16},"end":{"line":137,"column":17}},"87":{"start":{"line":136,"column":20},"end":{"line":136,"column":55}},"88":{"start":{"line":140,"column":8},"end":{"line":146,"column":9}},"89":{"start":{"line":141,"column":12},"end":{"line":145,"column":15}},"90":{"start":{"line":142,"column":16},"end":{"line":144,"column":17}},"91":{"start":{"line":143,"column":20},"end":{"line":143,"column":55}},"92":{"start":{"line":147,"column":28},"end":{"line":147,"column":91}},"93":{"start":{"line":147,"column":45},"end":{"line":147,"column":90}},"94":{"start":{"line":148,"column":8},"end":{"line":148,"column":73}},"95":{"start":{"line":148,"column":38},"end":{"line":148,"column":71}},"96":{"start":{"line":149,"column":8},"end":{"line":149,"column":23}},"97":{"start":{"line":152,"column":0},"end":{"line":152,"column":60}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":8,"column":4},"end":{"line":8,"column":5}},"loc":{"start":{"line":8,"column":41},"end":{"line":13,"column":5}},"line":8},"1":{"name":"(anonymous_1)","decl":{"start":{"line":14,"column":4},"end":{"line":14,"column":5}},"loc":{"start":{"line":14,"column":35},"end":{"line":60,"column":5}},"line":14},"2":{"name":"(anonymous_2)","decl":{"start":{"line":24,"column":27},"end":{"line":24,"column":28}},"loc":{"start":{"line":24,"column":37},"end":{"line":24,"column":54}},"line":24},"3":{"name":"(anonymous_3)","decl":{"start":{"line":61,"column":4},"end":{"line":61,"column":5}},"loc":{"start":{"line":61,"column":41},"end":{"line":75,"column":5}},"line":61},"4":{"name":"(anonymous_4)","decl":{"start":{"line":62,"column":42},"end":{"line":62,"column":43}},"loc":{"start":{"line":62,"column":47},"end":{"line":62,"column":71}},"line":62},"5":{"name":"(anonymous_5)","decl":{"start":{"line":66,"column":25},"end":{"line":66,"column":26}},"loc":{"start":{"line":66,"column":33},"end":{"line":74,"column":9}},"line":66},"6":{"name":"(anonymous_6)","decl":{"start":{"line":76,"column":4},"end":{"line":76,"column":5}},"loc":{"start":{"line":76,"column":53},"end":{"line":95,"column":5}},"line":76},"7":{"name":"(anonymous_7)","decl":{"start":{"line":78,"column":30},"end":{"line":78,"column":31}},"loc":{"start":{"line":78,"column":38},"end":{"line":93,"column":9}},"line":78},"8":{"name":"(anonymous_8)","decl":{"start":{"line":96,"column":4},"end":{"line":96,"column":5}},"loc":{"start":{"line":96,"column":38},"end":{"line":123,"column":5}},"line":96},"9":{"name":"(anonymous_9)","decl":{"start":{"line":99,"column":28},"end":{"line":99,"column":29}},"loc":{"start":{"line":99,"column":42},"end":{"line":121,"column":9}},"line":99},"10":{"name":"(anonymous_10)","decl":{"start":{"line":100,"column":62},"end":{"line":100,"column":63}},"loc":{"start":{"line":100,"column":67},"end":{"line":104,"column":13}},"line":100},"11":{"name":"(anonymous_11)","decl":{"start":{"line":107,"column":46},"end":{"line":107,"column":47}},"loc":{"start":{"line":107,"column":63},"end":{"line":111,"column":13}},"line":107},"12":{"name":"(anonymous_12)","decl":{"start":{"line":113,"column":35},"end":{"line":113,"column":36}},"loc":{"start":{"line":113,"column":43},"end":{"line":120,"column":13}},"line":113},"13":{"name":"(anonymous_13)","decl":{"start":{"line":124,"column":4},"end":{"line":124,"column":5}},"loc":{"start":{"line":124,"column":39},"end":{"line":150,"column":5}},"line":124},"14":{"name":"(anonymous_14)","decl":{"start":{"line":125,"column":42},"end":{"line":125,"column":43}},"loc":{"start":{"line":125,"column":47},"end":{"line":125,"column":71}},"line":125},"15":{"name":"(anonymous_15)","decl":{"start":{"line":126,"column":44},"end":{"line":126,"column":45}},"loc":{"start":{"line":126,"column":49},"end":{"line":126,"column":73}},"line":126},"16":{"name":"(anonymous_16)","decl":{"start":{"line":134,"column":66},"end":{"line":134,"column":67}},"loc":{"start":{"line":134,"column":94},"end":{"line":138,"column":13}},"line":134},"17":{"name":"(anonymous_17)","decl":{"start":{"line":141,"column":67},"end":{"line":141,"column":68}},"loc":{"start":{"line":141,"column":95},"end":{"line":145,"column":13}},"line":141},"18":{"name":"(anonymous_18)","decl":{"start":{"line":147,"column":40},"end":{"line":147,"column":41}},"loc":{"start":{"line":147,"column":45},"end":{"line":147,"column":90}},"line":147},"19":{"name":"(anonymous_19)","decl":{"start":{"line":148,"column":33},"end":{"line":148,"column":34}},"loc":{"start":{"line":148,"column":38},"end":{"line":148,"column":71}},"line":148}},"branchMap":{"0":{"loc":{"start":{"line":9,"column":8},"end":{"line":12,"column":9}},"type":"if","locations":[{"start":{"line":9,"column":8},"end":{"line":12,"column":9}},{"start":{"line":9,"column":8},"end":{"line":12,"column":9}}],"line":9},"1":{"loc":{"start":{"line":22,"column":15},"end":{"line":22,"column":75}},"type":"binary-expr","locations":[{"start":{"line":22,"column":15},"end":{"line":22,"column":35}},{"start":{"line":22,"column":40},"end":{"line":22,"column":51}},{"start":{"line":22,"column":55},"end":{"line":22,"column":74}}],"line":22},"2":{"loc":{"start":{"line":25,"column":12},"end":{"line":27,"column":13}},"type":"if","locations":[{"start":{"line":25,"column":12},"end":{"line":27,"column":13}},{"start":{"line":25,"column":12},"end":{"line":27,"column":13}}],"line":25},"3":{"loc":{"start":{"line":31,"column":12},"end":{"line":33,"column":13}},"type":"if","locations":[{"start":{"line":31,"column":12},"end":{"line":33,"column":13}},{"start":{"line":31,"column":12},"end":{"line":33,"column":13}}],"line":31},"4":{"loc":{"start":{"line":36,"column":12},"end":{"line":38,"column":13}},"type":"if","locations":[{"start":{"line":36,"column":12},"end":{"line":38,"column":13}},{"start":{"line":36,"column":12},"end":{"line":38,"column":13}}],"line":36},"5":{"loc":{"start":{"line":36,"column":16},"end":{"line":36,"column":56}},"type":"binary-expr","locations":[{"start":{"line":36,"column":16},"end":{"line":36,"column":26}},{"start":{"line":36,"column":30},"end":{"line":36,"column":56}}],"line":36},"6":{"loc":{"start":{"line":40,"column":12},"end":{"line":42,"column":13}},"type":"if","locations":[{"start":{"line":40,"column":12},"end":{"line":42,"column":13}},{"start":{"line":40,"column":12},"end":{"line":42,"column":13}}],"line":40},"7":{"loc":{"start":{"line":40,"column":16},"end":{"line":40,"column":50}},"type":"binary-expr","locations":[{"start":{"line":40,"column":16},"end":{"line":40,"column":26}},{"start":{"line":40,"column":30},"end":{"line":40,"column":50}}],"line":40},"8":{"loc":{"start":{"line":49,"column":12},"end":{"line":51,"column":13}},"type":"if","locations":[{"start":{"line":49,"column":12},"end":{"line":51,"column":13}},{"start":{"line":49,"column":12},"end":{"line":51,"column":13}}],"line":49},"9":{"loc":{"start":{"line":49,"column":16},"end":{"line":49,"column":57}},"type":"binary-expr","locations":[{"start":{"line":49,"column":16},"end":{"line":49,"column":33}},{"start":{"line":49,"column":37},"end":{"line":49,"column":57}}],"line":49},"10":{"loc":{"start":{"line":53,"column":8},"end":{"line":55,"column":9}},"type":"if","locations":[{"start":{"line":53,"column":8},"end":{"line":55,"column":9}},{"start":{"line":53,"column":8},"end":{"line":55,"column":9}}],"line":53},"11":{"loc":{"start":{"line":53,"column":12},"end":{"line":53,"column":61}},"type":"binary-expr","locations":[{"start":{"line":53,"column":12},"end":{"line":53,"column":31}},{"start":{"line":53,"column":35},"end":{"line":53,"column":61}}],"line":53},"12":{"loc":{"start":{"line":56,"column":8},"end":{"line":58,"column":9}},"type":"if","locations":[{"start":{"line":56,"column":8},"end":{"line":58,"column":9}},{"start":{"line":56,"column":8},"end":{"line":58,"column":9}}],"line":56},"13":{"loc":{"start":{"line":56,"column":12},"end":{"line":56,"column":61}},"type":"binary-expr","locations":[{"start":{"line":56,"column":12},"end":{"line":56,"column":31}},{"start":{"line":56,"column":35},"end":{"line":56,"column":61}}],"line":56},"14":{"loc":{"start":{"line":63,"column":8},"end":{"line":65,"column":9}},"type":"if","locations":[{"start":{"line":63,"column":8},"end":{"line":65,"column":9}},{"start":{"line":63,"column":8},"end":{"line":65,"column":9}}],"line":63},"15":{"loc":{"start":{"line":82,"column":16},"end":{"line":91,"column":17}},"type":"if","locations":[{"start":{"line":82,"column":16},"end":{"line":91,"column":17}},{"start":{"line":82,"column":16},"end":{"line":91,"column":17}}],"line":82},"16":{"loc":{"start":{"line":101,"column":23},"end":{"line":103,"column":65}},"type":"binary-expr","locations":[{"start":{"line":101,"column":23},"end":{"line":101,"column":67}},{"start":{"line":102,"column":23},"end":{"line":102,"column":63}},{"start":{"line":103,"column":23},"end":{"line":103,"column":65}}],"line":101},"17":{"loc":{"start":{"line":105,"column":28},"end":{"line":105,"column":64}},"type":"cond-expr","locations":[{"start":{"line":105,"column":41},"end":{"line":105,"column":59}},{"start":{"line":105,"column":62},"end":{"line":105,"column":64}}],"line":105},"18":{"loc":{"start":{"line":108,"column":16},"end":{"line":110,"column":17}},"type":"if","locations":[{"start":{"line":108,"column":16},"end":{"line":110,"column":17}},{"start":{"line":108,"column":16},"end":{"line":110,"column":17}}],"line":108},"19":{"loc":{"start":{"line":127,"column":8},"end":{"line":129,"column":9}},"type":"if","locations":[{"start":{"line":127,"column":8},"end":{"line":129,"column":9}},{"start":{"line":127,"column":8},"end":{"line":129,"column":9}}],"line":127},"20":{"loc":{"start":{"line":127,"column":12},"end":{"line":127,"column":58}},"type":"binary-expr","locations":[{"start":{"line":127,"column":12},"end":{"line":127,"column":32}},{"start":{"line":127,"column":36},"end":{"line":127,"column":58}}],"line":127},"21":{"loc":{"start":{"line":133,"column":8},"end":{"line":139,"column":9}},"type":"if","locations":[{"start":{"line":133,"column":8},"end":{"line":139,"column":9}},{"start":{"line":133,"column":8},"end":{"line":139,"column":9}}],"line":133},"22":{"loc":{"start":{"line":135,"column":16},"end":{"line":137,"column":17}},"type":"if","locations":[{"start":{"line":135,"column":16},"end":{"line":137,"column":17}},{"start":{"line":135,"column":16},"end":{"line":137,"column":17}}],"line":135},"23":{"loc":{"start":{"line":140,"column":8},"end":{"line":146,"column":9}},"type":"if","locations":[{"start":{"line":140,"column":8},"end":{"line":146,"column":9}},{"start":{"line":140,"column":8},"end":{"line":146,"column":9}}],"line":140},"24":{"loc":{"start":{"line":142,"column":16},"end":{"line":144,"column":17}},"type":"if","locations":[{"start":{"line":142,"column":16},"end":{"line":144,"column":17}},{"start":{"line":142,"column":16},"end":{"line":144,"column":17}}],"line":142}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":8,"6":8,"7":8,"8":8,"9":8,"10":8,"11":8,"12":8,"13":8,"14":8,"15":8,"16":11,"17":11,"18":108,"19":11,"20":0,"21":11,"22":11,"23":11,"24":11,"25":3,"26":11,"27":2,"28":9,"29":0,"30":9,"31":9,"32":9,"33":9,"34":9,"35":9,"36":9,"37":3,"38":8,"39":1,"40":7,"41":0,"42":7,"43":7,"44":7,"45":7,"46":0,"47":7,"48":9,"49":9,"50":9,"51":11,"52":11,"53":15,"54":15,"55":15,"56":90,"57":75,"58":75,"59":75,"60":11,"61":8,"62":8,"63":8,"64":47,"65":6,"66":47,"67":47,"68":47,"69":59,"70":58,"71":47,"72":47,"73":11,"74":8,"75":23,"76":23,"77":23,"78":46,"79":23,"80":0,"81":23,"82":23,"83":23,"84":23,"85":2,"86":12,"87":12,"88":23,"89":21,"90":126,"91":126,"92":23,"93":1,"94":23,"95":138,"96":23,"97":1},"f":{"0":8,"1":8,"2":108,"3":7,"4":7,"5":9,"6":11,"7":15,"8":8,"9":47,"10":6,"11":59,"12":11,"13":23,"14":23,"15":46,"16":12,"17":126,"18":1,"19":138},"b":{"0":[8,0],"1":[14,11,0],"2":[0,11],"3":[3,8],"4":[2,9],"5":[11,3],"6":[0,9],"7":[9,1],"8":[3,6],"9":[9,3],"10":[1,7],"11":[8,1],"12":[0,7],"13":[7,0],"14":[0,7],"15":[75,15],"16":[6,6,5],"17":[1,46],"18":[58,1],"19":[0,23],"20":[23,23],"21":[2,21],"22":[12,0],"23":[21,2],"24":[126,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/move-energy-prompt-resolver.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/move-energy-prompt-resolver.ts"],"names":[],"mappings":"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","sourcesContent":["import { Player, State, Action, ResolvePromptAction, Prompt, StateUtils,\n  PlayerType, CardList, Card, CardTarget, MoveEnergyPrompt, CardTransfer } from '../../game';\nimport { PromptResolver } from './prompt-resolver';\nimport { deepClone } from '../../utils/utils';\n\ninterface TransferItem {\n  fromItem: FromItem;\n  toCardList: CardList;\n  to: CardTarget;\n  score: number;\n}\n\ninterface TargetList {\n  cardList: CardList;\n  target: CardTarget;\n}\n\ninterface FromItem {\n  fromCardList: CardList;\n  from: CardTarget;\n  card: Card;\n  cardIndex: number;\n}\n\nexport class MoveEnergyPromptResolver extends PromptResolver {\n\n  public resolvePrompt(state: State, player: Player, prompt: Prompt<any>): Action | undefined {\n    if (prompt instanceof MoveEnergyPrompt) {\n      const result = this.getPromptResult(state, prompt);\n      return new ResolvePromptAction(prompt.id, result);\n    }\n  }\n\n  private getPromptResult(state: State, prompt: MoveEnergyPrompt): CardTransfer[] | null {\n    const copy = deepClone(state, [ Card ]);\n    const fromItems = this.buildFromCardItems(copy, prompt);\n\n    const max = prompt.options.max;\n    const min = prompt.options.min;\n    const result: TransferItem[] = [];\n\n    let prevScore = this.getStateScore(state, prompt.playerId);\n    let isNegative = false;\n\n    while (fromItems.length > 0 && (!isNegative || result.length < min)) {\n      const transfers = this.buildTransferItems(copy, prompt, fromItems);\n      transfers.sort((a, b) => b.score - a.score);\n      if (transfers.length === 0) {\n        break;\n      }\n\n      const best = transfers[0];\n      const fromIndex = fromItems.indexOf(best.fromItem);\n\n      fromItems.splice(fromIndex, 1);\n\n      if (best.score < prevScore) {\n        isNegative = true;\n      }\n\n      // Moving any card gives negative score, and we are able to cancel\n      // Don't append any results, just cancel the prompt\n      if (isNegative && prompt.options.allowCancel) {\n        break;\n      }\n\n      // Score is negative, and we already have minimum transfers\n      if (isNegative && result.length >= min) {\n        break;\n      }\n\n      const source = best.fromItem.fromCardList;\n      const target = best.toCardList;\n      const card = best.fromItem.card;\n      source.moveCardTo(card, target);\n      result.push(best);\n      prevScore = best.score;\n\n      if (max !== undefined && result.length >= max) {\n        break;\n      }\n    }\n\n    if (result.length === 0 && prompt.options.allowCancel) {\n      return null;\n    }\n\n    if (result.length < min && prompt.options.allowCancel) {\n      return null;\n    }\n\n    return this.translateItems(state, prompt, result);\n  }\n\n  private translateItems(state: State, prompt: MoveEnergyPrompt, items: TransferItem[]): CardTransfer[] {\n    const player = state.players.find(p => p.id === prompt.playerId);\n    if (player === undefined) {\n      return [];\n    }\n\n    return items.map(item => {\n      const cardList = StateUtils.getTarget(state, player, item.fromItem.from);\n      const card = cardList.cards[item.fromItem.cardIndex];\n      return {\n        from: item.fromItem.from,\n        to: item.to,\n        card\n      };\n    });\n  }\n\n  private buildTransferItems(state: State, prompt: MoveEnergyPrompt, fromCardItems: FromItem[]): TransferItem[] {\n    const results: TransferItem[] = [];\n\n    fromCardItems.forEach(item => {\n      const fromCardList = item.fromCardList;\n      const cardTargets = this.getTargets(state, prompt, prompt.options.blockedTo);\n      for (const cardTarget of cardTargets) {\n        if (cardTarget.cardList !== fromCardList) {\n          fromCardList.moveCardTo(item.card, cardTarget.cardList);\n          results.push({\n            fromItem: item,\n            to: cardTarget.target,\n            toCardList: cardTarget.cardList,\n            score: this.getStateScore(state, prompt.playerId)\n          });\n          cardTarget.cardList.moveCardTo(item.card, fromCardList);\n        }\n      }\n    });\n\n    return results;\n  }\n\n  private buildFromCardItems(state: State, prompt: MoveEnergyPrompt): FromItem[] {\n    const fromCardItems: FromItem[] = [];\n\n    const fromTargets = this.getTargets(state, prompt, prompt.options.blockedFrom);\n    fromTargets.forEach(fromTarget => {\n      const blockedMap = prompt.options.blockedMap.find(b => {\n        return b.source.player === fromTarget.target.player\n          && b.source.slot === fromTarget.target.slot\n          && b.source.index === fromTarget.target.index;\n      });\n      const blocked = blockedMap ? blockedMap.blocked : [];\n      const cardList = new CardList();\n      fromTarget.cardList.cards.forEach((card, index) => {\n        if (!blocked.includes(index)) {\n          cardList.cards.push(card);\n        }\n      });\n      cardList.cards = cardList.filter(prompt.filter);\n      cardList.cards.forEach(card => {\n        fromCardItems.push({\n          fromCardList: fromTarget.cardList,\n          from: fromTarget.target,\n          card: card,\n          cardIndex: fromTarget.cardList.cards.indexOf(card)\n        });\n      });\n    });\n    return fromCardItems;\n  }\n\n  private getTargets(state: State, prompt: MoveEnergyPrompt, blocked: CardTarget[]): TargetList[] {\n    const player = state.players.find(p => p.id === prompt.playerId);\n    const opponent = state.players.find(p => p.id !== prompt.playerId);\n    if (player === undefined || opponent === undefined) {\n      return [];\n    }\n    const hasOpponent = [PlayerType.TOP_PLAYER, PlayerType.ANY].includes(prompt.playerType);\n    const hasPlayer = [PlayerType.BOTTOM_PLAYER, PlayerType.ANY].includes(prompt.playerType);\n    let results: TargetList[] = [];\n    if (hasOpponent) {\n      opponent.forEachPokemon(PlayerType.TOP_PLAYER, (cardList, card, target) => {\n        if (prompt.slots.includes(target.slot)) {\n          results.push({ target, cardList });\n        }\n      });\n    }\n    if (hasPlayer) {\n      player.forEachPokemon(PlayerType.BOTTOM_PLAYER, (cardList, card, target) => {\n        if (prompt.slots.includes(target.slot)) {\n          results.push({ target, cardList });\n        }\n      });\n    }\n\n    const blockedList: CardList[] = blocked.map(b => StateUtils.getTarget(state, player, b));\n    results = results.filter(i => !blockedList.includes(i.cardList));\n    return results;\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"fe74da2a83416f345d261be3640892410f2e8d63","contentHash":"495d3dd702e90e1496cc080ddb0d0575ab70cfa8c355f16fbb708bbe9c699d24"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/order-cards-prompt-resolver.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/order-cards-prompt-resolver.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":42}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":36}},"3":{"start":{"line":5,"column":26},"end":{"line":5,"column":54}},"4":{"start":{"line":6,"column":29},"end":{"line":6,"column":83}},"5":{"start":{"line":9,"column":8},"end":{"line":20,"column":9}},"6":{"start":{"line":10,"column":12},"end":{"line":12,"column":13}},"7":{"start":{"line":11,"column":16},"end":{"line":11,"column":71}},"8":{"start":{"line":13,"column":26},"end":{"line":16,"column":14}},"9":{"start":{"line":14,"column":30},"end":{"line":14,"column":82}},"10":{"start":{"line":15,"column":16},"end":{"line":15,"column":46}},"11":{"start":{"line":17,"column":12},"end":{"line":17,"column":52}},"12":{"start":{"line":17,"column":33},"end":{"line":17,"column":50}},"13":{"start":{"line":18,"column":27},"end":{"line":18,"column":50}},"14":{"start":{"line":18,"column":42},"end":{"line":18,"column":49}},"15":{"start":{"line":19,"column":12},"end":{"line":19,"column":69}},"16":{"start":{"line":23,"column":0},"end":{"line":23,"column":60}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":8,"column":4},"end":{"line":8,"column":5}},"loc":{"start":{"line":8,"column":41},"end":{"line":21,"column":5}},"line":8},"1":{"name":"(anonymous_1)","decl":{"start":{"line":13,"column":49},"end":{"line":13,"column":50}},"loc":{"start":{"line":13,"column":66},"end":{"line":16,"column":13}},"line":13},"2":{"name":"(anonymous_2)","decl":{"start":{"line":17,"column":23},"end":{"line":17,"column":24}},"loc":{"start":{"line":17,"column":33},"end":{"line":17,"column":50}},"line":17},"3":{"name":"(anonymous_3)","decl":{"start":{"line":18,"column":37},"end":{"line":18,"column":38}},"loc":{"start":{"line":18,"column":42},"end":{"line":18,"column":49}},"line":18}},"branchMap":{"0":{"loc":{"start":{"line":9,"column":8},"end":{"line":20,"column":9}},"type":"if","locations":[{"start":{"line":9,"column":8},"end":{"line":20,"column":9}},{"start":{"line":9,"column":8},"end":{"line":20,"column":9}}],"line":9},"1":{"loc":{"start":{"line":10,"column":12},"end":{"line":12,"column":13}},"type":"if","locations":[{"start":{"line":10,"column":12},"end":{"line":12,"column":13}},{"start":{"line":10,"column":12},"end":{"line":12,"column":13}}],"line":10}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":1},"f":{"0":0,"1":0,"2":0,"3":0},"b":{"0":[0,0],"1":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/order-cards-prompt-resolver.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/order-cards-prompt-resolver.ts"],"names":[],"mappings":";;;AAAA,qCAAgF;AAChF,uDAAmD;AACnD,oFAA+E;AAG/E,MAAa,wBAAyB,SAAQ,gCAAc;IAEnD,aAAa,CAAC,KAAY,EAAE,MAAc,EAAE,MAAmB;QACpE,IAAI,MAAM,YAAY,qCAAgB,EAAE;YACtC,IAAI,MAAM,CAAC,OAAO,CAAC,WAAW,EAAE;gBAC9B,OAAO,IAAI,0BAAmB,CAAC,MAAM,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC;aACjD;YAED,MAAM,KAAK,GAAG,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,KAAK,EAAE,EAAE;gBACnD,MAAM,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,KAAK,EAAE,MAAM,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC;gBACnE,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC;YAChC,CAAC,CAAC,CAAC;YAEH,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC;YAExC,MAAM,MAAM,GAAG,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;YACvC,OAAO,IAAI,0BAAmB,CAAC,MAAM,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC;SACnD;IACH,CAAC;CAEF;AApBD,4DAoBC","sourcesContent":["import { Player, State, Action, ResolvePromptAction, Prompt } from '../../game';\nimport { PromptResolver } from './prompt-resolver';\nimport { OrderCardsPrompt } from '../../game/store/prompts/order-cards-prompt';\n\n\nexport class OrderCardsPromptResolver extends PromptResolver {\n\n  public resolvePrompt(state: State, player: Player, prompt: Prompt<any>): Action | undefined {\n    if (prompt instanceof OrderCardsPrompt) {\n      if (prompt.options.allowCancel) {\n        return new ResolvePromptAction(prompt.id, null);\n      }\n\n      const cards = prompt.cards.cards.map((card, index) => {\n        const score = this.stateScore.getCardScore(state, player.id, card);\n        return { card, score, index };\n      });\n\n      cards.sort((a, b) => b.score - a.score);\n\n      const result = cards.map(c => c.index);\n      return new ResolvePromptAction(prompt.id, result);\n    }\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"aa149e30e2945e9563ac8704ebbcc329c8d1ad64","contentHash":"470d7f863861e44f23cd39b66ca8af4507d76cc46e0e796963f5a1ef4dadd543"},"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/select-prompt-resolver.ts":{"path":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/select-prompt-resolver.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":38}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":36}},"3":{"start":{"line":5,"column":26},"end":{"line":5,"column":54}},"4":{"start":{"line":6,"column":24},"end":{"line":6,"column":73}},"5":{"start":{"line":7,"column":23},"end":{"line":7,"column":57}},"6":{"start":{"line":10,"column":8},"end":{"line":13,"column":9}},"7":{"start":{"line":11,"column":27},"end":{"line":11,"column":85}},"8":{"start":{"line":12,"column":12},"end":{"line":12,"column":74}},"9":{"start":{"line":16,"column":23},"end":{"line":16,"column":120}},"10":{"start":{"line":18,"column":8},"end":{"line":22,"column":9}},"11":{"start":{"line":20,"column":52},"end":{"line":20,"column":75}},"12":{"start":{"line":21,"column":12},"end":{"line":21,"column":29}},"13":{"start":{"line":23,"column":25},"end":{"line":23,"column":86}},"14":{"start":{"line":23,"column":55},"end":{"line":23,"column":85}},"15":{"start":{"line":24,"column":21},"end":{"line":24,"column":84}},"16":{"start":{"line":24,"column":42},"end":{"line":24,"column":83}},"17":{"start":{"line":25,"column":26},"end":{"line":25,"column":94}},"18":{"start":{"line":25,"column":47},"end":{"line":25,"column":93}},"19":{"start":{"line":26,"column":8},"end":{"line":28,"column":9}},"20":{"start":{"line":27,"column":12},"end":{"line":27,"column":21}},"21":{"start":{"line":29,"column":8},"end":{"line":29,"column":17}},"22":{"start":{"line":32,"column":0},"end":{"line":32,"column":52}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":9,"column":4},"end":{"line":9,"column":5}},"loc":{"start":{"line":9,"column":41},"end":{"line":14,"column":5}},"line":9},"1":{"name":"(anonymous_1)","decl":{"start":{"line":15,"column":4},"end":{"line":15,"column":5}},"loc":{"start":{"line":15,"column":58},"end":{"line":30,"column":5}},"line":15},"2":{"name":"(anonymous_2)","decl":{"start":{"line":20,"column":34},"end":{"line":20,"column":35}},"loc":{"start":{"line":20,"column":52},"end":{"line":20,"column":75}},"line":20},"3":{"name":"(anonymous_3)","decl":{"start":{"line":23,"column":50},"end":{"line":23,"column":51}},"loc":{"start":{"line":23,"column":55},"end":{"line":23,"column":85}},"line":23},"4":{"name":"(anonymous_4)","decl":{"start":{"line":24,"column":37},"end":{"line":24,"column":38}},"loc":{"start":{"line":24,"column":42},"end":{"line":24,"column":83}},"line":24},"5":{"name":"(anonymous_5)","decl":{"start":{"line":25,"column":42},"end":{"line":25,"column":43}},"loc":{"start":{"line":25,"column":47},"end":{"line":25,"column":93}},"line":25}},"branchMap":{"0":{"loc":{"start":{"line":10,"column":8},"end":{"line":13,"column":9}},"type":"if","locations":[{"start":{"line":10,"column":8},"end":{"line":13,"column":9}},{"start":{"line":10,"column":8},"end":{"line":13,"column":9}}],"line":10},"1":{"loc":{"start":{"line":12,"column":61},"end":{"line":12,"column":72}},"type":"binary-expr","locations":[{"start":{"line":12,"column":61},"end":{"line":12,"column":67}},{"start":{"line":12,"column":71},"end":{"line":12,"column":72}}],"line":12},"2":{"loc":{"start":{"line":18,"column":8},"end":{"line":22,"column":9}},"type":"if","locations":[{"start":{"line":18,"column":8},"end":{"line":22,"column":9}},{"start":{"line":18,"column":8},"end":{"line":22,"column":9}}],"line":18},"3":{"loc":{"start":{"line":18,"column":12},"end":{"line":20,"column":76}},"type":"binary-expr","locations":[{"start":{"line":18,"column":12},"end":{"line":18,"column":84}},{"start":{"line":19,"column":15},"end":{"line":19,"column":53}},{"start":{"line":20,"column":15},"end":{"line":20,"column":76}}],"line":18},"4":{"loc":{"start":{"line":26,"column":8},"end":{"line":28,"column":9}},"type":"if","locations":[{"start":{"line":26,"column":8},"end":{"line":28,"column":9}},{"start":{"line":26,"column":8},"end":{"line":28,"column":9}}],"line":26}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0,0],"4":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/select-prompt-resolver.ts","sources":["/Users/joemyerscough/ptcg-elite/ptcg-server/src/simple-bot/prompt-resolver/select-prompt-resolver.ts"],"names":[],"mappings":";;;AAAA,qCAAsG;AACtG,uDAAmD;AACnD,0EAAsE;AACtE,0DAAsD;AAGtD,MAAa,oBAAqB,SAAQ,gCAAc;IAE/C,aAAa,CAAC,KAAY,EAAE,MAAc,EAAE,MAAmB;QACpE,IAAI,MAAM,YAAY,4BAAY,EAAE;YAClC,MAAM,MAAM,GAAG,IAAI,CAAC,8BAA8B,CAAC,KAAK,EAAE,MAAM,EAAE,MAAM,CAAC,CAAC;YAC1E,OAAO,IAAI,0BAAmB,CAAC,MAAM,CAAC,EAAE,EAAE,MAAM,IAAI,CAAC,CAAC,CAAC;SACxD;IACH,CAAC;IAEO,8BAA8B,CAAC,KAAY,EAAE,MAAc,EAAE,MAAoB;QACvF,MAAM,MAAM,GAAG,CAAE,0BAAW,CAAC,iBAAiB,EAAE,0BAAW,CAAC,sBAAsB,CAAE,CAAC;QAErF,uCAAuC;QACvC,IAAI,MAAM,CAAC,OAAO,KAAK,0BAAW,CAAC,0BAA0B;eACxD,MAAM,CAAC,MAAM,CAAC,MAAM,KAAK,MAAM,CAAC,MAAM;eACtC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,KAAK,EAAE,KAAK,EAAE,EAAE,CAAC,KAAK,KAAK,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE;YAClE,OAAO,SAAS,CAAC;SAClB;QAED,MAAM,QAAQ,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,YAAY,iBAAU,CAAiB,CAAC;QACxF,MAAM,IAAI,GAAG,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,QAAQ,CAAC,eAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;QACtE,MAAM,SAAS,GAAG,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,QAAQ,CAAC,eAAQ,CAAC,SAAS,CAAC,CAAC,CAAC;QAEhF,IAAI,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,EAAE;YACnC,OAAO,CAAC,CAAC;SACV;QAED,OAAO,CAAC,CAAC;IACX,CAAC;CAEF;AA9BD,oDA8BC","sourcesContent":["import { Player, State, Action, ResolvePromptAction, Prompt, EnergyCard, CardType } from '../../game';\nimport { PromptResolver } from './prompt-resolver';\nimport { SelectPrompt } from '../../game/store/prompts/select-prompt';\nimport { GameMessage } from '../../game/game-message';\n\n\nexport class SelectPromptResolver extends PromptResolver {\n\n  public resolvePrompt(state: State, player: Player, prompt: Prompt<any>): Action | undefined {\n    if (prompt instanceof SelectPrompt) {\n      const result = this.handleDiscardAllEnergiesPrompt(state, player, prompt);\n      return new ResolvePromptAction(prompt.id, result || 0);\n    }\n  }\n\n  private handleDiscardAllEnergiesPrompt(state: State, player: Player, prompt: SelectPrompt): number | undefined {\n    const values = [ GameMessage.ALL_FIRE_ENERGIES, GameMessage.ALL_LIGHTNING_ENERGIES ];\n\n    // Different kind of the select message\n    if (prompt.message !== GameMessage.CHOOSE_ENERGIES_TO_DISCARD\n      || prompt.values.length !== values.length\n      || prompt.values.some((value, index) => value !== values[index])) {\n      return undefined;\n    }\n\n    const energies = player.hand.cards.filter(c => c instanceof EnergyCard) as EnergyCard[];\n    const fire = energies.filter(e => e.provides.includes(CardType.FIRE));\n    const lightning = energies.filter(e => e.provides.includes(CardType.LIGHTNING));\n\n    if (lightning.length >= fire.length) {\n      return 1;\n    }\n\n    return 0;\n  }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"795d5fc9324788ac31e1f1b1f522ce2aa475c87c","contentHash":"08835390b137c89a46042b25b13d111a90767106b88f7cd93c5d7f8b90cf8400"}}