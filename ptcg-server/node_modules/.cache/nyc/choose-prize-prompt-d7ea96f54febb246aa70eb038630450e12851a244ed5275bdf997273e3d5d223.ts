"use strict";function cov_29dtncx8ln(){var path="/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/game/store/prompts/choose-prize-prompt.ts";var hash="511358835979443019b72a84ce27476c56105733";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/game/store/prompts/choose-prize-prompt.ts",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:62}},"1":{start:{line:3,column:0},end:{line:3,column:67}},"2":{start:{line:4,column:17},end:{line:4,column:36}},"3":{start:{line:5,column:21},end:{line:5,column:48}},"4":{start:{line:6,column:23},end:{line:6,column:52}},"5":{start:{line:7,column:0},end:{line:7,column:47}},"6":{start:{line:10,column:8},end:{line:10,column:24}},"7":{start:{line:11,column:8},end:{line:11,column:31}},"8":{start:{line:12,column:8},end:{line:12,column:50}},"9":{start:{line:14,column:8},end:{line:17,column:20}},"10":{start:{line:20,column:8},end:{line:22,column:9}},"11":{start:{line:21,column:12},end:{line:21,column:26}},"12":{start:{line:23,column:23},end:{line:23,column:70}},"13":{start:{line:23,column:47},end:{line:23,column:69}},"14":{start:{line:24,column:8},end:{line:26,column:9}},"15":{start:{line:25,column:12},end:{line:25,column:95}},"16":{start:{line:27,column:23},end:{line:27,column:68}},"17":{start:{line:27,column:49},end:{line:27,column:67}},"18":{start:{line:28,column:8},end:{line:28,column:50}},"19":{start:{line:28,column:35},end:{line:28,column:48}},"20":{start:{line:31,column:8},end:{line:33,column:9}},"21":{start:{line:32,column:12},end:{line:32,column:44}},"22":{start:{line:34,column:8},end:{line:36,column:9}},"23":{start:{line:35,column:12},end:{line:35,column:25}},"24":{start:{line:37,column:30},end:{line:39,column:10}},"25":{start:{line:38,column:12},end:{line:38,column:47}},"26":{start:{line:40,column:8},end:{line:42,column:9}},"27":{start:{line:41,column:12},end:{line:41,column:25}},"28":{start:{line:43,column:25},end:{line:43,column:63}},"29":{start:{line:43,column:42},end:{line:43,column:62}},"30":{start:{line:44,column:8},end:{line:46,column:9}},"31":{start:{line:45,column:12},end:{line:45,column:25}},"32":{start:{line:47,column:8},end:{line:47,column:20}},"33":{start:{line:50,column:0},end:{line:50,column:46}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:9,column:4},end:{line:9,column:5}},loc:{start:{line:9,column:44},end:{line:18,column:5}},line:9},"1":{name:"(anonymous_1)",decl:{start:{line:19,column:4},end:{line:19,column:5}},loc:{start:{line:19,column:26},end:{line:29,column:5}},line:19},"2":{name:"(anonymous_2)",decl:{start:{line:23,column:42},end:{line:23,column:43}},loc:{start:{line:23,column:47},end:{line:23,column:69}},line:23},"3":{name:"(anonymous_3)",decl:{start:{line:27,column:44},end:{line:27,column:45}},loc:{start:{line:27,column:49},end:{line:27,column:67}},line:27},"4":{name:"(anonymous_4)",decl:{start:{line:28,column:26},end:{line:28,column:27}},loc:{start:{line:28,column:35},end:{line:28,column:48}},line:28},"5":{name:"(anonymous_5)",decl:{start:{line:30,column:4},end:{line:30,column:5}},loc:{start:{line:30,column:21},end:{line:48,column:5}},line:30},"6":{name:"(anonymous_6)",decl:{start:{line:37,column:42},end:{line:37,column:43}},loc:{start:{line:37,column:56},end:{line:39,column:9}},line:37},"7":{name:"(anonymous_7)",decl:{start:{line:43,column:37},end:{line:43,column:38}},loc:{start:{line:43,column:42},end:{line:43,column:62}},line:43}},branchMap:{"0":{loc:{start:{line:20,column:8},end:{line:22,column:9}},type:"if",locations:[{start:{line:20,column:8},end:{line:22,column:9}},{start:{line:20,column:8},end:{line:22,column:9}}],line:20},"1":{loc:{start:{line:24,column:8},end:{line:26,column:9}},type:"if",locations:[{start:{line:24,column:8},end:{line:26,column:9}},{start:{line:24,column:8},end:{line:26,column:9}}],line:24},"2":{loc:{start:{line:31,column:8},end:{line:33,column:9}},type:"if",locations:[{start:{line:31,column:8},end:{line:33,column:9}},{start:{line:31,column:8},end:{line:33,column:9}}],line:31},"3":{loc:{start:{line:34,column:8},end:{line:36,column:9}},type:"if",locations:[{start:{line:34,column:8},end:{line:36,column:9}},{start:{line:34,column:8},end:{line:36,column:9}}],line:34},"4":{loc:{start:{line:40,column:8},end:{line:42,column:9}},type:"if",locations:[{start:{line:40,column:8},end:{line:42,column:9}},{start:{line:40,column:8},end:{line:42,column:9}}],line:40},"5":{loc:{start:{line:44,column:8},end:{line:46,column:9}},type:"if",locations:[{start:{line:44,column:8},end:{line:46,column:9}},{start:{line:44,column:8},end:{line:46,column:9}}],line:44}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0]},inputSourceMap:{version:3,file:"/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/game/store/prompts/choose-prize-prompt.ts",sources:["/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/game/store/prompts/choose-prize-prompt.ts"],names:[],mappings:";;;AACA,qCAAkC;AAElC,iDAA6C;AAC7C,qDAAiD;AAEpC,QAAA,qBAAqB,GAAG,cAAc,CAAC;AAOpD,MAAa,iBAAkB,SAAQ,eAAkB;IAMvD,YACE,QAAgB,EACT,OAAoB,EAC3B,OAAqC;QAErC,KAAK,CAAC,QAAQ,CAAC,CAAC;QAHT,YAAO,GAAP,OAAO,CAAa;QANpB,SAAI,GAAW,6BAAqB,CAAC;QAW5C,kBAAkB;QAClB,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE;YAC/B,KAAK,EAAE,CAAC;YACR,WAAW,EAAE,KAAK;SACnB,EAAE,OAAO,CAAC,CAAC;IACd,CAAC;IAEM,MAAM,CAAC,MAAuB,EAAE,KAAY;QACjD,IAAI,MAAM,KAAK,IAAI,EAAE;YACnB,OAAO,MAAM,CAAC;SACf;QACD,MAAM,MAAM,GAAG,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,KAAK,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC/D,IAAI,MAAM,KAAK,SAAS,EAAE;YACxB,MAAM,IAAI,sBAAS,CAAC,0BAAW,CAAC,qBAAqB,CAAC,CAAC;SACxD;QACD,MAAM,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;QAC7D,OAAO,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC;IAC5C,CAAC;IAEM,QAAQ,CAAC,MAAyB;QACvC,IAAI,MAAM,KAAK,IAAI,EAAE;YACnB,OAAO,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC;SACjC;QACD,IAAI,MAAM,CAAC,MAAM,KAAK,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE;YACxC,OAAO,KAAK,CAAC;SACd;QACD,MAAM,aAAa,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,KAAK,EAAE,EAAE;YAC7C,OAAO,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,KAAK,CAAC;QACrC,CAAC,CAAC,CAAC;QACH,IAAI,aAAa,EAAE;YACjB,OAAO,KAAK,CAAC;SACd;QACD,MAAM,QAAQ,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC;QACxD,IAAI,QAAQ,EAAE;YACZ,OAAO,KAAK,CAAC;SACd;QACD,OAAO,IAAI,CAAC;IACd,CAAC;CAEF;AApDD,8CAoDC",sourcesContent:["import { CardList } from '../state/card-list';\nimport { Prompt } from './prompt';\nimport { State } from '../state/state';\nimport { GameError } from '../../game-error';\nimport { GameMessage } from '../../game-message';\n\nexport const ChoosePrizePromptType = 'Choose prize';\n\nexport interface ChoosePrizeOptions {\n  count: number;\n  allowCancel: boolean;\n}\n\nexport class ChoosePrizePrompt extends Prompt<CardList[]> {\n\n  readonly type: string = ChoosePrizePromptType;\n\n  public options: ChoosePrizeOptions;\n\n  constructor(\n    playerId: number,\n    public message: GameMessage,\n    options?: Partial<ChoosePrizeOptions>\n  ) {\n    super(playerId);\n\n    // Default options\n    this.options = Object.assign({}, {\n      count: 1,\n      allowCancel: false\n    }, options);\n  }\n\n  public decode(result: number[] | null, state: State): CardList[] | null {\n    if (result === null) {\n      return result;\n    }\n    const player = state.players.find(p => p.id === this.playerId);\n    if (player === undefined) {\n      throw new GameError(GameMessage.INVALID_PROMPT_RESULT);\n    }\n    const prizes = player.prizes.filter(p => p.cards.length > 0);\n    return result.map(index => prizes[index]);\n  }\n\n  public validate(result: CardList[] | null): boolean {\n    if (result === null) {\n      return this.options.allowCancel;\n    }\n    if (result.length !== this.options.count) {\n      return false;\n    }\n    const hasDuplicates = result.some((p, index) => {\n      return result.indexOf(p) !== index;\n    });\n    if (hasDuplicates) {\n      return false;\n    }\n    const hasEmpty = result.some(p => p.cards.length === 0);\n    if (hasEmpty) {\n      return false;\n    }\n    return true;\n  }\n\n}\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"511358835979443019b72a84ce27476c56105733"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_29dtncx8ln=function(){return actualCoverage;};}return actualCoverage;}cov_29dtncx8ln();cov_29dtncx8ln().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_29dtncx8ln().s[1]++;exports.ChoosePrizePrompt=exports.ChoosePrizePromptType=void 0;const prompt_1=(cov_29dtncx8ln().s[2]++,require("./prompt"));const game_error_1=(cov_29dtncx8ln().s[3]++,require("../../game-error"));const game_message_1=(cov_29dtncx8ln().s[4]++,require("../../game-message"));cov_29dtncx8ln().s[5]++;exports.ChoosePrizePromptType='Choose prize';class ChoosePrizePrompt extends(prompt_1.Prompt){constructor(playerId,message,options){cov_29dtncx8ln().f[0]++;cov_29dtncx8ln().s[6]++;super(playerId);cov_29dtncx8ln().s[7]++;this.message=message;cov_29dtncx8ln().s[8]++;this.type=exports.ChoosePrizePromptType;// Default options
cov_29dtncx8ln().s[9]++;this.options=Object.assign({},{count:1,allowCancel:false},options);}decode(result,state){cov_29dtncx8ln().f[1]++;cov_29dtncx8ln().s[10]++;if(result===null){cov_29dtncx8ln().b[0][0]++;cov_29dtncx8ln().s[11]++;return result;}else{cov_29dtncx8ln().b[0][1]++;}const player=(cov_29dtncx8ln().s[12]++,state.players.find(p=>{cov_29dtncx8ln().f[2]++;cov_29dtncx8ln().s[13]++;return p.id===this.playerId;}));cov_29dtncx8ln().s[14]++;if(player===undefined){cov_29dtncx8ln().b[1][0]++;cov_29dtncx8ln().s[15]++;throw new game_error_1.GameError(game_message_1.GameMessage.INVALID_PROMPT_RESULT);}else{cov_29dtncx8ln().b[1][1]++;}const prizes=(cov_29dtncx8ln().s[16]++,player.prizes.filter(p=>{cov_29dtncx8ln().f[3]++;cov_29dtncx8ln().s[17]++;return p.cards.length>0;}));cov_29dtncx8ln().s[18]++;return result.map(index=>{cov_29dtncx8ln().f[4]++;cov_29dtncx8ln().s[19]++;return prizes[index];});}validate(result){cov_29dtncx8ln().f[5]++;cov_29dtncx8ln().s[20]++;if(result===null){cov_29dtncx8ln().b[2][0]++;cov_29dtncx8ln().s[21]++;return this.options.allowCancel;}else{cov_29dtncx8ln().b[2][1]++;}cov_29dtncx8ln().s[22]++;if(result.length!==this.options.count){cov_29dtncx8ln().b[3][0]++;cov_29dtncx8ln().s[23]++;return false;}else{cov_29dtncx8ln().b[3][1]++;}const hasDuplicates=(cov_29dtncx8ln().s[24]++,result.some((p,index)=>{cov_29dtncx8ln().f[6]++;cov_29dtncx8ln().s[25]++;return result.indexOf(p)!==index;}));cov_29dtncx8ln().s[26]++;if(hasDuplicates){cov_29dtncx8ln().b[4][0]++;cov_29dtncx8ln().s[27]++;return false;}else{cov_29dtncx8ln().b[4][1]++;}const hasEmpty=(cov_29dtncx8ln().s[28]++,result.some(p=>{cov_29dtncx8ln().f[7]++;cov_29dtncx8ln().s[29]++;return p.cards.length===0;}));cov_29dtncx8ln().s[30]++;if(hasEmpty){cov_29dtncx8ln().b[5][0]++;cov_29dtncx8ln().s[31]++;return false;}else{cov_29dtncx8ln().b[5][1]++;}cov_29dtncx8ln().s[32]++;return true;}}cov_29dtncx8ln().s[33]++;exports.ChoosePrizePrompt=ChoosePrizePrompt;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2pvZW15ZXJzY291Z2gvRG9jdW1lbnRzL0dpdEh1Yi9wdGNnLWVwc2QvcHRjZy1zZXJ2ZXIvc3JjL2dhbWUvc3RvcmUvcHJvbXB0cy9jaG9vc2UtcHJpemUtcHJvbXB0LnRzIiwic291cmNlcyI6WyIvVXNlcnMvam9lbXllcnNjb3VnaC9Eb2N1bWVudHMvR2l0SHViL3B0Y2ctZXBzZC9wdGNnLXNlcnZlci9zcmMvZ2FtZS9zdG9yZS9wcm9tcHRzL2Nob29zZS1wcml6ZS1wcm9tcHQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQ0EscUNBQWtDO0FBRWxDLGlEQUE2QztBQUM3QyxxREFBaUQ7QUFFcEMsUUFBQSxxQkFBcUIsR0FBRyxjQUFjLENBQUM7QUFPcEQsTUFBYSxpQkFBa0IsU0FBUSxlQUFrQjtJQU12RCxZQUNFLFFBQWdCLEVBQ1QsT0FBb0IsRUFDM0IsT0FBcUM7UUFFckMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBSFQsWUFBTyxHQUFQLE9BQU8sQ0FBYTtRQU5wQixTQUFJLEdBQVcsNkJBQXFCLENBQUM7UUFXNUMsa0JBQWtCO1FBQ2xCLElBQUksQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUU7WUFDL0IsS0FBSyxFQUFFLENBQUM7WUFDUixXQUFXLEVBQUUsS0FBSztTQUNuQixFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQ2QsQ0FBQztJQUVNLE1BQU0sQ0FBQyxNQUF1QixFQUFFLEtBQVk7UUFDakQsSUFBSSxNQUFNLEtBQUssSUFBSSxFQUFFO1lBQ25CLE9BQU8sTUFBTSxDQUFDO1NBQ2Y7UUFDRCxNQUFNLE1BQU0sR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQy9ELElBQUksTUFBTSxLQUFLLFNBQVMsRUFBRTtZQUN4QixNQUFNLElBQUksc0JBQVMsQ0FBQywwQkFBVyxDQUFDLHFCQUFxQixDQUFDLENBQUM7U0FDeEQ7UUFDRCxNQUFNLE1BQU0sR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQzdELE9BQU8sTUFBTSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO0lBQzVDLENBQUM7SUFFTSxRQUFRLENBQUMsTUFBeUI7UUFDdkMsSUFBSSxNQUFNLEtBQUssSUFBSSxFQUFFO1lBQ25CLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUM7U0FDakM7UUFDRCxJQUFJLE1BQU0sQ0FBQyxNQUFNLEtBQUssSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUU7WUFDeEMsT0FBTyxLQUFLLENBQUM7U0FDZDtRQUNELE1BQU0sYUFBYSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLEVBQUU7WUFDN0MsT0FBTyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxLQUFLLEtBQUssQ0FBQztRQUNyQyxDQUFDLENBQUMsQ0FBQztRQUNILElBQUksYUFBYSxFQUFFO1lBQ2pCLE9BQU8sS0FBSyxDQUFDO1NBQ2Q7UUFDRCxNQUFNLFFBQVEsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxNQUFNLEtBQUssQ0FBQyxDQUFDLENBQUM7UUFDeEQsSUFBSSxRQUFRLEVBQUU7WUFDWixPQUFPLEtBQUssQ0FBQztTQUNkO1FBQ0QsT0FBTyxJQUFJLENBQUM7SUFDZCxDQUFDO0NBRUY7QUFwREQsOENBb0RDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ2FyZExpc3QgfSBmcm9tICcuLi9zdGF0ZS9jYXJkLWxpc3QnO1xuaW1wb3J0IHsgUHJvbXB0IH0gZnJvbSAnLi9wcm9tcHQnO1xuaW1wb3J0IHsgU3RhdGUgfSBmcm9tICcuLi9zdGF0ZS9zdGF0ZSc7XG5pbXBvcnQgeyBHYW1lRXJyb3IgfSBmcm9tICcuLi8uLi9nYW1lLWVycm9yJztcbmltcG9ydCB7IEdhbWVNZXNzYWdlIH0gZnJvbSAnLi4vLi4vZ2FtZS1tZXNzYWdlJztcblxuZXhwb3J0IGNvbnN0IENob29zZVByaXplUHJvbXB0VHlwZSA9ICdDaG9vc2UgcHJpemUnO1xuXG5leHBvcnQgaW50ZXJmYWNlIENob29zZVByaXplT3B0aW9ucyB7XG4gIGNvdW50OiBudW1iZXI7XG4gIGFsbG93Q2FuY2VsOiBib29sZWFuO1xufVxuXG5leHBvcnQgY2xhc3MgQ2hvb3NlUHJpemVQcm9tcHQgZXh0ZW5kcyBQcm9tcHQ8Q2FyZExpc3RbXT4ge1xuXG4gIHJlYWRvbmx5IHR5cGU6IHN0cmluZyA9IENob29zZVByaXplUHJvbXB0VHlwZTtcblxuICBwdWJsaWMgb3B0aW9uczogQ2hvb3NlUHJpemVPcHRpb25zO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHBsYXllcklkOiBudW1iZXIsXG4gICAgcHVibGljIG1lc3NhZ2U6IEdhbWVNZXNzYWdlLFxuICAgIG9wdGlvbnM/OiBQYXJ0aWFsPENob29zZVByaXplT3B0aW9ucz5cbiAgKSB7XG4gICAgc3VwZXIocGxheWVySWQpO1xuXG4gICAgLy8gRGVmYXVsdCBvcHRpb25zXG4gICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwge1xuICAgICAgY291bnQ6IDEsXG4gICAgICBhbGxvd0NhbmNlbDogZmFsc2VcbiAgICB9LCBvcHRpb25zKTtcbiAgfVxuXG4gIHB1YmxpYyBkZWNvZGUocmVzdWx0OiBudW1iZXJbXSB8IG51bGwsIHN0YXRlOiBTdGF0ZSk6IENhcmRMaXN0W10gfCBudWxsIHtcbiAgICBpZiAocmVzdWx0ID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBjb25zdCBwbGF5ZXIgPSBzdGF0ZS5wbGF5ZXJzLmZpbmQocCA9PiBwLmlkID09PSB0aGlzLnBsYXllcklkKTtcbiAgICBpZiAocGxheWVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBHYW1lRXJyb3IoR2FtZU1lc3NhZ2UuSU5WQUxJRF9QUk9NUFRfUkVTVUxUKTtcbiAgICB9XG4gICAgY29uc3QgcHJpemVzID0gcGxheWVyLnByaXplcy5maWx0ZXIocCA9PiBwLmNhcmRzLmxlbmd0aCA+IDApO1xuICAgIHJldHVybiByZXN1bHQubWFwKGluZGV4ID0+IHByaXplc1tpbmRleF0pO1xuICB9XG5cbiAgcHVibGljIHZhbGlkYXRlKHJlc3VsdDogQ2FyZExpc3RbXSB8IG51bGwpOiBib29sZWFuIHtcbiAgICBpZiAocmVzdWx0ID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gdGhpcy5vcHRpb25zLmFsbG93Q2FuY2VsO1xuICAgIH1cbiAgICBpZiAocmVzdWx0Lmxlbmd0aCAhPT0gdGhpcy5vcHRpb25zLmNvdW50KSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IGhhc0R1cGxpY2F0ZXMgPSByZXN1bHQuc29tZSgocCwgaW5kZXgpID0+IHtcbiAgICAgIHJldHVybiByZXN1bHQuaW5kZXhPZihwKSAhPT0gaW5kZXg7XG4gICAgfSk7XG4gICAgaWYgKGhhc0R1cGxpY2F0ZXMpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgaGFzRW1wdHkgPSByZXN1bHQuc29tZShwID0+IHAuY2FyZHMubGVuZ3RoID09PSAwKTtcbiAgICBpZiAoaGFzRW1wdHkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxufVxuIl19
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qb2VteWVyc2NvdWdoL0RvY3VtZW50cy9HaXRIdWIvcHRjZy1lcHNkL3B0Y2ctc2VydmVyL3NyYy9nYW1lL3N0b3JlL3Byb21wdHMvY2hvb3NlLXByaXplLXByb21wdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoidWlSQTZCTTttUUE1Qk4sS0FBQSxDQUFBLFFBQUEsMEJBQUEsT0FBQSxDQUFBLFVBQUEsQ0FBQSxDQUFBLENBRUEsS0FBQSxDQUFBLFlBQUEsMEJBQUEsT0FBQSxDQUFBLGtCQUFBLENBQUEsQ0FBQSxDQUNBLEtBQUEsQ0FBQSxjQUFBLDBCQUFBLE9BQUEsQ0FBQSxvQkFBQSxDQUFBLENBQUEsQyx3QkFFYSxPQUFBLENBQUEscUJBQUEsQ0FBd0IsY0FBeEIsQ0FPYixLQUFhLENBQUEsaUJBQWIsU0FBdUMsUUFBQSxDQUFBLE1BQXZDLENBQXlELENBTXZELFdBQUEsQ0FDRSxRQURGLENBRVMsT0FGVCxDQUdFLE9BSEYsQ0FHdUMsaURBRXJDLE1BQU0sUUFBTixFQUZxQyx3QkFEOUIsS0FBQSxPQUFBLENBQUEsT0FBQSxDQUM4Qix3QkFQOUIsS0FBQSxJQUFBLENBQWUsT0FBQSxDQUFBLHFCQUFmLENBV1A7QUFKcUMsd0JBS3JDLEtBQUssT0FBTCxDQUFlLE1BQU0sQ0FBQyxNQUFQLENBQWMsRUFBZCxDQUFrQixDQUMvQixLQUFLLENBQUUsQ0FEd0IsQ0FFL0IsV0FBVyxDQUFFLEtBRmtCLENBQWxCLENBR1osT0FIWSxDQUFmLENBSUQsQ0FFTSxNQUFNLENBQUMsTUFBRCxDQUEwQixLQUExQixDQUFzQyxrREFDakQsR0FBSSxNQUFNLEdBQUssSUFBZixDQUFxQixxREFDbkIsTUFBTyxDQUFBLE1BQVAsQ0FDRCxDQUZELGlDQUdBLEtBQU0sQ0FBQSxNQUFNLDJCQUFHLEtBQUssQ0FBQyxPQUFOLENBQWMsSUFBZCxDQUFtQixDQUFDLEVBQUksd0RBQUEsQ0FBQSxDQUFDLENBQUMsRUFBRixHQUFTLEtBQUssUUFBZCxDQUFzQixDQUE5QyxDQUFILENBQVosQ0FKaUQseUJBS2pELEdBQUksTUFBTSxHQUFLLFNBQWYsQ0FBMEIscURBQ3hCLEtBQU0sSUFBSSxDQUFBLFlBQUEsQ0FBQSxTQUFKLENBQWMsY0FBQSxDQUFBLFdBQUEsQ0FBWSxxQkFBMUIsQ0FBTixDQUNELENBRkQsaUNBR0EsS0FBTSxDQUFBLE1BQU0sMkJBQUcsTUFBTSxDQUFDLE1BQVAsQ0FBYyxNQUFkLENBQXFCLENBQUMsRUFBSSx3REFBQSxDQUFBLENBQUMsQ0FBQyxLQUFGLENBQVEsTUFBUixDQUFpQixDQUFqQixDQUFrQixDQUE1QyxDQUFILENBQVosQ0FSaUQseUJBU2pELE1BQU8sQ0FBQSxNQUFNLENBQUMsR0FBUCxDQUFXLEtBQUssRUFBSSx3REFBQSxDQUFBLE1BQU0sQ0FBQyxLQUFELENBQU4sQ0FBYSxDQUFqQyxDQUFQLENBQ0QsQ0FFTSxRQUFRLENBQUMsTUFBRCxDQUEwQixrREFDdkMsR0FBSSxNQUFNLEdBQUssSUFBZixDQUFxQixxREFDbkIsTUFBTyxNQUFLLE9BQUwsQ0FBYSxXQUFwQixDQUNELENBRkQsaUNBRHVDLHlCQUl2QyxHQUFJLE1BQU0sQ0FBQyxNQUFQLEdBQWtCLEtBQUssT0FBTCxDQUFhLEtBQW5DLENBQTBDLHFEQUN4QyxNQUFPLE1BQVAsQ0FDRCxDQUZELGlDQUdBLEtBQU0sQ0FBQSxhQUFhLDJCQUFHLE1BQU0sQ0FBQyxJQUFQLENBQVksQ0FBQyxDQUFELENBQUksS0FBSixHQUFhLGtEQUM3QyxNQUFPLENBQUEsTUFBTSxDQUFDLE9BQVAsQ0FBZSxDQUFmLElBQXNCLEtBQTdCLENBQ0QsQ0FGcUIsQ0FBSCxDQUFuQixDQVB1Qyx5QkFVdkMsR0FBSSxhQUFKLENBQW1CLHFEQUNqQixNQUFPLE1BQVAsQ0FDRCxDQUZELGlDQUdBLEtBQU0sQ0FBQSxRQUFRLDJCQUFHLE1BQU0sQ0FBQyxJQUFQLENBQVksQ0FBQyxFQUFJLHdEQUFBLENBQUEsQ0FBQyxDQUFDLEtBQUYsQ0FBUSxNQUFSLEdBQW1CLENBQW5CLENBQW9CLENBQXJDLENBQUgsQ0FBZCxDQWJ1Qyx5QkFjdkMsR0FBSSxRQUFKLENBQWMscURBQ1osTUFBTyxNQUFQLENBQ0QsQ0FGRCxpQ0FkdUMseUJBaUJ2QyxNQUFPLEtBQVAsQ0FDRCxDQWxEc0QsQyx5QkFBekQsT0FBQSxDQUFBLGlCQUFBLENBQUEsaUJBQUEsQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENhcmRMaXN0IH0gZnJvbSAnLi4vc3RhdGUvY2FyZC1saXN0JztcbmltcG9ydCB7IFByb21wdCB9IGZyb20gJy4vcHJvbXB0JztcbmltcG9ydCB7IFN0YXRlIH0gZnJvbSAnLi4vc3RhdGUvc3RhdGUnO1xuaW1wb3J0IHsgR2FtZUVycm9yIH0gZnJvbSAnLi4vLi4vZ2FtZS1lcnJvcic7XG5pbXBvcnQgeyBHYW1lTWVzc2FnZSB9IGZyb20gJy4uLy4uL2dhbWUtbWVzc2FnZSc7XG5cbmV4cG9ydCBjb25zdCBDaG9vc2VQcml6ZVByb21wdFR5cGUgPSAnQ2hvb3NlIHByaXplJztcblxuZXhwb3J0IGludGVyZmFjZSBDaG9vc2VQcml6ZU9wdGlvbnMge1xuICBjb3VudDogbnVtYmVyO1xuICBhbGxvd0NhbmNlbDogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNsYXNzIENob29zZVByaXplUHJvbXB0IGV4dGVuZHMgUHJvbXB0PENhcmRMaXN0W10+IHtcblxuICByZWFkb25seSB0eXBlOiBzdHJpbmcgPSBDaG9vc2VQcml6ZVByb21wdFR5cGU7XG5cbiAgcHVibGljIG9wdGlvbnM6IENob29zZVByaXplT3B0aW9ucztcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwbGF5ZXJJZDogbnVtYmVyLFxuICAgIHB1YmxpYyBtZXNzYWdlOiBHYW1lTWVzc2FnZSxcbiAgICBvcHRpb25zPzogUGFydGlhbDxDaG9vc2VQcml6ZU9wdGlvbnM+XG4gICkge1xuICAgIHN1cGVyKHBsYXllcklkKTtcblxuICAgIC8vIERlZmF1bHQgb3B0aW9uc1xuICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIHtcbiAgICAgIGNvdW50OiAxLFxuICAgICAgYWxsb3dDYW5jZWw6IGZhbHNlXG4gICAgfSwgb3B0aW9ucyk7XG4gIH1cblxuICBwdWJsaWMgZGVjb2RlKHJlc3VsdDogbnVtYmVyW10gfCBudWxsLCBzdGF0ZTogU3RhdGUpOiBDYXJkTGlzdFtdIHwgbnVsbCB7XG4gICAgaWYgKHJlc3VsdCA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgY29uc3QgcGxheWVyID0gc3RhdGUucGxheWVycy5maW5kKHAgPT4gcC5pZCA9PT0gdGhpcy5wbGF5ZXJJZCk7XG4gICAgaWYgKHBsYXllciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgR2FtZUVycm9yKEdhbWVNZXNzYWdlLklOVkFMSURfUFJPTVBUX1JFU1VMVCk7XG4gICAgfVxuICAgIGNvbnN0IHByaXplcyA9IHBsYXllci5wcml6ZXMuZmlsdGVyKHAgPT4gcC5jYXJkcy5sZW5ndGggPiAwKTtcbiAgICByZXR1cm4gcmVzdWx0Lm1hcChpbmRleCA9PiBwcml6ZXNbaW5kZXhdKTtcbiAgfVxuXG4gIHB1YmxpYyB2YWxpZGF0ZShyZXN1bHQ6IENhcmRMaXN0W10gfCBudWxsKTogYm9vbGVhbiB7XG4gICAgaWYgKHJlc3VsdCA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5hbGxvd0NhbmNlbDtcbiAgICB9XG4gICAgaWYgKHJlc3VsdC5sZW5ndGggIT09IHRoaXMub3B0aW9ucy5jb3VudCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCBoYXNEdXBsaWNhdGVzID0gcmVzdWx0LnNvbWUoKHAsIGluZGV4KSA9PiB7XG4gICAgICByZXR1cm4gcmVzdWx0LmluZGV4T2YocCkgIT09IGluZGV4O1xuICAgIH0pO1xuICAgIGlmIChoYXNEdXBsaWNhdGVzKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IGhhc0VtcHR5ID0gcmVzdWx0LnNvbWUocCA9PiBwLmNhcmRzLmxlbmd0aCA9PT0gMCk7XG4gICAgaWYgKGhhc0VtcHR5KSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbn1cbiJdfQ==