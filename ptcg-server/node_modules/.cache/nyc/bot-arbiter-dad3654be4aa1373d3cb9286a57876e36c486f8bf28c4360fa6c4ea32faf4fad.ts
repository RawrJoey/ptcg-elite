"use strict";function cov_13hwy7fu02(){var path="/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/game/bots/bot-arbiter.ts";var hash="ea69095dadd9611be1242606e0ab13890e1053b5";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/game/bots/bot-arbiter.ts",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:62}},"1":{start:{line:3,column:0},end:{line:3,column:75}},"2":{start:{line:4,column:27},end:{line:4,column:71}},"3":{start:{line:5,column:25},end:{line:5,column:67}},"4":{start:{line:6,column:32},end:{line:6,column:81}},"5":{start:{line:8,column:0},end:{line:12,column:68}},"6":{start:{line:9,column:4},end:{line:9,column:60}},"7":{start:{line:10,column:4},end:{line:10,column:60}},"8":{start:{line:11,column:4},end:{line:11,column:54}},"9":{start:{line:14,column:0},end:{line:18,column:77}},"10":{start:{line:15,column:4},end:{line:15,column:68}},"11":{start:{line:16,column:4},end:{line:16,column:62}},"12":{start:{line:17,column:4},end:{line:17,column:60}},"13":{start:{line:21,column:8},end:{line:21,column:27}},"14":{start:{line:22,column:8},end:{line:25,column:20}},"15":{start:{line:28,column:23},end:{line:28,column:72}},"16":{start:{line:28,column:47},end:{line:28,column:71}},"17":{start:{line:29,column:8},end:{line:31,column:9}},"18":{start:{line:30,column:12},end:{line:30,column:19}},"19":{start:{line:32,column:8},end:{line:49,column:9}},"20":{start:{line:33,column:25},end:{line:33,column:27}},"21":{start:{line:34,column:12},end:{line:48,column:13}},"22":{start:{line:36,column:20},end:{line:36,column:55}},"23":{start:{line:37,column:20},end:{line:37,column:94}},"24":{start:{line:39,column:20},end:{line:41,column:21}},"25":{start:{line:39,column:33},end:{line:39,column:61}},"26":{start:{line:40,column:24},end:{line:40,column:39}},"27":{start:{line:42,column:20},end:{line:42,column:94}},"28":{start:{line:44,column:20},end:{line:46,column:21}},"29":{start:{line:44,column:33},end:{line:44,column:34}},"30":{start:{line:45,column:24},end:{line:45,column:39}},"31":{start:{line:47,column:20},end:{line:47,column:94}},"32":{start:{line:50,column:8},end:{line:65,column:9}},"33":{start:{line:51,column:12},end:{line:51,column:32}},"34":{start:{line:52,column:25},end:{line:52,column:30}},"35":{start:{line:53,column:12},end:{line:64,column:13}},"36":{start:{line:55,column:20},end:{line:55,column:61}},"37":{start:{line:56,column:20},end:{line:56,column:94}},"38":{start:{line:59,column:20},end:{line:59,column:72}},"39":{start:{line:60,column:20},end:{line:60,column:94}},"40":{start:{line:62,column:20},end:{line:62,column:72}},"41":{start:{line:63,column:20},end:{line:63,column:94}},"42":{start:{line:68,column:20},end:{line:68,column:38}},"43":{start:{line:69,column:22},end:{line:69,column:24}},"44":{start:{line:70,column:8},end:{line:72,column:9}},"45":{start:{line:70,column:21},end:{line:70,column:22}},"46":{start:{line:71,column:12},end:{line:71,column:26}},"47":{start:{line:73,column:8},end:{line:78,column:9}},"48":{start:{line:73,column:21},end:{line:73,column:22}},"49":{start:{line:74,column:29},end:{line:74,column:79}},"50":{start:{line:75,column:24},end:{line:75,column:32}},"51":{start:{line:76,column:12},end:{line:76,column:39}},"52":{start:{line:77,column:12},end:{line:77,column:34}},"53":{start:{line:79,column:8},end:{line:79,column:21}},"54":{start:{line:82,column:0},end:{line:82,column:32}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:8,column:1},end:{line:8,column:2}},loc:{start:{line:8,column:24},end:{line:12,column:1}},line:8},"1":{name:"(anonymous_1)",decl:{start:{line:14,column:1},end:{line:14,column:2}},loc:{start:{line:14,column:27},end:{line:18,column:1}},line:14},"2":{name:"(anonymous_2)",decl:{start:{line:20,column:4},end:{line:20,column:5}},loc:{start:{line:20,column:30},end:{line:26,column:5}},line:20},"3":{name:"(anonymous_3)",decl:{start:{line:27,column:4},end:{line:27,column:5}},loc:{start:{line:27,column:33},end:{line:66,column:5}},line:27},"4":{name:"(anonymous_4)",decl:{start:{line:28,column:42},end:{line:28,column:43}},loc:{start:{line:28,column:47},end:{line:28,column:71}},line:28},"5":{name:"(anonymous_5)",decl:{start:{line:67,column:4},end:{line:67,column:5}},loc:{start:{line:67,column:19},end:{line:80,column:5}},line:67}},branchMap:{"0":{loc:{start:{line:12,column:17},end:{line:12,column:66}},type:"binary-expr",locations:[{start:{line:12,column:17},end:{line:12,column:36}},{start:{line:12,column:41},end:{line:12,column:65}}],line:12},"1":{loc:{start:{line:18,column:20},end:{line:18,column:75}},type:"binary-expr",locations:[{start:{line:18,column:20},end:{line:18,column:42}},{start:{line:18,column:47},end:{line:18,column:74}}],line:18},"2":{loc:{start:{line:20,column:16},end:{line:20,column:28}},type:"default-arg",locations:[{start:{line:20,column:26},end:{line:20,column:28}}],line:20},"3":{loc:{start:{line:29,column:8},end:{line:31,column:9}},type:"if",locations:[{start:{line:29,column:8},end:{line:31,column:9}},{start:{line:29,column:8},end:{line:31,column:9}}],line:29},"4":{loc:{start:{line:32,column:8},end:{line:49,column:9}},type:"if",locations:[{start:{line:32,column:8},end:{line:49,column:9}},{start:{line:32,column:8},end:{line:49,column:9}}],line:32},"5":{loc:{start:{line:34,column:12},end:{line:48,column:13}},type:"switch",locations:[{start:{line:35,column:16},end:{line:37,column:94}},{start:{line:38,column:16},end:{line:42,column:94}},{start:{line:43,column:16},end:{line:47,column:94}}],line:34},"6":{loc:{start:{line:50,column:8},end:{line:65,column:9}},type:"if",locations:[{start:{line:50,column:8},end:{line:65,column:9}},{start:{line:50,column:8},end:{line:65,column:9}}],line:50},"7":{loc:{start:{line:53,column:12},end:{line:64,column:13}},type:"switch",locations:[{start:{line:54,column:16},end:{line:56,column:94}},{start:{line:57,column:16},end:{line:60,column:94}},{start:{line:61,column:16},end:{line:63,column:94}}],line:53},"8":{loc:{start:{line:59,column:29},end:{line:59,column:71}},type:"cond-expr",locations:[{start:{line:59,column:59},end:{line:59,column:63}},{start:{line:59,column:66},end:{line:59,column:71}}],line:59},"9":{loc:{start:{line:62,column:29},end:{line:62,column:71}},type:"cond-expr",locations:[{start:{line:62,column:59},end:{line:62,column:64}},{start:{line:62,column:67},end:{line:62,column:71}}],line:62}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0},b:{"0":[0,0],"1":[0,0],"2":[0],"3":[0,0],"4":[0,0],"5":[0,0,0],"6":[0,0],"7":[0,0,0],"8":[0,0],"9":[0,0]},inputSourceMap:{version:3,file:"/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/game/bots/bot-arbiter.ts",sources:["/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/game/bots/bot-arbiter.ts"],names:[],mappings:"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",sourcesContent:["import { CardList } from '../store/state/card-list';\nimport { CoinFlipPrompt } from '../store/prompts/coin-flip-prompt';\nimport { Prompt } from '../store/prompts/prompt';\nimport { ShuffleDeckPrompt } from '../store/prompts/shuffle-prompt';\nimport { State } from '../store/state/state';\nimport { ResolvePromptAction } from '../store/actions/resolve-prompt-action';\n\nexport enum BotFlipMode {\n  ALL_HEADS,\n  ALL_TAILS,\n  RANDOM\n}\n\nexport enum BotShuffleMode {\n  NO_SHUFFLE,\n  REVERSE,\n  RANDOM\n}\n\nexport interface BotArbiterOptions {\n  flipMode: BotFlipMode,\n  shuffleMode: BotShuffleMode\n}\n\nexport class BotArbiter {\n\n  private options: BotArbiterOptions;\n  private flipCount: number = 0;\n\n  constructor(options: Partial<BotArbiterOptions> = {}) {\n    this.options = Object.assign({\n      flipMode: BotFlipMode.ALL_HEADS,\n      shuffleMode: BotShuffleMode.NO_SHUFFLE\n    }, options);\n  }\n\n  public resolvePrompt(state: State, prompt: Prompt<any>): ResolvePromptAction | undefined {\n    const player = state.players.find(p => p.id === prompt.playerId);\n\n    if (player === undefined) {\n      return;\n    }\n\n    if (prompt instanceof ShuffleDeckPrompt) {\n      let result: number[] = [];\n      switch (this.options.shuffleMode) {\n        case BotShuffleMode.RANDOM:\n          result = this.shuffle(player.deck);\n          return new ResolvePromptAction(prompt.id, result);\n        case BotShuffleMode.REVERSE:\n          for (let i = player.deck.cards.length - 1; i >= 0; i--) {\n            result.push(i);\n          }\n          return new ResolvePromptAction(prompt.id, result);\n        default:\n          for (let i = 0; i < player.deck.cards.length; i++) {\n            result.push(i);\n          }\n          return new ResolvePromptAction(prompt.id, result);\n      }\n    }\n\n    if (prompt instanceof CoinFlipPrompt) {\n      this.flipCount += 1;\n      let result: boolean = false;\n      switch (this.options.flipMode) {\n        case BotFlipMode.RANDOM:\n          result = Math.round(Math.random()) === 0;\n          return new ResolvePromptAction(prompt.id, result);\n        case BotFlipMode.ALL_TAILS:\n          // Every 10th coin is opposite to avoid infinite loops.\n          result = (this.flipCount % 10 === 9) ? true : false;\n          return new ResolvePromptAction(prompt.id, result);\n        default:\n          result = (this.flipCount % 10 === 9) ? false : true;\n          return new ResolvePromptAction(prompt.id, result);\n      }\n    }\n  }\n\n  private shuffle(cards: CardList): number[] {\n    const len = cards.cards.length;\n    const order: number[] = [];\n\n    for (let i = 0; i < len; i++) {\n      order.push(i);\n    }\n\n    for (let i = 0; i < len; i++) {\n      const position = Math.min(len - 1, Math.round(Math.random() * len));\n      const tmp = order[i];\n      order[i] = order[position];\n      order[position] = tmp;\n    }\n\n    return order;\n  }\n\n}\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"ea69095dadd9611be1242606e0ab13890e1053b5"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_13hwy7fu02=function(){return actualCoverage;};}return actualCoverage;}cov_13hwy7fu02();cov_13hwy7fu02().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_13hwy7fu02().s[1]++;exports.BotArbiter=exports.BotShuffleMode=exports.BotFlipMode=void 0;const coin_flip_prompt_1=(cov_13hwy7fu02().s[2]++,require("../store/prompts/coin-flip-prompt"));const shuffle_prompt_1=(cov_13hwy7fu02().s[3]++,require("../store/prompts/shuffle-prompt"));const resolve_prompt_action_1=(cov_13hwy7fu02().s[4]++,require("../store/actions/resolve-prompt-action"));var BotFlipMode;cov_13hwy7fu02().s[5]++;(function(BotFlipMode){cov_13hwy7fu02().f[0]++;cov_13hwy7fu02().s[6]++;BotFlipMode[BotFlipMode["ALL_HEADS"]=0]="ALL_HEADS";cov_13hwy7fu02().s[7]++;BotFlipMode[BotFlipMode["ALL_TAILS"]=1]="ALL_TAILS";cov_13hwy7fu02().s[8]++;BotFlipMode[BotFlipMode["RANDOM"]=2]="RANDOM";})(BotFlipMode=(cov_13hwy7fu02().b[0][0]++,exports.BotFlipMode)||(cov_13hwy7fu02().b[0][1]++,exports.BotFlipMode={}));var BotShuffleMode;cov_13hwy7fu02().s[9]++;(function(BotShuffleMode){cov_13hwy7fu02().f[1]++;cov_13hwy7fu02().s[10]++;BotShuffleMode[BotShuffleMode["NO_SHUFFLE"]=0]="NO_SHUFFLE";cov_13hwy7fu02().s[11]++;BotShuffleMode[BotShuffleMode["REVERSE"]=1]="REVERSE";cov_13hwy7fu02().s[12]++;BotShuffleMode[BotShuffleMode["RANDOM"]=2]="RANDOM";})(BotShuffleMode=(cov_13hwy7fu02().b[1][0]++,exports.BotShuffleMode)||(cov_13hwy7fu02().b[1][1]++,exports.BotShuffleMode={}));class BotArbiter{constructor(options=(cov_13hwy7fu02().b[2][0]++,{})){cov_13hwy7fu02().f[2]++;cov_13hwy7fu02().s[13]++;this.flipCount=0;cov_13hwy7fu02().s[14]++;this.options=Object.assign({flipMode:BotFlipMode.ALL_HEADS,shuffleMode:BotShuffleMode.NO_SHUFFLE},options);}resolvePrompt(state,prompt){cov_13hwy7fu02().f[3]++;const player=(cov_13hwy7fu02().s[15]++,state.players.find(p=>{cov_13hwy7fu02().f[4]++;cov_13hwy7fu02().s[16]++;return p.id===prompt.playerId;}));cov_13hwy7fu02().s[17]++;if(player===undefined){cov_13hwy7fu02().b[3][0]++;cov_13hwy7fu02().s[18]++;return;}else{cov_13hwy7fu02().b[3][1]++;}cov_13hwy7fu02().s[19]++;if(prompt instanceof shuffle_prompt_1.ShuffleDeckPrompt){cov_13hwy7fu02().b[4][0]++;let result=(cov_13hwy7fu02().s[20]++,[]);cov_13hwy7fu02().s[21]++;switch(this.options.shuffleMode){case BotShuffleMode.RANDOM:cov_13hwy7fu02().b[5][0]++;cov_13hwy7fu02().s[22]++;result=this.shuffle(player.deck);cov_13hwy7fu02().s[23]++;return new resolve_prompt_action_1.ResolvePromptAction(prompt.id,result);case BotShuffleMode.REVERSE:cov_13hwy7fu02().b[5][1]++;cov_13hwy7fu02().s[24]++;for(let i=(cov_13hwy7fu02().s[25]++,player.deck.cards.length-1);i>=0;i--){cov_13hwy7fu02().s[26]++;result.push(i);}cov_13hwy7fu02().s[27]++;return new resolve_prompt_action_1.ResolvePromptAction(prompt.id,result);default:cov_13hwy7fu02().b[5][2]++;cov_13hwy7fu02().s[28]++;for(let i=(cov_13hwy7fu02().s[29]++,0);i<player.deck.cards.length;i++){cov_13hwy7fu02().s[30]++;result.push(i);}cov_13hwy7fu02().s[31]++;return new resolve_prompt_action_1.ResolvePromptAction(prompt.id,result);}}else{cov_13hwy7fu02().b[4][1]++;}cov_13hwy7fu02().s[32]++;if(prompt instanceof coin_flip_prompt_1.CoinFlipPrompt){cov_13hwy7fu02().b[6][0]++;cov_13hwy7fu02().s[33]++;this.flipCount+=1;let result=(cov_13hwy7fu02().s[34]++,false);cov_13hwy7fu02().s[35]++;switch(this.options.flipMode){case BotFlipMode.RANDOM:cov_13hwy7fu02().b[7][0]++;cov_13hwy7fu02().s[36]++;result=Math.round(Math.random())===0;cov_13hwy7fu02().s[37]++;return new resolve_prompt_action_1.ResolvePromptAction(prompt.id,result);case BotFlipMode.ALL_TAILS:cov_13hwy7fu02().b[7][1]++;cov_13hwy7fu02().s[38]++;// Every 10th coin is opposite to avoid infinite loops.
result=this.flipCount%10===9?(cov_13hwy7fu02().b[8][0]++,true):(cov_13hwy7fu02().b[8][1]++,false);cov_13hwy7fu02().s[39]++;return new resolve_prompt_action_1.ResolvePromptAction(prompt.id,result);default:cov_13hwy7fu02().b[7][2]++;cov_13hwy7fu02().s[40]++;result=this.flipCount%10===9?(cov_13hwy7fu02().b[9][0]++,false):(cov_13hwy7fu02().b[9][1]++,true);cov_13hwy7fu02().s[41]++;return new resolve_prompt_action_1.ResolvePromptAction(prompt.id,result);}}else{cov_13hwy7fu02().b[6][1]++;}}shuffle(cards){cov_13hwy7fu02().f[5]++;const len=(cov_13hwy7fu02().s[42]++,cards.cards.length);const order=(cov_13hwy7fu02().s[43]++,[]);cov_13hwy7fu02().s[44]++;for(let i=(cov_13hwy7fu02().s[45]++,0);i<len;i++){cov_13hwy7fu02().s[46]++;order.push(i);}cov_13hwy7fu02().s[47]++;for(let i=(cov_13hwy7fu02().s[48]++,0);i<len;i++){const position=(cov_13hwy7fu02().s[49]++,Math.min(len-1,Math.round(Math.random()*len)));const tmp=(cov_13hwy7fu02().s[50]++,order[i]);cov_13hwy7fu02().s[51]++;order[i]=order[position];cov_13hwy7fu02().s[52]++;order[position]=tmp;}cov_13hwy7fu02().s[53]++;return order;}}cov_13hwy7fu02().s[54]++;exports.BotArbiter=BotArbiter;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2pvZW15ZXJzY291Z2gvRG9jdW1lbnRzL0dpdEh1Yi9wdGNnLWVwc2QvcHRjZy1zZXJ2ZXIvc3JjL2dhbWUvYm90cy9ib3QtYXJiaXRlci50cyIsInNvdXJjZXMiOlsiL1VzZXJzL2pvZW15ZXJzY291Z2gvRG9jdW1lbnRzL0dpdEh1Yi9wdGNnLWVwc2QvcHRjZy1zZXJ2ZXIvc3JjL2dhbWUvYm90cy9ib3QtYXJiaXRlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFDQSx3RUFBbUU7QUFFbkUsb0VBQW9FO0FBRXBFLGtGQUE2RTtBQUU3RSxJQUFZLFdBSVg7QUFKRCxXQUFZLFdBQVc7SUFDckIsdURBQVMsQ0FBQTtJQUNULHVEQUFTLENBQUE7SUFDVCxpREFBTSxDQUFBO0FBQ1IsQ0FBQyxFQUpXLFdBQVcsR0FBWCxtQkFBVyxLQUFYLG1CQUFXLFFBSXRCO0FBRUQsSUFBWSxjQUlYO0FBSkQsV0FBWSxjQUFjO0lBQ3hCLCtEQUFVLENBQUE7SUFDVix5REFBTyxDQUFBO0lBQ1AsdURBQU0sQ0FBQTtBQUNSLENBQUMsRUFKVyxjQUFjLEdBQWQsc0JBQWMsS0FBZCxzQkFBYyxRQUl6QjtBQU9ELE1BQWEsVUFBVTtJQUtyQixZQUFZLFVBQXNDLEVBQUU7UUFGNUMsY0FBUyxHQUFXLENBQUMsQ0FBQztRQUc1QixJQUFJLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUM7WUFDM0IsUUFBUSxFQUFFLFdBQVcsQ0FBQyxTQUFTO1lBQy9CLFdBQVcsRUFBRSxjQUFjLENBQUMsVUFBVTtTQUN2QyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQ2QsQ0FBQztJQUVNLGFBQWEsQ0FBQyxLQUFZLEVBQUUsTUFBbUI7UUFDcEQsTUFBTSxNQUFNLEdBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUVqRSxJQUFJLE1B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SUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDcEUsTUFBTSxHQUFHLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3JCLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDM0IsS0FBSyxDQUFDLFFBQVEsQ0FBQyxHQUFHLEdBQUcsQ0FBQztTQUN2QjtRQUVELE9BQU8sS0FBSyxDQUFDO0lBQ2YsQ0FBQztDQUVGO0FBMUVELGdDQTBFQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENhcmRMaXN0IH0gZnJvbSAnLi4vc3RvcmUvc3RhdGUvY2FyZC1saXN0JztcbmltcG9ydCB7IENvaW5GbGlwUHJvbXB0IH0gZnJvbSAnLi4vc3RvcmUvcHJvbXB0cy9jb2luLWZsaXAtcHJvbXB0JztcbmltcG9ydCB7IFByb21wdCB9IGZyb20gJy4uL3N0b3JlL3Byb21wdHMvcHJvbXB0JztcbmltcG9ydCB7IFNodWZmbGVEZWNrUHJvbXB0IH0gZnJvbSAnLi4vc3RvcmUvcHJvbXB0cy9zaHVmZmxlLXByb21wdCc7XG5pbXBvcnQgeyBTdGF0ZSB9IGZyb20gJy4uL3N0b3JlL3N0YXRlL3N0YXRlJztcbmltcG9ydCB7IFJlc29sdmVQcm9tcHRBY3Rpb24gfSBmcm9tICcuLi9zdG9yZS9hY3Rpb25zL3Jlc29sdmUtcHJvbXB0LWFjdGlvbic7XG5cbmV4cG9ydCBlbnVtIEJvdEZsaXBNb2RlIHtcbiAgQUxMX0hFQURTLFxuICBBTExfVEFJTFMsXG4gIFJBTkRPTVxufVxuXG5leHBvcnQgZW51bSBCb3RTaHVmZmxlTW9kZSB7XG4gIE5PX1NIVUZGTEUsXG4gIFJFVkVSU0UsXG4gIFJBTkRPTVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJvdEFyYml0ZXJPcHRpb25zIHtcbiAgZmxpcE1vZGU6IEJvdEZsaXBNb2RlLFxuICBzaHVmZmxlTW9kZTogQm90U2h1ZmZsZU1vZGVcbn1cblxuZXhwb3J0IGNsYXNzIEJvdEFyYml0ZXIge1xuXG4gIHByaXZhdGUgb3B0aW9uczogQm90QXJiaXRlck9wdGlvbnM7XG4gIHByaXZhdGUgZmxpcENvdW50OiBudW1iZXIgPSAwO1xuXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnM6IFBhcnRpYWw8Qm90QXJiaXRlck9wdGlvbnM+ID0ge30pIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHtcbiAgICAgIGZsaXBNb2RlOiBCb3RGbGlwTW9kZS5BTExfSEVBRFMsXG4gICAgICBzaHVmZmxlTW9kZTogQm90U2h1ZmZsZU1vZGUuTk9fU0hVRkZMRVxuICAgIH0sIG9wdGlvbnMpO1xuICB9XG5cbiAgcHVibGljIHJlc29sdmVQcm9tcHQoc3RhdGU6IFN0YXRlLCBwcm9tcHQ6IFByb21wdDxhbnk+KTogUmVzb2x2ZVByb21wdEFjdGlvbiB8IHVuZGVmaW5lZCB7XG4gICAgY29uc3QgcGxheWVyID0gc3RhdGUucGxheWVycy5maW5kKHAgPT4gcC5pZCA9PT0gcHJvbXB0LnBsYXllcklkKTtcblxuICAgIGlmIChwbGF5ZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChwcm9tcHQgaW5zdGFuY2VvZiBTaHVmZmxlRGVja1Byb21wdCkge1xuICAgICAgbGV0IHJlc3VsdDogbnVtYmVyW10gPSBbXTtcbiAgICAgIHN3aXRjaCAodGhpcy5vcHRpb25zLnNodWZmbGVNb2RlKSB7XG4gICAgICAgIGNhc2UgQm90U2h1ZmZsZU1vZGUuUkFORE9NOlxuICAgICAgICAgIHJlc3VsdCA9IHRoaXMuc2h1ZmZsZShwbGF5ZXIuZGVjayk7XG4gICAgICAgICAgcmV0dXJuIG5ldyBSZXNvbHZlUHJvbXB0QWN0aW9uKHByb21wdC5pZCwgcmVzdWx0KTtcbiAgICAgICAgY2FzZSBCb3RTaHVmZmxlTW9kZS5SRVZFUlNFOlxuICAgICAgICAgIGZvciAobGV0IGkgPSBwbGF5ZXIuZGVjay5jYXJkcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgcmVzdWx0LnB1c2goaSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBuZXcgUmVzb2x2ZVByb21wdEFjdGlvbihwcm9tcHQuaWQsIHJlc3VsdCk7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwbGF5ZXIuZGVjay5jYXJkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgcmVzdWx0LnB1c2goaSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBuZXcgUmVzb2x2ZVByb21wdEFjdGlvbihwcm9tcHQuaWQsIHJlc3VsdCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHByb21wdCBpbnN0YW5jZW9mIENvaW5GbGlwUHJvbXB0KSB7XG4gICAgICB0aGlzLmZsaXBDb3VudCArPSAxO1xuICAgICAgbGV0IHJlc3VsdDogYm9vbGVhbiA9IGZhbHNlO1xuICAgICAgc3dpdGNoICh0aGlzLm9wdGlvbnMuZmxpcE1vZGUpIHtcbiAgICAgICAgY2FzZSBCb3RGbGlwTW9kZS5SQU5ET006XG4gICAgICAgICAgcmVzdWx0ID0gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpKSA9PT0gMDtcbiAgICAgICAgICByZXR1cm4gbmV3IFJlc29sdmVQcm9tcHRBY3Rpb24ocHJvbXB0LmlkLCByZXN1bHQpO1xuICAgICAgICBjYXNlIEJvdEZsaXBNb2RlLkFMTF9UQUlMUzpcbiAgICAgICAgICAvLyBFdmVyeSAxMHRoIGNvaW4gaXMgb3Bwb3NpdGUgdG8gYXZvaWQgaW5maW5pdGUgbG9vcHMuXG4gICAgICAgICAgcmVzdWx0ID0gKHRoaXMuZmxpcENvdW50ICUgMTAgPT09IDkpID8gdHJ1ZSA6IGZhbHNlO1xuICAgICAgICAgIHJldHVybiBuZXcgUmVzb2x2ZVByb21wdEFjdGlvbihwcm9tcHQuaWQsIHJlc3VsdCk7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcmVzdWx0ID0gKHRoaXMuZmxpcENvdW50ICUgMTAgPT09IDkpID8gZmFsc2UgOiB0cnVlO1xuICAgICAgICAgIHJldHVybiBuZXcgUmVzb2x2ZVByb21wdEFjdGlvbihwcm9tcHQuaWQsIHJlc3VsdCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzaHVmZmxlKGNhcmRzOiBDYXJkTGlzdCk6IG51bWJlcltdIHtcbiAgICBjb25zdCBsZW4gPSBjYXJkcy5jYXJkcy5sZW5ndGg7XG4gICAgY29uc3Qgb3JkZXI6IG51bWJlcltdID0gW107XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBvcmRlci5wdXNoKGkpO1xuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGNvbnN0IHBvc2l0aW9uID0gTWF0aC5taW4obGVuIC0gMSwgTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogbGVuKSk7XG4gICAgICBjb25zdCB0bXAgPSBvcmRlcltpXTtcbiAgICAgIG9yZGVyW2ldID0gb3JkZXJbcG9zaXRpb25dO1xuICAgICAgb3JkZXJbcG9zaXRpb25dID0gdG1wO1xuICAgIH1cblxuICAgIHJldHVybiBvcmRlcjtcbiAgfVxuXG59XG4iXX0=
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qb2VteWVyc2NvdWdoL0RvY3VtZW50cy9HaXRIdWIvcHRjZy1lcHNkL3B0Y2ctc2VydmVyL3NyYy9nYW1lL2JvdHMvYm90LWFyYml0ZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiszWkFlRTt5UUFkRixLQUFBLENBQUEsa0JBQUEsMEJBQUEsT0FBQSxDQUFBLG1DQUFBLENBQUEsQ0FBQSxDQUVBLEtBQUEsQ0FBQSxnQkFBQSwwQkFBQSxPQUFBLENBQUEsaUNBQUEsQ0FBQSxDQUFBLENBRUEsS0FBQSxDQUFBLHVCQUFBLDBCQUFBLE9BQUEsQ0FBQSx3Q0FBQSxDQUFBLENBQUEsQ0FFQSxHQUFZLENBQUEsV0FBWixDLHdCQUFBLENBQUEsU0FBWSxXQUFaLENBQXVCLGlEQUNyQixXQUFBLENBQUEsV0FBQSxDQUFBLFdBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQSxDQUFBLFdBQUEsQ0FEcUIsd0JBRXJCLFdBQUEsQ0FBQSxXQUFBLENBQUEsV0FBQSxDQUFBLENBQUEsQ0FBQSxDQUFBLENBQUEsV0FBQSxDQUZxQix3QkFHckIsV0FBQSxDQUFBLFdBQUEsQ0FBQSxRQUFBLENBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQSxRQUFBLENBQ0QsQ0FKRCxFQUFZLFdBQVcsQ0FBWCw0QkFBQSxPQUFBLENBQUEsV0FBQSwrQkFBQSxPQUFBLENBQUEsV0FBQSxDQUFXLEVBQVgsQ0FBWixFQU1BLEdBQVksQ0FBQSxjQUFaLEMsd0JBQUEsQ0FBQSxTQUFZLGNBQVosQ0FBMEIsa0RBQ3hCLGNBQUEsQ0FBQSxjQUFBLENBQUEsWUFBQSxDQUFBLENBQUEsQ0FBQSxDQUFBLENBQUEsWUFBQSxDQUR3Qix5QkFFeEIsY0FBQSxDQUFBLGNBQUEsQ0FBQSxTQUFBLENBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQSxTQUFBLENBRndCLHlCQUd4QixjQUFBLENBQUEsY0FBQSxDQUFBLFFBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQSxDQUFBLFFBQUEsQ0FDRCxDQUpELEVBQVksY0FB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QUMsUUFBRCxDQUFMLENBQWtCLEdBQWxCLENBQ0QsQ0FiNEIseUJBZTdCLE1BQU8sQ0FBQSxLQUFQLENBQ0QsQ0F4RW9CLEMseUJBQXZCLE9BQUEsQ0FBQSxVQUFBLENBQUEsVUFBQSxDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ2FyZExpc3QgfSBmcm9tICcuLi9zdG9yZS9zdGF0ZS9jYXJkLWxpc3QnO1xuaW1wb3J0IHsgQ29pbkZsaXBQcm9tcHQgfSBmcm9tICcuLi9zdG9yZS9wcm9tcHRzL2NvaW4tZmxpcC1wcm9tcHQnO1xuaW1wb3J0IHsgUHJvbXB0IH0gZnJvbSAnLi4vc3RvcmUvcHJvbXB0cy9wcm9tcHQnO1xuaW1wb3J0IHsgU2h1ZmZsZURlY2tQcm9tcHQgfSBmcm9tICcuLi9zdG9yZS9wcm9tcHRzL3NodWZmbGUtcHJvbXB0JztcbmltcG9ydCB7IFN0YXRlIH0gZnJvbSAnLi4vc3RvcmUvc3RhdGUvc3RhdGUnO1xuaW1wb3J0IHsgUmVzb2x2ZVByb21wdEFjdGlvbiB9IGZyb20gJy4uL3N0b3JlL2FjdGlvbnMvcmVzb2x2ZS1wcm9tcHQtYWN0aW9uJztcblxuZXhwb3J0IGVudW0gQm90RmxpcE1vZGUge1xuICBBTExfSEVBRFMsXG4gIEFMTF9UQUlMUyxcbiAgUkFORE9NXG59XG5cbmV4cG9ydCBlbnVtIEJvdFNodWZmbGVNb2RlIHtcbiAgTk9fU0hVRkZMRSxcbiAgUkVWRVJTRSxcbiAgUkFORE9NXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQm90QXJiaXRlck9wdGlvbnMge1xuICBmbGlwTW9kZTogQm90RmxpcE1vZGUsXG4gIHNodWZmbGVNb2RlOiBCb3RTaHVmZmxlTW9kZVxufVxuXG5leHBvcnQgY2xhc3MgQm90QXJiaXRlciB7XG5cbiAgcHJpdmF0ZSBvcHRpb25zOiBCb3RBcmJpdGVyT3B0aW9ucztcbiAgcHJpdmF0ZSBmbGlwQ291bnQ6IG51bWJlciA9IDA7XG5cbiAgY29uc3RydWN0b3Iob3B0aW9uczogUGFydGlhbDxCb3RBcmJpdGVyT3B0aW9ucz4gPSB7fSkge1xuICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe1xuICAgICAgZmxpcE1vZGU6IEJvdEZsaXBNb2RlLkFMTF9IRUFEUyxcbiAgICAgIHNodWZmbGVNb2RlOiBCb3RTaHVmZmxlTW9kZS5OT19TSFVGRkxFXG4gICAgfSwgb3B0aW9ucyk7XG4gIH1cblxuICBwdWJsaWMgcmVzb2x2ZVByb21wdChzdGF0ZTogU3RhdGUsIHByb21wdDogUHJvbXB0PGFueT4pOiBSZXNvbHZlUHJvbXB0QWN0aW9uIHwgdW5kZWZpbmVkIHtcbiAgICBjb25zdCBwbGF5ZXIgPSBzdGF0ZS5wbGF5ZXJzLmZpbmQocCA9PiBwLmlkID09PSBwcm9tcHQucGxheWVySWQpO1xuXG4gICAgaWYgKHBsYXllciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHByb21wdCBpbnN0YW5jZW9mIFNodWZmbGVEZWNrUHJvbXB0KSB7XG4gICAgICBsZXQgcmVzdWx0OiBudW1iZXJbXSA9IFtdO1xuICAgICAgc3dpdGNoICh0aGlzLm9wdGlvbnMuc2h1ZmZsZU1vZGUpIHtcbiAgICAgICAgY2FzZSBCb3RTaHVmZmxlTW9kZS5SQU5ET006XG4gICAgICAgICAgcmVzdWx0ID0gdGhpcy5zaHVmZmxlKHBsYXllci5kZWNrKTtcbiAgICAgICAgICByZXR1cm4gbmV3IFJlc29sdmVQcm9tcHRBY3Rpb24ocHJvbXB0LmlkLCByZXN1bHQpO1xuICAgICAgICBjYXNlIEJvdFNodWZmbGVNb2RlLlJFVkVSU0U6XG4gICAgICAgICAgZm9yIChsZXQgaSA9IHBsYXllci5kZWNrLmNhcmRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICByZXN1bHQucHVzaChpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIG5ldyBSZXNvbHZlUHJvbXB0QWN0aW9uKHByb21wdC5pZCwgcmVzdWx0KTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBsYXllci5kZWNrLmNhcmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICByZXN1bHQucHVzaChpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIG5ldyBSZXNvbHZlUHJvbXB0QWN0aW9uKHByb21wdC5pZCwgcmVzdWx0KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocHJvbXB0IGluc3RhbmNlb2YgQ29pbkZsaXBQcm9tcHQpIHtcbiAgICAgIHRoaXMuZmxpcENvdW50ICs9IDE7XG4gICAgICBsZXQgcmVzdWx0OiBib29sZWFuID0gZmFsc2U7XG4gICAgICBzd2l0Y2ggKHRoaXMub3B0aW9ucy5mbGlwTW9kZSkge1xuICAgICAgICBjYXNlIEJvdEZsaXBNb2RlLlJBTkRPTTpcbiAgICAgICAgICByZXN1bHQgPSBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkpID09PSAwO1xuICAgICAgICAgIHJldHVybiBuZXcgUmVzb2x2ZVByb21wdEFjdGlvbihwcm9tcHQuaWQsIHJlc3VsdCk7XG4gICAgICAgIGNhc2UgQm90RmxpcE1vZGUuQUxMX1RBSUxTOlxuICAgICAgICAgIC8vIEV2ZXJ5IDEwdGggY29pbiBpcyBvcHBvc2l0ZSB0byBhdm9pZCBpbmZpbml0ZSBsb29wcy5cbiAgICAgICAgICByZXN1bHQgPSAodGhpcy5mbGlwQ291bnQgJSAxMCA9PT0gOSkgPyB0cnVlIDogZmFsc2U7XG4gICAgICAgICAgcmV0dXJuIG5ldyBSZXNvbHZlUHJvbXB0QWN0aW9uKHByb21wdC5pZCwgcmVzdWx0KTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICByZXN1bHQgPSAodGhpcy5mbGlwQ291bnQgJSAxMCA9PT0gOSkgPyBmYWxzZSA6IHRydWU7XG4gICAgICAgICAgcmV0dXJuIG5ldyBSZXNvbHZlUHJvbXB0QWN0aW9uKHByb21wdC5pZCwgcmVzdWx0KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHNodWZmbGUoY2FyZHM6IENhcmRMaXN0KTogbnVtYmVyW10ge1xuICAgIGNvbnN0IGxlbiA9IGNhcmRzLmNhcmRzLmxlbmd0aDtcbiAgICBjb25zdCBvcmRlcjogbnVtYmVyW10gPSBbXTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIG9yZGVyLnB1c2goaSk7XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgY29uc3QgcG9zaXRpb24gPSBNYXRoLm1pbihsZW4gLSAxLCBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiBsZW4pKTtcbiAgICAgIGNvbnN0IHRtcCA9IG9yZGVyW2ldO1xuICAgICAgb3JkZXJbaV0gPSBvcmRlcltwb3NpdGlvbl07XG4gICAgICBvcmRlcltwb3NpdGlvbl0gPSB0bXA7XG4gICAgfVxuXG4gICAgcmV0dXJuIG9yZGVyO1xuICB9XG5cbn1cbiJdfQ==