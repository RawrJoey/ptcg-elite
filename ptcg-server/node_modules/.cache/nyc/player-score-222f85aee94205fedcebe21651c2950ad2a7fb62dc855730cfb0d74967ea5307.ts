"use strict";function cov_1a7w2eahza(){var path="/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/simple-bot/state-score/player-score.ts";var hash="f69bce02ef07d3d32a4211825befd8d9ede3d50b";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/simple-bot/state-score/player-score.ts",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:62}},"1":{start:{line:3,column:0},end:{line:3,column:29}},"2":{start:{line:4,column:15},end:{line:4,column:36}},"3":{start:{line:5,column:16},end:{line:5,column:34}},"4":{start:{line:8,column:23},end:{line:8,column:54}},"5":{start:{line:9,column:25},end:{line:9,column:69}},"6":{start:{line:10,column:23},end:{line:10,column:49}},"7":{start:{line:11,column:20},end:{line:11,column:21}},"8":{start:{line:13,column:26},end:{line:13,column:53}},"9":{start:{line:14,column:8},end:{line:16,column:9}},"10":{start:{line:15,column:12},end:{line:15,column:64}},"11":{start:{line:17,column:26},end:{line:17,column:53}},"12":{start:{line:18,column:8},end:{line:20,column:9}},"13":{start:{line:19,column:12},end:{line:19,column:64}},"14":{start:{line:22,column:29},end:{line:22,column:76}},"15":{start:{line:22,column:55},end:{line:22,column:75}},"16":{start:{line:23,column:31},end:{line:23,column:80}},"17":{start:{line:23,column:59},end:{line:23,column:79}},"18":{start:{line:24,column:8},end:{line:24,column:78}},"19":{start:{line:26,column:8},end:{line:26,column:56}},"20":{start:{line:28,column:8},end:{line:30,column:9}},"21":{start:{line:29,column:12},end:{line:29,column:77}},"22":{start:{line:31,column:8},end:{line:31,column:21}},"23":{start:{line:34,column:0},end:{line:34,column:34}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:7,column:4},end:{line:7,column:5}},loc:{start:{line:7,column:30},end:{line:32,column:5}},line:7},"1":{name:"(anonymous_1)",decl:{start:{line:22,column:50},end:{line:22,column:51}},loc:{start:{line:22,column:55},end:{line:22,column:75}},line:22},"2":{name:"(anonymous_2)",decl:{start:{line:23,column:54},end:{line:23,column:55}},loc:{start:{line:23,column:59},end:{line:23,column:79}},line:23}},branchMap:{"0":{loc:{start:{line:14,column:8},end:{line:16,column:9}},type:"if",locations:[{start:{line:14,column:8},end:{line:16,column:9}},{start:{line:14,column:8},end:{line:16,column:9}}],line:14},"1":{loc:{start:{line:15,column:21},end:{line:15,column:63}},type:"cond-expr",locations:[{start:{line:15,column:33},end:{line:15,column:46}},{start:{line:15,column:49},end:{line:15,column:63}}],line:15},"2":{loc:{start:{line:18,column:8},end:{line:20,column:9}},type:"if",locations:[{start:{line:18,column:8},end:{line:20,column:9}},{start:{line:18,column:8},end:{line:20,column:9}}],line:18},"3":{loc:{start:{line:19,column:21},end:{line:19,column:63}},type:"cond-expr",locations:[{start:{line:19,column:33},end:{line:19,column:46}},{start:{line:19,column:49},end:{line:19,column:63}}],line:19},"4":{loc:{start:{line:28,column:8},end:{line:30,column:9}},type:"if",locations:[{start:{line:28,column:8},end:{line:30,column:9}},{start:{line:28,column:8},end:{line:30,column:9}}],line:28}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},inputSourceMap:{version:3,file:"/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/simple-bot/state-score/player-score.ts",sources:["/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/simple-bot/state-score/player-score.ts"],names:[],mappings:";;;AAAA,qCAA2D;AAC3D,mCAAsC;AAEtC,MAAa,WAAY,SAAQ,mBAAW;IAEnC,QAAQ,CAAC,KAAY,EAAE,QAAgB;QAC5C,MAAM,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;QAC/C,MAAM,QAAQ,GAAG,iBAAU,CAAC,WAAW,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;QACvD,MAAM,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC;QAE1C,IAAI,KAAK,GAAG,CAAC,CAAC;QAEd,uCAAuC;QACvC,MAAM,SAAS,GAAG,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,MAAM,CAAC;QAC9C,IAAI,KAAK,CAAC,MAAM,KAAK,iBAAU,CAAC,QAAQ,EAAE;YACxC,KAAK,IAAI,SAAS,CAAC,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC;SACrD;QACD,MAAM,SAAS,GAAG,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,MAAM,CAAC;QAC9C,IAAI,KAAK,CAAC,MAAM,KAAK,iBAAU,CAAC,QAAQ,EAAE;YACxC,KAAK,IAAI,SAAS,CAAC,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC;SACrD;QAED,qDAAqD;QACrD,MAAM,YAAY,GAAG,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC;QACrE,MAAM,cAAc,GAAG,QAAQ,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC;QACzE,KAAK,IAAI,MAAM,CAAC,KAAK,GAAG,CAAC,cAAc,CAAC,MAAM,GAAG,YAAY,CAAC,MAAM,CAAC,CAAC;QAEtE,oCAAoC;QACpC,KAAK,IAAI,MAAM,CAAC,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;QAEhD,iDAAiD;QACjD,IAAI,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,EAAE,EAAE;YACjC,KAAK,IAAI,MAAM,CAAC,cAAc,GAAG,CAAC,EAAE,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;SAClE;QAED,OAAO,KAAK,CAAC;IACf,CAAC;CAEF;AAnCD,kCAmCC",sourcesContent:["import { State, StateUtils, GameWinner } from '../../game';\nimport { SimpleScore } from './score';\n\nexport class PlayerScore extends SimpleScore {\n\n  public getScore(state: State, playerId: number): number {\n    const player = this.getPlayer(state, playerId);\n    const opponent = StateUtils.getOpponent(state, player);\n    const scores = this.options.scores.player;\n\n    let score = 0;\n\n    // 10000 points if we have won the game\n    const isPlayer1 = state.players[0] === player;\n    if (state.winner === GameWinner.PLAYER_1) {\n      score += isPlayer1 ? scores.winner : -scores.winner;\n    }\n    const isPlayer2 = state.players[1] === player;\n    if (state.winner === GameWinner.PLAYER_2) {\n      score += isPlayer2 ? scores.winner : -scores.winner;\n    }\n\n    // 1000 points for each prize card less than opponent\n    const playerPrizes = player.prizes.filter(p => p.cards.length !== 0);\n    const opponentPrizes = opponent.prizes.filter(p => p.cards.length !== 0);\n    score += scores.prize * (opponentPrizes.length - playerPrizes.length);\n\n    // 1 point for each card in the deck\n    score += scores.deck * player.deck.cards.length;\n\n    // -10 points, if our deck has less than 10 cards\n    if (player.deck.cards.length < 10) {\n      score += scores.deckLessThan10 * (10 - player.deck.cards.length);\n    }\n\n    return score;\n  }\n\n}\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f69bce02ef07d3d32a4211825befd8d9ede3d50b"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1a7w2eahza=function(){return actualCoverage;};}return actualCoverage;}cov_1a7w2eahza();cov_1a7w2eahza().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_1a7w2eahza().s[1]++;exports.PlayerScore=void 0;const game_1=(cov_1a7w2eahza().s[2]++,require("../../game"));const score_1=(cov_1a7w2eahza().s[3]++,require("./score"));class PlayerScore extends(score_1.SimpleScore){getScore(state,playerId){cov_1a7w2eahza().f[0]++;const player=(cov_1a7w2eahza().s[4]++,this.getPlayer(state,playerId));const opponent=(cov_1a7w2eahza().s[5]++,game_1.StateUtils.getOpponent(state,player));const scores=(cov_1a7w2eahza().s[6]++,this.options.scores.player);let score=(cov_1a7w2eahza().s[7]++,0);// 10000 points if we have won the game
const isPlayer1=(cov_1a7w2eahza().s[8]++,state.players[0]===player);cov_1a7w2eahza().s[9]++;if(state.winner===game_1.GameWinner.PLAYER_1){cov_1a7w2eahza().b[0][0]++;cov_1a7w2eahza().s[10]++;score+=isPlayer1?(cov_1a7w2eahza().b[1][0]++,scores.winner):(cov_1a7w2eahza().b[1][1]++,-scores.winner);}else{cov_1a7w2eahza().b[0][1]++;}const isPlayer2=(cov_1a7w2eahza().s[11]++,state.players[1]===player);cov_1a7w2eahza().s[12]++;if(state.winner===game_1.GameWinner.PLAYER_2){cov_1a7w2eahza().b[2][0]++;cov_1a7w2eahza().s[13]++;score+=isPlayer2?(cov_1a7w2eahza().b[3][0]++,scores.winner):(cov_1a7w2eahza().b[3][1]++,-scores.winner);}else{cov_1a7w2eahza().b[2][1]++;}// 1000 points for each prize card less than opponent
const playerPrizes=(cov_1a7w2eahza().s[14]++,player.prizes.filter(p=>{cov_1a7w2eahza().f[1]++;cov_1a7w2eahza().s[15]++;return p.cards.length!==0;}));const opponentPrizes=(cov_1a7w2eahza().s[16]++,opponent.prizes.filter(p=>{cov_1a7w2eahza().f[2]++;cov_1a7w2eahza().s[17]++;return p.cards.length!==0;}));cov_1a7w2eahza().s[18]++;score+=scores.prize*(opponentPrizes.length-playerPrizes.length);// 1 point for each card in the deck
cov_1a7w2eahza().s[19]++;score+=scores.deck*player.deck.cards.length;// -10 points, if our deck has less than 10 cards
cov_1a7w2eahza().s[20]++;if(player.deck.cards.length<10){cov_1a7w2eahza().b[4][0]++;cov_1a7w2eahza().s[21]++;score+=scores.deckLessThan10*(10-player.deck.cards.length);}else{cov_1a7w2eahza().b[4][1]++;}cov_1a7w2eahza().s[22]++;return score;}}cov_1a7w2eahza().s[23]++;exports.PlayerScore=PlayerScore;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2pvZW15ZXJzY291Z2gvRG9jdW1lbnRzL0dpdEh1Yi9wdGNnLWVwc2QvcHRjZy1zZXJ2ZXIvc3JjL3NpbXBsZS1ib3Qvc3RhdGUtc2NvcmUvcGxheWVyLXNjb3JlLnRzIiwic291cmNlcyI6WyIvVXNlcnMvam9lbXllcnNjb3VnaC9Eb2N1bWVudHMvR2l0SHViL3B0Y2ctZXBzZC9wdGNnLXNlcnZlci9zcmMvc2ltcGxlLWJvdC9zdGF0ZS1zY29yZS9wbGF5ZXItc2NvcmUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEscUNBQTJEO0FBQzNELG1DQUFzQztBQUV0QyxNQUFhLFdBQVksU0FBUSxtQkFBVztJQUVuQyxRQUFRLENBQUMsS0FBWSxFQUFFLFFBQWdCO1FBQzVDLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxDQUFDO1FBQy9DLE1BQU0sUUFBUSxHQUFHLGlCQUFVLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsQ0FBQztRQUN2RCxNQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUM7UUFFMUMsSUFBSSxLQUFLLEdBQUcsQ0FBQyxDQUFDO1FBRWQsdUNBQXVDO1FBQ3ZDLE1BQU0sU0FBUyxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEtBQUssTUFBTSxDQUFDO1FBQzlDLElBQUksS0FBSyxDQUFDLE1BQU0sS0FBSyxpQkFBVSxDQUFDLFFBQVEsRUFBRTtZQUN4QyxLQUFLLElBQUksU0FBUyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUM7U0FDckQ7UUFDRCxNQUFNLFNBQVMsR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxLQUFLLE1BQU0sQ0FBQztRQUM5QyxJQUFJLEtBQUssQ0FBQyxNQUFNLEtBQUssaUJBQVUsQ0FBQyxRQUFRLEVBQUU7WUFDeEMsS0FBSyxJQUFJLFNBQVMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDO1NBQ3JEO1FBRUQscURBQXFEO1FBQ3JELE1BQU0sWUFBWSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxNQUFNLEtBQUssQ0FBQyxDQUFDLENBQUM7UUFDckUsTUFBTSxjQUFjLEdBQUcsUUFBUSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLE1BQU0sS0FBSyxDQUFDLENBQUMsQ0FBQztRQUN6RSxLQUFLLElBQUksTUFBTSxDQUFDLEtBQUssR0FBRyxDQUFDLGNBQWMsQ0FBQyxNQUFNLEdBQUcsWUFBWSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBRXRFLG9DQUFvQztRQUNwQyxLQUFLLElBQUksTUFBTSxDQUFDLElBQUksR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUM7UUFFaEQsaURBQWlEO1FBQ2pELElBQUksTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLEVBQUUsRUFBRTtZQUNqQyxLQUFLLElBQUksTUFBTSxDQUFDLGNBQWMsR0FBRyxDQUFDLEVBQUUsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztTQUNsRTtRQUVELE9BQU8sS0FBSyxDQUFDO0lBQ2YsQ0FBQztDQUVGO0FBbkNELGtDQW1DQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFN0YXRlLCBTdGF0ZVV0aWxzLCBHYW1lV2lubmVyIH0gZnJvbSAnLi4vLi4vZ2FtZSc7XG5pbXBvcnQgeyBTaW1wbGVTY29yZSB9IGZyb20gJy4vc2NvcmUnO1xuXG5leHBvcnQgY2xhc3MgUGxheWVyU2NvcmUgZXh0ZW5kcyBTaW1wbGVTY29yZSB7XG5cbiAgcHVibGljIGdldFNjb3JlKHN0YXRlOiBTdGF0ZSwgcGxheWVySWQ6IG51bWJlcik6IG51bWJlciB7XG4gICAgY29uc3QgcGxheWVyID0gdGhpcy5nZXRQbGF5ZXIoc3RhdGUsIHBsYXllcklkKTtcbiAgICBjb25zdCBvcHBvbmVudCA9IFN0YXRlVXRpbHMuZ2V0T3Bwb25lbnQoc3RhdGUsIHBsYXllcik7XG4gICAgY29uc3Qgc2NvcmVzID0gdGhpcy5vcHRpb25zLnNjb3Jlcy5wbGF5ZXI7XG5cbiAgICBsZXQgc2NvcmUgPSAwO1xuXG4gICAgLy8gMTAwMDAgcG9pbnRzIGlmIHdlIGhhdmUgd29uIHRoZSBnYW1lXG4gICAgY29uc3QgaXNQbGF5ZXIxID0gc3RhdGUucGxheWVyc1swXSA9PT0gcGxheWVyO1xuICAgIGlmIChzdGF0ZS53aW5uZXIgPT09IEdhbWVXaW5uZXIuUExBWUVSXzEpIHtcbiAgICAgIHNjb3JlICs9IGlzUGxheWVyMSA/IHNjb3Jlcy53aW5uZXIgOiAtc2NvcmVzLndpbm5lcjtcbiAgICB9XG4gICAgY29uc3QgaXNQbGF5ZXIyID0gc3RhdGUucGxheWVyc1sxXSA9PT0gcGxheWVyO1xuICAgIGlmIChzdGF0ZS53aW5uZXIgPT09IEdhbWVXaW5uZXIuUExBWUVSXzIpIHtcbiAgICAgIHNjb3JlICs9IGlzUGxheWVyMiA/IHNjb3Jlcy53aW5uZXIgOiAtc2NvcmVzLndpbm5lcjtcbiAgICB9XG5cbiAgICAvLyAxMDAwIHBvaW50cyBmb3IgZWFjaCBwcml6ZSBjYXJkIGxlc3MgdGhhbiBvcHBvbmVudFxuICAgIGNvbnN0IHBsYXllclByaXplcyA9IHBsYXllci5wcml6ZXMuZmlsdGVyKHAgPT4gcC5jYXJkcy5sZW5ndGggIT09IDApO1xuICAgIGNvbnN0IG9wcG9uZW50UHJpemVzID0gb3Bwb25lbnQucHJpemVzLmZpbHRlcihwID0+IHAuY2FyZHMubGVuZ3RoICE9PSAwKTtcbiAgICBzY29yZSArPSBzY29yZXMucHJpemUgKiAob3Bwb25lbnRQcml6ZXMubGVuZ3RoIC0gcGxheWVyUHJpemVzLmxlbmd0aCk7XG5cbiAgICAvLyAxIHBvaW50IGZvciBlYWNoIGNhcmQgaW4gdGhlIGRlY2tcbiAgICBzY29yZSArPSBzY29yZXMuZGVjayAqIHBsYXllci5kZWNrLmNhcmRzLmxlbmd0aDtcblxuICAgIC8vIC0xMCBwb2ludHMsIGlmIG91ciBkZWNrIGhhcyBsZXNzIHRoYW4gMTAgY2FyZHNcbiAgICBpZiAocGxheWVyLmRlY2suY2FyZHMubGVuZ3RoIDwgMTApIHtcbiAgICAgIHNjb3JlICs9IHNjb3Jlcy5kZWNrTGVzc1RoYW4xMCAqICgxMCAtIHBsYXllci5kZWNrLmNhcmRzLmxlbmd0aCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNjb3JlO1xuICB9XG5cbn1cbiJdfQ==
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qb2VteWVyc2NvdWdoL0RvY3VtZW50cy9HaXRIdWIvcHRjZy1lcHNkL3B0Y2ctc2VydmVyL3NyYy9zaW1wbGUtYm90L3N0YXRlLXNjb3JlL3BsYXllci1zY29yZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiNGxOQWdCSzsrTkFoQkwsS0FBQSxDQUFBLE1BQUEsMEJBQUEsT0FBQSxDQUFBLFlBQUEsQ0FBQSxDQUFBLENBQ0EsS0FBQSxDQUFBLE9BQUEsMEJBQUEsT0FBQSxDQUFBLFNBQUEsQ0FBQSxDQUFBLENBRUEsS0FBYSxDQUFBLFdBQWIsU0FBaUMsT0FBQSxDQUFBLFdBQWpDLENBQTRDLENBRW5DLFFBQVEsQ0FBQyxLQUFELENBQWUsUUFBZixDQUErQix5QkFDNUMsS0FBTSxDQUFBLE1BQU0sMEJBQUcsS0FBSyxTQUFMLENBQWUsS0FBZixDQUFzQixRQUF0QixDQUFILENBQVosQ0FDQSxLQUFNLENBQUEsUUFBUSwwQkFBRyxNQUFBLENBQUEsVUFBQSxDQUFXLFdBQVgsQ0FBdUIsS0FBdkIsQ0FBOEIsTUFBOUIsQ0FBSCxDQUFkLENBQ0EsS0FBTSxDQUFBLE1BQU0sMEJBQUcsS0FBSyxPQUFMLENBQWEsTUFBYixDQUFvQixNQUF2QixDQUFaLENBRUEsR0FBSSxDQUFBLEtBQUssMEJBQUcsQ0FBSCxDQUFULENBRUE7QUFDQSxLQUFNLENBQUEsU0FBUywwQkFBRyxLQUFLLENBQUMsT0FBTixDQUFjLENBQWQsSUFBcUIsTUFBeEIsQ0FBZixDQVI0Qyx3QkFTNUMsR0FBSSxLQUFLLENBQUMsTUFBTixHQUFpQixNQUFBLENBQUEsVUFBQSxDQUFXLFFBQWhDLENBQTBDLHFEQUN4QyxLQUFLLEVBQUksU0FBUyw2QkFBRyxNQUFNLENBQUMsTUFBViw4QkFBbUIsQ0FBQyxNQUFNLENBQUMsTUFBM0IsQ0FBbEIsQ0FDRCxDQUZELGlDQUdBLEtBQU0sQ0FBQSxTQUFTLDJCQUFHLEtBQUssQ0FBQyxPQUFOLENBQWMsQ0FBZCxJQUFxQixNQUF4QixDQUFmLENBWjRDLHlCQWE1QyxHQUFJLEtBQUssQ0FBQyxNQUFOLEdBQWlCLE1BQUEsQ0FBQSxVQUFBLENBQVcsUUFBaEMsQ0FBMEMscURBQ3hDLEtBQUssRUFBSSxTQUFTLDZCQUFHLE1BQU0sQ0FBQyxNQUFWLDhCQUFtQixDQUFDLE1BQU0sQ0FBQyxNQUEzQixDQUFsQixDQUNELENBRkQsaUNBSUE7QUFDQSxLQUFNLENBQUEsWUFBWSwyQkFBRyxNQUFNLENBQUMsTUFBUCxDQUFjLE1BQWQsQ0FBcUIsQ0FBQyxFQUFJLHdEQUFBLENBQUEsQ0FBQyxDQUFDLEtBQUYsQ0FBUSxNQUFSLEdBQW1CLENBQW5CLENBQW9CLENBQTlDLENBQUgsQ0FBbEIsQ0FDQSxLQUFNLENBQUEsY0FBYywyQkFBRyxRQUFRLENBQUMsTUFBVCxDQUFnQixNQUFoQixDQUF1QixDQUFDLEVBQUksd0RBQUEsQ0FBQSxDQUFDLENBQUMsS0FBRixDQUFRLE1BQVIsR0FBbUIsQ0FBbkIsQ0FBb0IsQ0FBaEQsQ0FBSCxDQUFwQixDQW5CNEMseUJBb0I1QyxLQUFLLEVBQUksTUFBTSxDQUFDLEtBQVAsRUFBZ0IsY0FBYyxDQUFDLE1BQWYsQ0FBd0IsWUFBWSxDQUFDLE1BQXJELENBQVQsQ0FFQTtBQXRCNEMseUJBdUI1QyxLQUFLLEVBQUksTUFBTSxDQUFDLElBQVAsQ0FBYyxNQUFNLENBQUMsSUFBUCxDQUFZLEtBQVosQ0FBa0IsTUFBekMsQ0FFQTtBQXpCNEMseUJBMEI1QyxHQUFJLE1BQU0sQ0FBQyxJQUFQLENBQVksS0FBWixDQUFrQixNQUFsQixDQUEyQixFQUEvQixDQUFtQyxxREFDakMsS0FBSyxFQUFJLE1BQU0sQ0FBQyxjQUFQLEVBQXlCLEdBQUssTUFBTSxDQUFDLElBQVAsQ0FBWSxLQUFaLENBQWtCLE1BQWhELENBQVQsQ0FDRCxDQUZELGlDQTFCNEMseUJBOEI1QyxNQUFPLENBQUEsS0FBUCxDQUNELENBakN5QyxDLHlCQUE1QyxPQUFBLENBQUEsV0FBQSxDQUFBLFdBQUEsQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFN0YXRlLCBTdGF0ZVV0aWxzLCBHYW1lV2lubmVyIH0gZnJvbSAnLi4vLi4vZ2FtZSc7XG5pbXBvcnQgeyBTaW1wbGVTY29yZSB9IGZyb20gJy4vc2NvcmUnO1xuXG5leHBvcnQgY2xhc3MgUGxheWVyU2NvcmUgZXh0ZW5kcyBTaW1wbGVTY29yZSB7XG5cbiAgcHVibGljIGdldFNjb3JlKHN0YXRlOiBTdGF0ZSwgcGxheWVySWQ6IG51bWJlcik6IG51bWJlciB7XG4gICAgY29uc3QgcGxheWVyID0gdGhpcy5nZXRQbGF5ZXIoc3RhdGUsIHBsYXllcklkKTtcbiAgICBjb25zdCBvcHBvbmVudCA9IFN0YXRlVXRpbHMuZ2V0T3Bwb25lbnQoc3RhdGUsIHBsYXllcik7XG4gICAgY29uc3Qgc2NvcmVzID0gdGhpcy5vcHRpb25zLnNjb3Jlcy5wbGF5ZXI7XG5cbiAgICBsZXQgc2NvcmUgPSAwO1xuXG4gICAgLy8gMTAwMDAgcG9pbnRzIGlmIHdlIGhhdmUgd29uIHRoZSBnYW1lXG4gICAgY29uc3QgaXNQbGF5ZXIxID0gc3RhdGUucGxheWVyc1swXSA9PT0gcGxheWVyO1xuICAgIGlmIChzdGF0ZS53aW5uZXIgPT09IEdhbWVXaW5uZXIuUExBWUVSXzEpIHtcbiAgICAgIHNjb3JlICs9IGlzUGxheWVyMSA/IHNjb3Jlcy53aW5uZXIgOiAtc2NvcmVzLndpbm5lcjtcbiAgICB9XG4gICAgY29uc3QgaXNQbGF5ZXIyID0gc3RhdGUucGxheWVyc1sxXSA9PT0gcGxheWVyO1xuICAgIGlmIChzdGF0ZS53aW5uZXIgPT09IEdhbWVXaW5uZXIuUExBWUVSXzIpIHtcbiAgICAgIHNjb3JlICs9IGlzUGxheWVyMiA/IHNjb3Jlcy53aW5uZXIgOiAtc2NvcmVzLndpbm5lcjtcbiAgICB9XG5cbiAgICAvLyAxMDAwIHBvaW50cyBmb3IgZWFjaCBwcml6ZSBjYXJkIGxlc3MgdGhhbiBvcHBvbmVudFxuICAgIGNvbnN0IHBsYXllclByaXplcyA9IHBsYXllci5wcml6ZXMuZmlsdGVyKHAgPT4gcC5jYXJkcy5sZW5ndGggIT09IDApO1xuICAgIGNvbnN0IG9wcG9uZW50UHJpemVzID0gb3Bwb25lbnQucHJpemVzLmZpbHRlcihwID0+IHAuY2FyZHMubGVuZ3RoICE9PSAwKTtcbiAgICBzY29yZSArPSBzY29yZXMucHJpemUgKiAob3Bwb25lbnRQcml6ZXMubGVuZ3RoIC0gcGxheWVyUHJpemVzLmxlbmd0aCk7XG5cbiAgICAvLyAxIHBvaW50IGZvciBlYWNoIGNhcmQgaW4gdGhlIGRlY2tcbiAgICBzY29yZSArPSBzY29yZXMuZGVjayAqIHBsYXllci5kZWNrLmNhcmRzLmxlbmd0aDtcblxuICAgIC8vIC0xMCBwb2ludHMsIGlmIG91ciBkZWNrIGhhcyBsZXNzIHRoYW4gMTAgY2FyZHNcbiAgICBpZiAocGxheWVyLmRlY2suY2FyZHMubGVuZ3RoIDwgMTApIHtcbiAgICAgIHNjb3JlICs9IHNjb3Jlcy5kZWNrTGVzc1RoYW4xMCAqICgxMCAtIHBsYXllci5kZWNrLmNhcmRzLmxlbmd0aCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNjb3JlO1xuICB9XG5cbn1cbiJdfQ==