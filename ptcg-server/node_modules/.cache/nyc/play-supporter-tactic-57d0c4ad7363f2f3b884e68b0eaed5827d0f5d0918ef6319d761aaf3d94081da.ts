"use strict";function cov_1moeffoz9c(){var path="/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/simple-bot/simple-tactics/play-supporter-tactic.ts";var hash="352ba12623fa23f7977ed690ea8ec854e9a2f975";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/simple-bot/simple-tactics/play-supporter-tactic.ts",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:62}},"1":{start:{line:3,column:0},end:{line:3,column:37}},"2":{start:{line:4,column:15},end:{line:4,column:36}},"3":{start:{line:5,column:25},end:{line:5,column:52}},"4":{start:{line:8,column:8},end:{line:10,column:9}},"5":{start:{line:9,column:12},end:{line:9,column:19}},"6":{start:{line:11,column:27},end:{line:13,column:10}},"7":{start:{line:12,column:12},end:{line:12,column:101}},"8":{start:{line:14,column:8},end:{line:16,column:9}},"9":{start:{line:15,column:12},end:{line:15,column:19}},"10":{start:{line:17,column:31},end:{line:17,column:73}},"11":{start:{line:18,column:23},end:{line:18,column:95}},"12":{start:{line:19,column:24},end:{line:19,column:77}},"13":{start:{line:21,column:8},end:{line:29,column:11}},"14":{start:{line:22,column:26},end:{line:22,column:57}},"15":{start:{line:23,column:27},end:{line:23,column:78}},"16":{start:{line:24,column:26},end:{line:24,column:71}},"17":{start:{line:25,column:12},end:{line:28,column:13}},"18":{start:{line:26,column:16},end:{line:26,column:34}},"19":{start:{line:27,column:16},end:{line:27,column:40}},"20":{start:{line:30,column:8},end:{line:30,column:30}},"21":{start:{line:33,column:0},end:{line:33,column:50}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:7,column:4},end:{line:7,column:5}},loc:{start:{line:7,column:29},end:{line:31,column:5}},line:7},"1":{name:"(anonymous_1)",decl:{start:{line:11,column:52},end:{line:11,column:53}},loc:{start:{line:11,column:57},end:{line:13,column:9}},line:11},"2":{name:"(anonymous_2)",decl:{start:{line:21,column:27},end:{line:21,column:28}},loc:{start:{line:21,column:35},end:{line:29,column:9}},line:21}},branchMap:{"0":{loc:{start:{line:8,column:8},end:{line:10,column:9}},type:"if",locations:[{start:{line:8,column:8},end:{line:10,column:9}},{start:{line:8,column:8},end:{line:10,column:9}}],line:8},"1":{loc:{start:{line:12,column:19},end:{line:12,column:100}},type:"binary-expr",locations:[{start:{line:12,column:19},end:{line:12,column:50}},{start:{line:12,column:54},end:{line:12,column:100}}],line:12},"2":{loc:{start:{line:14,column:8},end:{line:16,column:9}},type:"if",locations:[{start:{line:14,column:8},end:{line:16,column:9}},{start:{line:14,column:8},end:{line:16,column:9}}],line:14},"3":{loc:{start:{line:25,column:12},end:{line:28,column:13}},type:"if",locations:[{start:{line:25,column:12},end:{line:28,column:13}},{start:{line:25,column:12},end:{line:28,column:13}}],line:25},"4":{loc:{start:{line:25,column:16},end:{line:25,column:56}},type:"binary-expr",locations:[{start:{line:25,column:16},end:{line:25,column:35}},{start:{line:25,column:39},end:{line:25,column:56}}],line:25}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},inputSourceMap:{version:3,file:"/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/simple-bot/simple-tactics/play-supporter-tactic.ts",sources:["/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/simple-bot/simple-tactics/play-supporter-tactic.ts"],names:[],mappings:";;;AAAA,qCAC2C;AAC3C,qDAAgD;AAEhD,MAAa,mBAAoB,SAAQ,6BAAY;IAE5C,SAAS,CAAC,KAAY,EAAE,MAAc;QAC3C,IAAI,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE;YACrC,OAAO;SACR;QAED,MAAM,UAAU,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE;YAC9C,OAAO,CAAC,YAAY,kBAAW,IAAI,CAAC,CAAC,WAAW,KAAK,kBAAW,CAAC,SAAS,CAAC;QAC7E,CAAC,CAAC,CAAC;QAEH,IAAI,UAAU,CAAC,MAAM,KAAK,CAAC,EAAE;YAC3B,OAAO;SACR;QAED,MAAM,cAAc,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC,cAAc,CAAC;QAClE,MAAM,MAAM,GAAG,EAAE,MAAM,EAAE,iBAAU,CAAC,GAAG,EAAE,IAAI,EAAE,eAAQ,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC;QAC1E,IAAI,SAAS,GAAG,IAAI,CAAC,aAAa,CAAC,KAAK,EAAE,MAAM,CAAC,EAAE,CAAC,GAAG,cAAc,CAAC;QACtE,IAAI,cAA0C,CAAC;QAE/C,UAAU,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;YACxB,MAAM,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;YAC9C,MAAM,MAAM,GAAG,IAAI,qBAAc,CAAC,MAAM,CAAC,EAAE,EAAE,KAAK,EAAE,MAAM,CAAC,CAAC;YAC5D,MAAM,KAAK,GAAG,IAAI,CAAC,cAAc,CAAC,KAAK,EAAE,MAAM,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC;YAE5D,IAAI,KAAK,KAAK,SAAS,IAAI,SAAS,GAAG,KAAK,EAAE;gBAC5C,SAAS,GAAG,KAAK,CAAC;gBAClB,cAAc,GAAG,MAAM,CAAC;aACzB;QACH,CAAC,CAAC,CAAC;QAEH,OAAO,cAAc,CAAC;IACxB,CAAC;CAEF;AAlCD,kDAkCC",sourcesContent:["import { Action, Player, State, TrainerCard, TrainerType, PlayCardAction,\n  PlayerType, SlotType } from '../../game';\nimport { SimpleTactic } from './simple-tactics';\n\nexport class PlaySupporterTactic extends SimpleTactic {\n\n  public useTactic(state: State, player: Player): Action | undefined {\n    if (player.supporter.cards.length > 0) {\n      return;\n    }\n\n    const supporters = player.hand.cards.filter(c => {\n      return c instanceof TrainerCard && c.trainerType === TrainerType.SUPPORTER;\n    });\n\n    if (supporters.length === 0) {\n      return;\n    }\n\n    const supporterBonus = this.options.scores.tactics.supporterBonus;\n    const target = { player: PlayerType.ANY, slot: SlotType.BOARD, index: 0 };\n    let bestScore = this.getStateScore(state, player.id) - supporterBonus;\n    let playCardAction: PlayCardAction | undefined;\n\n    supporters.forEach(card => {\n      const index = player.hand.cards.indexOf(card);\n      const action = new PlayCardAction(player.id, index, target);\n      const score = this.evaluateAction(state, player.id, action);\n\n      if (score !== undefined && bestScore < score) {\n        bestScore = score;\n        playCardAction = action;\n      }\n    });\n\n    return playCardAction;\n  }\n\n}\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"352ba12623fa23f7977ed690ea8ec854e9a2f975"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1moeffoz9c=function(){return actualCoverage;};}return actualCoverage;}cov_1moeffoz9c();cov_1moeffoz9c().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_1moeffoz9c().s[1]++;exports.PlaySupporterTactic=void 0;const game_1=(cov_1moeffoz9c().s[2]++,require("../../game"));const simple_tactics_1=(cov_1moeffoz9c().s[3]++,require("./simple-tactics"));class PlaySupporterTactic extends(simple_tactics_1.SimpleTactic){useTactic(state,player){cov_1moeffoz9c().f[0]++;cov_1moeffoz9c().s[4]++;if(player.supporter.cards.length>0){cov_1moeffoz9c().b[0][0]++;cov_1moeffoz9c().s[5]++;return;}else{cov_1moeffoz9c().b[0][1]++;}const supporters=(cov_1moeffoz9c().s[6]++,player.hand.cards.filter(c=>{cov_1moeffoz9c().f[1]++;cov_1moeffoz9c().s[7]++;return(cov_1moeffoz9c().b[1][0]++,c instanceof game_1.TrainerCard)&&(cov_1moeffoz9c().b[1][1]++,c.trainerType===game_1.TrainerType.SUPPORTER);}));cov_1moeffoz9c().s[8]++;if(supporters.length===0){cov_1moeffoz9c().b[2][0]++;cov_1moeffoz9c().s[9]++;return;}else{cov_1moeffoz9c().b[2][1]++;}const supporterBonus=(cov_1moeffoz9c().s[10]++,this.options.scores.tactics.supporterBonus);const target=(cov_1moeffoz9c().s[11]++,{player:game_1.PlayerType.ANY,slot:game_1.SlotType.BOARD,index:0});let bestScore=(cov_1moeffoz9c().s[12]++,this.getStateScore(state,player.id)-supporterBonus);let playCardAction;cov_1moeffoz9c().s[13]++;supporters.forEach(card=>{cov_1moeffoz9c().f[2]++;const index=(cov_1moeffoz9c().s[14]++,player.hand.cards.indexOf(card));const action=(cov_1moeffoz9c().s[15]++,new game_1.PlayCardAction(player.id,index,target));const score=(cov_1moeffoz9c().s[16]++,this.evaluateAction(state,player.id,action));cov_1moeffoz9c().s[17]++;if((cov_1moeffoz9c().b[4][0]++,score!==undefined)&&(cov_1moeffoz9c().b[4][1]++,bestScore<score)){cov_1moeffoz9c().b[3][0]++;cov_1moeffoz9c().s[18]++;bestScore=score;cov_1moeffoz9c().s[19]++;playCardAction=action;}else{cov_1moeffoz9c().b[3][1]++;}});cov_1moeffoz9c().s[20]++;return playCardAction;}}cov_1moeffoz9c().s[21]++;exports.PlaySupporterTactic=PlaySupporterTactic;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2pvZW15ZXJzY291Z2gvRG9jdW1lbnRzL0dpdEh1Yi9wdGNnLWVwc2QvcHRjZy1zZXJ2ZXIvc3JjL3NpbXBsZS1ib3Qvc2ltcGxlLXRhY3RpY3MvcGxheS1zdXBwb3J0ZXItdGFjdGljLnRzIiwic291cmNlcyI6WyIvVXNlcnMvam9lbXllcnNjb3VnaC9Eb2N1bWVudHMvR2l0SHViL3B0Y2ctZXBzZC9wdGNnLXNlcnZlci9zcmMvc2ltcGxlLWJvdC9zaW1wbGUtdGFjdGljcy9wbGF5LXN1cHBvcnRlci10YWN0aWMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEscUNBQzJDO0FBQzNDLHFEQUFnRDtBQUVoRCxNQUFhLG1CQUFvQixTQUFRLDZCQUFZO0lBRTVDLFNBQVMsQ0FBQyxLQUFZLEVBQUUsTUFBYztRQUMzQyxJQUFJLE1BQU0sQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7WUFDckMsT0FBTztTQUNSO1FBRUQsTUFBTSxVQUFVLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFO1lBQzlDLE9BQU8sQ0FBQyxZQUFZLGtCQUFXLElBQUksQ0FBQyxDQUFDLFdBQVcsS0FBSyxrQkFBVyxDQUFDLFNBQVMsQ0FBQztRQUM3RSxDQUFDLENBQUMsQ0FBQztRQUVILElBQUksVUFBVSxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUU7WUFDM0IsT0FBTztTQUNSO1FBRUQsTUFBTSxjQUFjLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQztRQUNsRSxNQUFNLE1BQU0sR0FBRyxFQUFFLE1BQU0sRUFBRSxpQkFBVSxDQUFDLEdBQUcsRUFBRSxJQUFJLEVBQUUsZUFBUSxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFLENBQUM7UUFDMUUsSUFBSSxTQUFTLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxHQUFHLGNBQWMsQ0FBQztRQUN0RSxJQUFJLGNBQTBDLENBQUM7UUFFL0MsVUFBVSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRTtZQUN4QixNQUFNLEtBQUssR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDOUMsTUFBTSxNQUFNLEdBQUcsSUFBSSxxQkFBYyxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsS0FBSyxFQUFFLE1BQU0sQ0FBQyxDQUFDO1lBQzVELE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxFQUFFLEVBQUUsTUFBTSxDQUFDLENBQUM7WUFFNUQsSUFBSSxLQUFLLEtBQUssU0FBUyxJQUFJLFNBQVMsR0FBRyxLQUFLLEVBQUU7Z0JBQzVDLFNBQVMsR0FBRyxLQUFLLENBQUM7Z0JBQ2xCLGNBQWMsR0FBRyxNQUFNLENBQUM7YUFDekI7UUFDSCxDQUFDLENBQUMsQ0FBQztRQUVILE9BQU8sY0FBYyxDQUFDO0lBQ3hCLENBQUM7Q0FFRjtBQWxDRCxrREFrQ0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBY3Rpb24sIFBsYXllciwgU3RhdGUsIFRyYWluZXJDYXJkLCBUcmFpbmVyVHlwZSwgUGxheUNhcmRBY3Rpb24sXG4gIFBsYXllclR5cGUsIFNsb3RUeXBlIH0gZnJvbSAnLi4vLi4vZ2FtZSc7XG5pbXBvcnQgeyBTaW1wbGVUYWN0aWMgfSBmcm9tICcuL3NpbXBsZS10YWN0aWNzJztcblxuZXhwb3J0IGNsYXNzIFBsYXlTdXBwb3J0ZXJUYWN0aWMgZXh0ZW5kcyBTaW1wbGVUYWN0aWMge1xuXG4gIHB1YmxpYyB1c2VUYWN0aWMoc3RhdGU6IFN0YXRlLCBwbGF5ZXI6IFBsYXllcik6IEFjdGlvbiB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKHBsYXllci5zdXBwb3J0ZXIuY2FyZHMubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHN1cHBvcnRlcnMgPSBwbGF5ZXIuaGFuZC5jYXJkcy5maWx0ZXIoYyA9PiB7XG4gICAgICByZXR1cm4gYyBpbnN0YW5jZW9mIFRyYWluZXJDYXJkICYmIGMudHJhaW5lclR5cGUgPT09IFRyYWluZXJUeXBlLlNVUFBPUlRFUjtcbiAgICB9KTtcblxuICAgIGlmIChzdXBwb3J0ZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHN1cHBvcnRlckJvbnVzID0gdGhpcy5vcHRpb25zLnNjb3Jlcy50YWN0aWNzLnN1cHBvcnRlckJvbnVzO1xuICAgIGNvbnN0IHRhcmdldCA9IHsgcGxheWVyOiBQbGF5ZXJUeXBlLkFOWSwgc2xvdDogU2xvdFR5cGUuQk9BUkQsIGluZGV4OiAwIH07XG4gICAgbGV0IGJlc3RTY29yZSA9IHRoaXMuZ2V0U3RhdGVTY29yZShzdGF0ZSwgcGxheWVyLmlkKSAtIHN1cHBvcnRlckJvbnVzO1xuICAgIGxldCBwbGF5Q2FyZEFjdGlvbjogUGxheUNhcmRBY3Rpb24gfCB1bmRlZmluZWQ7XG5cbiAgICBzdXBwb3J0ZXJzLmZvckVhY2goY2FyZCA9PiB7XG4gICAgICBjb25zdCBpbmRleCA9IHBsYXllci5oYW5kLmNhcmRzLmluZGV4T2YoY2FyZCk7XG4gICAgICBjb25zdCBhY3Rpb24gPSBuZXcgUGxheUNhcmRBY3Rpb24ocGxheWVyLmlkLCBpbmRleCwgdGFyZ2V0KTtcbiAgICAgIGNvbnN0IHNjb3JlID0gdGhpcy5ldmFsdWF0ZUFjdGlvbihzdGF0ZSwgcGxheWVyLmlkLCBhY3Rpb24pO1xuXG4gICAgICBpZiAoc2NvcmUgIT09IHVuZGVmaW5lZCAmJiBiZXN0U2NvcmUgPCBzY29yZSkge1xuICAgICAgICBiZXN0U2NvcmUgPSBzY29yZTtcbiAgICAgICAgcGxheUNhcmRBY3Rpb24gPSBhY3Rpb247XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gcGxheUNhcmRBY3Rpb247XG4gIH1cblxufVxuIl19
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qb2VteWVyc2NvdWdoL0RvY3VtZW50cy9HaXRIdWIvcHRjZy1lcHNkL3B0Y2ctc2VydmVyL3NyYy9zaW1wbGUtYm90L3NpbXBsZS10YWN0aWNzL3BsYXktc3VwcG9ydGVyLXRhY3RpYy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiMnFNQWlCSzt1T0FqQkwsS0FBQSxDQUFBLE1BQUEsMEJBQUEsT0FBQSxDQUFBLFlBQUEsQ0FBQSxDQUFBLENBRUEsS0FBQSxDQUFBLGdCQUFBLDBCQUFBLE9BQUEsQ0FBQSxrQkFBQSxDQUFBLENBQUEsQ0FFQSxLQUFhLENBQUEsbUJBQWIsU0FBeUMsZ0JBQUEsQ0FBQSxZQUF6QyxDQUFxRCxDQUU1QyxTQUFTLENBQUMsS0FBRCxDQUFlLE1BQWYsQ0FBNkIsaURBQzNDLEdBQUksTUFBTSxDQUFDLFNBQVAsQ0FBaUIsS0FBakIsQ0FBdUIsTUFBdkIsQ0FBZ0MsQ0FBcEMsQ0FBdUMsb0RBQ3JDLE9BQ0QsQ0FGRCxpQ0FJQSxLQUFNLENBQUEsVUFBVSwwQkFBRyxNQUFNLENBQUMsSUFBUCxDQUFZLEtBQVosQ0FBa0IsTUFBbEIsQ0FBeUIsQ0FBQyxFQUFHLGlEQUM5QyxNQUFPLDRCQUFBLENBQUMsV0FBWSxDQUFBLE1BQUEsQ0FBQSxXQUFiLCtCQUE0QixDQUFDLENBQUMsV0FBRixHQUFrQixNQUFBLENBQUEsV0FBQSxDQUFZLFNBQTFELENBQVAsQ0FDRCxDQUZrQixDQUFILENBQWhCLENBTDJDLHdCQVMzQyxHQUFJLFVBQVUsQ0FBQyxNQUFYLEdBQXNCLENBQTFCLENBQTZCLG9EQUMzQixPQUNELENBRkQsaUNBSUEsS0FBTSxDQUFBLGNBQWMsMkJBQUcsS0FBSyxPQUFMLENBQWEsTUFBYixDQUFvQixPQUFwQixDQUE0QixjQUEvQixDQUFwQixDQUNBLEtBQU0sQ0FBQSxNQUFNLDJCQUFHLENBQUUsTUFBTSxDQUFFLE1BQUEsQ0FBQSxVQUFBLENBQVcsR0FBckIsQ0FBMEIsSUFBSSxDQUFFLE1BQUEsQ0FBQSxRQUFBLENBQVMsS0FBekMsQ0FBZ0QsS0FBSyxDQUFFLENBQXZELENBQUgsQ0FBWixDQUNBLEdBQUksQ0FBQSxTQUFTLDJCQUFHLEtBQUssYUFBTCxDQUFtQixLQUFuQixDQUEwQixNQUFNLENBQUMsRUFBakMsRUFBdUMsY0FBMUMsQ0FBYixDQUNBLEdBQUksQ0FBQSxjQUFKLENBaEIyQyx5QkFrQjNDLFVBQVUsQ0FBQyxPQUFYLENBQW1CLElBQUksRUFBRyx5QkFDeEIsS0FBTSxDQUFBLEtBQUssMkJBQUcsTUFBTSxDQUFDLElBQVAsQ0FBWSxLQUFaLENBQWtCLE9BQWxCLENBQTBCLElBQTFCLENBQUgsQ0FBWCxDQUNBLEtBQU0sQ0FBQSxNQUFNLDJCQUFHLEdBQUksQ0FBQSxNQUFBLENBQUEsY0FBSixDQUFtQixNQUFNLENBQUMsRUFBMUIsQ0FBOEIsS0FBOUIsQ0FBcUMsTUFBckMsQ0FBSCxDQUFaLENBQ0EsS0FBTSxDQUFBLEtBQUssMkJBQUcsS0FBSyxjQUFMLENBQW9CLEtBQXBCLENBQTJCLE1BQU0sQ0FBQyxFQUFsQyxDQUFzQyxNQUF0QyxDQUFILENBQVgsQ0FId0IseUJBS3hCLEdBQUksNEJBQUEsS0FBSyxHQUFLLFNBQVYsK0JBQXVCLFNBQVMsQ0FBRyxLQUFuQyxDQUFKLENBQThDLHFEQUM1QyxTQUFTLENBQUcsS0FBWixDQUQ0Qyx5QkFFNUMsY0FBYyxDQUFHLE1BQWpCLENBQ0QsQ0FIRCxpQ0FJRCxDQVRELEVBbEIyQyx5QkE2QjNDLE1BQU8sQ0FBQSxjQUFQLENBQ0QsQ0FoQ2tELEMseUJBQXJELE9BQUEsQ0FBQSxtQkFBQSxDQUFBLG1CQUFBLEMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBY3Rpb24sIFBsYXllciwgU3RhdGUsIFRyYWluZXJDYXJkLCBUcmFpbmVyVHlwZSwgUGxheUNhcmRBY3Rpb24sXG4gIFBsYXllclR5cGUsIFNsb3RUeXBlIH0gZnJvbSAnLi4vLi4vZ2FtZSc7XG5pbXBvcnQgeyBTaW1wbGVUYWN0aWMgfSBmcm9tICcuL3NpbXBsZS10YWN0aWNzJztcblxuZXhwb3J0IGNsYXNzIFBsYXlTdXBwb3J0ZXJUYWN0aWMgZXh0ZW5kcyBTaW1wbGVUYWN0aWMge1xuXG4gIHB1YmxpYyB1c2VUYWN0aWMoc3RhdGU6IFN0YXRlLCBwbGF5ZXI6IFBsYXllcik6IEFjdGlvbiB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKHBsYXllci5zdXBwb3J0ZXIuY2FyZHMubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHN1cHBvcnRlcnMgPSBwbGF5ZXIuaGFuZC5jYXJkcy5maWx0ZXIoYyA9PiB7XG4gICAgICByZXR1cm4gYyBpbnN0YW5jZW9mIFRyYWluZXJDYXJkICYmIGMudHJhaW5lclR5cGUgPT09IFRyYWluZXJUeXBlLlNVUFBPUlRFUjtcbiAgICB9KTtcblxuICAgIGlmIChzdXBwb3J0ZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHN1cHBvcnRlckJvbnVzID0gdGhpcy5vcHRpb25zLnNjb3Jlcy50YWN0aWNzLnN1cHBvcnRlckJvbnVzO1xuICAgIGNvbnN0IHRhcmdldCA9IHsgcGxheWVyOiBQbGF5ZXJUeXBlLkFOWSwgc2xvdDogU2xvdFR5cGUuQk9BUkQsIGluZGV4OiAwIH07XG4gICAgbGV0IGJlc3RTY29yZSA9IHRoaXMuZ2V0U3RhdGVTY29yZShzdGF0ZSwgcGxheWVyLmlkKSAtIHN1cHBvcnRlckJvbnVzO1xuICAgIGxldCBwbGF5Q2FyZEFjdGlvbjogUGxheUNhcmRBY3Rpb24gfCB1bmRlZmluZWQ7XG5cbiAgICBzdXBwb3J0ZXJzLmZvckVhY2goY2FyZCA9PiB7XG4gICAgICBjb25zdCBpbmRleCA9IHBsYXllci5oYW5kLmNhcmRzLmluZGV4T2YoY2FyZCk7XG4gICAgICBjb25zdCBhY3Rpb24gPSBuZXcgUGxheUNhcmRBY3Rpb24ocGxheWVyLmlkLCBpbmRleCwgdGFyZ2V0KTtcbiAgICAgIGNvbnN0IHNjb3JlID0gdGhpcy5ldmFsdWF0ZUFjdGlvbihzdGF0ZSwgcGxheWVyLmlkLCBhY3Rpb24pO1xuXG4gICAgICBpZiAoc2NvcmUgIT09IHVuZGVmaW5lZCAmJiBiZXN0U2NvcmUgPCBzY29yZSkge1xuICAgICAgICBiZXN0U2NvcmUgPSBzY29yZTtcbiAgICAgICAgcGxheUNhcmRBY3Rpb24gPSBhY3Rpb247XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gcGxheUNhcmRBY3Rpb247XG4gIH1cblxufVxuIl19