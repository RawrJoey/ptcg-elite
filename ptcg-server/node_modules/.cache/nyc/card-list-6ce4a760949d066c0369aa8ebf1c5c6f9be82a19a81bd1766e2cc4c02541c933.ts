"use strict";function cov_2jgui7hse7(){var path="/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/game/store/state/card-list.ts";var hash="4f824c220defcb41cbea9f15166b7a3596aab312";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/game/store/state/card-list.ts",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:62}},"1":{start:{line:3,column:0},end:{line:3,column:26}},"2":{start:{line:4,column:23},end:{line:4,column:58}},"3":{start:{line:5,column:21},end:{line:5,column:48}},"4":{start:{line:6,column:23},end:{line:6,column:52}},"5":{start:{line:9,column:8},end:{line:9,column:24}},"6":{start:{line:10,column:8},end:{line:10,column:30}},"7":{start:{line:11,column:8},end:{line:11,column:30}},"8":{start:{line:14,column:25},end:{line:14,column:39}},"9":{start:{line:15,column:28},end:{line:15,column:68}},"10":{start:{line:16,column:8},end:{line:22,column:11}},"11":{start:{line:17,column:25},end:{line:17,column:60}},"12":{start:{line:18,column:12},end:{line:20,column:13}},"13":{start:{line:19,column:16},end:{line:19,column:100}},"14":{start:{line:21,column:12},end:{line:21,column:24}},"15":{start:{line:23,column:8},end:{line:23,column:24}},"16":{start:{line:27,column:8},end:{line:29,column:9}},"17":{start:{line:28,column:12},end:{line:28,column:19}},"18":{start:{line:31,column:26},end:{line:31,column:39}},"19":{start:{line:32,column:8},end:{line:32,column:40}},"20":{start:{line:32,column:33},end:{line:32,column:38}},"21":{start:{line:33,column:8},end:{line:37,column:9}},"22":{start:{line:33,column:21},end:{line:33,column:22}},"23":{start:{line:34,column:12},end:{line:36,column:13}},"24":{start:{line:35,column:16},end:{line:35,column:23}},"25":{start:{line:39,column:21},end:{line:39,column:39}},"26":{start:{line:40,column:8},end:{line:42,column:9}},"27":{start:{line:40,column:21},end:{line:40,column:22}},"28":{start:{line:41,column:12},end:{line:41,column:43}},"29":{start:{line:45,column:8},end:{line:47,column:9}},"30":{start:{line:46,column:12},end:{line:46,column:38}},"31":{start:{line:48,column:8},end:{line:48,column:51}},"32":{start:{line:49,column:22},end:{line:49,column:49}},"33":{start:{line:50,column:8},end:{line:50,column:41}},"34":{start:{line:53,column:8},end:{line:59,column:9}},"35":{start:{line:53,column:21},end:{line:53,column:22}},"36":{start:{line:54,column:26},end:{line:54,column:54}},"37":{start:{line:55,column:12},end:{line:58,column:13}},"38":{start:{line:56,column:29},end:{line:56,column:56}},"39":{start:{line:57,column:16},end:{line:57,column:48}},"40":{start:{line:62,column:8},end:{line:62,column:46}},"41":{start:{line:65,column:8},end:{line:65,column:51}},"42":{start:{line:66,column:8},end:{line:66,column:42}},"43":{start:{line:69,column:8},end:{line:80,column:11}},"44":{start:{line:70,column:12},end:{line:78,column:13}},"45":{start:{line:71,column:16},end:{line:77,column:17}},"46":{start:{line:72,column:34},end:{line:72,column:40}},"47":{start:{line:73,column:37},end:{line:73,column:47}},"48":{start:{line:74,column:20},end:{line:76,column:21}},"49":{start:{line:75,column:24},end:{line:75,column:37}},"50":{start:{line:79,column:12},end:{line:79,column:24}},"51":{start:{line:83,column:8},end:{line:83,column:41}},"52":{start:{line:86,column:0},end:{line:86,column:28}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:8,column:4},end:{line:8,column:5}},loc:{start:{line:8,column:18},end:{line:12,column:5}},line:8},"1":{name:"(anonymous_1)",decl:{start:{line:13,column:4},end:{line:13,column:5}},loc:{start:{line:13,column:27},end:{line:24,column:5}},line:13},"2":{name:"(anonymous_2)",decl:{start:{line:16,column:35},end:{line:16,column:36}},loc:{start:{line:16,column:47},end:{line:22,column:9}},line:16},"3":{name:"(anonymous_3)",decl:{start:{line:25,column:4},end:{line:25,column:5}},loc:{start:{line:25,column:22},end:{line:43,column:5}},line:25},"4":{name:"(anonymous_4)",decl:{start:{line:32,column:23},end:{line:32,column:24}},loc:{start:{line:32,column:33},end:{line:32,column:38}},line:32},"5":{name:"(anonymous_5)",decl:{start:{line:44,column:4},end:{line:44,column:5}},loc:{start:{line:44,column:31},end:{line:51,column:5}},line:44},"6":{name:"(anonymous_6)",decl:{start:{line:52,column:4},end:{line:52,column:5}},loc:{start:{line:52,column:36},end:{line:60,column:5}},line:52},"7":{name:"(anonymous_7)",decl:{start:{line:61,column:4},end:{line:61,column:5}},loc:{start:{line:61,column:34},end:{line:63,column:5}},line:61},"8":{name:"(anonymous_8)",decl:{start:{line:64,column:4},end:{line:64,column:5}},loc:{start:{line:64,column:19},end:{line:67,column:5}},line:64},"9":{name:"(anonymous_9)",decl:{start:{line:68,column:4},end:{line:68,column:5}},loc:{start:{line:68,column:18},end:{line:81,column:5}},line:68},"10":{name:"(anonymous_10)",decl:{start:{line:69,column:33},end:{line:69,column:34}},loc:{start:{line:69,column:38},end:{line:80,column:9}},line:69},"11":{name:"(anonymous_11)",decl:{start:{line:82,column:4},end:{line:82,column:5}},loc:{start:{line:82,column:17},end:{line:84,column:5}},line:82}},branchMap:{"0":{loc:{start:{line:18,column:12},end:{line:20,column:13}},type:"if",locations:[{start:{line:18,column:12},end:{line:20,column:13}},{start:{line:18,column:12},end:{line:20,column:13}}],line:18},"1":{loc:{start:{line:27,column:8},end:{line:29,column:9}},type:"if",locations:[{start:{line:27,column:8},end:{line:29,column:9}},{start:{line:27,column:8},end:{line:29,column:9}}],line:27},"2":{loc:{start:{line:34,column:12},end:{line:36,column:13}},type:"if",locations:[{start:{line:34,column:12},end:{line:36,column:13}},{start:{line:34,column:12},end:{line:36,column:13}}],line:34},"3":{loc:{start:{line:45,column:8},end:{line:47,column:9}},type:"if",locations:[{start:{line:45,column:8},end:{line:47,column:9}},{start:{line:45,column:8},end:{line:47,column:9}}],line:45},"4":{loc:{start:{line:55,column:12},end:{line:58,column:13}},type:"if",locations:[{start:{line:55,column:12},end:{line:58,column:13}},{start:{line:55,column:12},end:{line:58,column:13}}],line:55},"5":{loc:{start:{line:64,column:8},end:{line:64,column:17}},type:"default-arg",locations:[{start:{line:64,column:16},end:{line:64,column:17}}],line:64},"6":{loc:{start:{line:71,column:16},end:{line:77,column:17}},type:"if",locations:[{start:{line:71,column:16},end:{line:77,column:17}},{start:{line:71,column:16},end:{line:77,column:17}}],line:71},"7":{loc:{start:{line:74,column:20},end:{line:76,column:21}},type:"if",locations:[{start:{line:74,column:20},end:{line:76,column:21}},{start:{line:74,column:20},end:{line:76,column:21}}],line:74}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0],"6":[0,0],"7":[0,0]},inputSourceMap:{version:3,file:"/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/game/store/state/card-list.ts",sources:["/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/game/store/state/card-list.ts"],names:[],mappings:"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",sourcesContent:["import { Card } from '../card/card';\nimport { CardManager } from '../../cards/card-manager';\nimport { GameError } from '../../game-error';\nimport { GameMessage } from '../../game-message';\n\nexport class CardList {\n\n  public cards: Card[] = [];\n\n  public isPublic: boolean = false;\n\n  public isSecret: boolean = false;\n\n  public static fromList(names: string[]): CardList {\n    const cardList = new CardList();\n    const cardManager = CardManager.getInstance();\n    cardList.cards = names.map(cardName => {\n      const card = cardManager.getCardByName(cardName);\n      if (card === undefined) {\n        throw new GameError(GameMessage.UNKNOWN_CARD, cardName);\n      }\n      return card;\n    });\n    return cardList;\n  }\n\n  public applyOrder(order: number[]) {\n    // Check if order is valid, same length\n    if (this.cards.length !== order.length) {\n      return;\n    }\n    // Contains all elements exacly one time\n    const orderCopy = order.slice();\n    orderCopy.sort((a, b) => a - b);\n    for (let i = 0; i < orderCopy.length; i++) {\n      if (i !== orderCopy[i]) {\n        return;\n      }\n    }\n    // Apply order\n    const copy = this.cards.slice();\n    for (let i = 0; i < order.length; i++) {\n      this.cards[i] = copy[order[i]];\n    }\n  }\n\n  public moveTo(destination: CardList, count?: number): void {\n    if (count === undefined) {\n      count = this.cards.length;\n    }\n\n    count = Math.min(count, this.cards.length);\n    const cards = this.cards.splice(0, count);\n    destination.cards.push(...cards);\n  }\n\n  public moveCardsTo(cards: Card[], destination: CardList): void {\n    for (let i = 0; i < cards.length; i++) {\n      const index = this.cards.indexOf(cards[i]);\n      if (index !== -1) {\n        const card = this.cards.splice(index, 1);\n        destination.cards.push(card[0]);\n      }\n    }\n  }\n\n  public moveCardTo(card: Card, destination: CardList): void {\n    this.moveCardsTo([card], destination);\n  }\n\n  public top(count: number = 1): Card[] {\n    count = Math.min(count, this.cards.length);\n    return this.cards.slice(0, count);\n  }\n\n  public filter(query: Partial<Card>): Card[] {\n    return this.cards.filter(c => {\n      for (const key in query) {\n        if (Object.prototype.hasOwnProperty.call(query, key)) {\n          const value: any = (c as any)[key];\n          const expected: any = (query as any)[key];\n          if (value !== expected) {\n            return false;\n          }\n        }\n      }\n      return true;\n    });\n  }\n\n  public count(query: Partial<Card>): number {\n    return this.filter(query).length;\n  }\n\n}\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"4f824c220defcb41cbea9f15166b7a3596aab312"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2jgui7hse7=function(){return actualCoverage;};}return actualCoverage;}cov_2jgui7hse7();cov_2jgui7hse7().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_2jgui7hse7().s[1]++;exports.CardList=void 0;const card_manager_1=(cov_2jgui7hse7().s[2]++,require("../../cards/card-manager"));const game_error_1=(cov_2jgui7hse7().s[3]++,require("../../game-error"));const game_message_1=(cov_2jgui7hse7().s[4]++,require("../../game-message"));class CardList{constructor(){cov_2jgui7hse7().f[0]++;cov_2jgui7hse7().s[5]++;this.cards=[];cov_2jgui7hse7().s[6]++;this.isPublic=false;cov_2jgui7hse7().s[7]++;this.isSecret=false;}static fromList(names){cov_2jgui7hse7().f[1]++;const cardList=(cov_2jgui7hse7().s[8]++,new CardList());const cardManager=(cov_2jgui7hse7().s[9]++,card_manager_1.CardManager.getInstance());cov_2jgui7hse7().s[10]++;cardList.cards=names.map(cardName=>{cov_2jgui7hse7().f[2]++;const card=(cov_2jgui7hse7().s[11]++,cardManager.getCardByName(cardName));cov_2jgui7hse7().s[12]++;if(card===undefined){cov_2jgui7hse7().b[0][0]++;cov_2jgui7hse7().s[13]++;throw new game_error_1.GameError(game_message_1.GameMessage.UNKNOWN_CARD,cardName);}else{cov_2jgui7hse7().b[0][1]++;}cov_2jgui7hse7().s[14]++;return card;});cov_2jgui7hse7().s[15]++;return cardList;}applyOrder(order){cov_2jgui7hse7().f[3]++;cov_2jgui7hse7().s[16]++;// Check if order is valid, same length
if(this.cards.length!==order.length){cov_2jgui7hse7().b[1][0]++;cov_2jgui7hse7().s[17]++;return;}else{cov_2jgui7hse7().b[1][1]++;}// Contains all elements exacly one time
const orderCopy=(cov_2jgui7hse7().s[18]++,order.slice());cov_2jgui7hse7().s[19]++;orderCopy.sort((a,b)=>{cov_2jgui7hse7().f[4]++;cov_2jgui7hse7().s[20]++;return a-b;});cov_2jgui7hse7().s[21]++;for(let i=(cov_2jgui7hse7().s[22]++,0);i<orderCopy.length;i++){cov_2jgui7hse7().s[23]++;if(i!==orderCopy[i]){cov_2jgui7hse7().b[2][0]++;cov_2jgui7hse7().s[24]++;return;}else{cov_2jgui7hse7().b[2][1]++;}}// Apply order
const copy=(cov_2jgui7hse7().s[25]++,this.cards.slice());cov_2jgui7hse7().s[26]++;for(let i=(cov_2jgui7hse7().s[27]++,0);i<order.length;i++){cov_2jgui7hse7().s[28]++;this.cards[i]=copy[order[i]];}}moveTo(destination,count){cov_2jgui7hse7().f[5]++;cov_2jgui7hse7().s[29]++;if(count===undefined){cov_2jgui7hse7().b[3][0]++;cov_2jgui7hse7().s[30]++;count=this.cards.length;}else{cov_2jgui7hse7().b[3][1]++;}cov_2jgui7hse7().s[31]++;count=Math.min(count,this.cards.length);const cards=(cov_2jgui7hse7().s[32]++,this.cards.splice(0,count));cov_2jgui7hse7().s[33]++;destination.cards.push(...cards);}moveCardsTo(cards,destination){cov_2jgui7hse7().f[6]++;cov_2jgui7hse7().s[34]++;for(let i=(cov_2jgui7hse7().s[35]++,0);i<cards.length;i++){const index=(cov_2jgui7hse7().s[36]++,this.cards.indexOf(cards[i]));cov_2jgui7hse7().s[37]++;if(index!==-1){cov_2jgui7hse7().b[4][0]++;const card=(cov_2jgui7hse7().s[38]++,this.cards.splice(index,1));cov_2jgui7hse7().s[39]++;destination.cards.push(card[0]);}else{cov_2jgui7hse7().b[4][1]++;}}}moveCardTo(card,destination){cov_2jgui7hse7().f[7]++;cov_2jgui7hse7().s[40]++;this.moveCardsTo([card],destination);}top(count=(cov_2jgui7hse7().b[5][0]++,1)){cov_2jgui7hse7().f[8]++;cov_2jgui7hse7().s[41]++;count=Math.min(count,this.cards.length);cov_2jgui7hse7().s[42]++;return this.cards.slice(0,count);}filter(query){cov_2jgui7hse7().f[9]++;cov_2jgui7hse7().s[43]++;return this.cards.filter(c=>{cov_2jgui7hse7().f[10]++;cov_2jgui7hse7().s[44]++;for(const key in query){cov_2jgui7hse7().s[45]++;if(Object.prototype.hasOwnProperty.call(query,key)){cov_2jgui7hse7().b[6][0]++;const value=(cov_2jgui7hse7().s[46]++,c[key]);const expected=(cov_2jgui7hse7().s[47]++,query[key]);cov_2jgui7hse7().s[48]++;if(value!==expected){cov_2jgui7hse7().b[7][0]++;cov_2jgui7hse7().s[49]++;return false;}else{cov_2jgui7hse7().b[7][1]++;}}else{cov_2jgui7hse7().b[6][1]++;}}cov_2jgui7hse7().s[50]++;return true;});}count(query){cov_2jgui7hse7().f[11]++;cov_2jgui7hse7().s[51]++;return this.filter(query).length;}}cov_2jgui7hse7().s[52]++;exports.CardList=CardList;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2pvZW15ZXJzY291Z2gvRG9jdW1lbnRzL0dpdEh1Yi9wdGNnLWVwc2QvcHRjZy1zZXJ2ZXIvc3JjL2dhbWUvc3RvcmUvc3RhdGUvY2FyZC1saXN0LnRzIiwic291cmNlcyI6WyIvVXNlcnMvam9lbXllcnNjb3VnaC9Eb2N1bWVudHMvR2l0SHViL3B0Y2ctZXBzZC9wdGNnLXNlcnZlci9zcmMvZ2FtZS9zdG9yZS9zdGF0ZS9jYXJkLWxpc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQ0EsMkRBQXVEO0FBQ3ZELGlEQUE2QztBQUM3QyxxREFBaUQ7QUFFakQsTUFBYSxRQUFRO0lBQXJCO1FBRVMsVUFBSyxHQUFXLEVBQUUsQ0FBQztRQUVuQixhQUFRLEdBQVksS0FBSyxDQUFDO1FBRTFCLGFBQVEsR0FBWSxLQUFLLENBQUM7SUFtRm5DLENBQUM7SUFqRlEsTUFBTSxDQUFDLFFBQVEsQ0FBQyxLQUFlO1FBQ3BDLE1BQU0sUUFBUSxHQUFHLElBQUksUUFBUSxFQUFFLENBQUM7UUFDaEMsTUFBTSxXQUFXLEdBQUcsMEJBQVcsQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUM5QyxRQUFRLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLEVBQUU7WUFDcEMsTUFBTSxJQUFJLEdBQUcsV0FBVyxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUNqRCxJQUFJLElBQUksS0FBSyxTQUFTLEVBQUU7Z0JBQ3RCLE1BQU0sSUFBSSxzQkFBUyxDQUFDLDBCQUFXLENBQUMsWUFBWSxFQUFFLFFBQVEsQ0FBQyxDQUFDO2FBQ3pEO1lBQ0QsT0FBTyxJQUFJLENBQUM7UUFDZCxDQUFDLENBQUMsQ0FBQztRQUNILE9BQU8sUUFBUSxDQUFDO0lBQ2xCLENBQUM7SUFFTSxVQUFVLENBQUMsS0FBZTtRQUMvQix1Q0FBdUM7UUFDdkMsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sS0FBSyxLQUFLLENBQUMsTUFBTSxFQUFF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QUMsQ0FBQztvQkFDbkMsTUFBTSxRQUFRLEdBQVMsS0FBYSxDQUFDLEdBQUcsQ0FBQyxDQUFDO29CQUMxQyxJQUFJLEtBQUssS0FBSyxRQUFRLEVBQUU7d0JBQ3RCLE9BQU8sS0FBSyxDQUFDO3FCQUNkO2lCQUNGO2FBQ0Y7WUFDRCxPQUFPLElBQUksQ0FBQztRQUNkLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUVNLEtBQUssQ0FBQyxLQUFvQjtRQUMvQixPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsTUFBTSxDQUFDO0lBQ25DLENBQUM7Q0FFRjtBQXpGRCw0QkF5RkMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDYXJkIH0gZnJvbSAnLi4vY2FyZC9jYXJkJztcbmltcG9ydCB7IENhcmRNYW5hZ2VyIH0gZnJvbSAnLi4vLi4vY2FyZHMvY2FyZC1tYW5hZ2VyJztcbmltcG9ydCB7IEdhbWVFcnJvciB9IGZyb20gJy4uLy4uL2dhbWUtZXJyb3InO1xuaW1wb3J0IHsgR2FtZU1lc3NhZ2UgfSBmcm9tICcuLi8uLi9nYW1lLW1lc3NhZ2UnO1xuXG5leHBvcnQgY2xhc3MgQ2FyZExpc3Qge1xuXG4gIHB1YmxpYyBjYXJkczogQ2FyZFtdID0gW107XG5cbiAgcHVibGljIGlzUHVibGljOiBib29sZWFuID0gZmFsc2U7XG5cbiAgcHVibGljIGlzU2VjcmV0OiBib29sZWFuID0gZmFsc2U7XG5cbiAgcHVibGljIHN0YXRpYyBmcm9tTGlzdChuYW1lczogc3RyaW5nW10pOiBDYXJkTGlzdCB7XG4gICAgY29uc3QgY2FyZExpc3QgPSBuZXcgQ2FyZExpc3QoKTtcbiAgICBjb25zdCBjYXJkTWFuYWdlciA9IENhcmRNYW5hZ2VyLmdldEluc3RhbmNlKCk7XG4gICAgY2FyZExpc3QuY2FyZHMgPSBuYW1lcy5tYXAoY2FyZE5hbWUgPT4ge1xuICAgICAgY29uc3QgY2FyZCA9IGNhcmRNYW5hZ2VyLmdldENhcmRCeU5hbWUoY2FyZE5hbWUpO1xuICAgICAgaWYgKGNhcmQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgR2FtZUVycm9yKEdhbWVNZXNzYWdlLlVOS05PV05fQ0FSRCwgY2FyZE5hbWUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNhcmQ7XG4gICAgfSk7XG4gICAgcmV0dXJuIGNhcmRMaXN0O1xuICB9XG5cbiAgcHVibGljIGFwcGx5T3JkZXIob3JkZXI6IG51bWJlcltdKSB7XG4gICAgLy8gQ2hlY2sgaWYgb3JkZXIgaXMgdmFsaWQsIHNhbWUgbGVuZ3RoXG4gICAgaWYgKHRoaXMuY2FyZHMubGVuZ3RoICE9PSBvcmRlci5sZW5ndGgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gQ29udGFpbnMgYWxsIGVsZW1lbnRzIGV4YWNseSBvbmUgdGltZVxuICAgIGNvbnN0IG9yZGVyQ29weSA9IG9yZGVyLnNsaWNlKCk7XG4gICAgb3JkZXJDb3B5LnNvcnQoKGEsIGIpID0+IGEgLSBiKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9yZGVyQ29weS5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGkgIT09IG9yZGVyQ29weVtpXSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIC8vIEFwcGx5IG9yZGVyXG4gICAgY29uc3QgY29weSA9IHRoaXMuY2FyZHMuc2xpY2UoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9yZGVyLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLmNhcmRzW2ldID0gY29weVtvcmRlcltpXV07XG4gICAgfVxuICB9XG5cbiAgcHVibGljIG1vdmVUbyhkZXN0aW5hdGlvbjogQ2FyZExpc3QsIGNvdW50PzogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKGNvdW50ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvdW50ID0gdGhpcy5jYXJkcy5sZW5ndGg7XG4gICAgfVxuXG4gICAgY291bnQgPSBNYXRoLm1pbihjb3VudCwgdGhpcy5jYXJkcy5sZW5ndGgpO1xuICAgIGNvbnN0IGNhcmRzID0gdGhpcy5jYXJkcy5zcGxpY2UoMCwgY291bnQpO1xuICAgIGRlc3RpbmF0aW9uLmNhcmRzLnB1c2goLi4uY2FyZHMpO1xuICB9XG5cbiAgcHVibGljIG1vdmVDYXJkc1RvKGNhcmRzOiBDYXJkW10sIGRlc3RpbmF0aW9uOiBDYXJkTGlzdCk6IHZvaWQge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2FyZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5jYXJkcy5pbmRleE9mKGNhcmRzW2ldKTtcbiAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgY29uc3QgY2FyZCA9IHRoaXMuY2FyZHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgZGVzdGluYXRpb24uY2FyZHMucHVzaChjYXJkWzBdKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgbW92ZUNhcmRUbyhjYXJkOiBDYXJkLCBkZXN0aW5hdGlvbjogQ2FyZExpc3QpOiB2b2lkIHtcbiAgICB0aGlzLm1vdmVDYXJkc1RvKFtjYXJkXSwgZGVzdGluYXRpb24pO1xuICB9XG5cbiAgcHVibGljIHRvcChjb3VudDogbnVtYmVyID0gMSk6IENhcmRbXSB7XG4gICAgY291bnQgPSBNYXRoLm1pbihjb3VudCwgdGhpcy5jYXJkcy5sZW5ndGgpO1xuICAgIHJldHVybiB0aGlzLmNhcmRzLnNsaWNlKDAsIGNvdW50KTtcbiAgfVxuXG4gIHB1YmxpYyBmaWx0ZXIocXVlcnk6IFBhcnRpYWw8Q2FyZD4pOiBDYXJkW10ge1xuICAgIHJldHVybiB0aGlzLmNhcmRzLmZpbHRlcihjID0+IHtcbiAgICAgIGZvciAoY29uc3Qga2V5IGluIHF1ZXJ5KSB7XG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocXVlcnksIGtleSkpIHtcbiAgICAgICAgICBjb25zdCB2YWx1ZTogYW55ID0gKGMgYXMgYW55KVtrZXldO1xuICAgICAgICAgIGNvbnN0IGV4cGVjdGVkOiBhbnkgPSAocXVlcnkgYXMgYW55KVtrZXldO1xuICAgICAgICAgIGlmICh2YWx1ZSAhPT0gZXhwZWN0ZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIGNvdW50KHF1ZXJ5OiBQYXJ0aWFsPENhcmQ+KTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5maWx0ZXIocXVlcnkpLmxlbmd0aDtcbiAgfVxuXG59XG4iXX0=
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qb2VteWVyc2NvdWdoL0RvY3VtZW50cy9HaXRIdWIvcHRjZy1lcHNkL3B0Y2ctc2VydmVyL3NyYy9nYW1lL3N0b3JlL3N0YXRlL2NhcmQtbGlzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiMnlaQWdCSTs0TkFmSixLQUFBLENBQUEsY0FBQSwwQkFBQSxPQUFBLENBQUEsMEJBQUEsQ0FBQSxDQUFBLENBQ0EsS0FBQSxDQUFBLFlBQUEsMEJBQUEsT0FBQSxDQUFBLGtCQUFBLENBQUEsQ0FBQSxDQUNBLEtBQUEsQ0FBQSxjQUFBLDBCQUFBLE9BQUEsQ0FBQSxvQkFBQSxDQUFBLENBQUEsQ0FFQSxLQUFhLENBQUEsUUFBUSxDQUFyQixXQUFBLEVBQUEsaURBRVMsS0FBQSxLQUFBLENBQWdCLEVBQWhCLENBRlQsd0JBSVMsS0FBQSxRQUFBLENBQW9CLEtBQXBCLENBSlQsd0JBTVMsS0FBQSxRQUFBLENBQW9CLEtBQXBCLENBbUZSLENBakZ1QixNQUFSLENBQUEsUUFBUSxDQUFDLEtBQUQsQ0FBZ0IseUJBQ3BDLEtBQU0sQ0FBQSxRQUFRLDBCQUFHLEdBQUksQ0FBQSxRQUFKLEVBQUgsQ0FBZCxDQUNBLEtBQU0sQ0FBQSxXQUFXLDBCQUFHLGNBQUEsQ0FBQSxXQUFBLENBQVksV0FBWixFQUFILENBQWpCLENBRm9DLHlCQUdwQyxRQUFRLENBQUMsS0FBVCxDQUFpQixLQUFLLENBQUMsR0FBTixDQUFVLFFBQVEsRUFBRyx5QkFDcEMsS0FBTSxDQUFBLElBQUksMkJBQUcsV0FBVyxDQUFDLGFBQVosQ0FBMEIsUUFBMUIsQ0FBSCxDQUFWLENBRG9DLHlCQUVwQyxHQUFJLElBQUksR0FBSyxTQUFiLENBQXdCLHFEQUN0QixLQUFNLElBQUksQ0FBQSxZQUFBLENBQUEsU0FBSixDQUFjLGNBQUEsQ0FBQSxXQUFBLENBQVksWUFBMUIsQ0FBd0MsUUFBeEMsQ0FBTixDQUNELENBRkQsaUNBRm9DLHlCQUtwQyxNQUFPLENBQUEsSUFBUCxDQUNELENBTmdC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QXFCLGtEQUNoQyxNQUFPLE1BQUssS0FBTCxDQUFXLE1BQVgsQ0FBa0IsQ0FBQyxFQUFHLG1EQUMzQixJQUFLLEtBQU0sQ0FBQSxHQUFYLEdBQWtCLENBQUEsS0FBbEIsQ0FBeUIsMEJBQ3ZCLEdBQUksTUFBTSxDQUFDLFNBQVAsQ0FBaUIsY0FBakIsQ0FBZ0MsSUFBaEMsQ0FBcUMsS0FBckMsQ0FBNEMsR0FBNUMsQ0FBSixDQUFzRCw0QkFDcEQsS0FBTSxDQUFBLEtBQUssMkJBQVMsQ0FBUyxDQUFDLEdBQUQsQ0FBbEIsQ0FBWCxDQUNBLEtBQU0sQ0FBQSxRQUFRLDJCQUFTLEtBQWEsQ0FBQyxHQUFELENBQXRCLENBQWQsQ0FGb0QseUJBR3BELEdBQUksS0FBSyxHQUFLLFFBQWQsQ0FBd0IscURBQ3RCLE1BQU8sTUFBUCxDQUNELENBRkQsaUNBR0QsQ0FORCxpQ0FPRCxDQVQwQix5QkFVM0IsTUFBTyxLQUFQLENBQ0QsQ0FYTSxDQUFQLENBWUQsQ0FFTSxLQUFLLENBQUMsS0FBRCxDQUFxQixtREFDL0IsTUFBTyxNQUFLLE1BQUwsQ0FBWSxLQUFaLEVBQW1CLE1BQTFCLENBQ0QsQ0F2RmtCLEMseUJBQXJCLE9BQUEsQ0FBQSxRQUFBLENBQUEsUUFBQSxDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ2FyZCB9IGZyb20gJy4uL2NhcmQvY2FyZCc7XG5pbXBvcnQgeyBDYXJkTWFuYWdlciB9IGZyb20gJy4uLy4uL2NhcmRzL2NhcmQtbWFuYWdlcic7XG5pbXBvcnQgeyBHYW1lRXJyb3IgfSBmcm9tICcuLi8uLi9nYW1lLWVycm9yJztcbmltcG9ydCB7IEdhbWVNZXNzYWdlIH0gZnJvbSAnLi4vLi4vZ2FtZS1tZXNzYWdlJztcblxuZXhwb3J0IGNsYXNzIENhcmRMaXN0IHtcblxuICBwdWJsaWMgY2FyZHM6IENhcmRbXSA9IFtdO1xuXG4gIHB1YmxpYyBpc1B1YmxpYzogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIHB1YmxpYyBpc1NlY3JldDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIHB1YmxpYyBzdGF0aWMgZnJvbUxpc3QobmFtZXM6IHN0cmluZ1tdKTogQ2FyZExpc3Qge1xuICAgIGNvbnN0IGNhcmRMaXN0ID0gbmV3IENhcmRMaXN0KCk7XG4gICAgY29uc3QgY2FyZE1hbmFnZXIgPSBDYXJkTWFuYWdlci5nZXRJbnN0YW5jZSgpO1xuICAgIGNhcmRMaXN0LmNhcmRzID0gbmFtZXMubWFwKGNhcmROYW1lID0+IHtcbiAgICAgIGNvbnN0IGNhcmQgPSBjYXJkTWFuYWdlci5nZXRDYXJkQnlOYW1lKGNhcmROYW1lKTtcbiAgICAgIGlmIChjYXJkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEdhbWVFcnJvcihHYW1lTWVzc2FnZS5VTktOT1dOX0NBUkQsIGNhcmROYW1lKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjYXJkO1xuICAgIH0pO1xuICAgIHJldHVybiBjYXJkTGlzdDtcbiAgfVxuXG4gIHB1YmxpYyBhcHBseU9yZGVyKG9yZGVyOiBudW1iZXJbXSkge1xuICAgIC8vIENoZWNrIGlmIG9yZGVyIGlzIHZhbGlkLCBzYW1lIGxlbmd0aFxuICAgIGlmICh0aGlzLmNhcmRzLmxlbmd0aCAhPT0gb3JkZXIubGVuZ3RoKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIENvbnRhaW5zIGFsbCBlbGVtZW50cyBleGFjbHkgb25lIHRpbWVcbiAgICBjb25zdCBvcmRlckNvcHkgPSBvcmRlci5zbGljZSgpO1xuICAgIG9yZGVyQ29weS5zb3J0KChhLCBiKSA9PiBhIC0gYik7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvcmRlckNvcHkubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChpICE9PSBvcmRlckNvcHlbaV0pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBBcHBseSBvcmRlclxuICAgIGNvbnN0IGNvcHkgPSB0aGlzLmNhcmRzLnNsaWNlKCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvcmRlci5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5jYXJkc1tpXSA9IGNvcHlbb3JkZXJbaV1dO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBtb3ZlVG8oZGVzdGluYXRpb246IENhcmRMaXN0LCBjb3VudD86IG51bWJlcik6IHZvaWQge1xuICAgIGlmIChjb3VudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBjb3VudCA9IHRoaXMuY2FyZHMubGVuZ3RoO1xuICAgIH1cblxuICAgIGNvdW50ID0gTWF0aC5taW4oY291bnQsIHRoaXMuY2FyZHMubGVuZ3RoKTtcbiAgICBjb25zdCBjYXJkcyA9IHRoaXMuY2FyZHMuc3BsaWNlKDAsIGNvdW50KTtcbiAgICBkZXN0aW5hdGlvbi5jYXJkcy5wdXNoKC4uLmNhcmRzKTtcbiAgfVxuXG4gIHB1YmxpYyBtb3ZlQ2FyZHNUbyhjYXJkczogQ2FyZFtdLCBkZXN0aW5hdGlvbjogQ2FyZExpc3QpOiB2b2lkIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNhcmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBpbmRleCA9IHRoaXMuY2FyZHMuaW5kZXhPZihjYXJkc1tpXSk7XG4gICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgIGNvbnN0IGNhcmQgPSB0aGlzLmNhcmRzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIGRlc3RpbmF0aW9uLmNhcmRzLnB1c2goY2FyZFswXSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHVibGljIG1vdmVDYXJkVG8oY2FyZDogQ2FyZCwgZGVzdGluYXRpb246IENhcmRMaXN0KTogdm9pZCB7XG4gICAgdGhpcy5tb3ZlQ2FyZHNUbyhbY2FyZF0sIGRlc3RpbmF0aW9uKTtcbiAgfVxuXG4gIHB1YmxpYyB0b3AoY291bnQ6IG51bWJlciA9IDEpOiBDYXJkW10ge1xuICAgIGNvdW50ID0gTWF0aC5taW4oY291bnQsIHRoaXMuY2FyZHMubGVuZ3RoKTtcbiAgICByZXR1cm4gdGhpcy5jYXJkcy5zbGljZSgwLCBjb3VudCk7XG4gIH1cblxuICBwdWJsaWMgZmlsdGVyKHF1ZXJ5OiBQYXJ0aWFsPENhcmQ+KTogQ2FyZFtdIHtcbiAgICByZXR1cm4gdGhpcy5jYXJkcy5maWx0ZXIoYyA9PiB7XG4gICAgICBmb3IgKGNvbnN0IGtleSBpbiBxdWVyeSkge1xuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHF1ZXJ5LCBrZXkpKSB7XG4gICAgICAgICAgY29uc3QgdmFsdWU6IGFueSA9IChjIGFzIGFueSlba2V5XTtcbiAgICAgICAgICBjb25zdCBleHBlY3RlZDogYW55ID0gKHF1ZXJ5IGFzIGFueSlba2V5XTtcbiAgICAgICAgICBpZiAodmFsdWUgIT09IGV4cGVjdGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBjb3VudChxdWVyeTogUGFydGlhbDxDYXJkPik6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuZmlsdGVyKHF1ZXJ5KS5sZW5ndGg7XG4gIH1cblxufVxuIl19