"use strict";function cov_1haabvkyf0(){var path="/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/utils/utils.ts";var hash="6268eaf47aa314f9c076fd9581348a734b39cb44";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/utils/utils.ts",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:62}},"1":{start:{line:3,column:0},end:{line:3,column:92}},"2":{start:{line:5,column:4},end:{line:7,column:5}},"3":{start:{line:6,column:8},end:{line:6,column:20}},"4":{start:{line:9,column:4},end:{line:11,column:5}},"5":{start:{line:10,column:8},end:{line:10,column:21}},"6":{start:{line:13,column:4},end:{line:15,column:5}},"7":{start:{line:14,column:8},end:{line:14,column:21}},"8":{start:{line:18,column:4},end:{line:39,column:5}},"9":{start:{line:19,column:8},end:{line:21,column:9}},"10":{start:{line:20,column:12},end:{line:20,column:21}},"11":{start:{line:23,column:8},end:{line:25,column:9}},"12":{start:{line:24,column:12},end:{line:24,column:25}},"13":{start:{line:27,column:8},end:{line:29,column:9}},"14":{start:{line:28,column:12},end:{line:28,column:21}},"15":{start:{line:31,column:8},end:{line:33,column:9}},"16":{start:{line:32,column:12},end:{line:32,column:25}},"17":{start:{line:35,column:8},end:{line:37,column:9}},"18":{start:{line:36,column:12},end:{line:36,column:25}},"19":{start:{line:40,column:4},end:{line:45,column:5}},"20":{start:{line:41,column:8},end:{line:43,column:9}},"21":{start:{line:42,column:12},end:{line:42,column:25}},"22":{start:{line:46,column:4},end:{line:46,column:16}},"23":{start:{line:48,column:0},end:{line:48,column:34}},"24":{start:{line:50,column:4},end:{line:52,column:5}},"25":{start:{line:51,column:8},end:{line:51,column:15}},"26":{start:{line:53,column:4},end:{line:55,column:5}},"27":{start:{line:54,column:8},end:{line:54,column:62}},"28":{start:{line:54,column:33},end:{line:54,column:60}},"29":{start:{line:56,column:4},end:{line:63,column:5}},"30":{start:{line:57,column:8},end:{line:62,column:9}},"31":{start:{line:58,column:12},end:{line:61,column:13}},"32":{start:{line:59,column:16},end:{line:59,column:51}},"33":{start:{line:60,column:16},end:{line:60,column:51}},"34":{start:{line:65,column:0},end:{line:65,column:34}},"35":{start:{line:67,column:4},end:{line:69,column:5}},"36":{start:{line:68,column:8},end:{line:68,column:20}},"37":{start:{line:70,column:4},end:{line:72,column:5}},"38":{start:{line:71,column:8},end:{line:71,column:70}},"39":{start:{line:71,column:36},end:{line:71,column:68}},"40":{start:{line:73,column:4},end:{line:89,column:5}},"41":{start:{line:74,column:8},end:{line:76,column:9}},"42":{start:{line:74,column:35},end:{line:74,column:59}},"43":{start:{line:75,column:12},end:{line:75,column:26}},"44":{start:{line:77,column:20},end:{line:77,column:58}},"45":{start:{line:77,column:40},end:{line:77,column:57}},"46":{start:{line:78,column:8},end:{line:80,column:9}},"47":{start:{line:79,column:12},end:{line:79,column:25}},"48":{start:{line:81,column:21},end:{line:81,column:42}},"49":{start:{line:82,column:8},end:{line:82,column:44}},"50":{start:{line:83,column:8},end:{line:87,column:9}},"51":{start:{line:84,column:12},end:{line:86,column:13}},"52":{start:{line:85,column:16},end:{line:85,column:68}},"53":{start:{line:88,column:8},end:{line:88,column:20}},"54":{start:{line:90,column:4},end:{line:90,column:18}},"55":{start:{line:92,column:0},end:{line:92,column:30}},"56":{start:{line:94,column:4},end:{line:96,column:5}},"57":{start:{line:95,column:8},end:{line:95,column:17}},"58":{start:{line:97,column:17},end:{line:97,column:40}},"59":{start:{line:98,column:13},end:{line:98,column:24}},"60":{start:{line:99,column:4},end:{line:104,column:5}},"61":{start:{line:99,column:27},end:{line:99,column:38}},"62":{start:{line:100,column:8},end:{line:102,column:9}},"63":{start:{line:101,column:12},end:{line:101,column:19}},"64":{start:{line:103,column:8},end:{line:103,column:20}},"65":{start:{line:105,column:4},end:{line:105,column:14}},"66":{start:{line:107,column:0},end:{line:107,column:32}}},fnMap:{"0":{name:"deepCompare",decl:{start:{line:4,column:9},end:{line:4,column:20}},loc:{start:{line:4,column:27},end:{line:47,column:1}},line:4},"1":{name:"deepIterate",decl:{start:{line:49,column:9},end:{line:49,column:20}},loc:{start:{line:49,column:39},end:{line:64,column:1}},line:49},"2":{name:"(anonymous_2)",decl:{start:{line:54,column:23},end:{line:54,column:24}},loc:{start:{line:54,column:33},end:{line:54,column:60}},line:54},"3":{name:"deepClone",decl:{start:{line:66,column:9},end:{line:66,column:18}},loc:{start:{line:66,column:54},end:{line:91,column:1}},line:66},"4":{name:"(anonymous_4)",decl:{start:{line:71,column:26},end:{line:71,column:27}},loc:{start:{line:71,column:36},end:{line:71,column:68}},line:71},"5":{name:"(anonymous_5)",decl:{start:{line:74,column:25},end:{line:74,column:26}},loc:{start:{line:74,column:35},end:{line:74,column:59}},line:74},"6":{name:"(anonymous_6)",decl:{start:{line:77,column:32},end:{line:77,column:33}},loc:{start:{line:77,column:40},end:{line:77,column:57}},line:77},"7":{name:"generateId",decl:{start:{line:93,column:9},end:{line:93,column:19}},loc:{start:{line:93,column:27},end:{line:106,column:1}},line:93},"8":{name:"(anonymous_8)",decl:{start:{line:99,column:22},end:{line:99,column:23}},loc:{start:{line:99,column:27},end:{line:99,column:38}},line:99}},branchMap:{"0":{loc:{start:{line:5,column:4},end:{line:7,column:5}},type:"if",locations:[{start:{line:5,column:4},end:{line:7,column:5}},{start:{line:5,column:4},end:{line:7,column:5}}],line:5},"1":{loc:{start:{line:9,column:4},end:{line:11,column:5}},type:"if",locations:[{start:{line:9,column:4},end:{line:11,column:5}},{start:{line:9,column:4},end:{line:11,column:5}}],line:9},"2":{loc:{start:{line:9,column:8},end:{line:9,column:56}},type:"binary-expr",locations:[{start:{line:9,column:8},end:{line:9,column:30}},{start:{line:9,column:34},end:{line:9,column:56}}],line:9},"3":{loc:{start:{line:13,column:4},end:{line:15,column:5}},type:"if",locations:[{start:{line:13,column:4},end:{line:15,column:5}},{start:{line:13,column:4},end:{line:15,column:5}}],line:13},"4":{loc:{start:{line:19,column:8},end:{line:21,column:9}},type:"if",locations:[{start:{line:19,column:8},end:{line:21,column:9}},{start:{line:19,column:8},end:{line:21,column:9}}],line:19},"5":{loc:{start:{line:23,column:8},end:{line:25,column:9}},type:"if",locations:[{start:{line:23,column:8},end:{line:25,column:9}},{start:{line:23,column:8},end:{line:25,column:9}}],line:23},"6":{loc:{start:{line:27,column:8},end:{line:29,column:9}},type:"if",locations:[{start:{line:27,column:8},end:{line:29,column:9}},{start:{line:27,column:8},end:{line:29,column:9}}],line:27},"7":{loc:{start:{line:31,column:8},end:{line:33,column:9}},type:"if",locations:[{start:{line:31,column:8},end:{line:33,column:9}},{start:{line:31,column:8},end:{line:33,column:9}}],line:31},"8":{loc:{start:{line:35,column:8},end:{line:37,column:9}},type:"if",locations:[{start:{line:35,column:8},end:{line:37,column:9}},{start:{line:35,column:8},end:{line:37,column:9}}],line:35},"9":{loc:{start:{line:41,column:8},end:{line:43,column:9}},type:"if",locations:[{start:{line:41,column:8},end:{line:43,column:9}},{start:{line:41,column:8},end:{line:43,column:9}}],line:41},"10":{loc:{start:{line:41,column:12},end:{line:41,column:101}},type:"binary-expr",locations:[{start:{line:41,column:12},end:{line:41,column:54}},{start:{line:41,column:58},end:{line:41,column:101}}],line:41},"11":{loc:{start:{line:50,column:4},end:{line:52,column:5}},type:"if",locations:[{start:{line:50,column:4},end:{line:52,column:5}},{start:{line:50,column:4},end:{line:52,column:5}}],line:50},"12":{loc:{start:{line:53,column:4},end:{line:55,column:5}},type:"if",locations:[{start:{line:53,column:4},end:{line:55,column:5}},{start:{line:53,column:4},end:{line:55,column:5}}],line:53},"13":{loc:{start:{line:56,column:4},end:{line:63,column:5}},type:"if",locations:[{start:{line:56,column:4},end:{line:63,column:5}},{start:{line:56,column:4},end:{line:63,column:5}}],line:56},"14":{loc:{start:{line:58,column:12},end:{line:61,column:13}},type:"if",locations:[{start:{line:58,column:12},end:{line:61,column:13}},{start:{line:58,column:12},end:{line:61,column:13}}],line:58},"15":{loc:{start:{line:66,column:27},end:{line:66,column:39}},type:"default-arg",locations:[{start:{line:66,column:37},end:{line:66,column:39}}],line:66},"16":{loc:{start:{line:66,column:41},end:{line:66,column:52}},type:"default-arg",locations:[{start:{line:66,column:50},end:{line:66,column:52}}],line:66},"17":{loc:{start:{line:67,column:4},end:{line:69,column:5}},type:"if",locations:[{start:{line:67,column:4},end:{line:69,column:5}},{start:{line:67,column:4},end:{line:69,column:5}}],line:67},"18":{loc:{start:{line:70,column:4},end:{line:72,column:5}},type:"if",locations:[{start:{line:70,column:4},end:{line:72,column:5}},{start:{line:70,column:4},end:{line:72,column:5}}],line:70},"19":{loc:{start:{line:73,column:4},end:{line:89,column:5}},type:"if",locations:[{start:{line:73,column:4},end:{line:89,column:5}},{start:{line:73,column:4},end:{line:89,column:5}}],line:73},"20":{loc:{start:{line:74,column:8},end:{line:76,column:9}},type:"if",locations:[{start:{line:74,column:8},end:{line:76,column:9}},{start:{line:74,column:8},end:{line:76,column:9}}],line:74},"21":{loc:{start:{line:78,column:8},end:{line:80,column:9}},type:"if",locations:[{start:{line:78,column:8},end:{line:80,column:9}},{start:{line:78,column:8},end:{line:80,column:9}}],line:78},"22":{loc:{start:{line:84,column:12},end:{line:86,column:13}},type:"if",locations:[{start:{line:84,column:12},end:{line:86,column:13}},{start:{line:84,column:12},end:{line:86,column:13}}],line:84},"23":{loc:{start:{line:94,column:4},end:{line:96,column:5}},type:"if",locations:[{start:{line:94,column:4},end:{line:96,column:5}},{start:{line:94,column:4},end:{line:96,column:5}}],line:94},"24":{loc:{start:{line:100,column:8},end:{line:102,column:9}},type:"if",locations:[{start:{line:100,column:8},end:{line:102,column:9}},{start:{line:100,column:8},end:{line:102,column:9}}],line:100}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0],"16":[0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0]},inputSourceMap:{version:3,file:"/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/utils/utils.ts",sources:["/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/utils/utils.ts"],names:[],mappings:"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",sourcesContent:["\nexport function deepCompare(x: any, y: any): boolean {\n\n  if (x === y) { return true; }\n  // if both x and y are null or undefined and exactly the same\n\n  if (!(x instanceof Object) || !(y instanceof Object)) { return false; }\n  // if they are not strictly equal, they both need to be Objects\n\n  if (x.constructor !== y.constructor) { return false; }\n  // they must have the exact same prototype chain, the closest we can do is\n  // test there constructor.\n\n  for (const p in x) {\n    if (!Object.prototype.hasOwnProperty.call(x, p)) { continue; }\n    // other properties were tested using x.constructor === y.constructor\n\n    if (!Object.prototype.hasOwnProperty.call(y, p)) { return false; }\n    // allows to compare x[ p ] and y[ p ] when set to undefined\n\n    if (x[p] === y[p]) { continue; }\n    // if they have the same strict value or identity then they are equal\n\n    if (typeof (x[p]) !== 'object') { return false; }\n    // Numbers, Strings, Functions, Booleans must be strictly equal\n\n    if (!deepCompare(x[p], y[p])) { return false; }\n    // Objects and Arrays must be tested recursively\n  }\n\n  for (const p in y) {\n    if (Object.prototype.hasOwnProperty.call(y, p) && !Object.prototype.hasOwnProperty.call(x, p)) { return false; }\n    // allows x[ p ] to be set to undefined\n  }\n  return true;\n}\n\nexport function deepIterate(source: any, callback: (holder: any, key: string, value: any) => void): void {\n  if (source === null) { return; }\n\n  if (source instanceof Array) {\n    source.forEach((item: any) => deepIterate(item, callback));\n  }\n\n  if (source instanceof Object) {\n    for (const key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        deepIterate(source[key], callback);\n        callback(source, key, source[key]);\n      }\n    }\n  }\n}\n\nexport function deepClone(source: any, ignores: Function[] = [], refMap: {s: Object, d: Object}[] = []): any {\n  if (source === null) { return null; }\n\n  if (source instanceof Array) {\n    return source.map((item: any) => deepClone(item, ignores, refMap));\n  }\n\n  if (source instanceof Object) {\n    if (ignores.some(ignore => source instanceof ignore)) {\n      return source;\n    }\n    const ref = refMap.find(item => item.s === source);\n    if (ref !== undefined) {\n      return ref.d;\n    }\n    const dest = Object.create(source);\n    refMap.push({s: source, d: dest});\n    for (const key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        dest[key] = deepClone(source[key], ignores, refMap);\n      }\n    }\n    return dest;\n  }\n\n  return source;\n}\n\nexport function generateId<T extends {id: number}[]>(array: T): number {\n  if (array.length === 0) {\n    return 1;\n  }\n\n  const last = array[array.length - 1];\n  let id = last.id + 1;\n\n  while (array.find(g => g.id === id)) {\n    if (id === Number.MAX_VALUE) {\n      id = 0;\n    }\n    id = id + 1;\n  }\n\n  return id;\n}\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6268eaf47aa314f9c076fd9581348a734b39cb44"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1haabvkyf0=function(){return actualCoverage;};}return actualCoverage;}cov_1haabvkyf0();cov_1haabvkyf0().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_1haabvkyf0().s[1]++;exports.generateId=exports.deepClone=exports.deepIterate=exports.deepCompare=void 0;function deepCompare(x,y){cov_1haabvkyf0().f[0]++;cov_1haabvkyf0().s[2]++;if(x===y){cov_1haabvkyf0().b[0][0]++;cov_1haabvkyf0().s[3]++;return true;}else{cov_1haabvkyf0().b[0][1]++;}// if both x and y are null or undefined and exactly the same
cov_1haabvkyf0().s[4]++;if((cov_1haabvkyf0().b[2][0]++,!(x instanceof Object))||(cov_1haabvkyf0().b[2][1]++,!(y instanceof Object))){cov_1haabvkyf0().b[1][0]++;cov_1haabvkyf0().s[5]++;return false;}else{cov_1haabvkyf0().b[1][1]++;}// if they are not strictly equal, they both need to be Objects
cov_1haabvkyf0().s[6]++;if(x.constructor!==y.constructor){cov_1haabvkyf0().b[3][0]++;cov_1haabvkyf0().s[7]++;return false;}else{cov_1haabvkyf0().b[3][1]++;}// they must have the exact same prototype chain, the closest we can do is
// test there constructor.
cov_1haabvkyf0().s[8]++;for(const p in x){cov_1haabvkyf0().s[9]++;if(!Object.prototype.hasOwnProperty.call(x,p)){cov_1haabvkyf0().b[4][0]++;cov_1haabvkyf0().s[10]++;continue;}else{cov_1haabvkyf0().b[4][1]++;}// other properties were tested using x.constructor === y.constructor
cov_1haabvkyf0().s[11]++;if(!Object.prototype.hasOwnProperty.call(y,p)){cov_1haabvkyf0().b[5][0]++;cov_1haabvkyf0().s[12]++;return false;}else{cov_1haabvkyf0().b[5][1]++;}// allows to compare x[ p ] and y[ p ] when set to undefined
cov_1haabvkyf0().s[13]++;if(x[p]===y[p]){cov_1haabvkyf0().b[6][0]++;cov_1haabvkyf0().s[14]++;continue;}else{cov_1haabvkyf0().b[6][1]++;}// if they have the same strict value or identity then they are equal
cov_1haabvkyf0().s[15]++;if(typeof x[p]!=='object'){cov_1haabvkyf0().b[7][0]++;cov_1haabvkyf0().s[16]++;return false;}else{cov_1haabvkyf0().b[7][1]++;}// Numbers, Strings, Functions, Booleans must be strictly equal
cov_1haabvkyf0().s[17]++;if(!deepCompare(x[p],y[p])){cov_1haabvkyf0().b[8][0]++;cov_1haabvkyf0().s[18]++;return false;}else{cov_1haabvkyf0().b[8][1]++;}// Objects and Arrays must be tested recursively
}cov_1haabvkyf0().s[19]++;for(const p in y){cov_1haabvkyf0().s[20]++;if((cov_1haabvkyf0().b[10][0]++,Object.prototype.hasOwnProperty.call(y,p))&&(cov_1haabvkyf0().b[10][1]++,!Object.prototype.hasOwnProperty.call(x,p))){cov_1haabvkyf0().b[9][0]++;cov_1haabvkyf0().s[21]++;return false;}else{cov_1haabvkyf0().b[9][1]++;}// allows x[ p ] to be set to undefined
}cov_1haabvkyf0().s[22]++;return true;}cov_1haabvkyf0().s[23]++;exports.deepCompare=deepCompare;function deepIterate(source,callback){cov_1haabvkyf0().f[1]++;cov_1haabvkyf0().s[24]++;if(source===null){cov_1haabvkyf0().b[11][0]++;cov_1haabvkyf0().s[25]++;return;}else{cov_1haabvkyf0().b[11][1]++;}cov_1haabvkyf0().s[26]++;if(source instanceof Array){cov_1haabvkyf0().b[12][0]++;cov_1haabvkyf0().s[27]++;source.forEach(item=>{cov_1haabvkyf0().f[2]++;cov_1haabvkyf0().s[28]++;return deepIterate(item,callback);});}else{cov_1haabvkyf0().b[12][1]++;}cov_1haabvkyf0().s[29]++;if(source instanceof Object){cov_1haabvkyf0().b[13][0]++;cov_1haabvkyf0().s[30]++;for(const key in source){cov_1haabvkyf0().s[31]++;if(Object.prototype.hasOwnProperty.call(source,key)){cov_1haabvkyf0().b[14][0]++;cov_1haabvkyf0().s[32]++;deepIterate(source[key],callback);cov_1haabvkyf0().s[33]++;callback(source,key,source[key]);}else{cov_1haabvkyf0().b[14][1]++;}}}else{cov_1haabvkyf0().b[13][1]++;}}cov_1haabvkyf0().s[34]++;exports.deepIterate=deepIterate;function deepClone(source,ignores=(cov_1haabvkyf0().b[15][0]++,[]),refMap=(cov_1haabvkyf0().b[16][0]++,[])){cov_1haabvkyf0().f[3]++;cov_1haabvkyf0().s[35]++;if(source===null){cov_1haabvkyf0().b[17][0]++;cov_1haabvkyf0().s[36]++;return null;}else{cov_1haabvkyf0().b[17][1]++;}cov_1haabvkyf0().s[37]++;if(source instanceof Array){cov_1haabvkyf0().b[18][0]++;cov_1haabvkyf0().s[38]++;return source.map(item=>{cov_1haabvkyf0().f[4]++;cov_1haabvkyf0().s[39]++;return deepClone(item,ignores,refMap);});}else{cov_1haabvkyf0().b[18][1]++;}cov_1haabvkyf0().s[40]++;if(source instanceof Object){cov_1haabvkyf0().b[19][0]++;cov_1haabvkyf0().s[41]++;if(ignores.some(ignore=>{cov_1haabvkyf0().f[5]++;cov_1haabvkyf0().s[42]++;return source instanceof ignore;})){cov_1haabvkyf0().b[20][0]++;cov_1haabvkyf0().s[43]++;return source;}else{cov_1haabvkyf0().b[20][1]++;}const ref=(cov_1haabvkyf0().s[44]++,refMap.find(item=>{cov_1haabvkyf0().f[6]++;cov_1haabvkyf0().s[45]++;return item.s===source;}));cov_1haabvkyf0().s[46]++;if(ref!==undefined){cov_1haabvkyf0().b[21][0]++;cov_1haabvkyf0().s[47]++;return ref.d;}else{cov_1haabvkyf0().b[21][1]++;}const dest=(cov_1haabvkyf0().s[48]++,Object.create(source));cov_1haabvkyf0().s[49]++;refMap.push({s:source,d:dest});cov_1haabvkyf0().s[50]++;for(const key in source){cov_1haabvkyf0().s[51]++;if(Object.prototype.hasOwnProperty.call(source,key)){cov_1haabvkyf0().b[22][0]++;cov_1haabvkyf0().s[52]++;dest[key]=deepClone(source[key],ignores,refMap);}else{cov_1haabvkyf0().b[22][1]++;}}cov_1haabvkyf0().s[53]++;return dest;}else{cov_1haabvkyf0().b[19][1]++;}cov_1haabvkyf0().s[54]++;return source;}cov_1haabvkyf0().s[55]++;exports.deepClone=deepClone;function generateId(array){cov_1haabvkyf0().f[7]++;cov_1haabvkyf0().s[56]++;if(array.length===0){cov_1haabvkyf0().b[23][0]++;cov_1haabvkyf0().s[57]++;return 1;}else{cov_1haabvkyf0().b[23][1]++;}const last=(cov_1haabvkyf0().s[58]++,array[array.length-1]);let id=(cov_1haabvkyf0().s[59]++,last.id+1);cov_1haabvkyf0().s[60]++;while(array.find(g=>{cov_1haabvkyf0().f[8]++;cov_1haabvkyf0().s[61]++;return g.id===id;})){cov_1haabvkyf0().s[62]++;if(id===Number.MAX_VALUE){cov_1haabvkyf0().b[24][0]++;cov_1haabvkyf0().s[63]++;id=0;}else{cov_1haabvkyf0().b[24][1]++;}cov_1haabvkyf0().s[64]++;id=id+1;}cov_1haabvkyf0().s[65]++;return id;}cov_1haabvkyf0().s[66]++;exports.generateId=generateId;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2pvZW15ZXJzY291Z2gvRG9jdW1lbnRzL0dpdEh1Yi9wdGNnLWVwc2QvcHRjZy1zZXJ2ZXIvc3JjL3V0aWxzL3V0aWxzLnRzIiwic291cmNlcyI6WyIvVXNlcnMvam9lbXllcnNjb3VnaC9Eb2N1bWVudHMvR2l0SHViL3B0Y2ctZXBzZC9wdGNnLXNlcnZlci9zcmMvdXRpbHMvdXRpbHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQ0EsU0FBZ0IsV0FBVyxDQUFDLENBQU0sRUFBRSxDQUFNO0lBRXhDLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRTtRQUFFLE9BQU8sSUFBSSxDQUFDO0tBQUU7SUFDN0IsNkRBQTZEO0lBRTdELElBQUksQ0FBQyxDQUFDLENBQUMsWUFBWSxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxZQUFZLE1BQU0sQ0FBQyxFQUFFO1FBQUUsT0FBTyxLQUFLLENBQUM7S0FBRTtJQUN2RSwrREFBK0Q7SUFFL0QsSUFBSSxDQUFDLENBQUMsV0FBVyxLQUFLLENBQUMsQ0FBQyxXQUFXLEVBQUU7UUFBRSxPQUFPLEtBQUssQ0FBQztLQUFFO0lBQ3RELDBFQUEwRTtJQUMxRSwwQkFBMEI7SUFFMUIsS0FBSyxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUU7UUFDakIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUU7WUFBRSxTQUFTO1NBQUU7UUFDOUQscUVBQXFFO1FBRXJFLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFO1lBQUUsT0FBTyxLQUFLLENBQUM7U0FBRTtRQUNsRSw0REFBNEQ7UUFFNUQsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFO1lBQUUsU0FBUztTQUFFO1FBQ2hDLHFFQUFxRTtR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QUFFO2dCQUNyRCxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsU0FBUyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsRUFBRSxPQUFPLEVBQUUsTUFBTSxDQUFDLENBQUM7YUFDckQ7U0FDRjtRQUNELE9BQU8sSUFBSSxDQUFDO0tBQ2I7SUFFRCxPQUFPLE1BQU0sQ0FBQztBQUNoQixDQUFDO0FBMUJELDhCQTBCQztBQUVELFNBQWdCLFVBQVUsQ0FBMkIsS0FBUTtJQUMzRCxJQUFJLEtBQUssQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFO1FBQ3RCLE9BQU8sQ0FBQyxDQUFDO0tBQ1Y7SUFFRCxNQUFNLElBQUksR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQztJQUNyQyxJQUFJLEVBQUUsR0FBRyxJQUFJLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztJQUVyQixPQUFPLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFO1FBQ25DLElBQUksRUFBRSxLQUFLLE1BQU0sQ0FBQyxTQUFTLEVBQUU7WUFDM0IsRUFBRSxHQUFHLENBQUMsQ0FBQztTQUNSO1FBQ0QsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7S0FDYjtJQUVELE9BQU8sRUFBRSxDQUFDO0FBQ1osQ0FBQztBQWhCRCxnQ0FnQkMiLCJzb3VyY2VzQ29udGVudCI6WyJcbmV4cG9ydCBmdW5jdGlvbiBkZWVwQ29tcGFyZSh4OiBhbnksIHk6IGFueSk6IGJvb2xlYW4ge1xuXG4gIGlmICh4ID09PSB5KSB7IHJldHVybiB0cnVlOyB9XG4gIC8vIGlmIGJvdGggeCBhbmQgeSBhcmUgbnVsbCBvciB1bmRlZmluZWQgYW5kIGV4YWN0bHkgdGhlIHNhbWVcblxuICBpZiAoISh4IGluc3RhbmNlb2YgT2JqZWN0KSB8fCAhKHkgaW5zdGFuY2VvZiBPYmplY3QpKSB7IHJldHVybiBmYWxzZTsgfVxuICAvLyBpZiB0aGV5IGFyZSBub3Qgc3RyaWN0bHkgZXF1YWwsIHRoZXkgYm90aCBuZWVkIHRvIGJlIE9iamVjdHNcblxuICBpZiAoeC5jb25zdHJ1Y3RvciAhPT0geS5jb25zdHJ1Y3RvcikgeyByZXR1cm4gZmFsc2U7IH1cbiAgLy8gdGhleSBtdXN0IGhhdmUgdGhlIGV4YWN0IHNhbWUgcHJvdG90eXBlIGNoYWluLCB0aGUgY2xvc2VzdCB3ZSBjYW4gZG8gaXNcbiAgLy8gdGVzdCB0aGVyZSBjb25zdHJ1Y3Rvci5cblxuICBmb3IgKGNvbnN0IHAgaW4geCkge1xuICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHgsIHApKSB7IGNvbnRpbnVlOyB9XG4gICAgLy8gb3RoZXIgcHJvcGVydGllcyB3ZXJlIHRlc3RlZCB1c2luZyB4LmNvbnN0cnVjdG9yID09PSB5LmNvbnN0cnVjdG9yXG5cbiAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh5LCBwKSkgeyByZXR1cm4gZmFsc2U7IH1cbiAgICAvLyBhbGxvd3MgdG8gY29tcGFyZSB4WyBwIF0gYW5kIHlbIHAgXSB3aGVuIHNldCB0byB1bmRlZmluZWRcblxuICAgIGlmICh4W3BdID09PSB5W3BdKSB7IGNvbnRpbnVlOyB9XG4gICAgLy8gaWYgdGhleSBoYXZlIHRoZSBzYW1lIHN0cmljdCB2YWx1ZSBvciBpZGVudGl0eSB0aGVuIHRoZXkgYXJlIGVxdWFsXG5cbiAgICBpZiAodHlwZW9mICh4W3BdKSAhPT0gJ29iamVjdCcpIHsgcmV0dXJuIGZhbHNlOyB9XG4gICAgLy8gTnVtYmVycywgU3RyaW5ncywgRnVuY3Rpb25zLCBCb29sZWFucyBtdXN0IGJlIHN0cmljdGx5IGVxdWFsXG5cbiAgICBpZiAoIWRlZXBDb21wYXJlKHhbcF0sIHlbcF0pKSB7IHJldHVybiBmYWxzZTsgfVxuICAgIC8vIE9iamVjdHMgYW5kIEFycmF5cyBtdXN0IGJlIHRlc3RlZCByZWN1cnNpdmVseVxuICB9XG5cbiAgZm9yIChjb25zdCBwIGluIHkpIHtcbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHksIHApICYmICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoeCwgcCkpIHsgcmV0dXJuIGZhbHNlOyB9XG4gICAgLy8gYWxsb3dzIHhbIHAgXSB0byBiZSBzZXQgdG8gdW5kZWZpbmVkXG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWVwSXRlcmF0ZShzb3VyY2U6IGFueSwgY2FsbGJhY2s6IChob2xkZXI6IGFueSwga2V5OiBzdHJpbmcsIHZhbHVlOiBhbnkpID0+IHZvaWQpOiB2b2lkIHtcbiAgaWYgKHNvdXJjZSA9PT0gbnVsbCkgeyByZXR1cm47IH1cblxuICBpZiAoc291cmNlIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICBzb3VyY2UuZm9yRWFjaCgoaXRlbTogYW55KSA9PiBkZWVwSXRlcmF0ZShpdGVtLCBjYWxsYmFjaykpO1xuICB9XG5cbiAgaWYgKHNvdXJjZSBpbnN0YW5jZW9mIE9iamVjdCkge1xuICAgIGZvciAoY29uc3Qga2V5IGluIHNvdXJjZSkge1xuICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHtcbiAgICAgICAgZGVlcEl0ZXJhdGUoc291cmNlW2tleV0sIGNhbGxiYWNrKTtcbiAgICAgICAgY2FsbGJhY2soc291cmNlLCBrZXksIHNvdXJjZVtrZXldKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlZXBDbG9uZShzb3VyY2U6IGFueSwgaWdub3JlczogRnVuY3Rpb25bXSA9IFtdLCByZWZNYXA6IHtzOiBPYmplY3QsIGQ6IE9iamVjdH1bXSA9IFtdKTogYW55IHtcbiAgaWYgKHNvdXJjZSA9PT0gbnVsbCkgeyByZXR1cm4gbnVsbDsgfVxuXG4gIGlmIChzb3VyY2UgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgIHJldHVybiBzb3VyY2UubWFwKChpdGVtOiBhbnkpID0+IGRlZXBDbG9uZShpdGVtLCBpZ25vcmVzLCByZWZNYXApKTtcbiAgfVxuXG4gIGlmIChzb3VyY2UgaW5zdGFuY2VvZiBPYmplY3QpIHtcbiAgICBpZiAoaWdub3Jlcy5zb21lKGlnbm9yZSA9PiBzb3VyY2UgaW5zdGFuY2VvZiBpZ25vcmUpKSB7XG4gICAgICByZXR1cm4gc291cmNlO1xuICAgIH1cbiAgICBjb25zdCByZWYgPSByZWZNYXAuZmluZChpdGVtID0+IGl0ZW0ucyA9PT0gc291cmNlKTtcbiAgICBpZiAocmVmICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiByZWYuZDtcbiAgICB9XG4gICAgY29uc3QgZGVzdCA9IE9iamVjdC5jcmVhdGUoc291cmNlKTtcbiAgICByZWZNYXAucHVzaCh7czogc291cmNlLCBkOiBkZXN0fSk7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gc291cmNlKSB7XG4gICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuICAgICAgICBkZXN0W2tleV0gPSBkZWVwQ2xvbmUoc291cmNlW2tleV0sIGlnbm9yZXMsIHJlZk1hcCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBkZXN0O1xuICB9XG5cbiAgcmV0dXJuIHNvdXJjZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlSWQ8VCBleHRlbmRzIHtpZDogbnVtYmVyfVtdPihhcnJheTogVCk6IG51bWJlciB7XG4gIGlmIChhcnJheS5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gMTtcbiAgfVxuXG4gIGNvbnN0IGxhc3QgPSBhcnJheVthcnJheS5sZW5ndGggLSAxXTtcbiAgbGV0IGlkID0gbGFzdC5pZCArIDE7XG5cbiAgd2hpbGUgKGFycmF5LmZpbmQoZyA9PiBnLmlkID09PSBpZCkpIHtcbiAgICBpZiAoaWQgPT09IE51bWJlci5NQVhfVkFMVUUpIHtcbiAgICAgIGlkID0gMDtcbiAgICB9XG4gICAgaWQgPSBpZCArIDE7XG4gIH1cblxuICByZXR1cm4gaWQ7XG59XG4iXX0=
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qb2VteWVyc2NvdWdoL0RvY3VtZW50cy9HaXRIdWIvcHRjZy1lcHNkL3B0Y2ctc2VydmVyL3NyYy91dGlscy91dGlscy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoidXBpQkFVRTt3UkFURixRQUFnQixDQUFBLFdBQWhCLENBQTRCLENBQTVCLENBQW9DLENBQXBDLENBQTBDLGlEQUV4QyxHQUFJLENBQUMsR0FBSyxDQUFWLENBQWEsb0RBQUUsTUFBTyxLQUFQLENBQWMsQ0FBN0IsaUNBQ0E7QUFId0Msd0JBS3hDLEdBQUksOEJBQUUsQ0FBQyxXQUFZLENBQUEsTUFBZixnQ0FBMEIsRUFBRSxDQUFDLFdBQVksQ0FBQSxNQUFmLENBQTFCLENBQUosQ0FBc0Qsb0RBQUUsTUFBTyxNQUFQLENBQWUsQ0FBdkUsaUNBQ0E7QUFOd0Msd0JBUXhDLEdBQUksQ0FBQyxDQUFDLFdBQUYsR0FBa0IsQ0FBQyxDQUFDLFdBQXhCLENBQXFDLG9EQUFFLE1BQU8sTUFBUCxDQUFlLENBQXRELGlDQUNBO0FBQ0E7QUFWd0Msd0JBWXhDLElBQUssS0FBTSxDQUFBLENBQVgsR0FBZ0IsQ0FBQSxDQUFoQixDQUFtQix5QkFDakIsR0FBSSxDQUFDLE1BQU0sQ0FBQyxTQUFQLENBQWlCLGNBQWpCLENBQWdDLElBQWhDLENBQXFDLENBQXJDLENBQXdDLENBQXhDLENBQUwsQ0FBaUQscURBQUUsU0FBVyxDQUE5RCxpQ0FDQTtBQUZpQix5QkFJakIsR0FBSSxDQUFDLE1BQU0sQ0FBQyxTQUFQLENBQWlCLGNBQWpCLENBQWdDLElBQWhDLENBQXFDLENBQXJDLENBQXdDLENBQXhDLENBQUwsQ0FBaUQscURBQUUsTUFBTyxNQUFQLENBQWUsQ0FBbEUsaUNBQ0E7QUFMaUIseUJBT2pCLEdBQUksQ0FBQyxDQUFDLENBQUQsQ0FBRCxHQUFTLENBQUMsQ0FBQyxDQUFELENBQWQsQ0FBbUIscURBQUUsU0FBVyxDQUFoQyxpQ0FDQTtBQVJpQix5QkFVakIsR0FBSSxNQUFRLENBQUEs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QkFDbkMsR0FBSSxFQUFFLEdBQUssTUFBTSxDQUFDLFNBQWxCLENBQTZCLHNEQUMzQixFQUFFLENBQUcsQ0FBTCxDQUNELENBRkQsa0NBRG1DLHlCQUluQyxFQUFFLENBQUcsRUFBRSxDQUFHLENBQVYsQ0FDRCxDQWIwRCx5QkFlM0QsTUFBTyxDQUFBLEVBQVAsQ0FDRCxDLHlCQWhCRCxPQUFBLENBQUEsVUFBQSxDQUFBLFVBQUEsQyIsInNvdXJjZXNDb250ZW50IjpbIlxuZXhwb3J0IGZ1bmN0aW9uIGRlZXBDb21wYXJlKHg6IGFueSwgeTogYW55KTogYm9vbGVhbiB7XG5cbiAgaWYgKHggPT09IHkpIHsgcmV0dXJuIHRydWU7IH1cbiAgLy8gaWYgYm90aCB4IGFuZCB5IGFyZSBudWxsIG9yIHVuZGVmaW5lZCBhbmQgZXhhY3RseSB0aGUgc2FtZVxuXG4gIGlmICghKHggaW5zdGFuY2VvZiBPYmplY3QpIHx8ICEoeSBpbnN0YW5jZW9mIE9iamVjdCkpIHsgcmV0dXJuIGZhbHNlOyB9XG4gIC8vIGlmIHRoZXkgYXJlIG5vdCBzdHJpY3RseSBlcXVhbCwgdGhleSBib3RoIG5lZWQgdG8gYmUgT2JqZWN0c1xuXG4gIGlmICh4LmNvbnN0cnVjdG9yICE9PSB5LmNvbnN0cnVjdG9yKSB7IHJldHVybiBmYWxzZTsgfVxuICAvLyB0aGV5IG11c3QgaGF2ZSB0aGUgZXhhY3Qgc2FtZSBwcm90b3R5cGUgY2hhaW4sIHRoZSBjbG9zZXN0IHdlIGNhbiBkbyBpc1xuICAvLyB0ZXN0IHRoZXJlIGNvbnN0cnVjdG9yLlxuXG4gIGZvciAoY29uc3QgcCBpbiB4KSB7XG4gICAgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoeCwgcCkpIHsgY29udGludWU7IH1cbiAgICAvLyBvdGhlciBwcm9wZXJ0aWVzIHdlcmUgdGVzdGVkIHVzaW5nIHguY29uc3RydWN0b3IgPT09IHkuY29uc3RydWN0b3JcblxuICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHksIHApKSB7IHJldHVybiBmYWxzZTsgfVxuICAgIC8vIGFsbG93cyB0byBjb21wYXJlIHhbIHAgXSBhbmQgeVsgcCBdIHdoZW4gc2V0IHRvIHVuZGVmaW5lZFxuXG4gICAgaWYgKHhbcF0gPT09IHlbcF0pIHsgY29udGludWU7IH1cbiAgICAvLyBpZiB0aGV5IGhhdmUgdGhlIHNhbWUgc3RyaWN0IHZhbHVlIG9yIGlkZW50aXR5IHRoZW4gdGhleSBhcmUgZXF1YWxcblxuICAgIGlmICh0eXBlb2YgKHhbcF0pICE9PSAnb2JqZWN0JykgeyByZXR1cm4gZmFsc2U7IH1cbiAgICAvLyBOdW1iZXJzLCBTdHJpbmdzLCBGdW5jdGlvbnMsIEJvb2xlYW5zIG11c3QgYmUgc3RyaWN0bHkgZXF1YWxcblxuICAgIGlmICghZGVlcENvbXBhcmUoeFtwXSwgeVtwXSkpIHsgcmV0dXJuIGZhbHNlOyB9XG4gICAgLy8gT2JqZWN0cyBhbmQgQXJyYXlzIG11c3QgYmUgdGVzdGVkIHJlY3Vyc2l2ZWx5XG4gIH1cblxuICBmb3IgKGNvbnN0IHAgaW4geSkge1xuICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoeSwgcCkgJiYgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh4LCBwKSkgeyByZXR1cm4gZmFsc2U7IH1cbiAgICAvLyBhbGxvd3MgeFsgcCBdIHRvIGJlIHNldCB0byB1bmRlZmluZWRcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlZXBJdGVyYXRlKHNvdXJjZTogYW55LCBjYWxsYmFjazogKGhvbGRlcjogYW55LCBrZXk6IHN0cmluZywgdmFsdWU6IGFueSkgPT4gdm9pZCk6IHZvaWQge1xuICBpZiAoc291cmNlID09PSBudWxsKSB7IHJldHVybjsgfVxuXG4gIGlmIChzb3VyY2UgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgIHNvdXJjZS5mb3JFYWNoKChpdGVtOiBhbnkpID0+IGRlZXBJdGVyYXRlKGl0ZW0sIGNhbGxiYWNrKSk7XG4gIH1cblxuICBpZiAoc291cmNlIGluc3RhbmNlb2YgT2JqZWN0KSB7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gc291cmNlKSB7XG4gICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuICAgICAgICBkZWVwSXRlcmF0ZShzb3VyY2Vba2V5XSwgY2FsbGJhY2spO1xuICAgICAgICBjYWxsYmFjayhzb3VyY2UsIGtleSwgc291cmNlW2tleV0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVlcENsb25lKHNvdXJjZTogYW55LCBpZ25vcmVzOiBGdW5jdGlvbltdID0gW10sIHJlZk1hcDoge3M6IE9iamVjdCwgZDogT2JqZWN0fVtdID0gW10pOiBhbnkge1xuICBpZiAoc291cmNlID09PSBudWxsKSB7IHJldHVybiBudWxsOyB9XG5cbiAgaWYgKHNvdXJjZSBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgcmV0dXJuIHNvdXJjZS5tYXAoKGl0ZW06IGFueSkgPT4gZGVlcENsb25lKGl0ZW0sIGlnbm9yZXMsIHJlZk1hcCkpO1xuICB9XG5cbiAgaWYgKHNvdXJjZSBpbnN0YW5jZW9mIE9iamVjdCkge1xuICAgIGlmIChpZ25vcmVzLnNvbWUoaWdub3JlID0+IHNvdXJjZSBpbnN0YW5jZW9mIGlnbm9yZSkpIHtcbiAgICAgIHJldHVybiBzb3VyY2U7XG4gICAgfVxuICAgIGNvbnN0IHJlZiA9IHJlZk1hcC5maW5kKGl0ZW0gPT4gaXRlbS5zID09PSBzb3VyY2UpO1xuICAgIGlmIChyZWYgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIHJlZi5kO1xuICAgIH1cbiAgICBjb25zdCBkZXN0ID0gT2JqZWN0LmNyZWF0ZShzb3VyY2UpO1xuICAgIHJlZk1hcC5wdXNoKHtzOiBzb3VyY2UsIGQ6IGRlc3R9KTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBzb3VyY2UpIHtcbiAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7XG4gICAgICAgIGRlc3Rba2V5XSA9IGRlZXBDbG9uZShzb3VyY2Vba2V5XSwgaWdub3JlcywgcmVmTWFwKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGRlc3Q7XG4gIH1cblxuICByZXR1cm4gc291cmNlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVJZDxUIGV4dGVuZHMge2lkOiBudW1iZXJ9W10+KGFycmF5OiBUKTogbnVtYmVyIHtcbiAgaWYgKGFycmF5Lmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiAxO1xuICB9XG5cbiAgY29uc3QgbGFzdCA9IGFycmF5W2FycmF5Lmxlbmd0aCAtIDFdO1xuICBsZXQgaWQgPSBsYXN0LmlkICsgMTtcblxuICB3aGlsZSAoYXJyYXkuZmluZChnID0+IGcuaWQgPT09IGlkKSkge1xuICAgIGlmIChpZCA9PT0gTnVtYmVyLk1BWF9WQUxVRSkge1xuICAgICAgaWQgPSAwO1xuICAgIH1cbiAgICBpZCA9IGlkICsgMTtcbiAgfVxuXG4gIHJldHVybiBpZDtcbn1cbiJdfQ==