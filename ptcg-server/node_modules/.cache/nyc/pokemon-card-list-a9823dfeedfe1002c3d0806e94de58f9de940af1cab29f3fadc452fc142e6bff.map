{"version":3,"file":"/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/game/store/state/pokemon-card-list.ts","sources":["/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/game/store/state/pokemon-card-list.ts"],"names":[],"mappings":"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","sourcesContent":["import { CardList } from './card-list';\nimport { Marker } from './card-marker';\nimport { SpecialCondition, Stage, SuperType } from '../card/card-types';\nimport { PokemonCard } from '../card/pokemon-card';\nimport { Card } from '../card/card';\n\nexport class PokemonCardList extends CardList {\n\n  public damage: number = 0;\n\n  public specialConditions: SpecialCondition[] = [];\n\n  public poisonDamage: number = 10;\n\n  public burnDamage: number = 20;\n\n  public marker = new Marker();\n\n  public pokemonPlayedTurn: number = 0;\n\n  // Some pokemon cards can be attached as a tool,\n  // we must remember, which card acts as a pokemon tool.\n  public tool: Card | undefined;\n\n  public getPokemons(): PokemonCard[] {\n    const result: PokemonCard[] = [];\n    for (const card of this.cards) {\n      if (card.superType === SuperType.POKEMON && card !== this.tool) {\n        result.push(card as PokemonCard);\n      }\n    }\n    return result;\n  }\n\n  public getPokemonCard(): PokemonCard | undefined {\n    const pokemons = this.getPokemons();\n    if (pokemons.length > 0) {\n      return pokemons[pokemons.length - 1];\n    }\n  }\n\n  public isBasic(): boolean {\n    const pokemons = this.getPokemons();\n    if (pokemons.length !== 1) {\n      return false;\n    }\n    return pokemons[0].stage === Stage.BASIC;\n  }\n\n  clearEffects(): void {\n    this.marker.markers = [];\n    this.specialConditions = [];\n    this.poisonDamage = 10;\n    this.burnDamage = 20;\n    if (this.cards.length === 0) {\n      this.damage = 0;\n    }\n    if (this.tool && !this.cards.includes(this.tool)) {\n      this.tool = undefined;\n    }\n  }\n\n  removeSpecialCondition(sp: SpecialCondition): void {\n    if (!this.specialConditions.includes(sp)) {\n      return;\n    }\n    this.specialConditions = this.specialConditions\n      .filter(s => s !== sp);\n  }\n\n  addSpecialCondition(sp: SpecialCondition): void {\n    if (sp === SpecialCondition.POISONED) {\n      this.poisonDamage = 10;\n    }\n    if (sp === SpecialCondition.BURNED) {\n      this.burnDamage = 20;\n    }\n    if (this.specialConditions.includes(sp)) {\n      return;\n    }\n    if (sp === SpecialCondition.POISONED || sp === SpecialCondition.BURNED) {\n      this.specialConditions.push(sp);\n      return;\n    }\n    this.specialConditions = this.specialConditions.filter(s => [\n      SpecialCondition.PARALYZED,\n      SpecialCondition.CONFUSED,\n      SpecialCondition.ASLEEP\n    ].includes(s) === false);\n    this.specialConditions.push(sp);\n  }\n\n}\n"]}