"use strict";function cov_1wxn9nkuv(){var path="/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/simple-bot/state-score/energy-score.ts";var hash="df0939b704b0ac60712cc940ebbb2fa3f67fef5c";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/simple-bot/state-score/energy-score.ts",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:62}},"1":{start:{line:3,column:0},end:{line:3,column:29}},"2":{start:{line:4,column:15},end:{line:4,column:36}},"3":{start:{line:5,column:16},end:{line:5,column:34}},"4":{start:{line:8,column:23},end:{line:8,column:54}},"5":{start:{line:9,column:23},end:{line:9,column:49}},"6":{start:{line:10,column:20},end:{line:10,column:21}},"7":{start:{line:11,column:8},end:{line:25,column:11}},"8":{start:{line:12,column:26},end:{line:12,column:76}},"9":{start:{line:13,column:12},end:{line:16,column:15}},"10":{start:{line:14,column:33},end:{line:14,column:74}},"11":{start:{line:15,column:16},end:{line:15,column:63}},"12":{start:{line:17,column:30},end:{line:19,column:30}},"13":{start:{line:20,column:12},end:{line:24,column:15}},"14":{start:{line:21,column:16},end:{line:23,column:54}},"15":{start:{line:26,column:8},end:{line:26,column:21}},"16":{start:{line:29,column:19},end:{line:29,column:20}},"17":{start:{line:30,column:8},end:{line:30,column:78}},"18":{start:{line:30,column:32},end:{line:30,column:74}},"19":{start:{line:31,column:8},end:{line:31,column:67}},"20":{start:{line:31,column:40},end:{line:31,column:65}},"21":{start:{line:32,column:19},end:{line:32,column:20}},"22":{start:{line:33,column:8},end:{line:33,column:78}},"23":{start:{line:33,column:32},end:{line:33,column:74}},"24":{start:{line:34,column:8},end:{line:34,column:67}},"25":{start:{line:34,column:40},end:{line:34,column:65}},"26":{start:{line:35,column:8},end:{line:43,column:11}},"27":{start:{line:36,column:26},end:{line:36,column:45}},"28":{start:{line:37,column:12},end:{line:42,column:13}},"29":{start:{line:38,column:16},end:{line:38,column:42}},"30":{start:{line:40,column:17},end:{line:42,column:13}},"31":{start:{line:41,column:16},end:{line:41,column:26}},"32":{start:{line:44,column:8},end:{line:46,column:11}},"33":{start:{line:45,column:12},end:{line:45,column:29}},"34":{start:{line:47,column:20},end:{line:47,column:40}},"35":{start:{line:48,column:8},end:{line:50,column:9}},"36":{start:{line:48,column:21},end:{line:48,column:22}},"37":{start:{line:49,column:12},end:{line:49,column:47}},"38":{start:{line:51,column:8},end:{line:51,column:24}},"39":{start:{line:54,column:8},end:{line:56,column:9}},"40":{start:{line:55,column:12},end:{line:55,column:22}},"41":{start:{line:57,column:25},end:{line:57,column:27}},"42":{start:{line:58,column:8},end:{line:62,column:11}},"43":{start:{line:59,column:12},end:{line:61,column:13}},"44":{start:{line:60,column:16},end:{line:60,column:71}},"45":{start:{line:60,column:48},end:{line:60,column:69}},"46":{start:{line:63,column:24},end:{line:63,column:26}},"47":{start:{line:64,column:24},end:{line:64,column:25}},"48":{start:{line:66,column:8},end:{line:84,column:11}},"49":{start:{line:67,column:12},end:{line:83,column:13}},"50":{start:{line:70,column:20},end:{line:70,column:26}},"51":{start:{line:72,column:20},end:{line:72,column:35}},"52":{start:{line:73,column:20},end:{line:73,column:26}},"53":{start:{line:75,column:34},end:{line:75,column:83}},"54":{start:{line:75,column:63},end:{line:75,column:82}},"55":{start:{line:76,column:20},end:{line:81,column:21}},"56":{start:{line:77,column:24},end:{line:77,column:50}},"57":{start:{line:80,column:24},end:{line:80,column:47}},"58":{start:{line:85,column:8},end:{line:85,column:37}},"59":{start:{line:86,column:8},end:{line:88,column:9}},"60":{start:{line:86,column:21},end:{line:86,column:22}},"61":{start:{line:87,column:12},end:{line:87,column:46}},"62":{start:{line:89,column:8},end:{line:89,column:23}},"63":{start:{line:92,column:0},end:{line:92,column:34}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:7,column:4},end:{line:7,column:5}},loc:{start:{line:7,column:30},end:{line:27,column:5}},line:7},"1":{name:"(anonymous_1)",decl:{start:{line:11,column:63},end:{line:11,column:64}},loc:{start:{line:11,column:94},end:{line:25,column:9}},line:11},"2":{name:"(anonymous_2)",decl:{start:{line:13,column:36},end:{line:13,column:37}},loc:{start:{line:13,column:41},end:{line:16,column:13}},line:13},"3":{name:"(anonymous_3)",decl:{start:{line:20,column:28},end:{line:20,column:29}},loc:{start:{line:20,column:33},end:{line:24,column:13}},line:20},"4":{name:"(anonymous_4)",decl:{start:{line:28,column:4},end:{line:28,column:5}},loc:{start:{line:28,column:37},end:{line:52,column:5}},line:28},"5":{name:"(anonymous_5)",decl:{start:{line:30,column:25},end:{line:30,column:26}},loc:{start:{line:30,column:30},end:{line:30,column:76}},line:30},"6":{name:"(anonymous_6)",decl:{start:{line:31,column:35},end:{line:31,column:36}},loc:{start:{line:31,column:40},end:{line:31,column:65}},line:31},"7":{name:"(anonymous_7)",decl:{start:{line:33,column:25},end:{line:33,column:26}},loc:{start:{line:33,column:30},end:{line:33,column:76}},line:33},"8":{name:"(anonymous_8)",decl:{start:{line:34,column:35},end:{line:34,column:36}},loc:{start:{line:34,column:40},end:{line:34,column:65}},line:34},"9":{name:"(anonymous_9)",decl:{start:{line:35,column:25},end:{line:35,column:26}},loc:{start:{line:35,column:30},end:{line:43,column:9}},line:35},"10":{name:"(anonymous_10)",decl:{start:{line:44,column:25},end:{line:44,column:26}},loc:{start:{line:44,column:30},end:{line:46,column:9}},line:44},"11":{name:"(anonymous_11)",decl:{start:{line:53,column:4},end:{line:53,column:5}},loc:{start:{line:53,column:39},end:{line:90,column:5}},line:53},"12":{name:"(anonymous_12)",decl:{start:{line:58,column:31},end:{line:58,column:32}},loc:{start:{line:58,column:39},end:{line:62,column:9}},line:58},"13":{name:"(anonymous_13)",decl:{start:{line:60,column:38},end:{line:60,column:39}},loc:{start:{line:60,column:48},end:{line:60,column:69}},line:60},"14":{name:"(anonymous_14)",decl:{start:{line:66,column:21},end:{line:66,column:22}},loc:{start:{line:66,column:33},end:{line:84,column:9}},line:66},"15":{name:"(anonymous_15)",decl:{start:{line:75,column:53},end:{line:75,column:54}},loc:{start:{line:75,column:63},end:{line:75,column:82}},line:75}},branchMap:{"0":{loc:{start:{line:17,column:30},end:{line:19,column:30}},type:"cond-expr",locations:[{start:{line:18,column:18},end:{line:18,column:31}},{start:{line:19,column:18},end:{line:19,column:30}}],line:17},"1":{loc:{start:{line:21,column:25},end:{line:23,column:53}},type:"cond-expr",locations:[{start:{line:22,column:22},end:{line:22,column:57}},{start:{line:23,column:22},end:{line:23,column:53}}],line:21},"2":{loc:{start:{line:30,column:40},end:{line:30,column:73}},type:"cond-expr",locations:[{start:{line:30,column:68},end:{line:30,column:69}},{start:{line:30,column:72},end:{line:30,column:73}}],line:30},"3":{loc:{start:{line:33,column:40},end:{line:33,column:73}},type:"cond-expr",locations:[{start:{line:33,column:68},end:{line:33,column:69}},{start:{line:33,column:72},end:{line:33,column:73}}],line:33},"4":{loc:{start:{line:37,column:12},end:{line:42,column:13}},type:"if",locations:[{start:{line:37,column:12},end:{line:42,column:13}},{start:{line:37,column:12},end:{line:42,column:13}}],line:37},"5":{loc:{start:{line:40,column:17},end:{line:42,column:13}},type:"if",locations:[{start:{line:40,column:17},end:{line:42,column:13}},{start:{line:40,column:17},end:{line:42,column:13}}],line:40},"6":{loc:{start:{line:54,column:8},end:{line:56,column:9}},type:"if",locations:[{start:{line:54,column:8},end:{line:56,column:9}},{start:{line:54,column:8},end:{line:56,column:9}}],line:54},"7":{loc:{start:{line:59,column:12},end:{line:61,column:13}},type:"if",locations:[{start:{line:59,column:12},end:{line:61,column:13}},{start:{line:59,column:12},end:{line:61,column:13}}],line:59},"8":{loc:{start:{line:67,column:12},end:{line:83,column:13}},type:"switch",locations:[{start:{line:68,column:16},end:{line:68,column:41}},{start:{line:69,column:16},end:{line:70,column:26}},{start:{line:71,column:16},end:{line:73,column:26}},{start:{line:74,column:16},end:{line:82,column:17}}],line:67},"9":{loc:{start:{line:76,column:20},end:{line:81,column:21}},type:"if",locations:[{start:{line:76,column:20},end:{line:81,column:21}},{start:{line:76,column:20},end:{line:81,column:21}}],line:76}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0,0,0],"9":[0,0]},inputSourceMap:{version:3,file:"/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/simple-bot/state-score/energy-score.ts",sources:["/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/simple-bot/state-score/energy-score.ts"],names:[],mappings:";;;AAAA,qCAAsF;AACtF,mCAAsC;AAEtC,MAAa,WAAY,SAAQ,mBAAW;IAEnC,QAAQ,CAAC,KAAY,EAAE,QAAgB;QAC5C,MAAM,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;QAC/C,MAAM,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC;QAC1C,IAAI,KAAK,GAAG,CAAC,CAAC;QAEd,MAAM,CAAC,cAAc,CAAC,iBAAU,CAAC,aAAa,EAAE,CAAC,QAAQ,EAAE,OAAO,EAAE,MAAM,EAAE,EAAE;YAC5E,IAAI,OAAO,GAAe,IAAI,CAAC,kBAAkB,CAAC,QAAQ,EAAE,OAAO,CAAC,OAAO,CAAC,CAAC;YAC7E,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE;gBAC1B,MAAM,QAAQ,GAAG,IAAI,CAAC,kBAAkB,CAAC,QAAQ,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC;gBAC3D,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC;YACjD,CAAC,CAAC,CAAC;YAEH,MAAM,SAAS,GAAG,QAAQ,KAAK,MAAM,CAAC,MAAM;gBAC1C,CAAC,CAAC,MAAM,CAAC,MAAM;gBACf,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC;YAEjB,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE;gBAClB,KAAK,IAAI,CAAC,KAAK,eAAQ,CAAC,GAAG;oBACzB,CAAC,CAAC,MAAM,CAAC,gBAAgB,GAAG,SAAS;oBACrC,CAAC,CAAC,MAAM,CAAC,YAAY,GAAG,SAAS,CAAC;YACtC,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,OAAO,KAAK,CAAC;IACf,CAAC;IAEO,YAAY,CAAC,QAAoB,EAAE,QAAoB;QAC7D,IAAI,IAAI,GAAG,CAAC,CAAC;QACb,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,GAAG,IAAI,IAAI,CAAC,KAAK,eAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC/D,QAAQ,GAAG,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,eAAQ,CAAC,GAAG,CAAC,CAAC;QACpD,IAAI,IAAI,GAAG,CAAC,CAAC;QACb,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,GAAG,IAAI,IAAI,CAAC,KAAK,eAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC/D,QAAQ,GAAG,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,eAAQ,CAAC,GAAG,CAAC,CAAC;QAEpD,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE;YACnB,MAAM,KAAK,GAAG,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;YAClC,IAAI,KAAK,KAAK,CAAC,CAAC,EAAE;gBAChB,QAAQ,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;aAC3B;iBAAM,IAAI,IAAI,GAAG,CAAC,EAAE;gBACnB,IAAI,IAAI,CAAC,CAAC;aACX;QACH,CAAC,CAAC,CAAC;QAEH,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE;YACnB,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QACnB,CAAC,CAAC,CAAC;QAEH,MAAM,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;QACjC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAG,CAAC,EAAE,EAAE;YAC7B,QAAQ,CAAC,IAAI,CAAC,eAAQ,CAAC,GAAG,CAAC,CAAC;SAC7B;QAED,OAAO,QAAQ,CAAC;IAClB,CAAC;IAGO,kBAAkB,CAAC,QAAyB,EAAE,IAAgB;QACpE,IAAI,IAAI,CAAC,MAAM,KAAK,CAAC,EAAE;YACrB,OAAO,EAAE,CAAC;SACX;QAED,MAAM,QAAQ,GAAe,EAAE,CAAC;QAChC,QAAQ,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;YAC5B,IAAI,IAAI,YAAY,iBAAU,EAAE;gBAC9B,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;aACxD;QACH,CAAC,CAAC,CAAC;QAEH,MAAM,OAAO,GAAe,EAAE,CAAC;QAC/B,IAAI,SAAS,GAAG,CAAC,CAAC;QAClB,2DAA2D;QAC3D,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE;YACtB,QAAQ,QAAQ,EAAE;gBAChB,KAAK,eAAQ,CAAC,GAAG,CAAC;gBAClB,KAAK,eAAQ,CAAC,IAAI;oBAChB,MAAM;gBACR,KAAK,eAAQ,CAAC,SAAS;oBACrB,SAAS,IAAI,CAAC,CAAC;oBACf,MAAM;gBACR,OAAO,CAAC,CAAC;oBACP,MAAM,KAAK,GAAG,QAAQ,CAAC,SAAS,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,KAAK,QAAQ,CAAC,CAAC;oBAChE,IAAI,KAAK,KAAK,CAAC,CAAC,EAAE;wBAChB,QAAQ,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;qBAC3B;yBAAM;wBACL,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;qBACxB;iBACF;aACF;QACH,CAAC,CAAC,CAAC;QAEH,SAAS,IAAI,QAAQ,CAAC,MAAM,CAAC;QAE7B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,EAAE,CAAC,EAAE,EAAE;YAClC,OAAO,CAAC,IAAI,CAAC,eAAQ,CAAC,GAAG,CAAC,CAAC;SAC5B;QAED,OAAO,OAAO,CAAC;IACjB,CAAC;CAEF;AArGD,kCAqGC",sourcesContent:["import { State, PokemonCardList, CardType, EnergyCard, PlayerType } from '../../game';\nimport { SimpleScore } from './score';\n\nexport class EnergyScore extends SimpleScore {\n\n  public getScore(state: State, playerId: number): number {\n    const player = this.getPlayer(state, playerId);\n    const scores = this.options.scores.energy;\n    let score = 0;\n\n    player.forEachPokemon(PlayerType.BOTTOM_PLAYER, (cardList, pokemon, target) => {\n      let missing: CardType[] = this.getMissingEnergies(cardList, pokemon.retreat);\n      pokemon.attacks.forEach(a => {\n        const missing2 = this.getMissingEnergies(cardList, a.cost);\n        missing = this.mergeMissing(missing, missing2);\n      });\n\n      const multipier = cardList === player.active\n        ? scores.active\n        : scores.bench;\n\n      missing.forEach(p => {\n        score += p === CardType.ANY\n          ? scores.missingColorless * multipier\n          : scores.missingMatch * multipier;\n      });\n    });\n\n    return score;\n  }\n\n  private mergeMissing(missing1: CardType[], missing2: CardType[]): CardType[] {\n    let any1 = 0;\n    missing1.forEach(c => { any1 += c === CardType.ANY ? 1 : 0; });\n    missing1 = missing1.filter(c => c !== CardType.ANY);\n    let any2 = 0;\n    missing2.forEach(c => { any2 += c === CardType.ANY ? 1 : 0; });\n    missing2 = missing2.filter(c => c !== CardType.ANY);\n\n    missing1.forEach(c => {\n      const index = missing2.indexOf(c);\n      if (index !== -1) {\n        missing2.splice(index, 1);\n      } else if (any2 > 0) {\n        any2 -= 1;\n      }\n    });\n\n    missing2.forEach(c => {\n      missing1.push(c);\n    });\n\n    const max = Math.max(any1, any2);\n    for (let i = 0; i < max ; i++) {\n      missing1.push(CardType.ANY);\n    }\n\n    return missing1;\n  }\n\n\n  private getMissingEnergies(cardList: PokemonCardList, cost: CardType[]): CardType[] {\n    if (cost.length === 0) {\n      return [];\n    }\n\n    const provided: CardType[] = [];\n    cardList.cards.forEach(card => {\n      if (card instanceof EnergyCard) {\n        card.provides.forEach(energy => provided.push(energy));\n      }\n    });\n\n    const missing: CardType[] = [];\n    let colorless = 0;\n    // First remove from array cards with specific energy types\n    cost.forEach(costType => {\n      switch (costType) {\n        case CardType.ANY:\n        case CardType.NONE:\n          break;\n        case CardType.COLORLESS:\n          colorless += 1;\n          break;\n        default: {\n          const index = provided.findIndex(energy => energy === costType);\n          if (index !== -1) {\n            provided.splice(index, 1);\n          } else {\n            missing.push(costType);\n          }\n        }\n      }\n    });\n\n    colorless -= provided.length;\n\n    for (let i = 0; i < colorless; i++) {\n      missing.push(CardType.ANY);\n    }\n\n    return missing;\n  }\n\n}\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"df0939b704b0ac60712cc940ebbb2fa3f67fef5c"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1wxn9nkuv=function(){return actualCoverage;};}return actualCoverage;}cov_1wxn9nkuv();cov_1wxn9nkuv().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_1wxn9nkuv().s[1]++;exports.EnergyScore=void 0;const game_1=(cov_1wxn9nkuv().s[2]++,require("../../game"));const score_1=(cov_1wxn9nkuv().s[3]++,require("./score"));class EnergyScore extends(score_1.SimpleScore){getScore(state,playerId){cov_1wxn9nkuv().f[0]++;const player=(cov_1wxn9nkuv().s[4]++,this.getPlayer(state,playerId));const scores=(cov_1wxn9nkuv().s[5]++,this.options.scores.energy);let score=(cov_1wxn9nkuv().s[6]++,0);cov_1wxn9nkuv().s[7]++;player.forEachPokemon(game_1.PlayerType.BOTTOM_PLAYER,(cardList,pokemon,target)=>{cov_1wxn9nkuv().f[1]++;let missing=(cov_1wxn9nkuv().s[8]++,this.getMissingEnergies(cardList,pokemon.retreat));cov_1wxn9nkuv().s[9]++;pokemon.attacks.forEach(a=>{cov_1wxn9nkuv().f[2]++;const missing2=(cov_1wxn9nkuv().s[10]++,this.getMissingEnergies(cardList,a.cost));cov_1wxn9nkuv().s[11]++;missing=this.mergeMissing(missing,missing2);});const multipier=(cov_1wxn9nkuv().s[12]++,cardList===player.active?(cov_1wxn9nkuv().b[0][0]++,scores.active):(cov_1wxn9nkuv().b[0][1]++,scores.bench));cov_1wxn9nkuv().s[13]++;missing.forEach(p=>{cov_1wxn9nkuv().f[3]++;cov_1wxn9nkuv().s[14]++;score+=p===game_1.CardType.ANY?(cov_1wxn9nkuv().b[1][0]++,scores.missingColorless*multipier):(cov_1wxn9nkuv().b[1][1]++,scores.missingMatch*multipier);});});cov_1wxn9nkuv().s[15]++;return score;}mergeMissing(missing1,missing2){cov_1wxn9nkuv().f[4]++;let any1=(cov_1wxn9nkuv().s[16]++,0);cov_1wxn9nkuv().s[17]++;missing1.forEach(c=>{cov_1wxn9nkuv().f[5]++;cov_1wxn9nkuv().s[18]++;any1+=c===game_1.CardType.ANY?(cov_1wxn9nkuv().b[2][0]++,1):(cov_1wxn9nkuv().b[2][1]++,0);});cov_1wxn9nkuv().s[19]++;missing1=missing1.filter(c=>{cov_1wxn9nkuv().f[6]++;cov_1wxn9nkuv().s[20]++;return c!==game_1.CardType.ANY;});let any2=(cov_1wxn9nkuv().s[21]++,0);cov_1wxn9nkuv().s[22]++;missing2.forEach(c=>{cov_1wxn9nkuv().f[7]++;cov_1wxn9nkuv().s[23]++;any2+=c===game_1.CardType.ANY?(cov_1wxn9nkuv().b[3][0]++,1):(cov_1wxn9nkuv().b[3][1]++,0);});cov_1wxn9nkuv().s[24]++;missing2=missing2.filter(c=>{cov_1wxn9nkuv().f[8]++;cov_1wxn9nkuv().s[25]++;return c!==game_1.CardType.ANY;});cov_1wxn9nkuv().s[26]++;missing1.forEach(c=>{cov_1wxn9nkuv().f[9]++;const index=(cov_1wxn9nkuv().s[27]++,missing2.indexOf(c));cov_1wxn9nkuv().s[28]++;if(index!==-1){cov_1wxn9nkuv().b[4][0]++;cov_1wxn9nkuv().s[29]++;missing2.splice(index,1);}else{cov_1wxn9nkuv().b[4][1]++;cov_1wxn9nkuv().s[30]++;if(any2>0){cov_1wxn9nkuv().b[5][0]++;cov_1wxn9nkuv().s[31]++;any2-=1;}else{cov_1wxn9nkuv().b[5][1]++;}}});cov_1wxn9nkuv().s[32]++;missing2.forEach(c=>{cov_1wxn9nkuv().f[10]++;cov_1wxn9nkuv().s[33]++;missing1.push(c);});const max=(cov_1wxn9nkuv().s[34]++,Math.max(any1,any2));cov_1wxn9nkuv().s[35]++;for(let i=(cov_1wxn9nkuv().s[36]++,0);i<max;i++){cov_1wxn9nkuv().s[37]++;missing1.push(game_1.CardType.ANY);}cov_1wxn9nkuv().s[38]++;return missing1;}getMissingEnergies(cardList,cost){cov_1wxn9nkuv().f[11]++;cov_1wxn9nkuv().s[39]++;if(cost.length===0){cov_1wxn9nkuv().b[6][0]++;cov_1wxn9nkuv().s[40]++;return[];}else{cov_1wxn9nkuv().b[6][1]++;}const provided=(cov_1wxn9nkuv().s[41]++,[]);cov_1wxn9nkuv().s[42]++;cardList.cards.forEach(card=>{cov_1wxn9nkuv().f[12]++;cov_1wxn9nkuv().s[43]++;if(card instanceof game_1.EnergyCard){cov_1wxn9nkuv().b[7][0]++;cov_1wxn9nkuv().s[44]++;card.provides.forEach(energy=>{cov_1wxn9nkuv().f[13]++;cov_1wxn9nkuv().s[45]++;return provided.push(energy);});}else{cov_1wxn9nkuv().b[7][1]++;}});const missing=(cov_1wxn9nkuv().s[46]++,[]);let colorless=(cov_1wxn9nkuv().s[47]++,0);// First remove from array cards with specific energy types
cov_1wxn9nkuv().s[48]++;cost.forEach(costType=>{cov_1wxn9nkuv().f[14]++;cov_1wxn9nkuv().s[49]++;switch(costType){case game_1.CardType.ANY:cov_1wxn9nkuv().b[8][0]++;case game_1.CardType.NONE:cov_1wxn9nkuv().b[8][1]++;cov_1wxn9nkuv().s[50]++;break;case game_1.CardType.COLORLESS:cov_1wxn9nkuv().b[8][2]++;cov_1wxn9nkuv().s[51]++;colorless+=1;cov_1wxn9nkuv().s[52]++;break;default:cov_1wxn9nkuv().b[8][3]++;{const index=(cov_1wxn9nkuv().s[53]++,provided.findIndex(energy=>{cov_1wxn9nkuv().f[15]++;cov_1wxn9nkuv().s[54]++;return energy===costType;}));cov_1wxn9nkuv().s[55]++;if(index!==-1){cov_1wxn9nkuv().b[9][0]++;cov_1wxn9nkuv().s[56]++;provided.splice(index,1);}else{cov_1wxn9nkuv().b[9][1]++;cov_1wxn9nkuv().s[57]++;missing.push(costType);}}}});cov_1wxn9nkuv().s[58]++;colorless-=provided.length;cov_1wxn9nkuv().s[59]++;for(let i=(cov_1wxn9nkuv().s[60]++,0);i<colorless;i++){cov_1wxn9nkuv().s[61]++;missing.push(game_1.CardType.ANY);}cov_1wxn9nkuv().s[62]++;return missing;}}cov_1wxn9nkuv().s[63]++;exports.EnergyScore=EnergyScore;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2pvZW15ZXJzY291Z2gvRG9jdW1lbnRzL0dpdEh1Yi9wdGNnLWVwc2QvcHRjZy1zZXJ2ZXIvc3JjL3NpbXBsZS1ib3Qvc3RhdGUtc2NvcmUvZW5lcmd5LXNjb3JlLnRzIiwic291cmNlcyI6WyIvVXNlcnMvam9lbXllcnNjb3VnaC9Eb2N1bWVudHMvR2l0SHViL3B0Y2ctZXBzZC9wdGNnLXNlcnZlci9zcmMvc2ltcGxlLWJvdC9zdGF0ZS1zY29yZS9lbmVyZ3ktc2NvcmUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEscUNBQXNGO0FBQ3RGLG1DQUFzQztBQUV0QyxNQUFhLFdBQVksU0FBUSxtQkFBVztJQUVuQyxRQUFRLENBQUMsS0FBWSxFQUFFLFFBQWdCO1FBQzVDLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxDQUFDO1FBQy9DLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQztRQUMxQyxJQUFJLEtBQUssR0FBRyxDQUFDLENBQUM7UUFFZCxNQUFNLENBQUMsY0FBYyxDQUFDLGlCQUFVLENBQUMsYUFBYSxFQUFFLENBQUMsUUFBUSxFQUFFLE9BQU8sRUFBRSxNQUFNLEVBQUUsRUFBRTtZQUM1RSxJQUFJLE9BQU8sR0FBZSxJQUFJLENBQUMsa0JBQWtCLENBQUMsUUFBUSxFQUFFLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUM3RSxPQUFPLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRTtnQkFDMUIsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLGtCQUFrQixDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQzNELE9BQU8sR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLE9BQU8sRUFBRSxRQUFRLENBQUMsQ0FBQztZQUNqRCxDQUFDLENBQUMsQ0FBQztZQUVILE1BQU0sU0FB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QyxNQUFNLENBQUMsQ0FBQyxDQUFDO2FBQ3hEO1FBQ0gsQ0FBQyxDQUFDLENBQUM7UUFFSCxNQUFNLE9BQU8sR0FBZSxFQUFFLENBQUM7UUFDL0IsSUFBSSxTQUFTLEdBQUcsQ0FBQyxDQUFDO1FBQ2xCLDJEQUEyRDtRQUMzRCxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxFQUFFO1lBQ3RCLFFBQVEsUUFBUSxFQUFFO2dCQUNoQixLQUFLLGVBQVEsQ0FBQyxHQUFHLENBQUM7Z0JBQ2xCLEtBQUssZUFBUSxDQUFDLElBQUk7b0JBQ2hCLE1BQU07Z0JBQ1IsS0FBSyxlQUFRLENBQUMsU0FBUztvQkFDckIsU0FBUyxJQUFJLENBQUMsQ0FBQztvQkFDZixNQUFNO2dCQUNSLE9BQU8sQ0FBQyxDQUFDO29CQUNQLE1BQU0sS0FBSyxHQUFHLFFBQVEsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEtBQUssUUFBUSxDQUFDLENBQUM7b0JBQ2hFLElBQUksS0FBSyxLQUFLLENBQUMsQ0FBQyxFQUFFO3dCQUNoQixRQUFRLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQztxQkFDM0I7eUJBQU07d0JBQ0wsT0FBTyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztxQkFDeEI7aUJBQ0Y7YUFDRjtRQUNILENBQUMsQ0FBQyxDQUFDO1FBRUgsU0FBUyxJQUFJLFFBQVEsQ0FBQyxNQUFNLENBQUM7UUFFN0IsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFNBQVMsRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUNsQyxPQUFPLENBQUMsSUFBSSxDQUFDLGVBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQztTQUM1QjtRQUVELE9BQU8sT0FBTyxDQUFDO0lBQ2pCLENBQUM7Q0FFRjtBQXJHRCxrQ0FxR0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTdGF0ZSwgUG9rZW1vbkNhcmRMaXN0LCBDYXJkVHlwZSwgRW5lcmd5Q2FyZCwgUGxheWVyVHlwZSB9IGZyb20gJy4uLy4uL2dhbWUnO1xuaW1wb3J0IHsgU2ltcGxlU2NvcmUgfSBmcm9tICcuL3Njb3JlJztcblxuZXhwb3J0IGNsYXNzIEVuZXJneVNjb3JlIGV4dGVuZHMgU2ltcGxlU2NvcmUge1xuXG4gIHB1YmxpYyBnZXRTY29yZShzdGF0ZTogU3RhdGUsIHBsYXllcklkOiBudW1iZXIpOiBudW1iZXIge1xuICAgIGNvbnN0IHBsYXllciA9IHRoaXMuZ2V0UGxheWVyKHN0YXRlLCBwbGF5ZXJJZCk7XG4gICAgY29uc3Qgc2NvcmVzID0gdGhpcy5vcHRpb25zLnNjb3Jlcy5lbmVyZ3k7XG4gICAgbGV0IHNjb3JlID0gMDtcblxuICAgIHBsYXllci5mb3JFYWNoUG9rZW1vbihQbGF5ZXJUeXBlLkJPVFRPTV9QTEFZRVIsIChjYXJkTGlzdCwgcG9rZW1vbiwgdGFyZ2V0KSA9PiB7XG4gICAgICBsZXQgbWlzc2luZzogQ2FyZFR5cGVbXSA9IHRoaXMuZ2V0TWlzc2luZ0VuZXJnaWVzKGNhcmRMaXN0LCBwb2tlbW9uLnJldHJlYXQpO1xuICAgICAgcG9rZW1vbi5hdHRhY2tzLmZvckVhY2goYSA9PiB7XG4gICAgICAgIGNvbnN0IG1pc3NpbmcyID0gdGhpcy5nZXRNaXNzaW5nRW5lcmdpZXMoY2FyZExpc3QsIGEuY29zdCk7XG4gICAgICAgIG1pc3NpbmcgPSB0aGlzLm1lcmdlTWlzc2luZyhtaXNzaW5nLCBtaXNzaW5nMik7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgbXVsdGlwaWVyID0gY2FyZExpc3QgPT09IHBsYXllci5hY3RpdmVcbiAgICAgICAgPyBzY29yZXMuYWN0aXZlXG4gICAgICAgIDogc2NvcmVzLmJlbmNoO1xuXG4gICAgICBtaXNzaW5nLmZvckVhY2gocCA9PiB7XG4gICAgICAgIHNjb3JlICs9IHAgPT09IENhcmRUeXBlLkFOWVxuICAgICAgICAgID8gc2NvcmVzLm1pc3NpbmdDb2xvcmxlc3MgKiBtdWx0aXBpZXJcbiAgICAgICAgICA6IHNjb3Jlcy5taXNzaW5nTWF0Y2ggKiBtdWx0aXBpZXI7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHJldHVybiBzY29yZTtcbiAgfVxuXG4gIHByaXZhdGUgbWVyZ2VNaXNzaW5nKG1pc3NpbmcxOiBDYXJkVHlwZVtdLCBtaXNzaW5nMjogQ2FyZFR5cGVbXSk6IENhcmRUeXBlW10ge1xuICAgIGxldCBhbnkxID0gMDtcbiAgICBtaXNzaW5nMS5mb3JFYWNoKGMgPT4geyBhbnkxICs9IGMgPT09IENhcmRUeXBlLkFOWSA/IDEgOiAwOyB9KTtcbiAgICBtaXNzaW5nMSA9IG1pc3NpbmcxLmZpbHRlcihjID0+IGMgIT09IENhcmRUeXBlLkFOWSk7XG4gICAgbGV0IGFueTIgPSAwO1xuICAgIG1pc3NpbmcyLmZvckVhY2goYyA9PiB7IGFueTIgKz0gYyA9PT0gQ2FyZFR5cGUuQU5ZID8gMSA6IDA7IH0pO1xuICAgIG1pc3NpbmcyID0gbWlzc2luZzIuZmlsdGVyKGMgPT4gYyAhPT0gQ2FyZFR5cGUuQU5ZKTtcblxuICAgIG1pc3NpbmcxLmZvckVhY2goYyA9PiB7XG4gICAgICBjb25zdCBpbmRleCA9IG1pc3NpbmcyLmluZGV4T2YoYyk7XG4gICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgIG1pc3NpbmcyLnNwbGljZShpbmRleCwgMSk7XG4gICAgICB9IGVsc2UgaWYgKGFueTIgPiAwKSB7XG4gICAgICAgIGFueTIgLT0gMTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIG1pc3NpbmcyLmZvckVhY2goYyA9PiB7XG4gICAgICBtaXNzaW5nMS5wdXNoKGMpO1xuICAgIH0pO1xuXG4gICAgY29uc3QgbWF4ID0gTWF0aC5tYXgoYW55MSwgYW55Mik7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXggOyBpKyspIHtcbiAgICAgIG1pc3NpbmcxLnB1c2goQ2FyZFR5cGUuQU5ZKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbWlzc2luZzE7XG4gIH1cblxuXG4gIHByaXZhdGUgZ2V0TWlzc2luZ0VuZXJnaWVzKGNhcmRMaXN0OiBQb2tlbW9uQ2FyZExpc3QsIGNvc3Q6IENhcmRUeXBlW10pOiBDYXJkVHlwZVtdIHtcbiAgICBpZiAoY29zdC5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBjb25zdCBwcm92aWRlZDogQ2FyZFR5cGVbXSA9IFtdO1xuICAgIGNhcmRMaXN0LmNhcmRzLmZvckVhY2goY2FyZCA9PiB7XG4gICAgICBpZiAoY2FyZCBpbnN0YW5jZW9mIEVuZXJneUNhcmQpIHtcbiAgICAgICAgY2FyZC5wcm92aWRlcy5mb3JFYWNoKGVuZXJneSA9PiBwcm92aWRlZC5wdXNoKGVuZXJneSkpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgY29uc3QgbWlzc2luZzogQ2FyZFR5cGVbXSA9IFtdO1xuICAgIGxldCBjb2xvcmxlc3MgPSAwO1xuICAgIC8vIEZpcnN0IHJlbW92ZSBmcm9tIGFycmF5IGNhcmRzIHdpdGggc3BlY2lmaWMgZW5lcmd5IHR5cGVzXG4gICAgY29zdC5mb3JFYWNoKGNvc3RUeXBlID0+IHtcbiAgICAgIHN3aXRjaCAoY29zdFR5cGUpIHtcbiAgICAgICAgY2FzZSBDYXJkVHlwZS5BTlk6XG4gICAgICAgIGNhc2UgQ2FyZFR5cGUuTk9ORTpcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBDYXJkVHlwZS5DT0xPUkxFU1M6XG4gICAgICAgICAgY29sb3JsZXNzICs9IDE7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICBjb25zdCBpbmRleCA9IHByb3ZpZGVkLmZpbmRJbmRleChlbmVyZ3kgPT4gZW5lcmd5ID09PSBjb3N0VHlwZSk7XG4gICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgcHJvdmlkZWQuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbWlzc2luZy5wdXNoKGNvc3RUeXBlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGNvbG9ybGVzcyAtPSBwcm92aWRlZC5sZW5ndGg7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbG9ybGVzczsgaSsrKSB7XG4gICAgICBtaXNzaW5nLnB1c2goQ2FyZFR5cGUuQU5ZKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbWlzc2luZztcbiAgfVxuXG59XG4iXX0=
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qb2VteWVyc2NvdWdoL0RvY3VtZW50cy9HaXRIdWIvcHRjZy1lcHNkL3B0Y2ctc2VydmVyL3NyYy9zaW1wbGUtYm90L3N0YXRlLXNjb3JlL2VuZXJneS1zY29yZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOGdmQWVNOzJOQWZOLEtBQUEsQ0FBQSxNQUFBLHlCQUFBLE9BQUEsQ0FBQSxZQUFBLENBQUEsQ0FBQSxDQUNBLEtBQUEsQ0FBQSxPQUFBLHlCQUFBLE9BQUEsQ0FBQSxTQUFBLENBQUEsQ0FBQSxDQUVBLEtBQWEsQ0FBQSxXQUFiLFNBQWlDLE9BQUEsQ0FBQSxXQUFqQyxDQUE0QyxDQUVuQyxRQUFRLENBQUMsS0FBRCxDQUFlLFFBQWYsQ0FBK0Isd0JBQzVDLEtBQU0sQ0FBQSxNQUFNLHlCQUFHLEtBQUssU0FBTCxDQUFlLEtBQWYsQ0FBc0IsUUFBdEIsQ0FBSCxDQUFaLENBQ0EsS0FBTSxDQUFBLE1BQU0seUJBQUcsS0FBSyxPQUFMLENBQWEsTUFBYixDQUFvQixNQUF2QixDQUFaLENBQ0EsR0FBSSxDQUFBLEtBQUsseUJBQUcsQ0FBSCxDQUFULENBSDRDLHVCQUs1QyxNQUFNLENBQUMsY0FBUCxDQUFzQixNQUFBLENBQUEsVUFBQSxDQUFXLGFBQWpDLENBQWdELENBQUMsUUFBRCxDQUFXLE9BQVgsQ0FBb0IsTUFBcEIsR0FBOEIsd0JBQzVFLEdBQUksQ0FBQSxPQUFPLHlCQUFlLEtBQUssa0JBQUwsQ0FBd0IsUUFBeEIsQ0FBa0MsT0FBTyxDQUFDLE9BQTFDLENBQWYsQ0FBWCxDQUQ0RSx1QkFFNUUsT0FBTyxDQUFDLE9BQVIsQ0FBZ0IsT0FBaEIsQ0FBd0IsQ0FBQyxFQUFHLHdCQUMxQixLQUFNLENBQUEsUUFBUSwwQkFBRyxLQUFLLGtCQUFMLENBQXdCLFFBQXhCLENBQWtDLENBQUMsQ0FBQyxJQUFwQyxDQUFILENBQWQsQ0FEMEIsd0JBRTFCLE9BQU8sQ0FBRyxLQUFLLFlBQUwsQ0FBa0IsT0FBbEIsQ0FBMkIsUUFBM0Is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QUFhLE1BQUEsQ0FBQSxRQUFBLENBQVMsR0FBdEIsRUFDRCxDQXRDbUUsd0JBd0NwRSxNQUFPLENBQUEsT0FBUCxDQUNELENBbkd5QyxDLHdCQUE1QyxPQUFBLENBQUEsV0FBQSxDQUFBLFdBQUEsQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFN0YXRlLCBQb2tlbW9uQ2FyZExpc3QsIENhcmRUeXBlLCBFbmVyZ3lDYXJkLCBQbGF5ZXJUeXBlIH0gZnJvbSAnLi4vLi4vZ2FtZSc7XG5pbXBvcnQgeyBTaW1wbGVTY29yZSB9IGZyb20gJy4vc2NvcmUnO1xuXG5leHBvcnQgY2xhc3MgRW5lcmd5U2NvcmUgZXh0ZW5kcyBTaW1wbGVTY29yZSB7XG5cbiAgcHVibGljIGdldFNjb3JlKHN0YXRlOiBTdGF0ZSwgcGxheWVySWQ6IG51bWJlcik6IG51bWJlciB7XG4gICAgY29uc3QgcGxheWVyID0gdGhpcy5nZXRQbGF5ZXIoc3RhdGUsIHBsYXllcklkKTtcbiAgICBjb25zdCBzY29yZXMgPSB0aGlzLm9wdGlvbnMuc2NvcmVzLmVuZXJneTtcbiAgICBsZXQgc2NvcmUgPSAwO1xuXG4gICAgcGxheWVyLmZvckVhY2hQb2tlbW9uKFBsYXllclR5cGUuQk9UVE9NX1BMQVlFUiwgKGNhcmRMaXN0LCBwb2tlbW9uLCB0YXJnZXQpID0+IHtcbiAgICAgIGxldCBtaXNzaW5nOiBDYXJkVHlwZVtdID0gdGhpcy5nZXRNaXNzaW5nRW5lcmdpZXMoY2FyZExpc3QsIHBva2Vtb24ucmV0cmVhdCk7XG4gICAgICBwb2tlbW9uLmF0dGFja3MuZm9yRWFjaChhID0+IHtcbiAgICAgICAgY29uc3QgbWlzc2luZzIgPSB0aGlzLmdldE1pc3NpbmdFbmVyZ2llcyhjYXJkTGlzdCwgYS5jb3N0KTtcbiAgICAgICAgbWlzc2luZyA9IHRoaXMubWVyZ2VNaXNzaW5nKG1pc3NpbmcsIG1pc3NpbmcyKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBtdWx0aXBpZXIgPSBjYXJkTGlzdCA9PT0gcGxheWVyLmFjdGl2ZVxuICAgICAgICA/IHNjb3Jlcy5hY3RpdmVcbiAgICAgICAgOiBzY29yZXMuYmVuY2g7XG5cbiAgICAgIG1pc3NpbmcuZm9yRWFjaChwID0+IHtcbiAgICAgICAgc2NvcmUgKz0gcCA9PT0gQ2FyZFR5cGUuQU5ZXG4gICAgICAgICAgPyBzY29yZXMubWlzc2luZ0NvbG9ybGVzcyAqIG11bHRpcGllclxuICAgICAgICAgIDogc2NvcmVzLm1pc3NpbmdNYXRjaCAqIG11bHRpcGllcjtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHNjb3JlO1xuICB9XG5cbiAgcHJpdmF0ZSBtZXJnZU1pc3NpbmcobWlzc2luZzE6IENhcmRUeXBlW10sIG1pc3NpbmcyOiBDYXJkVHlwZVtdKTogQ2FyZFR5cGVbXSB7XG4gICAgbGV0IGFueTEgPSAwO1xuICAgIG1pc3NpbmcxLmZvckVhY2goYyA9PiB7IGFueTEgKz0gYyA9PT0gQ2FyZFR5cGUuQU5ZID8gMSA6IDA7IH0pO1xuICAgIG1pc3NpbmcxID0gbWlzc2luZzEuZmlsdGVyKGMgPT4gYyAhPT0gQ2FyZFR5cGUuQU5ZKTtcbiAgICBsZXQgYW55MiA9IDA7XG4gICAgbWlzc2luZzIuZm9yRWFjaChjID0+IHsgYW55MiArPSBjID09PSBDYXJkVHlwZS5BTlkgPyAxIDogMDsgfSk7XG4gICAgbWlzc2luZzIgPSBtaXNzaW5nMi5maWx0ZXIoYyA9PiBjICE9PSBDYXJkVHlwZS5BTlkpO1xuXG4gICAgbWlzc2luZzEuZm9yRWFjaChjID0+IHtcbiAgICAgIGNvbnN0IGluZGV4ID0gbWlzc2luZzIuaW5kZXhPZihjKTtcbiAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgbWlzc2luZzIuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgIH0gZWxzZSBpZiAoYW55MiA+IDApIHtcbiAgICAgICAgYW55MiAtPSAxO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgbWlzc2luZzIuZm9yRWFjaChjID0+IHtcbiAgICAgIG1pc3NpbmcxLnB1c2goYyk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBtYXggPSBNYXRoLm1heChhbnkxLCBhbnkyKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1heCA7IGkrKykge1xuICAgICAgbWlzc2luZzEucHVzaChDYXJkVHlwZS5BTlkpO1xuICAgIH1cblxuICAgIHJldHVybiBtaXNzaW5nMTtcbiAgfVxuXG5cbiAgcHJpdmF0ZSBnZXRNaXNzaW5nRW5lcmdpZXMoY2FyZExpc3Q6IFBva2Vtb25DYXJkTGlzdCwgY29zdDogQ2FyZFR5cGVbXSk6IENhcmRUeXBlW10ge1xuICAgIGlmIChjb3N0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIGNvbnN0IHByb3ZpZGVkOiBDYXJkVHlwZVtdID0gW107XG4gICAgY2FyZExpc3QuY2FyZHMuZm9yRWFjaChjYXJkID0+IHtcbiAgICAgIGlmIChjYXJkIGluc3RhbmNlb2YgRW5lcmd5Q2FyZCkge1xuICAgICAgICBjYXJkLnByb3ZpZGVzLmZvckVhY2goZW5lcmd5ID0+IHByb3ZpZGVkLnB1c2goZW5lcmd5KSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBjb25zdCBtaXNzaW5nOiBDYXJkVHlwZVtdID0gW107XG4gICAgbGV0IGNvbG9ybGVzcyA9IDA7XG4gICAgLy8gRmlyc3QgcmVtb3ZlIGZyb20gYXJyYXkgY2FyZHMgd2l0aCBzcGVjaWZpYyBlbmVyZ3kgdHlwZXNcbiAgICBjb3N0LmZvckVhY2goY29zdFR5cGUgPT4ge1xuICAgICAgc3dpdGNoIChjb3N0VHlwZSkge1xuICAgICAgICBjYXNlIENhcmRUeXBlLkFOWTpcbiAgICAgICAgY2FzZSBDYXJkVHlwZS5OT05FOlxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIENhcmRUeXBlLkNPTE9STEVTUzpcbiAgICAgICAgICBjb2xvcmxlc3MgKz0gMTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgIGNvbnN0IGluZGV4ID0gcHJvdmlkZWQuZmluZEluZGV4KGVuZXJneSA9PiBlbmVyZ3kgPT09IGNvc3RUeXBlKTtcbiAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICBwcm92aWRlZC5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBtaXNzaW5nLnB1c2goY29zdFR5cGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgY29sb3JsZXNzIC09IHByb3ZpZGVkLmxlbmd0aDtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29sb3JsZXNzOyBpKyspIHtcbiAgICAgIG1pc3NpbmcucHVzaChDYXJkVHlwZS5BTlkpO1xuICAgIH1cblxuICAgIHJldHVybiBtaXNzaW5nO1xuICB9XG5cbn1cbiJdfQ==