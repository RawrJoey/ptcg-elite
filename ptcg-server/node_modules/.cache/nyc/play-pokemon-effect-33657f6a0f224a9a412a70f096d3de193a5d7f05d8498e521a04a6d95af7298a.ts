"use strict";function cov_ifr5zzz9b(){var path="/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/game/store/effect-reducers/play-pokemon-effect.ts";var hash="6f2f1336508d45e86a83622be8df7f0ebe6e5170";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/game/store/effect-reducers/play-pokemon-effect.ts",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:62}},"1":{start:{line:3,column:0},end:{line:3,column:36}},"2":{start:{line:4,column:28},end:{line:4,column:67}},"3":{start:{line:5,column:21},end:{line:5,column:48}},"4":{start:{line:6,column:23},end:{line:6,column:52}},"5":{start:{line:7,column:21},end:{line:7,column:50}},"6":{start:{line:8,column:24},end:{line:8,column:59}},"7":{start:{line:9,column:23},end:{line:9,column:57}},"8":{start:{line:12,column:4},end:{line:41,column:5}},"9":{start:{line:13,column:22},end:{line:13,column:46}},"10":{start:{line:14,column:24},end:{line:14,column:58}},"11":{start:{line:15,column:8},end:{line:23,column:9}},"12":{start:{line:16,column:12},end:{line:19,column:15}},"13":{start:{line:20,column:12},end:{line:20,column:77}},"14":{start:{line:21,column:12},end:{line:21,column:57}},"15":{start:{line:22,column:12},end:{line:22,column:25}},"16":{start:{line:24,column:26},end:{line:24,column:92}},"17":{start:{line:25,column:28},end:{line:25,column:58}},"18":{start:{line:26,column:28},end:{line:26,column:58}},"19":{start:{line:27,column:8},end:{line:29,column:9}},"20":{start:{line:28,column:12},end:{line:28,column:88}},"21":{start:{line:30,column:8},end:{line:39,column:9}},"22":{start:{line:31,column:37},end:{line:31,column:115}},"23":{start:{line:32,column:12},end:{line:32,column:56}},"24":{start:{line:33,column:12},end:{line:35,column:13}},"25":{start:{line:34,column:16},end:{line:34,column:107}},"26":{start:{line:36,column:33},end:{line:36,column:114}},"27":{start:{line:37,column:12},end:{line:37,column:52}},"28":{start:{line:38,column:12},end:{line:38,column:25}},"29":{start:{line:40,column:8},end:{line:40,column:84}},"30":{start:{line:42,column:4},end:{line:42,column:17}},"31":{start:{line:44,column:0},end:{line:44,column:48}}},fnMap:{"0":{name:"playPokemonReducer",decl:{start:{line:10,column:9},end:{line:10,column:27}},loc:{start:{line:10,column:50},end:{line:43,column:1}},line:10}},branchMap:{"0":{loc:{start:{line:12,column:4},end:{line:41,column:5}},type:"if",locations:[{start:{line:12,column:4},end:{line:41,column:5}},{start:{line:12,column:4},end:{line:41,column:5}}],line:12},"1":{loc:{start:{line:15,column:8},end:{line:23,column:9}},type:"if",locations:[{start:{line:15,column:8},end:{line:23,column:9}},{start:{line:15,column:8},end:{line:23,column:9}}],line:15},"2":{loc:{start:{line:15,column:12},end:{line:15,column:55}},type:"binary-expr",locations:[{start:{line:15,column:12},end:{line:15,column:19}},{start:{line:15,column:23},end:{line:15,column:55}}],line:15},"3":{loc:{start:{line:24,column:26},end:{line:24,column:92}},type:"binary-expr",locations:[{start:{line:24,column:26},end:{line:24,column:62}},{start:{line:24,column:66},end:{line:24,column:92}}],line:24},"4":{loc:{start:{line:27,column:8},end:{line:29,column:9}},type:"if",locations:[{start:{line:27,column:8},end:{line:29,column:9}},{start:{line:27,column:8},end:{line:29,column:9}}],line:27},"5":{loc:{start:{line:30,column:8},end:{line:39,column:9}},type:"if",locations:[{start:{line:30,column:8},end:{line:39,column:9}},{start:{line:30,column:8},end:{line:39,column:9}}],line:30},"6":{loc:{start:{line:30,column:12},end:{line:30,column:86}},type:"binary-expr",locations:[{start:{line:30,column:12},end:{line:30,column:21}},{start:{line:30,column:25},end:{line:30,column:50}},{start:{line:30,column:54},end:{line:30,column:86}}],line:30},"7":{loc:{start:{line:33,column:12},end:{line:35,column:13}},type:"if",locations:[{start:{line:33,column:12},end:{line:35,column:13}},{start:{line:33,column:12},end:{line:35,column:13}}],line:33}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0},f:{"0":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0,0],"7":[0,0]},inputSourceMap:{version:3,file:"/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/game/store/effect-reducers/play-pokemon-effect.ts",sources:["/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/game/store/effect-reducers/play-pokemon-effect.ts"],names:[],mappings:";;;AAAA,oEAAiE;AACjE,iDAA6C;AAC7C,qDAA0D;AAE1D,mDAA2C;AAG3C,4DAAwE;AACxE,0DAAqD;AAGrD,SAAgB,kBAAkB,CAAC,KAAgB,EAAE,KAAY,EAAE,MAAc;IAE/E,uBAAuB;IACvB,IAAI,MAAM,YAAY,qCAAiB,EAAE;QACvC,MAAM,KAAK,GAAG,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC;QACvC,MAAM,OAAO,GAAG,KAAK,KAAK,kBAAK,CAAC,KAAK,CAAC;QAEtC,IAAI,OAAO,IAAI,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,KAAK,CAAC,EAAE;YAC/C,KAAK,CAAC,GAAG,CAAC,KAAK,EAAE,sBAAO,CAAC,8BAA8B,EAAE;gBACvD,IAAI,EAAE,MAAM,CAAC,MAAM,CAAC,IAAI;gBACxB,IAAI,EAAE,MAAM,CAAC,WAAW,CAAC,IAAI;aAC9B,CAAC,CAAC;YACH,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,WAAW,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC;YACjE,MAAM,CAAC,MAAM,CAAC,iBAAiB,GAAG,KAAK,CAAC,IAAI,CAAC;YAC7C,OAAO,KAAK,CAAC;SACd;QAED,MAAM,SAAS,GAAG,KAAK,KAAK,kBAAK,CAAC,OAAO,IAAI,kBAAK,CAAC,OAAO,CAAC;QAC3D,MAAM,WAAW,GAAG,MAAM,CAAC,WAAW,CAAC,WAAW,CAAC;QACnD,MAAM,WAAW,GAAG,MAAM,CAAC,MAAM,CAAC,cAAc,EAAE,CAAC;QACnD,IAAI,WAAW,KAAK,SAAS,EAAE;YAC7B,MAAM,IAAI,sBAAS,CAAC,0BAAW,CAAC,cAAc,CAAC,CAAC;SACjD;QAED,IAAI,SAAS,IAAI,WAAW,CAAC,KAAK,GAAG,KAAK,IAAI,WAAW,CAAC,IAAI,KAAK,WAAW,EAAE;YAC9E,MAAM,gBAAgB,GAAG,IAAI,4CAA4B,CAAC,MAAM,CAAC,MAAM,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC;YACxF,KAAK,CAAC,YAAY,CAAC,KAAK,EAAE,gBAAgB,CAAC,CAAC;YAE5C,IAAI,gBAAgB,CAAC,iBAAiB,IAAI,KAAK,CAAC,IAAI,EAAE;gBACpD,MAAM,IAAI,sBAAS,CAAC,0BAAW,CAAC,6BAA6B,CAAC,CAAC;aAChE;YAED,MAAM,YAAY,GAAG,IAAI,2BAAY,CAAC,MAAM,CAAC,MAAM,EAAE,MAAM,CAAC,MAAM,EAAE,MAAM,CAAC,WAAW,CAAC,CAAC;YACxF,KAAK,CAAC,YAAY,CAAC,KAAK,EAAE,YAAY,CAAC,CAAC;YACxC,OAAO,KAAK,CAAC;SACd;QAED,MAAM,IAAI,sBAAS,CAAC,0BAAW,CAAC,cAAc,CAAC,CAAC;KACjD;IAED,OAAO,KAAK,CAAC;AACf,CAAC;AAzCD,gDAyCC",sourcesContent:["import { PlayPokemonEffect } from '../effects/play-card-effects';\nimport { GameError } from '../../game-error';\nimport { GameMessage, GameLog } from '../../game-message';\nimport { Effect } from '../effects/effect';\nimport { Stage } from '../card/card-types';\nimport { State } from '../state/state';\nimport { StoreLike } from '../store-like';\nimport { CheckPokemonPlayedTurnEffect } from '../effects/check-effects';\nimport {EvolveEffect} from '../effects/game-effects';\n\n\nexport function playPokemonReducer(store: StoreLike, state: State, effect: Effect): State {\n\n  /* Play pokemon card */\n  if (effect instanceof PlayPokemonEffect) {\n    const stage = effect.pokemonCard.stage;\n    const isBasic = stage === Stage.BASIC;\n\n    if (isBasic && effect.target.cards.length === 0) {\n      store.log(state, GameLog.LOG_PLAYER_PLAYS_BASIC_POKEMON, {\n        name: effect.player.name,\n        card: effect.pokemonCard.name\n      });\n      effect.player.hand.moveCardTo(effect.pokemonCard, effect.target);\n      effect.target.pokemonPlayedTurn = state.turn;\n      return state;\n    }\n\n    const isEvolved = stage === Stage.STAGE_1 || Stage.STAGE_2;\n    const evolvesFrom = effect.pokemonCard.evolvesFrom;\n    const pokemonCard = effect.target.getPokemonCard();\n    if (pokemonCard === undefined) {\n      throw new GameError(GameMessage.INVALID_TARGET);\n    }\n\n    if (isEvolved && pokemonCard.stage < stage && pokemonCard.name === evolvesFrom) {\n      const playedTurnEffect = new CheckPokemonPlayedTurnEffect(effect.player, effect.target);\n      store.reduceEffect(state, playedTurnEffect);\n\n      if (playedTurnEffect.pokemonPlayedTurn >= state.turn) {\n        throw new GameError(GameMessage.POKEMON_CANT_EVOLVE_THIS_TURN);\n      }\n\n      const evolveEffect = new EvolveEffect(effect.player, effect.target, effect.pokemonCard);\n      store.reduceEffect(state, evolveEffect);\n      return state;\n    }\n\n    throw new GameError(GameMessage.INVALID_TARGET);\n  }\n\n  return state;\n}\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6f2f1336508d45e86a83622be8df7f0ebe6e5170"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_ifr5zzz9b=function(){return actualCoverage;};}return actualCoverage;}cov_ifr5zzz9b();cov_ifr5zzz9b().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_ifr5zzz9b().s[1]++;exports.playPokemonReducer=void 0;const play_card_effects_1=(cov_ifr5zzz9b().s[2]++,require("../effects/play-card-effects"));const game_error_1=(cov_ifr5zzz9b().s[3]++,require("../../game-error"));const game_message_1=(cov_ifr5zzz9b().s[4]++,require("../../game-message"));const card_types_1=(cov_ifr5zzz9b().s[5]++,require("../card/card-types"));const check_effects_1=(cov_ifr5zzz9b().s[6]++,require("../effects/check-effects"));const game_effects_1=(cov_ifr5zzz9b().s[7]++,require("../effects/game-effects"));function playPokemonReducer(store,state,effect){cov_ifr5zzz9b().f[0]++;cov_ifr5zzz9b().s[8]++;/* Play pokemon card */if(effect instanceof play_card_effects_1.PlayPokemonEffect){cov_ifr5zzz9b().b[0][0]++;const stage=(cov_ifr5zzz9b().s[9]++,effect.pokemonCard.stage);const isBasic=(cov_ifr5zzz9b().s[10]++,stage===card_types_1.Stage.BASIC);cov_ifr5zzz9b().s[11]++;if((cov_ifr5zzz9b().b[2][0]++,isBasic)&&(cov_ifr5zzz9b().b[2][1]++,effect.target.cards.length===0)){cov_ifr5zzz9b().b[1][0]++;cov_ifr5zzz9b().s[12]++;store.log(state,game_message_1.GameLog.LOG_PLAYER_PLAYS_BASIC_POKEMON,{name:effect.player.name,card:effect.pokemonCard.name});cov_ifr5zzz9b().s[13]++;effect.player.hand.moveCardTo(effect.pokemonCard,effect.target);cov_ifr5zzz9b().s[14]++;effect.target.pokemonPlayedTurn=state.turn;cov_ifr5zzz9b().s[15]++;return state;}else{cov_ifr5zzz9b().b[1][1]++;}const isEvolved=(cov_ifr5zzz9b().s[16]++,(cov_ifr5zzz9b().b[3][0]++,stage===card_types_1.Stage.STAGE_1)||(cov_ifr5zzz9b().b[3][1]++,card_types_1.Stage.STAGE_2));const evolvesFrom=(cov_ifr5zzz9b().s[17]++,effect.pokemonCard.evolvesFrom);const pokemonCard=(cov_ifr5zzz9b().s[18]++,effect.target.getPokemonCard());cov_ifr5zzz9b().s[19]++;if(pokemonCard===undefined){cov_ifr5zzz9b().b[4][0]++;cov_ifr5zzz9b().s[20]++;throw new game_error_1.GameError(game_message_1.GameMessage.INVALID_TARGET);}else{cov_ifr5zzz9b().b[4][1]++;}cov_ifr5zzz9b().s[21]++;if((cov_ifr5zzz9b().b[6][0]++,isEvolved)&&(cov_ifr5zzz9b().b[6][1]++,pokemonCard.stage<stage)&&(cov_ifr5zzz9b().b[6][2]++,pokemonCard.name===evolvesFrom)){cov_ifr5zzz9b().b[5][0]++;const playedTurnEffect=(cov_ifr5zzz9b().s[22]++,new check_effects_1.CheckPokemonPlayedTurnEffect(effect.player,effect.target));cov_ifr5zzz9b().s[23]++;store.reduceEffect(state,playedTurnEffect);cov_ifr5zzz9b().s[24]++;if(playedTurnEffect.pokemonPlayedTurn>=state.turn){cov_ifr5zzz9b().b[7][0]++;cov_ifr5zzz9b().s[25]++;throw new game_error_1.GameError(game_message_1.GameMessage.POKEMON_CANT_EVOLVE_THIS_TURN);}else{cov_ifr5zzz9b().b[7][1]++;}const evolveEffect=(cov_ifr5zzz9b().s[26]++,new game_effects_1.EvolveEffect(effect.player,effect.target,effect.pokemonCard));cov_ifr5zzz9b().s[27]++;store.reduceEffect(state,evolveEffect);cov_ifr5zzz9b().s[28]++;return state;}else{cov_ifr5zzz9b().b[5][1]++;}cov_ifr5zzz9b().s[29]++;throw new game_error_1.GameError(game_message_1.GameMessage.INVALID_TARGET);}else{cov_ifr5zzz9b().b[0][1]++;}cov_ifr5zzz9b().s[30]++;return state;}cov_ifr5zzz9b().s[31]++;exports.playPokemonReducer=playPokemonReducer;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2pvZW15ZXJzY291Z2gvRG9jdW1lbnRzL0dpdEh1Yi9wdGNnLWVwc2QvcHRjZy1zZXJ2ZXIvc3JjL2dhbWUvc3RvcmUvZWZmZWN0LXJlZHVjZXJzL3BsYXktcG9rZW1vbi1lZmZlY3QudHMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9qb2VteWVyc2NvdWdoL0RvY3VtZW50cy9HaXRIdWIvcHRjZy1lcHNkL3B0Y2ctc2VydmVyL3NyYy9nYW1lL3N0b3JlL2VmZmVjdC1yZWR1Y2Vycy9wbGF5LXBva2Vtb24tZWZmZWN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLG9FQUFpRTtBQUNqRSxpREFBNkM7QUFDN0MscURBQTBEO0FBRTFELG1EQUEyQztBQUczQyw0REFBd0U7QUFDeEUsMERBQXFEO0FBR3JELFNBQWdCLGtCQUFrQixDQUFDLEtBQWdCLEVBQUUsS0FBWSxFQUFFLE1BQWM7SUFFL0UsdUJBQXVCO0lBQ3ZCLElBQUksTUFBTSxZQUFZLHFDQUFpQixFQUFFO1FBQ3ZDLE1BQU0sS0FBSyxHQUFHLE1BQU0sQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDO1FBQ3ZDLE1BQU0sT0FBTyxHQUFHLEtBQUssS0FBSyxrQkFBSyxDQUFDLEtBQUssQ0FBQztRQUV0QyxJQUFJLE9BQU8sSUFBSSxNQUFNLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFO1lBQy9DLEtBQUssQ0FBQyxHQUFHLENBQUMsS0FBSyxFQUFFLHNCQUFPLENBQUMsOEJBQThCLEVBQUU7Z0JBQ3ZELElBQUksRUFBRSxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUk7Z0JBQ3hCLElBQUksRUFBRSxNQUFNLENBQUMsV0FBVyxDQUFDLElBQUk7YUFDOUIsQ0FBQyxDQUFDO1lBQ0gsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxXQUFXLEVBQUUsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ2pFLE1BQU0sQ0FBQyxNQUFNLENBQUMsaUJBQWlCLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQztZQUM3QyxPQUFPLEtBQUssQ0FBQztTQUNkO1FBRUQsTUFBTSxTQUFTLEdBQUcsS0FBSyxLQUFLLGtCQUFLLENBQUMsT0FBTyxJQUFJLGtCQUFLLENBQUMsT0FBTyxDQUFDO1FBQzNELE1BQU0sV0FBVyxHQUFHLE1BQU0sQ0FBQyxXQUFXLENBQUMsV0FBVyxDQUFDO1FBQ25ELE1BQU0sV0FBVyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsY0FBYyxFQUFFLENBQUM7UUFDbkQsSUFBSSxXQUFXLEtBQUssU0FBUyxFQUFFO1lBQzdCLE1BQU0sSUFBSSxzQkFBUyxDQUFDLDBCQUFXLENBQUMsY0FBYyxDQUFDLENBQUM7U0FDakQ7UUFFRCxJQUFJLFNBQVMsSUFBSSxXQUFXLENBQUMsS0FBSyxHQUFHLEtBQUssSUFBSSxXQUFXLENBQUMsSUFBSSxLQUFLLFdBQVcsRUFBRTtZQUM5RSxNQUFNLGdCQUFnQixHQUFHLElBQUksNENBQTRCLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDeEYsS0FBSyxDQUFDLFlBQVksQ0FBQyxLQUFLLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQztZQUU1QyxJQUFJLGdCQUFnQixDQUFDLGlCQUFpQixJQUFJLEtBQUssQ0FBQyxJQUFJLEVBQUU7Z0JBQ3BELE1BQU0sSUFBSSxzQkFBUyxDQUFDLDBCQUFXLENBQUMsNkJBQTZCLENBQUMsQ0FBQzthQUNoRTtZQUVELE1BQU0sWUFBWSxHQUFHLElBQUksMkJBQVksQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1lBQ3hGLEtBQUssQ0FBQyxZQUFZLENBQUMsS0FBSyxFQUFFLFlBQVksQ0FBQyxDQUFDO1lBQ3hDLE9BQU8sS0FBSyxDQUFDO1NBQ2Q7UUFFRCxNQUFNLElBQUksc0JBQVMsQ0FBQywwQkFBVyxDQUFDLGNBQWMsQ0FBQyxDQUFDO0tBQ2pEO0lBRUQsT0FBTyxLQUFLLENBQUM7QUFDZixDQUFDO0FBekNELGdEQXlDQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBsYXlQb2tlbW9uRWZmZWN0IH0gZnJvbSAnLi4vZWZmZWN0cy9wbGF5LWNhcmQtZWZmZWN0cyc7XG5pbXBvcnQgeyBHYW1lRXJyb3IgfSBmcm9tICcuLi8uLi9nYW1lLWVycm9yJztcbmltcG9ydCB7IEdhbWVNZXNzYWdlLCBHYW1lTG9nIH0gZnJvbSAnLi4vLi4vZ2FtZS1tZXNzYWdlJztcbmltcG9ydCB7IEVmZmVjdCB9IGZyb20gJy4uL2VmZmVjdHMvZWZmZWN0JztcbmltcG9ydCB7IFN0YWdlIH0gZnJvbSAnLi4vY2FyZC9jYXJkLXR5cGVzJztcbmltcG9ydCB7IFN0YXRlIH0gZnJvbSAnLi4vc3RhdGUvc3RhdGUnO1xuaW1wb3J0IHsgU3RvcmVMaWtlIH0gZnJvbSAnLi4vc3RvcmUtbGlrZSc7XG5pbXBvcnQgeyBDaGVja1Bva2Vtb25QbGF5ZWRUdXJuRWZmZWN0IH0gZnJvbSAnLi4vZWZmZWN0cy9jaGVjay1lZmZlY3RzJztcbmltcG9ydCB7RXZvbHZlRWZmZWN0fSBmcm9tICcuLi9lZmZlY3RzL2dhbWUtZWZmZWN0cyc7XG5cblxuZXhwb3J0IGZ1bmN0aW9uIHBsYXlQb2tlbW9uUmVkdWNlcihzdG9yZTogU3RvcmVMaWtlLCBzdGF0ZTogU3RhdGUsIGVmZmVjdDogRWZmZWN0KTogU3RhdGUge1xuXG4gIC8qIFBsYXkgcG9rZW1vbiBjYXJkICovXG4gIGlmIChlZmZlY3QgaW5zdGFuY2VvZiBQbGF5UG9rZW1vbkVmZmVjdCkge1xuICAgIGNvbnN0IHN0YWdlID0gZWZmZWN0LnBva2Vtb25DYXJkLnN0YWdlO1xuICAgIGNvbnN0IGlzQmFzaWMgPSBzdGFnZSA9PT0gU3RhZ2UuQkFTSUM7XG5cbiAgICBpZiAoaXNCYXNpYyAmJiBlZmZlY3QudGFyZ2V0LmNhcmRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgc3RvcmUubG9nKHN0YXRlLCBHYW1lTG9nLkxPR19QTEFZRVJfUExBWVNfQkFTSUNfUE9LRU1PTiwge1xuICAgICAgICBuYW1lOiBlZmZlY3QucGxheWVyLm5hbWUsXG4gICAgICAgIGNhcmQ6IGVmZmVjdC5wb2tlbW9uQ2FyZC5uYW1lXG4gICAgICB9KTtcbiAgICAgIGVmZmVjdC5wbGF5ZXIuaGFuZC5tb3ZlQ2FyZFRvKGVmZmVjdC5wb2tlbW9uQ2FyZCwgZWZmZWN0LnRhcmdldCk7XG4gICAgICBlZmZlY3QudGFyZ2V0LnBva2Vtb25QbGF5ZWRUdXJuID0gc3RhdGUudHVybjtcbiAgICAgIHJldHVybiBzdGF0ZTtcbiAgICB9XG5cbiAgICBjb25zdCBpc0V2b2x2ZWQgPSBzdGFnZSA9PT0gU3RhZ2UuU1RBR0VfMSB8fCBTdGFnZS5TVEFHRV8yO1xuICAgIGNvbnN0IGV2b2x2ZXNGcm9tID0gZWZmZWN0LnBva2Vtb25DYXJkLmV2b2x2ZXNGcm9tO1xuICAgIGNvbnN0IHBva2Vtb25DYXJkID0gZWZmZWN0LnRhcmdldC5nZXRQb2tlbW9uQ2FyZCgpO1xuICAgIGlmIChwb2tlbW9uQ2FyZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgR2FtZUVycm9yKEdhbWVNZXNzYWdlLklOVkFMSURfVEFSR0VUKTtcbiAgICB9XG5cbiAgICBpZiAoaXNFdm9sdmVkICYmIHBva2Vtb25DYXJkLnN0YWdlIDwgc3RhZ2UgJiYgcG9rZW1vbkNhcmQubmFtZSA9PT0gZXZvbHZlc0Zyb20pIHtcbiAgICAgIGNvbnN0IHBsYXllZFR1cm5FZmZlY3QgPSBuZXcgQ2hlY2tQb2tlbW9uUGxheWVkVHVybkVmZmVjdChlZmZlY3QucGxheWVyLCBlZmZlY3QudGFyZ2V0KTtcbiAgICAgIHN0b3JlLnJlZHVjZUVmZmVjdChzdGF0ZSwgcGxheWVkVHVybkVmZmVjdCk7XG5cbiAgICAgIGlmIChwbGF5ZWRUdXJuRWZmZWN0LnBva2Vtb25QbGF5ZWRUdXJuID49IHN0YXRlLnR1cm4pIHtcbiAgICAgICAgdGhyb3cgbmV3IEdhbWVFcnJvcihHYW1lTWVzc2FnZS5QT0tFTU9OX0NBTlRfRVZPTFZFX1RISVNfVFVSTik7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGV2b2x2ZUVmZmVjdCA9IG5ldyBFdm9sdmVFZmZlY3QoZWZmZWN0LnBsYXllciwgZWZmZWN0LnRhcmdldCwgZWZmZWN0LnBva2Vtb25DYXJkKTtcbiAgICAgIHN0b3JlLnJlZHVjZUVmZmVjdChzdGF0ZSwgZXZvbHZlRWZmZWN0KTtcbiAgICAgIHJldHVybiBzdGF0ZTtcbiAgICB9XG5cbiAgICB0aHJvdyBuZXcgR2FtZUVycm9yKEdhbWVNZXNzYWdlLklOVkFMSURfVEFSR0VUKTtcbiAgfVxuXG4gIHJldHVybiBzdGF0ZTtcbn1cbiJdfQ==
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qb2VteWVyc2NvdWdoL0RvY3VtZW50cy9HaXRIdWIvcHRjZy1lcHNkL3B0Y2ctc2VydmVyL3NyYy9nYW1lL3N0b3JlL2VmZmVjdC1yZWR1Y2Vycy9wbGF5LXBva2Vtb24tZWZmZWN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJpelFBbUJNO2tPQW5CTixLQUFBLENBQUEsbUJBQUEseUJBQUEsT0FBQSxDQUFBLDhCQUFBLENBQUEsQ0FBQSxDQUNBLEtBQUEsQ0FBQSxZQUFBLHlCQUFBLE9BQUEsQ0FBQSxrQkFBQSxDQUFBLENBQUEsQ0FDQSxLQUFBLENBQUEsY0FBQSx5QkFBQSxPQUFBLENBQUEsb0JBQUEsQ0FBQSxDQUFBLENBRUEsS0FBQSxDQUFBLFlBQUEseUJBQUEsT0FBQSxDQUFBLG9CQUFBLENBQUEsQ0FBQSxDQUdBLEtBQUEsQ0FBQSxlQUFBLHlCQUFBLE9BQUEsQ0FBQSwwQkFBQSxDQUFBLENBQUEsQ0FDQSxLQUFBLENBQUEsY0FBQSx5QkFBQSxPQUFBLENBQUEseUJBQUEsQ0FBQSxDQUFBLENBR0EsUUFBZ0IsQ0FBQSxrQkFBaEIsQ0FBbUMsS0FBbkMsQ0FBcUQsS0FBckQsQ0FBbUUsTUFBbkUsQ0FBaUYsK0NBRS9FLHVCQUNBLEdBQUksTUFBTSxXQUFZLENBQUEsbUJBQUEsQ0FBQSxpQkFBdEIsQ0FBeUMsMkJBQ3ZDLEtBQU0sQ0FBQSxLQUFLLHlCQUFHLE1BQU0sQ0FBQyxXQUFQLENBQW1CLEtBQXRCLENBQVgsQ0FDQSxLQUFNLENBQUEsT0FBTywwQkFBRyxLQUFLLEdBQUssWUFBQSxDQUFBLEtBQUEsQ0FBTSxLQUFuQixDQUFiLENBRnVDLHdCQUl2QyxHQUFJLDJCQUFBLE9BQU8sOEJBQUksTUFBTSxDQUFDLE1BQVAsQ0FBYyxLQUFkLENBQW9CLE1BQXBCLEdBQStCLENBQW5DLENBQVgsQ0FBaUQsbURBQy9DLEtBQUssQ0FBQyxHQUFOLENBQVUsS0FBVixDQUFpQixjQUFBLENBQUEsT0FBQSxDQUFRLDhCQUF6QixDQUF5RCxDQUN2RCxJQUFJLENBQUUsTUFBTSxDQUFDLE1BQVAsQ0FBYyxJQURtQyxDQUV2RCxJQUFJLENBQUUsTUFBTSxDQUFDLFdBQVAsQ0FBbUIsSUFGOEIsQ0FBekQsRUFEK0Msd0JBSy9DLE1BQU0sQ0FBQyxNQUFQLENBQWMsSUFBZCxDQUFtQixVQUFuQixDQUE4QixNQUFNLENBQUMsV0FBckMsQ0FBa0QsTUFBTSxDQUFDLE1BQXpELEVBTCtDLHdCQU0vQyxNQUFNLENBQUMsTUFBUCxDQUFjLGlCQUFkLENBQWtDLEtBQUssQ0FBQyxJQUF4QyxDQU4rQyx3QkFPL0MsTUFBTyxDQUFBLEtBQVAsQ0FDRCxDQVJELGdDQVVBLEtBQU0sQ0FBQSxTQUFTLDBCQUFHLDJCQUFBLEtBQUssR0FBSyxZQUFBLENBQUEsS0FBQSxDQUFNLE9BQWhCLDhCQUEyQixZQUFBLENBQUEsS0FBQSxDQUFNLE9BQWpDLENBQUgsQ0FBZixDQUNBLEtBQU0sQ0FBQSxXQUFXLDBCQUFHLE1BQU0sQ0FBQyxXQUFQLENBQW1CLFdBQXRCLENBQWpCLENBQ0EsS0FBTSxDQUFBLFdBQVcsMEJBQUcsTUFBTSxDQUFDLE1BQVAsQ0FBYyxjQUFkLEVBQUgsQ0FBakIsQ0FoQnVDLHdCQWlCdkMsR0FBSSxXQUFXLEdBQUssU0FBcEIsQ0FBK0IsbURBQzdCLEtBQU0sSUFBSSxDQUFBLFlBQUEsQ0FBQSxTQUFKLENBQWMsY0FBQSxDQUFBLFdBQUEsQ0FBWSxjQUExQixDQUFOLENBQ0QsQ0FGRCxnQ0FqQnVDLHdCQXFCdkMsR0FBSSwyQkFBQSxTQUFTLDhCQUFJLFdBQVcsQ0FBQyxLQUFaLENBQW9CLEtBQXhCLENBQVQsNkJBQTBDLFdBQVcsQ0FBQyxJQUFaLEdBQXFCLFdBQS9ELENBQUosQ0FBZ0YsMkJBQzlFLEtBQU0sQ0FBQSxnQkFBZ0IsMEJBQUcsR0FBSSxDQUFBLGVBQUEsQ0FBQSw0QkFBSixDQUFpQyxNQUFNLENBQUMsTUFBeEMsQ0FBZ0QsTUFBTSxDQUFDLE1BQXZELENBQUgsQ0FBdEIsQ0FEOEUsd0JBRTlFLEtBQUssQ0FBQyxZQUFOLENBQW1CLEtBQW5CLENBQTBCLGdCQUExQixFQUY4RSx3QkFJOUUsR0FBSSxnQkFBZ0IsQ0FBQyxpQkFBakIsRUFBc0MsS0FBSyxDQUFDLElBQWhELENBQXNELG1EQUNwRCxLQUFNLElBQUksQ0FBQSxZQUFBLENBQUEsU0FBSixDQUFjLGNBQUEsQ0FBQSxXQUFBLENBQVksNkJBQTFCLENBQU4sQ0FDRCxDQUZELGdDQUlBLEtBQU0sQ0FBQSxZQUFZLDBCQUFHLEdBQUksQ0FBQSxjQUFBLENBQUEsWUFBSixDQUFpQixNQUFNLENBQUMsTUFBeEIsQ0FBZ0MsTUFBTSxDQUFDLE1BQXZDLENBQStDLE1BQU0sQ0FBQyxXQUF0RCxDQUFILENBQWxCLENBUjhFLHdCQVM5RSxLQUFLLENBQUMsWUFBTixDQUFtQixLQUFuQixDQUEwQixZQUExQixFQVQ4RSx3QkFVOUUsTUFBTyxDQUFBLEtBQVAsQ0FDRCxDQVhELGdDQXJCdUMsd0JBa0N2QyxLQUFNLElBQUksQ0FBQSxZQUFBLENBQUEsU0FBSixDQUFjLGNBQUEsQ0FBQSxXQUFBLENBQVksY0FBMUIsQ0FBTixDQUNELENBbkNELGdDQUgrRSx3QkF3Qy9FLE1BQU8sQ0FBQSxLQUFQLENBQ0QsQyx3QkF6Q0QsT0FBQSxDQUFBLGtCQUFBLENBQUEsa0JBQUEsQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBsYXlQb2tlbW9uRWZmZWN0IH0gZnJvbSAnLi4vZWZmZWN0cy9wbGF5LWNhcmQtZWZmZWN0cyc7XG5pbXBvcnQgeyBHYW1lRXJyb3IgfSBmcm9tICcuLi8uLi9nYW1lLWVycm9yJztcbmltcG9ydCB7IEdhbWVNZXNzYWdlLCBHYW1lTG9nIH0gZnJvbSAnLi4vLi4vZ2FtZS1tZXNzYWdlJztcbmltcG9ydCB7IEVmZmVjdCB9IGZyb20gJy4uL2VmZmVjdHMvZWZmZWN0JztcbmltcG9ydCB7IFN0YWdlIH0gZnJvbSAnLi4vY2FyZC9jYXJkLXR5cGVzJztcbmltcG9ydCB7IFN0YXRlIH0gZnJvbSAnLi4vc3RhdGUvc3RhdGUnO1xuaW1wb3J0IHsgU3RvcmVMaWtlIH0gZnJvbSAnLi4vc3RvcmUtbGlrZSc7XG5pbXBvcnQgeyBDaGVja1Bva2Vtb25QbGF5ZWRUdXJuRWZmZWN0IH0gZnJvbSAnLi4vZWZmZWN0cy9jaGVjay1lZmZlY3RzJztcbmltcG9ydCB7RXZvbHZlRWZmZWN0fSBmcm9tICcuLi9lZmZlY3RzL2dhbWUtZWZmZWN0cyc7XG5cblxuZXhwb3J0IGZ1bmN0aW9uIHBsYXlQb2tlbW9uUmVkdWNlcihzdG9yZTogU3RvcmVMaWtlLCBzdGF0ZTogU3RhdGUsIGVmZmVjdDogRWZmZWN0KTogU3RhdGUge1xuXG4gIC8qIFBsYXkgcG9rZW1vbiBjYXJkICovXG4gIGlmIChlZmZlY3QgaW5zdGFuY2VvZiBQbGF5UG9rZW1vbkVmZmVjdCkge1xuICAgIGNvbnN0IHN0YWdlID0gZWZmZWN0LnBva2Vtb25DYXJkLnN0YWdlO1xuICAgIGNvbnN0IGlzQmFzaWMgPSBzdGFnZSA9PT0gU3RhZ2UuQkFTSUM7XG5cbiAgICBpZiAoaXNCYXNpYyAmJiBlZmZlY3QudGFyZ2V0LmNhcmRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgc3RvcmUubG9nKHN0YXRlLCBHYW1lTG9nLkxPR19QTEFZRVJfUExBWVNfQkFTSUNfUE9LRU1PTiwge1xuICAgICAgICBuYW1lOiBlZmZlY3QucGxheWVyLm5hbWUsXG4gICAgICAgIGNhcmQ6IGVmZmVjdC5wb2tlbW9uQ2FyZC5uYW1lXG4gICAgICB9KTtcbiAgICAgIGVmZmVjdC5wbGF5ZXIuaGFuZC5tb3ZlQ2FyZFRvKGVmZmVjdC5wb2tlbW9uQ2FyZCwgZWZmZWN0LnRhcmdldCk7XG4gICAgICBlZmZlY3QudGFyZ2V0LnBva2Vtb25QbGF5ZWRUdXJuID0gc3RhdGUudHVybjtcbiAgICAgIHJldHVybiBzdGF0ZTtcbiAgICB9XG5cbiAgICBjb25zdCBpc0V2b2x2ZWQgPSBzdGFnZSA9PT0gU3RhZ2UuU1RBR0VfMSB8fCBTdGFnZS5TVEFHRV8yO1xuICAgIGNvbnN0IGV2b2x2ZXNGcm9tID0gZWZmZWN0LnBva2Vtb25DYXJkLmV2b2x2ZXNGcm9tO1xuICAgIGNvbnN0IHBva2Vtb25DYXJkID0gZWZmZWN0LnRhcmdldC5nZXRQb2tlbW9uQ2FyZCgpO1xuICAgIGlmIChwb2tlbW9uQ2FyZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgR2FtZUVycm9yKEdhbWVNZXNzYWdlLklOVkFMSURfVEFSR0VUKTtcbiAgICB9XG5cbiAgICBpZiAoaXNFdm9sdmVkICYmIHBva2Vtb25DYXJkLnN0YWdlIDwgc3RhZ2UgJiYgcG9rZW1vbkNhcmQubmFtZSA9PT0gZXZvbHZlc0Zyb20pIHtcbiAgICAgIGNvbnN0IHBsYXllZFR1cm5FZmZlY3QgPSBuZXcgQ2hlY2tQb2tlbW9uUGxheWVkVHVybkVmZmVjdChlZmZlY3QucGxheWVyLCBlZmZlY3QudGFyZ2V0KTtcbiAgICAgIHN0b3JlLnJlZHVjZUVmZmVjdChzdGF0ZSwgcGxheWVkVHVybkVmZmVjdCk7XG5cbiAgICAgIGlmIChwbGF5ZWRUdXJuRWZmZWN0LnBva2Vtb25QbGF5ZWRUdXJuID49IHN0YXRlLnR1cm4pIHtcbiAgICAgICAgdGhyb3cgbmV3IEdhbWVFcnJvcihHYW1lTWVzc2FnZS5QT0tFTU9OX0NBTlRfRVZPTFZFX1RISVNfVFVSTik7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGV2b2x2ZUVmZmVjdCA9IG5ldyBFdm9sdmVFZmZlY3QoZWZmZWN0LnBsYXllciwgZWZmZWN0LnRhcmdldCwgZWZmZWN0LnBva2Vtb25DYXJkKTtcbiAgICAgIHN0b3JlLnJlZHVjZUVmZmVjdChzdGF0ZSwgZXZvbHZlRWZmZWN0KTtcbiAgICAgIHJldHVybiBzdGF0ZTtcbiAgICB9XG5cbiAgICB0aHJvdyBuZXcgR2FtZUVycm9yKEdhbWVNZXNzYWdlLklOVkFMSURfVEFSR0VUKTtcbiAgfVxuXG4gIHJldHVybiBzdGF0ZTtcbn1cbiJdfQ==