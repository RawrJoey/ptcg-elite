"use strict";function cov_29aehs1zph(){var path="/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/game/store/effect-reducers/play-trainer-effect.ts";var hash="62c8cf23f1d710a095e12ae6af83538f52b04ae9";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/game/store/effect-reducers/play-trainer-effect.ts",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:62}},"1":{start:{line:3,column:0},end:{line:3,column:36}},"2":{start:{line:4,column:28},end:{line:4,column:67}},"3":{start:{line:5,column:21},end:{line:5,column:48}},"4":{start:{line:6,column:23},end:{line:6,column:52}},"5":{start:{line:7,column:22},end:{line:7,column:47}},"6":{start:{line:8,column:21},end:{line:8,column:50}},"7":{start:{line:11,column:4},end:{line:19,column:5}},"8":{start:{line:12,column:28},end:{line:12,column:115}},"9":{start:{line:13,column:8},end:{line:13,column:55}},"10":{start:{line:14,column:8},end:{line:17,column:11}},"11":{start:{line:18,column:8},end:{line:18,column:21}},"12":{start:{line:21,column:4},end:{line:37,column:5}},"13":{start:{line:22,column:23},end:{line:22,column:36}},"14":{start:{line:23,column:25},end:{line:23,column:76}},"15":{start:{line:24,column:8},end:{line:26,column:9}},"16":{start:{line:25,column:12},end:{line:25,column:50}},"17":{start:{line:27,column:8},end:{line:29,column:9}},"18":{start:{line:28,column:12},end:{line:28,column:54}},"19":{start:{line:30,column:8},end:{line:33,column:11}},"20":{start:{line:34,column:8},end:{line:34,column:35}},"21":{start:{line:35,column:8},end:{line:35,column:67}},"22":{start:{line:36,column:8},end:{line:36,column:21}},"23":{start:{line:39,column:4},end:{line:57,column:5}},"24":{start:{line:40,column:28},end:{line:40,column:58}},"25":{start:{line:41,column:8},end:{line:43,column:9}},"26":{start:{line:42,column:12},end:{line:42,column:88}},"27":{start:{line:44,column:8},end:{line:46,column:9}},"28":{start:{line:45,column:12},end:{line:45,column:103}},"29":{start:{line:47,column:8},end:{line:51,column:11}},"30":{start:{line:52,column:8},end:{line:52,column:73}},"31":{start:{line:53,column:8},end:{line:53,column:48}},"32":{start:{line:54,column:28},end:{line:54,column:115}},"33":{start:{line:55,column:8},end:{line:55,column:55}},"34":{start:{line:56,column:8},end:{line:56,column:21}},"35":{start:{line:59,column:4},end:{line:67,column:5}},"36":{start:{line:60,column:28},end:{line:60,column:115}},"37":{start:{line:61,column:8},end:{line:61,column:55}},"38":{start:{line:62,column:8},end:{line:65,column:11}},"39":{start:{line:66,column:8},end:{line:66,column:21}},"40":{start:{line:69,column:4},end:{line:76,column:5}},"41":{start:{line:70,column:8},end:{line:74,column:9}},"42":{start:{line:71,column:32},end:{line:71,column:101}},"43":{start:{line:72,column:27},end:{line:72,column:88}},"44":{start:{line:73,column:12},end:{line:73,column:70}},"45":{start:{line:75,column:8},end:{line:75,column:21}},"46":{start:{line:77,column:4},end:{line:77,column:17}},"47":{start:{line:79,column:0},end:{line:79,column:48}}},fnMap:{"0":{name:"playTrainerReducer",decl:{start:{line:9,column:9},end:{line:9,column:27}},loc:{start:{line:9,column:50},end:{line:78,column:1}},line:9}},branchMap:{"0":{loc:{start:{line:11,column:4},end:{line:19,column:5}},type:"if",locations:[{start:{line:11,column:4},end:{line:19,column:5}},{start:{line:11,column:4},end:{line:19,column:5}}],line:11},"1":{loc:{start:{line:21,column:4},end:{line:37,column:5}},type:"if",locations:[{start:{line:21,column:4},end:{line:37,column:5}},{start:{line:21,column:4},end:{line:37,column:5}}],line:21},"2":{loc:{start:{line:24,column:8},end:{line:26,column:9}},type:"if",locations:[{start:{line:24,column:8},end:{line:26,column:9}},{start:{line:24,column:8},end:{line:26,column:9}}],line:24},"3":{loc:{start:{line:27,column:8},end:{line:29,column:9}},type:"if",locations:[{start:{line:27,column:8},end:{line:29,column:9}},{start:{line:27,column:8},end:{line:29,column:9}}],line:27},"4":{loc:{start:{line:39,column:4},end:{line:57,column:5}},type:"if",locations:[{start:{line:39,column:4},end:{line:57,column:5}},{start:{line:39,column:4},end:{line:57,column:5}}],line:39},"5":{loc:{start:{line:41,column:8},end:{line:43,column:9}},type:"if",locations:[{start:{line:41,column:8},end:{line:43,column:9}},{start:{line:41,column:8},end:{line:43,column:9}}],line:41},"6":{loc:{start:{line:44,column:8},end:{line:46,column:9}},type:"if",locations:[{start:{line:44,column:8},end:{line:46,column:9}},{start:{line:44,column:8},end:{line:46,column:9}}],line:44},"7":{loc:{start:{line:59,column:4},end:{line:67,column:5}},type:"if",locations:[{start:{line:59,column:4},end:{line:67,column:5}},{start:{line:59,column:4},end:{line:67,column:5}}],line:59},"8":{loc:{start:{line:69,column:4},end:{line:76,column:5}},type:"if",locations:[{start:{line:69,column:4},end:{line:76,column:5}},{start:{line:69,column:4},end:{line:76,column:5}}],line:69},"9":{loc:{start:{line:70,column:8},end:{line:74,column:9}},type:"if",locations:[{start:{line:70,column:8},end:{line:74,column:9}},{start:{line:70,column:8},end:{line:74,column:9}}],line:70},"10":{loc:{start:{line:72,column:27},end:{line:72,column:88}},type:"cond-expr",locations:[{start:{line:72,column:41},end:{line:72,column:64}},{start:{line:72,column:67},end:{line:72,column:88}}],line:72}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0},f:{"0":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0]},inputSourceMap:{version:3,file:"/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/game/store/effect-reducers/play-trainer-effect.ts",sources:["/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/game/store/effect-reducers/play-trainer-effect.ts"],names:[],mappings:"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",sourcesContent:["import { AttachPokemonToolEffect, TrainerEffect, PlaySupporterEffect,\n  PlayItemEffect, PlayStadiumEffect } from '../effects/play-card-effects';\nimport { GameError } from '../../game-error';\nimport { GameMessage, GameLog } from '../../game-message';\nimport { Effect } from '../effects/effect';\nimport { State } from '../state/state';\nimport { StoreLike } from '../store-like';\nimport { StateUtils } from '../state-utils';\nimport { TrainerType } from '../card/card-types';\n\n\nexport function playTrainerReducer(store: StoreLike, state: State, effect: Effect): State {\n\n  /* Play supporter card */\n  if (effect instanceof PlaySupporterEffect) {\n    const playTrainer = new TrainerEffect(effect.player, effect.trainerCard, effect.target);\n    state = store.reduceEffect(state, playTrainer);\n    store.log(state, GameLog.LOG_PLAYER_PLAYS_SUPPORTER, {\n      name: effect.player.name,\n      card: effect.trainerCard.name\n    });\n    return state;\n  }\n\n  /* Play stadium card */\n  if (effect instanceof PlayStadiumEffect) {\n    const player = effect.player;\n    const opponent = StateUtils.getOpponent(state, player);\n    if (player.stadium.cards.length > 0) {\n      player.stadium.moveTo(player.discard);\n    }\n    if (opponent.stadium.cards.length > 0) {\n      opponent.stadium.moveTo(opponent.discard);\n    }\n    store.log(state, GameLog.LOG_PLAYER_PLAYS_STADIUM, {\n      name: effect.player.name,\n      card: effect.trainerCard.name\n    });\n    player.stadiumUsedTurn = 0;\n    player.hand.moveCardTo(effect.trainerCard, player.stadium);\n    return state;\n  }\n\n  // Play Pokemon Tool card\n  if (effect instanceof AttachPokemonToolEffect) {\n    const pokemonCard = effect.target.getPokemonCard();\n    if (pokemonCard === undefined) {\n      throw new GameError(GameMessage.INVALID_TARGET);\n    }\n    if (effect.target.tool !== undefined) {\n      throw new GameError(GameMessage.POKEMON_TOOL_ALREADY_ATTACHED);\n    }\n\n    store.log(state, GameLog.LOG_PLAYER_PLAYS_TOOL, {\n      name: effect.player.name,\n      card: effect.trainerCard.name,\n      pokemon: pokemonCard.name\n    });\n    effect.player.hand.moveCardTo(effect.trainerCard, effect.target);\n    effect.target.tool = effect.trainerCard;\n\n    const playTrainer = new TrainerEffect(effect.player, effect.trainerCard, effect.target);\n    state = store.reduceEffect(state, playTrainer);\n\n    return state;\n  }\n\n  // Play item card\n  if (effect instanceof PlayItemEffect) {\n    const playTrainer = new TrainerEffect(effect.player, effect.trainerCard, effect.target);\n    state = store.reduceEffect(state, playTrainer);\n    store.log(state, GameLog.LOG_PLAYER_PLAYS_ITEM, {\n      name: effect.player.name,\n      card: effect.trainerCard.name\n    });\n    return state;\n  }\n\n  // Process trainer effect\n  if (effect instanceof TrainerEffect) {\n    if (effect.player.hand.cards.includes(effect.trainerCard)) {\n      const isSupporter = effect.trainerCard.trainerType === TrainerType.SUPPORTER;\n      const target = isSupporter ? effect.player.supporter : effect.player.discard;\n      effect.player.hand.moveCardTo(effect.trainerCard, target);\n    }\n    return state;\n  }\n\n  return state;\n}\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"62c8cf23f1d710a095e12ae6af83538f52b04ae9"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_29aehs1zph=function(){return actualCoverage;};}return actualCoverage;}cov_29aehs1zph();cov_29aehs1zph().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_29aehs1zph().s[1]++;exports.playTrainerReducer=void 0;const play_card_effects_1=(cov_29aehs1zph().s[2]++,require("../effects/play-card-effects"));const game_error_1=(cov_29aehs1zph().s[3]++,require("../../game-error"));const game_message_1=(cov_29aehs1zph().s[4]++,require("../../game-message"));const state_utils_1=(cov_29aehs1zph().s[5]++,require("../state-utils"));const card_types_1=(cov_29aehs1zph().s[6]++,require("../card/card-types"));function playTrainerReducer(store,state,effect){cov_29aehs1zph().f[0]++;cov_29aehs1zph().s[7]++;/* Play supporter card */if(effect instanceof play_card_effects_1.PlaySupporterEffect){cov_29aehs1zph().b[0][0]++;const playTrainer=(cov_29aehs1zph().s[8]++,new play_card_effects_1.TrainerEffect(effect.player,effect.trainerCard,effect.target));cov_29aehs1zph().s[9]++;state=store.reduceEffect(state,playTrainer);cov_29aehs1zph().s[10]++;store.log(state,game_message_1.GameLog.LOG_PLAYER_PLAYS_SUPPORTER,{name:effect.player.name,card:effect.trainerCard.name});cov_29aehs1zph().s[11]++;return state;}else{cov_29aehs1zph().b[0][1]++;}/* Play stadium card */cov_29aehs1zph().s[12]++;if(effect instanceof play_card_effects_1.PlayStadiumEffect){cov_29aehs1zph().b[1][0]++;const player=(cov_29aehs1zph().s[13]++,effect.player);const opponent=(cov_29aehs1zph().s[14]++,state_utils_1.StateUtils.getOpponent(state,player));cov_29aehs1zph().s[15]++;if(player.stadium.cards.length>0){cov_29aehs1zph().b[2][0]++;cov_29aehs1zph().s[16]++;player.stadium.moveTo(player.discard);}else{cov_29aehs1zph().b[2][1]++;}cov_29aehs1zph().s[17]++;if(opponent.stadium.cards.length>0){cov_29aehs1zph().b[3][0]++;cov_29aehs1zph().s[18]++;opponent.stadium.moveTo(opponent.discard);}else{cov_29aehs1zph().b[3][1]++;}cov_29aehs1zph().s[19]++;store.log(state,game_message_1.GameLog.LOG_PLAYER_PLAYS_STADIUM,{name:effect.player.name,card:effect.trainerCard.name});cov_29aehs1zph().s[20]++;player.stadiumUsedTurn=0;cov_29aehs1zph().s[21]++;player.hand.moveCardTo(effect.trainerCard,player.stadium);cov_29aehs1zph().s[22]++;return state;}else{cov_29aehs1zph().b[1][1]++;}// Play Pokemon Tool card
cov_29aehs1zph().s[23]++;if(effect instanceof play_card_effects_1.AttachPokemonToolEffect){cov_29aehs1zph().b[4][0]++;const pokemonCard=(cov_29aehs1zph().s[24]++,effect.target.getPokemonCard());cov_29aehs1zph().s[25]++;if(pokemonCard===undefined){cov_29aehs1zph().b[5][0]++;cov_29aehs1zph().s[26]++;throw new game_error_1.GameError(game_message_1.GameMessage.INVALID_TARGET);}else{cov_29aehs1zph().b[5][1]++;}cov_29aehs1zph().s[27]++;if(effect.target.tool!==undefined){cov_29aehs1zph().b[6][0]++;cov_29aehs1zph().s[28]++;throw new game_error_1.GameError(game_message_1.GameMessage.POKEMON_TOOL_ALREADY_ATTACHED);}else{cov_29aehs1zph().b[6][1]++;}cov_29aehs1zph().s[29]++;store.log(state,game_message_1.GameLog.LOG_PLAYER_PLAYS_TOOL,{name:effect.player.name,card:effect.trainerCard.name,pokemon:pokemonCard.name});cov_29aehs1zph().s[30]++;effect.player.hand.moveCardTo(effect.trainerCard,effect.target);cov_29aehs1zph().s[31]++;effect.target.tool=effect.trainerCard;const playTrainer=(cov_29aehs1zph().s[32]++,new play_card_effects_1.TrainerEffect(effect.player,effect.trainerCard,effect.target));cov_29aehs1zph().s[33]++;state=store.reduceEffect(state,playTrainer);cov_29aehs1zph().s[34]++;return state;}else{cov_29aehs1zph().b[4][1]++;}// Play item card
cov_29aehs1zph().s[35]++;if(effect instanceof play_card_effects_1.PlayItemEffect){cov_29aehs1zph().b[7][0]++;const playTrainer=(cov_29aehs1zph().s[36]++,new play_card_effects_1.TrainerEffect(effect.player,effect.trainerCard,effect.target));cov_29aehs1zph().s[37]++;state=store.reduceEffect(state,playTrainer);cov_29aehs1zph().s[38]++;store.log(state,game_message_1.GameLog.LOG_PLAYER_PLAYS_ITEM,{name:effect.player.name,card:effect.trainerCard.name});cov_29aehs1zph().s[39]++;return state;}else{cov_29aehs1zph().b[7][1]++;}// Process trainer effect
cov_29aehs1zph().s[40]++;if(effect instanceof play_card_effects_1.TrainerEffect){cov_29aehs1zph().b[8][0]++;cov_29aehs1zph().s[41]++;if(effect.player.hand.cards.includes(effect.trainerCard)){cov_29aehs1zph().b[9][0]++;const isSupporter=(cov_29aehs1zph().s[42]++,effect.trainerCard.trainerType===card_types_1.TrainerType.SUPPORTER);const target=(cov_29aehs1zph().s[43]++,isSupporter?(cov_29aehs1zph().b[10][0]++,effect.player.supporter):(cov_29aehs1zph().b[10][1]++,effect.player.discard));cov_29aehs1zph().s[44]++;effect.player.hand.moveCardTo(effect.trainerCard,target);}else{cov_29aehs1zph().b[9][1]++;}cov_29aehs1zph().s[45]++;return state;}else{cov_29aehs1zph().b[8][1]++;}cov_29aehs1zph().s[46]++;return state;}cov_29aehs1zph().s[47]++;exports.playTrainerReducer=playTrainerReducer;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2pvZW15ZXJzY291Z2gvRG9jdW1lbnRzL0dpdEh1Yi9wdGNnLWVwc2QvcHRjZy1zZXJ2ZXIvc3JjL2dhbWUvc3RvcmUvZWZmZWN0LXJlZHVjZXJzL3BsYXktdHJhaW5lci1lZmZlY3QudHMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9qb2VteWVyc2NvdWdoL0RvY3VtZW50cy9HaXRIdWIvcHRjZy1lcHNkL3B0Y2ctc2VydmVyL3NyYy9nYW1lL3N0b3JlL2VmZmVjdC1yZWR1Y2Vycy9wbGF5LXRyYWluZXItZWZmZWN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLG9FQUMwRTtBQUMxRSxpREFBNkM7QUFDN0MscURBQTBEO0FBSTFELGdEQUE0QztBQUM1QyxtREFBaUQ7QUFHakQsU0FBZ0Isa0JBQWtCLENBQUMsS0FBZ0IsRUFBRSxLQUFZLEVBQUUsTUFBYztJQUUvRSx5QkFBeUI7SUFDekIsSUFBSSxNQUFNLFlBQVksdUNBQW1CLEVBQUU7UUFDekMsTUFBTSxXQUFXLEdBQUcsSUFBSSxpQ0FBYSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLFdBQVcsRUFBRSxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDeEYsS0FBSyxHQUFHLEtBQUssQ0FBQyxZQUFZLENBQUMsS0FBSyxFQUFFLFdBQVcsQ0FBQyxDQUFDO1FBQy9DLEtBQUssQ0FBQyxHQUFHLENBQUMsS0FBSyxFQUFFLHNCQUFPLENBQUMsMEJBQTBCLEVBQUU7WUFDbkQsSUFBSSxFQUFFLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSTtZQUN4QixJQUFJLEVBQUUsTUFBTSxDQUFDLFdBQVcsQ0FBQyxJQUFJO1NBQzlCLENBQUMsQ0FBQztRQUNILE9BQU8sS0FBSyxDQUFDO0tBQ2Q7SUFFRCx1QkFBdUI7SUFDdkIsSUFBSSxNQUFNLFlBQVkscUNBQWlCLEVBQUU7UUFDdkMsTUFBTSxNQUFNLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQztRQUM3QixNQUFNLFFBQVEsR0FB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QUFLLENBQUM7S0FDZDtJQUVELHlCQUF5QjtJQUN6QixJQUFJLE1BQU0sWUFBWSxpQ0FBYSxFQUFFO1FBQ25DLElBQUksTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLEVBQUU7WUFDekQsTUFBTSxXQUFXLEdBQUcsTUFBTSxDQUFDLFdBQVcsQ0FBQyxXQUFXLEtBQUssd0JBQVcsQ0FBQyxTQUFTLENBQUM7WUFDN0UsTUFBTSxNQUFNLEdBQUcsV0FBVyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUM7WUFDN0UsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxXQUFXLEVBQUUsTUFBTSxDQUFDLENBQUM7U0FDM0Q7UUFDRCxPQUFPLEtBQUssQ0FBQztLQUNkO0lBRUQsT0FBTyxLQUFLLENBQUM7QUFDZixDQUFDO0FBOUVELGdEQThFQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEF0dGFjaFBva2Vtb25Ub29sRWZmZWN0LCBUcmFpbmVyRWZmZWN0LCBQbGF5U3VwcG9ydGVyRWZmZWN0LFxuICBQbGF5SXRlbUVmZmVjdCwgUGxheVN0YWRpdW1FZmZlY3QgfSBmcm9tICcuLi9lZmZlY3RzL3BsYXktY2FyZC1lZmZlY3RzJztcbmltcG9ydCB7IEdhbWVFcnJvciB9IGZyb20gJy4uLy4uL2dhbWUtZXJyb3InO1xuaW1wb3J0IHsgR2FtZU1lc3NhZ2UsIEdhbWVMb2cgfSBmcm9tICcuLi8uLi9nYW1lLW1lc3NhZ2UnO1xuaW1wb3J0IHsgRWZmZWN0IH0gZnJvbSAnLi4vZWZmZWN0cy9lZmZlY3QnO1xuaW1wb3J0IHsgU3RhdGUgfSBmcm9tICcuLi9zdGF0ZS9zdGF0ZSc7XG5pbXBvcnQgeyBTdG9yZUxpa2UgfSBmcm9tICcuLi9zdG9yZS1saWtlJztcbmltcG9ydCB7IFN0YXRlVXRpbHMgfSBmcm9tICcuLi9zdGF0ZS11dGlscyc7XG5pbXBvcnQgeyBUcmFpbmVyVHlwZSB9IGZyb20gJy4uL2NhcmQvY2FyZC10eXBlcyc7XG5cblxuZXhwb3J0IGZ1bmN0aW9uIHBsYXlUcmFpbmVyUmVkdWNlcihzdG9yZTogU3RvcmVMaWtlLCBzdGF0ZTogU3RhdGUsIGVmZmVjdDogRWZmZWN0KTogU3RhdGUge1xuXG4gIC8qIFBsYXkgc3VwcG9ydGVyIGNhcmQgKi9cbiAgaWYgKGVmZmVjdCBpbnN0YW5jZW9mIFBsYXlTdXBwb3J0ZXJFZmZlY3QpIHtcbiAgICBjb25zdCBwbGF5VHJhaW5lciA9IG5ldyBUcmFpbmVyRWZmZWN0KGVmZmVjdC5wbGF5ZXIsIGVmZmVjdC50cmFpbmVyQ2FyZCwgZWZmZWN0LnRhcmdldCk7XG4gICAgc3RhdGUgPSBzdG9yZS5yZWR1Y2VFZmZlY3Qoc3RhdGUsIHBsYXlUcmFpbmVyKTtcbiAgICBzdG9yZS5sb2coc3RhdGUsIEdhbWVMb2cuTE9HX1BMQVlFUl9QTEFZU19TVVBQT1JURVIsIHtcbiAgICAgIG5hbWU6IGVmZmVjdC5wbGF5ZXIubmFtZSxcbiAgICAgIGNhcmQ6IGVmZmVjdC50cmFpbmVyQ2FyZC5uYW1lXG4gICAgfSk7XG4gICAgcmV0dXJuIHN0YXRlO1xuICB9XG5cbiAgLyogUGxheSBzdGFkaXVtIGNhcmQgKi9cbiAgaWYgKGVmZmVjdCBpbnN0YW5jZW9mIFBsYXlTdGFkaXVtRWZmZWN0KSB7XG4gICAgY29uc3QgcGxheWVyID0gZWZmZWN0LnBsYXllcjtcbiAgICBjb25zdCBvcHBvbmVudCA9IFN0YXRlVXRpbHMuZ2V0T3Bwb25lbnQoc3RhdGUsIHBsYXllcik7XG4gICAgaWYgKHBsYXllci5zdGFkaXVtLmNhcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgIHBsYXllci5zdGFkaXVtLm1vdmVUbyhwbGF5ZXIuZGlzY2FyZCk7XG4gICAgfVxuICAgIGlmIChvcHBvbmVudC5zdGFkaXVtLmNhcmRzLmxlbmd0aCA+IDApIHtcbiAgICAgIG9wcG9uZW50LnN0YWRpdW0ubW92ZVRvKG9wcG9uZW50LmRpc2NhcmQpO1xuICAgIH1cbiAgICBzdG9yZS5sb2coc3RhdGUsIEdhbWVMb2cuTE9HX1BMQVlFUl9QTEFZU19TVEFESVVNLCB7XG4gICAgICBuYW1lOiBlZmZlY3QucGxheWVyLm5hbWUsXG4gICAgICBjYXJkOiBlZmZlY3QudHJhaW5lckNhcmQubmFtZVxuICAgIH0pO1xuICAgIHBsYXllci5zdGFkaXVtVXNlZFR1cm4gPSAwO1xuICAgIHBsYXllci5oYW5kLm1vdmVDYXJkVG8oZWZmZWN0LnRyYWluZXJDYXJkLCBwbGF5ZXIuc3RhZGl1bSk7XG4gICAgcmV0dXJuIHN0YXRlO1xuICB9XG5cbiAgLy8gUGxheSBQb2tlbW9uIFRvb2wgY2FyZFxuICBpZiAoZWZmZWN0IGluc3RhbmNlb2YgQXR0YWNoUG9rZW1vblRvb2xFZmZlY3QpIHtcbiAgICBjb25zdCBwb2tlbW9uQ2FyZCA9IGVmZmVjdC50YXJnZXQuZ2V0UG9rZW1vbkNhcmQoKTtcbiAgICBpZiAocG9rZW1vbkNhcmQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IEdhbWVFcnJvcihHYW1lTWVzc2FnZS5JTlZBTElEX1RBUkdFVCk7XG4gICAgfVxuICAgIGlmIChlZmZlY3QudGFyZ2V0LnRvb2wgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IEdhbWVFcnJvcihHYW1lTWVzc2FnZS5QT0tFTU9OX1RPT0xfQUxSRUFEWV9BVFRBQ0hFRCk7XG4gICAgfVxuXG4gICAgc3RvcmUubG9nKHN0YXRlLCBHYW1lTG9nLkxPR19QTEFZRVJfUExBWVNfVE9PTCwge1xuICAgICAgbmFtZTogZWZmZWN0LnBsYXllci5uYW1lLFxuICAgICAgY2FyZDogZWZmZWN0LnRyYWluZXJDYXJkLm5hbWUsXG4gICAgICBwb2tlbW9uOiBwb2tlbW9uQ2FyZC5uYW1lXG4gICAgfSk7XG4gICAgZWZmZWN0LnBsYXllci5oYW5kLm1vdmVDYXJkVG8oZWZmZWN0LnRyYWluZXJDYXJkLCBlZmZlY3QudGFyZ2V0KTtcbiAgICBlZmZlY3QudGFyZ2V0LnRvb2wgPSBlZmZlY3QudHJhaW5lckNhcmQ7XG5cbiAgICBjb25zdCBwbGF5VHJhaW5lciA9IG5ldyBUcmFpbmVyRWZmZWN0KGVmZmVjdC5wbGF5ZXIsIGVmZmVjdC50cmFpbmVyQ2FyZCwgZWZmZWN0LnRhcmdldCk7XG4gICAgc3RhdGUgPSBzdG9yZS5yZWR1Y2VFZmZlY3Qoc3RhdGUsIHBsYXlUcmFpbmVyKTtcblxuICAgIHJldHVybiBzdGF0ZTtcbiAgfVxuXG4gIC8vIFBsYXkgaXRlbSBjYXJkXG4gIGlmIChlZmZlY3QgaW5zdGFuY2VvZiBQbGF5SXRlbUVmZmVjdCkge1xuICAgIGNvbnN0IHBsYXlUcmFpbmVyID0gbmV3IFRyYWluZXJFZmZlY3QoZWZmZWN0LnBsYXllciwgZWZmZWN0LnRyYWluZXJDYXJkLCBlZmZlY3QudGFyZ2V0KTtcbiAgICBzdGF0ZSA9IHN0b3JlLnJlZHVjZUVmZmVjdChzdGF0ZSwgcGxheVRyYWluZXIpO1xuICAgIHN0b3JlLmxvZyhzdGF0ZSwgR2FtZUxvZy5MT0dfUExBWUVSX1BMQVlTX0lURU0sIHtcbiAgICAgIG5hbWU6IGVmZmVjdC5wbGF5ZXIubmFtZSxcbiAgICAgIGNhcmQ6IGVmZmVjdC50cmFpbmVyQ2FyZC5uYW1lXG4gICAgfSk7XG4gICAgcmV0dXJuIHN0YXRlO1xuICB9XG5cbiAgLy8gUHJvY2VzcyB0cmFpbmVyIGVmZmVjdFxuICBpZiAoZWZmZWN0IGluc3RhbmNlb2YgVHJhaW5lckVmZmVjdCkge1xuICAgIGlmIChlZmZlY3QucGxheWVyLmhhbmQuY2FyZHMuaW5jbHVkZXMoZWZmZWN0LnRyYWluZXJDYXJkKSkge1xuICAgICAgY29uc3QgaXNTdXBwb3J0ZXIgPSBlZmZlY3QudHJhaW5lckNhcmQudHJhaW5lclR5cGUgPT09IFRyYWluZXJUeXBlLlNVUFBPUlRFUjtcbiAgICAgIGNvbnN0IHRhcmdldCA9IGlzU3VwcG9ydGVyID8gZWZmZWN0LnBsYXllci5zdXBwb3J0ZXIgOiBlZmZlY3QucGxheWVyLmRpc2NhcmQ7XG4gICAgICBlZmZlY3QucGxheWVyLmhhbmQubW92ZUNhcmRUbyhlZmZlY3QudHJhaW5lckNhcmQsIHRhcmdldCk7XG4gICAgfVxuICAgIHJldHVybiBzdGF0ZTtcbiAgfVxuXG4gIHJldHVybiBzdGF0ZTtcbn1cbiJdfQ==
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qb2VteWVyc2NvdWdoL0RvY3VtZW50cy9HaXRIdWIvcHRjZy1lcHNkL3B0Y2ctc2VydmVyL3NyYy9nYW1lL3N0b3JlL2VmZmVjdC1yZWR1Y2Vycy9wbGF5LXRyYWluZXItZWZmZWN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJtdllBbUJNO3NPQW5CTixLQUFBLENBQUEsbUJBQUEsMEJBQUEsT0FBQSxDQUFBLDhCQUFBLENBQUEsQ0FBQSxDQUVBLEtBQUEsQ0FBQSxZQUFBLDBCQUFBLE9BQUEsQ0FBQSxrQkFBQSxDQUFBLENBQUEsQ0FDQSxLQUFBLENBQUEsY0FBQSwwQkFBQSxPQUFBLENBQUEsb0JBQUEsQ0FBQSxDQUFBLENBSUEsS0FBQSxDQUFBLGFBQUEsMEJBQUEsT0FBQSxDQUFBLGdCQUFBLENBQUEsQ0FBQSxDQUNBLEtBQUEsQ0FBQSxZQUFBLDBCQUFBLE9BQUEsQ0FBQSxvQkFBQSxDQUFBLENBQUEsQ0FHQSxRQUFnQixDQUFBLGtCQUFoQixDQUFtQyxLQUFuQyxDQUFxRCxLQUFyRCxDQUFtRSxNQUFuRSxDQUFpRixpREFFL0UseUJBQ0EsR0FBSSxNQUFNLFdBQVksQ0FBQSxtQkFBQSxDQUFBLG1CQUF0QixDQUEyQyw0QkFDekMsS0FBTSxDQUFBLFdBQVcsMEJBQUcsR0FBSSxDQUFBLG1CQUFBLENBQUEsYUFBSixDQUFrQixNQUFNLENBQUMsTUFBekIsQ0FBaUMsTUFBTSxDQUFDLFdBQXhDLENBQXFELE1BQU0sQ0FBQyxNQUE1RCxDQUFILENBQWpCLENBRHlDLHdCQUV6QyxLQUFLLENBQUcsS0FBSyxDQUFDLFlBQU4sQ0FBbUIsS0FBbkIsQ0FBMEIsV0FBMUIsQ0FBUixDQUZ5Qyx5QkFHekMsS0FBSyxDQUFDLEdBQU4sQ0FBVSxLQUFWLENBQWlCLGNBQUEsQ0FBQSxPQUFBLENBQVEsMEJBQXpCLENBQXFELENBQ25ELElBQUksQ0FBRSxNQUFNLENBQUMsTUFBUCxDQUFjLElBRCtCLENBRW5ELElBQUksQ0FBRSxNQUFNLENBQUMs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QUFNLENBQUMsTUFBUCxDQUFjLElBQWQsQ0FBbUIsVUFBbkIsQ0FBOEIsTUFBTSxDQUFDLFdBQXJDLENBQWtELE1BQWxELEVBQ0QsQ0FKRCxpQ0FEbUMseUJBTW5DLE1BQU8sQ0FBQSxLQUFQLENBQ0QsQ0FQRCxpQ0FwRStFLHlCQTZFL0UsTUFBTyxDQUFBLEtBQVAsQ0FDRCxDLHlCQTlFRCxPQUFBLENBQUEsa0JBQUEsQ0FBQSxrQkFBQSxDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXR0YWNoUG9rZW1vblRvb2xFZmZlY3QsIFRyYWluZXJFZmZlY3QsIFBsYXlTdXBwb3J0ZXJFZmZlY3QsXG4gIFBsYXlJdGVtRWZmZWN0LCBQbGF5U3RhZGl1bUVmZmVjdCB9IGZyb20gJy4uL2VmZmVjdHMvcGxheS1jYXJkLWVmZmVjdHMnO1xuaW1wb3J0IHsgR2FtZUVycm9yIH0gZnJvbSAnLi4vLi4vZ2FtZS1lcnJvcic7XG5pbXBvcnQgeyBHYW1lTWVzc2FnZSwgR2FtZUxvZyB9IGZyb20gJy4uLy4uL2dhbWUtbWVzc2FnZSc7XG5pbXBvcnQgeyBFZmZlY3QgfSBmcm9tICcuLi9lZmZlY3RzL2VmZmVjdCc7XG5pbXBvcnQgeyBTdGF0ZSB9IGZyb20gJy4uL3N0YXRlL3N0YXRlJztcbmltcG9ydCB7IFN0b3JlTGlrZSB9IGZyb20gJy4uL3N0b3JlLWxpa2UnO1xuaW1wb3J0IHsgU3RhdGVVdGlscyB9IGZyb20gJy4uL3N0YXRlLXV0aWxzJztcbmltcG9ydCB7IFRyYWluZXJUeXBlIH0gZnJvbSAnLi4vY2FyZC9jYXJkLXR5cGVzJztcblxuXG5leHBvcnQgZnVuY3Rpb24gcGxheVRyYWluZXJSZWR1Y2VyKHN0b3JlOiBTdG9yZUxpa2UsIHN0YXRlOiBTdGF0ZSwgZWZmZWN0OiBFZmZlY3QpOiBTdGF0ZSB7XG5cbiAgLyogUGxheSBzdXBwb3J0ZXIgY2FyZCAqL1xuICBpZiAoZWZmZWN0IGluc3RhbmNlb2YgUGxheVN1cHBvcnRlckVmZmVjdCkge1xuICAgIGNvbnN0IHBsYXlUcmFpbmVyID0gbmV3IFRyYWluZXJFZmZlY3QoZWZmZWN0LnBsYXllciwgZWZmZWN0LnRyYWluZXJDYXJkLCBlZmZlY3QudGFyZ2V0KTtcbiAgICBzdGF0ZSA9IHN0b3JlLnJlZHVjZUVmZmVjdChzdGF0ZSwgcGxheVRyYWluZXIpO1xuICAgIHN0b3JlLmxvZyhzdGF0ZSwgR2FtZUxvZy5MT0dfUExBWUVSX1BMQVlTX1NVUFBPUlRFUiwge1xuICAgICAgbmFtZTogZWZmZWN0LnBsYXllci5uYW1lLFxuICAgICAgY2FyZDogZWZmZWN0LnRyYWluZXJDYXJkLm5hbWVcbiAgICB9KTtcbiAgICByZXR1cm4gc3RhdGU7XG4gIH1cblxuICAvKiBQbGF5IHN0YWRpdW0gY2FyZCAqL1xuICBpZiAoZWZmZWN0IGluc3RhbmNlb2YgUGxheVN0YWRpdW1FZmZlY3QpIHtcbiAgICBjb25zdCBwbGF5ZXIgPSBlZmZlY3QucGxheWVyO1xuICAgIGNvbnN0IG9wcG9uZW50ID0gU3RhdGVVdGlscy5nZXRPcHBvbmVudChzdGF0ZSwgcGxheWVyKTtcbiAgICBpZiAocGxheWVyLnN0YWRpdW0uY2FyZHMubGVuZ3RoID4gMCkge1xuICAgICAgcGxheWVyLnN0YWRpdW0ubW92ZVRvKHBsYXllci5kaXNjYXJkKTtcbiAgICB9XG4gICAgaWYgKG9wcG9uZW50LnN0YWRpdW0uY2FyZHMubGVuZ3RoID4gMCkge1xuICAgICAgb3Bwb25lbnQuc3RhZGl1bS5tb3ZlVG8ob3Bwb25lbnQuZGlzY2FyZCk7XG4gICAgfVxuICAgIHN0b3JlLmxvZyhzdGF0ZSwgR2FtZUxvZy5MT0dfUExBWUVSX1BMQVlTX1NUQURJVU0sIHtcbiAgICAgIG5hbWU6IGVmZmVjdC5wbGF5ZXIubmFtZSxcbiAgICAgIGNhcmQ6IGVmZmVjdC50cmFpbmVyQ2FyZC5uYW1lXG4gICAgfSk7XG4gICAgcGxheWVyLnN0YWRpdW1Vc2VkVHVybiA9IDA7XG4gICAgcGxheWVyLmhhbmQubW92ZUNhcmRUbyhlZmZlY3QudHJhaW5lckNhcmQsIHBsYXllci5zdGFkaXVtKTtcbiAgICByZXR1cm4gc3RhdGU7XG4gIH1cblxuICAvLyBQbGF5IFBva2Vtb24gVG9vbCBjYXJkXG4gIGlmIChlZmZlY3QgaW5zdGFuY2VvZiBBdHRhY2hQb2tlbW9uVG9vbEVmZmVjdCkge1xuICAgIGNvbnN0IHBva2Vtb25DYXJkID0gZWZmZWN0LnRhcmdldC5nZXRQb2tlbW9uQ2FyZCgpO1xuICAgIGlmIChwb2tlbW9uQ2FyZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgR2FtZUVycm9yKEdhbWVNZXNzYWdlLklOVkFMSURfVEFSR0VUKTtcbiAgICB9XG4gICAgaWYgKGVmZmVjdC50YXJnZXQudG9vbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgR2FtZUVycm9yKEdhbWVNZXNzYWdlLlBPS0VNT05fVE9PTF9BTFJFQURZX0FUVEFDSEVEKTtcbiAgICB9XG5cbiAgICBzdG9yZS5sb2coc3RhdGUsIEdhbWVMb2cuTE9HX1BMQVlFUl9QTEFZU19UT09MLCB7XG4gICAgICBuYW1lOiBlZmZlY3QucGxheWVyLm5hbWUsXG4gICAgICBjYXJkOiBlZmZlY3QudHJhaW5lckNhcmQubmFtZSxcbiAgICAgIHBva2Vtb246IHBva2Vtb25DYXJkLm5hbWVcbiAgICB9KTtcbiAgICBlZmZlY3QucGxheWVyLmhhbmQubW92ZUNhcmRUbyhlZmZlY3QudHJhaW5lckNhcmQsIGVmZmVjdC50YXJnZXQpO1xuICAgIGVmZmVjdC50YXJnZXQudG9vbCA9IGVmZmVjdC50cmFpbmVyQ2FyZDtcblxuICAgIGNvbnN0IHBsYXlUcmFpbmVyID0gbmV3IFRyYWluZXJFZmZlY3QoZWZmZWN0LnBsYXllciwgZWZmZWN0LnRyYWluZXJDYXJkLCBlZmZlY3QudGFyZ2V0KTtcbiAgICBzdGF0ZSA9IHN0b3JlLnJlZHVjZUVmZmVjdChzdGF0ZSwgcGxheVRyYWluZXIpO1xuXG4gICAgcmV0dXJuIHN0YXRlO1xuICB9XG5cbiAgLy8gUGxheSBpdGVtIGNhcmRcbiAgaWYgKGVmZmVjdCBpbnN0YW5jZW9mIFBsYXlJdGVtRWZmZWN0KSB7XG4gICAgY29uc3QgcGxheVRyYWluZXIgPSBuZXcgVHJhaW5lckVmZmVjdChlZmZlY3QucGxheWVyLCBlZmZlY3QudHJhaW5lckNhcmQsIGVmZmVjdC50YXJnZXQpO1xuICAgIHN0YXRlID0gc3RvcmUucmVkdWNlRWZmZWN0KHN0YXRlLCBwbGF5VHJhaW5lcik7XG4gICAgc3RvcmUubG9nKHN0YXRlLCBHYW1lTG9nLkxPR19QTEFZRVJfUExBWVNfSVRFTSwge1xuICAgICAgbmFtZTogZWZmZWN0LnBsYXllci5uYW1lLFxuICAgICAgY2FyZDogZWZmZWN0LnRyYWluZXJDYXJkLm5hbWVcbiAgICB9KTtcbiAgICByZXR1cm4gc3RhdGU7XG4gIH1cblxuICAvLyBQcm9jZXNzIHRyYWluZXIgZWZmZWN0XG4gIGlmIChlZmZlY3QgaW5zdGFuY2VvZiBUcmFpbmVyRWZmZWN0KSB7XG4gICAgaWYgKGVmZmVjdC5wbGF5ZXIuaGFuZC5jYXJkcy5pbmNsdWRlcyhlZmZlY3QudHJhaW5lckNhcmQpKSB7XG4gICAgICBjb25zdCBpc1N1cHBvcnRlciA9IGVmZmVjdC50cmFpbmVyQ2FyZC50cmFpbmVyVHlwZSA9PT0gVHJhaW5lclR5cGUuU1VQUE9SVEVSO1xuICAgICAgY29uc3QgdGFyZ2V0ID0gaXNTdXBwb3J0ZXIgPyBlZmZlY3QucGxheWVyLnN1cHBvcnRlciA6IGVmZmVjdC5wbGF5ZXIuZGlzY2FyZDtcbiAgICAgIGVmZmVjdC5wbGF5ZXIuaGFuZC5tb3ZlQ2FyZFRvKGVmZmVjdC50cmFpbmVyQ2FyZCwgdGFyZ2V0KTtcbiAgICB9XG4gICAgcmV0dXJuIHN0YXRlO1xuICB9XG5cbiAgcmV0dXJuIHN0YXRlO1xufVxuIl19