"use strict";function cov_d6j9t8jzs(){var path="/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/game/store/reducers/player-turn-reducer.ts";var hash="8c7d3bf4d22109275d96c87be34317048b148a29";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/game/store/reducers/player-turn-reducer.ts",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:62}},"1":{start:{line:3,column:0},end:{line:3,column:35}},"2":{start:{line:4,column:23},end:{line:4,column:57}},"3":{start:{line:5,column:16},end:{line:5,column:41}},"4":{start:{line:6,column:21},end:{line:6,column:48}},"5":{start:{line:7,column:23},end:{line:7,column:52}},"6":{start:{line:8,column:23},end:{line:8,column:57}},"7":{start:{line:9,column:29},end:{line:9,column:69}},"8":{start:{line:10,column:22},end:{line:10,column:47}},"9":{start:{line:11,column:27},end:{line:11,column:65}},"10":{start:{line:12,column:23},end:{line:12,column:54}},"11":{start:{line:14,column:4},end:{line:115,column:5}},"12":{start:{line:15,column:8},end:{line:23,column:9}},"13":{start:{line:16,column:27},end:{line:16,column:60}},"14":{start:{line:17,column:12},end:{line:19,column:13}},"15":{start:{line:18,column:16},end:{line:18,column:91}},"16":{start:{line:20,column:34},end:{line:20,column:80}},"17":{start:{line:21,column:12},end:{line:21,column:61}},"18":{start:{line:22,column:12},end:{line:22,column:25}},"19":{start:{line:24,column:8},end:{line:32,column:9}},"20":{start:{line:25,column:27},end:{line:25,column:60}},"21":{start:{line:26,column:12},end:{line:28,column:13}},"22":{start:{line:27,column:16},end:{line:27,column:91}},"23":{start:{line:29,column:34},end:{line:29,column:93}},"24":{start:{line:30,column:12},end:{line:30,column:61}},"25":{start:{line:31,column:12},end:{line:31,column:25}},"26":{start:{line:33,column:8},end:{line:49,column:9}},"27":{start:{line:34,column:27},end:{line:34,column:60}},"28":{start:{line:35,column:12},end:{line:37,column:13}},"29":{start:{line:36,column:16},end:{line:36,column:91}},"30":{start:{line:38,column:32},end:{line:38,column:62}},"31":{start:{line:39,column:12},end:{line:41,column:13}},"32":{start:{line:40,column:16},end:{line:40,column:92}},"33":{start:{line:42,column:27},end:{line:42,column:80}},"34":{start:{line:42,column:57},end:{line:42,column:79}},"35":{start:{line:43,column:12},end:{line:45,column:13}},"36":{start:{line:44,column:16},end:{line:44,column:92}},"37":{start:{line:46,column:36},end:{line:46,column:86}},"38":{start:{line:47,column:12},end:{line:47,column:63}},"39":{start:{line:48,column:12},end:{line:48,column:25}},"40":{start:{line:50,column:8},end:{line:99,column:9}},"41":{start:{line:51,column:27},end:{line:51,column:60}},"42":{start:{line:52,column:12},end:{line:54,column:13}},"43":{start:{line:53,column:16},end:{line:53,column:91}},"44":{start:{line:56,column:12},end:{line:77,column:13}},"45":{start:{line:59,column:35},end:{line:59,column:99}},"46":{start:{line:60,column:20},end:{line:60,column:58}},"47":{start:{line:61,column:20},end:{line:61,column:26}},"48":{start:{line:64,column:40},end:{line:64,column:81}},"49":{start:{line:65,column:20},end:{line:67,column:21}},"50":{start:{line:66,column:24},end:{line:66,column:50}},"51":{start:{line:68,column:20},end:{line:68,column:26}},"52":{start:{line:71,column:37},end:{line:71,column:75}},"53":{start:{line:72,column:20},end:{line:74,column:21}},"54":{start:{line:73,column:24},end:{line:73,column:47}},"55":{start:{line:75,column:20},end:{line:75,column:26}},"56":{start:{line:78,column:12},end:{line:80,column:13}},"57":{start:{line:79,column:16},end:{line:79,column:92}},"58":{start:{line:81,column:26},end:{line:81,column:78}},"59":{start:{line:81,column:55},end:{line:81,column:77}},"60":{start:{line:82,column:12},end:{line:84,column:13}},"61":{start:{line:83,column:16},end:{line:83,column:91}},"62":{start:{line:85,column:25},end:{line:85,column:43}},"63":{start:{line:86,column:12},end:{line:90,column:13}},"64":{start:{line:87,column:16},end:{line:89,column:17}},"65":{start:{line:88,column:20},end:{line:88,column:98}},"66":{start:{line:91,column:12},end:{line:93,column:13}},"67":{start:{line:92,column:16},end:{line:92,column:94}},"68":{start:{line:94,column:12},end:{line:96,column:13}},"69":{start:{line:95,column:16},end:{line:95,column:94}},"70":{start:{line:97,column:12},end:{line:97,column:109}},"71":{start:{line:98,column:12},end:{line:98,column:25}},"72":{start:{line:100,column:8},end:{line:114,column:9}},"73":{start:{line:101,column:27},end:{line:101,column:60}},"74":{start:{line:102,column:12},end:{line:104,column:13}},"75":{start:{line:103,column:16},end:{line:103,column:91}},"76":{start:{line:105,column:12},end:{line:107,column:13}},"77":{start:{line:106,column:16},end:{line:106,column:98}},"78":{start:{line:108,column:28},end:{line:108,column:74}},"79":{start:{line:109,column:12},end:{line:111,column:13}},"80":{start:{line:110,column:16},end:{line:110,column:96}},"81":{start:{line:112,column:12},end:{line:112,column:100}},"82":{start:{line:113,column:12},end:{line:113,column:25}},"83":{start:{line:116,column:4},end:{line:116,column:17}},"84":{start:{line:118,column:0},end:{line:118,column:46}}},fnMap:{"0":{name:"playerTurnReducer",decl:{start:{line:13,column:9},end:{line:13,column:26}},loc:{start:{line:13,column:49},end:{line:117,column:1}},line:13},"1":{name:"(anonymous_1)",decl:{start:{line:42,column:52},end:{line:42,column:53}},loc:{start:{line:42,column:57},end:{line:42,column:79}},line:42},"2":{name:"(anonymous_2)",decl:{start:{line:81,column:50},end:{line:81,column:51}},loc:{start:{line:81,column:55},end:{line:81,column:77}},line:81}},branchMap:{"0":{loc:{start:{line:14,column:4},end:{line:115,column:5}},type:"if",locations:[{start:{line:14,column:4},end:{line:115,column:5}},{start:{line:14,column:4},end:{line:115,column:5}}],line:14},"1":{loc:{start:{line:15,column:8},end:{line:23,column:9}},type:"if",locations:[{start:{line:15,column:8},end:{line:23,column:9}},{start:{line:15,column:8},end:{line:23,column:9}}],line:15},"2":{loc:{start:{line:17,column:12},end:{line:19,column:13}},type:"if",locations:[{start:{line:17,column:12},end:{line:19,column:13}},{start:{line:17,column:12},end:{line:19,column:13}}],line:17},"3":{loc:{start:{line:17,column:16},end:{line:17,column:69}},type:"binary-expr",locations:[{start:{line:17,column:16},end:{line:17,column:36}},{start:{line:17,column:40},end:{line:17,column:69}}],line:17},"4":{loc:{start:{line:24,column:8},end:{line:32,column:9}},type:"if",locations:[{start:{line:24,column:8},end:{line:32,column:9}},{start:{line:24,column:8},end:{line:32,column:9}}],line:24},"5":{loc:{start:{line:26,column:12},end:{line:28,column:13}},type:"if",locations:[{start:{line:26,column:12},end:{line:28,column:13}},{start:{line:26,column:12},end:{line:28,column:13}}],line:26},"6":{loc:{start:{line:26,column:16},end:{line:26,column:69}},type:"binary-expr",locations:[{start:{line:26,column:16},end:{line:26,column:36}},{start:{line:26,column:40},end:{line:26,column:69}}],line:26},"7":{loc:{start:{line:33,column:8},end:{line:49,column:9}},type:"if",locations:[{start:{line:33,column:8},end:{line:49,column:9}},{start:{line:33,column:8},end:{line:49,column:9}}],line:33},"8":{loc:{start:{line:35,column:12},end:{line:37,column:13}},type:"if",locations:[{start:{line:35,column:12},end:{line:37,column:13}},{start:{line:35,column:12},end:{line:37,column:13}}],line:35},"9":{loc:{start:{line:35,column:16},end:{line:35,column:69}},type:"binary-expr",locations:[{start:{line:35,column:16},end:{line:35,column:36}},{start:{line:35,column:40},end:{line:35,column:69}}],line:35},"10":{loc:{start:{line:39,column:12},end:{line:41,column:13}},type:"if",locations:[{start:{line:39,column:12},end:{line:41,column:13}},{start:{line:39,column:12},end:{line:41,column:13}}],line:39},"11":{loc:{start:{line:43,column:12},end:{line:45,column:13}},type:"if",locations:[{start:{line:43,column:12},end:{line:45,column:13}},{start:{line:43,column:12},end:{line:45,column:13}}],line:43},"12":{loc:{start:{line:50,column:8},end:{line:99,column:9}},type:"if",locations:[{start:{line:50,column:8},end:{line:99,column:9}},{start:{line:50,column:8},end:{line:99,column:9}}],line:50},"13":{loc:{start:{line:52,column:12},end:{line:54,column:13}},type:"if",locations:[{start:{line:52,column:12},end:{line:54,column:13}},{start:{line:52,column:12},end:{line:54,column:13}}],line:52},"14":{loc:{start:{line:52,column:16},end:{line:52,column:69}},type:"binary-expr",locations:[{start:{line:52,column:16},end:{line:52,column:36}},{start:{line:52,column:40},end:{line:52,column:69}}],line:52},"15":{loc:{start:{line:56,column:12},end:{line:77,column:13}},type:"switch",locations:[{start:{line:57,column:16},end:{line:57,column:56}},{start:{line:58,column:16},end:{line:62,column:17}},{start:{line:63,column:16},end:{line:69,column:17}},{start:{line:70,column:16},end:{line:76,column:17}}],line:56},"16":{loc:{start:{line:65,column:20},end:{line:67,column:21}},type:"if",locations:[{start:{line:65,column:20},end:{line:67,column:21}},{start:{line:65,column:20},end:{line:67,column:21}}],line:65},"17":{loc:{start:{line:72,column:20},end:{line:74,column:21}},type:"if",locations:[{start:{line:72,column:20},end:{line:74,column:21}},{start:{line:72,column:20},end:{line:74,column:21}}],line:72},"18":{loc:{start:{line:78,column:12},end:{line:80,column:13}},type:"if",locations:[{start:{line:78,column:12},end:{line:80,column:13}},{start:{line:78,column:12},end:{line:80,column:13}}],line:78},"19":{loc:{start:{line:82,column:12},end:{line:84,column:13}},type:"if",locations:[{start:{line:82,column:12},end:{line:84,column:13}},{start:{line:82,column:12},end:{line:84,column:13}}],line:82},"20":{loc:{start:{line:86,column:12},end:{line:90,column:13}},type:"if",locations:[{start:{line:86,column:12},end:{line:90,column:13}},{start:{line:86,column:12},end:{line:90,column:13}}],line:86},"21":{loc:{start:{line:86,column:16},end:{line:86,column:105}},type:"binary-expr",locations:[{start:{line:86,column:16},end:{line:86,column:59}},{start:{line:86,column:63},end:{line:86,column:105}}],line:86},"22":{loc:{start:{line:87,column:16},end:{line:89,column:17}},type:"if",locations:[{start:{line:87,column:16},end:{line:89,column:17}},{start:{line:87,column:16},end:{line:89,column:17}}],line:87},"23":{loc:{start:{line:91,column:12},end:{line:93,column:13}},type:"if",locations:[{start:{line:91,column:12},end:{line:93,column:13}},{start:{line:91,column:12},end:{line:93,column:13}}],line:91},"24":{loc:{start:{line:91,column:16},end:{line:91,column:79}},type:"binary-expr",locations:[{start:{line:91,column:16},end:{line:91,column:57}},{start:{line:91,column:61},end:{line:91,column:79}}],line:91},"25":{loc:{start:{line:94,column:12},end:{line:96,column:13}},type:"if",locations:[{start:{line:94,column:12},end:{line:96,column:13}},{start:{line:94,column:12},end:{line:96,column:13}}],line:94},"26":{loc:{start:{line:94,column:16},end:{line:94,column:85}},type:"binary-expr",locations:[{start:{line:94,column:16},end:{line:94,column:60}},{start:{line:94,column:64},end:{line:94,column:85}}],line:94},"27":{loc:{start:{line:100,column:8},end:{line:114,column:9}},type:"if",locations:[{start:{line:100,column:8},end:{line:114,column:9}},{start:{line:100,column:8},end:{line:114,column:9}}],line:100},"28":{loc:{start:{line:102,column:12},end:{line:104,column:13}},type:"if",locations:[{start:{line:102,column:12},end:{line:104,column:13}},{start:{line:102,column:12},end:{line:104,column:13}}],line:102},"29":{loc:{start:{line:102,column:16},end:{line:102,column:69}},type:"binary-expr",locations:[{start:{line:102,column:16},end:{line:102,column:36}},{start:{line:102,column:40},end:{line:102,column:69}}],line:102},"30":{loc:{start:{line:105,column:12},end:{line:107,column:13}},type:"if",locations:[{start:{line:105,column:12},end:{line:107,column:13}},{start:{line:105,column:12},end:{line:107,column:13}}],line:105},"31":{loc:{start:{line:109,column:12},end:{line:111,column:13}},type:"if",locations:[{start:{line:109,column:12},end:{line:111,column:13}},{start:{line:109,column:12},end:{line:111,column:13}}],line:109}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0,0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0]},inputSourceMap:{version:3,file:"/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/game/store/reducers/player-turn-reducer.ts",sources:["/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/game/store/reducers/player-turn-reducer.ts"],names:[],mappings:"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",sourcesContent:["import { Action } from '../actions/action';\nimport { PassTurnAction, RetreatAction, AttackAction, UseAbilityAction, UseStadiumAction } from '../actions/game-actions';\nimport { State, GamePhase } from '../state/state';\nimport { StoreLike } from '../store-like';\nimport { GameError } from '../../game-error';\nimport { GameMessage } from '../../game-message';\nimport { RetreatEffect, UseAttackEffect, UsePowerEffect, UseStadiumEffect } from '../effects/game-effects';\nimport { EndTurnEffect } from '../effects/game-phase-effects';\nimport { StateUtils } from '../state-utils';\nimport {SlotType} from '../actions/play-card-action';\nimport {PokemonCard} from '../card/pokemon-card';\n\nexport function playerTurnReducer(store: StoreLike, state: State, action: Action): State {\n\n  if (state.phase === GamePhase.PLAYER_TURN) {\n\n    if (action instanceof PassTurnAction) {\n      const player = state.players[state.activePlayer];\n\n      if (player === undefined || player.id !== action.clientId) {\n        throw new GameError(GameMessage.NOT_YOUR_TURN);\n      }\n\n      const endTurnEffect = new EndTurnEffect(player);\n\n      state = store.reduceEffect(state, endTurnEffect);\n      return state;\n    }\n\n    if (action instanceof RetreatAction) {\n      const player = state.players[state.activePlayer];\n\n      if (player === undefined || player.id !== action.clientId) {\n        throw new GameError(GameMessage.NOT_YOUR_TURN);\n      }\n\n      const retreatEffect = new RetreatEffect(player, action.benchIndex);\n      state = store.reduceEffect(state, retreatEffect);\n      return state;\n    }\n\n    if (action instanceof AttackAction) {\n      const player = state.players[state.activePlayer];\n\n      if (player === undefined || player.id !== action.clientId) {\n        throw new GameError(GameMessage.NOT_YOUR_TURN);\n      }\n\n      const pokemonCard = player.active.getPokemonCard();\n      if (pokemonCard === undefined) {\n        throw new GameError(GameMessage.UNKNOWN_ATTACK);\n      }\n\n      const attack = pokemonCard.attacks.find(a => a.name === action.name);\n      if (attack === undefined) {\n        throw new GameError(GameMessage.UNKNOWN_ATTACK);\n      }\n\n      const useAttackEffect = new UseAttackEffect(player, attack);\n      state = store.reduceEffect(state, useAttackEffect);\n      return state;\n    }\n\n    if (action instanceof UseAbilityAction) {\n      const player = state.players[state.activePlayer];\n\n      if (player === undefined || player.id !== action.clientId) {\n        throw new GameError(GameMessage.NOT_YOUR_TURN);\n      }\n\n      let pokemonCard: PokemonCard | undefined;\n\n      switch (action.target.slot) {\n        case SlotType.ACTIVE:\n        case SlotType.BENCH: {\n          const target = StateUtils.getTarget(state, player, action.target);\n          pokemonCard = target.getPokemonCard();\n          break;\n        }\n        case SlotType.DISCARD: {\n          const discardCard = player.discard.cards[action.target.index];\n          if (discardCard instanceof PokemonCard) {\n            pokemonCard = discardCard;\n          }\n          break;\n        }\n        case SlotType.HAND: {\n          const handCard = player.hand.cards[action.target.index];\n          if (handCard instanceof PokemonCard) {\n            pokemonCard = handCard;\n          }\n          break;\n        }\n      }\n\n      if (pokemonCard === undefined) {\n        throw new GameError(GameMessage.INVALID_TARGET);\n      }\n\n      const power = pokemonCard.powers.find(a => a.name === action.name);\n      if (power === undefined) {\n        throw new GameError(GameMessage.UNKNOWN_POWER);\n      }\n\n      const slot = action.target.slot;\n      if (slot === SlotType.ACTIVE || slot === SlotType.BENCH) {\n        if (!power.useWhenInPlay) {\n          throw new GameError(GameMessage.CANNOT_USE_POWER);\n        }\n      }\n\n      if (slot === SlotType.HAND && !power.useFromHand) {\n        throw new GameError(GameMessage.CANNOT_USE_POWER);\n      }\n\n      if (slot === SlotType.DISCARD && !power.useFromDiscard) {\n        throw new GameError(GameMessage.CANNOT_USE_POWER);\n      }\n\n      state = store.reduceEffect(state, new UsePowerEffect(player, power, pokemonCard));\n      return state;\n    }\n\n    if (action instanceof UseStadiumAction) {\n      const player = state.players[state.activePlayer];\n\n      if (player === undefined || player.id !== action.clientId) {\n        throw new GameError(GameMessage.NOT_YOUR_TURN);\n      }\n\n      if (player.stadiumUsedTurn === state.turn) {\n        throw new GameError(GameMessage.STADIUM_ALREADY_USED);\n      }\n\n      const stadium = StateUtils.getStadiumCard(state);\n      if (stadium === undefined) {\n        throw new GameError(GameMessage.NO_STADIUM_IN_PLAY);\n      }\n\n      state = store.reduceEffect(state, new UseStadiumEffect(player, stadium));\n      return state;\n    }\n\n  }\n\n  return state;\n}\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8c7d3bf4d22109275d96c87be34317048b148a29"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_d6j9t8jzs=function(){return actualCoverage;};}return actualCoverage;}cov_d6j9t8jzs();cov_d6j9t8jzs().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_d6j9t8jzs().s[1]++;exports.playerTurnReducer=void 0;const game_actions_1=(cov_d6j9t8jzs().s[2]++,require("../actions/game-actions"));const state_1=(cov_d6j9t8jzs().s[3]++,require("../state/state"));const game_error_1=(cov_d6j9t8jzs().s[4]++,require("../../game-error"));const game_message_1=(cov_d6j9t8jzs().s[5]++,require("../../game-message"));const game_effects_1=(cov_d6j9t8jzs().s[6]++,require("../effects/game-effects"));const game_phase_effects_1=(cov_d6j9t8jzs().s[7]++,require("../effects/game-phase-effects"));const state_utils_1=(cov_d6j9t8jzs().s[8]++,require("../state-utils"));const play_card_action_1=(cov_d6j9t8jzs().s[9]++,require("../actions/play-card-action"));const pokemon_card_1=(cov_d6j9t8jzs().s[10]++,require("../card/pokemon-card"));function playerTurnReducer(store,state,action){cov_d6j9t8jzs().f[0]++;cov_d6j9t8jzs().s[11]++;if(state.phase===state_1.GamePhase.PLAYER_TURN){cov_d6j9t8jzs().b[0][0]++;cov_d6j9t8jzs().s[12]++;if(action instanceof game_actions_1.PassTurnAction){cov_d6j9t8jzs().b[1][0]++;const player=(cov_d6j9t8jzs().s[13]++,state.players[state.activePlayer]);cov_d6j9t8jzs().s[14]++;if((cov_d6j9t8jzs().b[3][0]++,player===undefined)||(cov_d6j9t8jzs().b[3][1]++,player.id!==action.clientId)){cov_d6j9t8jzs().b[2][0]++;cov_d6j9t8jzs().s[15]++;throw new game_error_1.GameError(game_message_1.GameMessage.NOT_YOUR_TURN);}else{cov_d6j9t8jzs().b[2][1]++;}const endTurnEffect=(cov_d6j9t8jzs().s[16]++,new game_phase_effects_1.EndTurnEffect(player));cov_d6j9t8jzs().s[17]++;state=store.reduceEffect(state,endTurnEffect);cov_d6j9t8jzs().s[18]++;return state;}else{cov_d6j9t8jzs().b[1][1]++;}cov_d6j9t8jzs().s[19]++;if(action instanceof game_actions_1.RetreatAction){cov_d6j9t8jzs().b[4][0]++;const player=(cov_d6j9t8jzs().s[20]++,state.players[state.activePlayer]);cov_d6j9t8jzs().s[21]++;if((cov_d6j9t8jzs().b[6][0]++,player===undefined)||(cov_d6j9t8jzs().b[6][1]++,player.id!==action.clientId)){cov_d6j9t8jzs().b[5][0]++;cov_d6j9t8jzs().s[22]++;throw new game_error_1.GameError(game_message_1.GameMessage.NOT_YOUR_TURN);}else{cov_d6j9t8jzs().b[5][1]++;}const retreatEffect=(cov_d6j9t8jzs().s[23]++,new game_effects_1.RetreatEffect(player,action.benchIndex));cov_d6j9t8jzs().s[24]++;state=store.reduceEffect(state,retreatEffect);cov_d6j9t8jzs().s[25]++;return state;}else{cov_d6j9t8jzs().b[4][1]++;}cov_d6j9t8jzs().s[26]++;if(action instanceof game_actions_1.AttackAction){cov_d6j9t8jzs().b[7][0]++;const player=(cov_d6j9t8jzs().s[27]++,state.players[state.activePlayer]);cov_d6j9t8jzs().s[28]++;if((cov_d6j9t8jzs().b[9][0]++,player===undefined)||(cov_d6j9t8jzs().b[9][1]++,player.id!==action.clientId)){cov_d6j9t8jzs().b[8][0]++;cov_d6j9t8jzs().s[29]++;throw new game_error_1.GameError(game_message_1.GameMessage.NOT_YOUR_TURN);}else{cov_d6j9t8jzs().b[8][1]++;}const pokemonCard=(cov_d6j9t8jzs().s[30]++,player.active.getPokemonCard());cov_d6j9t8jzs().s[31]++;if(pokemonCard===undefined){cov_d6j9t8jzs().b[10][0]++;cov_d6j9t8jzs().s[32]++;throw new game_error_1.GameError(game_message_1.GameMessage.UNKNOWN_ATTACK);}else{cov_d6j9t8jzs().b[10][1]++;}const attack=(cov_d6j9t8jzs().s[33]++,pokemonCard.attacks.find(a=>{cov_d6j9t8jzs().f[1]++;cov_d6j9t8jzs().s[34]++;return a.name===action.name;}));cov_d6j9t8jzs().s[35]++;if(attack===undefined){cov_d6j9t8jzs().b[11][0]++;cov_d6j9t8jzs().s[36]++;throw new game_error_1.GameError(game_message_1.GameMessage.UNKNOWN_ATTACK);}else{cov_d6j9t8jzs().b[11][1]++;}const useAttackEffect=(cov_d6j9t8jzs().s[37]++,new game_effects_1.UseAttackEffect(player,attack));cov_d6j9t8jzs().s[38]++;state=store.reduceEffect(state,useAttackEffect);cov_d6j9t8jzs().s[39]++;return state;}else{cov_d6j9t8jzs().b[7][1]++;}cov_d6j9t8jzs().s[40]++;if(action instanceof game_actions_1.UseAbilityAction){cov_d6j9t8jzs().b[12][0]++;const player=(cov_d6j9t8jzs().s[41]++,state.players[state.activePlayer]);cov_d6j9t8jzs().s[42]++;if((cov_d6j9t8jzs().b[14][0]++,player===undefined)||(cov_d6j9t8jzs().b[14][1]++,player.id!==action.clientId)){cov_d6j9t8jzs().b[13][0]++;cov_d6j9t8jzs().s[43]++;throw new game_error_1.GameError(game_message_1.GameMessage.NOT_YOUR_TURN);}else{cov_d6j9t8jzs().b[13][1]++;}let pokemonCard;cov_d6j9t8jzs().s[44]++;switch(action.target.slot){case play_card_action_1.SlotType.ACTIVE:cov_d6j9t8jzs().b[15][0]++;case play_card_action_1.SlotType.BENCH:cov_d6j9t8jzs().b[15][1]++;{const target=(cov_d6j9t8jzs().s[45]++,state_utils_1.StateUtils.getTarget(state,player,action.target));cov_d6j9t8jzs().s[46]++;pokemonCard=target.getPokemonCard();cov_d6j9t8jzs().s[47]++;break;}case play_card_action_1.SlotType.DISCARD:cov_d6j9t8jzs().b[15][2]++;{const discardCard=(cov_d6j9t8jzs().s[48]++,player.discard.cards[action.target.index]);cov_d6j9t8jzs().s[49]++;if(discardCard instanceof pokemon_card_1.PokemonCard){cov_d6j9t8jzs().b[16][0]++;cov_d6j9t8jzs().s[50]++;pokemonCard=discardCard;}else{cov_d6j9t8jzs().b[16][1]++;}cov_d6j9t8jzs().s[51]++;break;}case play_card_action_1.SlotType.HAND:cov_d6j9t8jzs().b[15][3]++;{const handCard=(cov_d6j9t8jzs().s[52]++,player.hand.cards[action.target.index]);cov_d6j9t8jzs().s[53]++;if(handCard instanceof pokemon_card_1.PokemonCard){cov_d6j9t8jzs().b[17][0]++;cov_d6j9t8jzs().s[54]++;pokemonCard=handCard;}else{cov_d6j9t8jzs().b[17][1]++;}cov_d6j9t8jzs().s[55]++;break;}}cov_d6j9t8jzs().s[56]++;if(pokemonCard===undefined){cov_d6j9t8jzs().b[18][0]++;cov_d6j9t8jzs().s[57]++;throw new game_error_1.GameError(game_message_1.GameMessage.INVALID_TARGET);}else{cov_d6j9t8jzs().b[18][1]++;}const power=(cov_d6j9t8jzs().s[58]++,pokemonCard.powers.find(a=>{cov_d6j9t8jzs().f[2]++;cov_d6j9t8jzs().s[59]++;return a.name===action.name;}));cov_d6j9t8jzs().s[60]++;if(power===undefined){cov_d6j9t8jzs().b[19][0]++;cov_d6j9t8jzs().s[61]++;throw new game_error_1.GameError(game_message_1.GameMessage.UNKNOWN_POWER);}else{cov_d6j9t8jzs().b[19][1]++;}const slot=(cov_d6j9t8jzs().s[62]++,action.target.slot);cov_d6j9t8jzs().s[63]++;if((cov_d6j9t8jzs().b[21][0]++,slot===play_card_action_1.SlotType.ACTIVE)||(cov_d6j9t8jzs().b[21][1]++,slot===play_card_action_1.SlotType.BENCH)){cov_d6j9t8jzs().b[20][0]++;cov_d6j9t8jzs().s[64]++;if(!power.useWhenInPlay){cov_d6j9t8jzs().b[22][0]++;cov_d6j9t8jzs().s[65]++;throw new game_error_1.GameError(game_message_1.GameMessage.CANNOT_USE_POWER);}else{cov_d6j9t8jzs().b[22][1]++;}}else{cov_d6j9t8jzs().b[20][1]++;}cov_d6j9t8jzs().s[66]++;if((cov_d6j9t8jzs().b[24][0]++,slot===play_card_action_1.SlotType.HAND)&&(cov_d6j9t8jzs().b[24][1]++,!power.useFromHand)){cov_d6j9t8jzs().b[23][0]++;cov_d6j9t8jzs().s[67]++;throw new game_error_1.GameError(game_message_1.GameMessage.CANNOT_USE_POWER);}else{cov_d6j9t8jzs().b[23][1]++;}cov_d6j9t8jzs().s[68]++;if((cov_d6j9t8jzs().b[26][0]++,slot===play_card_action_1.SlotType.DISCARD)&&(cov_d6j9t8jzs().b[26][1]++,!power.useFromDiscard)){cov_d6j9t8jzs().b[25][0]++;cov_d6j9t8jzs().s[69]++;throw new game_error_1.GameError(game_message_1.GameMessage.CANNOT_USE_POWER);}else{cov_d6j9t8jzs().b[25][1]++;}cov_d6j9t8jzs().s[70]++;state=store.reduceEffect(state,new game_effects_1.UsePowerEffect(player,power,pokemonCard));cov_d6j9t8jzs().s[71]++;return state;}else{cov_d6j9t8jzs().b[12][1]++;}cov_d6j9t8jzs().s[72]++;if(action instanceof game_actions_1.UseStadiumAction){cov_d6j9t8jzs().b[27][0]++;const player=(cov_d6j9t8jzs().s[73]++,state.players[state.activePlayer]);cov_d6j9t8jzs().s[74]++;if((cov_d6j9t8jzs().b[29][0]++,player===undefined)||(cov_d6j9t8jzs().b[29][1]++,player.id!==action.clientId)){cov_d6j9t8jzs().b[28][0]++;cov_d6j9t8jzs().s[75]++;throw new game_error_1.GameError(game_message_1.GameMessage.NOT_YOUR_TURN);}else{cov_d6j9t8jzs().b[28][1]++;}cov_d6j9t8jzs().s[76]++;if(player.stadiumUsedTurn===state.turn){cov_d6j9t8jzs().b[30][0]++;cov_d6j9t8jzs().s[77]++;throw new game_error_1.GameError(game_message_1.GameMessage.STADIUM_ALREADY_USED);}else{cov_d6j9t8jzs().b[30][1]++;}const stadium=(cov_d6j9t8jzs().s[78]++,state_utils_1.StateUtils.getStadiumCard(state));cov_d6j9t8jzs().s[79]++;if(stadium===undefined){cov_d6j9t8jzs().b[31][0]++;cov_d6j9t8jzs().s[80]++;throw new game_error_1.GameError(game_message_1.GameMessage.NO_STADIUM_IN_PLAY);}else{cov_d6j9t8jzs().b[31][1]++;}cov_d6j9t8jzs().s[81]++;state=store.reduceEffect(state,new game_effects_1.UseStadiumEffect(player,stadium));cov_d6j9t8jzs().s[82]++;return state;}else{cov_d6j9t8jzs().b[27][1]++;}}else{cov_d6j9t8jzs().b[0][1]++;}cov_d6j9t8jzs().s[83]++;return state;}cov_d6j9t8jzs().s[84]++;exports.playerTurnReducer=playerTurnReducer;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2pvZW15ZXJzY291Z2gvRG9jdW1lbnRzL0dpdEh1Yi9wdGNnLWVwc2QvcHRjZy1zZXJ2ZXIvc3JjL2dhbWUvc3RvcmUvcmVkdWNlcnMvcGxheWVyLXR1cm4tcmVkdWNlci50cyIsInNvdXJjZXMiOlsiL1VzZXJzL2pvZW15ZXJzY291Z2gvRG9jdW1lbnRzL0dpdEh1Yi9wdGNnLWVwc2QvcHRjZy1zZXJ2ZXIvc3JjL2dhbWUvc3RvcmUvcmVkdWNlcnMvcGxheWVyLXR1cm4tcmVkdWNlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFDQSwwREFBMEg7QUFDMUgsMENBQWtEO0FBRWxELGlEQUE2QztBQUM3QyxxREFBaUQ7QUFDakQsMERBQTJHO0FBQzNHLHNFQUE4RDtBQUM5RCxnREFBNEM7QUFDNUMsa0VBQXFEO0FBQ3JELHVEQUFpRDtBQUVqRCxTQUFnQixpQkFBaUIsQ0FBQyxLQUFnQixFQUFFLEtBQVksRUFBRSxNQUFjO0lBRTlFLElBQUksS0FBSyxDQUFDLEtBQUssS0FBSyxpQkFBUyxDQUFDLFdBQVcsRUFBRTtRQUV6QyxJQUFJLE1BQU0sWUFBWSw2QkFBYyxFQUFFO1lBQ3BDLE1BQU0sTUFBTSxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxDQUFDO1lBRWpELElBQUksTUFBTSxLQUFLLFNBQVMsSUFBSSxNQUFNLENBQUMsRUFBRSxLQUFLLE1BQU0sQ0FBQyxRQUFRLEVBQUU7Z0JBQ3pELE1BQU0sSUFBSSxzQkFBUyxDQUFDLDBCQUFXLENBQUMsYUFBYSxDQUFDLENBQUM7YUFDaEQ7WUFFRCxNQUFNLGFBQWEsR0FBRyxJQUFJLGtDQUFhLENBQUMsTUFBTSxDQUFDLENBQUM7WUFFaEQsS0FBSyxHQUFHLEtBQUssQ0FBQyxZQUFZLENBQUMsS0FBSyxFQUFFLGFBQWEsQ0FBQyxDQUFDO1lBQ2pELE9BQU8sS0FBSyxDQUFDO1NBQ2Q7UUFFRCxJQUFJLE1BQU0sWUFBWSw0QkFBYSxFQUFFO1lBQ25DLE1B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dGlvbiB9IGZyb20gJy4uL2FjdGlvbnMvYWN0aW9uJztcbmltcG9ydCB7IFBhc3NUdXJuQWN0aW9uLCBSZXRyZWF0QWN0aW9uLCBBdHRhY2tBY3Rpb24sIFVzZUFiaWxpdHlBY3Rpb24sIFVzZVN0YWRpdW1BY3Rpb24gfSBmcm9tICcuLi9hY3Rpb25zL2dhbWUtYWN0aW9ucyc7XG5pbXBvcnQgeyBTdGF0ZSwgR2FtZVBoYXNlIH0gZnJvbSAnLi4vc3RhdGUvc3RhdGUnO1xuaW1wb3J0IHsgU3RvcmVMaWtlIH0gZnJvbSAnLi4vc3RvcmUtbGlrZSc7XG5pbXBvcnQgeyBHYW1lRXJyb3IgfSBmcm9tICcuLi8uLi9nYW1lLWVycm9yJztcbmltcG9ydCB7IEdhbWVNZXNzYWdlIH0gZnJvbSAnLi4vLi4vZ2FtZS1tZXNzYWdlJztcbmltcG9ydCB7IFJldHJlYXRFZmZlY3QsIFVzZUF0dGFja0VmZmVjdCwgVXNlUG93ZXJFZmZlY3QsIFVzZVN0YWRpdW1FZmZlY3QgfSBmcm9tICcuLi9lZmZlY3RzL2dhbWUtZWZmZWN0cyc7XG5pbXBvcnQgeyBFbmRUdXJuRWZmZWN0IH0gZnJvbSAnLi4vZWZmZWN0cy9nYW1lLXBoYXNlLWVmZmVjdHMnO1xuaW1wb3J0IHsgU3RhdGVVdGlscyB9IGZyb20gJy4uL3N0YXRlLXV0aWxzJztcbmltcG9ydCB7U2xvdFR5cGV9IGZyb20gJy4uL2FjdGlvbnMvcGxheS1jYXJkLWFjdGlvbic7XG5pbXBvcnQge1Bva2Vtb25DYXJkfSBmcm9tICcuLi9jYXJkL3Bva2Vtb24tY2FyZCc7XG5cbmV4cG9ydCBmdW5jdGlvbiBwbGF5ZXJUdXJuUmVkdWNlcihzdG9yZTogU3RvcmVMaWtlLCBzdGF0ZTogU3RhdGUsIGFjdGlvbjogQWN0aW9uKTogU3RhdGUge1xuXG4gIGlmIChzdGF0ZS5waGFzZSA9PT0gR2FtZVBoYXNlLlBMQVlFUl9UVVJOKSB7XG5cbiAgICBpZiAoYWN0aW9uIGluc3RhbmNlb2YgUGFzc1R1cm5BY3Rpb24pIHtcbiAgICAgIGNvbnN0IHBsYXllciA9IHN0YXRlLnBsYXllcnNbc3RhdGUuYWN0aXZlUGxheWVyXTtcblxuICAgICAgaWYgKHBsYXllciA9PT0gdW5kZWZpbmVkIHx8IHBsYXllci5pZCAhPT0gYWN0aW9uLmNsaWVudElkKSB7XG4gICAgICAgIHRocm93IG5ldyBHYW1lRXJyb3IoR2FtZU1lc3NhZ2UuTk9UX1lPVVJfVFVSTik7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGVuZFR1cm5FZmZlY3QgPSBuZXcgRW5kVHVybkVmZmVjdChwbGF5ZXIpO1xuXG4gICAgICBzdGF0ZSA9IHN0b3JlLnJlZHVjZUVmZmVjdChzdGF0ZSwgZW5kVHVybkVmZmVjdCk7XG4gICAgICByZXR1cm4gc3RhdGU7XG4gICAgfVxuXG4gICAgaWYgKGFjdGlvbiBpbnN0YW5jZW9mIFJldHJlYXRBY3Rpb24pIHtcbiAgICAgIGNvbnN0IHBsYXllciA9IHN0YXRlLnBsYXllcnNbc3RhdGUuYWN0aXZlUGxheWVyXTtcblxuICAgICAgaWYgKHBsYXllciA9PT0gdW5kZWZpbmVkIHx8IHBsYXllci5pZCAhPT0gYWN0aW9uLmNsaWVudElkKSB7XG4gICAgICAgIHRocm93IG5ldyBHYW1lRXJyb3IoR2FtZU1lc3NhZ2UuTk9UX1lPVVJfVFVSTik7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJldHJlYXRFZmZlY3QgPSBuZXcgUmV0cmVhdEVmZmVjdChwbGF5ZXIsIGFjdGlvbi5iZW5jaEluZGV4KTtcbiAgICAgIHN0YXRlID0gc3RvcmUucmVkdWNlRWZmZWN0KHN0YXRlLCByZXRyZWF0RWZmZWN0KTtcbiAgICAgIHJldHVybiBzdGF0ZTtcbiAgICB9XG5cbiAgICBpZiAoYWN0aW9uIGluc3RhbmNlb2YgQXR0YWNrQWN0aW9uKSB7XG4gICAgICBjb25zdCBwbGF5ZXIgPSBzdGF0ZS5wbGF5ZXJzW3N0YXRlLmFjdGl2ZVBsYXllcl07XG5cbiAgICAgIGlmIChwbGF5ZXIgPT09IHVuZGVmaW5lZCB8fCBwbGF5ZXIuaWQgIT09IGFjdGlvbi5jbGllbnRJZCkge1xuICAgICAgICB0aHJvdyBuZXcgR2FtZUVycm9yKEdhbWVNZXNzYWdlLk5PVF9ZT1VSX1RVUk4pO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBwb2tlbW9uQ2FyZCA9IHBsYXllci5hY3RpdmUuZ2V0UG9rZW1vbkNhcmQoKTtcbiAgICAgIGlmIChwb2tlbW9uQ2FyZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRocm93IG5ldyBHYW1lRXJyb3IoR2FtZU1lc3NhZ2UuVU5LTk9XTl9BVFRBQ0spO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBhdHRhY2sgPSBwb2tlbW9uQ2FyZC5hdHRhY2tzLmZpbmQoYSA9PiBhLm5hbWUgPT09IGFjdGlvbi5uYW1lKTtcbiAgICAgIGlmIChhdHRhY2sgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgR2FtZUVycm9yKEdhbWVNZXNzYWdlLlVOS05PV05fQVRUQUNLKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgdXNlQXR0YWNrRWZmZWN0ID0gbmV3IFVzZUF0dGFja0VmZmVjdChwbGF5ZXIsIGF0dGFjayk7XG4gICAgICBzdGF0ZSA9IHN0b3JlLnJlZHVjZUVmZmVjdChzdGF0ZSwgdXNlQXR0YWNrRWZmZWN0KTtcbiAgICAgIHJldHVybiBzdGF0ZTtcbiAgICB9XG5cbiAgICBpZiAoYWN0aW9uIGluc3RhbmNlb2YgVXNlQWJpbGl0eUFjdGlvbikge1xuICAgICAgY29uc3QgcGxheWVyID0gc3RhdGUucGxheWVyc1tzdGF0ZS5hY3RpdmVQbGF5ZXJdO1xuXG4gICAgICBpZiAocGxheWVyID09PSB1bmRlZmluZWQgfHwgcGxheWVyLmlkICE9PSBhY3Rpb24uY2xpZW50SWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEdhbWVFcnJvcihHYW1lTWVzc2FnZS5OT1RfWU9VUl9UVVJOKTtcbiAgICAgIH1cblxuICAgICAgbGV0IHBva2Vtb25DYXJkOiBQb2tlbW9uQ2FyZCB8IHVuZGVmaW5lZDtcblxuICAgICAgc3dpdGNoIChhY3Rpb24udGFyZ2V0LnNsb3QpIHtcbiAgICAgICAgY2FzZSBTbG90VHlwZS5BQ1RJVkU6XG4gICAgICAgIGNhc2UgU2xvdFR5cGUuQkVOQ0g6IHtcbiAgICAgICAgICBjb25zdCB0YXJnZXQgPSBTdGF0ZVV0aWxzLmdldFRhcmdldChzdGF0ZSwgcGxheWVyLCBhY3Rpb24udGFyZ2V0KTtcbiAgICAgICAgICBwb2tlbW9uQ2FyZCA9IHRhcmdldC5nZXRQb2tlbW9uQ2FyZCgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgU2xvdFR5cGUuRElTQ0FSRDoge1xuICAgICAgICAgIGNvbnN0IGRpc2NhcmRDYXJkID0gcGxheWVyLmRpc2NhcmQuY2FyZHNbYWN0aW9uLnRhcmdldC5pbmRleF07XG4gICAgICAgICAgaWYgKGRpc2NhcmRDYXJkIGluc3RhbmNlb2YgUG9rZW1vbkNhcmQpIHtcbiAgICAgICAgICAgIHBva2Vtb25DYXJkID0gZGlzY2FyZENhcmQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgU2xvdFR5cGUuSEFORDoge1xuICAgICAgICAgIGNvbnN0IGhhbmRDYXJkID0gcGxheWVyLmhhbmQuY2FyZHNbYWN0aW9uLnRhcmdldC5pbmRleF07XG4gICAgICAgICAgaWYgKGhhbmRDYXJkIGluc3RhbmNlb2YgUG9rZW1vbkNhcmQpIHtcbiAgICAgICAgICAgIHBva2Vtb25DYXJkID0gaGFuZENhcmQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChwb2tlbW9uQ2FyZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRocm93IG5ldyBHYW1lRXJyb3IoR2FtZU1lc3NhZ2UuSU5WQUxJRF9UQVJHRVQpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBwb3dlciA9IHBva2Vtb25DYXJkLnBvd2Vycy5maW5kKGEgPT4gYS5uYW1lID09PSBhY3Rpb24ubmFtZSk7XG4gICAgICBpZiAocG93ZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgR2FtZUVycm9yKEdhbWVNZXNzYWdlLlVOS05PV05fUE9XRVIpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBzbG90ID0gYWN0aW9uLnRhcmdldC5zbG90O1xuICAgICAgaWYgKHNsb3QgPT09IFNsb3RUeXBlLkFDVElWRSB8fCBzbG90ID09PSBTbG90VHlwZS5CRU5DSCkge1xuICAgICAgICBpZiAoIXBvd2VyLnVzZVdoZW5JblBsYXkpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgR2FtZUVycm9yKEdhbWVNZXNzYWdlLkNBTk5PVF9VU0VfUE9XRVIpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChzbG90ID09PSBTbG90VHlwZS5IQU5EICYmICFwb3dlci51c2VGcm9tSGFuZCkge1xuICAgICAgICB0aHJvdyBuZXcgR2FtZUVycm9yKEdhbWVNZXNzYWdlLkNBTk5PVF9VU0VfUE9XRVIpO1xuICAgICAgfVxuXG4gICAgICBpZiAoc2xvdCA9PT0gU2xvdFR5cGUuRElTQ0FSRCAmJiAhcG93ZXIudXNlRnJvbURpc2NhcmQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEdhbWVFcnJvcihHYW1lTWVzc2FnZS5DQU5OT1RfVVNFX1BPV0VSKTtcbiAgICAgIH1cblxuICAgICAgc3RhdGUgPSBzdG9yZS5yZWR1Y2VFZmZlY3Qoc3RhdGUsIG5ldyBVc2VQb3dlckVmZmVjdChwbGF5ZXIsIHBvd2VyLCBwb2tlbW9uQ2FyZCkpO1xuICAgICAgcmV0dXJuIHN0YXRlO1xuICAgIH1cblxuICAgIGlmIChhY3Rpb24gaW5zdGFuY2VvZiBVc2VTdGFkaXVtQWN0aW9uKSB7XG4gICAgICBjb25zdCBwbGF5ZXIgPSBzdGF0ZS5wbGF5ZXJzW3N0YXRlLmFjdGl2ZVBsYXllcl07XG5cbiAgICAgIGlmIChwbGF5ZXIgPT09IHVuZGVmaW5lZCB8fCBwbGF5ZXIuaWQgIT09IGFjdGlvbi5jbGllbnRJZCkge1xuICAgICAgICB0aHJvdyBuZXcgR2FtZUVycm9yKEdhbWVNZXNzYWdlLk5PVF9ZT1VSX1RVUk4pO1xuICAgICAgfVxuXG4gICAgICBpZiAocGxheWVyLnN0YWRpdW1Vc2VkVHVybiA9PT0gc3RhdGUudHVybikge1xuICAgICAgICB0aHJvdyBuZXcgR2FtZUVycm9yKEdhbWVNZXNzYWdlLlNUQURJVU1fQUxSRUFEWV9VU0VEKTtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgc3RhZGl1bSA9IFN0YXRlVXRpbHMuZ2V0U3RhZGl1bUNhcmQoc3RhdGUpO1xuICAgICAgaWYgKHN0YWRpdW0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgR2FtZUVycm9yKEdhbWVNZXNzYWdlLk5PX1NUQURJVU1fSU5fUExBWSk7XG4gICAgICB9XG5cbiAgICAgIHN0YXRlID0gc3RvcmUucmVkdWNlRWZmZWN0KHN0YXRlLCBuZXcgVXNlU3RhZGl1bUVmZmVjdChwbGF5ZXIsIHN0YWRpdW0pKTtcbiAgICAgIHJldHVybiBzdGF0ZTtcbiAgICB9XG5cbiAgfVxuXG4gIHJldHVybiBzdGF0ZTtcbn1cbiJdfQ==
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qb2VteWVyc2NvdWdoL0RvY3VtZW50cy9HaXRIdWIvcHRjZy1lcHNkL3B0Y2ctc2VydmVyL3NyYy9nYW1lL3N0b3JlL3JlZHVjZXJzL3BsYXllci10dXJuLXJlZHVjZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Im8yc0JBaUJNO2lPQWhCTixLQUFBLENBQUEsY0FBQSx5QkFBQSxPQUFBLENBQUEseUJBQUEsQ0FBQSxDQUFBLENBQ0EsS0FBQSxDQUFBLE9BQUEseUJBQUEsT0FBQSxDQUFBLGdCQUFBLENBQUEsQ0FBQSxDQUVBLEtBQUEsQ0FBQSxZQUFBLHlCQUFBLE9BQUEsQ0FBQSxrQkFBQSxDQUFBLENBQUEsQ0FDQSxLQUFBLENBQUEsY0FBQSx5QkFBQSxPQUFBLENBQUEsb0JBQUEsQ0FBQSxDQUFBLENBQ0EsS0FBQSxDQUFBLGNBQUEseUJBQUEsT0FBQSxDQUFBLHlCQUFBLENBQUEsQ0FBQSxDQUNBLEtBQUEsQ0FBQSxvQkFBQSx5QkFBQSxPQUFBLENBQUEsK0JBQUEsQ0FBQSxDQUFBLENBQ0EsS0FBQSxDQUFBLGFBQUEseUJBQUEsT0FBQSxDQUFBLGdCQUFBLENBQUEsQ0FBQSxDQUNBLEtBQUEsQ0FBQSxrQkFBQSx5QkFBQSxPQUFBLENBQUEsNkJBQUEsQ0FBQSxDQUFBLENBQ0EsS0FBQSxDQUFBLGNBQUEsMEJBQUEsT0FBQSxDQUFBLHNCQUFBLENBQUEsQ0FBQSxDQUVBLFFBQWdCLENBQUEsaUJBQWhCLENBQWtDLEtBQWxDLENBQW9ELEtBQXBELENBQWtFLE1BQWxFLENBQWdGLGdEQUU5RSxHQUFJLEtBQUssQ0FBQyxLQUFOLEdBQWdCLE9BQUEsQ0FBQSxTQUFBLENBQVUsV0FBOUIsQ0FBMkMsbURBRXpDLEdBQUksTUFBTSxXQUFZLENBQUEsY0FBQSxDQUFBLGNBQXRCLENBQXNDLDJCQUNwQyxLQUFNLENBQUEsTUFBTSwwQkFBRyxLQUFLLENBQUMsT0FBTixDQUFjLEtBQUssQ0FBQyxZQUFwQixDQUFILENBQVosQ0FEb0Msd0JB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LHdCQU90QyxHQUFJLE1BQU0sQ0FBQyxlQUFQLEdBQTJCLEtBQUssQ0FBQyxJQUFyQyxDQUEyQyxvREFDekMsS0FBTSxJQUFJLENBQUEsWUFBQSxDQUFBLFNBQUosQ0FBYyxjQUFBLENBQUEsV0FBQSxDQUFZLG9CQUExQixDQUFOLENBQ0QsQ0FGRCxpQ0FJQSxLQUFNLENBQUEsT0FBTywwQkFBRyxhQUFBLENBQUEsVUFBQSxDQUFXLGNBQVgsQ0FBMEIsS0FBMUIsQ0FBSCxDQUFiLENBWHNDLHdCQVl0QyxHQUFJLE9BQU8sR0FBSyxTQUFoQixDQUEyQixvREFDekIsS0FBTSxJQUFJLENBQUEsWUFBQSxDQUFBLFNBQUosQ0FBYyxjQUFBLENBQUEsV0FBQSxDQUFZLGtCQUExQixDQUFOLENBQ0QsQ0FGRCxpQ0Fac0Msd0JBZ0J0QyxLQUFLLENBQUcsS0FBSyxDQUFDLFlBQU4sQ0FBbUIsS0FBbkIsQ0FBMEIsR0FBSSxDQUFBLGNBQUEsQ0FBQSxnQkFBSixDQUFxQixNQUFyQixDQUE2QixPQUE3QixDQUExQixDQUFSLENBaEJzQyx3QkFpQnRDLE1BQU8sQ0FBQSxLQUFQLENBQ0QsQ0FsQkQsaUNBb0JELENBaklELGdDQUY4RSx3QkFxSTlFLE1BQU8sQ0FBQSxLQUFQLENBQ0QsQyx3QkF0SUQsT0FBQSxDQUFBLGlCQUFBLENBQUEsaUJBQUEsQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFjdGlvbiB9IGZyb20gJy4uL2FjdGlvbnMvYWN0aW9uJztcbmltcG9ydCB7IFBhc3NUdXJuQWN0aW9uLCBSZXRyZWF0QWN0aW9uLCBBdHRhY2tBY3Rpb24sIFVzZUFiaWxpdHlBY3Rpb24sIFVzZVN0YWRpdW1BY3Rpb24gfSBmcm9tICcuLi9hY3Rpb25zL2dhbWUtYWN0aW9ucyc7XG5pbXBvcnQgeyBTdGF0ZSwgR2FtZVBoYXNlIH0gZnJvbSAnLi4vc3RhdGUvc3RhdGUnO1xuaW1wb3J0IHsgU3RvcmVMaWtlIH0gZnJvbSAnLi4vc3RvcmUtbGlrZSc7XG5pbXBvcnQgeyBHYW1lRXJyb3IgfSBmcm9tICcuLi8uLi9nYW1lLWVycm9yJztcbmltcG9ydCB7IEdhbWVNZXNzYWdlIH0gZnJvbSAnLi4vLi4vZ2FtZS1tZXNzYWdlJztcbmltcG9ydCB7IFJldHJlYXRFZmZlY3QsIFVzZUF0dGFja0VmZmVjdCwgVXNlUG93ZXJFZmZlY3QsIFVzZVN0YWRpdW1FZmZlY3QgfSBmcm9tICcuLi9lZmZlY3RzL2dhbWUtZWZmZWN0cyc7XG5pbXBvcnQgeyBFbmRUdXJuRWZmZWN0IH0gZnJvbSAnLi4vZWZmZWN0cy9nYW1lLXBoYXNlLWVmZmVjdHMnO1xuaW1wb3J0IHsgU3RhdGVVdGlscyB9IGZyb20gJy4uL3N0YXRlLXV0aWxzJztcbmltcG9ydCB7U2xvdFR5cGV9IGZyb20gJy4uL2FjdGlvbnMvcGxheS1jYXJkLWFjdGlvbic7XG5pbXBvcnQge1Bva2Vtb25DYXJkfSBmcm9tICcuLi9jYXJkL3Bva2Vtb24tY2FyZCc7XG5cbmV4cG9ydCBmdW5jdGlvbiBwbGF5ZXJUdXJuUmVkdWNlcihzdG9yZTogU3RvcmVMaWtlLCBzdGF0ZTogU3RhdGUsIGFjdGlvbjogQWN0aW9uKTogU3RhdGUge1xuXG4gIGlmIChzdGF0ZS5waGFzZSA9PT0gR2FtZVBoYXNlLlBMQVlFUl9UVVJOKSB7XG5cbiAgICBpZiAoYWN0aW9uIGluc3RhbmNlb2YgUGFzc1R1cm5BY3Rpb24pIHtcbiAgICAgIGNvbnN0IHBsYXllciA9IHN0YXRlLnBsYXllcnNbc3RhdGUuYWN0aXZlUGxheWVyXTtcblxuICAgICAgaWYgKHBsYXllciA9PT0gdW5kZWZpbmVkIHx8IHBsYXllci5pZCAhPT0gYWN0aW9uLmNsaWVudElkKSB7XG4gICAgICAgIHRocm93IG5ldyBHYW1lRXJyb3IoR2FtZU1lc3NhZ2UuTk9UX1lPVVJfVFVSTik7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGVuZFR1cm5FZmZlY3QgPSBuZXcgRW5kVHVybkVmZmVjdChwbGF5ZXIpO1xuXG4gICAgICBzdGF0ZSA9IHN0b3JlLnJlZHVjZUVmZmVjdChzdGF0ZSwgZW5kVHVybkVmZmVjdCk7XG4gICAgICByZXR1cm4gc3RhdGU7XG4gICAgfVxuXG4gICAgaWYgKGFjdGlvbiBpbnN0YW5jZW9mIFJldHJlYXRBY3Rpb24pIHtcbiAgICAgIGNvbnN0IHBsYXllciA9IHN0YXRlLnBsYXllcnNbc3RhdGUuYWN0aXZlUGxheWVyXTtcblxuICAgICAgaWYgKHBsYXllciA9PT0gdW5kZWZpbmVkIHx8IHBsYXllci5pZCAhPT0gYWN0aW9uLmNsaWVudElkKSB7XG4gICAgICAgIHRocm93IG5ldyBHYW1lRXJyb3IoR2FtZU1lc3NhZ2UuTk9UX1lPVVJfVFVSTik7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJldHJlYXRFZmZlY3QgPSBuZXcgUmV0cmVhdEVmZmVjdChwbGF5ZXIsIGFjdGlvbi5iZW5jaEluZGV4KTtcbiAgICAgIHN0YXRlID0gc3RvcmUucmVkdWNlRWZmZWN0KHN0YXRlLCByZXRyZWF0RWZmZWN0KTtcbiAgICAgIHJldHVybiBzdGF0ZTtcbiAgICB9XG5cbiAgICBpZiAoYWN0aW9uIGluc3RhbmNlb2YgQXR0YWNrQWN0aW9uKSB7XG4gICAgICBjb25zdCBwbGF5ZXIgPSBzdGF0ZS5wbGF5ZXJzW3N0YXRlLmFjdGl2ZVBsYXllcl07XG5cbiAgICAgIGlmIChwbGF5ZXIgPT09IHVuZGVmaW5lZCB8fCBwbGF5ZXIuaWQgIT09IGFjdGlvbi5jbGllbnRJZCkge1xuICAgICAgICB0aHJvdyBuZXcgR2FtZUVycm9yKEdhbWVNZXNzYWdlLk5PVF9ZT1VSX1RVUk4pO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBwb2tlbW9uQ2FyZCA9IHBsYXllci5hY3RpdmUuZ2V0UG9rZW1vbkNhcmQoKTtcbiAgICAgIGlmIChwb2tlbW9uQ2FyZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRocm93IG5ldyBHYW1lRXJyb3IoR2FtZU1lc3NhZ2UuVU5LTk9XTl9BVFRBQ0spO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBhdHRhY2sgPSBwb2tlbW9uQ2FyZC5hdHRhY2tzLmZpbmQoYSA9PiBhLm5hbWUgPT09IGFjdGlvbi5uYW1lKTtcbiAgICAgIGlmIChhdHRhY2sgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgR2FtZUVycm9yKEdhbWVNZXNzYWdlLlVOS05PV05fQVRUQUNLKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgdXNlQXR0YWNrRWZmZWN0ID0gbmV3IFVzZUF0dGFja0VmZmVjdChwbGF5ZXIsIGF0dGFjayk7XG4gICAgICBzdGF0ZSA9IHN0b3JlLnJlZHVjZUVmZmVjdChzdGF0ZSwgdXNlQXR0YWNrRWZmZWN0KTtcbiAgICAgIHJldHVybiBzdGF0ZTtcbiAgICB9XG5cbiAgICBpZiAoYWN0aW9uIGluc3RhbmNlb2YgVXNlQWJpbGl0eUFjdGlvbikge1xuICAgICAgY29uc3QgcGxheWVyID0gc3RhdGUucGxheWVyc1tzdGF0ZS5hY3RpdmVQbGF5ZXJdO1xuXG4gICAgICBpZiAocGxheWVyID09PSB1bmRlZmluZWQgfHwgcGxheWVyLmlkICE9PSBhY3Rpb24uY2xpZW50SWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEdhbWVFcnJvcihHYW1lTWVzc2FnZS5OT1RfWU9VUl9UVVJOKTtcbiAgICAgIH1cblxuICAgICAgbGV0IHBva2Vtb25DYXJkOiBQb2tlbW9uQ2FyZCB8IHVuZGVmaW5lZDtcblxuICAgICAgc3dpdGNoIChhY3Rpb24udGFyZ2V0LnNsb3QpIHtcbiAgICAgICAgY2FzZSBTbG90VHlwZS5BQ1RJVkU6XG4gICAgICAgIGNhc2UgU2xvdFR5cGUuQkVOQ0g6IHtcbiAgICAgICAgICBjb25zdCB0YXJnZXQgPSBTdGF0ZVV0aWxzLmdldFRhcmdldChzdGF0ZSwgcGxheWVyLCBhY3Rpb24udGFyZ2V0KTtcbiAgICAgICAgICBwb2tlbW9uQ2FyZCA9IHRhcmdldC5nZXRQb2tlbW9uQ2FyZCgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgU2xvdFR5cGUuRElTQ0FSRDoge1xuICAgICAgICAgIGNvbnN0IGRpc2NhcmRDYXJkID0gcGxheWVyLmRpc2NhcmQuY2FyZHNbYWN0aW9uLnRhcmdldC5pbmRleF07XG4gICAgICAgICAgaWYgKGRpc2NhcmRDYXJkIGluc3RhbmNlb2YgUG9rZW1vbkNhcmQpIHtcbiAgICAgICAgICAgIHBva2Vtb25DYXJkID0gZGlzY2FyZENhcmQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgU2xvdFR5cGUuSEFORDoge1xuICAgICAgICAgIGNvbnN0IGhhbmRDYXJkID0gcGxheWVyLmhhbmQuY2FyZHNbYWN0aW9uLnRhcmdldC5pbmRleF07XG4gICAgICAgICAgaWYgKGhhbmRDYXJkIGluc3RhbmNlb2YgUG9rZW1vbkNhcmQpIHtcbiAgICAgICAgICAgIHBva2Vtb25DYXJkID0gaGFuZENhcmQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChwb2tlbW9uQ2FyZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRocm93IG5ldyBHYW1lRXJyb3IoR2FtZU1lc3NhZ2UuSU5WQUxJRF9UQVJHRVQpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBwb3dlciA9IHBva2Vtb25DYXJkLnBvd2Vycy5maW5kKGEgPT4gYS5uYW1lID09PSBhY3Rpb24ubmFtZSk7XG4gICAgICBpZiAocG93ZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgR2FtZUVycm9yKEdhbWVNZXNzYWdlLlVOS05PV05fUE9XRVIpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBzbG90ID0gYWN0aW9uLnRhcmdldC5zbG90O1xuICAgICAgaWYgKHNsb3QgPT09IFNsb3RUeXBlLkFDVElWRSB8fCBzbG90ID09PSBTbG90VHlwZS5CRU5DSCkge1xuICAgICAgICBpZiAoIXBvd2VyLnVzZVdoZW5JblBsYXkpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgR2FtZUVycm9yKEdhbWVNZXNzYWdlLkNBTk5PVF9VU0VfUE9XRVIpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChzbG90ID09PSBTbG90VHlwZS5IQU5EICYmICFwb3dlci51c2VGcm9tSGFuZCkge1xuICAgICAgICB0aHJvdyBuZXcgR2FtZUVycm9yKEdhbWVNZXNzYWdlLkNBTk5PVF9VU0VfUE9XRVIpO1xuICAgICAgfVxuXG4gICAgICBpZiAoc2xvdCA9PT0gU2xvdFR5cGUuRElTQ0FSRCAmJiAhcG93ZXIudXNlRnJvbURpc2NhcmQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEdhbWVFcnJvcihHYW1lTWVzc2FnZS5DQU5OT1RfVVNFX1BPV0VSKTtcbiAgICAgIH1cblxuICAgICAgc3RhdGUgPSBzdG9yZS5yZWR1Y2VFZmZlY3Qoc3RhdGUsIG5ldyBVc2VQb3dlckVmZmVjdChwbGF5ZXIsIHBvd2VyLCBwb2tlbW9uQ2FyZCkpO1xuICAgICAgcmV0dXJuIHN0YXRlO1xuICAgIH1cblxuICAgIGlmIChhY3Rpb24gaW5zdGFuY2VvZiBVc2VTdGFkaXVtQWN0aW9uKSB7XG4gICAgICBjb25zdCBwbGF5ZXIgPSBzdGF0ZS5wbGF5ZXJzW3N0YXRlLmFjdGl2ZVBsYXllcl07XG5cbiAgICAgIGlmIChwbGF5ZXIgPT09IHVuZGVmaW5lZCB8fCBwbGF5ZXIuaWQgIT09IGFjdGlvbi5jbGllbnRJZCkge1xuICAgICAgICB0aHJvdyBuZXcgR2FtZUVycm9yKEdhbWVNZXNzYWdlLk5PVF9ZT1VSX1RVUk4pO1xuICAgICAgfVxuXG4gICAgICBpZiAocGxheWVyLnN0YWRpdW1Vc2VkVHVybiA9PT0gc3RhdGUudHVybikge1xuICAgICAgICB0aHJvdyBuZXcgR2FtZUVycm9yKEdhbWVNZXNzYWdlLlNUQURJVU1fQUxSRUFEWV9VU0VEKTtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgc3RhZGl1bSA9IFN0YXRlVXRpbHMuZ2V0U3RhZGl1bUNhcmQoc3RhdGUpO1xuICAgICAgaWYgKHN0YWRpdW0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgR2FtZUVycm9yKEdhbWVNZXNzYWdlLk5PX1NUQURJVU1fSU5fUExBWSk7XG4gICAgICB9XG5cbiAgICAgIHN0YXRlID0gc3RvcmUucmVkdWNlRWZmZWN0KHN0YXRlLCBuZXcgVXNlU3RhZGl1bUVmZmVjdChwbGF5ZXIsIHN0YWRpdW0pKTtcbiAgICAgIHJldHVybiBzdGF0ZTtcbiAgICB9XG5cbiAgfVxuXG4gIHJldHVybiBzdGF0ZTtcbn1cbiJdfQ==