"use strict";function cov_107c6szqad(){var path="/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/simple-bot/simple-tactics/attach-energy-tactic.ts";var hash="e4a77c4316ce345d66ecef95dba57d307bcd656b";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/simple-bot/simple-tactics/attach-energy-tactic.ts",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:62}},"1":{start:{line:3,column:0},end:{line:3,column:36}},"2":{start:{line:4,column:15},end:{line:4,column:36}},"3":{start:{line:5,column:25},end:{line:5,column:52}},"4":{start:{line:6,column:23},end:{line:6,column:61}},"5":{start:{line:9,column:8},end:{line:11,column:9}},"6":{start:{line:10,column:12},end:{line:10,column:29}},"7":{start:{line:13,column:25},end:{line:13,column:27}},"8":{start:{line:14,column:8},end:{line:18,column:11}},"9":{start:{line:15,column:12},end:{line:17,column:13}},"10":{start:{line:15,column:70},end:{line:15,column:95}},"11":{start:{line:16,column:16},end:{line:16,column:33}},"12":{start:{line:19,column:8},end:{line:21,column:9}},"13":{start:{line:20,column:12},end:{line:20,column:19}},"14":{start:{line:22,column:28},end:{line:22,column:72}},"15":{start:{line:23,column:26},end:{line:23,column:64}},"16":{start:{line:24,column:24},end:{line:24,column:26}},"17":{start:{line:25,column:8},end:{line:34,column:11}},"18":{start:{line:26,column:12},end:{line:33,column:13}},"19":{start:{line:27,column:16},end:{line:27,column:42}},"20":{start:{line:28,column:30},end:{line:28,column:68}},"21":{start:{line:29,column:16},end:{line:29,column:37}},"22":{start:{line:30,column:16},end:{line:32,column:17}},"23":{start:{line:31,column:20},end:{line:31,column:58}},"24":{start:{line:35,column:8},end:{line:37,column:9}},"25":{start:{line:36,column:12},end:{line:36,column:19}},"26":{start:{line:38,column:8},end:{line:38,column:50}},"27":{start:{line:38,column:31},end:{line:38,column:48}},"28":{start:{line:39,column:23},end:{line:39,column:40}},"29":{start:{line:40,column:22},end:{line:40,column:64}},"30":{start:{line:41,column:8},end:{line:41,column:67}},"31":{start:{line:44,column:0},end:{line:44,column:48}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:8,column:4},end:{line:8,column:5}},loc:{start:{line:8,column:29},end:{line:42,column:5}},line:8},"1":{name:"(anonymous_1)",decl:{start:{line:14,column:34},end:{line:14,column:35}},loc:{start:{line:14,column:39},end:{line:18,column:9}},line:14},"2":{name:"(anonymous_2)",decl:{start:{line:15,column:65},end:{line:15,column:66}},loc:{start:{line:15,column:70},end:{line:15,column:95}},line:15},"3":{name:"(anonymous_3)",decl:{start:{line:25,column:63},end:{line:25,column:64}},loc:{start:{line:25,column:94},end:{line:34,column:9}},line:25},"4":{name:"(anonymous_4)",decl:{start:{line:38,column:21},end:{line:38,column:22}},loc:{start:{line:38,column:31},end:{line:38,column:48}},line:38}},branchMap:{"0":{loc:{start:{line:9,column:8},end:{line:11,column:9}},type:"if",locations:[{start:{line:9,column:8},end:{line:11,column:9}},{start:{line:9,column:8},end:{line:11,column:9}}],line:9},"1":{loc:{start:{line:15,column:12},end:{line:17,column:13}},type:"if",locations:[{start:{line:15,column:12},end:{line:17,column:13}},{start:{line:15,column:12},end:{line:17,column:13}}],line:15},"2":{loc:{start:{line:15,column:16},end:{line:15,column:96}},type:"binary-expr",locations:[{start:{line:15,column:16},end:{line:15,column:46}},{start:{line:15,column:50},end:{line:15,column:96}}],line:15},"3":{loc:{start:{line:19,column:8},end:{line:21,column:9}},type:"if",locations:[{start:{line:19,column:8},end:{line:21,column:9}},{start:{line:19,column:8},end:{line:21,column:9}}],line:19},"4":{loc:{start:{line:30,column:16},end:{line:32,column:17}},type:"if",locations:[{start:{line:30,column:16},end:{line:32,column:17}},{start:{line:30,column:16},end:{line:32,column:17}}],line:30},"5":{loc:{start:{line:35,column:8},end:{line:37,column:9}},type:"if",locations:[{start:{line:35,column:8},end:{line:37,column:9}},{start:{line:35,column:8},end:{line:37,column:9}}],line:35}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0]},inputSourceMap:{version:3,file:"/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/simple-bot/simple-tactics/attach-energy-tactic.ts",sources:["/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/simple-bot/simple-tactics/attach-energy-tactic.ts"],names:[],mappings:";;;AAAA,qCACsC;AACtC,qDAAgD;AAChD,8DAA0D;AAE1D,MAAa,kBAAmB,SAAQ,6BAAY;IAE3C,SAAS,CAAC,KAAY,EAAE,MAAc;QAC3C,IAAI,MAAM,CAAC,gBAAgB,IAAI,KAAK,CAAC,IAAI,EAAE;YACzC,OAAO,SAAS,CAAC;SAClB;QAED,wCAAwC;QACxC,MAAM,QAAQ,GAAiB,EAAE,CAAC;QAClC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE;YAC5B,IAAI,CAAC,YAAY,iBAAU,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ,KAAK,CAAC,CAAC,QAAQ,CAAC,EAAE;gBAC7E,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;aAClB;QACH,CAAC,CAAC,CAAC;QAEH,IAAI,QAAQ,CAAC,MAAM,KAAK,CAAC,EAAE;YACzB,OAAO;SACR;QAED,MAAM,WAAW,GAAG,IAAI,0BAAW,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAClD,MAAM,SAAS,GAAG,WAAW,CAAC,QAAQ,CAAC,KAAK,EAAE,MAAM,CAAC,EAAE,CAAC,CAAC;QACzD,MAAM,OAAO,GAAwD,EAAE,CAAC;QACxE,MAAM,CAAC,cAAc,CAAC,iBAAU,CAAC,aAAa,EAAE,CAAC,QAAQ,EAAE,OAAO,EAAE,MAAM,EAAE,EAAE;YAE5E,KAAK,MAAM,IAAI,IAAI,QAAQ,EAAE;gBAC3B,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;gBAC1B,MAAM,KAAK,GAAG,WAAW,CAAC,QAAQ,CAAC,KAAK,EAAE,MAAM,CAAC,EAAE,CAAC,CAAC;gBACrD,QAAQ,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC;gBACrB,IAAI,KAAK,GAAG,SAAS,EAAE;oBACrB,OAAO,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;iBACvC;aACF;QACH,CAAC,CAAC,CAAC;QAEH,IAAI,OAAO,CAAC,MAAM,KAAK,CAAC,EAAE;YACxB,OAAO;SACR;QAED,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC;QAC1C,MAAM,MAAM,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;QACjC,MAAM,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;QACzD,OAAO,IAAI,qBAAc,CAAC,MAAM,CAAC,EAAE,EAAE,KAAK,EAAE,MAAM,CAAC,CAAC;IACtD,CAAC;CAEF;AA5CD,gDA4CC",sourcesContent:["import { Action, Player, State, EnergyCard, PlayCardAction, CardTarget,\n  PlayerType, Card} from '../../game';\nimport { SimpleTactic } from './simple-tactics';\nimport { EnergyScore } from '../state-score/energy-score';\n\nexport class AttachEnergyTactic extends SimpleTactic {\n\n  public useTactic(state: State, player: Player): Action | undefined {\n    if (player.energyPlayedTurn >= state.turn) {\n      return undefined;\n    }\n\n    // Distinct list with player's energies.\n    const energies: EnergyCard[] = [];\n    player.hand.cards.forEach(c => {\n      if (c instanceof EnergyCard && !energies.some(e => e.fullName === c.fullName)) {\n        energies.push(c);\n      }\n    });\n\n    if (energies.length === 0) {\n      return;\n    }\n\n    const energyScore = new EnergyScore(this.options);\n    const baseScore = energyScore.getScore(state, player.id);\n    const targets: { target: CardTarget, card: Card, score: number }[] = [];\n    player.forEachPokemon(PlayerType.BOTTOM_PLAYER, (cardList, pokemon, target) => {\n\n      for (const card of energies) {\n        cardList.cards.push(card);\n        const score = energyScore.getScore(state, player.id);\n        cardList.cards.pop();\n        if (score > baseScore) {\n          targets.push({ target, score, card });\n        }\n      }\n    });\n\n    if (targets.length === 0) {\n      return;\n    }\n\n    targets.sort((a, b) => b.score - a.score);\n    const target = targets[0].target;\n    const index = player.hand.cards.indexOf(targets[0].card);\n    return new PlayCardAction(player.id, index, target); \n  }\n\n}\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e4a77c4316ce345d66ecef95dba57d307bcd656b"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_107c6szqad=function(){return actualCoverage;};}return actualCoverage;}cov_107c6szqad();cov_107c6szqad().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_107c6szqad().s[1]++;exports.AttachEnergyTactic=void 0;const game_1=(cov_107c6szqad().s[2]++,require("../../game"));const simple_tactics_1=(cov_107c6szqad().s[3]++,require("./simple-tactics"));const energy_score_1=(cov_107c6szqad().s[4]++,require("../state-score/energy-score"));class AttachEnergyTactic extends(simple_tactics_1.SimpleTactic){useTactic(state,player){cov_107c6szqad().f[0]++;cov_107c6szqad().s[5]++;if(player.energyPlayedTurn>=state.turn){cov_107c6szqad().b[0][0]++;cov_107c6szqad().s[6]++;return undefined;}else{cov_107c6szqad().b[0][1]++;}// Distinct list with player's energies.
const energies=(cov_107c6szqad().s[7]++,[]);cov_107c6szqad().s[8]++;player.hand.cards.forEach(c=>{cov_107c6szqad().f[1]++;cov_107c6szqad().s[9]++;if((cov_107c6szqad().b[2][0]++,c instanceof game_1.EnergyCard)&&(cov_107c6szqad().b[2][1]++,!energies.some(e=>{cov_107c6szqad().f[2]++;cov_107c6szqad().s[10]++;return e.fullName===c.fullName;}))){cov_107c6szqad().b[1][0]++;cov_107c6szqad().s[11]++;energies.push(c);}else{cov_107c6szqad().b[1][1]++;}});cov_107c6szqad().s[12]++;if(energies.length===0){cov_107c6szqad().b[3][0]++;cov_107c6szqad().s[13]++;return;}else{cov_107c6szqad().b[3][1]++;}const energyScore=(cov_107c6szqad().s[14]++,new energy_score_1.EnergyScore(this.options));const baseScore=(cov_107c6szqad().s[15]++,energyScore.getScore(state,player.id));const targets=(cov_107c6szqad().s[16]++,[]);cov_107c6szqad().s[17]++;player.forEachPokemon(game_1.PlayerType.BOTTOM_PLAYER,(cardList,pokemon,target)=>{cov_107c6szqad().f[3]++;cov_107c6szqad().s[18]++;for(const card of energies){cov_107c6szqad().s[19]++;cardList.cards.push(card);const score=(cov_107c6szqad().s[20]++,energyScore.getScore(state,player.id));cov_107c6szqad().s[21]++;cardList.cards.pop();cov_107c6szqad().s[22]++;if(score>baseScore){cov_107c6szqad().b[4][0]++;cov_107c6szqad().s[23]++;targets.push({target,score,card});}else{cov_107c6szqad().b[4][1]++;}}});cov_107c6szqad().s[24]++;if(targets.length===0){cov_107c6szqad().b[5][0]++;cov_107c6szqad().s[25]++;return;}else{cov_107c6szqad().b[5][1]++;}cov_107c6szqad().s[26]++;targets.sort((a,b)=>{cov_107c6szqad().f[4]++;cov_107c6szqad().s[27]++;return b.score-a.score;});const target=(cov_107c6szqad().s[28]++,targets[0].target);const index=(cov_107c6szqad().s[29]++,player.hand.cards.indexOf(targets[0].card));cov_107c6szqad().s[30]++;return new game_1.PlayCardAction(player.id,index,target);}}cov_107c6szqad().s[31]++;exports.AttachEnergyTactic=AttachEnergyTactic;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2pvZW15ZXJzY291Z2gvRG9jdW1lbnRzL0dpdEh1Yi9wdGNnLWVwc2QvcHRjZy1zZXJ2ZXIvc3JjL3NpbXBsZS1ib3Qvc2ltcGxlLXRhY3RpY3MvYXR0YWNoLWVuZXJneS10YWN0aWMudHMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9qb2VteWVyc2NvdWdoL0RvY3VtZW50cy9HaXRIdWIvcHRjZy1lcHNkL3B0Y2ctc2VydmVyL3NyYy9zaW1wbGUtYm90L3NpbXBsZS10YWN0aWNzL2F0dGFjaC1lbmVyZ3ktdGFjdGljLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLHFDQUNzQztBQUN0QyxxREFBZ0Q7QUFDaEQsOERBQTBEO0FBRTFELE1BQWEsa0JBQW1CLFNBQVEsNkJBQVk7SUFFM0MsU0FBUyxDQUFDLEtBQVksRUFBRSxNQUFjO1FBQzNDLElBQUksTUFBTSxDQUFDLGdCQUFnQixJQUFJLEtBQUssQ0FBQyxJQUFJLEVBQUU7WUFDekMsT0FBTyxTQUFTLENBQUM7U0FDbEI7UUFFRCx3Q0FBd0M7UUFDeEMsTUFBTSxRQUFRLEdBQWlCLEVBQUUsQ0FBQztRQUNsQyxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUU7WUFDNUIsSUFBSSxDQUFDLFlBQVksaUJBQVUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsUUFBUSxLQUFLLENBQUMsQ0FBQyxRQUFRLENBQUMsRUFBRTtnQkFDN0UsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQzthQUNsQjtRQUNILENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxRQUFRLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRTtZQUN6QixPQUFPO1NBQ1I7UUFFRCxNQUFNLFdBQVcsR0FBRyxJQUFJLDBCQUFXLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ2xELE1BQU0sU0FBUyxHQUFHLFdBQVcsQ0FBQyxRQUFRLENBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUN6RCxNQUFNLE9BQU8sR0FBd0QsRUFBRSxDQUFDO1FBQ3hFLE1BQU0sQ0FBQyxjQUFjLENBQUMsaUJBQVUsQ0FBQyxhQUFhLEVBQUUsQ0FBQyxRQUFRLEVBQUUsT0FBTyxFQUFFLE1BQU0sRUFBRSxFQUFFO1lBRTVFLEtBQUssTUFBTSxJQUFJLElBQUksUUFBUSxFQUFFO2dCQUMzQixRQUFRLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztnQkFDMUIsTUFBTSxLQUFLLEdBQUcsV0FBVyxDQUFDLFFBQVEsQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDO2dCQUNyRCxRQUFRLENBQUMsS0FBSyxDQUFDLEdBQUcsRUFBRSxDQUFDO2dCQUNyQixJQUFJLEtBQUssR0FBRyxTQUFTLEVBQUU7b0JBQ3JCLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUM7aUJBQ3ZDO2FBQ0Y7UUFDSCxDQUFDLENBQUMsQ0FBQztRQUVILElBQUksT0FBTyxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUU7WUFDeEIsT0FBTztTQUNSO1FBRUQsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQzFDLE1BQU0sTUFBTSxHQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUM7UUFDakMsTUFBTSxLQUFLLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN6RCxPQUFPLElBQUkscUJBQWMsQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLEtBQUssRUFBRSxNQUFNLENBQUMsQ0FBQztJQUN0RCxDQUFDO0NBRUY7QUE1Q0QsZ0RBNENDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQWN0aW9uLCBQbGF5ZXIsIFN0YXRlLCBFbmVyZ3lDYXJkLCBQbGF5Q2FyZEFjdGlvbiwgQ2FyZFRhcmdldCxcbiAgUGxheWVyVHlwZSwgQ2FyZH0gZnJvbSAnLi4vLi4vZ2FtZSc7XG5pbXBvcnQgeyBTaW1wbGVUYWN0aWMgfSBmcm9tICcuL3NpbXBsZS10YWN0aWNzJztcbmltcG9ydCB7IEVuZXJneVNjb3JlIH0gZnJvbSAnLi4vc3RhdGUtc2NvcmUvZW5lcmd5LXNjb3JlJztcblxuZXhwb3J0IGNsYXNzIEF0dGFjaEVuZXJneVRhY3RpYyBleHRlbmRzIFNpbXBsZVRhY3RpYyB7XG5cbiAgcHVibGljIHVzZVRhY3RpYyhzdGF0ZTogU3RhdGUsIHBsYXllcjogUGxheWVyKTogQWN0aW9uIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAocGxheWVyLmVuZXJneVBsYXllZFR1cm4gPj0gc3RhdGUudHVybikge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICAvLyBEaXN0aW5jdCBsaXN0IHdpdGggcGxheWVyJ3MgZW5lcmdpZXMuXG4gICAgY29uc3QgZW5lcmdpZXM6IEVuZXJneUNhcmRbXSA9IFtdO1xuICAgIHBsYXllci5oYW5kLmNhcmRzLmZvckVhY2goYyA9PiB7XG4gICAgICBpZiAoYyBpbnN0YW5jZW9mIEVuZXJneUNhcmQgJiYgIWVuZXJnaWVzLnNvbWUoZSA9PiBlLmZ1bGxOYW1lID09PSBjLmZ1bGxOYW1lKSkge1xuICAgICAgICBlbmVyZ2llcy5wdXNoKGMpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKGVuZXJnaWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGVuZXJneVNjb3JlID0gbmV3IEVuZXJneVNjb3JlKHRoaXMub3B0aW9ucyk7XG4gICAgY29uc3QgYmFzZVNjb3JlID0gZW5lcmd5U2NvcmUuZ2V0U2NvcmUoc3RhdGUsIHBsYXllci5pZCk7XG4gICAgY29uc3QgdGFyZ2V0czogeyB0YXJnZXQ6IENhcmRUYXJnZXQsIGNhcmQ6IENhcmQsIHNjb3JlOiBudW1iZXIgfVtdID0gW107XG4gICAgcGxheWVyLmZvckVhY2hQb2tlbW9uKFBsYXllclR5cGUuQk9UVE9NX1BMQVlFUiwgKGNhcmRMaXN0LCBwb2tlbW9uLCB0YXJnZXQpID0+IHtcblxuICAgICAgZm9yIChjb25zdCBjYXJkIG9mIGVuZXJnaWVzKSB7XG4gICAgICAgIGNhcmRMaXN0LmNhcmRzLnB1c2goY2FyZCk7XG4gICAgICAgIGNvbnN0IHNjb3JlID0gZW5lcmd5U2NvcmUuZ2V0U2NvcmUoc3RhdGUsIHBsYXllci5pZCk7XG4gICAgICAgIGNhcmRMaXN0LmNhcmRzLnBvcCgpO1xuICAgICAgICBpZiAoc2NvcmUgPiBiYXNlU2NvcmUpIHtcbiAgICAgICAgICB0YXJnZXRzLnB1c2goeyB0YXJnZXQsIHNjb3JlLCBjYXJkIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAodGFyZ2V0cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0YXJnZXRzLnNvcnQoKGEsIGIpID0+IGIuc2NvcmUgLSBhLnNjb3JlKTtcbiAgICBjb25zdCB0YXJnZXQgPSB0YXJnZXRzWzBdLnRhcmdldDtcbiAgICBjb25zdCBpbmRleCA9IHBsYXllci5oYW5kLmNhcmRzLmluZGV4T2YodGFyZ2V0c1swXS5jYXJkKTtcbiAgICByZXR1cm4gbmV3IFBsYXlDYXJkQWN0aW9uKHBsYXllci5pZCwgaW5kZXgsIHRhcmdldCk7IFxuICB9XG5cbn1cbiJdfQ==
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qb2VteWVyc2NvdWdoL0RvY3VtZW50cy9HaXRIdWIvcHRjZy1lcHNkL3B0Y2ctc2VydmVyL3NyYy9zaW1wbGUtYm90L3NpbXBsZS10YWN0aWNzL2F0dGFjaC1lbmVyZ3ktdGFjdGljLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7c09BQUEsS0FBQSxDQUFBLE1BQUEsMEJBQUEsT0FBQSxDQUFBLFlBQUEsQ0FBQSxDQUFBLENBRUEsS0FBQSxDQUFBLGdCQUFBLDBCQUFBLE9BQUEsQ0FBQSxrQkFBQSxDQUFBLENBQUEsQ0FDQSxLQUFBLENBQUEsY0FBQSwwQkFBQSxPQUFBLENBQUEsNkJBQUEsQ0FBQSxDQUFBLENBRUEsS0FBYSxDQUFBLGtCQUFiLFNBQXdDLGdCQUFBLENBQUEsWUFBeEMsQ0FBb0QsQ0FFM0MsU0FBUyxDQUFDLEtBQUQsQ0FBZSxNQUFmLENBQTZCLGlEQUMzQyxHQUFJLE1BQU0sQ0FBQyxnQkFBUCxFQUEyQixLQUFLLENBQUMsSUFBckMsQ0FBMkMsb0RBQ3pDLE1BQU8sQ0FBQSxTQUFQLENBQ0QsQ0FGRCxpQ0FJQTtBQUNBLEtBQU0sQ0FBQSxRQUFRLDBCQUFpQixFQUFqQixDQUFkLENBTjJDLHdCQU8zQyxNQUFNLENBQUMsSUFBUCxDQUFZLEtBQVosQ0FBa0IsT0FBbEIsQ0FBMEIsQ0FBQyxFQUFHLGlEQUM1QixHQUFJLDRCQUFBLENBQUMsV0FBWSxDQUFBLE1BQUEsQ0FBQSxVQUFiLCtCQUEyQixDQUFDLFFBQVEsQ0FBQyxJQUFULENBQWMsQ0FBQyxFQUFJLHdEQUFBLENBQUEsQ0FBQyxDQUFDLFFBQUYsR0FBZSxDQUFDLENBQUMsUUFBakIsQ0FBeUIsQ0FBNUMsQ0FBNUIsQ0FBSixDQUErRSxxREFDN0UsUUFBUSxDQUFDLElBQVQsQ0FBYyxDQUFkLEVBQ0QsQ0FGRCxpQ0FHRCxDQUpELEVBUDJDLHlCQWEzQyxHQUFJLFFBQVEsQ0FBQyxNQUFULEdBQW9CLENBQXhCLENBQTJCLHFEQUN6QixPQUNELENBRkQsaUNBSUEsS0FBTSxDQUFBLFdBQVcsMkJBQUcsR0FBSSxDQUFBLGNBQUEsQ0FBQSxXQUFKLENBQWdCLEtBQUssT0FBckIsQ0FBSCxDQUFqQixDQUNBLEtBQU0sQ0FBQSxTQUFTLDJCQUFHLFdBQVcsQ0FBQyxRQUFaLENBQXFCLEtBQXJCLENBQTRCLE1BQU0sQ0FBQyxFQUFuQyxDQUFILENBQWYsQ0FDQSxLQUFNLENBQUEsT0FBTywyQkFBd0QsRUFBeEQsQ0FBYixDQW5CMkMseUJBb0IzQyxNQUFNLENBQUMsY0FBUCxDQUFzQixNQUFBLENBQUEsVUFBQSxDQUFXLGFBQWpDLENBQWdELENBQUMsUUFBRCxDQUFXLE9BQVgsQ0FBb0IsTUFBcEIsR0FBOEIsa0RBRTVFLElBQUssS0FBTSxDQUFBLElBQVgsR0FBbUIsQ0FBQSxRQUFuQixDQUE2QiwwQkFDM0IsUUFBUSxDQUFDLEtBQVQsQ0FBZSxJQUFmLENBQW9CLElBQXBCLEVBQ0EsS0FBTSxDQUFBLEtBQUssMkJBQUcsV0FBVyxDQUFDLFFBQVosQ0FBcUIsS0FBckIsQ0FBNEIsTUFBTSxDQUFDLEVBQW5DLENBQUgsQ0FBWCxDQUYyQix5QkFHM0IsUUFBUSxDQUFDLEtBQVQsQ0FBZSxHQUFmLEdBSDJCLHlCQUkzQixHQUFJLEtBQUssQ0FBRyxTQUFaLENBQXVCLHFEQUNyQixPQUFPLENBQUMsSUFBUixDQUFhLENBQUUsTUFBRixDQUFVLEtBQVYsQ0FBaUIsSUFBakIsQ0FBYixFQUNELENBRkQsaUNBR0QsQ0FDRixDQVZELEVBcEIyQyx5QkFnQzNDLEdBQUksT0FBTyxDQUFDLE1BQVIsR0FBbUIsQ0FBdkIsQ0FBMEIscURBQ3hCLE9BQ0QsQ0FGRCxpQ0FoQzJDLHlCQW9DM0MsT0FBTyxDQUFDLElBQVIsQ0FBYSxDQUFDLENBQUQsQ0FBSSxDQUFKLEdBQVUsd0RBQUEsQ0FBQSxDQUFDLENBQUMsS0FBRixDQUFVLENBQUMsQ0FBQyxLQUFaLENBQWlCLENBQXhDLEVBQ0EsS0FBTSxDQUFBLE1BQU0sMkJBQUcsT0FBTyxDQUFDLENBQUQsQ0FBUCxDQUFXLE1BQWQsQ0FBWixDQUNBLEtBQU0sQ0FBQSxLQUFLLDJCQUFHLE1BQU0sQ0FBQyxJQUFQLENBQVksS0FBWixDQUFrQixPQUFsQixDQUEwQixPQUFPLENBQUMsQ0FBRCxDQUFQLENBQVcsSUFBckMsQ0FBSCxDQUFYLENBdEMyQyx5QkF1QzNDLE1BQU8sSUFBSSxDQUFBLE1BQUEsQ0FBQSxjQUFKLENBQW1CLE1BQU0sQ0FBQyxFQUExQixDQUE4QixLQUE5QixDQUFxQyxNQUFyQyxDQUFQLENBQ0QsQ0ExQ2lELEMseUJBQXBELE9BQUEsQ0FBQSxrQkFBQSxDQUFBLGtCQUFBLEMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBY3Rpb24sIFBsYXllciwgU3RhdGUsIEVuZXJneUNhcmQsIFBsYXlDYXJkQWN0aW9uLCBDYXJkVGFyZ2V0LFxuICBQbGF5ZXJUeXBlLCBDYXJkfSBmcm9tICcuLi8uLi9nYW1lJztcbmltcG9ydCB7IFNpbXBsZVRhY3RpYyB9IGZyb20gJy4vc2ltcGxlLXRhY3RpY3MnO1xuaW1wb3J0IHsgRW5lcmd5U2NvcmUgfSBmcm9tICcuLi9zdGF0ZS1zY29yZS9lbmVyZ3ktc2NvcmUnO1xuXG5leHBvcnQgY2xhc3MgQXR0YWNoRW5lcmd5VGFjdGljIGV4dGVuZHMgU2ltcGxlVGFjdGljIHtcblxuICBwdWJsaWMgdXNlVGFjdGljKHN0YXRlOiBTdGF0ZSwgcGxheWVyOiBQbGF5ZXIpOiBBY3Rpb24gfCB1bmRlZmluZWQge1xuICAgIGlmIChwbGF5ZXIuZW5lcmd5UGxheWVkVHVybiA+PSBzdGF0ZS50dXJuKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIC8vIERpc3RpbmN0IGxpc3Qgd2l0aCBwbGF5ZXIncyBlbmVyZ2llcy5cbiAgICBjb25zdCBlbmVyZ2llczogRW5lcmd5Q2FyZFtdID0gW107XG4gICAgcGxheWVyLmhhbmQuY2FyZHMuZm9yRWFjaChjID0+IHtcbiAgICAgIGlmIChjIGluc3RhbmNlb2YgRW5lcmd5Q2FyZCAmJiAhZW5lcmdpZXMuc29tZShlID0+IGUuZnVsbE5hbWUgPT09IGMuZnVsbE5hbWUpKSB7XG4gICAgICAgIGVuZXJnaWVzLnB1c2goYyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAoZW5lcmdpZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgZW5lcmd5U2NvcmUgPSBuZXcgRW5lcmd5U2NvcmUodGhpcy5vcHRpb25zKTtcbiAgICBjb25zdCBiYXNlU2NvcmUgPSBlbmVyZ3lTY29yZS5nZXRTY29yZShzdGF0ZSwgcGxheWVyLmlkKTtcbiAgICBjb25zdCB0YXJnZXRzOiB7IHRhcmdldDogQ2FyZFRhcmdldCwgY2FyZDogQ2FyZCwgc2NvcmU6IG51bWJlciB9W10gPSBbXTtcbiAgICBwbGF5ZXIuZm9yRWFjaFBva2Vtb24oUGxheWVyVHlwZS5CT1RUT01fUExBWUVSLCAoY2FyZExpc3QsIHBva2Vtb24sIHRhcmdldCkgPT4ge1xuXG4gICAgICBmb3IgKGNvbnN0IGNhcmQgb2YgZW5lcmdpZXMpIHtcbiAgICAgICAgY2FyZExpc3QuY2FyZHMucHVzaChjYXJkKTtcbiAgICAgICAgY29uc3Qgc2NvcmUgPSBlbmVyZ3lTY29yZS5nZXRTY29yZShzdGF0ZSwgcGxheWVyLmlkKTtcbiAgICAgICAgY2FyZExpc3QuY2FyZHMucG9wKCk7XG4gICAgICAgIGlmIChzY29yZSA+IGJhc2VTY29yZSkge1xuICAgICAgICAgIHRhcmdldHMucHVzaCh7IHRhcmdldCwgc2NvcmUsIGNhcmQgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmICh0YXJnZXRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRhcmdldHMuc29ydCgoYSwgYikgPT4gYi5zY29yZSAtIGEuc2NvcmUpO1xuICAgIGNvbnN0IHRhcmdldCA9IHRhcmdldHNbMF0udGFyZ2V0O1xuICAgIGNvbnN0IGluZGV4ID0gcGxheWVyLmhhbmQuY2FyZHMuaW5kZXhPZih0YXJnZXRzWzBdLmNhcmQpO1xuICAgIHJldHVybiBuZXcgUGxheUNhcmRBY3Rpb24ocGxheWVyLmlkLCBpbmRleCwgdGFyZ2V0KTsgXG4gIH1cblxufVxuIl19