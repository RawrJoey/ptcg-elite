"use strict";function cov_1jx1x5j7nr(){var path="/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/game/store/prompts/attach-energy-prompt.ts";var hash="195a8ac128b35477eb6843c0ede8f78534bc1ca5";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/game/store/prompts/attach-energy-prompt.ts",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:62}},"1":{start:{line:3,column:0},end:{line:3,column:69}},"2":{start:{line:4,column:21},end:{line:4,column:48}},"3":{start:{line:5,column:23},end:{line:5,column:52}},"4":{start:{line:6,column:17},end:{line:6,column:36}},"5":{start:{line:7,column:0},end:{line:7,column:49}},"6":{start:{line:10,column:8},end:{line:10,column:24}},"7":{start:{line:11,column:8},end:{line:11,column:31}},"8":{start:{line:12,column:8},end:{line:12,column:33}},"9":{start:{line:13,column:8},end:{line:13,column:37}},"10":{start:{line:14,column:8},end:{line:14,column:27}},"11":{start:{line:15,column:8},end:{line:15,column:29}},"12":{start:{line:16,column:8},end:{line:16,column:51}},"13":{start:{line:18,column:8},end:{line:26,column:20}},"14":{start:{line:29,column:8},end:{line:31,column:9}},"15":{start:{line:30,column:12},end:{line:30,column:26}},"16":{start:{line:32,column:23},end:{line:32,column:70}},"17":{start:{line:32,column:47},end:{line:32,column:69}},"18":{start:{line:33,column:8},end:{line:35,column:9}},"19":{start:{line:34,column:12},end:{line:34,column:95}},"20":{start:{line:36,column:26},end:{line:36,column:28}},"21":{start:{line:37,column:8},end:{line:41,column:11}},"22":{start:{line:38,column:29},end:{line:38,column:42}},"23":{start:{line:39,column:25},end:{line:39,column:48}},"24":{start:{line:40,column:12},end:{line:40,column:47}},"25":{start:{line:42,column:8},end:{line:42,column:25}},"26":{start:{line:45,column:8},end:{line:47,column:9}},"27":{start:{line:46,column:12},end:{line:46,column:44}},"28":{start:{line:48,column:8},end:{line:50,column:9}},"29":{start:{line:49,column:12},end:{line:49,column:25}},"30":{start:{line:52,column:8},end:{line:62,column:9}},"31":{start:{line:53,column:22},end:{line:53,column:34}},"32":{start:{line:54,column:30},end:{line:58,column:14}},"33":{start:{line:55,column:16},end:{line:57,column:46}},"34":{start:{line:59,column:12},end:{line:61,column:13}},"35":{start:{line:60,column:16},end:{line:60,column:29}},"36":{start:{line:64,column:8},end:{line:76,column:9}},"37":{start:{line:65,column:12},end:{line:75,column:13}},"38":{start:{line:65,column:25},end:{line:65,column:26}},"39":{start:{line:66,column:26},end:{line:66,column:38}},"40":{start:{line:67,column:30},end:{line:71,column:18}},"41":{start:{line:68,column:20},end:{line:70,column:50}},"42":{start:{line:72,column:16},end:{line:74,column:17}},"43":{start:{line:73,column:20},end:{line:73,column:33}},"44":{start:{line:77,column:8},end:{line:77,column:55}},"45":{start:{line:77,column:33},end:{line:77,column:53}},"46":{start:{line:80,column:0},end:{line:80,column:48}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:9,column:4},end:{line:9,column:5}},loc:{start:{line:9,column:81},end:{line:27,column:5}},line:9},"1":{name:"(anonymous_1)",decl:{start:{line:28,column:4},end:{line:28,column:5}},loc:{start:{line:28,column:26},end:{line:43,column:5}},line:28},"2":{name:"(anonymous_2)",decl:{start:{line:32,column:42},end:{line:32,column:43}},loc:{start:{line:32,column:47},end:{line:32,column:69}},line:32},"3":{name:"(anonymous_3)",decl:{start:{line:37,column:23},end:{line:37,column:24}},loc:{start:{line:37,column:28},end:{line:41,column:9}},line:37},"4":{name:"(anonymous_4)",decl:{start:{line:44,column:4},end:{line:44,column:5}},loc:{start:{line:44,column:21},end:{line:78,column:5}},line:44},"5":{name:"(anonymous_5)",decl:{start:{line:54,column:42},end:{line:54,column:43}},loc:{start:{line:54,column:47},end:{line:58,column:13}},line:54},"6":{name:"(anonymous_6)",decl:{start:{line:67,column:47},end:{line:67,column:48}},loc:{start:{line:67,column:52},end:{line:71,column:17}},line:67},"7":{name:"(anonymous_7)",decl:{start:{line:77,column:28},end:{line:77,column:29}},loc:{start:{line:77,column:33},end:{line:77,column:53}},line:77}},branchMap:{"0":{loc:{start:{line:29,column:8},end:{line:31,column:9}},type:"if",locations:[{start:{line:29,column:8},end:{line:31,column:9}},{start:{line:29,column:8},end:{line:31,column:9}}],line:29},"1":{loc:{start:{line:33,column:8},end:{line:35,column:9}},type:"if",locations:[{start:{line:33,column:8},end:{line:35,column:9}},{start:{line:33,column:8},end:{line:35,column:9}}],line:33},"2":{loc:{start:{line:45,column:8},end:{line:47,column:9}},type:"if",locations:[{start:{line:45,column:8},end:{line:47,column:9}},{start:{line:45,column:8},end:{line:47,column:9}}],line:45},"3":{loc:{start:{line:48,column:8},end:{line:50,column:9}},type:"if",locations:[{start:{line:48,column:8},end:{line:50,column:9}},{start:{line:48,column:8},end:{line:50,column:9}}],line:48},"4":{loc:{start:{line:48,column:12},end:{line:48,column:80}},type:"binary-expr",locations:[{start:{line:48,column:12},end:{line:48,column:44}},{start:{line:48,column:48},end:{line:48,column:80}}],line:48},"5":{loc:{start:{line:52,column:8},end:{line:62,column:9}},type:"if",locations:[{start:{line:52,column:8},end:{line:62,column:9}},{start:{line:52,column:8},end:{line:62,column:9}}],line:52},"6":{loc:{start:{line:52,column:12},end:{line:52,column:56}},type:"binary-expr",locations:[{start:{line:52,column:12},end:{line:52,column:35}},{start:{line:52,column:39},end:{line:52,column:56}}],line:52},"7":{loc:{start:{line:55,column:23},end:{line:57,column:45}},type:"binary-expr",locations:[{start:{line:55,column:23},end:{line:55,column:47}},{start:{line:56,column:23},end:{line:56,column:43}},{start:{line:57,column:23},end:{line:57,column:45}}],line:55},"8":{loc:{start:{line:59,column:12},end:{line:61,column:13}},type:"if",locations:[{start:{line:59,column:12},end:{line:61,column:13}},{start:{line:59,column:12},end:{line:61,column:13}}],line:59},"9":{loc:{start:{line:64,column:8},end:{line:76,column:9}},type:"if",locations:[{start:{line:64,column:8},end:{line:76,column:9}},{start:{line:64,column:8},end:{line:76,column:9}}],line:64},"10":{loc:{start:{line:64,column:12},end:{line:64,column:62}},type:"binary-expr",locations:[{start:{line:64,column:12},end:{line:64,column:41}},{start:{line:64,column:45},end:{line:64,column:62}}],line:64},"11":{loc:{start:{line:68,column:27},end:{line:70,column:49}},type:"binary-expr",locations:[{start:{line:68,column:27},end:{line:68,column:51}},{start:{line:69,column:27},end:{line:69,column:47}},{start:{line:70,column:27},end:{line:70,column:49}}],line:68},"12":{loc:{start:{line:72,column:16},end:{line:74,column:17}},type:"if",locations:[{start:{line:72,column:16},end:{line:74,column:17}},{start:{line:72,column:16},end:{line:74,column:17}}],line:72}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0,0],"12":[0,0]},inputSourceMap:{version:3,file:"/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/game/store/prompts/attach-energy-prompt.ts",sources:["/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/game/store/prompts/attach-energy-prompt.ts"],names:[],mappings:"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",sourcesContent:["import { Card } from '../card/card';\nimport { GameError } from '../../game-error';\nimport { GameMessage } from '../../game-message';\nimport { Prompt } from './prompt';\nimport { PlayerType, SlotType, CardTarget } from '../actions/play-card-action';\nimport { State } from '../state/state';\nimport { CardList } from '../state/card-list';\nimport { FilterType } from './choose-cards-prompt';\n\nexport const AttachEnergyPromptType = 'Attach energy';\n\nexport interface AttachEnergyOptions {\n  allowCancel: boolean;\n  min: number;\n  max: number;\n  blocked: number[];\n  blockedTo: CardTarget[];\n  sameTarget: boolean;\n  differentTargets: boolean;\n}\n\nexport type AttachEnergyResultType = {to: CardTarget, index: number}[];\n\nexport interface CardAssign {\n  to: CardTarget;\n  card: Card;\n}\n\nexport class AttachEnergyPrompt extends Prompt<CardAssign[]> {\n\n  readonly type: string = AttachEnergyPromptType;\n\n  public options: AttachEnergyOptions;\n\n  constructor(\n    playerId: number,\n    public message: GameMessage,\n    public cardList: CardList,\n    public playerType: PlayerType,\n    public slots: SlotType[],\n    public filter: FilterType,\n    options?: Partial<AttachEnergyOptions>\n  ) {\n    super(playerId);\n\n    // Default options\n    this.options = Object.assign({}, {\n      allowCancel: true,\n      min: 0,\n      max: cardList.cards.length,\n      blocked: [],\n      blockedTo: [],\n      sameTarget: false,\n      differentTargets: false\n    }, options);\n  }\n\n  public decode(result: AttachEnergyResultType | null, state: State): CardAssign[] | null {\n    if (result === null) {\n      return result;  // operation cancelled\n    }\n    const player = state.players.find(p => p.id === this.playerId);\n    if (player === undefined) {\n      throw new GameError(GameMessage.INVALID_PROMPT_RESULT);\n    }\n    const transfers: CardAssign[] = [];\n    result.forEach(t => {\n      const cardList = this.cardList;\n      const card = cardList.cards[t.index];\n      transfers.push({ to: t.to, card });\n    });\n    return transfers;\n  }\n\n  public validate(result: CardAssign[] | null): boolean {\n    if (result === null) {\n      return this.options.allowCancel;  // operation cancelled\n    }\n    if (result.length < this.options.min || result.length > this.options.max) {\n      return false;\n    }\n\n    // Check if all targets are the same\n    if (this.options.sameTarget && result.length > 1) {\n      const t = result[0].to;\n      const different = result.some(r => {\n        return r.to.player !== t.player\n          || r.to.slot !== t.slot\n          || r.to.index !== t.index;\n      });\n      if (different) {\n        return false;\n      }\n    }\n\n    // Check if all selected targets are different\n    if (this.options.differentTargets && result.length > 1) {\n      for (let i = 0; i < result.length; i++) {\n        const t = result[i].to;\n        const index = result.findIndex(r => {\n          return r.to.player === t.player\n            && r.to.slot === t.slot\n            && r.to.index === t.index;\n        });\n        if (index !== i) {\n          return false;\n        }\n      }\n    }\n\n    return result.every(r => r.card !== undefined);\n  }\n\n}\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"195a8ac128b35477eb6843c0ede8f78534bc1ca5"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1jx1x5j7nr=function(){return actualCoverage;};}return actualCoverage;}cov_1jx1x5j7nr();cov_1jx1x5j7nr().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_1jx1x5j7nr().s[1]++;exports.AttachEnergyPrompt=exports.AttachEnergyPromptType=void 0;const game_error_1=(cov_1jx1x5j7nr().s[2]++,require("../../game-error"));const game_message_1=(cov_1jx1x5j7nr().s[3]++,require("../../game-message"));const prompt_1=(cov_1jx1x5j7nr().s[4]++,require("./prompt"));cov_1jx1x5j7nr().s[5]++;exports.AttachEnergyPromptType='Attach energy';class AttachEnergyPrompt extends(prompt_1.Prompt){constructor(playerId,message,cardList,playerType,slots,filter,options){cov_1jx1x5j7nr().f[0]++;cov_1jx1x5j7nr().s[6]++;super(playerId);cov_1jx1x5j7nr().s[7]++;this.message=message;cov_1jx1x5j7nr().s[8]++;this.cardList=cardList;cov_1jx1x5j7nr().s[9]++;this.playerType=playerType;cov_1jx1x5j7nr().s[10]++;this.slots=slots;cov_1jx1x5j7nr().s[11]++;this.filter=filter;cov_1jx1x5j7nr().s[12]++;this.type=exports.AttachEnergyPromptType;// Default options
cov_1jx1x5j7nr().s[13]++;this.options=Object.assign({},{allowCancel:true,min:0,max:cardList.cards.length,blocked:[],blockedTo:[],sameTarget:false,differentTargets:false},options);}decode(result,state){cov_1jx1x5j7nr().f[1]++;cov_1jx1x5j7nr().s[14]++;if(result===null){cov_1jx1x5j7nr().b[0][0]++;cov_1jx1x5j7nr().s[15]++;return result;// operation cancelled
}else{cov_1jx1x5j7nr().b[0][1]++;}const player=(cov_1jx1x5j7nr().s[16]++,state.players.find(p=>{cov_1jx1x5j7nr().f[2]++;cov_1jx1x5j7nr().s[17]++;return p.id===this.playerId;}));cov_1jx1x5j7nr().s[18]++;if(player===undefined){cov_1jx1x5j7nr().b[1][0]++;cov_1jx1x5j7nr().s[19]++;throw new game_error_1.GameError(game_message_1.GameMessage.INVALID_PROMPT_RESULT);}else{cov_1jx1x5j7nr().b[1][1]++;}const transfers=(cov_1jx1x5j7nr().s[20]++,[]);cov_1jx1x5j7nr().s[21]++;result.forEach(t=>{cov_1jx1x5j7nr().f[3]++;const cardList=(cov_1jx1x5j7nr().s[22]++,this.cardList);const card=(cov_1jx1x5j7nr().s[23]++,cardList.cards[t.index]);cov_1jx1x5j7nr().s[24]++;transfers.push({to:t.to,card});});cov_1jx1x5j7nr().s[25]++;return transfers;}validate(result){cov_1jx1x5j7nr().f[4]++;cov_1jx1x5j7nr().s[26]++;if(result===null){cov_1jx1x5j7nr().b[2][0]++;cov_1jx1x5j7nr().s[27]++;return this.options.allowCancel;// operation cancelled
}else{cov_1jx1x5j7nr().b[2][1]++;}cov_1jx1x5j7nr().s[28]++;if((cov_1jx1x5j7nr().b[4][0]++,result.length<this.options.min)||(cov_1jx1x5j7nr().b[4][1]++,result.length>this.options.max)){cov_1jx1x5j7nr().b[3][0]++;cov_1jx1x5j7nr().s[29]++;return false;}else{cov_1jx1x5j7nr().b[3][1]++;}// Check if all targets are the same
cov_1jx1x5j7nr().s[30]++;if((cov_1jx1x5j7nr().b[6][0]++,this.options.sameTarget)&&(cov_1jx1x5j7nr().b[6][1]++,result.length>1)){cov_1jx1x5j7nr().b[5][0]++;const t=(cov_1jx1x5j7nr().s[31]++,result[0].to);const different=(cov_1jx1x5j7nr().s[32]++,result.some(r=>{cov_1jx1x5j7nr().f[5]++;cov_1jx1x5j7nr().s[33]++;return(cov_1jx1x5j7nr().b[7][0]++,r.to.player!==t.player)||(cov_1jx1x5j7nr().b[7][1]++,r.to.slot!==t.slot)||(cov_1jx1x5j7nr().b[7][2]++,r.to.index!==t.index);}));cov_1jx1x5j7nr().s[34]++;if(different){cov_1jx1x5j7nr().b[8][0]++;cov_1jx1x5j7nr().s[35]++;return false;}else{cov_1jx1x5j7nr().b[8][1]++;}}else{cov_1jx1x5j7nr().b[5][1]++;}// Check if all selected targets are different
cov_1jx1x5j7nr().s[36]++;if((cov_1jx1x5j7nr().b[10][0]++,this.options.differentTargets)&&(cov_1jx1x5j7nr().b[10][1]++,result.length>1)){cov_1jx1x5j7nr().b[9][0]++;cov_1jx1x5j7nr().s[37]++;for(let i=(cov_1jx1x5j7nr().s[38]++,0);i<result.length;i++){const t=(cov_1jx1x5j7nr().s[39]++,result[i].to);const index=(cov_1jx1x5j7nr().s[40]++,result.findIndex(r=>{cov_1jx1x5j7nr().f[6]++;cov_1jx1x5j7nr().s[41]++;return(cov_1jx1x5j7nr().b[11][0]++,r.to.player===t.player)&&(cov_1jx1x5j7nr().b[11][1]++,r.to.slot===t.slot)&&(cov_1jx1x5j7nr().b[11][2]++,r.to.index===t.index);}));cov_1jx1x5j7nr().s[42]++;if(index!==i){cov_1jx1x5j7nr().b[12][0]++;cov_1jx1x5j7nr().s[43]++;return false;}else{cov_1jx1x5j7nr().b[12][1]++;}}}else{cov_1jx1x5j7nr().b[9][1]++;}cov_1jx1x5j7nr().s[44]++;return result.every(r=>{cov_1jx1x5j7nr().f[7]++;cov_1jx1x5j7nr().s[45]++;return r.card!==undefined;});}}cov_1jx1x5j7nr().s[46]++;exports.AttachEnergyPrompt=AttachEnergyPrompt;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2pvZW15ZXJzY291Z2gvRG9jdW1lbnRzL0dpdEh1Yi9wdGNnLWVwc2QvcHRjZy1zZXJ2ZXIvc3JjL2dhbWUvc3RvcmUvcHJvbXB0cy9hdHRhY2gtZW5lcmd5LXByb21wdC50cyIsInNvdXJjZXMiOlsiL1VzZXJzL2pvZW15ZXJzY291Z2gvRG9jdW1lbnRzL0dpdEh1Yi9wdGNnLWVwc2QvcHRjZy1zZXJ2ZXIvc3JjL2dhbWUvc3RvcmUvcHJvbXB0cy9hdHRhY2gtZW5lcmd5LXByb21wdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFDQSxpREFBNkM7QUFDN0MscURBQWlEO0FBQ2pELHFDQUFrQztBQU1yQixRQUFBLHNCQUFzQixHQUFHLGVBQWUsQ0FBQztBQW1CdEQsTUFBYSxrQkFBbUIsU0FBUSxlQUFvQjtJQU0xRCxZQUNFLFFBQWdCLEVBQ1QsT0FBb0IsRUFDcEIsUUFBa0IsRUFDbEIsVUFBc0IsRUFDdEIsS0FBaUIsRUFDakIsTUFBa0IsRUFDekIsT0FBc0M7UUFFdEMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBUFQsWUFBTyxHQUFQLE9BQU8sQ0FBYTtRQUNwQixhQUFRLEdBQVIsUUFBUSxDQUFVO1FBQ2xCLGVBQVUsR0FBVixVQUFVLENBQVk7UUFDdEIsVUFBSyxHQUFMLEtBQUssQ0FBWTtRQUNqQixXQUFNLEdBQU4sTUFBTSxDQUFZO1FBVmxCLFNBQUksR0FBVyw4QkFBc0IsQ0FBQztRQWU3QyxrQkFBa0I7UUFDbEIsSUFBSSxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRTtZQUMvQixXQUFXLEVBQUUsSUFBSTtZQUNqQixHQUFHLEVBQUUsQ0FBQztZQUNOLEdBQUcsRUFBRSxRQUFRLENBQUMsS0FBSyxDQUFDLE1BQU07WUFDMUIsT0FBTyxFQUFFLEVBQUU7WUFDWCxTQUFTLEVBQUUsRUFBRTtZQUNiLFVBQVUsRUFBRSxLQUFLO1lBQ2pCLGdCQUFnQixFQUFFLEtBQUs7U0FDeEIsRUFBRSxP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QUksS0FBSyxLQUFLLENBQUMsRUFBRTtvQkFDZixPQUFPLEtBQUssQ0FBQztpQkFDZDthQUNGO1NBQ0Y7UUFFRCxPQUFPLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxLQUFLLFNBQVMsQ0FBQyxDQUFDO0lBQ2pELENBQUM7Q0FFRjtBQXJGRCxnREFxRkMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDYXJkIH0gZnJvbSAnLi4vY2FyZC9jYXJkJztcbmltcG9ydCB7IEdhbWVFcnJvciB9IGZyb20gJy4uLy4uL2dhbWUtZXJyb3InO1xuaW1wb3J0IHsgR2FtZU1lc3NhZ2UgfSBmcm9tICcuLi8uLi9nYW1lLW1lc3NhZ2UnO1xuaW1wb3J0IHsgUHJvbXB0IH0gZnJvbSAnLi9wcm9tcHQnO1xuaW1wb3J0IHsgUGxheWVyVHlwZSwgU2xvdFR5cGUsIENhcmRUYXJnZXQgfSBmcm9tICcuLi9hY3Rpb25zL3BsYXktY2FyZC1hY3Rpb24nO1xuaW1wb3J0IHsgU3RhdGUgfSBmcm9tICcuLi9zdGF0ZS9zdGF0ZSc7XG5pbXBvcnQgeyBDYXJkTGlzdCB9IGZyb20gJy4uL3N0YXRlL2NhcmQtbGlzdCc7XG5pbXBvcnQgeyBGaWx0ZXJUeXBlIH0gZnJvbSAnLi9jaG9vc2UtY2FyZHMtcHJvbXB0JztcblxuZXhwb3J0IGNvbnN0IEF0dGFjaEVuZXJneVByb21wdFR5cGUgPSAnQXR0YWNoIGVuZXJneSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXR0YWNoRW5lcmd5T3B0aW9ucyB7XG4gIGFsbG93Q2FuY2VsOiBib29sZWFuO1xuICBtaW46IG51bWJlcjtcbiAgbWF4OiBudW1iZXI7XG4gIGJsb2NrZWQ6IG51bWJlcltdO1xuICBibG9ja2VkVG86IENhcmRUYXJnZXRbXTtcbiAgc2FtZVRhcmdldDogYm9vbGVhbjtcbiAgZGlmZmVyZW50VGFyZ2V0czogYm9vbGVhbjtcbn1cblxuZXhwb3J0IHR5cGUgQXR0YWNoRW5lcmd5UmVzdWx0VHlwZSA9IHt0bzogQ2FyZFRhcmdldCwgaW5kZXg6IG51bWJlcn1bXTtcblxuZXhwb3J0IGludGVyZmFjZSBDYXJkQXNzaWduIHtcbiAgdG86IENhcmRUYXJnZXQ7XG4gIGNhcmQ6IENhcmQ7XG59XG5cbmV4cG9ydCBjbGFzcyBBdHRhY2hFbmVyZ3lQcm9tcHQgZXh0ZW5kcyBQcm9tcHQ8Q2FyZEFzc2lnbltdPiB7XG5cbiAgcmVhZG9ubHkgdHlwZTogc3RyaW5nID0gQXR0YWNoRW5lcmd5UHJvbXB0VHlwZTtcblxuICBwdWJsaWMgb3B0aW9uczogQXR0YWNoRW5lcmd5T3B0aW9ucztcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwbGF5ZXJJZDogbnVtYmVyLFxuICAgIHB1YmxpYyBtZXNzYWdlOiBHYW1lTWVzc2FnZSxcbiAgICBwdWJsaWMgY2FyZExpc3Q6IENhcmRMaXN0LFxuICAgIHB1YmxpYyBwbGF5ZXJUeXBlOiBQbGF5ZXJUeXBlLFxuICAgIHB1YmxpYyBzbG90czogU2xvdFR5cGVbXSxcbiAgICBwdWJsaWMgZmlsdGVyOiBGaWx0ZXJUeXBlLFxuICAgIG9wdGlvbnM/OiBQYXJ0aWFsPEF0dGFjaEVuZXJneU9wdGlvbnM+XG4gICkge1xuICAgIHN1cGVyKHBsYXllcklkKTtcblxuICAgIC8vIERlZmF1bHQgb3B0aW9uc1xuICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIHtcbiAgICAgIGFsbG93Q2FuY2VsOiB0cnVlLFxuICAgICAgbWluOiAwLFxuICAgICAgbWF4OiBjYXJkTGlzdC5jYXJkcy5sZW5ndGgsXG4gICAgICBibG9ja2VkOiBbXSxcbiAgICAgIGJsb2NrZWRUbzogW10sXG4gICAgICBzYW1lVGFyZ2V0OiBmYWxzZSxcbiAgICAgIGRpZmZlcmVudFRhcmdldHM6IGZhbHNlXG4gICAgfSwgb3B0aW9ucyk7XG4gIH1cblxuICBwdWJsaWMgZGVjb2RlKHJlc3VsdDogQXR0YWNoRW5lcmd5UmVzdWx0VHlwZSB8IG51bGwsIHN0YXRlOiBTdGF0ZSk6IENhcmRBc3NpZ25bXSB8IG51bGwge1xuICAgIGlmIChyZXN1bHQgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiByZXN1bHQ7ICAvLyBvcGVyYXRpb24gY2FuY2VsbGVkXG4gICAgfVxuICAgIGNvbnN0IHBsYXllciA9IHN0YXRlLnBsYXllcnMuZmluZChwID0+IHAuaWQgPT09IHRoaXMucGxheWVySWQpO1xuICAgIGlmIChwbGF5ZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IEdhbWVFcnJvcihHYW1lTWVzc2FnZS5JTlZBTElEX1BST01QVF9SRVNVTFQpO1xuICAgIH1cbiAgICBjb25zdCB0cmFuc2ZlcnM6IENhcmRBc3NpZ25bXSA9IFtdO1xuICAgIHJlc3VsdC5mb3JFYWNoKHQgPT4ge1xuICAgICAgY29uc3QgY2FyZExpc3QgPSB0aGlzLmNhcmRMaXN0O1xuICAgICAgY29uc3QgY2FyZCA9IGNhcmRMaXN0LmNhcmRzW3QuaW5kZXhdO1xuICAgICAgdHJhbnNmZXJzLnB1c2goeyB0bzogdC50bywgY2FyZCB9KTtcbiAgICB9KTtcbiAgICByZXR1cm4gdHJhbnNmZXJzO1xuICB9XG5cbiAgcHVibGljIHZhbGlkYXRlKHJlc3VsdDogQ2FyZEFzc2lnbltdIHwgbnVsbCk6IGJvb2xlYW4ge1xuICAgIGlmIChyZXN1bHQgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuYWxsb3dDYW5jZWw7ICAvLyBvcGVyYXRpb24gY2FuY2VsbGVkXG4gICAgfVxuICAgIGlmIChyZXN1bHQubGVuZ3RoIDwgdGhpcy5vcHRpb25zLm1pbiB8fCByZXN1bHQubGVuZ3RoID4gdGhpcy5vcHRpb25zLm1heCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGlmIGFsbCB0YXJnZXRzIGFyZSB0aGUgc2FtZVxuICAgIGlmICh0aGlzLm9wdGlvbnMuc2FtZVRhcmdldCAmJiByZXN1bHQubGVuZ3RoID4gMSkge1xuICAgICAgY29uc3QgdCA9IHJlc3VsdFswXS50bztcbiAgICAgIGNvbnN0IGRpZmZlcmVudCA9IHJlc3VsdC5zb21lKHIgPT4ge1xuICAgICAgICByZXR1cm4gci50by5wbGF5ZXIgIT09IHQucGxheWVyXG4gICAgICAgICAgfHwgci50by5zbG90ICE9PSB0LnNsb3RcbiAgICAgICAgICB8fCByLnRvLmluZGV4ICE9PSB0LmluZGV4O1xuICAgICAgfSk7XG4gICAgICBpZiAoZGlmZmVyZW50KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiBhbGwgc2VsZWN0ZWQgdGFyZ2V0cyBhcmUgZGlmZmVyZW50XG4gICAgaWYgKHRoaXMub3B0aW9ucy5kaWZmZXJlbnRUYXJnZXRzICYmIHJlc3VsdC5sZW5ndGggPiAxKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc3VsdC5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCB0ID0gcmVzdWx0W2ldLnRvO1xuICAgICAgICBjb25zdCBpbmRleCA9IHJlc3VsdC5maW5kSW5kZXgociA9PiB7XG4gICAgICAgICAgcmV0dXJuIHIudG8ucGxheWVyID09PSB0LnBsYXllclxuICAgICAgICAgICAgJiYgci50by5zbG90ID09PSB0LnNsb3RcbiAgICAgICAgICAgICYmIHIudG8uaW5kZXggPT09IHQuaW5kZXg7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoaW5kZXggIT09IGkpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0LmV2ZXJ5KHIgPT4gci5jYXJkICE9PSB1bmRlZmluZWQpO1xuICB9XG5cbn1cbiJdfQ==
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qb2VteWVyc2NvdWdoL0RvY3VtZW50cy9HaXRIdWIvcHRjZy1lcHNkL3B0Y2ctc2VydmVyL3NyYy9nYW1lL3N0b3JlL3Byb21wdHMvYXR0YWNoLWVuZXJneS1wcm9tcHQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6InFnYkE4Qlc7cVFBN0JYLEtBQUEsQ0FBQSxZQUFBLDBCQUFBLE9BQUEsQ0FBQSxrQkFBQSxDQUFBLENBQUEsQ0FDQSxLQUFBLENBQUEsY0FBQSwwQkFBQSxPQUFBLENBQUEsb0JBQUEsQ0FBQSxDQUFBLENBQ0EsS0FBQSxDQUFBLFFBQUEsMEJBQUEsT0FBQSxDQUFBLFVBQUEsQ0FBQSxDQUFBLEMsd0JBTWEsT0FBQSxDQUFBLHNCQUFBLENBQXlCLGVBQXpCLENBbUJiLEtBQWEsQ0FBQSxrQkFBYixTQUF3QyxRQUFBLENBQUEsTUFBeEMsQ0FBNEQsQ0FNMUQsV0FBQSxDQUNFLFFBREYsQ0FFUyxPQUZULENBR1MsUUFIVCxDQUlTLFVBSlQsQ0FLUyxLQUxULENBTVMsTUFOVCxDQU9FLE9BUEYsQ0FPd0MsaURBRXRDLE1BQU0sUUFBTixFQUZzQyx3QkFML0IsS0FBQSxPQUFBLENBQUEsT0FBQSxDQUsrQix3QkFKL0IsS0FBQSxRQUFBLENBQUEsUUFBQSxDQUkrQix3QkFIL0IsS0FBQSxVQUFBLENBQUEsVUFBQSxDQUcrQix5QkFGL0IsS0FBQSxLQUFBLENBQUEsS0FBQSxDQUUrQix5QkFEL0IsS0FBQSxNQUFBLENBQUEsTUFBQSxDQUMrQix5QkFYL0IsS0FBQSxJQUFBLENBQWUsT0FBQSxDQUFBLHNCQUFmLENBZVA7QUFKc0MseUJBS3RDLEtBQUssT0FBTCxDQUFlLE1BQU0sQ0FBQyxNQUFQLENBQWMsRUFBZCxDQUFrQixDQUMvQixXQUFXLENBQUUsSUFEa0IsQ0FFL0IsR0FBRyxDQUFFLENBRjBCLENBRy9CLEdBQUcsQ0FBRSxRQUFRLENBQUMsS0FBVCxDQUFlLE1BSFcsQ0FJL0IsT0FBTyxDQUFFLEVBSnNCLENBSy9CLFNBQVMsQ0FBRSxFQUxvQixDQU0vQixVQUFVLENBQUUsS0FObUIsQ0FPL0IsZ0JBQWdCLENBQUUsS0FQYSxDQUFsQixDQVFaLE9BUlksQ0FBZixDQVNELENBRU0sTUFBTSxDQUFDLE1BQUQsQ0FBd0MsS0FBeEMsQ0FBb0Qsa0RBQy9ELEdBQUksTUFBTSxHQUFLLElBQWYsQ0FBcUIscURBQ25CLE1BQU8sQ0FBQSxNQUFQLENBQWdCO0FBQ2pCLENBRkQsaUNBR0EsS0FBTSxDQUFBLE1BQU0sMkJBQUcsS0FBSyxDQUFDLE9BQU4sQ0FBYyxJQUFkLENBQW1CLENBQUMsRUFBSSx3REFBQSxDQUFBLENBQUMsQ0FBQyxFQUFGLEdBQVMsS0FBSyxRQUFkLENBQXNCLENBQTlDLENBQUgsQ0FBWixDQUorRCx5QkFLL0QsR0FBSSxNQUFNLEdBQUssU0FBZixDQUEwQixxREFDeEIsS0FBTSxJQUFJLENBQUEsWUFBQSxDQUFBLFNBQUosQ0FBYyxjQUFBLENBQUEsV0FBQSxDQUFZLHFCQUExQixDQUFOLENBQ0QsQ0FGRCxpQ0FHQSxLQUFNLENBQUEsU0FBUywyQkFBaUIsRUFBakIsQ0FBZixDQVIrRCx5QkFTL0QsTUFBTSxDQUFDLE9BQVAsQ0FBZSxDQUFDLEVBQUcseUJBQ2pCLEtBQU0sQ0FBQSxRQUFRLDJCQUFHLEtBQUssUUFBUixDQUFkLENBQ0EsS0FBTSxDQUFBLElBQUksMkJBQUcsUUFBUSxDQUFDLEtBQVQsQ0FBZSxDQUFDLENBQUMsS0FBakIsQ0FBSCxDQUFWLENBRmlCLHlCQUdqQixTQUFTLENBQUMsSUFBVixDQUFlLENBQUUsRUFBRSxDQUFFLENBQUMsQ0FBQyxFQUFSLENBQVksSUFBWixDQUFmLEVBQ0QsQ0FKRCxFQVQrRCx5QkFjL0QsTUFBTyxDQUFBLFNBQVAsQ0FDRCxDQUVNLFFBQVEsQ0FBQyxNQUFELENBQTRCLGtEQUN6QyxHQUFJLE1BQU0sR0FBSyxJQUFmLENBQXFCLHFEQUNuQixNQUFPLE1BQUssT0FBTCxDQUFhLFdBQXBCLENBQWtDO0FBQ25DLENBRkQsaUNBRHlDLHlCQUl6QyxHQUFJLDRCQUFBLE1BQU0sQ0FBQyxNQUFQLENBQWdCLEtBQUssT0FBTCxDQUFhLEdBQTdCLCtCQUFvQyxNQUFNLENBQUMsTUFBUCxDQUFnQixLQUFLLE9BQUwsQ0FBYSxHQUFqRSxDQUFKLENBQTBFLHFEQUN4RSxNQUFPLE1BQVAsQ0FDRCxDQUZELGlDQUlBO0FBUnlDLHlCQVN6QyxHQUFJLGlDQUFLLE9BQUwsQ0FBYSxVQUFiLCtCQUEyQixNQUFNLENBQUMsTUFBUCxDQUFnQixDQUEzQyxDQUFKLENBQWtELDRCQUNoRCxLQUFNLENBQUEsQ0FBQywyQkFBRyxNQUFNLENBQUMsQ0FBRCxDQUFOLENBQVUsRUFBYixDQUFQLENBQ0EsS0FBTSxDQUFBLFNBQVMsMkJBQUcsTUFBTSxDQUFDLElBQVAsQ0FBWSxDQUFDLEVBQUcsa0RBQ2hDLE1BQU8sNEJBQUEsQ0FBQyxDQUFDLEVBQUYsQ0FBSyxNQUFMLEdBQWdCLENBQUMsQ0FBQyxNQUFsQiwrQkFDRixDQUFDLENBQUMsRUFBRixDQUFLLElBQUwsR0FBYyxDQUFDLENBQUMsSUFEZCwrQkFFRixDQUFDLENBQUMsRUFBRixDQUFLLEtBQUwsR0FBZSxDQUFDLENBQUMsS0FGZixDQUFQLENBR0QsQ0FKaUIsQ0FBSCxDQUFmLENBRmdELHlCQU9oRCxHQUFJLFNBQUosQ0FBZSxxREFDYixNQUFPLE1BQVAsQ0FDRCxDQUZELGlDQUdELENBVkQsaUNBWUE7QUFyQnlDLHlCQXNCekMsR0FBSSxrQ0FBSyxPQUFMLENBQWEsZ0JBQWIsZ0NBQWlDLE1BQU0sQ0FBQyxNQUFQLENBQWdCLENBQWpELENBQUosQ0FBd0QscURBQ3RELElBQUssR0FBSSxDQUFBLENBQUMsMkJBQUcsQ0FBSCxDQUFWLENBQWdCLENBQUMsQ0FBRyxNQUFNLENBQUMsTUFBM0IsQ0FBbUMsQ0FBQyxFQUFwQyxDQUF3QyxDQUN0QyxLQUFNLENBQUEsQ0FBQywyQkFBRyxNQUFNLENBQUMsQ0FBRCxDQUFOLENBQVUsRUFBYixDQUFQLENBQ0EsS0FBTSxDQUFBLEtBQUssMkJBQUcsTUFBTSxDQUFDLFNBQVAsQ0FBaUIsQ0FBQyxFQUFHLGtEQUNqQyxNQUFPLDZCQUFBLENBQUMsQ0FBQyxFQUFGLENBQUssTUFBTCxHQUFnQixDQUFDLENBQUMsTUFBbEIsZ0NBQ0YsQ0FBQyxDQUFDLEVBQUYsQ0FBSyxJQUFMLEdBQWMsQ0FBQyxDQUFDLElBRGQsZ0NBRUYsQ0FBQyxDQUFDLEVBQUYsQ0FBSyxLQUFMLEdBQWUsQ0FBQyxDQUFDLEtBRmYsQ0FBUCxDQUdELENBSmEsQ0FBSCxDQUFYLENBRnNDLHlCQU90QyxHQUFJLEtBQUssR0FBSyxDQUFkLENBQWlCLHNEQUNmLE1BQU8sTUFBUCxDQUNELENBRkQsa0NBR0QsQ0FDRixDQVpELGlDQXRCeUMseUJBb0N6QyxNQUFPLENBQUEsTUFBTSxDQUFDLEtBQVAsQ0FBYSxDQUFDLEVBQUksd0RBQUEsQ0FBQSxDQUFDLENBQUMsSUFBRixHQUFXLFNBQVgsQ0FBb0IsQ0FBdEMsQ0FBUCxDQUNELENBbkZ5RCxDLHlCQUE1RCxPQUFBLENBQUEsa0JBQUEsQ0FBQSxrQkFBQSxDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ2FyZCB9IGZyb20gJy4uL2NhcmQvY2FyZCc7XG5pbXBvcnQgeyBHYW1lRXJyb3IgfSBmcm9tICcuLi8uLi9nYW1lLWVycm9yJztcbmltcG9ydCB7IEdhbWVNZXNzYWdlIH0gZnJvbSAnLi4vLi4vZ2FtZS1tZXNzYWdlJztcbmltcG9ydCB7IFByb21wdCB9IGZyb20gJy4vcHJvbXB0JztcbmltcG9ydCB7IFBsYXllclR5cGUsIFNsb3RUeXBlLCBDYXJkVGFyZ2V0IH0gZnJvbSAnLi4vYWN0aW9ucy9wbGF5LWNhcmQtYWN0aW9uJztcbmltcG9ydCB7IFN0YXRlIH0gZnJvbSAnLi4vc3RhdGUvc3RhdGUnO1xuaW1wb3J0IHsgQ2FyZExpc3QgfSBmcm9tICcuLi9zdGF0ZS9jYXJkLWxpc3QnO1xuaW1wb3J0IHsgRmlsdGVyVHlwZSB9IGZyb20gJy4vY2hvb3NlLWNhcmRzLXByb21wdCc7XG5cbmV4cG9ydCBjb25zdCBBdHRhY2hFbmVyZ3lQcm9tcHRUeXBlID0gJ0F0dGFjaCBlbmVyZ3knO1xuXG5leHBvcnQgaW50ZXJmYWNlIEF0dGFjaEVuZXJneU9wdGlvbnMge1xuICBhbGxvd0NhbmNlbDogYm9vbGVhbjtcbiAgbWluOiBudW1iZXI7XG4gIG1heDogbnVtYmVyO1xuICBibG9ja2VkOiBudW1iZXJbXTtcbiAgYmxvY2tlZFRvOiBDYXJkVGFyZ2V0W107XG4gIHNhbWVUYXJnZXQ6IGJvb2xlYW47XG4gIGRpZmZlcmVudFRhcmdldHM6IGJvb2xlYW47XG59XG5cbmV4cG9ydCB0eXBlIEF0dGFjaEVuZXJneVJlc3VsdFR5cGUgPSB7dG86IENhcmRUYXJnZXQsIGluZGV4OiBudW1iZXJ9W107XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FyZEFzc2lnbiB7XG4gIHRvOiBDYXJkVGFyZ2V0O1xuICBjYXJkOiBDYXJkO1xufVxuXG5leHBvcnQgY2xhc3MgQXR0YWNoRW5lcmd5UHJvbXB0IGV4dGVuZHMgUHJvbXB0PENhcmRBc3NpZ25bXT4ge1xuXG4gIHJlYWRvbmx5IHR5cGU6IHN0cmluZyA9IEF0dGFjaEVuZXJneVByb21wdFR5cGU7XG5cbiAgcHVibGljIG9wdGlvbnM6IEF0dGFjaEVuZXJneU9wdGlvbnM7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcGxheWVySWQ6IG51bWJlcixcbiAgICBwdWJsaWMgbWVzc2FnZTogR2FtZU1lc3NhZ2UsXG4gICAgcHVibGljIGNhcmRMaXN0OiBDYXJkTGlzdCxcbiAgICBwdWJsaWMgcGxheWVyVHlwZTogUGxheWVyVHlwZSxcbiAgICBwdWJsaWMgc2xvdHM6IFNsb3RUeXBlW10sXG4gICAgcHVibGljIGZpbHRlcjogRmlsdGVyVHlwZSxcbiAgICBvcHRpb25zPzogUGFydGlhbDxBdHRhY2hFbmVyZ3lPcHRpb25zPlxuICApIHtcbiAgICBzdXBlcihwbGF5ZXJJZCk7XG5cbiAgICAvLyBEZWZhdWx0IG9wdGlvbnNcbiAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCB7XG4gICAgICBhbGxvd0NhbmNlbDogdHJ1ZSxcbiAgICAgIG1pbjogMCxcbiAgICAgIG1heDogY2FyZExpc3QuY2FyZHMubGVuZ3RoLFxuICAgICAgYmxvY2tlZDogW10sXG4gICAgICBibG9ja2VkVG86IFtdLFxuICAgICAgc2FtZVRhcmdldDogZmFsc2UsXG4gICAgICBkaWZmZXJlbnRUYXJnZXRzOiBmYWxzZVxuICAgIH0sIG9wdGlvbnMpO1xuICB9XG5cbiAgcHVibGljIGRlY29kZShyZXN1bHQ6IEF0dGFjaEVuZXJneVJlc3VsdFR5cGUgfCBudWxsLCBzdGF0ZTogU3RhdGUpOiBDYXJkQXNzaWduW10gfCBudWxsIHtcbiAgICBpZiAocmVzdWx0ID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gcmVzdWx0OyAgLy8gb3BlcmF0aW9uIGNhbmNlbGxlZFxuICAgIH1cbiAgICBjb25zdCBwbGF5ZXIgPSBzdGF0ZS5wbGF5ZXJzLmZpbmQocCA9PiBwLmlkID09PSB0aGlzLnBsYXllcklkKTtcbiAgICBpZiAocGxheWVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBHYW1lRXJyb3IoR2FtZU1lc3NhZ2UuSU5WQUxJRF9QUk9NUFRfUkVTVUxUKTtcbiAgICB9XG4gICAgY29uc3QgdHJhbnNmZXJzOiBDYXJkQXNzaWduW10gPSBbXTtcbiAgICByZXN1bHQuZm9yRWFjaCh0ID0+IHtcbiAgICAgIGNvbnN0IGNhcmRMaXN0ID0gdGhpcy5jYXJkTGlzdDtcbiAgICAgIGNvbnN0IGNhcmQgPSBjYXJkTGlzdC5jYXJkc1t0LmluZGV4XTtcbiAgICAgIHRyYW5zZmVycy5wdXNoKHsgdG86IHQudG8sIGNhcmQgfSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRyYW5zZmVycztcbiAgfVxuXG4gIHB1YmxpYyB2YWxpZGF0ZShyZXN1bHQ6IENhcmRBc3NpZ25bXSB8IG51bGwpOiBib29sZWFuIHtcbiAgICBpZiAocmVzdWx0ID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gdGhpcy5vcHRpb25zLmFsbG93Q2FuY2VsOyAgLy8gb3BlcmF0aW9uIGNhbmNlbGxlZFxuICAgIH1cbiAgICBpZiAocmVzdWx0Lmxlbmd0aCA8IHRoaXMub3B0aW9ucy5taW4gfHwgcmVzdWx0Lmxlbmd0aCA+IHRoaXMub3B0aW9ucy5tYXgpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiBhbGwgdGFyZ2V0cyBhcmUgdGhlIHNhbWVcbiAgICBpZiAodGhpcy5vcHRpb25zLnNhbWVUYXJnZXQgJiYgcmVzdWx0Lmxlbmd0aCA+IDEpIHtcbiAgICAgIGNvbnN0IHQgPSByZXN1bHRbMF0udG87XG4gICAgICBjb25zdCBkaWZmZXJlbnQgPSByZXN1bHQuc29tZShyID0+IHtcbiAgICAgICAgcmV0dXJuIHIudG8ucGxheWVyICE9PSB0LnBsYXllclxuICAgICAgICAgIHx8IHIudG8uc2xvdCAhPT0gdC5zbG90XG4gICAgICAgICAgfHwgci50by5pbmRleCAhPT0gdC5pbmRleDtcbiAgICAgIH0pO1xuICAgICAgaWYgKGRpZmZlcmVudCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgYWxsIHNlbGVjdGVkIHRhcmdldHMgYXJlIGRpZmZlcmVudFxuICAgIGlmICh0aGlzLm9wdGlvbnMuZGlmZmVyZW50VGFyZ2V0cyAmJiByZXN1bHQubGVuZ3RoID4gMSkge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXN1bHQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgdCA9IHJlc3VsdFtpXS50bztcbiAgICAgICAgY29uc3QgaW5kZXggPSByZXN1bHQuZmluZEluZGV4KHIgPT4ge1xuICAgICAgICAgIHJldHVybiByLnRvLnBsYXllciA9PT0gdC5wbGF5ZXJcbiAgICAgICAgICAgICYmIHIudG8uc2xvdCA9PT0gdC5zbG90XG4gICAgICAgICAgICAmJiByLnRvLmluZGV4ID09PSB0LmluZGV4O1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGluZGV4ICE9PSBpKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdC5ldmVyeShyID0+IHIuY2FyZCAhPT0gdW5kZWZpbmVkKTtcbiAgfVxuXG59XG4iXX0=