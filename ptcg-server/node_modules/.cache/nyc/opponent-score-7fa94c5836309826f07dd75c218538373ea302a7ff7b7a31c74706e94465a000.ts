"use strict";function cov_6177j39y0(){var path="/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/simple-bot/state-score/opponent-score.ts";var hash="b4c9cc50e09a4fa4d07490949bc0f93a240ad1b3";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/simple-bot/state-score/opponent-score.ts",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:62}},"1":{start:{line:3,column:0},end:{line:3,column:31}},"2":{start:{line:4,column:15},end:{line:4,column:36}},"3":{start:{line:5,column:16},end:{line:5,column:34}},"4":{start:{line:8,column:23},end:{line:8,column:54}},"5":{start:{line:9,column:25},end:{line:9,column:69}},"6":{start:{line:10,column:23},end:{line:10,column:51}},"7":{start:{line:11,column:20},end:{line:11,column:21}},"8":{start:{line:13,column:8},end:{line:13,column:58}},"9":{start:{line:15,column:8},end:{line:15,column:58}},"10":{start:{line:17,column:29},end:{line:17,column:76}},"11":{start:{line:17,column:55},end:{line:17,column:75}},"12":{start:{line:18,column:8},end:{line:20,column:9}},"13":{start:{line:19,column:12},end:{line:19,column:39}},"14":{start:{line:22,column:31},end:{line:22,column:98}},"15":{start:{line:22,column:64},end:{line:22,column:97}},"16":{start:{line:23,column:8},end:{line:25,column:9}},"17":{start:{line:24,column:12},end:{line:24,column:43}},"18":{start:{line:26,column:8},end:{line:30,column:11}},"19":{start:{line:27,column:29},end:{line:27,column:87}},"20":{start:{line:27,column:56},end:{line:27,column:86}},"21":{start:{line:28,column:12},end:{line:28,column:53}},"22":{start:{line:29,column:12},end:{line:29,column:58}},"23":{start:{line:31,column:8},end:{line:31,column:21}},"24":{start:{line:34,column:0},end:{line:34,column:38}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:7,column:4},end:{line:7,column:5}},loc:{start:{line:7,column:30},end:{line:32,column:5}},line:7},"1":{name:"(anonymous_1)",decl:{start:{line:17,column:50},end:{line:17,column:51}},loc:{start:{line:17,column:55},end:{line:17,column:75}},line:17},"2":{name:"(anonymous_2)",decl:{start:{line:22,column:59},end:{line:22,column:60}},loc:{start:{line:22,column:64},end:{line:22,column:97}},line:22},"3":{name:"(anonymous_3)",decl:{start:{line:26,column:62},end:{line:26,column:63}},loc:{start:{line:26,column:74},end:{line:30,column:9}},line:26},"4":{name:"(anonymous_4)",decl:{start:{line:27,column:51},end:{line:27,column:52}},loc:{start:{line:27,column:56},end:{line:27,column:86}},line:27}},branchMap:{"0":{loc:{start:{line:18,column:8},end:{line:20,column:9}},type:"if",locations:[{start:{line:18,column:8},end:{line:20,column:9}},{start:{line:18,column:8},end:{line:20,column:9}}],line:18},"1":{loc:{start:{line:23,column:8},end:{line:25,column:9}},type:"if",locations:[{start:{line:23,column:8},end:{line:25,column:9}},{start:{line:23,column:8},end:{line:25,column:9}}],line:23}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0},b:{"0":[0,0],"1":[0,0]},inputSourceMap:{version:3,file:"/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/simple-bot/state-score/opponent-score.ts",sources:["/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/simple-bot/state-score/opponent-score.ts"],names:[],mappings:";;;AAAA,qCAAuE;AACvE,mCAAsC;AAGtC,MAAa,aAAc,SAAQ,mBAAW;IAErC,QAAQ,CAAC,KAAY,EAAE,QAAgB;QAC5C,MAAM,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;QAC/C,MAAM,QAAQ,GAAG,iBAAU,CAAC,WAAW,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;QACvD,MAAM,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,QAAQ,CAAC;QAE5C,IAAI,KAAK,GAAG,CAAC,CAAC;QAEd,sCAAsC;QACtC,KAAK,IAAI,MAAM,CAAC,IAAI,GAAG,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;QAElD,sCAAsC;QACtC,KAAK,IAAI,MAAM,CAAC,IAAI,GAAG,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;QAElD,qCAAqC;QACrC,MAAM,YAAY,GAAG,QAAQ,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC;QACrE,IAAI,YAAY,EAAE;YAChB,KAAK,IAAI,MAAM,CAAC,UAAU,CAAC;SAC5B;QAED,2CAA2C;QAC3C,MAAM,cAAc,GAAG,QAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,YAAY,iBAAU,CAAC,CAAC,CAAC;QACpF,IAAI,cAAc,EAAE;YAClB,KAAK,IAAI,MAAM,CAAC,cAAc,CAAC;SAChC;QAED,QAAQ,CAAC,cAAc,CAAC,iBAAU,CAAC,UAAU,EAAE,QAAQ,CAAC,EAAE;YACxD,MAAM,QAAQ,GAAG,QAAQ,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,YAAY,iBAAU,CAAC,CAAC;YACrE,KAAK,IAAI,MAAM,CAAC,MAAM,GAAG,QAAQ,CAAC,MAAM,CAAC;YACzC,KAAK,IAAI,MAAM,CAAC,KAAK,GAAG,QAAQ,CAAC,KAAK,CAAC,MAAM,CAAC;QAChD,CAAC,CAAC,CAAC;QAEH,OAAO,KAAK,CAAC;IACf,CAAC;CAEF;AApCD,sCAoCC",sourcesContent:["import { State, StateUtils, EnergyCard, PlayerType } from '../../game';\nimport { SimpleScore } from './score';\n\n\nexport class OpponentScore extends SimpleScore {\n\n  public getScore(state: State, playerId: number): number {\n    const player = this.getPlayer(state, playerId);\n    const opponent = StateUtils.getOpponent(state, player);\n    const scores = this.options.scores.opponent;\n\n    let score = 0;\n\n    // for each card in the opponents deck\n    score += scores.deck * opponent.deck.cards.length;\n\n    // for each card in the opponents hand\n    score += scores.hand * opponent.hand.cards.length;\n\n    // bonus if opponent's bench is empty\n    const isBenchEmpty = opponent.bench.every(b => b.cards.length === 0);\n    if (isBenchEmpty) {\n      score += scores.emptyBench;\n    }\n\n    // Opponent's active has no attached energy\n    const noActiveEnergy = opponent.active.cards.every(c => !(c instanceof EnergyCard));\n    if (noActiveEnergy) {\n      score += scores.noActiveEnergy;\n    }\n\n    opponent.forEachPokemon(PlayerType.TOP_PLAYER, cardList => {\n      const energies = cardList.cards.filter(c => c instanceof EnergyCard);\n      score += scores.energy * energies.length;\n      score += scores.board * cardList.cards.length;\n    });\n\n    return score;\n  }\n\n}\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b4c9cc50e09a4fa4d07490949bc0f93a240ad1b3"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_6177j39y0=function(){return actualCoverage;};}return actualCoverage;}cov_6177j39y0();cov_6177j39y0().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_6177j39y0().s[1]++;exports.OpponentScore=void 0;const game_1=(cov_6177j39y0().s[2]++,require("../../game"));const score_1=(cov_6177j39y0().s[3]++,require("./score"));class OpponentScore extends(score_1.SimpleScore){getScore(state,playerId){cov_6177j39y0().f[0]++;const player=(cov_6177j39y0().s[4]++,this.getPlayer(state,playerId));const opponent=(cov_6177j39y0().s[5]++,game_1.StateUtils.getOpponent(state,player));const scores=(cov_6177j39y0().s[6]++,this.options.scores.opponent);let score=(cov_6177j39y0().s[7]++,0);// for each card in the opponents deck
cov_6177j39y0().s[8]++;score+=scores.deck*opponent.deck.cards.length;// for each card in the opponents hand
cov_6177j39y0().s[9]++;score+=scores.hand*opponent.hand.cards.length;// bonus if opponent's bench is empty
const isBenchEmpty=(cov_6177j39y0().s[10]++,opponent.bench.every(b=>{cov_6177j39y0().f[1]++;cov_6177j39y0().s[11]++;return b.cards.length===0;}));cov_6177j39y0().s[12]++;if(isBenchEmpty){cov_6177j39y0().b[0][0]++;cov_6177j39y0().s[13]++;score+=scores.emptyBench;}else{cov_6177j39y0().b[0][1]++;}// Opponent's active has no attached energy
const noActiveEnergy=(cov_6177j39y0().s[14]++,opponent.active.cards.every(c=>{cov_6177j39y0().f[2]++;cov_6177j39y0().s[15]++;return!(c instanceof game_1.EnergyCard);}));cov_6177j39y0().s[16]++;if(noActiveEnergy){cov_6177j39y0().b[1][0]++;cov_6177j39y0().s[17]++;score+=scores.noActiveEnergy;}else{cov_6177j39y0().b[1][1]++;}cov_6177j39y0().s[18]++;opponent.forEachPokemon(game_1.PlayerType.TOP_PLAYER,cardList=>{cov_6177j39y0().f[3]++;const energies=(cov_6177j39y0().s[19]++,cardList.cards.filter(c=>{cov_6177j39y0().f[4]++;cov_6177j39y0().s[20]++;return c instanceof game_1.EnergyCard;}));cov_6177j39y0().s[21]++;score+=scores.energy*energies.length;cov_6177j39y0().s[22]++;score+=scores.board*cardList.cards.length;});cov_6177j39y0().s[23]++;return score;}}cov_6177j39y0().s[24]++;exports.OpponentScore=OpponentScore;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2pvZW15ZXJzY291Z2gvRG9jdW1lbnRzL0dpdEh1Yi9wdGNnLWVwc2QvcHRjZy1zZXJ2ZXIvc3JjL3NpbXBsZS1ib3Qvc3RhdGUtc2NvcmUvb3Bwb25lbnQtc2NvcmUudHMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9qb2VteWVyc2NvdWdoL0RvY3VtZW50cy9HaXRIdWIvcHRjZy1lcHNkL3B0Y2ctc2VydmVyL3NyYy9zaW1wbGUtYm90L3N0YXRlLXNjb3JlL29wcG9uZW50LXNjb3JlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLHFDQUF1RTtBQUN2RSxtQ0FBc0M7QUFHdEMsTUFBYSxhQUFjLFNBQVEsbUJBQVc7SUFFckMsUUFBUSxDQUFDLEtBQVksRUFBRSxRQUFnQjtRQUM1QyxNQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssRUFBRSxRQUFRLENBQUMsQ0FBQztRQUMvQyxNQUFNLFFBQVEsR0FBRyxpQkFBVSxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFDdkQsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDO1FBRTVDLElBQUksS0FBSyxHQUFHLENBQUMsQ0FBQztRQUVkLHNDQUFzQztRQUN0QyxLQUFLLElBQUksTUFBTSxDQUFDLElBQUksR0FBRyxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUM7UUFFbEQsc0NBQXNDO1FBQ3RDLEtBQUssSUFBSSxNQUFNLENBQUMsSUFBSSxHQUFHLFFBQVEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQztRQUVsRCxxQ0FBcUM7UUFDckMsTUFBTSxZQUFZLEdBQUcsUUFBUSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLE1BQU0sS0FBSyxDQUFDLENBQUMsQ0FBQztRQUNyRSxJQUFJLFlBQVksRUFBRTtZQUNoQixLQUFLLElBQUksTUFBTSxDQUFDLFVBQVUsQ0FBQztTQUM1QjtRQUVELDJDQUEyQztRQUMzQyxNQUFNLGNBQWMsR0FBRyxRQUFRLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxZQUFZLGlCQUFVLENBQUMsQ0FBQyxDQUFDO1FBQ3BGLElBQUksY0FBYyxFQUFFO1lBQ2xCLEtBQUssSUFBSSxNQUFNLENBQUMsY0FBYyxDQUFDO1NBQ2hDO1FBRUQsUUFBUSxDQUFDLGNBQWMsQ0FBQyxpQkFBVSxDQUFDLFVBQVUsRUFBRSxRQUFRLENBQUMsRUFBRTtZQUN4RCxNQUFNLFFBQVEsR0FBRyxRQUFRLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsWUFBWSxpQkFBVSxDQUFDLENBQUM7WUFDckUsS0FBSyxJQUFJLE1BQU0sQ0FBQyxNQUFNLEdBQUcsUUFBUSxDQUFDLE1BQU0sQ0FBQztZQUN6QyxLQUFLLElBQUksTUFBTSxDQUFDLEtBQUssR0FBRyxRQUFRLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQztRQUNoRCxDQUFDLENBQUMsQ0FBQztRQUVILE9BQU8sS0FBSyxDQUFDO0lBQ2YsQ0FBQztDQUVGO0FBcENELHNDQW9DQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFN0YXRlLCBTdGF0ZVV0aWxzLCBFbmVyZ3lDYXJkLCBQbGF5ZXJUeXBlIH0gZnJvbSAnLi4vLi4vZ2FtZSc7XG5pbXBvcnQgeyBTaW1wbGVTY29yZSB9IGZyb20gJy4vc2NvcmUnO1xuXG5cbmV4cG9ydCBjbGFzcyBPcHBvbmVudFNjb3JlIGV4dGVuZHMgU2ltcGxlU2NvcmUge1xuXG4gIHB1YmxpYyBnZXRTY29yZShzdGF0ZTogU3RhdGUsIHBsYXllcklkOiBudW1iZXIpOiBudW1iZXIge1xuICAgIGNvbnN0IHBsYXllciA9IHRoaXMuZ2V0UGxheWVyKHN0YXRlLCBwbGF5ZXJJZCk7XG4gICAgY29uc3Qgb3Bwb25lbnQgPSBTdGF0ZVV0aWxzLmdldE9wcG9uZW50KHN0YXRlLCBwbGF5ZXIpO1xuICAgIGNvbnN0IHNjb3JlcyA9IHRoaXMub3B0aW9ucy5zY29yZXMub3Bwb25lbnQ7XG5cbiAgICBsZXQgc2NvcmUgPSAwO1xuXG4gICAgLy8gZm9yIGVhY2ggY2FyZCBpbiB0aGUgb3Bwb25lbnRzIGRlY2tcbiAgICBzY29yZSArPSBzY29yZXMuZGVjayAqIG9wcG9uZW50LmRlY2suY2FyZHMubGVuZ3RoO1xuXG4gICAgLy8gZm9yIGVhY2ggY2FyZCBpbiB0aGUgb3Bwb25lbnRzIGhhbmRcbiAgICBzY29yZSArPSBzY29yZXMuaGFuZCAqIG9wcG9uZW50LmhhbmQuY2FyZHMubGVuZ3RoO1xuXG4gICAgLy8gYm9udXMgaWYgb3Bwb25lbnQncyBiZW5jaCBpcyBlbXB0eVxuICAgIGNvbnN0IGlzQmVuY2hFbXB0eSA9IG9wcG9uZW50LmJlbmNoLmV2ZXJ5KGIgPT4gYi5jYXJkcy5sZW5ndGggPT09IDApO1xuICAgIGlmIChpc0JlbmNoRW1wdHkpIHtcbiAgICAgIHNjb3JlICs9IHNjb3Jlcy5lbXB0eUJlbmNoO1xuICAgIH1cblxuICAgIC8vIE9wcG9uZW50J3MgYWN0aXZlIGhhcyBubyBhdHRhY2hlZCBlbmVyZ3lcbiAgICBjb25zdCBub0FjdGl2ZUVuZXJneSA9IG9wcG9uZW50LmFjdGl2ZS5jYXJkcy5ldmVyeShjID0+ICEoYyBpbnN0YW5jZW9mIEVuZXJneUNhcmQpKTtcbiAgICBpZiAobm9BY3RpdmVFbmVyZ3kpIHtcbiAgICAgIHNjb3JlICs9IHNjb3Jlcy5ub0FjdGl2ZUVuZXJneTtcbiAgICB9XG5cbiAgICBvcHBvbmVudC5mb3JFYWNoUG9rZW1vbihQbGF5ZXJUeXBlLlRPUF9QTEFZRVIsIGNhcmRMaXN0ID0+IHtcbiAgICAgIGNvbnN0IGVuZXJnaWVzID0gY2FyZExpc3QuY2FyZHMuZmlsdGVyKGMgPT4gYyBpbnN0YW5jZW9mIEVuZXJneUNhcmQpO1xuICAgICAgc2NvcmUgKz0gc2NvcmVzLmVuZXJneSAqIGVuZXJnaWVzLmxlbmd0aDtcbiAgICAgIHNjb3JlICs9IHNjb3Jlcy5ib2FyZCAqIGNhcmRMaXN0LmNhcmRzLmxlbmd0aDtcbiAgICB9KTtcblxuICAgIHJldHVybiBzY29yZTtcbiAgfVxuXG59XG4iXX0=
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qb2VteWVyc2NvdWdoL0RvY3VtZW50cy9HaXRIdWIvcHRjZy1lcHNkL3B0Y2ctc2VydmVyL3NyYy9zaW1wbGUtYm90L3N0YXRlLXNjb3JlL29wcG9uZW50LXNjb3JlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJxbk1BbUJJOzZOQW5CSixLQUFBLENBQUEsTUFBQSx5QkFBQSxPQUFBLENBQUEsWUFBQSxDQUFBLENBQUEsQ0FDQSxLQUFBLENBQUEsT0FBQSx5QkFBQSxPQUFBLENBQUEsU0FBQSxDQUFBLENBQUEsQ0FHQSxLQUFhLENBQUEsYUFBYixTQUFtQyxPQUFBLENBQUEsV0FBbkMsQ0FBOEMsQ0FFckMsUUFBUSxDQUFDLEtBQUQsQ0FBZSxRQUFmLENBQStCLHdCQUM1QyxLQUFNLENBQUEsTUFBTSx5QkFBRyxLQUFLLFNBQUwsQ0FBZSxLQUFmLENBQXNCLFFBQXRCLENBQUgsQ0FBWixDQUNBLEtBQU0sQ0FBQSxRQUFRLHlCQUFHLE1BQUEsQ0FBQSxVQUFBLENBQVcsV0FBWCxDQUF1QixLQUF2QixDQUE4QixNQUE5QixDQUFILENBQWQsQ0FDQSxLQUFNLENBQUEsTUFBTSx5QkFBRyxLQUFLLE9BQUwsQ0FBYSxNQUFiLENBQW9CLFFBQXZCLENBQVosQ0FFQSxHQUFJLENBQUEsS0FBSyx5QkFBRyxDQUFILENBQVQsQ0FFQTtBQVA0Qyx1QkFRNUMsS0FBSyxFQUFJLE1BQU0sQ0FBQyxJQUFQLENBQWMsUUFBUSxDQUFDLElBQVQsQ0FBYyxLQUFkLENBQW9CLE1BQTNDLENBRUE7QUFWNEMsdUJBVzVDLEtBQUssRUFBSSxNQUFNLENBQUMsSUFBUCxDQUFjLFFBQVEsQ0FBQyxJQUFULENBQWMsS0FBZCxDQUFvQixNQUEzQyxDQUVBO0FBQ0EsS0FBTSxDQUFBLFlBQVksMEJBQUcsUUFBUSxDQUFDLEtBQVQsQ0FBZSxLQUFmLENBQXFCLENBQUMsRUFBSSxzREFBQSxDQUFBLENBQUMsQ0FBQyxLQUFGLENBQVEsTUFBUixHQUFtQixDQUFuQixDQUFvQixDQUE5QyxDQUFILENBQWxCLENBZDRDLHdCQWU1QyxHQUFJLFlBQUosQ0FBa0IsbURBQ2hCLEtBQUssRUFBSSxNQUFNLENBQUMsVUFBaEIsQ0FDRCxDQUZELGdDQUlBO0FBQ0EsS0FBTSxDQUFBLGNBQWMsMEJBQUcsUUFBUSxDQUFDLE1BQVQsQ0FBZ0IsS0FBaEIsQ0FBc0IsS0FBdEIsQ0FBNEIsQ0FBQyxFQUFJLHdEQUFFLENBQUMsV0FBWSxDQUFBLE1BQUEsQ0FBQSxVQUFmLEVBQTBCLENBQTNELENBQUgsQ0FBcEIsQ0FwQjRDLHdCQXFCNUMsR0FBSSxjQUFKLENBQW9CLG1EQUNsQixLQUFLLEVBQUksTUFBTSxDQUFDLGNBQWhCLENBQ0QsQ0FGRCxnQ0FyQjRDLHdCQXlCNUMsUUFBUSxDQUFDLGNBQVQsQ0FBd0IsTUFBQSxDQUFBLFVBQUEsQ0FBVyxVQUFuQyxDQUErQyxRQUFRLEVBQUcsd0JBQ3hELEtBQU0sQ0FBQSxRQUFRLDBCQUFHLFFBQVEsQ0FBQyxLQUFULENBQWUsTUFBZixDQUFzQixDQUFDLEVBQUksc0RBQUEsQ0FBQSxDQUFDLFdBQVksQ0FBQSxNQUFBLENBQUEsVUFBYixDQUF1QixDQUFsRCxDQUFILENBQWQsQ0FEd0Qsd0JBRXhELEtBQUssRUFBSSxNQUFNLENBQUMsTUFBUCxDQUFnQixRQUFRLENBQUMsTUFBbEMsQ0FGd0Qsd0JBR3hELEtBQUssRUFBSSxNQUFNLENBQUMsS0FBUCxDQUFlLFFBQVEsQ0FBQyxLQUFULENBQWUsTUFBdkMsQ0FDRCxDQUpELEVBekI0Qyx3QkErQjVDLE1BQU8sQ0FBQSxLQUFQLENBQ0QsQ0FsQzJDLEMsd0JBQTlDLE9BQUEsQ0FBQSxhQUFBLENBQUEsYUFBQSxDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU3RhdGUsIFN0YXRlVXRpbHMsIEVuZXJneUNhcmQsIFBsYXllclR5cGUgfSBmcm9tICcuLi8uLi9nYW1lJztcbmltcG9ydCB7IFNpbXBsZVNjb3JlIH0gZnJvbSAnLi9zY29yZSc7XG5cblxuZXhwb3J0IGNsYXNzIE9wcG9uZW50U2NvcmUgZXh0ZW5kcyBTaW1wbGVTY29yZSB7XG5cbiAgcHVibGljIGdldFNjb3JlKHN0YXRlOiBTdGF0ZSwgcGxheWVySWQ6IG51bWJlcik6IG51bWJlciB7XG4gICAgY29uc3QgcGxheWVyID0gdGhpcy5nZXRQbGF5ZXIoc3RhdGUsIHBsYXllcklkKTtcbiAgICBjb25zdCBvcHBvbmVudCA9IFN0YXRlVXRpbHMuZ2V0T3Bwb25lbnQoc3RhdGUsIHBsYXllcik7XG4gICAgY29uc3Qgc2NvcmVzID0gdGhpcy5vcHRpb25zLnNjb3Jlcy5vcHBvbmVudDtcblxuICAgIGxldCBzY29yZSA9IDA7XG5cbiAgICAvLyBmb3IgZWFjaCBjYXJkIGluIHRoZSBvcHBvbmVudHMgZGVja1xuICAgIHNjb3JlICs9IHNjb3Jlcy5kZWNrICogb3Bwb25lbnQuZGVjay5jYXJkcy5sZW5ndGg7XG5cbiAgICAvLyBmb3IgZWFjaCBjYXJkIGluIHRoZSBvcHBvbmVudHMgaGFuZFxuICAgIHNjb3JlICs9IHNjb3Jlcy5oYW5kICogb3Bwb25lbnQuaGFuZC5jYXJkcy5sZW5ndGg7XG5cbiAgICAvLyBib251cyBpZiBvcHBvbmVudCdzIGJlbmNoIGlzIGVtcHR5XG4gICAgY29uc3QgaXNCZW5jaEVtcHR5ID0gb3Bwb25lbnQuYmVuY2guZXZlcnkoYiA9PiBiLmNhcmRzLmxlbmd0aCA9PT0gMCk7XG4gICAgaWYgKGlzQmVuY2hFbXB0eSkge1xuICAgICAgc2NvcmUgKz0gc2NvcmVzLmVtcHR5QmVuY2g7XG4gICAgfVxuXG4gICAgLy8gT3Bwb25lbnQncyBhY3RpdmUgaGFzIG5vIGF0dGFjaGVkIGVuZXJneVxuICAgIGNvbnN0IG5vQWN0aXZlRW5lcmd5ID0gb3Bwb25lbnQuYWN0aXZlLmNhcmRzLmV2ZXJ5KGMgPT4gIShjIGluc3RhbmNlb2YgRW5lcmd5Q2FyZCkpO1xuICAgIGlmIChub0FjdGl2ZUVuZXJneSkge1xuICAgICAgc2NvcmUgKz0gc2NvcmVzLm5vQWN0aXZlRW5lcmd5O1xuICAgIH1cblxuICAgIG9wcG9uZW50LmZvckVhY2hQb2tlbW9uKFBsYXllclR5cGUuVE9QX1BMQVlFUiwgY2FyZExpc3QgPT4ge1xuICAgICAgY29uc3QgZW5lcmdpZXMgPSBjYXJkTGlzdC5jYXJkcy5maWx0ZXIoYyA9PiBjIGluc3RhbmNlb2YgRW5lcmd5Q2FyZCk7XG4gICAgICBzY29yZSArPSBzY29yZXMuZW5lcmd5ICogZW5lcmdpZXMubGVuZ3RoO1xuICAgICAgc2NvcmUgKz0gc2NvcmVzLmJvYXJkICogY2FyZExpc3QuY2FyZHMubGVuZ3RoO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHNjb3JlO1xuICB9XG5cbn1cbiJdfQ==