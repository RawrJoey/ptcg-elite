{"version":3,"file":"/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/game/serializer/generic.serializer.ts","sources":["/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/game/serializer/generic.serializer.ts"],"names":[],"mappings":";;;AAEA,MAAa,iBAAiB;IAK5B,YAAoB,YAAyB,EAAU,eAAuB;QAA1D,iBAAY,GAAZ,YAAY,CAAa;QAAU,oBAAe,GAAf,eAAe,CAAQ;QAC5E,IAAI,CAAC,KAAK,GAAG,CAAC,eAAe,CAAC,CAAC;QAC/B,IAAI,CAAC,OAAO,GAAG,CAAC,YAAY,CAAC,CAAC;IAChC,CAAC;IAEM,SAAS,CAAC,KAAQ;QACvB,MAAM,eAAe,GAAG,IAAI,CAAC,eAAe,CAAC;QAC7C,uBACE,KAAK,EAAE,eAAe,IAClB,KAAgB,EACpB;IACJ,CAAC;IAEM,WAAW,CAAC,IAAgB,EAAE,OAA0B;QAC7D,MAAM,QAAQ,GAAG,IAAI,IAAI,CAAC,YAAY,EAAE,CAAC;QACzC,OAAQ,IAAY,CAAC,KAAK,CAAC;QAC3B,OAAO,MAAM,CAAC,MAAM,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;IACvC,CAAC;CAEF;AAxBD,8CAwBC","sourcesContent":["import { SerializerContext, Serialized, Serializer } from './serializer.interface';\n\nexport class GenericSerializer<T extends Object> implements Serializer<T> {\n\n  public types: string[];\n  public classes: (new () => T)[];\n\n  constructor(private creatorClass: new () => T, private constructorName: string) {\n    this.types = [constructorName];\n    this.classes = [creatorClass];\n  }\n\n  public serialize(state: T): Serialized {\n    const constructorName = this.constructorName;\n    return {\n      _type: constructorName,\n      ...(state as Object)\n    };\n  }\n\n  public deserialize(data: Serialized, context: SerializerContext): T {\n    const instance = new this.creatorClass();\n    delete (data as any)._type;\n    return Object.assign(instance, data);\n  }\n\n}\n"]}