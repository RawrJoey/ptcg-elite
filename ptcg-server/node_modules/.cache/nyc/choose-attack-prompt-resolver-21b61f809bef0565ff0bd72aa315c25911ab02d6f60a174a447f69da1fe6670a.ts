"use strict";function cov_7e6txrg1s(){var path="/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/simple-bot/prompt-resolver/choose-attack-prompt-resolver.ts";var hash="388ee9c45d2363775515a88fc7debb69c51ba0a7";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/simple-bot/prompt-resolver/choose-attack-prompt-resolver.ts",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:62}},"1":{start:{line:3,column:0},end:{line:3,column:44}},"2":{start:{line:4,column:15},end:{line:4,column:36}},"3":{start:{line:5,column:26},end:{line:5,column:54}},"4":{start:{line:6,column:31},end:{line:6,column:87}},"5":{start:{line:9,column:8},end:{line:12,column:9}},"6":{start:{line:10,column:27},end:{line:10,column:66}},"7":{start:{line:11,column:12},end:{line:11,column:69}},"8":{start:{line:15,column:24},end:{line:15,column:26}},"9":{start:{line:18,column:23},end:{line:19,column:32}},"10":{start:{line:20,column:8},end:{line:29,column:11}},"11":{start:{line:21,column:12},end:{line:28,column:15}},"12":{start:{line:22,column:34},end:{line:24,column:18}},"13":{start:{line:23,column:20},end:{line:23,column:73}},"14":{start:{line:25,column:16},end:{line:27,column:17}},"15":{start:{line:26,column:20},end:{line:26,column:41}},"16":{start:{line:30,column:8},end:{line:35,column:11}},"17":{start:{line:31,column:12},end:{line:33,column:13}},"18":{start:{line:32,column:16},end:{line:32,column:43}},"19":{start:{line:34,column:12},end:{line:34,column:49}},"20":{start:{line:36,column:8},end:{line:36,column:54}},"21":{start:{line:39,column:0},end:{line:39,column:64}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:8,column:4},end:{line:8,column:5}},loc:{start:{line:8,column:41},end:{line:13,column:5}},line:8},"1":{name:"(anonymous_1)",decl:{start:{line:14,column:4},end:{line:14,column:5}},loc:{start:{line:14,column:39},end:{line:37,column:5}},line:14},"2":{name:"(anonymous_2)",decl:{start:{line:20,column:29},end:{line:20,column:30}},loc:{start:{line:20,column:46},end:{line:29,column:9}},line:20},"3":{name:"(anonymous_3)",decl:{start:{line:21,column:33},end:{line:21,column:34}},loc:{start:{line:21,column:43},end:{line:28,column:13}},line:21},"4":{name:"(anonymous_4)",decl:{start:{line:22,column:62},end:{line:22,column:63}},loc:{start:{line:22,column:67},end:{line:24,column:17}},line:22},"5":{name:"(anonymous_5)",decl:{start:{line:30,column:21},end:{line:30,column:22}},loc:{start:{line:30,column:31},end:{line:35,column:9}},line:30}},branchMap:{"0":{loc:{start:{line:9,column:8},end:{line:12,column:9}},type:"if",locations:[{start:{line:9,column:8},end:{line:12,column:9}},{start:{line:9,column:8},end:{line:12,column:9}}],line:9},"1":{loc:{start:{line:18,column:23},end:{line:19,column:32}},type:"cond-expr",locations:[{start:{line:19,column:14},end:{line:19,column:27}},{start:{line:19,column:30},end:{line:19,column:32}}],line:18},"2":{loc:{start:{line:23,column:27},end:{line:23,column:72}},type:"binary-expr",locations:[{start:{line:23,column:27},end:{line:23,column:44}},{start:{line:23,column:48},end:{line:23,column:72}}],line:23},"3":{loc:{start:{line:25,column:16},end:{line:27,column:17}},type:"if",locations:[{start:{line:25,column:16},end:{line:27,column:17}},{start:{line:25,column:16},end:{line:27,column:17}}],line:25},"4":{loc:{start:{line:25,column:20},end:{line:25,column:63}},type:"binary-expr",locations:[{start:{line:25,column:20},end:{line:25,column:30}},{start:{line:25,column:34},end:{line:25,column:63}}],line:25},"5":{loc:{start:{line:31,column:12},end:{line:33,column:13}},type:"if",locations:[{start:{line:31,column:12},end:{line:33,column:13}},{start:{line:31,column:12},end:{line:33,column:13}}],line:31},"6":{loc:{start:{line:36,column:15},end:{line:36,column:53}},type:"cond-expr",locations:[{start:{line:36,column:36},end:{line:36,column:46}},{start:{line:36,column:49},end:{line:36,column:53}}],line:36}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0]},inputSourceMap:{version:3,file:"/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/simple-bot/prompt-resolver/choose-attack-prompt-resolver.ts",sources:["/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/simple-bot/prompt-resolver/choose-attack-prompt-resolver.ts"],names:[],mappings:";;;AAAA,qCAAkG;AAClG,uDAAmD;AACnD,wFAAmF;AAGnF,MAAa,0BAA2B,SAAQ,gCAAc;IAErD,aAAa,CAAC,KAAY,EAAE,MAAc,EAAE,MAAmB;QACpE,IAAI,MAAM,YAAY,yCAAkB,EAAE;YACxC,MAAM,MAAM,GAAkB,IAAI,CAAC,mBAAmB,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;YACtE,OAAO,IAAI,0BAAmB,CAAC,MAAM,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC;SACnD;IACH,CAAC;IAEO,mBAAmB,CAAC,KAAY,EAAE,MAA0B;QAClE,MAAM,OAAO,GAAa,EAAE,CAAC;QAE7B,kEAAkE;QAClE,uDAAuD;QACvD,MAAM,MAAM,GAAa,KAAK,CAAC,KAAK,KAAK,gBAAS,CAAC,MAAM;YACvD,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;QAEvB,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,IAAI,EAAE,KAAK,EAAE,EAAE;YACnC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE;gBAC5B,MAAM,SAAS,GAAG,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE;oBAChD,OAAO,CAAC,CAAC,KAAK,KAAK,KAAK,IAAI,CAAC,CAAC,MAAM,KAAK,MAAM,CAAC,IAAI,CAAC;gBACvD,CAAC,CAAC,CAAC;gBACH,IAAI,CAAC,SAAS,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE;oBAC/C,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;iBACtB;YACH,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE;YACpB,IAAI,CAAC,CAAC,MAAM,KAAK,CAAC,CAAC,MAAM,EAAE;gBACzB,OAAO,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,MAAM,CAAC;aAC5B;YACD,OAAO,CAAC,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC;QACvC,CAAC,CAAC,CAAC;QAEH,OAAO,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;IAChD,CAAC;CAEF;AAtCD,gEAsCC",sourcesContent:["import { Player, State, Action, ResolvePromptAction, Prompt, Attack, GamePhase} from '../../game';\nimport { PromptResolver } from './prompt-resolver';\nimport { ChooseAttackPrompt } from '../../game/store/prompts/choose-attack-prompt';\n\n\nexport class ChooseAttackPromptResolver extends PromptResolver {\n\n  public resolvePrompt(state: State, player: Player, prompt: Prompt<any>): Action | undefined {\n    if (prompt instanceof ChooseAttackPrompt) {\n      const result: Attack | null = this.buildAttackToChoose(state, prompt);\n      return new ResolvePromptAction(prompt.id, result);\n    }\n  }\n\n  private buildAttackToChoose(state: State, prompt: ChooseAttackPrompt): Attack | null {\n    const attacks: Attack[] = [];\n\n    // Foul Play is banned, because when Zoroark meet's another Zoroak\n    // they would copy theirs attacks in the infinite loop.\n    const banned: string[] = state.phase === GamePhase.ATTACK\n      ? ['Foul Play'] : [];\n\n    prompt.cards.forEach((card, index) => {\n      card.attacks.forEach(attack => {\n        const isBlocked = prompt.options.blocked.some(b => {\n          return b.index === index && b.attack === attack.name;\n        });\n        if (!isBlocked && !banned.includes(attack.name)) {\n          attacks.push(attack);\n        }\n      });\n    });\n\n    attacks.sort((a, b) => {\n      if (a.damage !== b.damage) {\n        return b.damage - a.damage;\n      }\n      return b.cost.length - a.cost.length;\n    });\n\n    return attacks.length > 0 ? attacks[0] : null;\n  }\n\n}\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"388ee9c45d2363775515a88fc7debb69c51ba0a7"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_7e6txrg1s=function(){return actualCoverage;};}return actualCoverage;}cov_7e6txrg1s();cov_7e6txrg1s().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_7e6txrg1s().s[1]++;exports.ChooseAttackPromptResolver=void 0;const game_1=(cov_7e6txrg1s().s[2]++,require("../../game"));const prompt_resolver_1=(cov_7e6txrg1s().s[3]++,require("./prompt-resolver"));const choose_attack_prompt_1=(cov_7e6txrg1s().s[4]++,require("../../game/store/prompts/choose-attack-prompt"));class ChooseAttackPromptResolver extends(prompt_resolver_1.PromptResolver){resolvePrompt(state,player,prompt){cov_7e6txrg1s().f[0]++;cov_7e6txrg1s().s[5]++;if(prompt instanceof choose_attack_prompt_1.ChooseAttackPrompt){cov_7e6txrg1s().b[0][0]++;const result=(cov_7e6txrg1s().s[6]++,this.buildAttackToChoose(state,prompt));cov_7e6txrg1s().s[7]++;return new game_1.ResolvePromptAction(prompt.id,result);}else{cov_7e6txrg1s().b[0][1]++;}}buildAttackToChoose(state,prompt){cov_7e6txrg1s().f[1]++;const attacks=(cov_7e6txrg1s().s[8]++,[]);// Foul Play is banned, because when Zoroark meet's another Zoroak
// they would copy theirs attacks in the infinite loop.
const banned=(cov_7e6txrg1s().s[9]++,state.phase===game_1.GamePhase.ATTACK?(cov_7e6txrg1s().b[1][0]++,['Foul Play']):(cov_7e6txrg1s().b[1][1]++,[]));cov_7e6txrg1s().s[10]++;prompt.cards.forEach((card,index)=>{cov_7e6txrg1s().f[2]++;cov_7e6txrg1s().s[11]++;card.attacks.forEach(attack=>{cov_7e6txrg1s().f[3]++;const isBlocked=(cov_7e6txrg1s().s[12]++,prompt.options.blocked.some(b=>{cov_7e6txrg1s().f[4]++;cov_7e6txrg1s().s[13]++;return(cov_7e6txrg1s().b[2][0]++,b.index===index)&&(cov_7e6txrg1s().b[2][1]++,b.attack===attack.name);}));cov_7e6txrg1s().s[14]++;if((cov_7e6txrg1s().b[4][0]++,!isBlocked)&&(cov_7e6txrg1s().b[4][1]++,!banned.includes(attack.name))){cov_7e6txrg1s().b[3][0]++;cov_7e6txrg1s().s[15]++;attacks.push(attack);}else{cov_7e6txrg1s().b[3][1]++;}});});cov_7e6txrg1s().s[16]++;attacks.sort((a,b)=>{cov_7e6txrg1s().f[5]++;cov_7e6txrg1s().s[17]++;if(a.damage!==b.damage){cov_7e6txrg1s().b[5][0]++;cov_7e6txrg1s().s[18]++;return b.damage-a.damage;}else{cov_7e6txrg1s().b[5][1]++;}cov_7e6txrg1s().s[19]++;return b.cost.length-a.cost.length;});cov_7e6txrg1s().s[20]++;return attacks.length>0?(cov_7e6txrg1s().b[6][0]++,attacks[0]):(cov_7e6txrg1s().b[6][1]++,null);}}cov_7e6txrg1s().s[21]++;exports.ChooseAttackPromptResolver=ChooseAttackPromptResolver;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2pvZW15ZXJzY291Z2gvRG9jdW1lbnRzL0dpdEh1Yi9wdGNnLWVwc2QvcHRjZy1zZXJ2ZXIvc3JjL3NpbXBsZS1ib3QvcHJvbXB0LXJlc29sdmVyL2Nob29zZS1hdHRhY2stcHJvbXB0LXJlc29sdmVyLnRzIiwic291cmNlcyI6WyIvVXNlcnMvam9lbXllcnNjb3VnaC9Eb2N1bWVudHMvR2l0SHViL3B0Y2ctZXBzZC9wdGNnLXNlcnZlci9zcmMvc2ltcGxlLWJvdC9wcm9tcHQtcmVzb2x2ZXIvY2hvb3NlLWF0dGFjay1wcm9tcHQtcmVzb2x2ZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEscUNBQWtHO0FBQ2xHLHVEQUFtRDtBQUNuRCx3RkFBbUY7QUFHbkYsTUFBYSwwQkFBMkIsU0FBUSxnQ0FBYztJQUVyRCxhQUFhLENBQUMsS0FBWSxFQUFFLE1BQWMsRUFBRSxNQUFtQjtRQUNwRSxJQUFJLE1BQU0sWUFBWSx5Q0FBa0IsRUFBRTtZQUN4QyxNQUFNLE1BQU0sR0FBa0IsSUFBSSxDQUFDLG1CQUFtQixDQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsQ0FBQztZQUN0RSxPQUFPLElBQUksMEJBQW1CLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxNQUFNLENBQUMsQ0FBQztTQUNuRDtJQUNILENBQUM7SUFFTyxtQkFBbUIsQ0FBQyxLQUFZLEVBQUUsTUFBMEI7UUFDbEUsTUFBTSxPQUFPLEdBQWEsRUFBRSxDQUFDO1FBRTdCLGtFQUFrRTtRQUNsRSx1REFBdUQ7UUFDdkQsTUFBTSxNQUFNLEdBQWEsS0FBSyxDQUFDLEtBQUssS0FBSyxnQkFBUyxDQUFDLE1BQU07WUFDdkQsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztRQUV2QixNQUFNLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksRUFBRSxLQUFLLEVBQUUsRUFBRTtZQUNuQyxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsRUFBRTtnQkFDNUIsTUFBTSxTQUFTLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFO29CQUNoRCxPQUFPLENBQUMsQ0FBQyxLQUFLLEtBQUssS0FBSyxJQUFJLENBQUMsQ0FBQyxNQUFNLEtBQUssTUFBTSxDQUFDLElBQUksQ0FBQztnQkFDdkQsQ0FBQyxDQUFDLENBQUM7Z0JBQ0gsSUFBSSxDQUFDLFNBQVMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFO29CQUMvQyxPQUFPLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO2lCQUN0QjtZQUNILENBQUMsQ0FBQyxDQUFDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7UUFFSCxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQ3BCLElBQUksQ0FBQyxDQUFDLE1BQU0sS0FBSyxDQUFDLENBQUMsTUFBTSxFQUFFO2dCQUN6QixPQUFPLENBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQzthQUM1QjtZQUNELE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUM7UUFDdkMsQ0FBQyxDQUFDLENBQUM7UUFFSCxPQUFPLE9BQU8sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQztJQUNoRCxDQUFDO0NBRUY7QUF0Q0QsZ0VBc0NDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGxheWVyLCBTdGF0ZSwgQWN0aW9uLCBSZXNvbHZlUHJvbXB0QWN0aW9uLCBQcm9tcHQsIEF0dGFjaywgR2FtZVBoYXNlfSBmcm9tICcuLi8uLi9nYW1lJztcbmltcG9ydCB7IFByb21wdFJlc29sdmVyIH0gZnJvbSAnLi9wcm9tcHQtcmVzb2x2ZXInO1xuaW1wb3J0IHsgQ2hvb3NlQXR0YWNrUHJvbXB0IH0gZnJvbSAnLi4vLi4vZ2FtZS9zdG9yZS9wcm9tcHRzL2Nob29zZS1hdHRhY2stcHJvbXB0JztcblxuXG5leHBvcnQgY2xhc3MgQ2hvb3NlQXR0YWNrUHJvbXB0UmVzb2x2ZXIgZXh0ZW5kcyBQcm9tcHRSZXNvbHZlciB7XG5cbiAgcHVibGljIHJlc29sdmVQcm9tcHQoc3RhdGU6IFN0YXRlLCBwbGF5ZXI6IFBsYXllciwgcHJvbXB0OiBQcm9tcHQ8YW55Pik6IEFjdGlvbiB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKHByb21wdCBpbnN0YW5jZW9mIENob29zZUF0dGFja1Byb21wdCkge1xuICAgICAgY29uc3QgcmVzdWx0OiBBdHRhY2sgfCBudWxsID0gdGhpcy5idWlsZEF0dGFja1RvQ2hvb3NlKHN0YXRlLCBwcm9tcHQpO1xuICAgICAgcmV0dXJuIG5ldyBSZXNvbHZlUHJvbXB0QWN0aW9uKHByb21wdC5pZCwgcmVzdWx0KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGJ1aWxkQXR0YWNrVG9DaG9vc2Uoc3RhdGU6IFN0YXRlLCBwcm9tcHQ6IENob29zZUF0dGFja1Byb21wdCk6IEF0dGFjayB8IG51bGwge1xuICAgIGNvbnN0IGF0dGFja3M6IEF0dGFja1tdID0gW107XG5cbiAgICAvLyBGb3VsIFBsYXkgaXMgYmFubmVkLCBiZWNhdXNlIHdoZW4gWm9yb2FyayBtZWV0J3MgYW5vdGhlciBab3JvYWtcbiAgICAvLyB0aGV5IHdvdWxkIGNvcHkgdGhlaXJzIGF0dGFja3MgaW4gdGhlIGluZmluaXRlIGxvb3AuXG4gICAgY29uc3QgYmFubmVkOiBzdHJpbmdbXSA9IHN0YXRlLnBoYXNlID09PSBHYW1lUGhhc2UuQVRUQUNLXG4gICAgICA/IFsnRm91bCBQbGF5J10gOiBbXTtcblxuICAgIHByb21wdC5jYXJkcy5mb3JFYWNoKChjYXJkLCBpbmRleCkgPT4ge1xuICAgICAgY2FyZC5hdHRhY2tzLmZvckVhY2goYXR0YWNrID0+IHtcbiAgICAgICAgY29uc3QgaXNCbG9ja2VkID0gcHJvbXB0Lm9wdGlvbnMuYmxvY2tlZC5zb21lKGIgPT4ge1xuICAgICAgICAgIHJldHVybiBiLmluZGV4ID09PSBpbmRleCAmJiBiLmF0dGFjayA9PT0gYXR0YWNrLm5hbWU7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIWlzQmxvY2tlZCAmJiAhYmFubmVkLmluY2x1ZGVzKGF0dGFjay5uYW1lKSkge1xuICAgICAgICAgIGF0dGFja3MucHVzaChhdHRhY2spO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGF0dGFja3Muc29ydCgoYSwgYikgPT4ge1xuICAgICAgaWYgKGEuZGFtYWdlICE9PSBiLmRhbWFnZSkge1xuICAgICAgICByZXR1cm4gYi5kYW1hZ2UgLSBhLmRhbWFnZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBiLmNvc3QubGVuZ3RoIC0gYS5jb3N0Lmxlbmd0aDtcbiAgICB9KTtcblxuICAgIHJldHVybiBhdHRhY2tzLmxlbmd0aCA+IDAgPyBhdHRhY2tzWzBdIDogbnVsbDtcbiAgfVxuXG59XG4iXX0=
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qb2VteWVyc2NvdWdoL0RvY3VtZW50cy9HaXRIdWIvcHRjZy1lcHNkL3B0Y2ctc2VydmVyL3NyYy9zaW1wbGUtYm90L3Byb21wdC1yZXNvbHZlci9jaG9vc2UtYXR0YWNrLXByb21wdC1yZXNvbHZlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiMGhQQWlCSTswT0FqQkosS0FBQSxDQUFBLE1BQUEseUJBQUEsT0FBQSxDQUFBLFlBQUEsQ0FBQSxDQUFBLENBQ0EsS0FBQSxDQUFBLGlCQUFBLHlCQUFBLE9BQUEsQ0FBQSxtQkFBQSxDQUFBLENBQUEsQ0FDQSxLQUFBLENBQUEsc0JBQUEseUJBQUEsT0FBQSxDQUFBLCtDQUFBLENBQUEsQ0FBQSxDQUdBLEtBQWEsQ0FBQSwwQkFBYixTQUFnRCxpQkFBQSxDQUFBLGNBQWhELENBQThELENBRXJELGFBQWEsQ0FBQyxLQUFELENBQWUsTUFBZixDQUErQixNQUEvQixDQUFrRCwrQ0FDcEUsR0FBSSxNQUFNLFdBQVksQ0FBQSxzQkFBQSxDQUFBLGtCQUF0QixDQUEwQywyQkFDeEMsS0FBTSxDQUFBLE1BQU0seUJBQWtCLEtBQUssbUJBQUwsQ0FBeUIsS0FBekIsQ0FBZ0MsTUFBaEMsQ0FBbEIsQ0FBWixDQUR3Qyx1QkFFeEMsTUFBTyxJQUFJLENBQUEsTUFBQSxDQUFBLG1CQUFKLENBQXdCLE1BQU0sQ0FBQyxFQUEvQixDQUFtQyxNQUFuQyxDQUFQLENBQ0QsQ0FIRCxnQ0FJRCxDQUVPLG1CQUFtQixDQUFDLEtBQUQsQ0FBZSxNQUFmLENBQXlDLHdCQUNsRSxLQUFNLENBQUEsT0FBTyx5QkFBYSxFQUFiLENBQWIsQ0FFQTtBQUNBO0FBQ0EsS0FBTSxDQUFBLE1BQU0seUJBQWEsS0FBSyxDQUFDLEtBQU4sR0FBZ0IsTUFBQSxDQUFBLFNBQUEsQ0FBVSxNQUExQiw0QkFDckIsQ0FBQyxXQUFELENBRHFCLDZCQUNMLEVBREssQ0FBYixDQUFaLENBTGtFLHdCQVFsRSxNQUFNLENBQUMsS0FBUCxDQUFhLE9BQWIsQ0FBcUIsQ0FBQyxJQUFELENBQU8sS0FBUCxHQUFnQixnREFDbkMsSUFBSSxDQUFDLE9BQUwsQ0FBYSxPQUFiLENBQXFCLE1BQU0sRUFBRyx3QkFDNUIsS0FBTSxDQUFBLFNBQVMsMEJBQUcsTUFBTSxDQUFDLE9BQVAsQ0FBZSxPQUFmLENBQXVCLElBQXZCLENBQTRCLENBQUMsRUFBRyxnREFDaEQsTUFBTywyQkFBQSxDQUFDLENBQUMsS0FBRixHQUFZLEtBQVosOEJBQXFCLENBQUMsQ0FBQyxNQUFGLEdBQWEsTUFBTSxDQUFDLElBQXpDLENBQVAsQ0FDRCxDQUZpQixDQUFILENBQWYsQ0FENEIsd0JBSTVCLEdBQUksNEJBQUMsU0FBRCw4QkFBYyxDQUFDLE1BQU0sQ0FBQyxRQUFQLENBQWdCLE1BQU0sQ0FBQyxJQUF2QixDQUFmLENBQUosQ0FBaUQsbURBQy9DLE9BQU8sQ0FBQyxJQUFSLENBQWEsTUFBYixFQUNELENBRkQsZ0NBR0QsQ0FQRCxFQVFELENBVEQsRUFSa0Usd0JBbUJsRSxPQUFPLENBQUMsSUFBUixDQUFhLENBQUMsQ0FBRCxDQUFJLENBQUosR0FBUyxnREFDcEIsR0FBSSxDQUFDLENBQUMsTUFBRixHQUFhLENBQUMsQ0FBQyxNQUFuQixDQUEyQixtREFDekIsTUFBTyxDQUFBLENBQUMsQ0FBQyxNQUFGLENBQVcsQ0FBQyxDQUFDLE1BQXBCLENBQ0QsQ0FGRCxnQ0FEb0Isd0JBSXBCLE1BQU8sQ0FBQSxDQUFDLENBQUMsSUFBRixDQUFPLE1BQVAsQ0FBZ0IsQ0FBQyxDQUFDLElBQUYsQ0FBTyxNQUE5QixDQUNELENBTEQsRUFuQmtFLHdCQTBCbEUsTUFBTyxDQUFBLE9BQU8sQ0FBQyxNQUFSLENBQWlCLENBQWpCLDRCQUFxQixPQUFPLENBQUMsQ0FBRCxDQUE1Qiw2QkFBa0MsSUFBbEMsQ0FBUCxDQUNELENBcEMyRCxDLHdCQUE5RCxPQUFBLENBQUEsMEJBQUEsQ0FBQSwwQkFBQSxDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGxheWVyLCBTdGF0ZSwgQWN0aW9uLCBSZXNvbHZlUHJvbXB0QWN0aW9uLCBQcm9tcHQsIEF0dGFjaywgR2FtZVBoYXNlfSBmcm9tICcuLi8uLi9nYW1lJztcbmltcG9ydCB7IFByb21wdFJlc29sdmVyIH0gZnJvbSAnLi9wcm9tcHQtcmVzb2x2ZXInO1xuaW1wb3J0IHsgQ2hvb3NlQXR0YWNrUHJvbXB0IH0gZnJvbSAnLi4vLi4vZ2FtZS9zdG9yZS9wcm9tcHRzL2Nob29zZS1hdHRhY2stcHJvbXB0JztcblxuXG5leHBvcnQgY2xhc3MgQ2hvb3NlQXR0YWNrUHJvbXB0UmVzb2x2ZXIgZXh0ZW5kcyBQcm9tcHRSZXNvbHZlciB7XG5cbiAgcHVibGljIHJlc29sdmVQcm9tcHQoc3RhdGU6IFN0YXRlLCBwbGF5ZXI6IFBsYXllciwgcHJvbXB0OiBQcm9tcHQ8YW55Pik6IEFjdGlvbiB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKHByb21wdCBpbnN0YW5jZW9mIENob29zZUF0dGFja1Byb21wdCkge1xuICAgICAgY29uc3QgcmVzdWx0OiBBdHRhY2sgfCBudWxsID0gdGhpcy5idWlsZEF0dGFja1RvQ2hvb3NlKHN0YXRlLCBwcm9tcHQpO1xuICAgICAgcmV0dXJuIG5ldyBSZXNvbHZlUHJvbXB0QWN0aW9uKHByb21wdC5pZCwgcmVzdWx0KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGJ1aWxkQXR0YWNrVG9DaG9vc2Uoc3RhdGU6IFN0YXRlLCBwcm9tcHQ6IENob29zZUF0dGFja1Byb21wdCk6IEF0dGFjayB8IG51bGwge1xuICAgIGNvbnN0IGF0dGFja3M6IEF0dGFja1tdID0gW107XG5cbiAgICAvLyBGb3VsIFBsYXkgaXMgYmFubmVkLCBiZWNhdXNlIHdoZW4gWm9yb2FyayBtZWV0J3MgYW5vdGhlciBab3JvYWtcbiAgICAvLyB0aGV5IHdvdWxkIGNvcHkgdGhlaXJzIGF0dGFja3MgaW4gdGhlIGluZmluaXRlIGxvb3AuXG4gICAgY29uc3QgYmFubmVkOiBzdHJpbmdbXSA9IHN0YXRlLnBoYXNlID09PSBHYW1lUGhhc2UuQVRUQUNLXG4gICAgICA/IFsnRm91bCBQbGF5J10gOiBbXTtcblxuICAgIHByb21wdC5jYXJkcy5mb3JFYWNoKChjYXJkLCBpbmRleCkgPT4ge1xuICAgICAgY2FyZC5hdHRhY2tzLmZvckVhY2goYXR0YWNrID0+IHtcbiAgICAgICAgY29uc3QgaXNCbG9ja2VkID0gcHJvbXB0Lm9wdGlvbnMuYmxvY2tlZC5zb21lKGIgPT4ge1xuICAgICAgICAgIHJldHVybiBiLmluZGV4ID09PSBpbmRleCAmJiBiLmF0dGFjayA9PT0gYXR0YWNrLm5hbWU7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIWlzQmxvY2tlZCAmJiAhYmFubmVkLmluY2x1ZGVzKGF0dGFjay5uYW1lKSkge1xuICAgICAgICAgIGF0dGFja3MucHVzaChhdHRhY2spO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGF0dGFja3Muc29ydCgoYSwgYikgPT4ge1xuICAgICAgaWYgKGEuZGFtYWdlICE9PSBiLmRhbWFnZSkge1xuICAgICAgICByZXR1cm4gYi5kYW1hZ2UgLSBhLmRhbWFnZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBiLmNvc3QubGVuZ3RoIC0gYS5jb3N0Lmxlbmd0aDtcbiAgICB9KTtcblxuICAgIHJldHVybiBhdHRhY2tzLmxlbmd0aCA+IDAgPyBhdHRhY2tzWzBdIDogbnVsbDtcbiAgfVxuXG59XG4iXX0=