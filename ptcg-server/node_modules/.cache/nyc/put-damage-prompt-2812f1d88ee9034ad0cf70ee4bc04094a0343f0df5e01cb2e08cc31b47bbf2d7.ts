"use strict";function cov_1nrpun88hp(){var path="/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/game/store/prompts/put-damage-prompt.ts";var hash="b4c651882edaccef47d7fd01926f819f4b4003c3";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/game/store/prompts/put-damage-prompt.ts",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:62}},"1":{start:{line:3,column:0},end:{line:3,column:63}},"2":{start:{line:4,column:17},end:{line:4,column:36}},"3":{start:{line:5,column:27},end:{line:5,column:65}},"4":{start:{line:6,column:22},end:{line:6,column:47}},"5":{start:{line:7,column:0},end:{line:7,column:43}},"6":{start:{line:10,column:8},end:{line:10,column:24}},"7":{start:{line:11,column:8},end:{line:11,column:31}},"8":{start:{line:12,column:8},end:{line:12,column:37}},"9":{start:{line:13,column:8},end:{line:13,column:27}},"10":{start:{line:14,column:8},end:{line:14,column:29}},"11":{start:{line:15,column:8},end:{line:15,column:49}},"12":{start:{line:16,column:8},end:{line:16,column:48}},"13":{start:{line:18,column:8},end:{line:21,column:20}},"14":{start:{line:24,column:8},end:{line:24,column:22}},"15":{start:{line:27,column:8},end:{line:29,column:9}},"16":{start:{line:28,column:12},end:{line:28,column:44}},"17":{start:{line:30,column:21},end:{line:30,column:22}},"18":{start:{line:31,column:8},end:{line:31,column:53}},"19":{start:{line:31,column:30},end:{line:31,column:49}},"20":{start:{line:32,column:8},end:{line:34,column:9}},"21":{start:{line:33,column:12},end:{line:33,column:25}},"22":{start:{line:35,column:23},end:{line:35,column:70}},"23":{start:{line:35,column:47},end:{line:35,column:69}},"24":{start:{line:36,column:8},end:{line:38,column:9}},"25":{start:{line:37,column:12},end:{line:37,column:25}},"26":{start:{line:39,column:24},end:{line:39,column:107}},"27":{start:{line:39,column:54},end:{line:39,column:106}},"28":{start:{line:40,column:8},end:{line:45,column:9}},"29":{start:{line:41,column:27},end:{line:41,column:86}},"30":{start:{line:42,column:12},end:{line:44,column:13}},"31":{start:{line:43,column:16},end:{line:43,column:29}},"32":{start:{line:46,column:8},end:{line:50,column:9}},"33":{start:{line:47,column:12},end:{line:49,column:13}},"34":{start:{line:47,column:33},end:{line:47,column:68}},"35":{start:{line:48,column:16},end:{line:48,column:29}},"36":{start:{line:51,column:8},end:{line:53,column:9}},"37":{start:{line:51,column:29},end:{line:51,column:64}},"38":{start:{line:52,column:12},end:{line:52,column:25}},"39":{start:{line:54,column:8},end:{line:54,column:20}},"40":{start:{line:57,column:0},end:{line:57,column:42}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:9,column:4},end:{line:9,column:5}},loc:{start:{line:9,column:89},end:{line:22,column:5}},line:9},"1":{name:"(anonymous_1)",decl:{start:{line:23,column:4},end:{line:23,column:5}},loc:{start:{line:23,column:26},end:{line:25,column:5}},line:23},"2":{name:"(anonymous_2)",decl:{start:{line:26,column:4},end:{line:26,column:5}},loc:{start:{line:26,column:28},end:{line:55,column:5}},line:26},"3":{name:"(anonymous_3)",decl:{start:{line:31,column:23},end:{line:31,column:24}},loc:{start:{line:31,column:28},end:{line:31,column:51}},line:31},"4":{name:"(anonymous_4)",decl:{start:{line:35,column:42},end:{line:35,column:43}},loc:{start:{line:35,column:47},end:{line:35,column:69}},line:35},"5":{name:"(anonymous_5)",decl:{start:{line:39,column:49},end:{line:39,column:50}},loc:{start:{line:39,column:54},end:{line:39,column:106}},line:39},"6":{name:"(anonymous_6)",decl:{start:{line:47,column:28},end:{line:47,column:29}},loc:{start:{line:47,column:33},end:{line:47,column:68}},line:47},"7":{name:"(anonymous_7)",decl:{start:{line:51,column:24},end:{line:51,column:25}},loc:{start:{line:51,column:29},end:{line:51,column:64}},line:51}},branchMap:{"0":{loc:{start:{line:27,column:8},end:{line:29,column:9}},type:"if",locations:[{start:{line:27,column:8},end:{line:29,column:9}},{start:{line:27,column:8},end:{line:29,column:9}}],line:27},"1":{loc:{start:{line:32,column:8},end:{line:34,column:9}},type:"if",locations:[{start:{line:32,column:8},end:{line:34,column:9}},{start:{line:32,column:8},end:{line:34,column:9}}],line:32},"2":{loc:{start:{line:36,column:8},end:{line:38,column:9}},type:"if",locations:[{start:{line:36,column:8},end:{line:38,column:9}},{start:{line:36,column:8},end:{line:38,column:9}}],line:36},"3":{loc:{start:{line:42,column:12},end:{line:44,column:13}},type:"if",locations:[{start:{line:42,column:12},end:{line:44,column:13}},{start:{line:42,column:12},end:{line:44,column:13}}],line:42},"4":{loc:{start:{line:42,column:16},end:{line:42,column:64}},type:"binary-expr",locations:[{start:{line:42,column:16},end:{line:42,column:36}},{start:{line:42,column:40},end:{line:42,column:64}}],line:42},"5":{loc:{start:{line:46,column:8},end:{line:50,column:9}},type:"if",locations:[{start:{line:46,column:8},end:{line:50,column:9}},{start:{line:46,column:8},end:{line:50,column:9}}],line:46},"6":{loc:{start:{line:47,column:12},end:{line:49,column:13}},type:"if",locations:[{start:{line:47,column:12},end:{line:49,column:13}},{start:{line:47,column:12},end:{line:49,column:13}}],line:47},"7":{loc:{start:{line:51,column:8},end:{line:53,column:9}},type:"if",locations:[{start:{line:51,column:8},end:{line:53,column:9}},{start:{line:51,column:8},end:{line:53,column:9}}],line:51}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0]},inputSourceMap:{version:3,file:"/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/game/store/prompts/put-damage-prompt.ts",sources:["/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/game/store/prompts/put-damage-prompt.ts"],names:[],mappings:";;;AACA,qCAAkC;AAClC,kEAA+E;AAE/E,gDAA4C;AAG/B,QAAA,mBAAmB,GAAG,YAAY,CAAC;AAOhD,MAAa,eAAgB,SAAQ,eAAmB;IAMtD,YACE,QAAgB,EACT,OAAoB,EACpB,UAAsB,EACtB,KAAiB,EACjB,MAAc,EACd,gBAA6B,EACpC,OAAmC;QAEnC,KAAK,CAAC,QAAQ,CAAC,CAAC;QAPT,YAAO,GAAP,OAAO,CAAa;QACpB,eAAU,GAAV,UAAU,CAAY;QACtB,UAAK,GAAL,KAAK,CAAY;QACjB,WAAM,GAAN,MAAM,CAAQ;QACd,qBAAgB,GAAhB,gBAAgB,CAAa;QAV7B,SAAI,GAAW,2BAAmB,CAAC;QAe1C,kBAAkB;QAClB,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE;YAC/B,WAAW,EAAE,IAAI;YACjB,OAAO,EAAE,EAAE;SACZ,EAAE,OAAO,CAAC,CAAC;IACd,CAAC;IAEM,MAAM,CAAC,MAA0B,EAAE,KAAY;QACpD,OAAO,MAAM,CAAC;IAChB,CAAC;IAEM,QAAQ,CAAC,MAA0B,EAAE,KAAY;QACtD,IAAI,MAAM,KAAK,IAAI,EAAE;YACnB,OAAO,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAE,sBAAsB;SACzD;QAED,IAAI,MAAM,GAAG,CAAC,CAAC;QACf,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,GAAG,MAAM,IAAI,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;QAE7C,IAAI,IAAI,CAAC,MAAM,KAAK,MAAM,EAAE;YAC1B,OAAO,KAAK,CAAC;SACd;QAED,MAAM,MAAM,GAAG,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,KAAK,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC/D,IAAI,MAAM,KAAK,SAAS,EAAE;YACxB,OAAO,KAAK,CAAC;SACd;QACD,MAAM,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,wBAAU,CAAC,SAAS,CAAC,KAAK,EAAE,MAAM,EAAE,CAAC,CAAC,CAAC,CAAC;QAEtF,KAAK,MAAM,CAAC,IAAI,MAAM,EAAE;YACtB,MAAM,MAAM,GAAG,wBAAU,CAAC,SAAS,CAAC,KAAK,EAAE,MAAM,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC;YAC7D,IAAI,MAAM,KAAK,SAAS,IAAI,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE;gBACpD,OAAO,KAAK,CAAC;aACd;SACF;QAED,IAAI,IAAI,CAAC,UAAU,KAAK,6BAAU,CAAC,GAAG,EAAE;YACtC,IAAI,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,MAAM,KAAK,IAAI,CAAC,UAAU,CAAC,EAAE;gBACzD,OAAO,KAAK,CAAC;aACd;SACF;QAED,IAAI,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,EAAE;YACzD,OAAO,KAAK,CAAC;SACd;QAED,OAAO,IAAI,CAAC;IACd,CAAC;CAEF;AAlED,0CAkEC",sourcesContent:["import { GameMessage } from '../../game-message';\nimport { Prompt } from './prompt';\nimport { PlayerType, SlotType, CardTarget } from '../actions/play-card-action';\nimport { State } from '../state/state';\nimport { StateUtils } from '../state-utils';\nimport { DamageMap } from './move-damage-prompt';\n\nexport const PutDamagePromptType = 'Put damage';\n\nexport interface PutDamageOptions {\n  allowCancel: boolean;\n  blocked: CardTarget[];\n}\n\nexport class PutDamagePrompt extends Prompt<DamageMap[]> {\n\n  readonly type: string = PutDamagePromptType;\n\n  public options: PutDamageOptions;\n\n  constructor(\n    playerId: number,\n    public message: GameMessage,\n    public playerType: PlayerType,\n    public slots: SlotType[],\n    public damage: number,\n    public maxAllowedDamage: DamageMap[],\n    options?: Partial<PutDamageOptions>\n  ) {\n    super(playerId);\n\n    // Default options\n    this.options = Object.assign({}, {\n      allowCancel: true,\n      blocked: []\n    }, options);\n  }\n\n  public decode(result: DamageMap[] | null, state: State): DamageMap[] | null {\n    return result;\n  }\n\n  public validate(result: DamageMap[] | null, state: State): boolean {\n    if (result === null) {\n      return this.options.allowCancel;  // operation cancelled\n    }\n\n    let damage = 0;\n    result.forEach(r => { damage += r.damage; });\n\n    if (this.damage !== damage) {\n      return false;\n    }\n\n    const player = state.players.find(p => p.id === this.playerId);\n    if (player === undefined) {\n      return false;\n    }\n    const blocked = this.options.blocked.map(b => StateUtils.getTarget(state, player, b));\n\n    for (const r of result) {\n      const target = StateUtils.getTarget(state, player, r.target);\n      if (target === undefined || blocked.includes(target)) {\n        return false;\n      }\n    }\n\n    if (this.playerType !== PlayerType.ANY) {\n      if (result.some(r => r.target.player !== this.playerType)) {\n        return false;\n      }\n    }\n\n    if (result.some(r => !this.slots.includes(r.target.slot))) {\n      return false;\n    }\n\n    return true;\n  }\n\n}\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b4c651882edaccef47d7fd01926f819f4b4003c3"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1nrpun88hp=function(){return actualCoverage;};}return actualCoverage;}cov_1nrpun88hp();cov_1nrpun88hp().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_1nrpun88hp().s[1]++;exports.PutDamagePrompt=exports.PutDamagePromptType=void 0;const prompt_1=(cov_1nrpun88hp().s[2]++,require("./prompt"));const play_card_action_1=(cov_1nrpun88hp().s[3]++,require("../actions/play-card-action"));const state_utils_1=(cov_1nrpun88hp().s[4]++,require("../state-utils"));cov_1nrpun88hp().s[5]++;exports.PutDamagePromptType='Put damage';class PutDamagePrompt extends(prompt_1.Prompt){constructor(playerId,message,playerType,slots,damage,maxAllowedDamage,options){cov_1nrpun88hp().f[0]++;cov_1nrpun88hp().s[6]++;super(playerId);cov_1nrpun88hp().s[7]++;this.message=message;cov_1nrpun88hp().s[8]++;this.playerType=playerType;cov_1nrpun88hp().s[9]++;this.slots=slots;cov_1nrpun88hp().s[10]++;this.damage=damage;cov_1nrpun88hp().s[11]++;this.maxAllowedDamage=maxAllowedDamage;cov_1nrpun88hp().s[12]++;this.type=exports.PutDamagePromptType;// Default options
cov_1nrpun88hp().s[13]++;this.options=Object.assign({},{allowCancel:true,blocked:[]},options);}decode(result,state){cov_1nrpun88hp().f[1]++;cov_1nrpun88hp().s[14]++;return result;}validate(result,state){cov_1nrpun88hp().f[2]++;cov_1nrpun88hp().s[15]++;if(result===null){cov_1nrpun88hp().b[0][0]++;cov_1nrpun88hp().s[16]++;return this.options.allowCancel;// operation cancelled
}else{cov_1nrpun88hp().b[0][1]++;}let damage=(cov_1nrpun88hp().s[17]++,0);cov_1nrpun88hp().s[18]++;result.forEach(r=>{cov_1nrpun88hp().f[3]++;cov_1nrpun88hp().s[19]++;damage+=r.damage;});cov_1nrpun88hp().s[20]++;if(this.damage!==damage){cov_1nrpun88hp().b[1][0]++;cov_1nrpun88hp().s[21]++;return false;}else{cov_1nrpun88hp().b[1][1]++;}const player=(cov_1nrpun88hp().s[22]++,state.players.find(p=>{cov_1nrpun88hp().f[4]++;cov_1nrpun88hp().s[23]++;return p.id===this.playerId;}));cov_1nrpun88hp().s[24]++;if(player===undefined){cov_1nrpun88hp().b[2][0]++;cov_1nrpun88hp().s[25]++;return false;}else{cov_1nrpun88hp().b[2][1]++;}const blocked=(cov_1nrpun88hp().s[26]++,this.options.blocked.map(b=>{cov_1nrpun88hp().f[5]++;cov_1nrpun88hp().s[27]++;return state_utils_1.StateUtils.getTarget(state,player,b);}));cov_1nrpun88hp().s[28]++;for(const r of result){const target=(cov_1nrpun88hp().s[29]++,state_utils_1.StateUtils.getTarget(state,player,r.target));cov_1nrpun88hp().s[30]++;if((cov_1nrpun88hp().b[4][0]++,target===undefined)||(cov_1nrpun88hp().b[4][1]++,blocked.includes(target))){cov_1nrpun88hp().b[3][0]++;cov_1nrpun88hp().s[31]++;return false;}else{cov_1nrpun88hp().b[3][1]++;}}cov_1nrpun88hp().s[32]++;if(this.playerType!==play_card_action_1.PlayerType.ANY){cov_1nrpun88hp().b[5][0]++;cov_1nrpun88hp().s[33]++;if(result.some(r=>{cov_1nrpun88hp().f[6]++;cov_1nrpun88hp().s[34]++;return r.target.player!==this.playerType;})){cov_1nrpun88hp().b[6][0]++;cov_1nrpun88hp().s[35]++;return false;}else{cov_1nrpun88hp().b[6][1]++;}}else{cov_1nrpun88hp().b[5][1]++;}cov_1nrpun88hp().s[36]++;if(result.some(r=>{cov_1nrpun88hp().f[7]++;cov_1nrpun88hp().s[37]++;return!this.slots.includes(r.target.slot);})){cov_1nrpun88hp().b[7][0]++;cov_1nrpun88hp().s[38]++;return false;}else{cov_1nrpun88hp().b[7][1]++;}cov_1nrpun88hp().s[39]++;return true;}}cov_1nrpun88hp().s[40]++;exports.PutDamagePrompt=PutDamagePrompt;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2pvZW15ZXJzY291Z2gvRG9jdW1lbnRzL0dpdEh1Yi9wdGNnLWVwc2QvcHRjZy1zZXJ2ZXIvc3JjL2dhbWUvc3RvcmUvcHJvbXB0cy9wdXQtZGFtYWdlLXByb21wdC50cyIsInNvdXJjZXMiOlsiL1VzZXJzL2pvZW15ZXJzY291Z2gvRG9jdW1lbnRzL0dpdEh1Yi9wdGNnLWVwc2QvcHRjZy1zZXJ2ZXIvc3JjL2dhbWUvc3RvcmUvcHJvbXB0cy9wdXQtZGFtYWdlLXByb21wdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFDQSxxQ0FBa0M7QUFDbEMsa0VBQStFO0FBRS9FLGdEQUE0QztBQUcvQixRQUFBLG1CQUFtQixHQUFHLFlBQVksQ0FBQztBQU9oRCxNQUFhLGVBQWdCLFNBQVEsZUFBbUI7SUFNdEQsWUFDRSxRQUFnQixFQUNULE9BQW9CLEVBQ3BCLFVBQXNCLEVBQ3RCLEtBQWlCLEVBQ2pCLE1BQWMsRUFDZCxnQkFBNkIsRUFDcEMsT0FBbUM7UUFFbkMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBUFQsWUFBTyxHQUFQLE9BQU8sQ0FBYTtRQUNwQixlQUFVLEdBQVYsVUFBVSxDQUFZO1FBQ3RCLFVBQUssR0FBTCxLQUFLLENBQVk7UUFDakIsV0FBTSxHQUFOLE1BQU0sQ0FBUTtRQUNkLHFCQUFnQixHQUFoQixnQkFBZ0IsQ0FBYTtRQVY3QixTQUFJLEdBQVcsMkJBQW1CLENBQUM7UUFlMUMsa0JBQWtCO1FBQ2xCLElBQUksQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUU7WUFDL0IsV0FBVyxFQUFFLElBQUk7WUFDakIsT0FBTyxFQUFFLEVBQUU7U0FDWixFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQ2QsQ0FBQztJQUVNLE1BQU0sQ0FBQyxNQUEwQixFQUFFLEtBQVk7UUFDcEQsT0FBTyxNQUFNLENBQUM7SUFDaEIsQ0FBQztJQUVNLFFBQVEsQ0FBQyxNQUEwQixFQUFFLEtBQVk7UUFDdEQsSUFBSSxNQUFNLEtBQUssSUFBSSxFQUFFO1lBQ25CLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBRSxzQkFBc0I7U0FDekQ7UUFFRCxJQUFJLE1BQU0sR0FBRyxDQUFDLENBQUM7UUFDZixNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLEdBQUcsTUFBTSxJQUFJLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUU3QyxJQUFJLElBQUksQ0FBQyxNQUFNLEtBQUssTUFBTSxFQUFFO1lBQzFCLE9BQU8sS0FBSyxDQUFDO1NBQ2Q7UUFFRCxNQUFNLE1BQU0sR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQy9ELElBQUksTUFBTSxLQUFLLFNBQVMsRUFBRTtZQUN4QixPQUFPLEtBQUssQ0FBQztTQUNkO1FBQ0QsTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsd0JBQVUsQ0FBQyxTQUFTLENBQUMsS0FBSyxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRXRGLEtBQUssTUFBTSxDQUFDLElBQUksTUFBTSxFQUFFO1lBQ3RCLE1BQU0sTUFBTSxHQUFHLHdCQUFVLENBQUMsU0FBUyxDQUFDLEtBQUssRUFBRSxNQUFNLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQzdELElBQUksTUFBTSxLQUFLLFNBQVMsSUFBSSxPQUFPLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxFQUFFO2dCQUNwRCxPQUFPLEtBQUssQ0FBQzthQUNkO1NBQ0Y7UUFFRCxJQUFJLElBQUksQ0FBQyxVQUFVLEtBQUssNkJBQVUsQ0FBQyxHQUFHLEVBQUU7WUFDdEMsSUFBSSxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUFNLEtBQUssSUFBSSxDQUFDLFVBQVUsQ0FBQyxFQUFFO2dCQUN6RCxPQUFPLEtBQUssQ0FBQzthQUNkO1NBQ0Y7UUFFRCxJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRTtZQUN6RCxPQUFPLEtBQUssQ0FBQztTQUNkO1FBRUQsT0FBTyxJQUFJLENBQUM7SUFDZCxDQUFDO0NBRUY7QUFsRUQsMENBa0VDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgR2FtZU1lc3NhZ2UgfSBmcm9tICcuLi8uLi9nYW1lLW1lc3NhZ2UnO1xuaW1wb3J0IHsgUHJvbXB0IH0gZnJvbSAnLi9wcm9tcHQnO1xuaW1wb3J0IHsgUGxheWVyVHlwZSwgU2xvdFR5cGUsIENhcmRUYXJnZXQgfSBmcm9tICcuLi9hY3Rpb25zL3BsYXktY2FyZC1hY3Rpb24nO1xuaW1wb3J0IHsgU3RhdGUgfSBmcm9tICcuLi9zdGF0ZS9zdGF0ZSc7XG5pbXBvcnQgeyBTdGF0ZVV0aWxzIH0gZnJvbSAnLi4vc3RhdGUtdXRpbHMnO1xuaW1wb3J0IHsgRGFtYWdlTWFwIH0gZnJvbSAnLi9tb3ZlLWRhbWFnZS1wcm9tcHQnO1xuXG5leHBvcnQgY29uc3QgUHV0RGFtYWdlUHJvbXB0VHlwZSA9ICdQdXQgZGFtYWdlJztcblxuZXhwb3J0IGludGVyZmFjZSBQdXREYW1hZ2VPcHRpb25zIHtcbiAgYWxsb3dDYW5jZWw6IGJvb2xlYW47XG4gIGJsb2NrZWQ6IENhcmRUYXJnZXRbXTtcbn1cblxuZXhwb3J0IGNsYXNzIFB1dERhbWFnZVByb21wdCBleHRlbmRzIFByb21wdDxEYW1hZ2VNYXBbXT4ge1xuXG4gIHJlYWRvbmx5IHR5cGU6IHN0cmluZyA9IFB1dERhbWFnZVByb21wdFR5cGU7XG5cbiAgcHVibGljIG9wdGlvbnM6IFB1dERhbWFnZU9wdGlvbnM7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcGxheWVySWQ6IG51bWJlcixcbiAgICBwdWJsaWMgbWVzc2FnZTogR2FtZU1lc3NhZ2UsXG4gICAgcHVibGljIHBsYXllclR5cGU6IFBsYXllclR5cGUsXG4gICAgcHVibGljIHNsb3RzOiBTbG90VHlwZVtdLFxuICAgIHB1YmxpYyBkYW1hZ2U6IG51bWJlcixcbiAgICBwdWJsaWMgbWF4QWxsb3dlZERhbWFnZTogRGFtYWdlTWFwW10sXG4gICAgb3B0aW9ucz86IFBhcnRpYWw8UHV0RGFtYWdlT3B0aW9ucz5cbiAgKSB7XG4gICAgc3VwZXIocGxheWVySWQpO1xuXG4gICAgLy8gRGVmYXVsdCBvcHRpb25zXG4gICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwge1xuICAgICAgYWxsb3dDYW5jZWw6IHRydWUsXG4gICAgICBibG9ja2VkOiBbXVxuICAgIH0sIG9wdGlvbnMpO1xuICB9XG5cbiAgcHVibGljIGRlY29kZShyZXN1bHQ6IERhbWFnZU1hcFtdIHwgbnVsbCwgc3RhdGU6IFN0YXRlKTogRGFtYWdlTWFwW10gfCBudWxsIHtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgcHVibGljIHZhbGlkYXRlKHJlc3VsdDogRGFtYWdlTWFwW10gfCBudWxsLCBzdGF0ZTogU3RhdGUpOiBib29sZWFuIHtcbiAgICBpZiAocmVzdWx0ID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gdGhpcy5vcHRpb25zLmFsbG93Q2FuY2VsOyAgLy8gb3BlcmF0aW9uIGNhbmNlbGxlZFxuICAgIH1cblxuICAgIGxldCBkYW1hZ2UgPSAwO1xuICAgIHJlc3VsdC5mb3JFYWNoKHIgPT4geyBkYW1hZ2UgKz0gci5kYW1hZ2U7IH0pO1xuXG4gICAgaWYgKHRoaXMuZGFtYWdlICE9PSBkYW1hZ2UpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBwbGF5ZXIgPSBzdGF0ZS5wbGF5ZXJzLmZpbmQocCA9PiBwLmlkID09PSB0aGlzLnBsYXllcklkKTtcbiAgICBpZiAocGxheWVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgYmxvY2tlZCA9IHRoaXMub3B0aW9ucy5ibG9ja2VkLm1hcChiID0+IFN0YXRlVXRpbHMuZ2V0VGFyZ2V0KHN0YXRlLCBwbGF5ZXIsIGIpKTtcblxuICAgIGZvciAoY29uc3QgciBvZiByZXN1bHQpIHtcbiAgICAgIGNvbnN0IHRhcmdldCA9IFN0YXRlVXRpbHMuZ2V0VGFyZ2V0KHN0YXRlLCBwbGF5ZXIsIHIudGFyZ2V0KTtcbiAgICAgIGlmICh0YXJnZXQgPT09IHVuZGVmaW5lZCB8fCBibG9ja2VkLmluY2x1ZGVzKHRhcmdldCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLnBsYXllclR5cGUgIT09IFBsYXllclR5cGUuQU5ZKSB7XG4gICAgICBpZiAocmVzdWx0LnNvbWUociA9PiByLnRhcmdldC5wbGF5ZXIgIT09IHRoaXMucGxheWVyVHlwZSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChyZXN1bHQuc29tZShyID0+ICF0aGlzLnNsb3RzLmluY2x1ZGVzKHIudGFyZ2V0LnNsb3QpKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbn1cbiJdfQ==
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qb2VteWVyc2NvdWdoL0RvY3VtZW50cy9HaXRIdWIvcHRjZy1lcHNkL3B0Y2ctc2VydmVyL3NyYy9nYW1lL3N0b3JlL3Byb21wdHMvcHV0LWRhbWFnZS1wcm9tcHQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6InVwVUFnQlc7K1BBZlgsS0FBQSxDQUFBLFFBQUEsMEJBQUEsT0FBQSxDQUFBLFVBQUEsQ0FBQSxDQUFBLENBQ0EsS0FBQSxDQUFBLGtCQUFBLDBCQUFBLE9BQUEsQ0FBQSw2QkFBQSxDQUFBLENBQUEsQ0FFQSxLQUFBLENBQUEsYUFBQSwwQkFBQSxPQUFBLENBQUEsZ0JBQUEsQ0FBQSxDQUFBLEMsd0JBR2EsT0FBQSxDQUFBLG1CQUFBLENBQXNCLFlBQXRCLENBT2IsS0FBYSxDQUFBLGVBQWIsU0FBcUMsUUFBQSxDQUFBLE1BQXJDLENBQXdELENBTXRELFdBQUEsQ0FDRSxRQURGLENBRVMsT0FGVCxDQUdTLFVBSFQsQ0FJUyxLQUpULENBS1MsTUFMVCxDQU1TLGdCQU5ULENBT0UsT0FQRixDQU9xQyxpREFFbkMsTUFBTSxRQUFOLEVBRm1DLHdCQUw1QixLQUFBLE9BQUEsQ0FBQSxPQUFBLENBSzRCLHdCQUo1QixLQUFBLFVBQUEsQ0FBQSxVQUFBLENBSTRCLHdCQUg1QixLQUFBLEtBQUEsQ0FBQSxLQUFBLENBRzRCLHlCQUY1QixLQUFBLE1BQUEsQ0FBQSxNQUFBLENBRTRCLHlCQUQ1QixLQUFBLGdCQUFBLENBQUEsZ0JBQUEsQ0FDNEIseUJBWDVCLEtBQUEsSUFBQSxDQUFlLE9BQUEsQ0FBQSxtQkFBZixDQWVQO0FBSm1DLHlCQUtuQyxLQUFLLE9BQUwsQ0FBZSxNQUFNLENBQUMsTUFBUCxDQUFjLEVBQWQsQ0FBa0IsQ0FDL0IsV0FBVyxDQUFFLElBRGtCLENBRS9CLE9BQU8sQ0FBRSxFQUZzQixDQUFsQixDQUdaLE9BSFksQ0FBZixDQUlELENBRU0sTUFBTSxDQUFDLE1BQUQsQ0FBNkIsS0FBN0IsQ0FBeUMsa0RBQ3BELE1BQU8sQ0FBQSxNQUFQLENBQ0QsQ0FFTSxRQUFRLENBQUMsTUFBRCxDQUE2QixLQUE3QixDQUF5QyxrREFDdEQsR0FBSSxNQUFNLEdBQUssSUFBZixDQUFxQixxREFDbkIsTUFBTyxNQUFLLE9BQUwsQ0FBYSxXQUFwQixDQUFrQztBQUNuQyxDQUZELGlDQUlBLEdBQUksQ0FBQSxNQUFNLDJCQUFHLENBQUgsQ0FBVixDQUxzRCx5QkFNdEQsTUFBTSxDQUFDLE9BQVAsQ0FBZSxDQUFDLEVBQUcsa0RBQUcsTUFBTSxFQUFJLENBQUMsQ0FBQyxNQUFaLENBQXFCLENBQTNDLEVBTnNELHlCQVF0RCxHQUFJLEtBQUssTUFBTCxHQUFnQixNQUFwQixDQUE0QixxREFDMUIsTUFBTyxNQUFQLENBQ0QsQ0FGRCxpQ0FJQSxLQUFNLENBQUEsTUFBTSwyQkFBRyxLQUFLLENBQUMsT0FBTixDQUFjLElBQWQsQ0FBbUIsQ0FBQyxFQUFJLHdEQUFBLENBQUEsQ0FBQyxDQUFDLEVBQUYsR0FBUyxLQUFLLFFBQWQsQ0FBc0IsQ0FBOUMsQ0FBSCxDQUFaLENBWnNELHlCQWF0RCxHQUFJLE1BQU0sR0FBSyxTQUFmLENBQTBCLHFEQUN4QixNQUFPLE1BQVAsQ0FDRCxDQUZELGlDQUdBLEtBQU0sQ0FBQSxPQUFPLDJCQUFHLEtBQUssT0FBTCxDQUFhLE9BQWIsQ0FBcUIsR0FBckIsQ0FBeUIsQ0FBQyxFQUFJLHdEQUFBLENBQUEsYUFBQSxDQUFBLFVBQUEsQ0FBVyxTQUFYLENBQXFCLEtBQXJCLENBQTRCLE1BQTVCLENBQW9DLENBQXBDLEVBQXNDLENBQXBFLENBQUgsQ0FBYixDQWhCc0QseUJBa0J0RCxJQUFLLEtBQU0sQ0FBQSxDQUFYLEdBQWdCLENBQUEsTUFBaEIsQ0FBd0IsQ0FDdEIsS0FBTSxDQUFBLE1BQU0sMkJBQUcsYUFBQSxDQUFBLFVBQUEsQ0FBVyxTQUFYLENBQXFCLEtBQXJCLENBQTRCLE1BQTVCLENBQW9DLENBQUMsQ0FBQyxNQUF0QyxDQUFILENBQVosQ0FEc0IseUJBRXRCLEdBQUksNEJBQUEsTUFBTSxHQUFLLFNBQVgsK0JBQXdCLE9BQU8sQ0FBQyxRQUFSLENBQWlCLE1BQWpCLENBQXhCLENBQUosQ0FBc0QscURBQ3BELE1BQU8sTUFBUCxDQUNELENBRkQsaUNBR0QsQ0F2QnFELHlCQXlCdEQsR0FBSSxLQUFLLFVBQUwsR0FBb0Isa0JBQUEsQ0FBQSxVQUFBLENBQVcsR0FBbkMsQ0FBd0MscURBQ3RDLEdBQUksTUFBTSxDQUFDLElBQVAsQ0FBWSxDQUFDLEVBQUksd0RBQUEsQ0FBQSxDQUFDLENBQUMsTUFBRixDQUFTLE1BQVQsR0FBb0IsS0FBSyxVQUF6QixDQUFtQyxDQUFwRCxDQUFKLENBQTJELHFEQUN6RCxNQUFPLE1BQVAsQ0FDRCxDQUZELGlDQUdELENBSkQsaUNBekJzRCx5QkErQnRELEdBQUksTUFBTSxDQUFDLElBQVAsQ0FBWSxDQUFDLEVBQUkseURBQUMsS0FBSyxLQUFMLENBQVcsUUFBWCxDQUFvQixDQUFDLENBQUMsTUFBRixDQUFTLElBQTdCLENBQUQsQ0FBbUMsQ0FBcEQsQ0FBSixDQUEyRCxxREFDekQsTUFBTyxNQUFQLENBQ0QsQ0FGRCxpQ0EvQnNELHlCQW1DdEQsTUFBTyxLQUFQLENBQ0QsQ0FoRXFELEMseUJBQXhELE9BQUEsQ0FBQSxlQUFBLENBQUEsZUFBQSxDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgR2FtZU1lc3NhZ2UgfSBmcm9tICcuLi8uLi9nYW1lLW1lc3NhZ2UnO1xuaW1wb3J0IHsgUHJvbXB0IH0gZnJvbSAnLi9wcm9tcHQnO1xuaW1wb3J0IHsgUGxheWVyVHlwZSwgU2xvdFR5cGUsIENhcmRUYXJnZXQgfSBmcm9tICcuLi9hY3Rpb25zL3BsYXktY2FyZC1hY3Rpb24nO1xuaW1wb3J0IHsgU3RhdGUgfSBmcm9tICcuLi9zdGF0ZS9zdGF0ZSc7XG5pbXBvcnQgeyBTdGF0ZVV0aWxzIH0gZnJvbSAnLi4vc3RhdGUtdXRpbHMnO1xuaW1wb3J0IHsgRGFtYWdlTWFwIH0gZnJvbSAnLi9tb3ZlLWRhbWFnZS1wcm9tcHQnO1xuXG5leHBvcnQgY29uc3QgUHV0RGFtYWdlUHJvbXB0VHlwZSA9ICdQdXQgZGFtYWdlJztcblxuZXhwb3J0IGludGVyZmFjZSBQdXREYW1hZ2VPcHRpb25zIHtcbiAgYWxsb3dDYW5jZWw6IGJvb2xlYW47XG4gIGJsb2NrZWQ6IENhcmRUYXJnZXRbXTtcbn1cblxuZXhwb3J0IGNsYXNzIFB1dERhbWFnZVByb21wdCBleHRlbmRzIFByb21wdDxEYW1hZ2VNYXBbXT4ge1xuXG4gIHJlYWRvbmx5IHR5cGU6IHN0cmluZyA9IFB1dERhbWFnZVByb21wdFR5cGU7XG5cbiAgcHVibGljIG9wdGlvbnM6IFB1dERhbWFnZU9wdGlvbnM7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcGxheWVySWQ6IG51bWJlcixcbiAgICBwdWJsaWMgbWVzc2FnZTogR2FtZU1lc3NhZ2UsXG4gICAgcHVibGljIHBsYXllclR5cGU6IFBsYXllclR5cGUsXG4gICAgcHVibGljIHNsb3RzOiBTbG90VHlwZVtdLFxuICAgIHB1YmxpYyBkYW1hZ2U6IG51bWJlcixcbiAgICBwdWJsaWMgbWF4QWxsb3dlZERhbWFnZTogRGFtYWdlTWFwW10sXG4gICAgb3B0aW9ucz86IFBhcnRpYWw8UHV0RGFtYWdlT3B0aW9ucz5cbiAgKSB7XG4gICAgc3VwZXIocGxheWVySWQpO1xuXG4gICAgLy8gRGVmYXVsdCBvcHRpb25zXG4gICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwge1xuICAgICAgYWxsb3dDYW5jZWw6IHRydWUsXG4gICAgICBibG9ja2VkOiBbXVxuICAgIH0sIG9wdGlvbnMpO1xuICB9XG5cbiAgcHVibGljIGRlY29kZShyZXN1bHQ6IERhbWFnZU1hcFtdIHwgbnVsbCwgc3RhdGU6IFN0YXRlKTogRGFtYWdlTWFwW10gfCBudWxsIHtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgcHVibGljIHZhbGlkYXRlKHJlc3VsdDogRGFtYWdlTWFwW10gfCBudWxsLCBzdGF0ZTogU3RhdGUpOiBib29sZWFuIHtcbiAgICBpZiAocmVzdWx0ID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gdGhpcy5vcHRpb25zLmFsbG93Q2FuY2VsOyAgLy8gb3BlcmF0aW9uIGNhbmNlbGxlZFxuICAgIH1cblxuICAgIGxldCBkYW1hZ2UgPSAwO1xuICAgIHJlc3VsdC5mb3JFYWNoKHIgPT4geyBkYW1hZ2UgKz0gci5kYW1hZ2U7IH0pO1xuXG4gICAgaWYgKHRoaXMuZGFtYWdlICE9PSBkYW1hZ2UpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBwbGF5ZXIgPSBzdGF0ZS5wbGF5ZXJzLmZpbmQocCA9PiBwLmlkID09PSB0aGlzLnBsYXllcklkKTtcbiAgICBpZiAocGxheWVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgYmxvY2tlZCA9IHRoaXMub3B0aW9ucy5ibG9ja2VkLm1hcChiID0+IFN0YXRlVXRpbHMuZ2V0VGFyZ2V0KHN0YXRlLCBwbGF5ZXIsIGIpKTtcblxuICAgIGZvciAoY29uc3QgciBvZiByZXN1bHQpIHtcbiAgICAgIGNvbnN0IHRhcmdldCA9IFN0YXRlVXRpbHMuZ2V0VGFyZ2V0KHN0YXRlLCBwbGF5ZXIsIHIudGFyZ2V0KTtcbiAgICAgIGlmICh0YXJnZXQgPT09IHVuZGVmaW5lZCB8fCBibG9ja2VkLmluY2x1ZGVzKHRhcmdldCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLnBsYXllclR5cGUgIT09IFBsYXllclR5cGUuQU5ZKSB7XG4gICAgICBpZiAocmVzdWx0LnNvbWUociA9PiByLnRhcmdldC5wbGF5ZXIgIT09IHRoaXMucGxheWVyVHlwZSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChyZXN1bHQuc29tZShyID0+ICF0aGlzLnNsb3RzLmluY2x1ZGVzKHIudGFyZ2V0LnNsb3QpKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbn1cbiJdfQ==