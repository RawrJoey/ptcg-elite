"use strict";function cov_1pxh7w6468(){var path="/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/simple-bot/simple-tactics/attach-tool-tactic.ts";var hash="e915e484c5579fe58fde02e98aefe4ee01b87f4f";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/simple-bot/simple-tactics/attach-tool-tactic.ts",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:62}},"1":{start:{line:3,column:0},end:{line:3,column:34}},"2":{start:{line:4,column:15},end:{line:4,column:36}},"3":{start:{line:5,column:25},end:{line:5,column:52}},"4":{start:{line:8,column:22},end:{line:10,column:10}},"5":{start:{line:9,column:12},end:{line:9,column:96}},"6":{start:{line:11,column:8},end:{line:13,column:9}},"7":{start:{line:12,column:12},end:{line:12,column:19}},"8":{start:{line:14,column:21},end:{line:14,column:29}},"9":{start:{line:15,column:26},end:{line:15,column:62}},"10":{start:{line:16,column:24},end:{line:16,column:26}},"11":{start:{line:17,column:8},end:{line:27,column:11}},"12":{start:{line:18,column:12},end:{line:20,column:13}},"13":{start:{line:19,column:16},end:{line:19,column:23}},"14":{start:{line:21,column:12},end:{line:21,column:33}},"15":{start:{line:22,column:26},end:{line:22,column:62}},"16":{start:{line:23,column:12},end:{line:23,column:38}},"17":{start:{line:24,column:12},end:{line:26,column:13}},"18":{start:{line:25,column:16},end:{line:25,column:48}},"19":{start:{line:28,column:8},end:{line:30,column:9}},"20":{start:{line:29,column:12},end:{line:29,column:19}},"21":{start:{line:31,column:8},end:{line:31,column:50}},"22":{start:{line:31,column:31},end:{line:31,column:48}},"23":{start:{line:32,column:23},end:{line:32,column:40}},"24":{start:{line:33,column:22},end:{line:33,column:57}},"25":{start:{line:34,column:8},end:{line:34,column:67}},"26":{start:{line:37,column:0},end:{line:37,column:44}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:7,column:4},end:{line:7,column:5}},loc:{start:{line:7,column:29},end:{line:35,column:5}},line:7},"1":{name:"(anonymous_1)",decl:{start:{line:8,column:47},end:{line:8,column:48}},loc:{start:{line:8,column:52},end:{line:10,column:9}},line:8},"2":{name:"(anonymous_2)",decl:{start:{line:17,column:63},end:{line:17,column:64}},loc:{start:{line:17,column:94},end:{line:27,column:9}},line:17},"3":{name:"(anonymous_3)",decl:{start:{line:31,column:21},end:{line:31,column:22}},loc:{start:{line:31,column:31},end:{line:31,column:48}},line:31}},branchMap:{"0":{loc:{start:{line:9,column:19},end:{line:9,column:95}},type:"binary-expr",locations:[{start:{line:9,column:19},end:{line:9,column:50}},{start:{line:9,column:54},end:{line:9,column:95}}],line:9},"1":{loc:{start:{line:11,column:8},end:{line:13,column:9}},type:"if",locations:[{start:{line:11,column:8},end:{line:13,column:9}},{start:{line:11,column:8},end:{line:13,column:9}}],line:11},"2":{loc:{start:{line:18,column:12},end:{line:20,column:13}},type:"if",locations:[{start:{line:18,column:12},end:{line:20,column:13}},{start:{line:18,column:12},end:{line:20,column:13}}],line:18},"3":{loc:{start:{line:24,column:12},end:{line:26,column:13}},type:"if",locations:[{start:{line:24,column:12},end:{line:26,column:13}},{start:{line:24,column:12},end:{line:26,column:13}}],line:24},"4":{loc:{start:{line:28,column:8},end:{line:30,column:9}},type:"if",locations:[{start:{line:28,column:8},end:{line:30,column:9}},{start:{line:28,column:8},end:{line:30,column:9}}],line:28}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0},f:{"0":0,"1":0,"2":0,"3":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},inputSourceMap:{version:3,file:"/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/simple-bot/simple-tactics/attach-tool-tactic.ts",sources:["/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/simple-bot/simple-tactics/attach-tool-tactic.ts"],names:[],mappings:";;;AAAA,qCAC4C;AAC5C,qDAAgD;AAEhD,MAAa,gBAAiB,SAAQ,6BAAY;IAEzC,SAAS,CAAC,KAAY,EAAE,MAAc;QAC3C,MAAM,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE;YACzC,OAAO,CAAC,YAAY,kBAAW,IAAI,CAAC,CAAC,WAAW,KAAK,kBAAW,CAAC,IAAI,CAAC;QACxE,CAAC,CAAC,CAAC;QAEH,IAAI,KAAK,CAAC,MAAM,KAAK,CAAC,EAAE;YACtB,OAAO;SACR;QAED,MAAM,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;QACtB,MAAM,SAAS,GAAG,IAAI,CAAC,aAAa,CAAC,KAAK,EAAE,MAAM,CAAC,EAAE,CAAC,CAAC;QAEvD,MAAM,OAAO,GAA4C,EAAE,CAAC;QAC5D,MAAM,CAAC,cAAc,CAAC,iBAAU,CAAC,aAAa,EAAE,CAAC,QAAQ,EAAE,OAAO,EAAE,MAAM,EAAE,EAAE;YAC5E,IAAI,QAAQ,CAAC,IAAI,KAAK,SAAS,EAAE;gBAC/B,OAAO;aACR;YAED,QAAQ,CAAC,IAAI,GAAG,IAAI,CAAC;YACrB,MAAM,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,KAAK,EAAE,MAAM,CAAC,EAAE,CAAC,CAAC;YACnD,QAAQ,CAAC,IAAI,GAAG,SAAS,CAAC;YAE1B,IAAI,KAAK,GAAG,SAAS,EAAE;gBACrB,OAAO,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE,CAAC,CAAC;aACjC;QACH,CAAC,CAAC,CAAC;QAEH,IAAI,OAAO,CAAC,MAAM,KAAK,CAAC,EAAE;YACxB,OAAO;SACR;QAED,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC;QAC1C,MAAM,MAAM,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;QACjC,MAAM,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;QAClD,OAAO,IAAI,qBAAc,CAAC,MAAM,CAAC,EAAE,EAAE,KAAK,EAAE,MAAM,CAAC,CAAC;IACtD,CAAC;CAEF;AAvCD,4CAuCC",sourcesContent:["import { Action, Player, State, PlayCardAction, TrainerCard, TrainerType,\n  CardTarget, PlayerType} from '../../game';\nimport { SimpleTactic } from './simple-tactics';\n\nexport class AttachToolTactic extends SimpleTactic {\n\n  public useTactic(state: State, player: Player): Action | undefined {\n    const tools = player.hand.cards.filter(c => {\n      return c instanceof TrainerCard && c.trainerType === TrainerType.TOOL;\n    });\n\n    if (tools.length === 0) {\n      return;\n    }\n\n    const tool = tools[0];\n    const baseScore = this.getStateScore(state, player.id);\n\n    const targets: { target: CardTarget, score: number }[] = [];\n    player.forEachPokemon(PlayerType.BOTTOM_PLAYER, (cardList, pokemon, target) => {\n      if (cardList.tool !== undefined) {\n        return;\n      }\n\n      cardList.tool = tool;\n      const score = this.getStateScore(state, player.id);\n      cardList.tool = undefined;\n\n      if (score > baseScore) {\n        targets.push({ target, score });\n      }\n    });\n\n    if (targets.length === 0) {\n      return;\n    }\n\n    targets.sort((a, b) => b.score - a.score);\n    const target = targets[0].target;\n    const index = player.hand.cards.indexOf(tools[0]);\n    return new PlayCardAction(player.id, index, target); \n  }\n\n}\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e915e484c5579fe58fde02e98aefe4ee01b87f4f"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1pxh7w6468=function(){return actualCoverage;};}return actualCoverage;}cov_1pxh7w6468();cov_1pxh7w6468().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_1pxh7w6468().s[1]++;exports.AttachToolTactic=void 0;const game_1=(cov_1pxh7w6468().s[2]++,require("../../game"));const simple_tactics_1=(cov_1pxh7w6468().s[3]++,require("./simple-tactics"));class AttachToolTactic extends(simple_tactics_1.SimpleTactic){useTactic(state,player){cov_1pxh7w6468().f[0]++;const tools=(cov_1pxh7w6468().s[4]++,player.hand.cards.filter(c=>{cov_1pxh7w6468().f[1]++;cov_1pxh7w6468().s[5]++;return(cov_1pxh7w6468().b[0][0]++,c instanceof game_1.TrainerCard)&&(cov_1pxh7w6468().b[0][1]++,c.trainerType===game_1.TrainerType.TOOL);}));cov_1pxh7w6468().s[6]++;if(tools.length===0){cov_1pxh7w6468().b[1][0]++;cov_1pxh7w6468().s[7]++;return;}else{cov_1pxh7w6468().b[1][1]++;}const tool=(cov_1pxh7w6468().s[8]++,tools[0]);const baseScore=(cov_1pxh7w6468().s[9]++,this.getStateScore(state,player.id));const targets=(cov_1pxh7w6468().s[10]++,[]);cov_1pxh7w6468().s[11]++;player.forEachPokemon(game_1.PlayerType.BOTTOM_PLAYER,(cardList,pokemon,target)=>{cov_1pxh7w6468().f[2]++;cov_1pxh7w6468().s[12]++;if(cardList.tool!==undefined){cov_1pxh7w6468().b[2][0]++;cov_1pxh7w6468().s[13]++;return;}else{cov_1pxh7w6468().b[2][1]++;}cov_1pxh7w6468().s[14]++;cardList.tool=tool;const score=(cov_1pxh7w6468().s[15]++,this.getStateScore(state,player.id));cov_1pxh7w6468().s[16]++;cardList.tool=undefined;cov_1pxh7w6468().s[17]++;if(score>baseScore){cov_1pxh7w6468().b[3][0]++;cov_1pxh7w6468().s[18]++;targets.push({target,score});}else{cov_1pxh7w6468().b[3][1]++;}});cov_1pxh7w6468().s[19]++;if(targets.length===0){cov_1pxh7w6468().b[4][0]++;cov_1pxh7w6468().s[20]++;return;}else{cov_1pxh7w6468().b[4][1]++;}cov_1pxh7w6468().s[21]++;targets.sort((a,b)=>{cov_1pxh7w6468().f[3]++;cov_1pxh7w6468().s[22]++;return b.score-a.score;});const target=(cov_1pxh7w6468().s[23]++,targets[0].target);const index=(cov_1pxh7w6468().s[24]++,player.hand.cards.indexOf(tools[0]));cov_1pxh7w6468().s[25]++;return new game_1.PlayCardAction(player.id,index,target);}}cov_1pxh7w6468().s[26]++;exports.AttachToolTactic=AttachToolTactic;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2pvZW15ZXJzY291Z2gvRG9jdW1lbnRzL0dpdEh1Yi9wdGNnLWVwc2QvcHRjZy1zZXJ2ZXIvc3JjL3NpbXBsZS1ib3Qvc2ltcGxlLXRhY3RpY3MvYXR0YWNoLXRvb2wtdGFjdGljLnRzIiwic291cmNlcyI6WyIvVXNlcnMvam9lbXllcnNjb3VnaC9Eb2N1bWVudHMvR2l0SHViL3B0Y2ctZXBzZC9wdGNnLXNlcnZlci9zcmMvc2ltcGxlLWJvdC9zaW1wbGUtdGFjdGljcy9hdHRhY2gtdG9vbC10YWN0aWMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEscUNBQzRDO0FBQzVDLHFEQUFnRDtBQUVoRCxNQUFhLGdCQUFpQixTQUFRLDZCQUFZO0lBRXpDLFNBQVMsQ0FBQyxLQUFZLEVBQUUsTUFBYztRQUMzQyxNQUFNLEtBQUssR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUU7WUFDekMsT0FBTyxDQUFDLFlBQVksa0JBQVcsSUFBSSxDQUFDLENBQUMsV0FBVyxLQUFLLGtCQUFXLENBQUMsSUFBSSxDQUFDO1FBQ3hFLENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxLQUFLLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRTtZQUN0QixPQUFPO1NBQ1I7UUFFRCxNQUFNLElBQUksR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdEIsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBRXZELE1BQU0sT0FBTyxHQUE0QyxFQUFFLENBQUM7UUFDNUQsTUFBTSxDQUFDLGNBQWMsQ0FBQyxpQkFBVSxDQUFDLGFBQWEsRUFBRSxDQUFDLFFBQVEsRUFBRSxPQUFPLEVBQUUsTUFBTSxFQUFFLEVBQUU7WUFDNUUsSUFBSSxRQUFRLENBQUMsSUFBSSxLQUFLLFNBQVMsRUFBRTtnQkFDL0IsT0FBTzthQUNSO1lBRUQsUUFBUSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7WUFDckIsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ25ELFFBQVEsQ0FBQyxJQUFJLEdBQUcsU0FBUyxDQUFDO1lBRTFCLElBQUksS0FBSyxHQUFHLFNBQVMsRUFBRTtnQkFDckIsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDO2FBQ2pDO1FBQ0gsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFJLE9BQU8sQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFO1lBQ3hCLE9BQU87U0FDUjtRQUVELE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUMxQyxNQUFNLE1BQU0sR0FBRyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDO1FBQ2pDLE1BQU0sS0FBSyxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNsRCxPQUFPLElBQUkscUJBQWMsQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLEtBQUssRUFBRSxNQUFNLENBQUMsQ0FBQztJQUN0RCxDQUFDO0NBRUY7QUF2Q0QsNENBdUNDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQWN0aW9uLCBQbGF5ZXIsIFN0YXRlLCBQbGF5Q2FyZEFjdGlvbiwgVHJhaW5lckNhcmQsIFRyYWluZXJUeXBlLFxuICBDYXJkVGFyZ2V0LCBQbGF5ZXJUeXBlfSBmcm9tICcuLi8uLi9nYW1lJztcbmltcG9ydCB7IFNpbXBsZVRhY3RpYyB9IGZyb20gJy4vc2ltcGxlLXRhY3RpY3MnO1xuXG5leHBvcnQgY2xhc3MgQXR0YWNoVG9vbFRhY3RpYyBleHRlbmRzIFNpbXBsZVRhY3RpYyB7XG5cbiAgcHVibGljIHVzZVRhY3RpYyhzdGF0ZTogU3RhdGUsIHBsYXllcjogUGxheWVyKTogQWN0aW9uIHwgdW5kZWZpbmVkIHtcbiAgICBjb25zdCB0b29scyA9IHBsYXllci5oYW5kLmNhcmRzLmZpbHRlcihjID0+IHtcbiAgICAgIHJldHVybiBjIGluc3RhbmNlb2YgVHJhaW5lckNhcmQgJiYgYy50cmFpbmVyVHlwZSA9PT0gVHJhaW5lclR5cGUuVE9PTDtcbiAgICB9KTtcblxuICAgIGlmICh0b29scy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB0b29sID0gdG9vbHNbMF07XG4gICAgY29uc3QgYmFzZVNjb3JlID0gdGhpcy5nZXRTdGF0ZVNjb3JlKHN0YXRlLCBwbGF5ZXIuaWQpO1xuXG4gICAgY29uc3QgdGFyZ2V0czogeyB0YXJnZXQ6IENhcmRUYXJnZXQsIHNjb3JlOiBudW1iZXIgfVtdID0gW107XG4gICAgcGxheWVyLmZvckVhY2hQb2tlbW9uKFBsYXllclR5cGUuQk9UVE9NX1BMQVlFUiwgKGNhcmRMaXN0LCBwb2tlbW9uLCB0YXJnZXQpID0+IHtcbiAgICAgIGlmIChjYXJkTGlzdC50b29sICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjYXJkTGlzdC50b29sID0gdG9vbDtcbiAgICAgIGNvbnN0IHNjb3JlID0gdGhpcy5nZXRTdGF0ZVNjb3JlKHN0YXRlLCBwbGF5ZXIuaWQpO1xuICAgICAgY2FyZExpc3QudG9vbCA9IHVuZGVmaW5lZDtcblxuICAgICAgaWYgKHNjb3JlID4gYmFzZVNjb3JlKSB7XG4gICAgICAgIHRhcmdldHMucHVzaCh7IHRhcmdldCwgc2NvcmUgfSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAodGFyZ2V0cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0YXJnZXRzLnNvcnQoKGEsIGIpID0+IGIuc2NvcmUgLSBhLnNjb3JlKTtcbiAgICBjb25zdCB0YXJnZXQgPSB0YXJnZXRzWzBdLnRhcmdldDtcbiAgICBjb25zdCBpbmRleCA9IHBsYXllci5oYW5kLmNhcmRzLmluZGV4T2YodG9vbHNbMF0pO1xuICAgIHJldHVybiBuZXcgUGxheUNhcmRBY3Rpb24ocGxheWVyLmlkLCBpbmRleCwgdGFyZ2V0KTsgXG4gIH1cblxufVxuIl19
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qb2VteWVyc2NvdWdoL0RvY3VtZW50cy9HaXRIdWIvcHRjZy1lcHNkL3B0Y2ctc2VydmVyL3NyYy9zaW1wbGUtYm90L3NpbXBsZS10YWN0aWNzL2F0dGFjaC10b29sLXRhY3RpYy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiZ3hOQWtCSTtvT0FsQkosS0FBQSxDQUFBLE1BQUEsMEJBQUEsT0FBQSxDQUFBLFlBQUEsQ0FBQSxDQUFBLENBRUEsS0FBQSxDQUFBLGdCQUFBLDBCQUFBLE9BQUEsQ0FBQSxrQkFBQSxDQUFBLENBQUEsQ0FFQSxLQUFhLENBQUEsZ0JBQWIsU0FBc0MsZ0JBQUEsQ0FBQSxZQUF0QyxDQUFrRCxDQUV6QyxTQUFTLENBQUMsS0FBRCxDQUFlLE1BQWYsQ0FBNkIseUJBQzNDLEtBQU0sQ0FBQSxLQUFLLDBCQUFHLE1BQU0sQ0FBQyxJQUFQLENBQVksS0FBWixDQUFrQixNQUFsQixDQUF5QixDQUFDLEVBQUcsaURBQ3pDLE1BQU8sNEJBQUEsQ0FBQyxXQUFZLENBQUEsTUFBQSxDQUFBLFdBQWIsK0JBQTRCLENBQUMsQ0FBQyxXQUFGLEdBQWtCLE1BQUEsQ0FBQSxXQUFBLENBQVksSUFBMUQsQ0FBUCxDQUNELENBRmEsQ0FBSCxDQUFYLENBRDJDLHdCQUszQyxHQUFJLEtBQUssQ0FBQyxNQUFOLEdBQWlCLENBQXJCLENBQXdCLG9EQUN0QixPQUNELENBRkQsaUNBSUEsS0FBTSxDQUFBLElBQUksMEJBQUcsS0FBSyxDQUFDLENBQUQsQ0FBUixDQUFWLENBQ0EsS0FBTSxDQUFBLFNBQVMsMEJBQUcsS0FBSyxhQUFMLENBQW1CLEtBQW5CLENBQTBCLE1BQU0sQ0FBQyxFQUFqQyxDQUFILENBQWYsQ0FFQSxLQUFNLENBQUEsT0FBTywyQkFBNEMsRUFBNUMsQ0FBYixDQVoyQyx5QkFhM0MsTUFBTSxDQUFDLGNBQVAsQ0FBc0IsTUFBQSxDQUFBLFVBQUEsQ0FBVyxhQUFqQyxDQUFnRCxDQUFDLFFBQUQsQ0FBVyxPQUFYLENBQW9CLE1BQXBCLEdBQThCLGtEQUM1RSxHQUFJLFFBQVEsQ0FBQyxJQUFULEdBQWtCLFNBQXRCLENBQWlDLHFEQUMvQixPQUNELENBRkQsaUNBRDRFLHlCQUs1RSxRQUFRLENBQUMsSUFBVCxDQUFnQixJQUFoQixDQUNBLEtBQU0sQ0FBQSxLQUFLLDJCQUFHLEtBQUssYUFBTCxDQUFtQixLQUFuQixDQUEwQixNQUFNLENBQUMsRUFBakMsQ0FBSCxDQUFYLENBTjRFLHlCQU81RSxRQUFRLENBQUMsSUFBVCxDQUFnQixTQUFoQixDQVA0RSx5QkFTNUUsR0FBSSxLQUFLLENBQUcsU0FBWixDQUF1QixxREFDckIsT0FBTyxDQUFDLElBQVIsQ0FBYSxDQUFFLE1BQUYsQ0FBVSxLQUFWLENBQWIsRUFDRCxDQUZELGlDQUdELENBWkQsRUFiMkMseUJBMkIzQyxHQUFJLE9BQU8sQ0FBQyxNQUFSLEdBQW1CLENBQXZCLENBQTBCLHFEQUN4QixPQUNELENBRkQsaUNBM0IyQyx5QkErQjNDLE9BQU8sQ0FBQyxJQUFSLENBQWEsQ0FBQyxDQUFELENBQUksQ0FBSixHQUFVLHdEQUFBLENBQUEsQ0FBQyxDQUFDLEtBQUYsQ0FBVSxDQUFDLENBQUMsS0FBWixDQUFpQixDQUF4QyxFQUNBLEtBQU0sQ0FBQSxNQUFNLDJCQUFHLE9BQU8sQ0FBQyxDQUFELENBQVAsQ0FBVyxNQUFkLENBQVosQ0FDQSxLQUFNLENBQUEsS0FBSywyQkFBRyxNQUFNLENBQUMsSUFBUCxDQUFZLEtBQVosQ0FBa0IsT0FBbEIsQ0FBMEIsS0FBSyxDQUFDLENBQUQsQ0FBL0IsQ0FBSCxDQUFYLENBakMyQyx5QkFrQzNDLE1BQU8sSUFBSSxDQUFBLE1BQUEsQ0FBQSxjQUFKLENBQW1CLE1BQU0sQ0FBQyxFQUExQixDQUE4QixLQUE5QixDQUFxQyxNQUFyQyxDQUFQLENBQ0QsQ0FyQytDLEMseUJBQWxELE9BQUEsQ0FBQSxnQkFBQSxDQUFBLGdCQUFBLEMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBY3Rpb24sIFBsYXllciwgU3RhdGUsIFBsYXlDYXJkQWN0aW9uLCBUcmFpbmVyQ2FyZCwgVHJhaW5lclR5cGUsXG4gIENhcmRUYXJnZXQsIFBsYXllclR5cGV9IGZyb20gJy4uLy4uL2dhbWUnO1xuaW1wb3J0IHsgU2ltcGxlVGFjdGljIH0gZnJvbSAnLi9zaW1wbGUtdGFjdGljcyc7XG5cbmV4cG9ydCBjbGFzcyBBdHRhY2hUb29sVGFjdGljIGV4dGVuZHMgU2ltcGxlVGFjdGljIHtcblxuICBwdWJsaWMgdXNlVGFjdGljKHN0YXRlOiBTdGF0ZSwgcGxheWVyOiBQbGF5ZXIpOiBBY3Rpb24gfCB1bmRlZmluZWQge1xuICAgIGNvbnN0IHRvb2xzID0gcGxheWVyLmhhbmQuY2FyZHMuZmlsdGVyKGMgPT4ge1xuICAgICAgcmV0dXJuIGMgaW5zdGFuY2VvZiBUcmFpbmVyQ2FyZCAmJiBjLnRyYWluZXJUeXBlID09PSBUcmFpbmVyVHlwZS5UT09MO1xuICAgIH0pO1xuXG4gICAgaWYgKHRvb2xzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHRvb2wgPSB0b29sc1swXTtcbiAgICBjb25zdCBiYXNlU2NvcmUgPSB0aGlzLmdldFN0YXRlU2NvcmUoc3RhdGUsIHBsYXllci5pZCk7XG5cbiAgICBjb25zdCB0YXJnZXRzOiB7IHRhcmdldDogQ2FyZFRhcmdldCwgc2NvcmU6IG51bWJlciB9W10gPSBbXTtcbiAgICBwbGF5ZXIuZm9yRWFjaFBva2Vtb24oUGxheWVyVHlwZS5CT1RUT01fUExBWUVSLCAoY2FyZExpc3QsIHBva2Vtb24sIHRhcmdldCkgPT4ge1xuICAgICAgaWYgKGNhcmRMaXN0LnRvb2wgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNhcmRMaXN0LnRvb2wgPSB0b29sO1xuICAgICAgY29uc3Qgc2NvcmUgPSB0aGlzLmdldFN0YXRlU2NvcmUoc3RhdGUsIHBsYXllci5pZCk7XG4gICAgICBjYXJkTGlzdC50b29sID0gdW5kZWZpbmVkO1xuXG4gICAgICBpZiAoc2NvcmUgPiBiYXNlU2NvcmUpIHtcbiAgICAgICAgdGFyZ2V0cy5wdXNoKHsgdGFyZ2V0LCBzY29yZSB9KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmICh0YXJnZXRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRhcmdldHMuc29ydCgoYSwgYikgPT4gYi5zY29yZSAtIGEuc2NvcmUpO1xuICAgIGNvbnN0IHRhcmdldCA9IHRhcmdldHNbMF0udGFyZ2V0O1xuICAgIGNvbnN0IGluZGV4ID0gcGxheWVyLmhhbmQuY2FyZHMuaW5kZXhPZih0b29sc1swXSk7XG4gICAgcmV0dXJuIG5ldyBQbGF5Q2FyZEFjdGlvbihwbGF5ZXIuaWQsIGluZGV4LCB0YXJnZXQpOyBcbiAgfVxuXG59XG4iXX0=