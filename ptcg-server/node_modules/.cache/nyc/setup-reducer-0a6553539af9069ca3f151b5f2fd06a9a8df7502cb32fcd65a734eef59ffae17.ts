"use strict";function cov_2bwhvnu133(){var path="/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/game/store/reducers/setup-reducer.ts";var hash="8577a58098e70abffcc9709588607c9c2d25ed99";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/game/store/reducers/setup-reducer.ts",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:62}},"1":{start:{line:3,column:0},end:{line:3,column:35}},"2":{start:{line:4,column:28},end:{line:4,column:67}},"3":{start:{line:5,column:23},end:{line:5,column:57}},"4":{start:{line:6,column:20},end:{line:6,column:49}},"5":{start:{line:7,column:27},end:{line:7,column:65}},"6":{start:{line:8,column:30},end:{line:8,column:71}},"7":{start:{line:9,column:24},end:{line:9,column:60}},"8":{start:{line:10,column:31},end:{line:10,column:73}},"9":{start:{line:11,column:31},end:{line:11,column:73}},"10":{start:{line:12,column:17},end:{line:12,column:43}},"11":{start:{line:13,column:28},end:{line:13,column:67}},"12":{start:{line:14,column:25},end:{line:14,column:61}},"13":{start:{line:15,column:16},end:{line:15,column:41}},"14":{start:{line:16,column:21},end:{line:16,column:48}},"15":{start:{line:17,column:23},end:{line:17,column:52}},"16":{start:{line:18,column:27},end:{line:18,column:65}},"17":{start:{line:19,column:28},end:{line:19,column:65}},"18":{start:{line:20,column:21},end:{line:20,column:50}},"19":{start:{line:21,column:29},end:{line:21,column:69}},"20":{start:{line:22,column:23},end:{line:22,column:65}},"21":{start:{line:23,column:28},end:{line:23,column:75}},"22":{start:{line:25,column:4},end:{line:27,column:5}},"23":{start:{line:26,column:8},end:{line:26,column:15}},"24":{start:{line:28,column:4},end:{line:28,column:52}},"25":{start:{line:29,column:4},end:{line:31,column:5}},"26":{start:{line:29,column:17},end:{line:29,column:18}},"27":{start:{line:30,column:8},end:{line:30,column:62}},"28":{start:{line:32,column:4},end:{line:34,column:5}},"29":{start:{line:32,column:17},end:{line:32,column:18}},"30":{start:{line:33,column:8},end:{line:33,column:48}},"31":{start:{line:37,column:25},end:{line:37,column:103}},"32":{start:{line:38,column:31},end:{line:38,column:69}},"33":{start:{line:39,column:19},end:{line:39,column:35}},"34":{start:{line:40,column:21},end:{line:40,column:37}},"35":{start:{line:41,column:25},end:{line:41,column:30}},"36":{start:{line:42,column:27},end:{line:42,column:32}},"37":{start:{line:43,column:4},end:{line:86,column:5}},"38":{start:{line:44,column:8},end:{line:52,column:9}},"39":{start:{line:45,column:12},end:{line:45,column:44}},"40":{start:{line:46,column:12},end:{line:51,column:15}},"41":{start:{line:47,column:16},end:{line:47,column:46}},"42":{start:{line:48,column:16},end:{line:48,column:51}},"43":{start:{line:49,column:16},end:{line:49,column:69}},"44":{start:{line:50,column:16},end:{line:50,column:23}},"45":{start:{line:53,column:8},end:{line:61,column:9}},"46":{start:{line:54,column:12},end:{line:54,column:48}},"47":{start:{line:55,column:12},end:{line:60,column:15}},"48":{start:{line:56,column:16},end:{line:56,column:48}},"49":{start:{line:57,column:16},end:{line:57,column:55}},"50":{start:{line:58,column:16},end:{line:58,column:73}},"51":{start:{line:59,column:16},end:{line:59,column:23}},"52":{start:{line:62,column:8},end:{line:73,column:9}},"53":{start:{line:63,column:12},end:{line:63,column:105}},"54":{start:{line:64,column:12},end:{line:72,column:15}},"55":{start:{line:68,column:16},end:{line:70,column:17}},"56":{start:{line:69,column:20},end:{line:69,column:55}},"57":{start:{line:71,column:16},end:{line:71,column:23}},"58":{start:{line:74,column:8},end:{line:85,column:9}},"59":{start:{line:75,column:12},end:{line:75,column:103}},"60":{start:{line:76,column:12},end:{line:84,column:15}},"61":{start:{line:80,column:16},end:{line:82,column:17}},"62":{start:{line:81,column:20},end:{line:81,column:59}},"63":{start:{line:83,column:16},end:{line:83,column:23}},"64":{start:{line:87,column:4},end:{line:94,column:7}},"65":{start:{line:91,column:8},end:{line:91,column:56}},"66":{start:{line:92,column:8},end:{line:92,column:58}},"67":{start:{line:93,column:8},end:{line:93,column:15}},"68":{start:{line:95,column:28},end:{line:95,column:70}},"69":{start:{line:96,column:4},end:{line:96,column:47}},"70":{start:{line:97,column:4},end:{line:106,column:5}},"71":{start:{line:98,column:8},end:{line:98,column:75}},"72":{start:{line:101,column:31},end:{line:101,column:129}},"73":{start:{line:102,column:8},end:{line:105,column:11}},"74":{start:{line:103,column:12},end:{line:103,column:51}},"75":{start:{line:104,column:12},end:{line:104,column:19}},"76":{start:{line:108,column:18},end:{line:108,column:51}},"77":{start:{line:109,column:19},end:{line:109,column:60}},"78":{start:{line:110,column:4},end:{line:110,column:119}},"79":{start:{line:110,column:84},end:{line:110,column:115}},"80":{start:{line:111,column:4},end:{line:111,column:117}},"81":{start:{line:111,column:82},end:{line:111,column:113}},"82":{start:{line:112,column:4},end:{line:112,column:58}},"83":{start:{line:115,column:19},end:{line:115,column:40}},"84":{start:{line:116,column:4},end:{line:116,column:19}},"85":{start:{line:117,column:4},end:{line:117,column:23}},"86":{start:{line:119,column:4},end:{line:123,column:5}},"87":{start:{line:119,column:17},end:{line:119,column:18}},"88":{start:{line:120,column:22},end:{line:120,column:48}},"89":{start:{line:121,column:8},end:{line:121,column:30}},"90":{start:{line:122,column:8},end:{line:122,column:34}},"91":{start:{line:125,column:4},end:{line:129,column:5}},"92":{start:{line:125,column:17},end:{line:125,column:18}},"93":{start:{line:126,column:22},end:{line:126,column:63}},"94":{start:{line:127,column:8},end:{line:127,column:30}},"95":{start:{line:128,column:8},end:{line:128,column:33}},"96":{start:{line:130,column:4},end:{line:130,column:34}},"97":{start:{line:131,column:4},end:{line:131,column:35}},"98":{start:{line:132,column:4},end:{line:132,column:35}},"99":{start:{line:133,column:4},end:{line:133,column:37}},"100":{start:{line:134,column:4},end:{line:134,column:18}},"101":{start:{line:137,column:4},end:{line:197,column:5}},"102":{start:{line:138,column:8},end:{line:163,column:9}},"103":{start:{line:139,column:12},end:{line:141,column:13}},"104":{start:{line:140,column:16},end:{line:140,column:97}},"105":{start:{line:142,column:12},end:{line:144,column:13}},"106":{start:{line:143,column:16},end:{line:143,column:93}},"107":{start:{line:145,column:33},end:{line:145,column:78}},"108":{start:{line:146,column:12},end:{line:148,column:13}},"109":{start:{line:147,column:16},end:{line:147,column:90}},"110":{start:{line:149,column:27},end:{line:149,column:69}},"111":{start:{line:150,column:12},end:{line:150,column:69}},"112":{start:{line:151,column:12},end:{line:151,column:40}},"113":{start:{line:152,column:12},end:{line:155,column:15}},"114":{start:{line:153,column:16},end:{line:153,column:49}},"115":{start:{line:154,column:16},end:{line:154,column:50}},"116":{start:{line:156,column:12},end:{line:156,column:39}},"117":{start:{line:157,column:12},end:{line:161,column:13}},"118":{start:{line:158,column:16},end:{line:158,column:54}},"119":{start:{line:159,column:34},end:{line:159,column:81}},"120":{start:{line:159,column:50},end:{line:159,column:66}},"121":{start:{line:160,column:16},end:{line:160,column:46}},"122":{start:{line:162,column:12},end:{line:162,column:25}},"123":{start:{line:164,column:8},end:{line:196,column:9}},"124":{start:{line:165,column:12},end:{line:167,column:13}},"125":{start:{line:166,column:16},end:{line:166,column:97}},"126":{start:{line:168,column:12},end:{line:170,column:13}},"127":{start:{line:169,column:16},end:{line:169,column:93}},"128":{start:{line:171,column:27},end:{line:171,column:69}},"129":{start:{line:172,column:12},end:{line:172,column:39}},"130":{start:{line:173,column:12},end:{line:195,column:15}},"131":{start:{line:174,column:16},end:{line:179,column:17}},"132":{start:{line:175,column:20},end:{line:175,column:112}},"133":{start:{line:176,column:35},end:{line:176,column:58}},"134":{start:{line:177,column:20},end:{line:177,column:73}},"135":{start:{line:178,column:20},end:{line:178,column:27}},"136":{start:{line:180,column:37},end:{line:180,column:75}},"137":{start:{line:181,column:16},end:{line:183,column:17}},"138":{start:{line:182,column:20},end:{line:182,column:94}},"139":{start:{line:184,column:16},end:{line:184,column:66}},"140":{start:{line:185,column:16},end:{line:185,column:44}},"141":{start:{line:186,column:16},end:{line:189,column:19}},"142":{start:{line:187,column:20},end:{line:187,column:53}},"143":{start:{line:188,column:20},end:{line:188,column:54}},"144":{start:{line:190,column:16},end:{line:194,column:17}},"145":{start:{line:191,column:20},end:{line:191,column:58}},"146":{start:{line:192,column:38},end:{line:192,column:85}},"147":{start:{line:192,column:54},end:{line:192,column:70}},"148":{start:{line:193,column:20},end:{line:193,column:50}},"149":{start:{line:198,column:4},end:{line:198,column:17}},"150":{start:{line:200,column:0},end:{line:200,column:46}}},fnMap:{"0":{name:"putStartingPokemonsAndPrizes",decl:{start:{line:24,column:9},end:{line:24,column:37}},loc:{start:{line:24,column:53},end:{line:35,column:1}},line:24},"1":{name:"setupGame",decl:{start:{line:36,column:10},end:{line:36,column:19}},loc:{start:{line:36,column:40},end:{line:113,column:1}},line:36},"2":{name:"(anonymous_2)",decl:{start:{line:46,column:89},end:{line:46,column:90}},loc:{start:{line:46,column:98},end:{line:51,column:13}},line:46},"3":{name:"(anonymous_3)",decl:{start:{line:55,column:91},end:{line:55,column:92}},loc:{start:{line:55,column:100},end:{line:60,column:13}},line:55},"4":{name:"(anonymous_4)",decl:{start:{line:67,column:15},end:{line:67,column:16}},loc:{start:{line:67,column:26},end:{line:72,column:13}},line:67},"5":{name:"(anonymous_5)",decl:{start:{line:79,column:15},end:{line:79,column:16}},loc:{start:{line:79,column:26},end:{line:84,column:13}},line:79},"6":{name:"(anonymous_6)",decl:{start:{line:90,column:7},end:{line:90,column:8}},loc:{start:{line:90,column:17},end:{line:94,column:5}},line:90},"7":{name:"(anonymous_7)",decl:{start:{line:102,column:50},end:{line:102,column:51}},loc:{start:{line:102,column:63},end:{line:105,column:9}},line:102},"8":{name:"(anonymous_8)",decl:{start:{line:110,column:70},end:{line:110,column:71}},loc:{start:{line:110,column:82},end:{line:110,column:117}},line:110},"9":{name:"(anonymous_9)",decl:{start:{line:111,column:68},end:{line:111,column:69}},loc:{start:{line:111,column:80},end:{line:111,column:115}},line:111},"10":{name:"createPlayer",decl:{start:{line:114,column:9},end:{line:114,column:21}},loc:{start:{line:114,column:32},end:{line:135,column:1}},line:114},"11":{name:"setupPhaseReducer",decl:{start:{line:136,column:9},end:{line:136,column:26}},loc:{start:{line:136,column:49},end:{line:199,column:1}},line:136},"12":{name:"(anonymous_12)",decl:{start:{line:152,column:38},end:{line:152,column:39}},loc:{start:{line:152,column:43},end:{line:155,column:13}},line:152},"13":{name:"(anonymous_13)",decl:{start:{line:159,column:44},end:{line:159,column:45}},loc:{start:{line:159,column:50},end:{line:159,column:66}},line:159},"14":{name:"(anonymous_14)",decl:{start:{line:173,column:145},end:{line:173,column:146}},loc:{start:{line:173,column:153},end:{line:195,column:13}},line:173},"15":{name:"(anonymous_15)",decl:{start:{line:186,column:42},end:{line:186,column:43}},loc:{start:{line:186,column:47},end:{line:189,column:17}},line:186},"16":{name:"(anonymous_16)",decl:{start:{line:192,column:48},end:{line:192,column:49}},loc:{start:{line:192,column:54},end:{line:192,column:70}},line:192}},branchMap:{"0":{loc:{start:{line:25,column:4},end:{line:27,column:5}},type:"if",locations:[{start:{line:25,column:4},end:{line:27,column:5}},{start:{line:25,column:4},end:{line:27,column:5}}],line:25},"1":{loc:{start:{line:43,column:11},end:{line:43,column:47}},type:"binary-expr",locations:[{start:{line:43,column:11},end:{line:43,column:26}},{start:{line:43,column:30},end:{line:43,column:47}}],line:43},"2":{loc:{start:{line:44,column:8},end:{line:52,column:9}},type:"if",locations:[{start:{line:44,column:8},end:{line:52,column:9}},{start:{line:44,column:8},end:{line:52,column:9}}],line:44},"3":{loc:{start:{line:53,column:8},end:{line:61,column:9}},type:"if",locations:[{start:{line:53,column:8},end:{line:61,column:9}},{start:{line:53,column:8},end:{line:61,column:9}}],line:53},"4":{loc:{start:{line:62,column:8},end:{line:73,column:9}},type:"if",locations:[{start:{line:62,column:8},end:{line:73,column:9}},{start:{line:62,column:8},end:{line:73,column:9}}],line:62},"5":{loc:{start:{line:62,column:12},end:{line:62,column:47}},type:"binary-expr",locations:[{start:{line:62,column:12},end:{line:62,column:26}},{start:{line:62,column:30},end:{line:62,column:47}}],line:62},"6":{loc:{start:{line:68,column:16},end:{line:70,column:17}},type:"if",locations:[{start:{line:68,column:16},end:{line:70,column:17}},{start:{line:68,column:16},end:{line:70,column:17}}],line:68},"7":{loc:{start:{line:74,column:8},end:{line:85,column:9}},type:"if",locations:[{start:{line:74,column:8},end:{line:85,column:9}},{start:{line:74,column:8},end:{line:85,column:9}}],line:74},"8":{loc:{start:{line:74,column:12},end:{line:74,column:47}},type:"binary-expr",locations:[{start:{line:74,column:12},end:{line:74,column:27}},{start:{line:74,column:31},end:{line:74,column:47}}],line:74},"9":{loc:{start:{line:80,column:16},end:{line:82,column:17}},type:"if",locations:[{start:{line:80,column:16},end:{line:82,column:17}},{start:{line:80,column:16},end:{line:82,column:17}}],line:80},"10":{loc:{start:{line:97,column:4},end:{line:106,column:5}},type:"if",locations:[{start:{line:97,column:4},end:{line:106,column:5}},{start:{line:97,column:4},end:{line:106,column:5}}],line:97},"11":{loc:{start:{line:103,column:33},end:{line:103,column:50}},type:"cond-expr",locations:[{start:{line:103,column:45},end:{line:103,column:46}},{start:{line:103,column:49},end:{line:103,column:50}}],line:103},"12":{loc:{start:{line:109,column:33},end:{line:109,column:59}},type:"cond-expr",locations:[{start:{line:109,column:54},end:{line:109,column:55}},{start:{line:109,column:58},end:{line:109,column:59}}],line:109},"13":{loc:{start:{line:137,column:4},end:{line:197,column:5}},type:"if",locations:[{start:{line:137,column:4},end:{line:197,column:5}},{start:{line:137,column:4},end:{line:197,column:5}}],line:137},"14":{loc:{start:{line:138,column:8},end:{line:163,column:9}},type:"if",locations:[{start:{line:138,column:8},end:{line:163,column:9}},{start:{line:138,column:8},end:{line:163,column:9}}],line:138},"15":{loc:{start:{line:139,column:12},end:{line:141,column:13}},type:"if",locations:[{start:{line:139,column:12},end:{line:141,column:13}},{start:{line:139,column:12},end:{line:141,column:13}}],line:139},"16":{loc:{start:{line:142,column:12},end:{line:144,column:13}},type:"if",locations:[{start:{line:142,column:12},end:{line:144,column:13}},{start:{line:142,column:12},end:{line:144,column:13}}],line:142},"17":{loc:{start:{line:142,column:16},end:{line:142,column:84}},type:"binary-expr",locations:[{start:{line:142,column:16},end:{line:142,column:41}},{start:{line:142,column:45},end:{line:142,column:84}}],line:142},"18":{loc:{start:{line:146,column:12},end:{line:148,column:13}},type:"if",locations:[{start:{line:146,column:12},end:{line:148,column:13}},{start:{line:146,column:12},end:{line:148,column:13}}],line:146},"19":{loc:{start:{line:157,column:12},end:{line:161,column:13}},type:"if",locations:[{start:{line:157,column:12},end:{line:161,column:13}},{start:{line:157,column:12},end:{line:161,column:13}}],line:157},"20":{loc:{start:{line:164,column:8},end:{line:196,column:9}},type:"if",locations:[{start:{line:164,column:8},end:{line:196,column:9}},{start:{line:164,column:8},end:{line:196,column:9}}],line:164},"21":{loc:{start:{line:165,column:12},end:{line:167,column:13}},type:"if",locations:[{start:{line:165,column:12},end:{line:167,column:13}},{start:{line:165,column:12},end:{line:167,column:13}}],line:165},"22":{loc:{start:{line:168,column:12},end:{line:170,column:13}},type:"if",locations:[{start:{line:168,column:12},end:{line:170,column:13}},{start:{line:168,column:12},end:{line:170,column:13}}],line:168},"23":{loc:{start:{line:168,column:16},end:{line:168,column:84}},type:"binary-expr",locations:[{start:{line:168,column:16},end:{line:168,column:41}},{start:{line:168,column:45},end:{line:168,column:84}}],line:168},"24":{loc:{start:{line:174,column:16},end:{line:179,column:17}},type:"if",locations:[{start:{line:174,column:16},end:{line:179,column:17}},{start:{line:174,column:16},end:{line:179,column:17}}],line:174},"25":{loc:{start:{line:181,column:16},end:{line:183,column:17}},type:"if",locations:[{start:{line:181,column:16},end:{line:183,column:17}},{start:{line:181,column:16},end:{line:183,column:17}}],line:181},"26":{loc:{start:{line:190,column:16},end:{line:194,column:17}},type:"if",locations:[{start:{line:190,column:16},end:{line:194,column:17}},{start:{line:190,column:16},end:{line:194,column:17}}],line:190}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0]},inputSourceMap:{version:3,file:"/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/game/store/reducers/setup-reducer.ts",sources:["/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/game/store/reducers/setup-reducer.ts"],names:[],mappings:"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",sourcesContent:["import { Action } from '../actions/action';\nimport { AddPlayerAction } from '../actions/add-player-action';\nimport { AlertPrompt } from '../prompts/alert-prompt';\nimport { Card } from '../card/card';\nimport { CardList } from '../state/card-list';\nimport { CoinFlipPrompt } from '../prompts/coin-flip-prompt';\nimport { ChooseCardsPrompt } from '../prompts/choose-cards-prompt';\nimport { DeckAnalyser } from '../../cards/deck-analyser';\nimport { InvitePlayerAction } from '../actions/invite-player-action';\nimport { InvitePlayerPrompt } from '../prompts/invite-player-prompt';\nimport { Player } from '../state/player';\nimport { ShowCardsPrompt } from '../prompts/show-cards-prompt';\nimport { ShuffleDeckPrompt } from '../prompts/shuffle-prompt';\nimport { State, GamePhase, GameWinner } from '../state/state';\nimport { GameError } from '../../game-error';\nimport { GameMessage, GameLog } from '../../game-message';\nimport { PlayerType } from '../actions/play-card-action';\nimport { PokemonCardList } from '../state/pokemon-card-list';\nimport { StoreLike } from '../store-like';\nimport { SuperType, Stage } from '../card/card-types';\nimport { WhoBeginsEffect } from '../effects/game-phase-effects';\nimport { endGame } from '../effect-reducers/check-effect';\nimport { initNextTurn } from '../effect-reducers/game-phase-effect';\n\n\nfunction putStartingPokemonsAndPrizes(player: Player, cards: Card[]): void {\n  if (cards.length === 0) {\n    return;\n  }\n  player.hand.moveCardTo(cards[0], player.active);\n  for (let i = 1; i < cards.length; i++) {\n    player.hand.moveCardTo(cards[i], player.bench[i - 1]);\n  }\n  for (let i = 0; i < 6; i++) {\n    player.deck.moveTo(player.prizes[i], 1);\n  }\n}\n\nfunction* setupGame(next: Function, store: StoreLike, state: State): IterableIterator<State> {\n  const basicPokemon = {superType: SuperType.POKEMON, stage: Stage.BASIC};\n  const chooseCardsOptions = { min: 1, max: 6, allowCancel: false };\n  const player = state.players[0];\n  const opponent = state.players[1];\n\n  let playerHasBasic = false;\n  let opponentHasBasic = false;\n\n  while (!playerHasBasic || !opponentHasBasic) {\n    if (!playerHasBasic) {\n      player.hand.moveTo(player.deck);\n      yield store.prompt(state, new ShuffleDeckPrompt(player.id), order => {\n        player.deck.applyOrder(order);\n        player.deck.moveTo(player.hand, 7);\n        playerHasBasic = player.hand.count(basicPokemon) > 0;\n        next();\n      });\n    }\n\n    if (!opponentHasBasic) {\n      opponent.hand.moveTo(opponent.deck);\n      yield store.prompt(state, new ShuffleDeckPrompt(opponent.id), order => {\n        opponent.deck.applyOrder(order);\n        opponent.deck.moveTo(opponent.hand, 7);\n        opponentHasBasic = opponent.hand.count(basicPokemon) > 0;\n        next();\n      });\n    }\n\n    if (playerHasBasic && !opponentHasBasic) {\n      store.log(state, GameLog.LOG_SETUP_NO_BASIC_POKEMON, { name: opponent.name });\n      yield store.prompt(state, [\n        new ShowCardsPrompt(player.id, GameMessage.SETUP_OPPONENT_NO_BASIC,\n          opponent.hand.cards, { allowCancel: true }),\n        new AlertPrompt(opponent.id, GameMessage.SETUP_PLAYER_NO_BASIC)\n      ], results => {\n        if (results[0]) {\n          player.deck.moveTo(player.hand, 1);\n        }\n        next();\n      });\n    }\n\n    if (!playerHasBasic && opponentHasBasic) {\n      store.log(state, GameLog.LOG_SETUP_NO_BASIC_POKEMON, { name: player.name });\n      yield store.prompt(state, [\n        new ShowCardsPrompt(opponent.id, GameMessage.SETUP_OPPONENT_NO_BASIC,\n          player.hand.cards, { allowCancel: true }),\n        new AlertPrompt(player.id, GameMessage.SETUP_PLAYER_NO_BASIC)\n      ], results => {\n        if (results[0]) {\n          opponent.deck.moveTo(opponent.hand, 1);\n        }\n        next();\n      });\n    }\n  }\n\n  yield store.prompt(state, [\n    new ChooseCardsPrompt(player.id, GameMessage.CHOOSE_STARTING_POKEMONS,\n      player.hand, basicPokemon, chooseCardsOptions),\n    new ChooseCardsPrompt(opponent.id, GameMessage.CHOOSE_STARTING_POKEMONS,\n      opponent.hand, basicPokemon, chooseCardsOptions)\n  ], choice => {\n    putStartingPokemonsAndPrizes(player, choice[0]);\n    putStartingPokemonsAndPrizes(opponent, choice[1]);\n    next();\n  });\n\n  const whoBeginsEffect = new WhoBeginsEffect();\n  store.reduceEffect(state, whoBeginsEffect);\n\n  if (whoBeginsEffect.player) {\n    state.activePlayer = state.players.indexOf(whoBeginsEffect.player);\n  } else {\n    const coinFlipPrompt = new CoinFlipPrompt(player.id, GameMessage.SETUP_WHO_BEGINS_FLIP);\n    yield store.prompt(state, coinFlipPrompt, whoBegins => {\n      state.activePlayer = whoBegins ? 0 : 1;\n      next();\n    });\n  }\n\n  // Set initial Pokemon Played Turn, so players can't evolve during first turn\n  const first = state.players[state.activePlayer];\n  const second = state.players[state.activePlayer ? 0 : 1];\n  first.forEachPokemon(PlayerType.BOTTOM_PLAYER, cardList => { cardList.pokemonPlayedTurn = 1; });\n  second.forEachPokemon(PlayerType.TOP_PLAYER, cardList => { cardList.pokemonPlayedTurn = 2; });\n\n  return initNextTurn(store, state);\n}\n\nfunction createPlayer(id: number, name: string): Player {\n  const player = new Player();\n  player.id = id;\n  player.name = name;\n\n  // Empty prizes, places for 6 cards\n  for (let i = 0; i < 6; i++) {\n    const prize = new CardList();\n    prize.isSecret = true;\n    player.prizes.push(prize);\n  }\n\n  // Empty bench, places for 5 pokemons\n  for (let i = 0; i < 5; i++) {\n    const bench = new PokemonCardList();\n    bench.isPublic = true;\n    player.bench.push(bench);\n  }\n\n  player.active.isPublic = true;\n  player.discard.isPublic = true;\n  player.stadium.isPublic = true;\n  player.supporter.isPublic = true;\n  return player;\n}\n\nexport function setupPhaseReducer(store: StoreLike, state: State, action: Action): State {\n\n  if (state.phase === GamePhase.WAITING_FOR_PLAYERS) {\n\n    if (action instanceof AddPlayerAction) {\n      if (state.players.length >= 2) {\n        throw new GameError(GameMessage.MAX_PLAYERS_REACHED);\n      }\n\n      if (state.players.length == 1 && state.players[0].id === action.clientId) {\n        throw new GameError(GameMessage.ALREADY_PLAYING);\n      }\n\n      const deckAnalyser = new DeckAnalyser(action.deck);\n      if (!deckAnalyser.isValid()) {\n        throw new GameError(GameMessage.INVALID_DECK);\n      }\n\n      const player = createPlayer(action.clientId, action.name);\n      player.deck = CardList.fromList(action.deck);\n      player.deck.isSecret = true;\n      player.deck.cards.forEach(c => {\n        state.cardNames.push(c.fullName);\n        c.id = state.cardNames.length - 1;\n      });\n\n      state.players.push(player);\n\n      if (state.players.length === 2) {\n        state.phase = GamePhase.SETUP;\n        const generator = setupGame(() => generator.next(), store, state);\n        return generator.next().value;\n      }\n\n      return state;\n    }\n\n    if (action instanceof InvitePlayerAction) {\n      if (state.players.length >= 2) {\n        throw new GameError(GameMessage.MAX_PLAYERS_REACHED);\n      }\n\n      if (state.players.length == 1 && state.players[0].id === action.clientId) {\n        throw new GameError(GameMessage.ALREADY_PLAYING);\n      }\n\n      const player = createPlayer(action.clientId, action.name);\n      state.players.push(player);\n\n      state = store.prompt(state, new InvitePlayerPrompt(\n        player.id,\n        GameMessage.INVITATION_MESSAGE\n      ), deck => {\n        if (deck === null) {\n          store.log(state, GameLog.LOG_INVITATION_NOT_ACCEPTED, { name: player.name });\n          const winner = GameWinner.NONE;\n          state = endGame(store, state, winner);\n          return;\n        }\n        const deckAnalyser = new DeckAnalyser(deck);\n        if (!deckAnalyser.isValid()) {\n          throw new GameError(GameMessage.INVALID_DECK);\n        }\n\n        player.deck = CardList.fromList(deck);\n        player.deck.isSecret = true;\n        player.deck.cards.forEach(c => {\n          state.cardNames.push(c.fullName);\n          c.id = state.cardNames.length - 1;\n        });\n\n        if (state.players.length === 2) {\n          state.phase = GamePhase.SETUP;\n          const generator = setupGame(() => generator.next(), store, state);\n          return generator.next().value;\n        }\n      });\n    }\n  }\n\n  return state;\n}\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8577a58098e70abffcc9709588607c9c2d25ed99"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2bwhvnu133=function(){return actualCoverage;};}return actualCoverage;}cov_2bwhvnu133();cov_2bwhvnu133().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_2bwhvnu133().s[1]++;exports.setupPhaseReducer=void 0;const add_player_action_1=(cov_2bwhvnu133().s[2]++,require("../actions/add-player-action"));const alert_prompt_1=(cov_2bwhvnu133().s[3]++,require("../prompts/alert-prompt"));const card_list_1=(cov_2bwhvnu133().s[4]++,require("../state/card-list"));const coin_flip_prompt_1=(cov_2bwhvnu133().s[5]++,require("../prompts/coin-flip-prompt"));const choose_cards_prompt_1=(cov_2bwhvnu133().s[6]++,require("../prompts/choose-cards-prompt"));const deck_analyser_1=(cov_2bwhvnu133().s[7]++,require("../../cards/deck-analyser"));const invite_player_action_1=(cov_2bwhvnu133().s[8]++,require("../actions/invite-player-action"));const invite_player_prompt_1=(cov_2bwhvnu133().s[9]++,require("../prompts/invite-player-prompt"));const player_1=(cov_2bwhvnu133().s[10]++,require("../state/player"));const show_cards_prompt_1=(cov_2bwhvnu133().s[11]++,require("../prompts/show-cards-prompt"));const shuffle_prompt_1=(cov_2bwhvnu133().s[12]++,require("../prompts/shuffle-prompt"));const state_1=(cov_2bwhvnu133().s[13]++,require("../state/state"));const game_error_1=(cov_2bwhvnu133().s[14]++,require("../../game-error"));const game_message_1=(cov_2bwhvnu133().s[15]++,require("../../game-message"));const play_card_action_1=(cov_2bwhvnu133().s[16]++,require("../actions/play-card-action"));const pokemon_card_list_1=(cov_2bwhvnu133().s[17]++,require("../state/pokemon-card-list"));const card_types_1=(cov_2bwhvnu133().s[18]++,require("../card/card-types"));const game_phase_effects_1=(cov_2bwhvnu133().s[19]++,require("../effects/game-phase-effects"));const check_effect_1=(cov_2bwhvnu133().s[20]++,require("../effect-reducers/check-effect"));const game_phase_effect_1=(cov_2bwhvnu133().s[21]++,require("../effect-reducers/game-phase-effect"));function putStartingPokemonsAndPrizes(player,cards){cov_2bwhvnu133().f[0]++;cov_2bwhvnu133().s[22]++;if(cards.length===0){cov_2bwhvnu133().b[0][0]++;cov_2bwhvnu133().s[23]++;return;}else{cov_2bwhvnu133().b[0][1]++;}cov_2bwhvnu133().s[24]++;player.hand.moveCardTo(cards[0],player.active);cov_2bwhvnu133().s[25]++;for(let i=(cov_2bwhvnu133().s[26]++,1);i<cards.length;i++){cov_2bwhvnu133().s[27]++;player.hand.moveCardTo(cards[i],player.bench[i-1]);}cov_2bwhvnu133().s[28]++;for(let i=(cov_2bwhvnu133().s[29]++,0);i<6;i++){cov_2bwhvnu133().s[30]++;player.deck.moveTo(player.prizes[i],1);}}function*setupGame(next,store,state){cov_2bwhvnu133().f[1]++;const basicPokemon=(cov_2bwhvnu133().s[31]++,{superType:card_types_1.SuperType.POKEMON,stage:card_types_1.Stage.BASIC});const chooseCardsOptions=(cov_2bwhvnu133().s[32]++,{min:1,max:6,allowCancel:false});const player=(cov_2bwhvnu133().s[33]++,state.players[0]);const opponent=(cov_2bwhvnu133().s[34]++,state.players[1]);let playerHasBasic=(cov_2bwhvnu133().s[35]++,false);let opponentHasBasic=(cov_2bwhvnu133().s[36]++,false);cov_2bwhvnu133().s[37]++;while((cov_2bwhvnu133().b[1][0]++,!playerHasBasic)||(cov_2bwhvnu133().b[1][1]++,!opponentHasBasic)){cov_2bwhvnu133().s[38]++;if(!playerHasBasic){cov_2bwhvnu133().b[2][0]++;cov_2bwhvnu133().s[39]++;player.hand.moveTo(player.deck);cov_2bwhvnu133().s[40]++;yield store.prompt(state,new shuffle_prompt_1.ShuffleDeckPrompt(player.id),order=>{cov_2bwhvnu133().f[2]++;cov_2bwhvnu133().s[41]++;player.deck.applyOrder(order);cov_2bwhvnu133().s[42]++;player.deck.moveTo(player.hand,7);cov_2bwhvnu133().s[43]++;playerHasBasic=player.hand.count(basicPokemon)>0;cov_2bwhvnu133().s[44]++;next();});}else{cov_2bwhvnu133().b[2][1]++;}cov_2bwhvnu133().s[45]++;if(!opponentHasBasic){cov_2bwhvnu133().b[3][0]++;cov_2bwhvnu133().s[46]++;opponent.hand.moveTo(opponent.deck);cov_2bwhvnu133().s[47]++;yield store.prompt(state,new shuffle_prompt_1.ShuffleDeckPrompt(opponent.id),order=>{cov_2bwhvnu133().f[3]++;cov_2bwhvnu133().s[48]++;opponent.deck.applyOrder(order);cov_2bwhvnu133().s[49]++;opponent.deck.moveTo(opponent.hand,7);cov_2bwhvnu133().s[50]++;opponentHasBasic=opponent.hand.count(basicPokemon)>0;cov_2bwhvnu133().s[51]++;next();});}else{cov_2bwhvnu133().b[3][1]++;}cov_2bwhvnu133().s[52]++;if((cov_2bwhvnu133().b[5][0]++,playerHasBasic)&&(cov_2bwhvnu133().b[5][1]++,!opponentHasBasic)){cov_2bwhvnu133().b[4][0]++;cov_2bwhvnu133().s[53]++;store.log(state,game_message_1.GameLog.LOG_SETUP_NO_BASIC_POKEMON,{name:opponent.name});cov_2bwhvnu133().s[54]++;yield store.prompt(state,[new show_cards_prompt_1.ShowCardsPrompt(player.id,game_message_1.GameMessage.SETUP_OPPONENT_NO_BASIC,opponent.hand.cards,{allowCancel:true}),new alert_prompt_1.AlertPrompt(opponent.id,game_message_1.GameMessage.SETUP_PLAYER_NO_BASIC)],results=>{cov_2bwhvnu133().f[4]++;cov_2bwhvnu133().s[55]++;if(results[0]){cov_2bwhvnu133().b[6][0]++;cov_2bwhvnu133().s[56]++;player.deck.moveTo(player.hand,1);}else{cov_2bwhvnu133().b[6][1]++;}cov_2bwhvnu133().s[57]++;next();});}else{cov_2bwhvnu133().b[4][1]++;}cov_2bwhvnu133().s[58]++;if((cov_2bwhvnu133().b[8][0]++,!playerHasBasic)&&(cov_2bwhvnu133().b[8][1]++,opponentHasBasic)){cov_2bwhvnu133().b[7][0]++;cov_2bwhvnu133().s[59]++;store.log(state,game_message_1.GameLog.LOG_SETUP_NO_BASIC_POKEMON,{name:player.name});cov_2bwhvnu133().s[60]++;yield store.prompt(state,[new show_cards_prompt_1.ShowCardsPrompt(opponent.id,game_message_1.GameMessage.SETUP_OPPONENT_NO_BASIC,player.hand.cards,{allowCancel:true}),new alert_prompt_1.AlertPrompt(player.id,game_message_1.GameMessage.SETUP_PLAYER_NO_BASIC)],results=>{cov_2bwhvnu133().f[5]++;cov_2bwhvnu133().s[61]++;if(results[0]){cov_2bwhvnu133().b[9][0]++;cov_2bwhvnu133().s[62]++;opponent.deck.moveTo(opponent.hand,1);}else{cov_2bwhvnu133().b[9][1]++;}cov_2bwhvnu133().s[63]++;next();});}else{cov_2bwhvnu133().b[7][1]++;}}cov_2bwhvnu133().s[64]++;yield store.prompt(state,[new choose_cards_prompt_1.ChooseCardsPrompt(player.id,game_message_1.GameMessage.CHOOSE_STARTING_POKEMONS,player.hand,basicPokemon,chooseCardsOptions),new choose_cards_prompt_1.ChooseCardsPrompt(opponent.id,game_message_1.GameMessage.CHOOSE_STARTING_POKEMONS,opponent.hand,basicPokemon,chooseCardsOptions)],choice=>{cov_2bwhvnu133().f[6]++;cov_2bwhvnu133().s[65]++;putStartingPokemonsAndPrizes(player,choice[0]);cov_2bwhvnu133().s[66]++;putStartingPokemonsAndPrizes(opponent,choice[1]);cov_2bwhvnu133().s[67]++;next();});const whoBeginsEffect=(cov_2bwhvnu133().s[68]++,new game_phase_effects_1.WhoBeginsEffect());cov_2bwhvnu133().s[69]++;store.reduceEffect(state,whoBeginsEffect);cov_2bwhvnu133().s[70]++;if(whoBeginsEffect.player){cov_2bwhvnu133().b[10][0]++;cov_2bwhvnu133().s[71]++;state.activePlayer=state.players.indexOf(whoBeginsEffect.player);}else{cov_2bwhvnu133().b[10][1]++;const coinFlipPrompt=(cov_2bwhvnu133().s[72]++,new coin_flip_prompt_1.CoinFlipPrompt(player.id,game_message_1.GameMessage.SETUP_WHO_BEGINS_FLIP));cov_2bwhvnu133().s[73]++;yield store.prompt(state,coinFlipPrompt,whoBegins=>{cov_2bwhvnu133().f[7]++;cov_2bwhvnu133().s[74]++;state.activePlayer=whoBegins?(cov_2bwhvnu133().b[11][0]++,0):(cov_2bwhvnu133().b[11][1]++,1);cov_2bwhvnu133().s[75]++;next();});}// Set initial Pokemon Played Turn, so players can't evolve during first turn
const first=(cov_2bwhvnu133().s[76]++,state.players[state.activePlayer]);const second=(cov_2bwhvnu133().s[77]++,state.players[state.activePlayer?(cov_2bwhvnu133().b[12][0]++,0):(cov_2bwhvnu133().b[12][1]++,1)]);cov_2bwhvnu133().s[78]++;first.forEachPokemon(play_card_action_1.PlayerType.BOTTOM_PLAYER,cardList=>{cov_2bwhvnu133().f[8]++;cov_2bwhvnu133().s[79]++;cardList.pokemonPlayedTurn=1;});cov_2bwhvnu133().s[80]++;second.forEachPokemon(play_card_action_1.PlayerType.TOP_PLAYER,cardList=>{cov_2bwhvnu133().f[9]++;cov_2bwhvnu133().s[81]++;cardList.pokemonPlayedTurn=2;});cov_2bwhvnu133().s[82]++;return game_phase_effect_1.initNextTurn(store,state);}function createPlayer(id,name){cov_2bwhvnu133().f[10]++;const player=(cov_2bwhvnu133().s[83]++,new player_1.Player());cov_2bwhvnu133().s[84]++;player.id=id;cov_2bwhvnu133().s[85]++;player.name=name;// Empty prizes, places for 6 cards
cov_2bwhvnu133().s[86]++;for(let i=(cov_2bwhvnu133().s[87]++,0);i<6;i++){const prize=(cov_2bwhvnu133().s[88]++,new card_list_1.CardList());cov_2bwhvnu133().s[89]++;prize.isSecret=true;cov_2bwhvnu133().s[90]++;player.prizes.push(prize);}// Empty bench, places for 5 pokemons
cov_2bwhvnu133().s[91]++;for(let i=(cov_2bwhvnu133().s[92]++,0);i<5;i++){const bench=(cov_2bwhvnu133().s[93]++,new pokemon_card_list_1.PokemonCardList());cov_2bwhvnu133().s[94]++;bench.isPublic=true;cov_2bwhvnu133().s[95]++;player.bench.push(bench);}cov_2bwhvnu133().s[96]++;player.active.isPublic=true;cov_2bwhvnu133().s[97]++;player.discard.isPublic=true;cov_2bwhvnu133().s[98]++;player.stadium.isPublic=true;cov_2bwhvnu133().s[99]++;player.supporter.isPublic=true;cov_2bwhvnu133().s[100]++;return player;}function setupPhaseReducer(store,state,action){cov_2bwhvnu133().f[11]++;cov_2bwhvnu133().s[101]++;if(state.phase===state_1.GamePhase.WAITING_FOR_PLAYERS){cov_2bwhvnu133().b[13][0]++;cov_2bwhvnu133().s[102]++;if(action instanceof add_player_action_1.AddPlayerAction){cov_2bwhvnu133().b[14][0]++;cov_2bwhvnu133().s[103]++;if(state.players.length>=2){cov_2bwhvnu133().b[15][0]++;cov_2bwhvnu133().s[104]++;throw new game_error_1.GameError(game_message_1.GameMessage.MAX_PLAYERS_REACHED);}else{cov_2bwhvnu133().b[15][1]++;}cov_2bwhvnu133().s[105]++;if((cov_2bwhvnu133().b[17][0]++,state.players.length==1)&&(cov_2bwhvnu133().b[17][1]++,state.players[0].id===action.clientId)){cov_2bwhvnu133().b[16][0]++;cov_2bwhvnu133().s[106]++;throw new game_error_1.GameError(game_message_1.GameMessage.ALREADY_PLAYING);}else{cov_2bwhvnu133().b[16][1]++;}const deckAnalyser=(cov_2bwhvnu133().s[107]++,new deck_analyser_1.DeckAnalyser(action.deck));cov_2bwhvnu133().s[108]++;if(!deckAnalyser.isValid()){cov_2bwhvnu133().b[18][0]++;cov_2bwhvnu133().s[109]++;throw new game_error_1.GameError(game_message_1.GameMessage.INVALID_DECK);}else{cov_2bwhvnu133().b[18][1]++;}const player=(cov_2bwhvnu133().s[110]++,createPlayer(action.clientId,action.name));cov_2bwhvnu133().s[111]++;player.deck=card_list_1.CardList.fromList(action.deck);cov_2bwhvnu133().s[112]++;player.deck.isSecret=true;cov_2bwhvnu133().s[113]++;player.deck.cards.forEach(c=>{cov_2bwhvnu133().f[12]++;cov_2bwhvnu133().s[114]++;state.cardNames.push(c.fullName);cov_2bwhvnu133().s[115]++;c.id=state.cardNames.length-1;});cov_2bwhvnu133().s[116]++;state.players.push(player);cov_2bwhvnu133().s[117]++;if(state.players.length===2){cov_2bwhvnu133().b[19][0]++;cov_2bwhvnu133().s[118]++;state.phase=state_1.GamePhase.SETUP;const generator=(cov_2bwhvnu133().s[119]++,setupGame(()=>{cov_2bwhvnu133().f[13]++;cov_2bwhvnu133().s[120]++;return generator.next();},store,state));cov_2bwhvnu133().s[121]++;return generator.next().value;}else{cov_2bwhvnu133().b[19][1]++;}cov_2bwhvnu133().s[122]++;return state;}else{cov_2bwhvnu133().b[14][1]++;}cov_2bwhvnu133().s[123]++;if(action instanceof invite_player_action_1.InvitePlayerAction){cov_2bwhvnu133().b[20][0]++;cov_2bwhvnu133().s[124]++;if(state.players.length>=2){cov_2bwhvnu133().b[21][0]++;cov_2bwhvnu133().s[125]++;throw new game_error_1.GameError(game_message_1.GameMessage.MAX_PLAYERS_REACHED);}else{cov_2bwhvnu133().b[21][1]++;}cov_2bwhvnu133().s[126]++;if((cov_2bwhvnu133().b[23][0]++,state.players.length==1)&&(cov_2bwhvnu133().b[23][1]++,state.players[0].id===action.clientId)){cov_2bwhvnu133().b[22][0]++;cov_2bwhvnu133().s[127]++;throw new game_error_1.GameError(game_message_1.GameMessage.ALREADY_PLAYING);}else{cov_2bwhvnu133().b[22][1]++;}const player=(cov_2bwhvnu133().s[128]++,createPlayer(action.clientId,action.name));cov_2bwhvnu133().s[129]++;state.players.push(player);cov_2bwhvnu133().s[130]++;state=store.prompt(state,new invite_player_prompt_1.InvitePlayerPrompt(player.id,game_message_1.GameMessage.INVITATION_MESSAGE),deck=>{cov_2bwhvnu133().f[14]++;cov_2bwhvnu133().s[131]++;if(deck===null){cov_2bwhvnu133().b[24][0]++;cov_2bwhvnu133().s[132]++;store.log(state,game_message_1.GameLog.LOG_INVITATION_NOT_ACCEPTED,{name:player.name});const winner=(cov_2bwhvnu133().s[133]++,state_1.GameWinner.NONE);cov_2bwhvnu133().s[134]++;state=check_effect_1.endGame(store,state,winner);cov_2bwhvnu133().s[135]++;return;}else{cov_2bwhvnu133().b[24][1]++;}const deckAnalyser=(cov_2bwhvnu133().s[136]++,new deck_analyser_1.DeckAnalyser(deck));cov_2bwhvnu133().s[137]++;if(!deckAnalyser.isValid()){cov_2bwhvnu133().b[25][0]++;cov_2bwhvnu133().s[138]++;throw new game_error_1.GameError(game_message_1.GameMessage.INVALID_DECK);}else{cov_2bwhvnu133().b[25][1]++;}cov_2bwhvnu133().s[139]++;player.deck=card_list_1.CardList.fromList(deck);cov_2bwhvnu133().s[140]++;player.deck.isSecret=true;cov_2bwhvnu133().s[141]++;player.deck.cards.forEach(c=>{cov_2bwhvnu133().f[15]++;cov_2bwhvnu133().s[142]++;state.cardNames.push(c.fullName);cov_2bwhvnu133().s[143]++;c.id=state.cardNames.length-1;});cov_2bwhvnu133().s[144]++;if(state.players.length===2){cov_2bwhvnu133().b[26][0]++;cov_2bwhvnu133().s[145]++;state.phase=state_1.GamePhase.SETUP;const generator=(cov_2bwhvnu133().s[146]++,setupGame(()=>{cov_2bwhvnu133().f[16]++;cov_2bwhvnu133().s[147]++;return generator.next();},store,state));cov_2bwhvnu133().s[148]++;return generator.next().value;}else{cov_2bwhvnu133().b[26][1]++;}});}else{cov_2bwhvnu133().b[20][1]++;}}else{cov_2bwhvnu133().b[13][1]++;}cov_2bwhvnu133().s[149]++;return state;}cov_2bwhvnu133().s[150]++;exports.setupPhaseReducer=setupPhaseReducer;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2pvZW15ZXJzY291Z2gvRG9jdW1lbnRzL0dpdEh1Yi9wdGNnLWVwc2QvcHRjZy1zZXJ2ZXIvc3JjL2dhbWUvc3RvcmUvcmVkdWNlcnMvc2V0dXAtcmVkdWNlci50cyIsInNvdXJjZXMiOlsiL1VzZXJzL2pvZW15ZXJzY291Z2gvRG9jdW1lbnRzL0dpdEh1Yi9wdGNnLWVwc2QvcHRjZy1zZXJ2ZXIvc3JjL2dhbWUvc3RvcmUvcmVkdWNlcnMvc2V0dXAtcmVkdWNlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFDQSxvRUFBK0Q7QUFDL0QsMERBQXNEO0FBRXRELGtEQUE4QztBQUM5QyxrRUFBNkQ7QUFDN0Qsd0VBQW1FO0FBQ25FLDZEQUF5RDtBQUN6RCwwRUFBcUU7QUFDckUsMEVBQXFFO0FBQ3JFLDRDQUF5QztBQUN6QyxvRUFBK0Q7QUFDL0QsOERBQThEO0FBQzlELDBDQUE4RDtBQUM5RCxpREFBNkM7QUFDN0MscURBQTBEO0FBQzFELGtFQUF5RDtBQUN6RCxrRUFBNkQ7QUFFN0QsbURBQXNEO0FBQ3RELHNFQUFnRTtBQUNoRSxrRUFBMEQ7QUFDMUQsNEVBQW9FO0FBR3BFLFNBQVMsNEJBQTRCLENBQUMsTUFBYyxFQUFFLEtBQWE7SUFDakUsSUFBSSxLQUFLLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRTtRQUN0QixPQUFPO0tBQ1I7SUFDRCxNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ2hELEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxLQUFLLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO1FBQ3JDLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0tBQ3ZE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TSxDQUFDLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO2dCQUM1QixNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUU7b0JBQzVCLEtBQUssQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQztvQkFDakMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxLQUFLLENBQUMsU0FBUyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7Z0JBQ3BDLENBQUMsQ0FBQyxDQUFDO2dCQUVILElBQUksS0FBSyxDQUFDLE9BQU8sQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFO29CQUM5QixLQUFLLENBQUMsS0FBSyxHQUFHLGlCQUFTLENBQUMsS0FBSyxDQUFDO29CQUM5QixNQUFNLFNBQVMsR0FBRyxTQUFTLENBQUMsR0FBRyxFQUFFLENBQUMsU0FBUyxDQUFDLElBQUksRUFBRSxFQUFFLEtBQUssRUFBRSxLQUFLLENBQUMsQ0FBQztvQkFDbEUsT0FBTyxTQUFTLENBQUMsSUFBSSxFQUFFLENBQUMsS0FBSyxDQUFDO2lCQUMvQjtZQUNILENBQUMsQ0FBQyxDQUFDO1NBQ0o7S0FDRjtJQUVELE9BQU8sS0FBSyxDQUFDO0FBQ2YsQ0FBQztBQWpGRCw4Q0FpRkMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBY3Rpb24gfSBmcm9tICcuLi9hY3Rpb25zL2FjdGlvbic7XG5pbXBvcnQgeyBBZGRQbGF5ZXJBY3Rpb24gfSBmcm9tICcuLi9hY3Rpb25zL2FkZC1wbGF5ZXItYWN0aW9uJztcbmltcG9ydCB7IEFsZXJ0UHJvbXB0IH0gZnJvbSAnLi4vcHJvbXB0cy9hbGVydC1wcm9tcHQnO1xuaW1wb3J0IHsgQ2FyZCB9IGZyb20gJy4uL2NhcmQvY2FyZCc7XG5pbXBvcnQgeyBDYXJkTGlzdCB9IGZyb20gJy4uL3N0YXRlL2NhcmQtbGlzdCc7XG5pbXBvcnQgeyBDb2luRmxpcFByb21wdCB9IGZyb20gJy4uL3Byb21wdHMvY29pbi1mbGlwLXByb21wdCc7XG5pbXBvcnQgeyBDaG9vc2VDYXJkc1Byb21wdCB9IGZyb20gJy4uL3Byb21wdHMvY2hvb3NlLWNhcmRzLXByb21wdCc7XG5pbXBvcnQgeyBEZWNrQW5hbHlzZXIgfSBmcm9tICcuLi8uLi9jYXJkcy9kZWNrLWFuYWx5c2VyJztcbmltcG9ydCB7IEludml0ZVBsYXllckFjdGlvbiB9IGZyb20gJy4uL2FjdGlvbnMvaW52aXRlLXBsYXllci1hY3Rpb24nO1xuaW1wb3J0IHsgSW52aXRlUGxheWVyUHJvbXB0IH0gZnJvbSAnLi4vcHJvbXB0cy9pbnZpdGUtcGxheWVyLXByb21wdCc7XG5pbXBvcnQgeyBQbGF5ZXIgfSBmcm9tICcuLi9zdGF0ZS9wbGF5ZXInO1xuaW1wb3J0IHsgU2hvd0NhcmRzUHJvbXB0IH0gZnJvbSAnLi4vcHJvbXB0cy9zaG93LWNhcmRzLXByb21wdCc7XG5pbXBvcnQgeyBTaHVmZmxlRGVja1Byb21wdCB9IGZyb20gJy4uL3Byb21wdHMvc2h1ZmZsZS1wcm9tcHQnO1xuaW1wb3J0IHsgU3RhdGUsIEdhbWVQaGFzZSwgR2FtZVdpbm5lciB9IGZyb20gJy4uL3N0YXRlL3N0YXRlJztcbmltcG9ydCB7IEdhbWVFcnJvciB9IGZyb20gJy4uLy4uL2dhbWUtZXJyb3InO1xuaW1wb3J0IHsgR2FtZU1lc3NhZ2UsIEdhbWVMb2cgfSBmcm9tICcuLi8uLi9nYW1lLW1lc3NhZ2UnO1xuaW1wb3J0IHsgUGxheWVyVHlwZSB9IGZyb20gJy4uL2FjdGlvbnMvcGxheS1jYXJkLWFjdGlvbic7XG5pbXBvcnQgeyBQb2tlbW9uQ2FyZExpc3QgfSBmcm9tICcuLi9zdGF0ZS9wb2tlbW9uLWNhcmQtbGlzdCc7XG5pbXBvcnQgeyBTdG9yZUxpa2UgfSBmcm9tICcuLi9zdG9yZS1saWtlJztcbmltcG9ydCB7IFN1cGVyVHlwZSwgU3RhZ2UgfSBmcm9tICcuLi9jYXJkL2NhcmQtdHlwZXMnO1xuaW1wb3J0IHsgV2hvQmVnaW5zRWZmZWN0IH0gZnJvbSAnLi4vZWZmZWN0cy9nYW1lLXBoYXNlLWVmZmVjdHMnO1xuaW1wb3J0IHsgZW5kR2FtZSB9IGZyb20gJy4uL2VmZmVjdC1yZWR1Y2Vycy9jaGVjay1lZmZlY3QnO1xuaW1wb3J0IHsgaW5pdE5leHRUdXJuIH0gZnJvbSAnLi4vZWZmZWN0LXJlZHVjZXJzL2dhbWUtcGhhc2UtZWZmZWN0JztcblxuXG5mdW5jdGlvbiBwdXRTdGFydGluZ1Bva2Vtb25zQW5kUHJpemVzKHBsYXllcjogUGxheWVyLCBjYXJkczogQ2FyZFtdKTogdm9pZCB7XG4gIGlmIChjYXJkcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm47XG4gIH1cbiAgcGxheWVyLmhhbmQubW92ZUNhcmRUbyhjYXJkc1swXSwgcGxheWVyLmFjdGl2ZSk7XG4gIGZvciAobGV0IGkgPSAxOyBpIDwgY2FyZHMubGVuZ3RoOyBpKyspIHtcbiAgICBwbGF5ZXIuaGFuZC5tb3ZlQ2FyZFRvKGNhcmRzW2ldLCBwbGF5ZXIuYmVuY2hbaSAtIDFdKTtcbiAgfVxuICBmb3IgKGxldCBpID0gMDsgaSA8IDY7IGkrKykge1xuICAgIHBsYXllci5kZWNrLm1vdmVUbyhwbGF5ZXIucHJpemVzW2ldLCAxKTtcbiAgfVxufVxuXG5mdW5jdGlvbiogc2V0dXBHYW1lKG5leHQ6IEZ1bmN0aW9uLCBzdG9yZTogU3RvcmVMaWtlLCBzdGF0ZTogU3RhdGUpOiBJdGVyYWJsZUl0ZXJhdG9yPFN0YXRlPiB7XG4gIGNvbnN0IGJhc2ljUG9rZW1vbiA9IHtzdXBlclR5cGU6IFN1cGVyVHlwZS5QT0tFTU9OLCBzdGFnZTogU3RhZ2UuQkFTSUN9O1xuICBjb25zdCBjaG9vc2VDYXJkc09wdGlvbnMgPSB7IG1pbjogMSwgbWF4OiA2LCBhbGxvd0NhbmNlbDogZmFsc2UgfTtcbiAgY29uc3QgcGxheWVyID0gc3RhdGUucGxheWVyc1swXTtcbiAgY29uc3Qgb3Bwb25lbnQgPSBzdGF0ZS5wbGF5ZXJzWzFdO1xuXG4gIGxldCBwbGF5ZXJIYXNCYXNpYyA9IGZhbHNlO1xuICBsZXQgb3Bwb25lbnRIYXNCYXNpYyA9IGZhbHNlO1xuXG4gIHdoaWxlICghcGxheWVySGFzQmFzaWMgfHwgIW9wcG9uZW50SGFzQmFzaWMpIHtcbiAgICBpZiAoIXBsYXllckhhc0Jhc2ljKSB7XG4gICAgICBwbGF5ZXIuaGFuZC5tb3ZlVG8ocGxheWVyLmRlY2spO1xuICAgICAgeWllbGQgc3RvcmUucHJvbXB0KHN0YXRlLCBuZXcgU2h1ZmZsZURlY2tQcm9tcHQocGxheWVyLmlkKSwgb3JkZXIgPT4ge1xuICAgICAgICBwbGF5ZXIuZGVjay5hcHBseU9yZGVyKG9yZGVyKTtcbiAgICAgICAgcGxheWVyLmRlY2subW92ZVRvKHBsYXllci5oYW5kLCA3KTtcbiAgICAgICAgcGxheWVySGFzQmFzaWMgPSBwbGF5ZXIuaGFuZC5jb3VudChiYXNpY1Bva2Vtb24pID4gMDtcbiAgICAgICAgbmV4dCgpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKCFvcHBvbmVudEhhc0Jhc2ljKSB7XG4gICAgICBvcHBvbmVudC5oYW5kLm1vdmVUbyhvcHBvbmVudC5kZWNrKTtcbiAgICAgIHlpZWxkIHN0b3JlLnByb21wdChzdGF0ZSwgbmV3IFNodWZmbGVEZWNrUHJvbXB0KG9wcG9uZW50LmlkKSwgb3JkZXIgPT4ge1xuICAgICAgICBvcHBvbmVudC5kZWNrLmFwcGx5T3JkZXIob3JkZXIpO1xuICAgICAgICBvcHBvbmVudC5kZWNrLm1vdmVUbyhvcHBvbmVudC5oYW5kLCA3KTtcbiAgICAgICAgb3Bwb25lbnRIYXNCYXNpYyA9IG9wcG9uZW50LmhhbmQuY291bnQoYmFzaWNQb2tlbW9uKSA+IDA7XG4gICAgICAgIG5leHQoKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChwbGF5ZXJIYXNCYXNpYyAmJiAhb3Bwb25lbnRIYXNCYXNpYykge1xuICAgICAgc3RvcmUubG9nKHN0YXRlLCBHYW1lTG9nLkxPR19TRVRVUF9OT19CQVNJQ19QT0tFTU9OLCB7IG5hbWU6IG9wcG9uZW50Lm5hbWUgfSk7XG4gICAgICB5aWVsZCBzdG9yZS5wcm9tcHQoc3RhdGUsIFtcbiAgICAgICAgbmV3IFNob3dDYXJkc1Byb21wdChwbGF5ZXIuaWQsIEdhbWVNZXNzYWdlLlNFVFVQX09QUE9ORU5UX05PX0JBU0lDLFxuICAgICAgICAgIG9wcG9uZW50LmhhbmQuY2FyZHMsIHsgYWxsb3dDYW5jZWw6IHRydWUgfSksXG4gICAgICAgIG5ldyBBbGVydFByb21wdChvcHBvbmVudC5pZCwgR2FtZU1lc3NhZ2UuU0VUVVBfUExBWUVSX05PX0JBU0lDKVxuICAgICAgXSwgcmVzdWx0cyA9PiB7XG4gICAgICAgIGlmIChyZXN1bHRzWzBdKSB7XG4gICAgICAgICAgcGxheWVyLmRlY2subW92ZVRvKHBsYXllci5oYW5kLCAxKTtcbiAgICAgICAgfVxuICAgICAgICBuZXh0KCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoIXBsYXllckhhc0Jhc2ljICYmIG9wcG9uZW50SGFzQmFzaWMpIHtcbiAgICAgIHN0b3JlLmxvZyhzdGF0ZSwgR2FtZUxvZy5MT0dfU0VUVVBfTk9fQkFTSUNfUE9LRU1PTiwgeyBuYW1lOiBwbGF5ZXIubmFtZSB9KTtcbiAgICAgIHlpZWxkIHN0b3JlLnByb21wdChzdGF0ZSwgW1xuICAgICAgICBuZXcgU2hvd0NhcmRzUHJvbXB0KG9wcG9uZW50LmlkLCBHYW1lTWVzc2FnZS5TRVRVUF9PUFBPTkVOVF9OT19CQVNJQyxcbiAgICAgICAgICBwbGF5ZXIuaGFuZC5jYXJkcywgeyBhbGxvd0NhbmNlbDogdHJ1ZSB9KSxcbiAgICAgICAgbmV3IEFsZXJ0UHJvbXB0KHBsYXllci5pZCwgR2FtZU1lc3NhZ2UuU0VUVVBfUExBWUVSX05PX0JBU0lDKVxuICAgICAgXSwgcmVzdWx0cyA9PiB7XG4gICAgICAgIGlmIChyZXN1bHRzWzBdKSB7XG4gICAgICAgICAgb3Bwb25lbnQuZGVjay5tb3ZlVG8ob3Bwb25lbnQuaGFuZCwgMSk7XG4gICAgICAgIH1cbiAgICAgICAgbmV4dCgpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgeWllbGQgc3RvcmUucHJvbXB0KHN0YXRlLCBbXG4gICAgbmV3IENob29zZUNhcmRzUHJvbXB0KHBsYXllci5pZCwgR2FtZU1lc3NhZ2UuQ0hPT1NFX1NUQVJUSU5HX1BPS0VNT05TLFxuICAgICAgcGxheWVyLmhhbmQsIGJhc2ljUG9rZW1vbiwgY2hvb3NlQ2FyZHNPcHRpb25zKSxcbiAgICBuZXcgQ2hvb3NlQ2FyZHNQcm9tcHQob3Bwb25lbnQuaWQsIEdhbWVNZXNzYWdlLkNIT09TRV9TVEFSVElOR19QT0tFTU9OUyxcbiAgICAgIG9wcG9uZW50LmhhbmQsIGJhc2ljUG9rZW1vbiwgY2hvb3NlQ2FyZHNPcHRpb25zKVxuICBdLCBjaG9pY2UgPT4ge1xuICAgIHB1dFN0YXJ0aW5nUG9rZW1vbnNBbmRQcml6ZXMocGxheWVyLCBjaG9pY2VbMF0pO1xuICAgIHB1dFN0YXJ0aW5nUG9rZW1vbnNBbmRQcml6ZXMob3Bwb25lbnQsIGNob2ljZVsxXSk7XG4gICAgbmV4dCgpO1xuICB9KTtcblxuICBjb25zdCB3aG9CZWdpbnNFZmZlY3QgPSBuZXcgV2hvQmVnaW5zRWZmZWN0KCk7XG4gIHN0b3JlLnJlZHVjZUVmZmVjdChzdGF0ZSwgd2hvQmVnaW5zRWZmZWN0KTtcblxuICBpZiAod2hvQmVnaW5zRWZmZWN0LnBsYXllcikge1xuICAgIHN0YXRlLmFjdGl2ZVBsYXllciA9IHN0YXRlLnBsYXllcnMuaW5kZXhPZih3aG9CZWdpbnNFZmZlY3QucGxheWVyKTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBjb2luRmxpcFByb21wdCA9IG5ldyBDb2luRmxpcFByb21wdChwbGF5ZXIuaWQsIEdhbWVNZXNzYWdlLlNFVFVQX1dIT19CRUdJTlNfRkxJUCk7XG4gICAgeWllbGQgc3RvcmUucHJvbXB0KHN0YXRlLCBjb2luRmxpcFByb21wdCwgd2hvQmVnaW5zID0+IHtcbiAgICAgIHN0YXRlLmFjdGl2ZVBsYXllciA9IHdob0JlZ2lucyA/IDAgOiAxO1xuICAgICAgbmV4dCgpO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gU2V0IGluaXRpYWwgUG9rZW1vbiBQbGF5ZWQgVHVybiwgc28gcGxheWVycyBjYW4ndCBldm9sdmUgZHVyaW5nIGZpcnN0IHR1cm5cbiAgY29uc3QgZmlyc3QgPSBzdGF0ZS5wbGF5ZXJzW3N0YXRlLmFjdGl2ZVBsYXllcl07XG4gIGNvbnN0IHNlY29uZCA9IHN0YXRlLnBsYXllcnNbc3RhdGUuYWN0aXZlUGxheWVyID8gMCA6IDFdO1xuICBmaXJzdC5mb3JFYWNoUG9rZW1vbihQbGF5ZXJUeXBlLkJPVFRPTV9QTEFZRVIsIGNhcmRMaXN0ID0+IHsgY2FyZExpc3QucG9rZW1vblBsYXllZFR1cm4gPSAxOyB9KTtcbiAgc2Vjb25kLmZvckVhY2hQb2tlbW9uKFBsYXllclR5cGUuVE9QX1BMQVlFUiwgY2FyZExpc3QgPT4geyBjYXJkTGlzdC5wb2tlbW9uUGxheWVkVHVybiA9IDI7IH0pO1xuXG4gIHJldHVybiBpbml0TmV4dFR1cm4oc3RvcmUsIHN0YXRlKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlUGxheWVyKGlkOiBudW1iZXIsIG5hbWU6IHN0cmluZyk6IFBsYXllciB7XG4gIGNvbnN0IHBsYXllciA9IG5ldyBQbGF5ZXIoKTtcbiAgcGxheWVyLmlkID0gaWQ7XG4gIHBsYXllci5uYW1lID0gbmFtZTtcblxuICAvLyBFbXB0eSBwcml6ZXMsIHBsYWNlcyBmb3IgNiBjYXJkc1xuICBmb3IgKGxldCBpID0gMDsgaSA8IDY7IGkrKykge1xuICAgIGNvbnN0IHByaXplID0gbmV3IENhcmRMaXN0KCk7XG4gICAgcHJpemUuaXNTZWNyZXQgPSB0cnVlO1xuICAgIHBsYXllci5wcml6ZXMucHVzaChwcml6ZSk7XG4gIH1cblxuICAvLyBFbXB0eSBiZW5jaCwgcGxhY2VzIGZvciA1IHBva2Vtb25zXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgNTsgaSsrKSB7XG4gICAgY29uc3QgYmVuY2ggPSBuZXcgUG9rZW1vbkNhcmRMaXN0KCk7XG4gICAgYmVuY2guaXNQdWJsaWMgPSB0cnVlO1xuICAgIHBsYXllci5iZW5jaC5wdXNoKGJlbmNoKTtcbiAgfVxuXG4gIHBsYXllci5hY3RpdmUuaXNQdWJsaWMgPSB0cnVlO1xuICBwbGF5ZXIuZGlzY2FyZC5pc1B1YmxpYyA9IHRydWU7XG4gIHBsYXllci5zdGFkaXVtLmlzUHVibGljID0gdHJ1ZTtcbiAgcGxheWVyLnN1cHBvcnRlci5pc1B1YmxpYyA9IHRydWU7XG4gIHJldHVybiBwbGF5ZXI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXR1cFBoYXNlUmVkdWNlcihzdG9yZTogU3RvcmVMaWtlLCBzdGF0ZTogU3RhdGUsIGFjdGlvbjogQWN0aW9uKTogU3RhdGUge1xuXG4gIGlmIChzdGF0ZS5waGFzZSA9PT0gR2FtZVBoYXNlLldBSVRJTkdfRk9SX1BMQVlFUlMpIHtcblxuICAgIGlmIChhY3Rpb24gaW5zdGFuY2VvZiBBZGRQbGF5ZXJBY3Rpb24pIHtcbiAgICAgIGlmIChzdGF0ZS5wbGF5ZXJzLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgIHRocm93IG5ldyBHYW1lRXJyb3IoR2FtZU1lc3NhZ2UuTUFYX1BMQVlFUlNfUkVBQ0hFRCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChzdGF0ZS5wbGF5ZXJzLmxlbmd0aCA9PSAxICYmIHN0YXRlLnBsYXllcnNbMF0uaWQgPT09IGFjdGlvbi5jbGllbnRJZCkge1xuICAgICAgICB0aHJvdyBuZXcgR2FtZUVycm9yKEdhbWVNZXNzYWdlLkFMUkVBRFlfUExBWUlORyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGRlY2tBbmFseXNlciA9IG5ldyBEZWNrQW5hbHlzZXIoYWN0aW9uLmRlY2spO1xuICAgICAgaWYgKCFkZWNrQW5hbHlzZXIuaXNWYWxpZCgpKSB7XG4gICAgICAgIHRocm93IG5ldyBHYW1lRXJyb3IoR2FtZU1lc3NhZ2UuSU5WQUxJRF9ERUNLKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcGxheWVyID0gY3JlYXRlUGxheWVyKGFjdGlvbi5jbGllbnRJZCwgYWN0aW9uLm5hbWUpO1xuICAgICAgcGxheWVyLmRlY2sgPSBDYXJkTGlzdC5mcm9tTGlzdChhY3Rpb24uZGVjayk7XG4gICAgICBwbGF5ZXIuZGVjay5pc1NlY3JldCA9IHRydWU7XG4gICAgICBwbGF5ZXIuZGVjay5jYXJkcy5mb3JFYWNoKGMgPT4ge1xuICAgICAgICBzdGF0ZS5jYXJkTmFtZXMucHVzaChjLmZ1bGxOYW1lKTtcbiAgICAgICAgYy5pZCA9IHN0YXRlLmNhcmROYW1lcy5sZW5ndGggLSAxO1xuICAgICAgfSk7XG5cbiAgICAgIHN0YXRlLnBsYXllcnMucHVzaChwbGF5ZXIpO1xuXG4gICAgICBpZiAoc3RhdGUucGxheWVycy5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgc3RhdGUucGhhc2UgPSBHYW1lUGhhc2UuU0VUVVA7XG4gICAgICAgIGNvbnN0IGdlbmVyYXRvciA9IHNldHVwR2FtZSgoKSA9PiBnZW5lcmF0b3IubmV4dCgpLCBzdG9yZSwgc3RhdGUpO1xuICAgICAgICByZXR1cm4gZ2VuZXJhdG9yLm5leHQoKS52YWx1ZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHN0YXRlO1xuICAgIH1cblxuICAgIGlmIChhY3Rpb24gaW5zdGFuY2VvZiBJbnZpdGVQbGF5ZXJBY3Rpb24pIHtcbiAgICAgIGlmIChzdGF0ZS5wbGF5ZXJzLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgIHRocm93IG5ldyBHYW1lRXJyb3IoR2FtZU1lc3NhZ2UuTUFYX1BMQVlFUlNfUkVBQ0hFRCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChzdGF0ZS5wbGF5ZXJzLmxlbmd0aCA9PSAxICYmIHN0YXRlLnBsYXllcnNbMF0uaWQgPT09IGFjdGlvbi5jbGllbnRJZCkge1xuICAgICAgICB0aHJvdyBuZXcgR2FtZUVycm9yKEdhbWVNZXNzYWdlLkFMUkVBRFlfUExBWUlORyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHBsYXllciA9IGNyZWF0ZVBsYXllcihhY3Rpb24uY2xpZW50SWQsIGFjdGlvbi5uYW1lKTtcbiAgICAgIHN0YXRlLnBsYXllcnMucHVzaChwbGF5ZXIpO1xuXG4gICAgICBzdGF0ZSA9IHN0b3JlLnByb21wdChzdGF0ZSwgbmV3IEludml0ZVBsYXllclByb21wdChcbiAgICAgICAgcGxheWVyLmlkLFxuICAgICAgICBHYW1lTWVzc2FnZS5JTlZJVEFUSU9OX01FU1NBR0VcbiAgICAgICksIGRlY2sgPT4ge1xuICAgICAgICBpZiAoZGVjayA9PT0gbnVsbCkge1xuICAgICAgICAgIHN0b3JlLmxvZyhzdGF0ZSwgR2FtZUxvZy5MT0dfSU5WSVRBVElPTl9OT1RfQUNDRVBURUQsIHsgbmFtZTogcGxheWVyLm5hbWUgfSk7XG4gICAgICAgICAgY29uc3Qgd2lubmVyID0gR2FtZVdpbm5lci5OT05FO1xuICAgICAgICAgIHN0YXRlID0gZW5kR2FtZShzdG9yZSwgc3RhdGUsIHdpbm5lcik7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRlY2tBbmFseXNlciA9IG5ldyBEZWNrQW5hbHlzZXIoZGVjayk7XG4gICAgICAgIGlmICghZGVja0FuYWx5c2VyLmlzVmFsaWQoKSkge1xuICAgICAgICAgIHRocm93IG5ldyBHYW1lRXJyb3IoR2FtZU1lc3NhZ2UuSU5WQUxJRF9ERUNLKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHBsYXllci5kZWNrID0gQ2FyZExpc3QuZnJvbUxpc3QoZGVjayk7XG4gICAgICAgIHBsYXllci5kZWNrLmlzU2VjcmV0ID0gdHJ1ZTtcbiAgICAgICAgcGxheWVyLmRlY2suY2FyZHMuZm9yRWFjaChjID0+IHtcbiAgICAgICAgICBzdGF0ZS5jYXJkTmFtZXMucHVzaChjLmZ1bGxOYW1lKTtcbiAgICAgICAgICBjLmlkID0gc3RhdGUuY2FyZE5hbWVzLmxlbmd0aCAtIDE7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChzdGF0ZS5wbGF5ZXJzLmxlbmd0aCA9PT0gMikge1xuICAgICAgICAgIHN0YXRlLnBoYXNlID0gR2FtZVBoYXNlLlNFVFVQO1xuICAgICAgICAgIGNvbnN0IGdlbmVyYXRvciA9IHNldHVwR2FtZSgoKSA9PiBnZW5lcmF0b3IubmV4dCgpLCBzdG9yZSwgc3RhdGUpO1xuICAgICAgICAgIHJldHVybiBnZW5lcmF0b3IubmV4dCgpLnZhbHVlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gc3RhdGU7XG59XG4iXX0=
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qb2VteWVyc2NvdWdoL0RvY3VtZW50cy9HaXRIdWIvcHRjZy1lcHNkL3B0Y2ctc2VydmVyL3NyYy9nYW1lL3N0b3JlL3JlZHVjZXJzL3NldHVwLXJlZHVjZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjQxbUNBY0E7cU9BYkEsS0FBQSxDQUFBLG1CQUFBLDBCQUFBLE9BQUEsQ0FBQSw4QkFBQSxDQUFBLENBQUEsQ0FDQSxLQUFBLENBQUEsY0FBQSwwQkFBQSxPQUFBLENBQUEseUJBQUEsQ0FBQSxDQUFBLENBRUEsS0FBQSxDQUFBLFdBQUEsMEJBQUEsT0FBQSxDQUFBLG9CQUFBLENBQUEsQ0FBQSxDQUNBLEtBQUEsQ0FBQSxrQkFBQSwwQkFBQSxPQUFBLENBQUEsNkJBQUEsQ0FBQSxDQUFBLENBQ0EsS0FBQSxDQUFBLHFCQUFBLDBCQUFBLE9BQUEsQ0FBQSxnQ0FBQSxDQUFBLENBQUEsQ0FDQSxLQUFBLENBQUEsZUFBQSwwQkFBQSxPQUFBLENBQUEsMkJBQUEsQ0FBQSxDQUFBLENBQ0EsS0FBQSxDQUFBLHNCQUFBLDBCQUFBLE9BQUEsQ0FBQSxpQ0FBQSxDQUFBLENBQUEsQ0FDQSxLQUFBLENBQUEsc0JBQUEsMEJBQUEsT0FBQSxDQUFBLGlDQUFBLENBQUEsQ0FBQSxDQUNBLEtBQUEsQ0FBQSxRQUFBLDJCQUFBLE9BQUEsQ0FBQSxpQkFBQSxDQUFBLENBQUEsQ0FDQSxLQUFBLENBQUEsbUJBQUEsMkJBQUEsT0FBQSxDQUFBLDhCQUFBLENBQUEsQ0FBQSxDQUNBLEtBQUEsQ0FBQSxnQkFBQSwyQkFBQSxPQUFBLENBQUEsMkJBQUEsQ0FBQSxDQUFBLENBQ0EsS0FBQSxDQUFBLE9BQUEsMkJBQUEsT0FBQSxDQUFBLGdCQUFBLENBQUEsQ0FBQSxDQUNBLEtBQUEsQ0FBQSxZQUFBLDJCQUFBLE9BQUEsQ0FBQSxrQkFBQSxDQUFBLENBQUEsQ0FDQSxLQUFBLENBQUEsY0FBQSwyQkFBQSxPQUFBLENBQUEsb0JBQUEsQ0FBQSxDQUFBLENBQ0Es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WSxRQUFaLENBQXVCLElBQXZCLENBYlEsMEJBY1IsTUFBTSxDQUFDLElBQVAsQ0FBWSxLQUFaLENBQWtCLE9BQWxCLENBQTBCLENBQUMsRUFBRyxvREFDNUIsS0FBSyxDQUFDLFNBQU4sQ0FBZ0IsSUFBaEIsQ0FBcUIsQ0FBQyxDQUFDLFFBQXZCLEVBRDRCLDBCQUU1QixDQUFDLENBQUMsRUFBRixDQUFPLEtBQUssQ0FBQyxTQUFOLENBQWdCLE1BQWhCLENBQXlCLENBQWhDLENBQ0QsQ0FIRCxFQWRRLDBCQW1CUixHQUFJLEtBQUssQ0FBQyxPQUFOLENBQWMsTUFBZCxHQUF5QixDQUE3QixDQUFnQyx1REFDOUIsS0FBSyxDQUFDLEtBQU4sQ0FBYyxPQUFBLENBQUEsU0FBQSxDQUFVLEtBQXhCLENBQ0EsS0FBTSxDQUFBLFNBQVMsNEJBQUcsU0FBUyxDQUFDLElBQU0sMERBQUEsQ0FBQSxTQUFTLENBQUMsSUFBVixHQUFnQixDQUF2QixDQUF5QixLQUF6QixDQUFnQyxLQUFoQyxDQUFaLENBQWYsQ0FGOEIsMEJBRzlCLE1BQU8sQ0FBQSxTQUFTLENBQUMsSUFBVixHQUFpQixLQUF4QixDQUNELENBSkQsa0NBS0QsQ0EzQk8sQ0FBUixDQTRCRCxDQXhDRCxrQ0F5Q0QsQ0E1RUQsa0NBRjhFLDBCQWdGOUUsTUFBTyxDQUFBLEtBQVAsQ0FDRCxDLDBCQWpGRCxPQUFBLENBQUEsaUJBQUEsQ0FBQSxpQkFBQSxDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQWN0aW9uIH0gZnJvbSAnLi4vYWN0aW9ucy9hY3Rpb24nO1xuaW1wb3J0IHsgQWRkUGxheWVyQWN0aW9uIH0gZnJvbSAnLi4vYWN0aW9ucy9hZGQtcGxheWVyLWFjdGlvbic7XG5pbXBvcnQgeyBBbGVydFByb21wdCB9IGZyb20gJy4uL3Byb21wdHMvYWxlcnQtcHJvbXB0JztcbmltcG9ydCB7IENhcmQgfSBmcm9tICcuLi9jYXJkL2NhcmQnO1xuaW1wb3J0IHsgQ2FyZExpc3QgfSBmcm9tICcuLi9zdGF0ZS9jYXJkLWxpc3QnO1xuaW1wb3J0IHsgQ29pbkZsaXBQcm9tcHQgfSBmcm9tICcuLi9wcm9tcHRzL2NvaW4tZmxpcC1wcm9tcHQnO1xuaW1wb3J0IHsgQ2hvb3NlQ2FyZHNQcm9tcHQgfSBmcm9tICcuLi9wcm9tcHRzL2Nob29zZS1jYXJkcy1wcm9tcHQnO1xuaW1wb3J0IHsgRGVja0FuYWx5c2VyIH0gZnJvbSAnLi4vLi4vY2FyZHMvZGVjay1hbmFseXNlcic7XG5pbXBvcnQgeyBJbnZpdGVQbGF5ZXJBY3Rpb24gfSBmcm9tICcuLi9hY3Rpb25zL2ludml0ZS1wbGF5ZXItYWN0aW9uJztcbmltcG9ydCB7IEludml0ZVBsYXllclByb21wdCB9IGZyb20gJy4uL3Byb21wdHMvaW52aXRlLXBsYXllci1wcm9tcHQnO1xuaW1wb3J0IHsgUGxheWVyIH0gZnJvbSAnLi4vc3RhdGUvcGxheWVyJztcbmltcG9ydCB7IFNob3dDYXJkc1Byb21wdCB9IGZyb20gJy4uL3Byb21wdHMvc2hvdy1jYXJkcy1wcm9tcHQnO1xuaW1wb3J0IHsgU2h1ZmZsZURlY2tQcm9tcHQgfSBmcm9tICcuLi9wcm9tcHRzL3NodWZmbGUtcHJvbXB0JztcbmltcG9ydCB7IFN0YXRlLCBHYW1lUGhhc2UsIEdhbWVXaW5uZXIgfSBmcm9tICcuLi9zdGF0ZS9zdGF0ZSc7XG5pbXBvcnQgeyBHYW1lRXJyb3IgfSBmcm9tICcuLi8uLi9nYW1lLWVycm9yJztcbmltcG9ydCB7IEdhbWVNZXNzYWdlLCBHYW1lTG9nIH0gZnJvbSAnLi4vLi4vZ2FtZS1tZXNzYWdlJztcbmltcG9ydCB7IFBsYXllclR5cGUgfSBmcm9tICcuLi9hY3Rpb25zL3BsYXktY2FyZC1hY3Rpb24nO1xuaW1wb3J0IHsgUG9rZW1vbkNhcmRMaXN0IH0gZnJvbSAnLi4vc3RhdGUvcG9rZW1vbi1jYXJkLWxpc3QnO1xuaW1wb3J0IHsgU3RvcmVMaWtlIH0gZnJvbSAnLi4vc3RvcmUtbGlrZSc7XG5pbXBvcnQgeyBTdXBlclR5cGUsIFN0YWdlIH0gZnJvbSAnLi4vY2FyZC9jYXJkLXR5cGVzJztcbmltcG9ydCB7IFdob0JlZ2luc0VmZmVjdCB9IGZyb20gJy4uL2VmZmVjdHMvZ2FtZS1waGFzZS1lZmZlY3RzJztcbmltcG9ydCB7IGVuZEdhbWUgfSBmcm9tICcuLi9lZmZlY3QtcmVkdWNlcnMvY2hlY2stZWZmZWN0JztcbmltcG9ydCB7IGluaXROZXh0VHVybiB9IGZyb20gJy4uL2VmZmVjdC1yZWR1Y2Vycy9nYW1lLXBoYXNlLWVmZmVjdCc7XG5cblxuZnVuY3Rpb24gcHV0U3RhcnRpbmdQb2tlbW9uc0FuZFByaXplcyhwbGF5ZXI6IFBsYXllciwgY2FyZHM6IENhcmRbXSk6IHZvaWQge1xuICBpZiAoY2FyZHMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHBsYXllci5oYW5kLm1vdmVDYXJkVG8oY2FyZHNbMF0sIHBsYXllci5hY3RpdmUpO1xuICBmb3IgKGxldCBpID0gMTsgaSA8IGNhcmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgcGxheWVyLmhhbmQubW92ZUNhcmRUbyhjYXJkc1tpXSwgcGxheWVyLmJlbmNoW2kgLSAxXSk7XG4gIH1cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCA2OyBpKyspIHtcbiAgICBwbGF5ZXIuZGVjay5tb3ZlVG8ocGxheWVyLnByaXplc1tpXSwgMSk7XG4gIH1cbn1cblxuZnVuY3Rpb24qIHNldHVwR2FtZShuZXh0OiBGdW5jdGlvbiwgc3RvcmU6IFN0b3JlTGlrZSwgc3RhdGU6IFN0YXRlKTogSXRlcmFibGVJdGVyYXRvcjxTdGF0ZT4ge1xuICBjb25zdCBiYXNpY1Bva2Vtb24gPSB7c3VwZXJUeXBlOiBTdXBlclR5cGUuUE9LRU1PTiwgc3RhZ2U6IFN0YWdlLkJBU0lDfTtcbiAgY29uc3QgY2hvb3NlQ2FyZHNPcHRpb25zID0geyBtaW46IDEsIG1heDogNiwgYWxsb3dDYW5jZWw6IGZhbHNlIH07XG4gIGNvbnN0IHBsYXllciA9IHN0YXRlLnBsYXllcnNbMF07XG4gIGNvbnN0IG9wcG9uZW50ID0gc3RhdGUucGxheWVyc1sxXTtcblxuICBsZXQgcGxheWVySGFzQmFzaWMgPSBmYWxzZTtcbiAgbGV0IG9wcG9uZW50SGFzQmFzaWMgPSBmYWxzZTtcblxuICB3aGlsZSAoIXBsYXllckhhc0Jhc2ljIHx8ICFvcHBvbmVudEhhc0Jhc2ljKSB7XG4gICAgaWYgKCFwbGF5ZXJIYXNCYXNpYykge1xuICAgICAgcGxheWVyLmhhbmQubW92ZVRvKHBsYXllci5kZWNrKTtcbiAgICAgIHlpZWxkIHN0b3JlLnByb21wdChzdGF0ZSwgbmV3IFNodWZmbGVEZWNrUHJvbXB0KHBsYXllci5pZCksIG9yZGVyID0+IHtcbiAgICAgICAgcGxheWVyLmRlY2suYXBwbHlPcmRlcihvcmRlcik7XG4gICAgICAgIHBsYXllci5kZWNrLm1vdmVUbyhwbGF5ZXIuaGFuZCwgNyk7XG4gICAgICAgIHBsYXllckhhc0Jhc2ljID0gcGxheWVyLmhhbmQuY291bnQoYmFzaWNQb2tlbW9uKSA+IDA7XG4gICAgICAgIG5leHQoKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICghb3Bwb25lbnRIYXNCYXNpYykge1xuICAgICAgb3Bwb25lbnQuaGFuZC5tb3ZlVG8ob3Bwb25lbnQuZGVjayk7XG4gICAgICB5aWVsZCBzdG9yZS5wcm9tcHQoc3RhdGUsIG5ldyBTaHVmZmxlRGVja1Byb21wdChvcHBvbmVudC5pZCksIG9yZGVyID0+IHtcbiAgICAgICAgb3Bwb25lbnQuZGVjay5hcHBseU9yZGVyKG9yZGVyKTtcbiAgICAgICAgb3Bwb25lbnQuZGVjay5tb3ZlVG8ob3Bwb25lbnQuaGFuZCwgNyk7XG4gICAgICAgIG9wcG9uZW50SGFzQmFzaWMgPSBvcHBvbmVudC5oYW5kLmNvdW50KGJhc2ljUG9rZW1vbikgPiAwO1xuICAgICAgICBuZXh0KCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAocGxheWVySGFzQmFzaWMgJiYgIW9wcG9uZW50SGFzQmFzaWMpIHtcbiAgICAgIHN0b3JlLmxvZyhzdGF0ZSwgR2FtZUxvZy5MT0dfU0VUVVBfTk9fQkFTSUNfUE9LRU1PTiwgeyBuYW1lOiBvcHBvbmVudC5uYW1lIH0pO1xuICAgICAgeWllbGQgc3RvcmUucHJvbXB0KHN0YXRlLCBbXG4gICAgICAgIG5ldyBTaG93Q2FyZHNQcm9tcHQocGxheWVyLmlkLCBHYW1lTWVzc2FnZS5TRVRVUF9PUFBPTkVOVF9OT19CQVNJQyxcbiAgICAgICAgICBvcHBvbmVudC5oYW5kLmNhcmRzLCB7IGFsbG93Q2FuY2VsOiB0cnVlIH0pLFxuICAgICAgICBuZXcgQWxlcnRQcm9tcHQob3Bwb25lbnQuaWQsIEdhbWVNZXNzYWdlLlNFVFVQX1BMQVlFUl9OT19CQVNJQylcbiAgICAgIF0sIHJlc3VsdHMgPT4ge1xuICAgICAgICBpZiAocmVzdWx0c1swXSkge1xuICAgICAgICAgIHBsYXllci5kZWNrLm1vdmVUbyhwbGF5ZXIuaGFuZCwgMSk7XG4gICAgICAgIH1cbiAgICAgICAgbmV4dCgpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKCFwbGF5ZXJIYXNCYXNpYyAmJiBvcHBvbmVudEhhc0Jhc2ljKSB7XG4gICAgICBzdG9yZS5sb2coc3RhdGUsIEdhbWVMb2cuTE9HX1NFVFVQX05PX0JBU0lDX1BPS0VNT04sIHsgbmFtZTogcGxheWVyLm5hbWUgfSk7XG4gICAgICB5aWVsZCBzdG9yZS5wcm9tcHQoc3RhdGUsIFtcbiAgICAgICAgbmV3IFNob3dDYXJkc1Byb21wdChvcHBvbmVudC5pZCwgR2FtZU1lc3NhZ2UuU0VUVVBfT1BQT05FTlRfTk9fQkFTSUMsXG4gICAgICAgICAgcGxheWVyLmhhbmQuY2FyZHMsIHsgYWxsb3dDYW5jZWw6IHRydWUgfSksXG4gICAgICAgIG5ldyBBbGVydFByb21wdChwbGF5ZXIuaWQsIEdhbWVNZXNzYWdlLlNFVFVQX1BMQVlFUl9OT19CQVNJQylcbiAgICAgIF0sIHJlc3VsdHMgPT4ge1xuICAgICAgICBpZiAocmVzdWx0c1swXSkge1xuICAgICAgICAgIG9wcG9uZW50LmRlY2subW92ZVRvKG9wcG9uZW50LmhhbmQsIDEpO1xuICAgICAgICB9XG4gICAgICAgIG5leHQoKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHlpZWxkIHN0b3JlLnByb21wdChzdGF0ZSwgW1xuICAgIG5ldyBDaG9vc2VDYXJkc1Byb21wdChwbGF5ZXIuaWQsIEdhbWVNZXNzYWdlLkNIT09TRV9TVEFSVElOR19QT0tFTU9OUyxcbiAgICAgIHBsYXllci5oYW5kLCBiYXNpY1Bva2Vtb24sIGNob29zZUNhcmRzT3B0aW9ucyksXG4gICAgbmV3IENob29zZUNhcmRzUHJvbXB0KG9wcG9uZW50LmlkLCBHYW1lTWVzc2FnZS5DSE9PU0VfU1RBUlRJTkdfUE9LRU1PTlMsXG4gICAgICBvcHBvbmVudC5oYW5kLCBiYXNpY1Bva2Vtb24sIGNob29zZUNhcmRzT3B0aW9ucylcbiAgXSwgY2hvaWNlID0+IHtcbiAgICBwdXRTdGFydGluZ1Bva2Vtb25zQW5kUHJpemVzKHBsYXllciwgY2hvaWNlWzBdKTtcbiAgICBwdXRTdGFydGluZ1Bva2Vtb25zQW5kUHJpemVzKG9wcG9uZW50LCBjaG9pY2VbMV0pO1xuICAgIG5leHQoKTtcbiAgfSk7XG5cbiAgY29uc3Qgd2hvQmVnaW5zRWZmZWN0ID0gbmV3IFdob0JlZ2luc0VmZmVjdCgpO1xuICBzdG9yZS5yZWR1Y2VFZmZlY3Qoc3RhdGUsIHdob0JlZ2luc0VmZmVjdCk7XG5cbiAgaWYgKHdob0JlZ2luc0VmZmVjdC5wbGF5ZXIpIHtcbiAgICBzdGF0ZS5hY3RpdmVQbGF5ZXIgPSBzdGF0ZS5wbGF5ZXJzLmluZGV4T2Yod2hvQmVnaW5zRWZmZWN0LnBsYXllcik7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgY29pbkZsaXBQcm9tcHQgPSBuZXcgQ29pbkZsaXBQcm9tcHQocGxheWVyLmlkLCBHYW1lTWVzc2FnZS5TRVRVUF9XSE9fQkVHSU5TX0ZMSVApO1xuICAgIHlpZWxkIHN0b3JlLnByb21wdChzdGF0ZSwgY29pbkZsaXBQcm9tcHQsIHdob0JlZ2lucyA9PiB7XG4gICAgICBzdGF0ZS5hY3RpdmVQbGF5ZXIgPSB3aG9CZWdpbnMgPyAwIDogMTtcbiAgICAgIG5leHQoKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFNldCBpbml0aWFsIFBva2Vtb24gUGxheWVkIFR1cm4sIHNvIHBsYXllcnMgY2FuJ3QgZXZvbHZlIGR1cmluZyBmaXJzdCB0dXJuXG4gIGNvbnN0IGZpcnN0ID0gc3RhdGUucGxheWVyc1tzdGF0ZS5hY3RpdmVQbGF5ZXJdO1xuICBjb25zdCBzZWNvbmQgPSBzdGF0ZS5wbGF5ZXJzW3N0YXRlLmFjdGl2ZVBsYXllciA/IDAgOiAxXTtcbiAgZmlyc3QuZm9yRWFjaFBva2Vtb24oUGxheWVyVHlwZS5CT1RUT01fUExBWUVSLCBjYXJkTGlzdCA9PiB7IGNhcmRMaXN0LnBva2Vtb25QbGF5ZWRUdXJuID0gMTsgfSk7XG4gIHNlY29uZC5mb3JFYWNoUG9rZW1vbihQbGF5ZXJUeXBlLlRPUF9QTEFZRVIsIGNhcmRMaXN0ID0+IHsgY2FyZExpc3QucG9rZW1vblBsYXllZFR1cm4gPSAyOyB9KTtcblxuICByZXR1cm4gaW5pdE5leHRUdXJuKHN0b3JlLCBzdGF0ZSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVBsYXllcihpZDogbnVtYmVyLCBuYW1lOiBzdHJpbmcpOiBQbGF5ZXIge1xuICBjb25zdCBwbGF5ZXIgPSBuZXcgUGxheWVyKCk7XG4gIHBsYXllci5pZCA9IGlkO1xuICBwbGF5ZXIubmFtZSA9IG5hbWU7XG5cbiAgLy8gRW1wdHkgcHJpemVzLCBwbGFjZXMgZm9yIDYgY2FyZHNcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCA2OyBpKyspIHtcbiAgICBjb25zdCBwcml6ZSA9IG5ldyBDYXJkTGlzdCgpO1xuICAgIHByaXplLmlzU2VjcmV0ID0gdHJ1ZTtcbiAgICBwbGF5ZXIucHJpemVzLnB1c2gocHJpemUpO1xuICB9XG5cbiAgLy8gRW1wdHkgYmVuY2gsIHBsYWNlcyBmb3IgNSBwb2tlbW9uc1xuICBmb3IgKGxldCBpID0gMDsgaSA8IDU7IGkrKykge1xuICAgIGNvbnN0IGJlbmNoID0gbmV3IFBva2Vtb25DYXJkTGlzdCgpO1xuICAgIGJlbmNoLmlzUHVibGljID0gdHJ1ZTtcbiAgICBwbGF5ZXIuYmVuY2gucHVzaChiZW5jaCk7XG4gIH1cblxuICBwbGF5ZXIuYWN0aXZlLmlzUHVibGljID0gdHJ1ZTtcbiAgcGxheWVyLmRpc2NhcmQuaXNQdWJsaWMgPSB0cnVlO1xuICBwbGF5ZXIuc3RhZGl1bS5pc1B1YmxpYyA9IHRydWU7XG4gIHBsYXllci5zdXBwb3J0ZXIuaXNQdWJsaWMgPSB0cnVlO1xuICByZXR1cm4gcGxheWVyO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0dXBQaGFzZVJlZHVjZXIoc3RvcmU6IFN0b3JlTGlrZSwgc3RhdGU6IFN0YXRlLCBhY3Rpb246IEFjdGlvbik6IFN0YXRlIHtcblxuICBpZiAoc3RhdGUucGhhc2UgPT09IEdhbWVQaGFzZS5XQUlUSU5HX0ZPUl9QTEFZRVJTKSB7XG5cbiAgICBpZiAoYWN0aW9uIGluc3RhbmNlb2YgQWRkUGxheWVyQWN0aW9uKSB7XG4gICAgICBpZiAoc3RhdGUucGxheWVycy5sZW5ndGggPj0gMikge1xuICAgICAgICB0aHJvdyBuZXcgR2FtZUVycm9yKEdhbWVNZXNzYWdlLk1BWF9QTEFZRVJTX1JFQUNIRUQpO1xuICAgICAgfVxuXG4gICAgICBpZiAoc3RhdGUucGxheWVycy5sZW5ndGggPT0gMSAmJiBzdGF0ZS5wbGF5ZXJzWzBdLmlkID09PSBhY3Rpb24uY2xpZW50SWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEdhbWVFcnJvcihHYW1lTWVzc2FnZS5BTFJFQURZX1BMQVlJTkcpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBkZWNrQW5hbHlzZXIgPSBuZXcgRGVja0FuYWx5c2VyKGFjdGlvbi5kZWNrKTtcbiAgICAgIGlmICghZGVja0FuYWx5c2VyLmlzVmFsaWQoKSkge1xuICAgICAgICB0aHJvdyBuZXcgR2FtZUVycm9yKEdhbWVNZXNzYWdlLklOVkFMSURfREVDSyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHBsYXllciA9IGNyZWF0ZVBsYXllcihhY3Rpb24uY2xpZW50SWQsIGFjdGlvbi5uYW1lKTtcbiAgICAgIHBsYXllci5kZWNrID0gQ2FyZExpc3QuZnJvbUxpc3QoYWN0aW9uLmRlY2spO1xuICAgICAgcGxheWVyLmRlY2suaXNTZWNyZXQgPSB0cnVlO1xuICAgICAgcGxheWVyLmRlY2suY2FyZHMuZm9yRWFjaChjID0+IHtcbiAgICAgICAgc3RhdGUuY2FyZE5hbWVzLnB1c2goYy5mdWxsTmFtZSk7XG4gICAgICAgIGMuaWQgPSBzdGF0ZS5jYXJkTmFtZXMubGVuZ3RoIC0gMTtcbiAgICAgIH0pO1xuXG4gICAgICBzdGF0ZS5wbGF5ZXJzLnB1c2gocGxheWVyKTtcblxuICAgICAgaWYgKHN0YXRlLnBsYXllcnMubGVuZ3RoID09PSAyKSB7XG4gICAgICAgIHN0YXRlLnBoYXNlID0gR2FtZVBoYXNlLlNFVFVQO1xuICAgICAgICBjb25zdCBnZW5lcmF0b3IgPSBzZXR1cEdhbWUoKCkgPT4gZ2VuZXJhdG9yLm5leHQoKSwgc3RvcmUsIHN0YXRlKTtcbiAgICAgICAgcmV0dXJuIGdlbmVyYXRvci5uZXh0KCkudmFsdWU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzdGF0ZTtcbiAgICB9XG5cbiAgICBpZiAoYWN0aW9uIGluc3RhbmNlb2YgSW52aXRlUGxheWVyQWN0aW9uKSB7XG4gICAgICBpZiAoc3RhdGUucGxheWVycy5sZW5ndGggPj0gMikge1xuICAgICAgICB0aHJvdyBuZXcgR2FtZUVycm9yKEdhbWVNZXNzYWdlLk1BWF9QTEFZRVJTX1JFQUNIRUQpO1xuICAgICAgfVxuXG4gICAgICBpZiAoc3RhdGUucGxheWVycy5sZW5ndGggPT0gMSAmJiBzdGF0ZS5wbGF5ZXJzWzBdLmlkID09PSBhY3Rpb24uY2xpZW50SWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEdhbWVFcnJvcihHYW1lTWVzc2FnZS5BTFJFQURZX1BMQVlJTkcpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBwbGF5ZXIgPSBjcmVhdGVQbGF5ZXIoYWN0aW9uLmNsaWVudElkLCBhY3Rpb24ubmFtZSk7XG4gICAgICBzdGF0ZS5wbGF5ZXJzLnB1c2gocGxheWVyKTtcblxuICAgICAgc3RhdGUgPSBzdG9yZS5wcm9tcHQoc3RhdGUsIG5ldyBJbnZpdGVQbGF5ZXJQcm9tcHQoXG4gICAgICAgIHBsYXllci5pZCxcbiAgICAgICAgR2FtZU1lc3NhZ2UuSU5WSVRBVElPTl9NRVNTQUdFXG4gICAgICApLCBkZWNrID0+IHtcbiAgICAgICAgaWYgKGRlY2sgPT09IG51bGwpIHtcbiAgICAgICAgICBzdG9yZS5sb2coc3RhdGUsIEdhbWVMb2cuTE9HX0lOVklUQVRJT05fTk9UX0FDQ0VQVEVELCB7IG5hbWU6IHBsYXllci5uYW1lIH0pO1xuICAgICAgICAgIGNvbnN0IHdpbm5lciA9IEdhbWVXaW5uZXIuTk9ORTtcbiAgICAgICAgICBzdGF0ZSA9IGVuZEdhbWUoc3RvcmUsIHN0YXRlLCB3aW5uZXIpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkZWNrQW5hbHlzZXIgPSBuZXcgRGVja0FuYWx5c2VyKGRlY2spO1xuICAgICAgICBpZiAoIWRlY2tBbmFseXNlci5pc1ZhbGlkKCkpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgR2FtZUVycm9yKEdhbWVNZXNzYWdlLklOVkFMSURfREVDSyk7XG4gICAgICAgIH1cblxuICAgICAgICBwbGF5ZXIuZGVjayA9IENhcmRMaXN0LmZyb21MaXN0KGRlY2spO1xuICAgICAgICBwbGF5ZXIuZGVjay5pc1NlY3JldCA9IHRydWU7XG4gICAgICAgIHBsYXllci5kZWNrLmNhcmRzLmZvckVhY2goYyA9PiB7XG4gICAgICAgICAgc3RhdGUuY2FyZE5hbWVzLnB1c2goYy5mdWxsTmFtZSk7XG4gICAgICAgICAgYy5pZCA9IHN0YXRlLmNhcmROYW1lcy5sZW5ndGggLSAxO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoc3RhdGUucGxheWVycy5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICBzdGF0ZS5waGFzZSA9IEdhbWVQaGFzZS5TRVRVUDtcbiAgICAgICAgICBjb25zdCBnZW5lcmF0b3IgPSBzZXR1cEdhbWUoKCkgPT4gZ2VuZXJhdG9yLm5leHQoKSwgc3RvcmUsIHN0YXRlKTtcbiAgICAgICAgICByZXR1cm4gZ2VuZXJhdG9yLm5leHQoKS52YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHN0YXRlO1xufVxuIl19