"use strict";function cov_2dk3lji2lf(){var path="/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/simple-bot/state-score/hand-score.ts";var hash="e9eb669da2372b0ee3402727306c3105a702891e";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/simple-bot/state-score/hand-score.ts",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:62}},"1":{start:{line:3,column:0},end:{line:3,column:27}},"2":{start:{line:4,column:15},end:{line:4,column:36}},"3":{start:{line:5,column:16},end:{line:5,column:34}},"4":{start:{line:6,column:22},end:{line:6,column:66}},"5":{start:{line:7,column:23},end:{line:7,column:68}},"6":{start:{line:8,column:21},end:{line:8,column:64}},"7":{start:{line:9,column:23},end:{line:9,column:68}},"8":{start:{line:12,column:23},end:{line:12,column:54}},"9":{start:{line:13,column:23},end:{line:13,column:47}},"10":{start:{line:14,column:29},end:{line:14,column:74}},"11":{start:{line:14,column:53},end:{line:14,column:73}},"12":{start:{line:15,column:33},end:{line:15,column:35}},"13":{start:{line:16,column:8},end:{line:20,column:11}},"14":{start:{line:17,column:12},end:{line:19,column:13}},"15":{start:{line:18,column:16},end:{line:18,column:49}},"16":{start:{line:21,column:20},end:{line:21,column:21}},"17":{start:{line:22,column:24},end:{line:22,column:29}},"18":{start:{line:23,column:25},end:{line:23,column:30}},"19":{start:{line:24,column:23},end:{line:24,column:28}},"20":{start:{line:25,column:27},end:{line:25,column:32}},"21":{start:{line:26,column:8},end:{line:49,column:11}},"22":{start:{line:27,column:12},end:{line:48,column:13}},"23":{start:{line:28,column:16},end:{line:28,column:33}},"24":{start:{line:29,column:16},end:{line:29,column:42}},"25":{start:{line:31,column:17},end:{line:48,column:13}},"26":{start:{line:32,column:16},end:{line:32,column:34}},"27":{start:{line:33,column:16},end:{line:33,column:42}},"28":{start:{line:34,column:16},end:{line:36,column:17}},"29":{start:{line:35,column:20},end:{line:35,column:36}},"30":{start:{line:37,column:30},end:{line:37,column:69}},"31":{start:{line:38,column:16},end:{line:41,column:17}},"32":{start:{line:39,column:20},end:{line:39,column:51}},"33":{start:{line:40,column:20},end:{line:40,column:54}},"34":{start:{line:43,column:17},end:{line:48,column:13}},"35":{start:{line:44,column:16},end:{line:46,column:17}},"36":{start:{line:45,column:20},end:{line:45,column:40}},"37":{start:{line:47,column:16},end:{line:47,column:42}},"38":{start:{line:50,column:8},end:{line:52,column:9}},"39":{start:{line:51,column:12},end:{line:51,column:38}},"40":{start:{line:53,column:8},end:{line:55,column:9}},"41":{start:{line:54,column:12},end:{line:54,column:39}},"42":{start:{line:56,column:8},end:{line:58,column:9}},"43":{start:{line:57,column:12},end:{line:57,column:51}},"44":{start:{line:59,column:8},end:{line:61,column:9}},"45":{start:{line:60,column:12},end:{line:60,column:41}},"46":{start:{line:62,column:8},end:{line:62,column:21}},"47":{start:{line:65,column:0},end:{line:65,column:30}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:11,column:4},end:{line:11,column:5}},loc:{start:{line:11,column:30},end:{line:63,column:5}},line:11},"1":{name:"(anonymous_1)",decl:{start:{line:14,column:48},end:{line:14,column:49}},loc:{start:{line:14,column:53},end:{line:14,column:73}},line:14},"2":{name:"(anonymous_2)",decl:{start:{line:16,column:63},end:{line:16,column:64}},loc:{start:{line:16,column:91},end:{line:20,column:9}},line:16},"3":{name:"(anonymous_3)",decl:{start:{line:26,column:34},end:{line:26,column:35}},loc:{start:{line:26,column:39},end:{line:49,column:9}},line:26}},branchMap:{"0":{loc:{start:{line:17,column:12},end:{line:19,column:13}},type:"if",locations:[{start:{line:17,column:12},end:{line:19,column:13}},{start:{line:17,column:12},end:{line:19,column:13}}],line:17},"1":{loc:{start:{line:27,column:12},end:{line:48,column:13}},type:"if",locations:[{start:{line:27,column:12},end:{line:48,column:13}},{start:{line:27,column:12},end:{line:48,column:13}}],line:27},"2":{loc:{start:{line:31,column:17},end:{line:48,column:13}},type:"if",locations:[{start:{line:31,column:17},end:{line:48,column:13}},{start:{line:31,column:17},end:{line:48,column:13}}],line:31},"3":{loc:{start:{line:34,column:16},end:{line:36,column:17}},type:"if",locations:[{start:{line:34,column:16},end:{line:36,column:17}},{start:{line:34,column:16},end:{line:36,column:17}}],line:34},"4":{loc:{start:{line:38,column:16},end:{line:41,column:17}},type:"if",locations:[{start:{line:38,column:16},end:{line:41,column:17}},{start:{line:38,column:16},end:{line:41,column:17}}],line:38},"5":{loc:{start:{line:43,column:17},end:{line:48,column:13}},type:"if",locations:[{start:{line:43,column:17},end:{line:48,column:13}},{start:{line:43,column:17},end:{line:48,column:13}}],line:43},"6":{loc:{start:{line:44,column:16},end:{line:46,column:17}},type:"if",locations:[{start:{line:44,column:16},end:{line:46,column:17}},{start:{line:44,column:16},end:{line:46,column:17}}],line:44},"7":{loc:{start:{line:50,column:8},end:{line:52,column:9}},type:"if",locations:[{start:{line:50,column:8},end:{line:52,column:9}},{start:{line:50,column:8},end:{line:52,column:9}}],line:50},"8":{loc:{start:{line:53,column:8},end:{line:55,column:9}},type:"if",locations:[{start:{line:53,column:8},end:{line:55,column:9}},{start:{line:53,column:8},end:{line:55,column:9}}],line:53},"9":{loc:{start:{line:56,column:8},end:{line:58,column:9}},type:"if",locations:[{start:{line:56,column:8},end:{line:58,column:9}},{start:{line:56,column:8},end:{line:58,column:9}}],line:56},"10":{loc:{start:{line:56,column:12},end:{line:56,column:36}},type:"binary-expr",locations:[{start:{line:56,column:12},end:{line:56,column:20}},{start:{line:56,column:24},end:{line:56,column:36}}],line:56},"11":{loc:{start:{line:59,column:8},end:{line:61,column:9}},type:"if",locations:[{start:{line:59,column:8},end:{line:61,column:9}},{start:{line:59,column:8},end:{line:61,column:9}}],line:59}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0},f:{"0":0,"1":0,"2":0,"3":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0]},inputSourceMap:{version:3,file:"/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/simple-bot/state-score/hand-score.ts",sources:["/Users/joemyerscough/Documents/GitHub/ptcg-epsd/ptcg-server/src/simple-bot/state-score/hand-score.ts"],names:[],mappings:";;;AAAA,qCAA+C;AAC/C,mCAAsC;AACtC,mEAA+D;AAC/D,qEAAiE;AACjE,iEAAsE;AACtE,qEAAiE;AAGjE,MAAa,SAAU,SAAQ,mBAAW;IAEjC,QAAQ,CAAC,KAAY,EAAE,QAAgB;QAC5C,MAAM,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;QAC/C,MAAM,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC;QAExC,MAAM,YAAY,GAAG,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC;QAEnE,MAAM,gBAAgB,GAAa,EAAE,CAAC;QACtC,MAAM,CAAC,cAAc,CAAC,iBAAU,CAAC,aAAa,EAAE,CAAC,QAAQ,EAAE,IAAI,EAAE,MAAM,EAAE,EAAE;YACzE,IAAI,QAAQ,CAAC,iBAAiB,GAAG,KAAK,CAAC,IAAI,EAAE;gBAC3C,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;aAClC;QACH,CAAC,CAAC,CAAC;QAEH,IAAI,KAAK,GAAG,CAAC,CAAC;QACd,IAAI,SAAS,GAAG,KAAK,CAAC;QACtB,IAAI,UAAU,GAAG,KAAK,CAAC;QACvB,IAAI,QAAQ,GAAG,KAAK,CAAC;QACrB,IAAI,YAAY,GAAG,KAAK,CAAC;QAEzB,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE;YAC5B,IAAI,CAAC,YAAY,wBAAU,EAAE;gBAC3B,SAAS,GAAG,IAAI,CAAC;gBACjB,KAAK,IAAI,MAAM,CAAC,SAAS,CAAC;aAC3B;iBAAM,IAAI,CAAC,YAAY,0BAAW,EAAE;gBACnC,UAAU,GAAG,IAAI,CAAC;gBAClB,KAAK,IAAI,MAAM,CAAC,SAAS,CAAC;gBAC1B,IAAI,CAAC,CAAC,KAAK,KAAK,kBAAK,CAAC,KAAK,EAAE;oBAC3B,QAAQ,GAAG,IAAI,CAAC;iBACjB;gBACD,MAAM,KAAK,GAAG,gBAAgB,CAAC,OAAO,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC;gBACtD,IAAI,KAAK,KAAK,CAAC,CAAC,EAAE;oBAChB,KAAK,IAAI,MAAM,CAAC,cAAc,CAAC;oBAC/B,gBAAgB,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;iBACnC;aACF;iBAAM,IAAI,CAAC,YAAY,0BAAW,EAAE;gBACnC,IAAI,CAAC,CAAC,WAAW,KAAK,wBAAW,CAAC,SAAS,EAAE;oBAC3C,YAAY,GAAG,IAAI,CAAC;iBACrB;gBACD,KAAK,IAAI,MAAM,CAAC,SAAS,CAAC;aAC3B;QACH,CAAC,CAAC,CAAC;QAEH,IAAI,SAAS,EAAE;YACb,KAAK,IAAI,MAAM,CAAC,SAAS,CAAC;SAC3B;QAED,IAAI,UAAU,EAAE;YACd,KAAK,IAAI,MAAM,CAAC,UAAU,CAAC;SAC5B;QAED,IAAI,QAAQ,IAAI,YAAY,EAAE;YAC5B,KAAK,IAAI,MAAM,CAAC,sBAAsB,CAAC;SACxC;QAED,IAAI,YAAY,EAAE;YAChB,KAAK,IAAI,MAAM,CAAC,YAAY,CAAC;SAC9B;QAED,OAAO,KAAK,CAAC;IACf,CAAC;CAEF;AA/DD,8BA+DC",sourcesContent:["import { State, PlayerType } from '../../game';\nimport { SimpleScore } from './score';\nimport { EnergyCard } from '../../game/store/card/energy-card';\nimport { PokemonCard } from '../../game/store/card/pokemon-card';\nimport { Stage, TrainerType } from '../../game/store/card/card-types';\nimport { TrainerCard } from '../../game/store/card/trainer-card';\n\n\nexport class HandScore extends SimpleScore {\n\n  public getScore(state: State, playerId: number): number {\n    const player = this.getPlayer(state, playerId);\n    const scores = this.options.scores.hand;\n\n    const isBenchEmpty = player.bench.every(b => b.cards.length === 0);\n\n    const pokemonsToEvolve: string[] = [];\n    player.forEachPokemon(PlayerType.BOTTOM_PLAYER, (cardList, card, target) => {\n      if (cardList.pokemonPlayedTurn < state.turn) {\n        pokemonsToEvolve.push(card.name);\n      }\n    });\n\n    let score = 0;\n    let hasEnergy = false;\n    let hasPokemon = false;\n    let hasBasic = false;\n    let hasSupporter = false;\n\n    player.hand.cards.forEach(c => {\n      if (c instanceof EnergyCard) {\n        hasEnergy = true;\n        score += scores.cardScore;\n      } else if (c instanceof PokemonCard) {\n        hasPokemon = true;\n        score += scores.cardScore;\n        if (c.stage === Stage.BASIC) {\n          hasBasic = true;\n        }\n        const index = pokemonsToEvolve.indexOf(c.evolvesFrom);\n        if (index !== -1) {\n          score += scores.evolutionScore;\n          pokemonsToEvolve.splice(index, 1);\n        }\n      } else if (c instanceof TrainerCard) {\n        if (c.trainerType === TrainerType.SUPPORTER) {\n          hasSupporter = true;\n        }\n        score += scores.itemScore;\n      }\n    });\n\n    if (hasEnergy) {\n      score += scores.hasEnergy;\n    }\n\n    if (hasPokemon) {\n      score += scores.hasPokemon;\n    }\n\n    if (hasBasic && isBenchEmpty) {\n      score += scores.hasBasicWhenBenchEmpty;\n    }\n\n    if (hasSupporter) {\n      score += scores.hasSupporter;\n    }\n\n    return score;\n  }\n\n}\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e9eb669da2372b0ee3402727306c3105a702891e"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2dk3lji2lf=function(){return actualCoverage;};}return actualCoverage;}cov_2dk3lji2lf();cov_2dk3lji2lf().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_2dk3lji2lf().s[1]++;exports.HandScore=void 0;const game_1=(cov_2dk3lji2lf().s[2]++,require("../../game"));const score_1=(cov_2dk3lji2lf().s[3]++,require("./score"));const energy_card_1=(cov_2dk3lji2lf().s[4]++,require("../../game/store/card/energy-card"));const pokemon_card_1=(cov_2dk3lji2lf().s[5]++,require("../../game/store/card/pokemon-card"));const card_types_1=(cov_2dk3lji2lf().s[6]++,require("../../game/store/card/card-types"));const trainer_card_1=(cov_2dk3lji2lf().s[7]++,require("../../game/store/card/trainer-card"));class HandScore extends(score_1.SimpleScore){getScore(state,playerId){cov_2dk3lji2lf().f[0]++;const player=(cov_2dk3lji2lf().s[8]++,this.getPlayer(state,playerId));const scores=(cov_2dk3lji2lf().s[9]++,this.options.scores.hand);const isBenchEmpty=(cov_2dk3lji2lf().s[10]++,player.bench.every(b=>{cov_2dk3lji2lf().f[1]++;cov_2dk3lji2lf().s[11]++;return b.cards.length===0;}));const pokemonsToEvolve=(cov_2dk3lji2lf().s[12]++,[]);cov_2dk3lji2lf().s[13]++;player.forEachPokemon(game_1.PlayerType.BOTTOM_PLAYER,(cardList,card,target)=>{cov_2dk3lji2lf().f[2]++;cov_2dk3lji2lf().s[14]++;if(cardList.pokemonPlayedTurn<state.turn){cov_2dk3lji2lf().b[0][0]++;cov_2dk3lji2lf().s[15]++;pokemonsToEvolve.push(card.name);}else{cov_2dk3lji2lf().b[0][1]++;}});let score=(cov_2dk3lji2lf().s[16]++,0);let hasEnergy=(cov_2dk3lji2lf().s[17]++,false);let hasPokemon=(cov_2dk3lji2lf().s[18]++,false);let hasBasic=(cov_2dk3lji2lf().s[19]++,false);let hasSupporter=(cov_2dk3lji2lf().s[20]++,false);cov_2dk3lji2lf().s[21]++;player.hand.cards.forEach(c=>{cov_2dk3lji2lf().f[3]++;cov_2dk3lji2lf().s[22]++;if(c instanceof energy_card_1.EnergyCard){cov_2dk3lji2lf().b[1][0]++;cov_2dk3lji2lf().s[23]++;hasEnergy=true;cov_2dk3lji2lf().s[24]++;score+=scores.cardScore;}else{cov_2dk3lji2lf().b[1][1]++;cov_2dk3lji2lf().s[25]++;if(c instanceof pokemon_card_1.PokemonCard){cov_2dk3lji2lf().b[2][0]++;cov_2dk3lji2lf().s[26]++;hasPokemon=true;cov_2dk3lji2lf().s[27]++;score+=scores.cardScore;cov_2dk3lji2lf().s[28]++;if(c.stage===card_types_1.Stage.BASIC){cov_2dk3lji2lf().b[3][0]++;cov_2dk3lji2lf().s[29]++;hasBasic=true;}else{cov_2dk3lji2lf().b[3][1]++;}const index=(cov_2dk3lji2lf().s[30]++,pokemonsToEvolve.indexOf(c.evolvesFrom));cov_2dk3lji2lf().s[31]++;if(index!==-1){cov_2dk3lji2lf().b[4][0]++;cov_2dk3lji2lf().s[32]++;score+=scores.evolutionScore;cov_2dk3lji2lf().s[33]++;pokemonsToEvolve.splice(index,1);}else{cov_2dk3lji2lf().b[4][1]++;}}else{cov_2dk3lji2lf().b[2][1]++;cov_2dk3lji2lf().s[34]++;if(c instanceof trainer_card_1.TrainerCard){cov_2dk3lji2lf().b[5][0]++;cov_2dk3lji2lf().s[35]++;if(c.trainerType===card_types_1.TrainerType.SUPPORTER){cov_2dk3lji2lf().b[6][0]++;cov_2dk3lji2lf().s[36]++;hasSupporter=true;}else{cov_2dk3lji2lf().b[6][1]++;}cov_2dk3lji2lf().s[37]++;score+=scores.itemScore;}else{cov_2dk3lji2lf().b[5][1]++;}}}});cov_2dk3lji2lf().s[38]++;if(hasEnergy){cov_2dk3lji2lf().b[7][0]++;cov_2dk3lji2lf().s[39]++;score+=scores.hasEnergy;}else{cov_2dk3lji2lf().b[7][1]++;}cov_2dk3lji2lf().s[40]++;if(hasPokemon){cov_2dk3lji2lf().b[8][0]++;cov_2dk3lji2lf().s[41]++;score+=scores.hasPokemon;}else{cov_2dk3lji2lf().b[8][1]++;}cov_2dk3lji2lf().s[42]++;if((cov_2dk3lji2lf().b[10][0]++,hasBasic)&&(cov_2dk3lji2lf().b[10][1]++,isBenchEmpty)){cov_2dk3lji2lf().b[9][0]++;cov_2dk3lji2lf().s[43]++;score+=scores.hasBasicWhenBenchEmpty;}else{cov_2dk3lji2lf().b[9][1]++;}cov_2dk3lji2lf().s[44]++;if(hasSupporter){cov_2dk3lji2lf().b[11][0]++;cov_2dk3lji2lf().s[45]++;score+=scores.hasSupporter;}else{cov_2dk3lji2lf().b[11][1]++;}cov_2dk3lji2lf().s[46]++;return score;}}cov_2dk3lji2lf().s[47]++;exports.HandScore=HandScore;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2pvZW15ZXJzY291Z2gvRG9jdW1lbnRzL0dpdEh1Yi9wdGNnLWVwc2QvcHRjZy1zZXJ2ZXIvc3JjL3NpbXBsZS1ib3Qvc3RhdGUtc2NvcmUvaGFuZC1zY29yZS50cyIsInNvdXJjZXMiOlsiL1VzZXJzL2pvZW15ZXJzY291Z2gvRG9jdW1lbnRzL0dpdEh1Yi9wdGNnLWVwc2QvcHRjZy1zZXJ2ZXIvc3JjL3NpbXBsZS1ib3Qvc3RhdGUtc2NvcmUvaGFuZC1zY29yZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSxxQ0FBK0M7QUFDL0MsbUNBQXNDO0FBQ3RDLG1FQUErRDtBQUMvRCxxRUFBaUU7QUFDakUsaUVBQXNFO0FBQ3RFLHFFQUFpRTtBQUdqRSxNQUFhLFNBQVUsU0FBUSxtQkFBVztJQUVqQyxRQUFRLENBQUMsS0FBWSxFQUFFLFFBQWdCO1FBQzVDLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxDQUFDO1FBQy9DLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQztRQUV4QyxNQUFNLFlBQVksR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsTUFBTSxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBRW5FLE1BQU0sZ0JBQWdCLEdBQWEsRUFBRSxDQUFDO1FBQ3RDLE1BQU0sQ0FBQyxjQUFjLENBQUMsaUJBQVUsQ0FBQyxhQUFhLEVBQUUsQ0FBQyxRQUFRLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxFQUFFO1lBQ3pFLElBQUksUUFBUSxDQUFDLGlCQUFpQixHQUFHLEtBQUssQ0FBQyxJQUFJLEVBQUU7Z0JBQzNDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7YUFDbEM7UUFDSCxDQUFDLENBQUMsQ0FBQztRQUVILElBQUksS0FBSyxHQUFHLENBQUMsQ0FBQztRQUNkLElBQUksU0FBUyxHQUFHLEtBQUssQ0FBQztRQUN0QixJQUFJLFVBQVUsR0FBRyxLQUFLLENBQUM7UUFDdkIsSUFBSSxRQUFRLEdBQUcsS0FBSyxDQUFDO1FBQ3JCLElBQUksWUFBWSxHQUFHLEtBQUssQ0FBQztRQUV6QixNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUU7WUFDNUIsSUFBSSxDQUFDLFlBQVksd0JBQVUsRUFBRTtnQkFDM0IsU0FBUyxHQUFHLElBQUksQ0FBQztnQkFDakIsS0FBSyxJQUFJLE1BQU0sQ0FBQyxTQUFTLENBQUM7YUFDM0I7aUJBQU0sSUFBSSxDQUFDLFlBQVksMEJBQVcsRUFBRTtnQkFDbkMsVUFBVSxHQUFHLElBQUksQ0FBQztnQkFDbEIsS0FBSyxJQUFJLE1BQU0sQ0FBQyxTQUFTLENBQUM7Z0JBQzFCLElBQUksQ0FBQyxDQUFDLEtBQUssS0FBSyxrQkFBSyxDQUFDLEtBQUssRUFBRTtvQkFDM0IsUUFBUSxHQUFHLElBQUksQ0FBQztpQkFDakI7Z0JBQ0QsTUFBTSxLQUFLLEdBQUcsZ0JBQWdCLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQztnQkFDdEQsSUFBSSxLQUFLLEtBQUssQ0FBQyxDQUFDLEVBQUU7b0JBQ2hCLEtBQUssSUFBSSxNQUFNLENBQUMsY0FBYyxDQUFDO29CQUMvQixnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDO2lCQUNuQzthQUNGO2lCQUFNLElBQUksQ0FBQyxZQUFZLDBCQUFXLEVBQUU7Z0JBQ25DLElBQUksQ0FBQyxDQUFDLFdBQVcsS0FBSyx3QkFBVyxDQUFDLFNBQVMsRUFBRTtvQkFDM0MsWUFBWSxHQUFHLElBQUksQ0FBQztpQkFDckI7Z0JBQ0QsS0FBSyxJQUFJLE1BQU0sQ0FBQyxTQUFTLENBQUM7YUFDM0I7UUFDSCxDQUFDLENBQUMsQ0FBQztRQUVILElBQUksU0FBUyxFQUFFO1lBQ2IsS0FBSyxJQUFJLE1BQU0sQ0FBQyxTQUFTLENBQUM7U0FDM0I7UUFFRCxJQUFJLFVBQVUsRUFBRTtZQUNkLEtBQUssSUFBSSxNQUFNLENBQUMsVUFBVSxDQUFDO1NBQzVCO1FBRUQsSUFBSSxRQUFRLElBQUksWUFBWSxFQUFFO1lBQzVCLEtBQUssSUFBSSxNQUFNLENBQUMsc0JBQXNCLENBQUM7U0FDeEM7UUFFRCxJQUFJLFlBQVksRUFBRTtZQUNoQixLQUFLLElBQUksTUFBTSxDQUFDLFlBQVksQ0FBQztTQUM5QjtRQUVELE9BQU8sS0FBSyxDQUFDO0lBQ2YsQ0FBQztDQUVGO0FBL0RELDhCQStEQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFN0YXRlLCBQbGF5ZXJUeXBlIH0gZnJvbSAnLi4vLi4vZ2FtZSc7XG5pbXBvcnQgeyBTaW1wbGVTY29yZSB9IGZyb20gJy4vc2NvcmUnO1xuaW1wb3J0IHsgRW5lcmd5Q2FyZCB9IGZyb20gJy4uLy4uL2dhbWUvc3RvcmUvY2FyZC9lbmVyZ3ktY2FyZCc7XG5pbXBvcnQgeyBQb2tlbW9uQ2FyZCB9IGZyb20gJy4uLy4uL2dhbWUvc3RvcmUvY2FyZC9wb2tlbW9uLWNhcmQnO1xuaW1wb3J0IHsgU3RhZ2UsIFRyYWluZXJUeXBlIH0gZnJvbSAnLi4vLi4vZ2FtZS9zdG9yZS9jYXJkL2NhcmQtdHlwZXMnO1xuaW1wb3J0IHsgVHJhaW5lckNhcmQgfSBmcm9tICcuLi8uLi9nYW1lL3N0b3JlL2NhcmQvdHJhaW5lci1jYXJkJztcblxuXG5leHBvcnQgY2xhc3MgSGFuZFNjb3JlIGV4dGVuZHMgU2ltcGxlU2NvcmUge1xuXG4gIHB1YmxpYyBnZXRTY29yZShzdGF0ZTogU3RhdGUsIHBsYXllcklkOiBudW1iZXIpOiBudW1iZXIge1xuICAgIGNvbnN0IHBsYXllciA9IHRoaXMuZ2V0UGxheWVyKHN0YXRlLCBwbGF5ZXJJZCk7XG4gICAgY29uc3Qgc2NvcmVzID0gdGhpcy5vcHRpb25zLnNjb3Jlcy5oYW5kO1xuXG4gICAgY29uc3QgaXNCZW5jaEVtcHR5ID0gcGxheWVyLmJlbmNoLmV2ZXJ5KGIgPT4gYi5jYXJkcy5sZW5ndGggPT09IDApO1xuXG4gICAgY29uc3QgcG9rZW1vbnNUb0V2b2x2ZTogc3RyaW5nW10gPSBbXTtcbiAgICBwbGF5ZXIuZm9yRWFjaFBva2Vtb24oUGxheWVyVHlwZS5CT1RUT01fUExBWUVSLCAoY2FyZExpc3QsIGNhcmQsIHRhcmdldCkgPT4ge1xuICAgICAgaWYgKGNhcmRMaXN0LnBva2Vtb25QbGF5ZWRUdXJuIDwgc3RhdGUudHVybikge1xuICAgICAgICBwb2tlbW9uc1RvRXZvbHZlLnB1c2goY2FyZC5uYW1lKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGxldCBzY29yZSA9IDA7XG4gICAgbGV0IGhhc0VuZXJneSA9IGZhbHNlO1xuICAgIGxldCBoYXNQb2tlbW9uID0gZmFsc2U7XG4gICAgbGV0IGhhc0Jhc2ljID0gZmFsc2U7XG4gICAgbGV0IGhhc1N1cHBvcnRlciA9IGZhbHNlO1xuXG4gICAgcGxheWVyLmhhbmQuY2FyZHMuZm9yRWFjaChjID0+IHtcbiAgICAgIGlmIChjIGluc3RhbmNlb2YgRW5lcmd5Q2FyZCkge1xuICAgICAgICBoYXNFbmVyZ3kgPSB0cnVlO1xuICAgICAgICBzY29yZSArPSBzY29yZXMuY2FyZFNjb3JlO1xuICAgICAgfSBlbHNlIGlmIChjIGluc3RhbmNlb2YgUG9rZW1vbkNhcmQpIHtcbiAgICAgICAgaGFzUG9rZW1vbiA9IHRydWU7XG4gICAgICAgIHNjb3JlICs9IHNjb3Jlcy5jYXJkU2NvcmU7XG4gICAgICAgIGlmIChjLnN0YWdlID09PSBTdGFnZS5CQVNJQykge1xuICAgICAgICAgIGhhc0Jhc2ljID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpbmRleCA9IHBva2Vtb25zVG9Fdm9sdmUuaW5kZXhPZihjLmV2b2x2ZXNGcm9tKTtcbiAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgIHNjb3JlICs9IHNjb3Jlcy5ldm9sdXRpb25TY29yZTtcbiAgICAgICAgICBwb2tlbW9uc1RvRXZvbHZlLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoYyBpbnN0YW5jZW9mIFRyYWluZXJDYXJkKSB7XG4gICAgICAgIGlmIChjLnRyYWluZXJUeXBlID09PSBUcmFpbmVyVHlwZS5TVVBQT1JURVIpIHtcbiAgICAgICAgICBoYXNTdXBwb3J0ZXIgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHNjb3JlICs9IHNjb3Jlcy5pdGVtU2NvcmU7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAoaGFzRW5lcmd5KSB7XG4gICAgICBzY29yZSArPSBzY29yZXMuaGFzRW5lcmd5O1xuICAgIH1cblxuICAgIGlmIChoYXNQb2tlbW9uKSB7XG4gICAgICBzY29yZSArPSBzY29yZXMuaGFzUG9rZW1vbjtcbiAgICB9XG5cbiAgICBpZiAoaGFzQmFzaWMgJiYgaXNCZW5jaEVtcHR5KSB7XG4gICAgICBzY29yZSArPSBzY29yZXMuaGFzQmFzaWNXaGVuQmVuY2hFbXB0eTtcbiAgICB9XG5cbiAgICBpZiAoaGFzU3VwcG9ydGVyKSB7XG4gICAgICBzY29yZSArPSBzY29yZXMuaGFzU3VwcG9ydGVyO1xuICAgIH1cblxuICAgIHJldHVybiBzY29yZTtcbiAgfVxuXG59XG4iXX0=
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qb2VteWVyc2NvdWdoL0RvY3VtZW50cy9HaXRIdWIvcHRjZy1lcHNkL3B0Y2ctc2VydmVyL3NyYy9zaW1wbGUtYm90L3N0YXRlLXNjb3JlL2hhbmQtc2NvcmUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Iit1VkFpQkk7Nk5BakJKLEtBQUEsQ0FBQSxNQUFBLDBCQUFBLE9BQUEsQ0FBQSxZQUFBLENBQUEsQ0FBQSxDQUNBLEtBQUEsQ0FBQSxPQUFBLDBCQUFBLE9BQUEsQ0FBQSxTQUFBLENBQUEsQ0FBQSxDQUNBLEtBQUEsQ0FBQSxhQUFBLDBCQUFBLE9BQUEsQ0FBQSxtQ0FBQSxDQUFBLENBQUEsQ0FDQSxLQUFBLENBQUEsY0FBQSwwQkFBQSxPQUFBLENBQUEsb0NBQUEsQ0FBQSxDQUFBLENBQ0EsS0FBQSxDQUFBLFlBQUEsMEJBQUEsT0FBQSxDQUFBLGtDQUFBLENBQUEsQ0FBQSxDQUNBLEtBQUEsQ0FBQSxjQUFBLDBCQUFBLE9BQUEsQ0FBQSxvQ0FBQSxDQUFBLENBQUEsQ0FHQSxLQUFhLENBQUEsU0FBYixTQUErQixPQUFBLENBQUEsV0FBL0IsQ0FBMEMsQ0FFakMsUUFBUSxDQUFDLEtBQUQsQ0FBZSxRQUFmLENBQStCLHlCQUM1QyxLQUFNLENBQUEsTUFBTSwwQkFBRyxLQUFLLFNBQUwsQ0FBZSxLQUFmLENBQXNCLFFBQXRCLENBQUgsQ0FBWixDQUNBLEtBQU0sQ0FBQSxNQUFNLDBCQUFHLEtBQUssT0FBTCxDQUFhLE1BQWIsQ0FBb0IsSUFBdkIsQ0FBWixDQUVBLEtBQU0sQ0FBQSxZQUFZLDJCQUFHLE1BQU0sQ0FBQyxLQUFQLENBQWEsS0FBYixDQUFtQixDQUFDLEVBQUksd0RBQUEsQ0FBQSxDQUFDLENBQUMsS0FBRixDQUFRLE1BQVIsR0FBbUIsQ0FBbkIsQ0FBb0IsQ0FBNUMsQ0FBSCxDQUFsQixDQUVBLEtBQU0sQ0FBQSxnQkFBZ0IsMkJBQWEsRUFBYixDQUF0QixDQU40Qyx5QkFPNUMsTUFBTSxDQUFDLGNBQVAsQ0FBc0IsTUFBQSxDQUFBLFVBQUEsQ0FBVyxhQUFqQyxDQUFnRCxDQUFDLFFBQUQsQ0FBVyxJQUFYLENBQWlCLE1BQWpCLEdBQTJCLGtEQUN6RSxHQUFJLFFBQVEsQ0FBQyxpQkFBVCxDQUE2QixLQUFLLENBQUMsSUFBdkMsQ0FBNkMscURBQzNDLGdCQUFnQixDQUFDLElBQWpCLENBQXNCLElBQUksQ0FBQyxJQUEzQixFQUNELENBRkQsaUNBR0QsQ0FKRCxFQU1BLEdBQUksQ0FBQSxLQUFLLDJCQUFHLENBQUgsQ0FBVCxDQUNBLEdBQUksQ0FBQSxTQUFTLDJCQUFHLEtBQUgsQ0FBYixDQUNBLEdBQUksQ0FBQSxVQUFVLDJCQUFHLEtBQUgsQ0FBZCxDQUNBLEdBQUksQ0FBQSxRQUFRLDJCQUFHLEtBQUgsQ0FBWixDQUNBLEdBQUksQ0FBQSxZQUFZLDJCQUFHLEtBQUgsQ0FBaEIsQ0FqQjRDLHlCQW1CNUMsTUFBTSxDQUFDLElBQVAsQ0FBWSxLQUFaLENBQWtCLE9BQWxCLENBQTBCLENBQUMsRUFBRyxrREFDNUIsR0FBSSxDQUFDLFdBQVksQ0FBQSxhQUFBLENBQUEsVUFBakIsQ0FBNkIscURBQzNCLFNBQVMsQ0FBRyxJQUFaLENBRDJCLHlCQUUzQixLQUFLLEVBQUksTUFBTSxDQUFDLFNBQWhCLENBQ0QsQ0FIRCxJQUdPLHdEQUFJLENBQUMsV0FBWSxDQUFBLGNBQUEsQ0FBQSxXQUFqQixDQUE4QixxREFDbkMsVUFBVSxDQUFHLElBQWIsQ0FEbUMseUJBRW5DLEtBQUssRUFBSSxNQUFNLENBQUMsU0FBaEIsQ0FGbUMseUJBR25DLEdBQUksQ0FBQyxDQUFDLEtBQUYsR0FBWSxZQUFBLENBQUEsS0FBQSxDQUFNLEtBQXRCLENBQTZCLHFEQUMzQixRQUFRLENBQUcsSUFBWCxDQUNELENBRkQsaUNBR0EsS0FBTSxDQUFBLEtBQUssMkJBQUcsZ0JBQWdCLENBQUMsT0FBakIsQ0FBeUIsQ0FBQyxDQUFDLFdBQTNCLENBQUgsQ0FBWCxDQU5tQyx5QkFPbkMsR0FBSSxLQUFLLEdBQUssQ0FBQyxDQUFmLENBQWtCLHFEQUNoQixLQUFLLEVBQUksTUFBTSxDQUFDLGNBQWhCLENBRGdCLHlCQUVoQixnQkFBZ0IsQ0FBQyxNQUFqQixDQUF3QixLQUF4QixDQUErQixDQUEvQixFQUNELENBSEQsaUNBSUQsQ0FYTSxJQVdBLHdEQUFJLENBQUMsV0FBWSxDQUFBLGNBQUEsQ0FBQSxXQUFqQixDQUE4QixxREFDbkMsR0FBSSxDQUFDLENBQUMsV0FBRixHQUFrQixZQUFBLENBQUEsV0FBQSxDQUFZLFNBQWxDLENBQTZDLHFEQUMzQyxZQUFZLENBQUcsSUFBZixDQUNELENBRkQsaUNBRG1DLHlCQUluQyxLQUFLLEVBQUksTUFBTSxDQUFDLFNBQWhCLENBQ0QsQ0FMTSxpQ0FLTixFQUNGLENBckJELEVBbkI0Qyx5QkEwQzVDLEdBQUksU0FBSixDQUFlLHFEQUNiLEtBQUssRUFBSSxNQUFNLENBQUMsU0FBaEIsQ0FDRCxDQUZELGlDQTFDNEMseUJBOEM1QyxHQUFJLFVBQUosQ0FBZ0IscURBQ2QsS0FBSyxFQUFJLE1BQU0sQ0FBQyxVQUFoQixDQUNELENBRkQsaUNBOUM0Qyx5QkFrRDVDLEdBQUksNkJBQUEsUUFBUSxnQ0FBSSxZQUFKLENBQVosQ0FBOEIscURBQzVCLEtBQUssRUFBSSxNQUFNLENBQUMsc0JBQWhCLENBQ0QsQ0FGRCxpQ0FsRDRDLHlCQXNENUMsR0FBSSxZQUFKLENBQWtCLHNEQUNoQixLQUFLLEVBQUksTUFBTSxDQUFDLFlBQWhCLENBQ0QsQ0FGRCxrQ0F0RDRDLHlCQTBENUMsTUFBTyxDQUFBLEtBQVAsQ0FDRCxDQTdEdUMsQyx5QkFBMUMsT0FBQSxDQUFBLFNBQUEsQ0FBQSxTQUFBLEMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTdGF0ZSwgUGxheWVyVHlwZSB9IGZyb20gJy4uLy4uL2dhbWUnO1xuaW1wb3J0IHsgU2ltcGxlU2NvcmUgfSBmcm9tICcuL3Njb3JlJztcbmltcG9ydCB7IEVuZXJneUNhcmQgfSBmcm9tICcuLi8uLi9nYW1lL3N0b3JlL2NhcmQvZW5lcmd5LWNhcmQnO1xuaW1wb3J0IHsgUG9rZW1vbkNhcmQgfSBmcm9tICcuLi8uLi9nYW1lL3N0b3JlL2NhcmQvcG9rZW1vbi1jYXJkJztcbmltcG9ydCB7IFN0YWdlLCBUcmFpbmVyVHlwZSB9IGZyb20gJy4uLy4uL2dhbWUvc3RvcmUvY2FyZC9jYXJkLXR5cGVzJztcbmltcG9ydCB7IFRyYWluZXJDYXJkIH0gZnJvbSAnLi4vLi4vZ2FtZS9zdG9yZS9jYXJkL3RyYWluZXItY2FyZCc7XG5cblxuZXhwb3J0IGNsYXNzIEhhbmRTY29yZSBleHRlbmRzIFNpbXBsZVNjb3JlIHtcblxuICBwdWJsaWMgZ2V0U2NvcmUoc3RhdGU6IFN0YXRlLCBwbGF5ZXJJZDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICBjb25zdCBwbGF5ZXIgPSB0aGlzLmdldFBsYXllcihzdGF0ZSwgcGxheWVySWQpO1xuICAgIGNvbnN0IHNjb3JlcyA9IHRoaXMub3B0aW9ucy5zY29yZXMuaGFuZDtcblxuICAgIGNvbnN0IGlzQmVuY2hFbXB0eSA9IHBsYXllci5iZW5jaC5ldmVyeShiID0+IGIuY2FyZHMubGVuZ3RoID09PSAwKTtcblxuICAgIGNvbnN0IHBva2Vtb25zVG9Fdm9sdmU6IHN0cmluZ1tdID0gW107XG4gICAgcGxheWVyLmZvckVhY2hQb2tlbW9uKFBsYXllclR5cGUuQk9UVE9NX1BMQVlFUiwgKGNhcmRMaXN0LCBjYXJkLCB0YXJnZXQpID0+IHtcbiAgICAgIGlmIChjYXJkTGlzdC5wb2tlbW9uUGxheWVkVHVybiA8IHN0YXRlLnR1cm4pIHtcbiAgICAgICAgcG9rZW1vbnNUb0V2b2x2ZS5wdXNoKGNhcmQubmFtZSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBsZXQgc2NvcmUgPSAwO1xuICAgIGxldCBoYXNFbmVyZ3kgPSBmYWxzZTtcbiAgICBsZXQgaGFzUG9rZW1vbiA9IGZhbHNlO1xuICAgIGxldCBoYXNCYXNpYyA9IGZhbHNlO1xuICAgIGxldCBoYXNTdXBwb3J0ZXIgPSBmYWxzZTtcblxuICAgIHBsYXllci5oYW5kLmNhcmRzLmZvckVhY2goYyA9PiB7XG4gICAgICBpZiAoYyBpbnN0YW5jZW9mIEVuZXJneUNhcmQpIHtcbiAgICAgICAgaGFzRW5lcmd5ID0gdHJ1ZTtcbiAgICAgICAgc2NvcmUgKz0gc2NvcmVzLmNhcmRTY29yZTtcbiAgICAgIH0gZWxzZSBpZiAoYyBpbnN0YW5jZW9mIFBva2Vtb25DYXJkKSB7XG4gICAgICAgIGhhc1Bva2Vtb24gPSB0cnVlO1xuICAgICAgICBzY29yZSArPSBzY29yZXMuY2FyZFNjb3JlO1xuICAgICAgICBpZiAoYy5zdGFnZSA9PT0gU3RhZ2UuQkFTSUMpIHtcbiAgICAgICAgICBoYXNCYXNpYyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaW5kZXggPSBwb2tlbW9uc1RvRXZvbHZlLmluZGV4T2YoYy5ldm9sdmVzRnJvbSk7XG4gICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICBzY29yZSArPSBzY29yZXMuZXZvbHV0aW9uU2NvcmU7XG4gICAgICAgICAgcG9rZW1vbnNUb0V2b2x2ZS5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGMgaW5zdGFuY2VvZiBUcmFpbmVyQ2FyZCkge1xuICAgICAgICBpZiAoYy50cmFpbmVyVHlwZSA9PT0gVHJhaW5lclR5cGUuU1VQUE9SVEVSKSB7XG4gICAgICAgICAgaGFzU3VwcG9ydGVyID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBzY29yZSArPSBzY29yZXMuaXRlbVNjb3JlO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKGhhc0VuZXJneSkge1xuICAgICAgc2NvcmUgKz0gc2NvcmVzLmhhc0VuZXJneTtcbiAgICB9XG5cbiAgICBpZiAoaGFzUG9rZW1vbikge1xuICAgICAgc2NvcmUgKz0gc2NvcmVzLmhhc1Bva2Vtb247XG4gICAgfVxuXG4gICAgaWYgKGhhc0Jhc2ljICYmIGlzQmVuY2hFbXB0eSkge1xuICAgICAgc2NvcmUgKz0gc2NvcmVzLmhhc0Jhc2ljV2hlbkJlbmNoRW1wdHk7XG4gICAgfVxuXG4gICAgaWYgKGhhc1N1cHBvcnRlcikge1xuICAgICAgc2NvcmUgKz0gc2NvcmVzLmhhc1N1cHBvcnRlcjtcbiAgICB9XG5cbiAgICByZXR1cm4gc2NvcmU7XG4gIH1cblxufVxuIl19